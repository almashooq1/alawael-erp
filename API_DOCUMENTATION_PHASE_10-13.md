# Phase 10-13 API Documentation\n\n## Overview\n\nComprehensive API reference for Phase 10 (Analytics), Phase 11 (Security), and Phase 13 (DevOps) implementations.\n\n---\n\n## Phase 10 - Analytics API\n\n### Dashboard Endpoints\n\n#### Create Dashboard\n```http\nPOST /api/v1/dashboards\nContent-Type: application/json\nAuthorization: Bearer {token}\n\n{\n  \"name\": \"Sales Dashboard\",\n  \"description\": \"Q1 Sales Performance\",\n  \"layout\": \"grid\",\n  \"refreshInterval\": 30000,\n  \"columns\": 12\n}\n\nResponse: 201 Created\n{\n  \"id\": \"dashboard-uuid\",\n  \"userId\": \"user-123\",\n  \"name\": \"Sales Dashboard\",\n  \"description\": \"Q1 Sales Performance\",\n  \"layout\": \"grid\",\n  \"widgets\": [],\n  \"sharedWith\": [],\n  \"isPublic\": false,\n  \"created_at\": \"2026-02-18T10:30:00Z\"\n}\n```\n\n#### List Dashboards\n```http\nGET /api/v1/dashboards?owned=true&limit=10&offset=0\nAuthorization: Bearer {token}\n\nResponse: 200 OK\n{\n  \"total\": 5,\n  \"limit\": 10,\n  \"offset\": 0,\n  \"data\": [\n    {\n      \"id\": \"dashboard-1\",\n      \"name\": \"Sales Dashboard\",\n      \"widgetCount\": 8,\n      \"lastUpdated\": \"2026-02-18T12:00:00Z\"\n    }\n  ]\n}\n```\n\n#### Get Dashboard\n```http\nGET /api/v1/dashboards/{dashboardId}\nAuthorization: Bearer {token}\n\nResponse: 200 OK\n{\n  \"id\": \"dashboard-uuid\",\n  \"name\": \"Sales Dashboard\",\n  \"widgets\": [\n    {\n      \"id\": \"widget-1\",\n      \"type\": \"metric-card\",\n      \"title\": \"Total Revenue\",\n      \"position\": { \"x\": 0, \"y\": 0, \"width\": 6, \"height\": 4 }\n    }\n  ]\n}\n```\n\n#### Update Dashboard\n```http\nPUT /api/v1/dashboards/{dashboardId}\nContent-Type: application/json\nAuthorization: Bearer {token}\n\n{\n  \"name\": \"Updated Name\",\n  \"description\": \"Updated description\"\n}\n\nResponse: 200 OK\n```\n\n#### Delete Dashboard\n```http\nDELETE /api/v1/dashboards/{dashboardId}\nAuthorization: Bearer {token}\n\nResponse: 204 No Content\n```\n\n#### Share Dashboard\n```http\nPOST /api/v1/dashboards/{dashboardId}/share\nContent-Type: application/json\nAuthorization: Bearer {token}\n\n{\n  \"userIds\": [\"user-456\", \"user-789\"],\n  \"permissions\": \"view\"\n}\n\nResponse: 200 OK\n{\n  \"dashboardId\": \"dashboard-uuid\",\n  \"sharedWith\": [\"user-456\", \"user-789\"],\n  \"timestamp\": \"2026-02-18T10:30:00Z\"\n}\n```\n\n### Widget Endpoints\n\n#### Add Widget\n```http\nPOST /api/v1/dashboards/{dashboardId}/widgets\nContent-Type: application/json\nAuthorization: Bearer {token}\n\n{\n  \"type\": \"line-chart\",\n  \"title\": \"Revenue Trend\",\n  \"position\": { \"x\": 0, \"y\": 4, \"width\": 6, \"height\": 4 },\n  \"config\": {\n    \"dataSource\": \"sales_metrics\",\n    \"refreshInterval\": 30000\n  }\n}\n\nResponse: 201 Created\n{\n  \"id\": \"widget-uuid\",\n  \"type\": \"line-chart\",\n  \"title\": \"Revenue Trend\",\n  \"config\": { ... }\n}\n```\n\n#### Update Widget\n```http\nPUT /api/v1/dashboards/{dashboardId}/widgets/{widgetId}\nContent-Type: application/json\nAuthorization: Bearer {token}\n\n{\n  \"title\": \"Updated Title\",\n  \"config\": { \"refreshInterval\": 60000 }\n}\n\nResponse: 200 OK\n```\n\n#### Get Widget Data\n```http\nGET /api/v1/dashboards/{dashboardId}/widgets/{widgetId}/data\nAuthorization: Bearer {token}\n\nResponse: 200 OK\n{\n  \"id\": \"widget-uuid\",\n  \"title\": \"Revenue Trend\",\n  \"type\": \"line-chart\",\n  \"data\": [\n    { \"timestamp\": \"2026-02-18T10:00:00Z\", \"value\": 100000 },\n    { \"timestamp\": \"2026-02-18T11:00:00Z\", \"value\": 110000 }\n  ],\n  \"lastUpdate\": \"2026-02-18T12:00:00Z\"\n}\n```\n\n#### Refresh Widget\n```http\nPOST /api/v1/dashboards/{dashboardId}/widgets/{widgetId}/refresh\nAuthorization: Bearer {token}\n\nResponse: 200 OK\n{\n  \"id\": \"widget-uuid\",\n  \"status\": \"success\",\n  \"lastUpdate\": \"2026-02-18T12:05:00Z\",\n  \"dataPoints\": 50\n}\n```\n\n### Report Endpoints\n\n#### Create Report\n```http\nPOST /api/v1/reports\nContent-Type: application/json\nAuthorization: Bearer {token}\n\n{\n  \"name\": \"Monthly Sales Report\",\n  \"type\": \"sales\",\n  \"format\": \"pdf\",\n  \"filters\": {\n    \"dateRange\": { \"start\": \"2026-02-01\", \"end\": \"2026-02-28\" }\n  },\n  \"columns\": [\"product\", \"quantity\", \"revenue\"],\n  \"sortBy\": { \"field\": \"revenue\", \"direction\": \"desc\" }\n}\n\nResponse: 201 Created\n{\n  \"id\": \"report-uuid\",\n  \"name\": \"Monthly Sales Report\",\n  \"status\": \"draft\",\n  \"createdAt\": \"2026-02-18T10:30:00Z\"\n}\n```\n\n#### Generate Report\n```http\nPOST /api/v1/reports/{reportId}/generate\nAuthorization: Bearer {token}\n\nResponse: 200 OK\n{\n  \"reportId\": \"report-uuid\",\n  \"status\": \"completed\",\n  \"rowCount\": 150,\n  \"generationTime\": 2500,\n  \"fileSize\": 524288,\n  \"downloadUrl\": \"/api/v1/reports/report-uuid/download\",\n  \"generatedAt\": \"2026-02-18T12:00:00Z\"\n}\n```\n\n#### Schedule Report\n```http\nPOST /api/v1/reports/{reportId}/schedule\nContent-Type: application/json\nAuthorization: Bearer {token}\n\n{\n  \"frequency\": \"monthly\",\n  \"dayOfMonth\": 1,\n  \"time\": \"09:00\",\n  \"recipients\": [\"manager@example.com\"],\n  \"emailSubject\": \"Monthly Sales Report\"\n}\n\nResponse: 201 Created\n{\n  \"id\": \"schedule-uuid\",\n  \"frequency\": \"monthly\",\n  \"nextRun\": \"2026-03-01T09:00:00Z\",\n  \"status\": \"active\"\n}\n```\n\n#### Export Report\n```http\nGET /api/v1/reports/{reportId}/export?format=excel\nAuthorization: Bearer {token}\n\nResponse: 200 OK\nContent-Type: application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\n\n[Binary Excel file]\n```\n\n### Metrics Endpoints\n\n#### Record Metric\n```http\nPOST /api/v1/metrics\nContent-Type: application/json\n\n{\n  \"name\": \"cpu_usage\",\n  \"value\": 45.5,\n  \"tags\": {\n    \"server\": \"prod-1\",\n    \"region\": \"us-east\"\n  }\n}\n\nResponse: 201 Created\n{\n  \"id\": \"metric-uuid\",\n  \"name\": \"cpu_usage\",\n  \"value\": 45.5,\n  \"timestamp\": \"2026-02-18T12:00:00Z\"\n}\n```\n\n#### Get Metric Values\n```http\nGET /api/v1/metrics/{metricName}?start=2026-02-18T10:00:00Z&end=2026-02-18T12:00:00Z\nAuthorization: Bearer {token}\n\nResponse: 200 OK\n{\n  \"name\": \"cpu_usage\",\n  \"values\": [\n    { \"timestamp\": \"2026-02-18T10:00:00Z\", \"value\": 40.2 },\n    { \"timestamp\": \"2026-02-18T11:00:00Z\", \"value\": 45.5 },\n    { \"timestamp\": \"2026-02-18T12:00:00Z\", \"value\": 38.1 }\n  ]\n}\n```\n\n#### Get Metric Statistics\n```http\nGET /api/v1/metrics/{metricName}/stats\nAuthorization: Bearer {token}\n\nResponse: 200 OK\n{\n  \"name\": \"cpu_usage\",\n  \"count\": 100,\n  \"sum\": 4250.5,\n  \"average\": 42.505,\n  \"min\": 15.2,\n  \"max\": 95.8,\n  \"stdDev\": 18.5,\n  \"latest\": 42.5\n}\n```\n\n#### Define KPI\n```http\nPOST /api/v1/kpis\nContent-Type: application/json\nAuthorization: Bearer {token}\n\n{\n  \"name\": \"monthly_revenue\",\n  \"description\": \"Monthly recurring revenue\",\n  \"formula\": \"sum_revenue\",\n  \"target\": 100000,\n  \"unit\": \"USD\",\n  \"category\": \"financial\"\n}\n\nResponse: 201 Created\n```\n\n#### Calculate KPI\n```http\nPOST /api/v1/kpis/{kpiId}/calculate\nContent-Type: application/json\nAuthorization: Bearer {token}\n\n{\n  \"value\": 85000\n}\n\nResponse: 200 OK\n{\n  \"kpiId\": \"kpi-uuid\",\n  \"name\": \"monthly_revenue\",\n  \"value\": 85000,\n  \"target\": 100000,\n  \"percentage\": \"85.00\",\n  \"status\": \"at-risk\",\n  \"unit\": \"USD\"\n}\n```\n\n---\n\n## Phase 11 - Security API\n\n### Authentication Endpoints\n\n#### Register User\n```http\nPOST /api/v1/auth/register\nContent-Type: application/json\n\n{\n  \"username\": \"johnsmith\",\n  \"email\": \"john@example.com\",\n  \"password\": \"SecurePassword123!\"\n}\n\nResponse: 201 Created\n{\n  \"id\": \"user-uuid\",\n  \"username\": \"johnsmith\",\n  \"email\": \"john@example.com\",\n  \"createdAt\": \"2026-02-18T10:30:00Z\"\n}\n```\n\n#### Login\n```http\nPOST /api/v1/auth/login\nContent-Type: application/json\n\n{\n  \"username\": \"johnsmith\",\n  \"password\": \"SecurePassword123!\"\n}\n\nResponse: 200 OK\n{\n  \"sessionId\": \"session-uuid\",\n  \"accessToken\": \"eyJhbGc...\",\n  \"refreshToken\": \"eyJhbGc...\",\n  \"expiresIn\": 3600,\n  \"user\": {\n    \"id\": \"user-uuid\",\n    \"username\": \"johnsmith\",\n    \"email\": \"john@example.com\",\n    \"roles\": [\"employee\"],\n    \"permissions\": [\"read:dashboard\", \"create:report\"]\n  }\n}\n```\n\n#### Verify Token\n```http\nGET /api/v1/auth/verify\nAuthorization: Bearer {token}\n\nResponse: 200 OK\n{\n  \"valid\": true,\n  \"userId\": \"user-uuid\",\n  \"username\": \"johnsmith\",\n  \"roles\": [\"employee\"],\n  \"permissions\": [\"read:dashboard\"]\n}\n```\n\n#### Refresh Token\n```http\nPOST /api/v1/auth/refresh\nContent-Type: application/json\n\n{\n  \"refreshToken\": \"eyJhbGc...\"\n}\n\nResponse: 200 OK\n{\n  \"accessToken\": \"eyJhbGc...\",\n  \"refreshToken\": \"eyJhbGc...\",\n  \"expiresIn\": 3600\n}\n```\n\n#### Enable 2FA\n```http\nPOST /api/v1/auth/2fa/setup\nAuthorization: Bearer {token}\n\nResponse: 200 OK\n{\n  \"secret\": \"JBSWY3DPEBLW64TMMQ...\",\n  \"qrCode\": \"data:image/png;base64,...\",\n  \"backupCodes\": [\"ABC123\", \"DEF456\", ...]\n}\n```\n\n#### Verify 2FA\n```http\nPOST /api/v1/auth/2fa/verify\nContent-Type: application/json\nAuthorization: Bearer {token}\n\n{\n  \"code\": \"123456\"\n}\n\nResponse: 200 OK\n{\n  \"verified\": true,\n  \"message\": \"2FA enabled successfully\"\n}\n```\n\n#### Reset Password\n```http\nPOST /api/v1/auth/password/reset\nContent-Type: application/json\n\n{\n  \"email\": \"john@example.com\"\n}\n\nResponse: 200 OK\n{\n  \"success\": true,\n  \"message\": \"Password reset email sent\"\n}\n```\n\n### RBAC Endpoints\n\n#### Create Role\n```http\nPOST /api/v1/roles\nContent-Type: application/json\nAuthorization: Bearer {admin-token}\n\n{\n  \"name\": \"Content Manager\",\n  \"description\": \"Can manage content\",\n  \"permissions\": [\"content:create\", \"content:edit\", \"content:delete\"]\n}\n\nResponse: 201 Created\n```\n\n#### Assign Role to User\n```http\nPOST /api/v1/users/{userId}/roles/{roleId}\nAuthorization: Bearer {admin-token}\n\nResponse: 200 OK\n{\n  \"userId\": \"user-uuid\",\n  \"roleId\": \"role-uuid\",\n  \"assigned\": true\n}\n```\n\n#### Get User Permissions\n```http\nGET /api/v1/users/{userId}/permissions\nAuthorization: Bearer {token}\n\nResponse: 200 OK\n{\n  \"userId\": \"user-uuid\",\n  \"permissions\": [\n    { \"key\": \"read:dashboard\", \"name\": \"Read Dashboard\" },\n    { \"key\": \"create:report\", \"name\": \"Create Report\" }\n  ]\n}\n```\n\n### Encryption Endpoints\n\n#### Encrypt Data\n```http\nPOST /api/v1/security/encrypt\nContent-Type: application/json\nAuthorization: Bearer {token}\n\n{\n  \"plaintext\": \"Sensitive Information\",\n  \"keyId\": \"default\"\n}\n\nResponse: 200 OK\n{\n  \"encryptedId\": \"enc-uuid\",\n  \"ciphertext\": \"a7f8e9d2c1b...\",\n  \"iv\": \"abcd1234efgh5678\",\n  \"algorithm\": \"aes-256-gcm\"\n}\n```\n\n#### Decrypt Data\n```http\nPOST /api/v1/security/decrypt\nContent-Type: application/json\nAuthorization: Bearer {token}\n\n{\n  \"encryptedId\": \"enc-uuid\",\n  \"keyId\": \"default\"\n}\n\nResponse: 200 OK\n{\n  \"plaintext\": \"Sensitive Information\"\n}\n```\n\n---\n\n## Error Responses\n\nAll endpoints may return the following error responses:\n\n### 400 Bad Request\n```json\n{\n  \"error\": \"invalid_request\",\n  \"message\": \"Required field 'name' is missing\",\n  \"code\": \"VALIDATION_ERROR\"\n}\n```\n\n### 401 Unauthorized\n```json\n{\n  \"error\": \"unauthorized\",\n  \"message\": \"Invalid or missing authentication token\",\n  \"code\": \"AUTH_ERROR\"\n}\n```\n\n### 403 Forbidden\n```json\n{\n  \"error\": \"forbidden\",\n  \"message\": \"User does not have permission for this resource\",\n  \"code\": \"PERMISSION_ERROR\"\n}\n```\n\n### 404 Not Found\n```json\n{\n  \"error\": \"not_found\",\n  \"message\": \"Dashboard with ID 'xyz' not found\",\n  \"code\": \"RESOURCE_NOT_FOUND\"\n}\n```\n\n### 500 Internal Server Error\n```json\n{\n  \"error\": \"server_error\",\n  \"message\": \"An unexpected error occurred\",\n  \"code\": \"INTERNAL_ERROR\",\n  \"requestId\": \"req-12345\"\n}\n```\n\n---\n\n## Rate Limiting\n\nAll APIs are rate-limited:\n- **Standard**: 1000 requests/hour per user\n- **Premium**: 10000 requests/hour per user\n- **Enterprise**: Unlimited\n\nRate limit info is included in response headers:\n```\nX-RateLimit-Limit: 1000\nX-RateLimit-Remaining: 999\nX-RateLimit-Reset: 1645193400\n```\n\n---\n\n**Last Updated**: February 18, 2026  \n**API Version**: 1.0.0\n