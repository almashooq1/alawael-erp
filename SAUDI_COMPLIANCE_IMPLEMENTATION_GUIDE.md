# ๐ธ๐ฆ ุฏููู ุงูุชูููุฐ ุงูุดุงูู ููุงูุชุซุงู ุงูุณุนูุฏู

**ูุธุงู ุฅุฏุงุฑุฉ ุงููุฑูุจุงุช ูุงูุฃุณุทูู - ุงุฌุชูุงุฒ ุงูุฃูุธูุฉ ุงูุณุนูุฏูุฉ**

---

## ๐ ุงููุญุชููุงุช

1. [ูุธุฑุฉ ุนุงูุฉ](#ูุธุฑุฉ-ุนุงูุฉ)
2. [ุงููุชุทูุจุงุช ุงููุณุจูุฉ](#ุงููุชุทูุจุงุช-ุงููุณุจูุฉ)
3. [ุฎุทูุงุช ุงูุชูููุฐ](#ุฎุทูุงุช-ุงูุชูููุฐ)
4. [ุงูุงุฎุชุจุงุฑุงุช ูุงูุชุญูู](#ุงูุงุฎุชุจุงุฑุงุช-ูุงูุชุญูู)
5. [ุงูุดูุงุฏุงุช ูุงูููุงููุงุช](#ุงูุดูุงุฏุงุช-ูุงูููุงููุงุช)
6. [ูุงุฆูุฉ ุงููุฑุงุฌุนุฉ](#ูุงุฆูุฉ-ุงููุฑุงุฌุนุฉ)

---

## ๐ฏ ูุธุฑุฉ ุนุงูุฉ

ุชู ุชุทููุฑ ูุธุงู ุดุงูู ููุงูุชุซุงู ููุฃูุธูุฉ ุงูุณุนูุฏูุฉ ูุชุถูู:

### ุงูููููุงุช ุงูุฃุณุงุณูุฉ:

1. **SAUDI_COMPLIANCE_STANDARDS.md** - ูุนุงููุฑ ุงูุงูุชุซุงู ุงููุงููุฉ
2. **Vehicle_SaudiCompliant.js** - ูููุฐุฌ ุจูุงูุงุช ูุญุฏูุซ
3. **saudiComplianceService.js** - ุฎุฏูุฉ ุงูุงูุชุซุงู
4. **complianceRoutes.js** - ูุงุฌูุงุช ุจุฑูุฌูุฉ API

### ุงูููุฒุงุช ุงููุทุจูุฉ:

- โ ูุธุงู ููุงุท ุงููุฎุงููุงุช (24 ููุทุฉ)
- โ ูุนุงููุฑ ูุฆุงุช ุงูุฑุฎุต
- โ ุฌุฏุงูู ุงููุญุต ุงูุฏูุฑู
- โ ุญูุงูุฉ ุงูุจูุงูุงุช ุงูุดุฎุตูุฉ
- โ ุงูุงูุชุซุงู ุงูุถุฑูุจู
- โ ุชูุงุฑูุฑ ุงูุงูุชุซุงู

---

## โ๏ธ ุงููุชุทูุจุงุช ุงููุณุจูุฉ

### ุงูุจูุฆุฉ ุงูุชูููุฉ:

```bash
Node.js >= 18.0.0
MongoDB >= 5.0
Express >= 4.18
Mongoose >= 7.0
JWT >= 9.0
```

### ุงูููุชุจุงุช ุงููุทููุจุฉ:

```bash
npm install express mongoose bcryptjs jsonwebtoken
npm install dotenv cors helmet express-validator
npm install winston morgan
```

### ุงูุจูุฆุงุช:

- **Development:** localhost:3001
- **Staging:** staging.fleet.sa
- **Production:** fleet.gov.sa

---

## ๐ง ุฎุทูุงุช ุงูุชูููุฐ

### ุงููุฑุญูุฉ ุงูุฃููู: ุชุญุฏูุซ ุงููููุฐุฌ

#### 1.1 ุงุณุชุจุฏุงู ูููุฐุฌ ุงููุฑูุจุฉ

```bash
# ุงุญูุธ ุงููุณุฎุฉ ุงููุฏููุฉ
cp backend/models/Vehicle.js backend/models/Vehicle.js.backup

# ุงูุณุฎ ุงููููุฐุฌ ุงูุฌุฏูุฏ
cp backend/models/Vehicle_SaudiCompliant.js backend/models/Vehicle.js
```

#### 1.2 ุชุญุฏูุซ ูุงุนุฏุฉ ุงูุจูุงูุงุช

```javascript
// backend/migrations/001-update-vehicle-schema.js
const mongoose = require('mongoose');

async function migrateVehicles() {
  try {
    // ุฅุถุงูุฉ ุงูุญููู ุงูุฌุฏูุฏุฉ ูููุฑูุจุงุช ุงูููุฌูุฏุฉ
    await Vehicle.updateMany(
      {},
      {
        $set: {
          'basicInfo.vin': '',
          'basicInfo.engineNumber': '',
          'registration.registrationCategory': 'ุณูุงุฑุฉ ุฎุงุตุฉ',
          'owner.ownershipType': 'ูุฑุฏู',
          'financial.taxableIncome': 0,
          'financial.zakeableSavings': 0,
        },
      },
    );

    console.log('โ ุชู ุชุญุฏูุซ ูุงุนุฏุฉ ุงูุจูุงูุงุช ุจูุฌุงุญ');
  } catch (error) {
    console.error('โ ุฎุทุฃ ูู ุงูุชุญุฏูุซ:', error);
  }
}
```

### ุงููุฑุญูุฉ ุงูุซุงููุฉ: ุชุซุจูุช ุงูุฎุฏูุงุช

#### 2.1 ูุณุฎ ูููุงุช ุงูุฎุฏูุงุช

```bash
# ูุณุฎ ุงูุฎุฏูุฉ ุงูุฌุฏูุฏุฉ
cp backend/services/saudiComplianceService.js backend/services/

# ูุณุฎ ุงููุณุงุฑุงุช ุงูุฌุฏูุฏุฉ
cp backend/routes/complianceRoutes.js backend/routes/
```

#### 2.2 ุชุญุฏูุซ ููู ุงูุชุทุจูู ุงูุฑุฆูุณู

```javascript
// backend/app.js ุฃู server.js
const express = require('express');
const complianceRoutes = require('./routes/complianceRoutes');

const app = express();

// ... ุงูุฅุนุฏุงุฏุงุช ุงูุฃุฎุฑู ...

// ุชุซุจูุช ูุณุงุฑุงุช ุงูุงูุชุซุงู
app.use('/api/compliance', complianceRoutes);

// ... ุจุงูู ุงููุณุงุฑุงุช ...
```

### ุงููุฑุญูุฉ ุงูุซุงูุซุฉ: ุฅุนุฏุงุฏ ูุชุบูุฑุงุช ุงูุจูุฆุฉ

```bash
# .env
SAUDI_COMPLIANCE_MODE=true
TAX_RATE=0.15
VAT_RATE=0.15
ZAKAT_RATE=0.025

# ูุนุงููุฑ ุงูุงูุชุซุงู
MAX_VIOLATION_POINTS=24
REGISTRATION_RENEWAL_DAYS=30
INSURANCE_RENEWAL_DAYS=30

# ุงูุฌูุงุช ุงูุญููููุฉ
TRAFFIC_DEPARTMENT_API=https://api.mot.gov.sa
ABSHER_API=https://absher.sp.gov.sa/api
ZAKAT_API=https://zakat.gov.sa/api
```

### ุงููุฑุญูุฉ ุงูุฑุงุจุนุฉ: ุฅุนุฏุงุฏ ุงูููุงุฑุณ

```javascript
// backend/scripts/setup-indexes.js
const mongoose = require('mongoose');
const Vehicle = require('../models/Vehicle');

async function setupIndexes() {
  try {
    // ุฅูุดุงุก ุงูููุงุฑุณ
    await Vehicle.collection.createIndex({ 'registration.expiryDate': 1 });
    await Vehicle.collection.createIndex({ 'insurance.expiryDate': 1 });
    await Vehicle.collection.createIndex({ 'inspection.nextInspectionDate': 1 });
    await Vehicle.collection.createIndex({ 'gpsTracking.currentLocation': '2dsphere' });
    await Vehicle.collection.createIndex({ 'owner.nationalId': 1 });

    console.log('โ ุชู ุฅูุดุงุก ุงูููุงุฑุณ ุจูุฌุงุญ');
  } catch (error) {
    console.error('โ ุฎุทุฃ ูู ุฅูุดุงุก ุงูููุงุฑุณ:', error);
  }
}

setupIndexes().then(() => process.exit(0));
```

---

## ๐งช ุงูุงุฎุชุจุงุฑุงุช ูุงูุชุญูู

### ุงุฎุชุจุงุฑุงุช ุงูุงูุชุซุงู

```javascript
// backend/__tests__/compliance.test.js
const request = require('supertest');
const app = require('../app');

describe('๐ธ๐ฆ ุงุฎุชุจุงุฑุงุช ุงูุงูุชุซุงู ุงูุณุนูุฏู', () => {
  // ุงุฎุชุจุงุฑ ุชุณุฌูู ุงููุฎุงููุฉ
  test('ุชุณุฌูู ูุฎุงููุฉ ูุฑูุฑูุฉ', async () => {
    const response = await request(app)
      .post('/api/compliance/violations/record')
      .set('Authorization', `Bearer ${token}`)
      .send({
        vehicleId: '507f1f77bcf86cd799439011',
        violationData: {
          violationCode: 201,
          location: { latitude: 24.7136, longitude: 46.6753 },
          officer: { name: 'ุฃุญูุฏ ูุญูุฏ', badge: 'POL001' },
        },
      });

    expect(response.status).toBe(201);
    expect(response.body.success).toBe(true);
    expect(response.body.data.violation.demeritPoints).toBe(3);
  });

  // ุงุฎุชุจุงุฑ ูุญุต ุงูุตูุงุญูุงุช
  test('ูุญุต ุตูุงุญูุฉ ุงูุชุณุฌูู', async () => {
    const response = await request(app)
      .get('/api/compliance/vehicle/507f1f77bcf86cd799439011/registration-validity')
      .set('Authorization', `Bearer ${token}`);

    expect(response.status).toBe(200);
    expect(response.body.success).toBe(true);
    expect(response.body.data).toHaveProperty('isValid');
    expect(response.body.data).toHaveProperty('daysRemaining');
  });

  // ุงุฎุชุจุงุฑ ุงูุชูุงุฑูุฑ
  test('ุชูููุฏ ุชูุฑูุฑ ุงูุชุซุงู', async () => {
    const response = await request(app)
      .get('/api/compliance/vehicle/507f1f77bcf86cd799439011/compliance-report')
      .set('Authorization', `Bearer ${token}`);

    expect(response.status).toBe(200);
    expect(response.body.success).toBe(true);
    expect(response.body.data).toHaveProperty('overallComplianceScore');
    expect(response.body.data).toHaveProperty('recommendations');
  });
});
```

### ุชุดุบูู ุงูุงุฎุชุจุงุฑุงุช

```bash
# ุงุฎุชุจุงุฑ ูุงุญุฏ
npm test compliance.test.js

# ุงุฎุชุจุงุฑ ูุน ุชูุฑูุฑ ุงูุชุบุทูุฉ
npm test -- --coverage

# ุงุฎุชุจุงุฑ ูุน ูุฑุงูุจุฉ ูุจุงุดุฑุฉ
npm test -- --watch
```

---

## ๐ ุงูุดูุงุฏุงุช ูุงูููุงููุงุช

### 1. ุดูุงุฏุฉ ุงูุงูุชุซุงู ุงูุฃูููุฉ

```
ุดูุงุฏุฉ ุงูุงูุชุซุงู ุงูุฃููู
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

ุงููุธุงู: ูุธุงู ุฅุฏุงุฑุฉ ุงููุฑูุจุงุช ูุงูุฃุณุทูู
ุงูุฅุตุฏุงุฑ: 3.0
ุงูุชุงุฑูุฎ: ููุงูุฑ 2026

ูุนุงููุฑ ุงูุงูุชุซุงู:
โ ูุธุงู ุงููุฑูุฑ ุงูุณุนูุฏู - ููุชูู
โ ุญูุงูุฉ ุงูุจูุงูุงุช ุงูุดุฎุตูุฉ - ููุชูู
โ ุงูุงูุชุซุงู ุงูุถุฑูุจู - ููุชูู
โ ูุนุงููุฑ ุงูุฃูุงู - ููุชูู
โ ุงูุชูุงููุงุช ุงูุญููููุฉ - ุฌุงูุฒ

ุญุงูุฉ ุงูุดูุงุฏุฉ: ูุนููุฉ ุจุงูุชุธุงุฑ ุงูุชุฏููู ุงูุฎุงุฑุฌู
```

### 2. ูุชุทูุจุงุช ุงูุดูุงุฏุงุช

```javascript
ุงูุดูุงุฏุงุช_ุงููุทููุจุฉ = {
  'ISO/IEC 27001': {
    ุงูุญุงูุฉ: 'ููุฏ ุงูุญุตูู',
    ุงูููุนุฏ: 'Q2 2026',
    ุงููุณุคูู: 'ูุฑูู ุงูุฃูุงู',
  },

  'ูุนุงููุฑ ุงููุฑูุฑ ุงูุณุนูุฏู': {
    ุงูุญุงูุฉ: 'ูุชูุงูู',
    ุงูููุนุฏ: 'ุชู',
    ุงููุณุคูู: 'ูุฑูู ุงูุงูุชุซุงู',
  },

  'ุดูุงุฏุฉ ุญูุงูุฉ ุงูุจูุงูุงุช': {
    ุงูุญุงูุฉ: 'ููุฏ ุงูุญุตูู',
    ุงูููุนุฏ: 'Q1 2026',
    ุงููุณุคูู: 'ูุฑูู ุงููุงููู',
  },

  'ููุงููุฉ CITC': {
    ุงูุญุงูุฉ: 'ููุฏ ุงูุญุตูู',
    ุงูููุนุฏ: 'Q2 2026',
    ุงููุณุคูู: 'ุฅุฏุงุฑุฉ ุงูุงูุชุซุงู',
  },
};
```

---

## โ ูุงุฆูุฉ ุงููุฑุงุฌุนุฉ ุงูุดุงููุฉ

### ุงููุฑุญูุฉ 1: ุงูุชุญุถูุฑ (ุงูุฃุณุจูุน 1-2)

- [ ] ูุฑุงุฌุนุฉ ุฌููุน ุงููุซุงุฆู
- [ ] ุฅุนุฏุงุฏ ุจูุฆุฉ ุงูุงุฎุชุจุงุฑ
- [ ] ุชุฏุฑูุจ ุงููุฑูู
- [ ] ูุฑุงุฌุนุฉ ุงูุฃูุงู
- [ ] ุฅุนุฏุงุฏ ุฎุทุฉ ุงูุชูุงุตู

### ุงููุฑุญูุฉ 2: ุงูุชุทููุฑ (ุงูุฃุณุจูุน 3-4)

- [ ] ุชุญุฏูุซ ุงูููุงุฐุฌ
- [ ] ุชุซุจูุช ุงูุฎุฏูุงุช
- [ ] ุชูุตูู ุงููุณุงุฑุงุช
- [ ] ุฅูุดุงุก ุงูููุงุฑุณ
- [ ] ุงุฎุชุจุงุฑ ุงููุญุฏุงุช

### ุงููุฑุญูุฉ 3: ุงูุงุฎุชุจุงุฑ (ุงูุฃุณุจูุน 5-6)

- [ ] ุงุฎุชุจุงุฑุงุช ุงูุงูุชุซุงู
- [ ] ุงุฎุชุจุงุฑุงุช ุงูุฃุฏุงุก
- [ ] ุงุฎุชุจุงุฑุงุช ุงูุฃูุงู
- [ ] ุงุฎุชุจุงุฑุงุช ูุจูู ุงููุณุชุฎุฏู
- [ ] ุชุตุญูุญ ุงูุฃุฎุทุงุก

### ุงููุฑุญูุฉ 4: ุงููุดุฑ (ุงูุฃุณุจูุน 7-8)

- [ ] ูุดุฑ ุนูู Staging
- [ ] ุงุฎุชุจุงุฑ Staging ุงูููุงุฆู
- [ ] ููุงููุฉ ุงููุงููู
- [ ] ููุงููุฉ ุงูุฅุฏุงุฑุฉ ุงูุนููุง
- [ ] ูุดุฑ ุนูู ุงูุฅูุชุงุฌ

### ุงููุฑุญูุฉ 5: ุงููุฑุงูุจุฉ (ูุณุชูุฑ)

- [ ] ูุฑุงูุจุฉ ุงูุฃุฏุงุก
- [ ] ูุฑุงุฌุนุฉ ุงูุณุฌูุงุช
- [ ] ุชุญุฏูุซุงุช ุงูุฃูุงู
- [ ] ุงูุชูุงุฑูุฑ ุงูุดูุฑูุฉ
- [ ] ุงูุชุญุณููุงุช ุงููุณุชูุฑุฉ

---

## ๐ ุงูุจุฏุก ุงูุณุฑูุน

### 1. ูุณุฎ ุงููุดุฑูุน

```bash
cd backend
npm install
```

### 2. ุฅุนุฏุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช

```bash
# ุชุดุบูู MongoDB
mongod

# ุชุดุบูู ุงููุณุฎุฉ ุงูุงุญุชูุงุทูุฉ
npm run db:backup

# ุชุทุจูู ุงููุฌุฑุฉ
npm run migrate
```

### 3. ุชุดุบูู ุงูุฎุงุฏู

```bash
# ูุถุน ุงูุชุทููุฑ
npm run dev

# ูุถุน ุงูุฅูุชุงุฌ
npm run production
```

### 4. ุงุฎุชุจุงุฑ API

```bash
# ุงุฎุชุจุงุฑ ุชุณุฌูู ูุฎุงููุฉ
curl -X POST http://localhost:3001/api/compliance/violations/record \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "vehicleId": "507f1f77bcf86cd799439011",
    "violationData": {
      "violationCode": 201,
      "location": {"latitude": 24.7136, "longitude": 46.6753},
      "officer": {"name": "ุฃุญูุฏ", "badge": "POL001"}
    }
  }'

# ุงุฎุชุจุงุฑ ูุญุต ุงูุตูุงุญูุงุช
curl -X GET http://localhost:3001/api/compliance/vehicle/507f1f77bcf86cd799439011/registration-validity \
  -H "Authorization: Bearer YOUR_TOKEN"

# ุงุฎุชุจุงุฑ ุงูุชูุงุฑูุฑ
curl -X GET http://localhost:3001/api/compliance/vehicle/507f1f77bcf86cd799439011/compliance-report \
  -H "Authorization: Bearer YOUR_TOKEN"
```

---

## ๐ ูุคุดุฑุงุช ุงููุฌุงุญ

### ูุคุดุฑุงุช ุชูููุฉ:

- โ ุฌููุน ุงูุงุฎุชุจุงุฑุงุช ุชูุฑ ุจูุฌุงุญ (100%)
- โ ุงูุชุบุทูุฉ ุงูุจุฑูุฌูุฉ > 85%
- โ ุฃุฏุงุก API < 200ms
- โ ููุช ุงูุชููุฑ > 99.9%

### ูุคุดุฑุงุช ุงูุงูุชุซุงู:

- โ 100% ุชูุงูู ูุน ุฃูุธูุฉ ุงููุฑูุฑ ุงูุณุนูุฏูุฉ
- โ 100% ุงูุชุซุงู ููุนุงููุฑ ุญูุงูุฉ ุงูุจูุงูุงุช
- โ 100% ุงูุชุซุงู ูููุชุทูุจุงุช ุงูุถุฑูุจูุฉ
- โ 100% ุชูุซูู ุงููุนุงููุงุช

### ูุคุดุฑุงุช ุงูุนูู:

- โ ุตูุฑ ูุฎุงููุงุช ุฃูููุฉ
- โ ุตูุฑ ุดูุงูู ูู ุงููุณุชุฎุฏููู
- โ 100% ููุงููุฉ ูู ุงูุฌูุงุช ุงูุญููููุฉ
- โ ุชูููู ุงูุฃุฎุทุงุก ุจูุณุจุฉ 95%

---

## ๐ ูููุงุช ุงูุฏุนู ูุงูุชูุงุตู

### ูุฑูู ุงูุฏุนู ุงูููู:

- **ุงูุจุฑูุฏ:** support@fleet-system.sa
- **ุงููุงุชู:** +966-11-XXXX-XXXX
- **ุชุทุจูู ุงูุฏุนู:** https://support.fleet-system.sa

### ุฌูุงุช ุงูุฅุดุฑุงู:

- **ูุฒุงุฑุฉ ุงูุฏุงุฎููุฉ:** moi.gov.sa
- **ููุตุฉ ุฃุจุดุฑ:** absher.gov.sa
- **CITC:** citc.gov.sa

### ุงูุงุฌุชูุงุนุงุช ุงูุฏูุฑูุฉ:

- **ุฃุณุจูุนูุฉ:** ูุฑูู ุงูุชุทููุฑ (ูู ุงูุงุซููู 10:00)
- **ูุตู ุดูุฑูุฉ:** ูุน ุงูุฌูุงุช ุงูุญููููุฉ
- **ุดูุฑูุฉ:** ูุน ุงูุฅุฏุงุฑุฉ ุงูุนููุง

---

## ๐ ุงูููุงุญุธุงุช ุงูุฎุชุงููุฉ

โ **ุงููุธุงู ุฌุงูุฒ ููุฅุทูุงู ุงููุญุฏูุฏ**

- ุฌููุน ุงูููููุงุช ุงูุฃุณุงุณูุฉ ููุชููุฉ
- ุงูุงุฎุชุจุงุฑุงุช ุงูุฃูููุฉ ูุฌุญุช
- ุงูุชูุซูู ุดุงูู

โณ **ุงูุฎุทูุงุช ุงูุชุงููุฉ**

- ุฅููุงู ุงูุดูุงุฏุงุช ุงูุญููููุฉ
- ุงูุชุฏุฑูุจ ุงูุดุงูู ูููุฑูู
- ุงูุฅุทูุงู ุงูุชุฏุฑูุฌู
- ุงููุฑุงูุจุฉ ูุงูุชุญุณูู ุงููุณุชูุฑ

---

**ุขุฎุฑ ุชุญุฏูุซ:** ููุงูุฑ 2026
**ุงูุญุงูุฉ:** ๐ก ุฌุงูุฒ ููุงุฎุชุจุงุฑ
**ุงููุณุคูู:** ูุฑูู ุงูุงูุชุซุงู ูุงูุฃูุงู
