{"version":3,"names":["EventEmitter","require","v4","uuidv4","Logger","AIModelsService","constructor","logger","models","Map","modelVersions","trainingHistory","predictionsCache","performanceMetrics","activeModels","trainingJobs","stats","totalModels","totalPredictions","totalTrainings","averageAccuracy","_initializeDefaultModels","registerModel","id","name","type","description","version","algorithm","inputs","outputs","accuracy","trainingDataSize","status","deployedAt","Date","info","emit","count","size","error","message","modelData","model","precision","recall","f1Score","createdAt","metadata","set","successfulPredictions","failedPredictions","avgResponseTime","lastUpdated","getModel","modelId","get","getModelsByType","Array","from","values","filter","m","getActiveModels","deployModel","Error","undeployModel","delete","updateModel","updates","allowedFields","forEach","field","undefined","trainModel","trainingData","trainingJob","startedAt","completedAt","dataSize","epochs","batchSize","learningRate","metrics","loss","progress","_simulateTraining","predict","input","prediction","_generatePrediction","cacheKey","JSON","stringify","timestamp","expiresAt","now","modelName","confidence","getModelMetrics","failureRate","getAllModels","getTrainingHistory","deleteModel","has","interval","setInterval","Math","random","floor","clearInterval","push","baseConfidence","min","recommendations","score","round","reason","category","value","trend","isAnomaly","severity","getStatistics","totalMetrics","reduce","acc","successRate","sum","module","exports"],"sources":["aiModels.service.js"],"sourcesContent":["/**\r\n * AI Models Service\r\n * خدمة نماذج الذكاء الاصطناعي\r\n * \r\n * المسؤوليات:\r\n * - إدارة نماذج التعلم الآلي\r\n * - تتبع أداء النموذج\r\n * - إدارة نسخ النموذج\r\n * - التنبؤات والتنبيهات\r\n */\r\n\r\nconst { EventEmitter } = require('events');\r\nconst { v4: uuidv4 } = require('uuid');\r\nconst Logger = require('../utils/logger');\r\n\r\nclass AIModelsService extends EventEmitter {\r\n  constructor() {\r\n    super();\r\n    this.logger = Logger;\r\n\r\n    // Model registry\r\n    this.models = new Map();\r\n\r\n    // Model versions\r\n    this.modelVersions = new Map();\r\n\r\n    // Model training history\r\n    this.trainingHistory = new Map();\r\n\r\n    // Model predictions cache\r\n    this.predictionsCache = new Map();\r\n\r\n    // Model performance metrics\r\n    this.performanceMetrics = new Map();\r\n\r\n    // Active models deployed\r\n    this.activeModels = new Map();\r\n\r\n    // Model training jobs\r\n    this.trainingJobs = new Map();\r\n\r\n    // Statistics\r\n    this.stats = {\r\n      totalModels: 0,\r\n      activeModels: 0,\r\n      totalPredictions: 0,\r\n      totalTrainings: 0,\r\n      averageAccuracy: 0\r\n    };\r\n\r\n    this._initializeDefaultModels();\r\n  }\r\n\r\n  /**\r\n   * Initialize default AI models\r\n   * تهيئة نماذج الذكاء الاصطناعي الافتراضية\r\n   * \r\n   * @private\r\n   */\r\n  _initializeDefaultModels() {\r\n    try {\r\n      // Recommendation Model\r\n      this.registerModel({\r\n        id: 'model-recommend-default',\r\n        name: 'Default Recommendation Model',\r\n        type: 'recommendation',\r\n        description: 'يستخدم لتوليد التوصيات الشخصية | Used for personalized recommendations',\r\n        version: '1.0.0',\r\n        algorithm: 'collaborative_filtering',\r\n        inputs: ['user_profile', 'historical_data', 'user_preferences'],\r\n        outputs: ['recommendations'],\r\n        accuracy: 0.87,\r\n        trainingDataSize: 10000,\r\n        status: 'active',\r\n        deployedAt: new Date()\r\n      });\r\n\r\n      // Supervision Model\r\n      this.registerModel({\r\n        id: 'model-supervision-default',\r\n        name: 'Supervision Prediction Model',\r\n        type: 'prediction',\r\n        description: 'يتنبأ بالحاجة إلى الإشراف | Predicts supervision needs',\r\n        version: '1.0.0',\r\n        algorithm: 'random_forest',\r\n        inputs: ['performance_history', 'attendance', 'risk_factors'],\r\n        outputs: ['supervision_probability'],\r\n        accuracy: 0.92,\r\n        trainingDataSize: 5000,\r\n        status: 'active',\r\n        deployedAt: new Date()\r\n      });\r\n\r\n      // Performance Prediction Model\r\n      this.registerModel({\r\n        id: 'model-performance-default',\r\n        name: 'Performance Prediction Model',\r\n        type: 'prediction',\r\n        description: 'يتنبأ بمستويات الأداء المستقبلية | Predicts future performance levels',\r\n        version: '1.0.0',\r\n        algorithm: 'gradient_boosting',\r\n        inputs: ['current_performance', 'training_hours', 'feedback_history'],\r\n        outputs: ['performance_score'],\r\n        accuracy: 0.85,\r\n        trainingDataSize: 8000,\r\n        status: 'active',\r\n        deployedAt: new Date()\r\n      });\r\n\r\n      // Anomaly Detection Model\r\n      this.registerModel({\r\n        id: 'model-anomaly-default',\r\n        name: 'Anomaly Detection Model',\r\n        type: 'anomaly_detection',\r\n        description: 'يكتشف الأنماط غير الطبيعية | Detects unusual patterns',\r\n        version: '1.0.0',\r\n        algorithm: 'isolation_forest',\r\n        inputs: ['behavior_data', 'metrics', 'historical_patterns'],\r\n        outputs: ['anomaly_score'],\r\n        accuracy: 0.89,\r\n        trainingDataSize: 12000,\r\n        status: 'active',\r\n        deployedAt: new Date()\r\n      });\r\n\r\n      this.logger.info('✅ Default AI models initialized');\r\n      this.emit('models:initialized', { count: this.models.size });\r\n    } catch (error) {\r\n      this.logger.error(`Error initializing default models: ${error.message}`);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Register new AI model\r\n   * تسجيل نموذج ذكاء اصطناعي جديد\r\n   * \r\n   * @param {Object} modelData - Model configuration\r\n   * @returns {Object} Registered model\r\n   */\r\n  registerModel(modelData) {\r\n    try {\r\n      const model = {\r\n        id: modelData.id || `model-${uuidv4()}`,\r\n        name: modelData.name,\r\n        type: modelData.type, // recommendation, prediction, classification, anomaly_detection\r\n        description: modelData.description,\r\n        version: modelData.version || '1.0.0',\r\n        algorithm: modelData.algorithm,\r\n        inputs: modelData.inputs || [],\r\n        outputs: modelData.outputs || [],\r\n        accuracy: modelData.accuracy || 0.75,\r\n        precision: modelData.precision || 0.75,\r\n        recall: modelData.recall || 0.75,\r\n        f1Score: modelData.f1Score || 0.75,\r\n        trainingDataSize: modelData.trainingDataSize || 0,\r\n        status: modelData.status || 'development',\r\n        deployedAt: modelData.deployedAt || null,\r\n        createdAt: new Date(),\r\n        metadata: modelData.metadata || {}\r\n      };\r\n\r\n      this.models.set(model.id, model);\r\n      this.performanceMetrics.set(model.id, {\r\n        totalPredictions: 0,\r\n        successfulPredictions: 0,\r\n        failedPredictions: 0,\r\n        avgResponseTime: 0,\r\n        lastUpdated: new Date()\r\n      });\r\n\r\n      if (model.status === 'active') {\r\n        this.activeModels.set(model.id, model);\r\n        this.stats.activeModels++;\r\n      }\r\n\r\n      this.stats.totalModels++;\r\n\r\n      this.emit('model:registered', { model });\r\n      this.logger.info(`AI Model registered: ${model.name} (${model.id})`);\r\n\r\n      return model;\r\n    } catch (error) {\r\n      this.logger.error(`Error registering model: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get model by ID\r\n   * الحصول على نموذج حسب المعرف\r\n   * \r\n   * @param {String} modelId - Model ID\r\n   * @returns {Object} Model object\r\n   */\r\n  getModel(modelId) {\r\n    try {\r\n      return this.models.get(modelId) || null;\r\n    } catch (error) {\r\n      this.logger.error(`Error getting model: ${error.message}`);\r\n      return null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get all models by type\r\n   * الحصول على جميع النماذج حسب النوع\r\n   * \r\n   * @param {String} type - Model type\r\n   * @returns {Array} Models array\r\n   */\r\n  getModelsByType(type) {\r\n    try {\r\n      return Array.from(this.models.values()).filter(m => m.type === type);\r\n    } catch (error) {\r\n      this.logger.error(`Error getting models by type: ${error.message}`);\r\n      return [];\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get active models\r\n   * الحصول على النماذج النشطة\r\n   * \r\n   * @returns {Array} Active models\r\n   */\r\n  getActiveModels() {\r\n    try {\r\n      return Array.from(this.activeModels.values());\r\n    } catch (error) {\r\n      this.logger.error(`Error getting active models: ${error.message}`);\r\n      return [];\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Deploy model\r\n   * نشر النموذج\r\n   * \r\n   * @param {String} modelId - Model ID\r\n   * @returns {Object} Deployed model\r\n   */\r\n  deployModel(modelId) {\r\n    try {\r\n      const model = this.models.get(modelId);\r\n      if (!model) {\r\n        throw new Error(`Model not found: ${modelId}`);\r\n      }\r\n\r\n      model.status = 'active';\r\n      model.deployedAt = new Date();\r\n\r\n      this.activeModels.set(modelId, model);\r\n      this.stats.activeModels++;\r\n\r\n      this.emit('model:deployed', { modelId, model });\r\n      this.logger.info(`Model deployed: ${model.name}`);\r\n\r\n      return model;\r\n    } catch (error) {\r\n      this.logger.error(`Error deploying model: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Undeploy model\r\n   * إزالة نشر النموذج\r\n   * \r\n   * @param {String} modelId - Model ID\r\n   * @returns {Boolean} Success\r\n   */\r\n  undeployModel(modelId) {\r\n    try {\r\n      const model = this.models.get(modelId);\r\n      if (!model) {\r\n        throw new Error(`Model not found: ${modelId}`);\r\n      }\r\n\r\n      model.status = 'inactive';\r\n      this.activeModels.delete(modelId);\r\n      this.stats.activeModels--;\r\n\r\n      this.emit('model:undeployed', { modelId });\r\n      this.logger.info(`Model undeployed: ${model.name}`);\r\n\r\n      return true;\r\n    } catch (error) {\r\n      this.logger.error(`Error undeploying model: ${error.message}`);\r\n      return false;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Update model\r\n   * تحديث النموذج\r\n   * \r\n   * @param {String} modelId - Model ID\r\n   * @param {Object} updates - Updates object\r\n   * @returns {Object} Updated model\r\n   */\r\n  updateModel(modelId, updates) {\r\n    try {\r\n      const model = this.models.get(modelId);\r\n      if (!model) {\r\n        throw new Error(`Model not found: ${modelId}`);\r\n      }\r\n\r\n      // Don't update critical fields\r\n      const allowedFields = ['name', 'description', 'accuracy', 'precision', 'recall', 'f1Score', 'metadata'];\r\n      allowedFields.forEach(field => {\r\n        if (updates[field] !== undefined) {\r\n          model[field] = updates[field];\r\n        }\r\n      });\r\n\r\n      this.emit('model:updated', { modelId, model });\r\n      this.logger.info(`Model updated: ${model.name}`);\r\n\r\n      return model;\r\n    } catch (error) {\r\n      this.logger.error(`Error updating model: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Train model\r\n   * تدريب النموذج\r\n   * \r\n   * @param {String} modelId - Model ID\r\n   * @param {Object} trainingData - Training data\r\n   * @returns {Object} Training job\r\n   */\r\n  trainModel(modelId, trainingData) {\r\n    try {\r\n      const model = this.models.get(modelId);\r\n      if (!model) {\r\n        throw new Error(`Model not found: ${modelId}`);\r\n      }\r\n\r\n      const trainingJob = {\r\n        id: `train-${uuidv4()}`,\r\n        modelId,\r\n        status: 'started',\r\n        startedAt: new Date(),\r\n        completedAt: null,\r\n        dataSize: trainingData.size || 0,\r\n        epochs: trainingData.epochs || 10,\r\n        batchSize: trainingData.batchSize || 32,\r\n        learningRate: trainingData.learningRate || 0.001,\r\n        metrics: {\r\n          loss: null,\r\n          accuracy: null,\r\n          precision: null,\r\n          recall: null\r\n        },\r\n        progress: 0\r\n      };\r\n\r\n      this.trainingJobs.set(trainingJob.id, trainingJob);\r\n\r\n      // Simulate training progress\r\n      this._simulateTraining(modelId, trainingJob);\r\n\r\n      this.stats.totalTrainings++;\r\n      this.emit('model:training_started', { trainingJob });\r\n\r\n      return trainingJob;\r\n    } catch (error) {\r\n      this.logger.error(`Error training model: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Make prediction\r\n   * إجراء التنبؤ\r\n   * \r\n   * @param {String} modelId - Model ID\r\n   * @param {Object} input - Input data\r\n   * @returns {Object} Prediction result\r\n   */\r\n  predict(modelId, input) {\r\n    try {\r\n      const model = this.models.get(modelId);\r\n      if (!model) {\r\n        throw new Error(`Model not found: ${modelId}`);\r\n      }\r\n\r\n      if (model.status !== 'active') {\r\n        throw new Error(`Model is not active: ${modelId}`);\r\n      }\r\n\r\n      // Simulate prediction based on model type\r\n      let prediction = this._generatePrediction(model, input);\r\n\r\n      // Cache prediction\r\n      const cacheKey = `${modelId}:${JSON.stringify(input)}`;\r\n      this.predictionsCache.set(cacheKey, {\r\n        prediction,\r\n        timestamp: new Date(),\r\n        expiresAt: new Date(Date.now() + 5 * 60 * 1000) // 5 min cache\r\n      });\r\n\r\n      // Update metrics\r\n      const metrics = this.performanceMetrics.get(modelId);\r\n      if (metrics) {\r\n        metrics.totalPredictions++;\r\n        metrics.successfulPredictions++;\r\n        metrics.lastUpdated = new Date();\r\n      }\r\n\r\n      this.stats.totalPredictions++;\r\n\r\n      this.emit('model:prediction_made', { modelId, prediction });\r\n\r\n      return {\r\n        modelId,\r\n        modelName: model.name,\r\n        prediction,\r\n        confidence: prediction.confidence,\r\n        timestamp: new Date()\r\n      };\r\n    } catch (error) {\r\n      this.logger.error(`Error making prediction: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get model performance metrics\r\n   * الحصول على مقاييس أداء النموذج\r\n   * \r\n   * @param {String} modelId - Model ID\r\n   * @returns {Object} Performance metrics\r\n   */\r\n  getModelMetrics(modelId) {\r\n    try {\r\n      const model = this.models.get(modelId);\r\n      if (!model) {\r\n        throw new Error(`Model not found: ${modelId}`);\r\n      }\r\n\r\n      const metrics = this.performanceMetrics.get(modelId);\r\n      return {\r\n        modelId,\r\n        modelName: model.name,\r\n        accuracy: model.accuracy,\r\n        precision: model.precision,\r\n        recall: model.recall,\r\n        f1Score: model.f1Score,\r\n        totalPredictions: metrics?.totalPredictions || 0,\r\n        successfulPredictions: metrics?.successfulPredictions || 0,\r\n        failureRate: metrics ? (metrics.failedPredictions / metrics.totalPredictions) * 100 : 0,\r\n        avgResponseTime: metrics?.avgResponseTime || 0\r\n      };\r\n    } catch (error) {\r\n      this.logger.error(`Error getting metrics: ${error.message}`);\r\n      return null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get all models\r\n   * الحصول على جميع النماذج\r\n   * \r\n   * @returns {Array} All models\r\n   */\r\n  getAllModels() {\r\n    try {\r\n      return Array.from(this.models.values());\r\n    } catch (error) {\r\n      this.logger.error(`Error getting all models: ${error.message}`);\r\n      return [];\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get model training history\r\n   * الحصول على سجل تدريب النموذج\r\n   * \r\n   * @param {String} modelId - Model ID\r\n   * @returns {Array} Training history\r\n   */\r\n  getTrainingHistory(modelId) {\r\n    try {\r\n      return this.trainingHistory.get(modelId) || [];\r\n    } catch (error) {\r\n      this.logger.error(`Error getting training history: ${error.message}`);\r\n      return [];\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Delete model\r\n   * حذف النموذج\r\n   * \r\n   * @param {String} modelId - Model ID\r\n   * @returns {Boolean} Success\r\n   */\r\n  deleteModel(modelId) {\r\n    try {\r\n      if (this.activeModels.has(modelId)) {\r\n        throw new Error('Cannot delete active model. Undeploy first.');\r\n      }\r\n\r\n      this.models.delete(modelId);\r\n      this.performanceMetrics.delete(modelId);\r\n      this.trainingHistory.delete(modelId);\r\n      this.stats.totalModels--;\r\n\r\n      this.emit('model:deleted', { modelId });\r\n      this.logger.info(`Model deleted: ${modelId}`);\r\n\r\n      return true;\r\n    } catch (error) {\r\n      this.logger.error(`Error deleting model: ${error.message}`);\r\n      return false;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Simulate training\r\n   * محاكاة التدريب\r\n   * \r\n   * @private\r\n   */\r\n  _simulateTraining(modelId, trainingJob) {\r\n    try {\r\n      let progress = 0;\r\n      const interval = setInterval(() => {\r\n        progress += Math.random() * 15;\r\n        if (progress > 100) progress = 100;\r\n\r\n        trainingJob.progress = Math.floor(progress);\r\n\r\n        if (progress >= 100) {\r\n          clearInterval(interval);\r\n\r\n          trainingJob.status = 'completed';\r\n          trainingJob.completedAt = new Date();\r\n          trainingJob.metrics = {\r\n            loss: 0.15 + Math.random() * 0.1,\r\n            accuracy: 0.85 + Math.random() * 0.1,\r\n            precision: 0.83 + Math.random() * 0.1,\r\n            recall: 0.82 + Math.random() * 0.1\r\n          };\r\n\r\n          // Update model accuracy\r\n          const model = this.models.get(modelId);\r\n          if (model) {\r\n            model.accuracy = trainingJob.metrics.accuracy;\r\n            model.precision = trainingJob.metrics.precision;\r\n            model.recall = trainingJob.metrics.recall;\r\n            model.f1Score = (2 * trainingJob.metrics.precision * trainingJob.metrics.recall) / \r\n                           (trainingJob.metrics.precision + trainingJob.metrics.recall);\r\n          }\r\n\r\n          // Store in history\r\n          if (!this.trainingHistory.has(modelId)) {\r\n            this.trainingHistory.set(modelId, []);\r\n          }\r\n          this.trainingHistory.get(modelId).push(trainingJob);\r\n\r\n          this.emit('model:training_completed', { trainingJob });\r\n          this.logger.info(`Model training completed: ${modelId}`);\r\n        }\r\n      }, 1000);\r\n    } catch (error) {\r\n      this.logger.error(`Error simulating training: ${error.message}`);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Generate prediction\r\n   * إنشاء التنبؤ\r\n   * \r\n   * @private\r\n   */\r\n  _generatePrediction(model, input) {\r\n    try {\r\n      const baseConfidence = model.accuracy;\r\n      const confidence = Math.min(0.99, baseConfidence + (Math.random() * 0.1 - 0.05));\r\n\r\n      if (model.type === 'recommendation') {\r\n        return {\r\n          type: 'recommendations',\r\n          recommendations: [\r\n            {\r\n              id: `rec-${uuidv4()}`,\r\n              score: Math.round(confidence * 100),\r\n              reason: 'Based on collaborative filtering analysis',\r\n              category: 'primary'\r\n            },\r\n            {\r\n              id: `rec-${uuidv4()}`,\r\n              score: Math.round((confidence - 0.1) * 100),\r\n              reason: 'Secondary recommendation from pattern analysis',\r\n              category: 'secondary'\r\n            }\r\n          ],\r\n          confidence: Math.round(confidence * 100)\r\n        };\r\n      } else if (model.type === 'prediction') {\r\n        return {\r\n          type: 'prediction',\r\n          value: Math.round(Math.random() * 100),\r\n          confidence: Math.round(confidence * 100),\r\n          trend: Math.random() > 0.5 ? 'increasing' : 'decreasing'\r\n        };\r\n      } else if (model.type === 'anomaly_detection') {\r\n        return {\r\n          type: 'anomaly_score',\r\n          score: Math.round(Math.random() * 100),\r\n          isAnomaly: Math.random() < 0.1,\r\n          confidence: Math.round(confidence * 100),\r\n          severity: Math.random() > 0.7 ? 'high' : 'low'\r\n        };\r\n      } else {\r\n        return {\r\n          type: 'prediction',\r\n          value: Math.random(),\r\n          confidence: Math.round(confidence * 100)\r\n        };\r\n      }\r\n    } catch (error) {\r\n      this.logger.error(`Error generating prediction: ${error.message}`);\r\n      return { error: error.message };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get statistics\r\n   * الحصول على الإحصائيات\r\n   * \r\n   * @returns {Object} Statistics\r\n   */\r\n  getStatistics() {\r\n    try {\r\n      const totalMetrics = Array.from(this.performanceMetrics.values()).reduce(\r\n        (acc, m) => ({\r\n          totalPredictions: acc.totalPredictions + m.totalPredictions,\r\n          successfulPredictions: acc.successfulPredictions + m.successfulPredictions,\r\n          failedPredictions: acc.failedPredictions + m.failedPredictions\r\n        }),\r\n        { totalPredictions: 0, successfulPredictions: 0, failedPredictions: 0 }\r\n      );\r\n\r\n      return {\r\n        totalModels: this.stats.totalModels,\r\n        activeModels: this.stats.activeModels,\r\n        totalPredictions: this.stats.totalPredictions,\r\n        totalTrainings: this.stats.totalTrainings,\r\n        successRate: totalMetrics.totalPredictions > 0 \r\n          ? Math.round((totalMetrics.successfulPredictions / totalMetrics.totalPredictions) * 100)\r\n          : 0,\r\n        averageAccuracy: this.stats.totalModels > 0\r\n          ? Math.round(\r\n              Array.from(this.models.values()).reduce((sum, m) => sum + m.accuracy, 0) / this.stats.totalModels * 100\r\n            )\r\n          : 0\r\n      };\r\n    } catch (error) {\r\n      this.logger.error(`Error getting statistics: ${error.message}`);\r\n      return {};\r\n    }\r\n  }\r\n}\r\n\r\nmodule.exports = new AIModelsService();\r\n"],"mappings":"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","ignoreList":[]}