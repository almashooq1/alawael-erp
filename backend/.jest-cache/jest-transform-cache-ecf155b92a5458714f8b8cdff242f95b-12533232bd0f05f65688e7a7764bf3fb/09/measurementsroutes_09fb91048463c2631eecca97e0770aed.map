{"version":3,"names":["express","require","router","Router","MeasurementService","SmartEngine","MeasurementType","MeasurementMaster","MeasurementResult","IndividualRehabPlan","QuickAssessment","RehabilitationProgram","ProgramProgress","ProgramCategory","ProgramSession","measurementService","get","req","res","category","targetDisability","query","isActive","targetDisabilities","types","find","select","json","success","count","length","data","error","status","message","post","newType","createMeasurementType","body","typeId","masters","populate","newMaster","createMeasurementMaster","master","findById","params","id","beneficiaryId","result","recordMeasurementResult","results","getBeneficiaryLatestResults","comparison","compareMeasurementResults","put","updated","findByIdAndUpdate","resultId","approvalInfo","approvedBy","user","_id","approvalDate","Date","approvalNotes","new","plan","createIndividualRehabPlan","getIndividualRehabPlan","updateIndividualRehabPlan","planId","categories","disability","severity","categoryId","suitableSeverityLevels","programs","program","programId","session","recordProgramSession","sessions","sort","scheduledDate","report","generateComprehensiveReport","smartEngine","effectiveness","trackProgramEffectiveness","progressId","activePrograms","overallStatus","assessment","assessmentType","items","totalScore","level","performedBy","save","module","exports"],"sources":["measurements.routes.js"],"sourcesContent":["/**\r\n * مسارات API للمقاييس والبرامج التأهيلية\r\n * Comprehensive Measurement & Program Routes\r\n * ========================================\r\n */\r\n\r\nconst express = require('express');\r\nconst router = express.Router();\r\nconst MeasurementService = require('../services/MeasurementService');\r\nconst SmartEngine = require('../services/SmartMeasurementProgramEngine');\r\nconst { \r\n  MeasurementType,\r\n  MeasurementMaster,\r\n  MeasurementResult,\r\n  IndividualRehabPlan,\r\n  QuickAssessment\r\n} = require('../models/MeasurementModels');\r\n\r\nconst {\r\n  RehabilitationProgram,\r\n  ProgramProgress,\r\n  ProgramCategory,\r\n  ProgramSession\r\n} = require('../models/RehabilitationProgramModels');\r\n\r\nconst measurementService = new MeasurementService();\r\n\r\n// ============================\r\n// 1. مسارات أنواع المقاييس\r\n// ============================\r\n\r\n/**\r\n * الحصول على جميع أنواع المقاييس\r\n * GET /api/measurements/types\r\n */\r\nrouter.get('/types', async (req, res) => {\r\n  try {\r\n    const { category, targetDisability } = req.query;\r\n    \r\n    let query = { isActive: true };\r\n    if (category) query.category = category;\r\n    if (targetDisability) query.targetDisabilities = targetDisability;\r\n\r\n    const types = await MeasurementType.find(query)\r\n      .select('code nameAr nameEn category description targetDisabilities');\r\n\r\n    res.json({\r\n      success: true,\r\n      count: types.length,\r\n      data: types\r\n    });\r\n  } catch (error) {\r\n    res.status(500).json({ success: false, error: error.message });\r\n  }\r\n});\r\n\r\n/**\r\n * إنشاء نوع مقياس جديد\r\n * POST /api/measurements/types\r\n */\r\nrouter.post('/types', async (req, res) => {\r\n  try {\r\n    const newType = await measurementService.createMeasurementType(req.body);\r\n    \r\n    res.status(201).json({\r\n      success: true,\r\n      message: 'تم إنشاء نوع المقياس بنجاح',\r\n      data: newType\r\n    });\r\n  } catch (error) {\r\n    res.status(400).json({ success: false, error: error.message });\r\n  }\r\n});\r\n\r\n// ============================\r\n// 2. مسارات المقاييس الرئيسية\r\n// ============================\r\n\r\n/**\r\n * الحصول على جميع المقاييس\r\n * GET /api/measurements/masters\r\n */\r\nrouter.get('/masters', async (req, res) => {\r\n  try {\r\n    const { typeId, targetDisability } = req.query;\r\n    \r\n    let query = { isActive: true };\r\n    if (typeId) query.typeId = typeId;\r\n    if (targetDisability) query.targetDisabilities = targetDisability;\r\n\r\n    const masters = await MeasurementMaster.find(query)\r\n      .populate('typeId')\r\n      .select('code nameAr nameEn version ageRange estimatedDuration');\r\n\r\n    res.json({\r\n      success: true,\r\n      count: masters.length,\r\n      data: masters\r\n    });\r\n  } catch (error) {\r\n    res.status(500).json({ success: false, error: error.message });\r\n  }\r\n});\r\n\r\n/**\r\n * إنشاء مقياس رئيسي\r\n * POST /api/measurements/masters\r\n */\r\nrouter.post('/masters', async (req, res) => {\r\n  try {\r\n    const newMaster = await measurementService.createMeasurementMaster(req.body);\r\n    \r\n    res.status(201).json({\r\n      success: true,\r\n      message: 'تم إنشاء المقياس بنجاح',\r\n      data: newMaster\r\n    });\r\n  } catch (error) {\r\n    res.status(400).json({ success: false, error: error.message });\r\n  }\r\n});\r\n\r\n/**\r\n * الحصول على تفاصيل المقياس\r\n * GET /api/measurements/masters/:id\r\n */\r\nrouter.get('/masters/:id', async (req, res) => {\r\n  try {\r\n    const master = await MeasurementMaster.findById(req.params.id)\r\n      .populate('typeId');\r\n\r\n    if (!master) {\r\n      return res.status(404).json({ success: false, error: 'المقياس غير موجود' });\r\n    }\r\n\r\n    res.json({\r\n      success: true,\r\n      data: master\r\n    });\r\n  } catch (error) {\r\n    res.status(500).json({ success: false, error: error.message });\r\n  }\r\n});\r\n\r\n// ============================\r\n// 3. مسارات نتائج القياسات\r\n// ============================\r\n\r\n/**\r\n * تسجيل نتيجة قياس جديدة\r\n * POST /api/measurements/results/:beneficiaryId\r\n */\r\nrouter.post('/results/:beneficiaryId', async (req, res) => {\r\n  try {\r\n    const { beneficiaryId } = req.params;\r\n    \r\n    const result = await measurementService.recordMeasurementResult(\r\n      beneficiaryId,\r\n      req.body\r\n    );\r\n\r\n    res.status(201).json({\r\n      success: true,\r\n      message: 'تم تسجيل نتيجة القياس بنجاح وتم تفعيل البرامج المناسبة',\r\n      data: result\r\n    });\r\n  } catch (error) {\r\n    res.status(400).json({ success: false, error: error.message });\r\n  }\r\n});\r\n\r\n/**\r\n * الحصول على نتائج المستفيد\r\n * GET /api/measurements/results/:beneficiaryId\r\n */\r\nrouter.get('/results/:beneficiaryId', async (req, res) => {\r\n  try {\r\n    const results = await measurementService.getBeneficiaryLatestResults(\r\n      req.params.beneficiaryId\r\n    );\r\n\r\n    res.json({\r\n      success: true,\r\n      count: results.length,\r\n      data: results\r\n    });\r\n  } catch (error) {\r\n    res.status(500).json({ success: false, error: error.message });\r\n  }\r\n});\r\n\r\n/**\r\n * مقارنة نتائج القياس عبر الزمن\r\n * GET /api/measurements/results/:beneficiaryId/compare/:typeId\r\n */\r\nrouter.get('/results/:beneficiaryId/compare/:typeId', async (req, res) => {\r\n  try {\r\n    const comparison = await measurementService.compareMeasurementResults(\r\n      req.params.beneficiaryId,\r\n      req.params.typeId\r\n    );\r\n\r\n    res.json({\r\n      success: true,\r\n      data: comparison\r\n    });\r\n  } catch (error) {\r\n    res.status(500).json({ success: false, error: error.message });\r\n  }\r\n});\r\n\r\n/**\r\n * الموافقة على نتيجة قياس\r\n * PUT /api/measurements/results/:resultId/approve\r\n */\r\nrouter.put('/results/:resultId/approve', async (req, res) => {\r\n  try {\r\n    const updated = await MeasurementResult.findByIdAndUpdate(\r\n      req.params.resultId,\r\n      {\r\n        status: 'APPROVED',\r\n        approvalInfo: {\r\n          approvedBy: req.user._id,\r\n          approvalDate: new Date(),\r\n          approvalNotes: req.body.approvalNotes\r\n        }\r\n      },\r\n      { new: true }\r\n    );\r\n\r\n    res.json({\r\n      success: true,\r\n      message: 'تم الموافقة على نتيجة القياس',\r\n      data: updated\r\n    });\r\n  } catch (error) {\r\n    res.status(500).json({ success: false, error: error.message });\r\n  }\r\n});\r\n\r\n// ============================\r\n// 4. مسارات الخطط التأهيلية الفردية\r\n// ============================\r\n\r\n/**\r\n * إنشاء خطة تأهيلية فردية\r\n * POST /api/rehabilitation-plans/:beneficiaryId\r\n */\r\nrouter.post('/:beneficiaryId', async (req, res) => {\r\n  try {\r\n    const plan = await measurementService.createIndividualRehabPlan(\r\n      req.params.beneficiaryId,\r\n      req.body\r\n    );\r\n\r\n    res.status(201).json({\r\n      success: true,\r\n      message: 'تم إنشاء خطة التأهيل الفردية بنجاح',\r\n      data: plan\r\n    });\r\n  } catch (error) {\r\n    res.status(400).json({ success: false, error: error.message });\r\n  }\r\n});\r\n\r\n/**\r\n * الحصول على خطة التأهيل الفردية\r\n * GET /api/rehabilitation-plans/:beneficiaryId\r\n */\r\nrouter.get('/:beneficiaryId', async (req, res) => {\r\n  try {\r\n    const plan = await measurementService.getIndividualRehabPlan(\r\n      req.params.beneficiaryId\r\n    );\r\n\r\n    if (!plan) {\r\n      return res.status(404).json({ \r\n        success: false, \r\n        error: 'لم يتم العثور على خطة التأهيل' \r\n      });\r\n    }\r\n\r\n    res.json({\r\n      success: true,\r\n      data: plan\r\n    });\r\n  } catch (error) {\r\n    res.status(500).json({ success: false, error: error.message });\r\n  }\r\n});\r\n\r\n/**\r\n * تحديث خطة التأهيل الفردية\r\n * PUT /api/rehabilitation-plans/:planId\r\n */\r\nrouter.put('/:planId', async (req, res) => {\r\n  try {\r\n    const updated = await measurementService.updateIndividualRehabPlan(\r\n      req.params.planId,\r\n      req.body\r\n    );\r\n\r\n    res.json({\r\n      success: true,\r\n      message: 'تم تحديث خطة التأهيل بنجاح',\r\n      data: updated\r\n    });\r\n  } catch (error) {\r\n    res.status(400).json({ success: false, error: error.message });\r\n  }\r\n});\r\n\r\n/**\r\n * الموافقة على خطة التأهيل\r\n * PUT /api/rehabilitation-plans/:planId/approve\r\n */\r\nrouter.put('/:planId/approve', async (req, res) => {\r\n  try {\r\n    const updated = await IndividualRehabPlan.findByIdAndUpdate(\r\n      req.params.planId,\r\n      {\r\n        status: 'ACTIVE',\r\n        approvalInfo: {\r\n          approvedBy: req.user._id,\r\n          approvalDate: new Date(),\r\n          approvalNotes: req.body.approvalNotes\r\n        }\r\n      },\r\n      { new: true }\r\n    );\r\n\r\n    res.json({\r\n      success: true,\r\n      message: 'تم الموافقة على خطة التأهيل',\r\n      data: updated\r\n    });\r\n  } catch (error) {\r\n    res.status(500).json({ success: false, error: error.message });\r\n  }\r\n});\r\n\r\n// ============================\r\n// 5. مسارات البرامج التأهيلية\r\n// ============================\r\n\r\n/**\r\n * الحصول على جميع فئات البرامج\r\n * GET /api/programs/categories\r\n */\r\nrouter.get('/categories', async (req, res) => {\r\n  try {\r\n    const categories = await ProgramCategory.find({ isActive: true });\r\n    \r\n    res.json({\r\n      success: true,\r\n      count: categories.length,\r\n      data: categories\r\n    });\r\n  } catch (error) {\r\n    res.status(500).json({ success: false, error: error.message });\r\n  }\r\n});\r\n\r\n/**\r\n * الحصول على البرامج المتاحة\r\n * GET /api/programs\r\n */\r\nrouter.get('/programs', async (req, res) => {\r\n  try {\r\n    const { category, disability, severity } = req.query;\r\n    \r\n    let query = { isActive: true, status: 'APPROVED' };\r\n    if (category) query.categoryId = category;\r\n    if (disability) query.targetDisabilities = disability;\r\n    if (severity) query.suitableSeverityLevels = severity;\r\n\r\n    const programs = await RehabilitationProgram.find(query)\r\n      .populate('categoryId')\r\n      .select('code nameAr nameEn categoryId targetDisabilities objectives');\r\n\r\n    res.json({\r\n      success: true,\r\n      count: programs.length,\r\n      data: programs\r\n    });\r\n  } catch (error) {\r\n    res.status(500).json({ success: false, error: error.message });\r\n  }\r\n});\r\n\r\n/**\r\n * الحصول على تفاصيل برنامج\r\n * GET /api/programs/:programId\r\n */\r\nrouter.get('/programs/:programId', async (req, res) => {\r\n  try {\r\n    const program = await RehabilitationProgram.findById(req.params.programId)\r\n      .populate('categoryId');\r\n\r\n    if (!program) {\r\n      return res.status(404).json({ success: false, error: 'البرنامج غير موجود' });\r\n    }\r\n\r\n    res.json({\r\n      success: true,\r\n      data: program\r\n    });\r\n  } catch (error) {\r\n    res.status(500).json({ success: false, error: error.message });\r\n  }\r\n});\r\n\r\n// ============================\r\n// 6. مسارات جلسات البرامج\r\n// ============================\r\n\r\n/**\r\n * تسجيل جلسة برنامج\r\n * POST /api/programs/sessions/:beneficiaryId/:programId\r\n */\r\nrouter.post('/sessions/:beneficiaryId/:programId', async (req, res) => {\r\n  try {\r\n    const session = await measurementService.recordProgramSession(\r\n      req.params.beneficiaryId,\r\n      req.params.programId,\r\n      req.body\r\n    );\r\n\r\n    res.status(201).json({\r\n      success: true,\r\n      message: 'تم تسجيل الجلسة بنجاح',\r\n      data: session\r\n    });\r\n  } catch (error) {\r\n    res.status(400).json({ success: false, error: error.message });\r\n  }\r\n});\r\n\r\n/**\r\n * الحصول على جلسات برنامج\r\n * GET /api/programs/sessions/:beneficiaryId/:programId\r\n */\r\nrouter.get('/sessions/:beneficiaryId/:programId', async (req, res) => {\r\n  try {\r\n    const sessions = await ProgramSession.find({\r\n      beneficiaryId: req.params.beneficiaryId,\r\n      programId: req.params.programId\r\n    }).sort({ scheduledDate: -1 });\r\n\r\n    res.json({\r\n      success: true,\r\n      count: sessions.length,\r\n      data: sessions\r\n    });\r\n  } catch (error) {\r\n    res.status(500).json({ success: false, error: error.message });\r\n  }\r\n});\r\n\r\n// ============================\r\n// 7. مسارات التقارير الشاملة\r\n// ============================\r\n\r\n/**\r\n * إنشاء تقرير شامل للمستفيد\r\n * GET /api/reports/:beneficiaryId/comprehensive\r\n */\r\nrouter.get('/reports/:beneficiaryId/comprehensive', async (req, res) => {\r\n  try {\r\n    const report = await measurementService.generateComprehensiveReport(\r\n      req.params.beneficiaryId\r\n    );\r\n\r\n    res.json({\r\n      success: true,\r\n      data: report\r\n    });\r\n  } catch (error) {\r\n    res.status(500).json({ success: false, error: error.message });\r\n  }\r\n});\r\n\r\n/**\r\n * تتبع فعالية البرنامج\r\n * GET /api/programs/effectiveness/:progressId\r\n */\r\nrouter.get('/programs/effectiveness/:progressId', async (req, res) => {\r\n  try {\r\n    const smartEngine = new SmartEngine();\r\n    const effectiveness = await smartEngine.trackProgramEffectiveness(\r\n      req.params.progressId\r\n    );\r\n\r\n    res.json({\r\n      success: true,\r\n      data: effectiveness\r\n    });\r\n  } catch (error) {\r\n    res.status(500).json({ success: false, error: error.message });\r\n  }\r\n});\r\n\r\n/**\r\n * الحصول على البرامج النشطة للمستفيد\r\n * GET /api/programs/active/:beneficiaryId\r\n */\r\nrouter.get('/active/:beneficiaryId', async (req, res) => {\r\n  try {\r\n    const activePrograms = await ProgramProgress.find({\r\n      beneficiaryId: req.params.beneficiaryId,\r\n      overallStatus: 'ACTIVE'\r\n    })\r\n      .populate('programId')\r\n      .select('programId enrollmentDate expectedCompletionDate completedSessions totalPlannedSessions');\r\n\r\n    res.json({\r\n      success: true,\r\n      count: activePrograms.length,\r\n      data: activePrograms\r\n    });\r\n  } catch (error) {\r\n    res.status(500).json({ success: false, error: error.message });\r\n  }\r\n});\r\n\r\n/**\r\n * تقييم سريع (Quick Assessment)\r\n * POST /api/measurements/quick-assessment/:beneficiaryId\r\n */\r\nrouter.post('/quick-assessment/:beneficiaryId', async (req, res) => {\r\n  try {\r\n    const assessment = new QuickAssessment({\r\n      beneficiaryId: req.params.beneficiaryId,\r\n      assessmentType: req.body.assessmentType,\r\n      items: req.body.items,\r\n      totalScore: req.body.totalScore,\r\n      level: req.body.level,\r\n      performedBy: req.user._id\r\n    });\r\n\r\n    await assessment.save();\r\n\r\n    res.status(201).json({\r\n      success: true,\r\n      message: 'تم حفظ التقييم السريع',\r\n      data: assessment\r\n    });\r\n  } catch (error) {\r\n    res.status(400).json({ success: false, error: error.message });\r\n  }\r\n});\r\n\r\nmodule.exports = router;\r\n"],"mappings":"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","ignoreList":[]}