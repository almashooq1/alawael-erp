{"version":3,"names":["mongoose","require","AttendanceSchema","Schema","employeeId","type","Types","ObjectId","ref","required","index","checkInTime","Date","checkOutTime","checkInLocation","latitude","Number","longitude","address","String","accuracy","checkOutLocation","checkInPhoto","checkOutPhoto","status","enum","default","latenessMinutes","overtimeMinutes","notes","date","createdAt","now","updatedAt","module","exports","model"],"sources":["Attendance.js"],"sourcesContent":["/**\r\n * Attendance Model (HR)\r\n * Modular, extensible attendance record for HR system\r\n */\r\nconst mongoose = require('mongoose');\r\n\r\nconst AttendanceSchema = new mongoose.Schema({\r\n  employeeId: {\r\n    type: mongoose.Schema.Types.ObjectId,\r\n    ref: 'Employee',\r\n    required: true,\r\n    index: true,\r\n  },\r\n  checkInTime: { type: Date, required: true },\r\n  checkOutTime: Date,\r\n  checkInLocation: {\r\n    latitude: Number,\r\n    longitude: Number,\r\n    address: String,\r\n    accuracy: Number,\r\n  },\r\n  checkOutLocation: {\r\n    latitude: Number,\r\n    longitude: Number,\r\n    address: String,\r\n    accuracy: Number,\r\n  },\r\n  checkInPhoto: String,\r\n  checkOutPhoto: String,\r\n  status: {\r\n    type: String,\r\n    enum: ['حاضر', 'غياب', 'متأخر', 'إجازة', 'عطلة', 'مرض', 'وقت مرن'],\r\n    default: 'حاضر',\r\n    index: true,\r\n  },\r\n  latenessMinutes: { type: Number, default: 0 },\r\n  overtimeMinutes: { type: Number, default: 0 },\r\n  notes: String,\r\n  date: { type: Date, required: true, index: true },\r\n  createdAt: { type: Date, default: Date.now },\r\n  updatedAt: { type: Date, default: Date.now },\r\n});\r\n\r\nAttendanceSchema.index({ employeeId: 1, date: -1 });\r\nAttendanceSchema.index({ date: -1, status: 1 });\r\nAttendanceSchema.index({ employeeId: 1, checkInTime: -1 });\r\n\r\nmodule.exports = mongoose.model('Attendance', AttendanceSchema);\r\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAU,CAAC;AAEpC,MAAMC,gBAAgB,GAAG,IAAIF,QAAQ,CAACG,MAAM,CAAC;EAC3CC,UAAU,EAAE;IACVC,IAAI,EAAEL,QAAQ,CAACG,MAAM,CAACG,KAAK,CAACC,QAAQ;IACpCC,GAAG,EAAE,UAAU;IACfC,QAAQ,EAAE,IAAI;IACdC,KAAK,EAAE;EACT,CAAC;EACDC,WAAW,EAAE;IAAEN,IAAI,EAAEO,IAAI;IAAEH,QAAQ,EAAE;EAAK,CAAC;EAC3CI,YAAY,EAAED,IAAI;EAClBE,eAAe,EAAE;IACfC,QAAQ,EAAEC,MAAM;IAChBC,SAAS,EAAED,MAAM;IACjBE,OAAO,EAAEC,MAAM;IACfC,QAAQ,EAAEJ;EACZ,CAAC;EACDK,gBAAgB,EAAE;IAChBN,QAAQ,EAAEC,MAAM;IAChBC,SAAS,EAAED,MAAM;IACjBE,OAAO,EAAEC,MAAM;IACfC,QAAQ,EAAEJ;EACZ,CAAC;EACDM,YAAY,EAAEH,MAAM;EACpBI,aAAa,EAAEJ,MAAM;EACrBK,MAAM,EAAE;IACNnB,IAAI,EAAEc,MAAM;IACZM,IAAI,EAAE,CAAC,MAAM,EAAE,MAAM,EAAE,OAAO,EAAE,OAAO,EAAE,MAAM,EAAE,KAAK,EAAE,SAAS,CAAC;IAClEC,OAAO,EAAE,MAAM;IACfhB,KAAK,EAAE;EACT,CAAC;EACDiB,eAAe,EAAE;IAAEtB,IAAI,EAAEW,MAAM;IAAEU,OAAO,EAAE;EAAE,CAAC;EAC7CE,eAAe,EAAE;IAAEvB,IAAI,EAAEW,MAAM;IAAEU,OAAO,EAAE;EAAE,CAAC;EAC7CG,KAAK,EAAEV,MAAM;EACbW,IAAI,EAAE;IAAEzB,IAAI,EAAEO,IAAI;IAAEH,QAAQ,EAAE,IAAI;IAAEC,KAAK,EAAE;EAAK,CAAC;EACjDqB,SAAS,EAAE;IAAE1B,IAAI,EAAEO,IAAI;IAAEc,OAAO,EAAEd,IAAI,CAACoB;EAAI,CAAC;EAC5CC,SAAS,EAAE;IAAE5B,IAAI,EAAEO,IAAI;IAAEc,OAAO,EAAEd,IAAI,CAACoB;EAAI;AAC7C,CAAC,CAAC;AAEF9B,gBAAgB,CAACQ,KAAK,CAAC;EAAEN,UAAU,EAAE,CAAC;EAAE0B,IAAI,EAAE,CAAC;AAAE,CAAC,CAAC;AACnD5B,gBAAgB,CAACQ,KAAK,CAAC;EAAEoB,IAAI,EAAE,CAAC,CAAC;EAAEN,MAAM,EAAE;AAAE,CAAC,CAAC;AAC/CtB,gBAAgB,CAACQ,KAAK,CAAC;EAAEN,UAAU,EAAE,CAAC;EAAEO,WAAW,EAAE,CAAC;AAAE,CAAC,CAAC;AAE1DuB,MAAM,CAACC,OAAO,GAAGnC,QAAQ,CAACoC,KAAK,CAAC,YAAY,EAAElC,gBAAgB,CAAC","ignoreList":[]}