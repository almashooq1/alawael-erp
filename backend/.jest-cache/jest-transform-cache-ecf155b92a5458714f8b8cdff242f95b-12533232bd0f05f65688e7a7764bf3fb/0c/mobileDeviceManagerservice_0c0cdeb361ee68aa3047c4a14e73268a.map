{"version":3,"names":["EventEmitter","require","uuid","randomUUID","Logger","MobileDeviceManager","constructor","devices","Map","deviceSessions","trustedDevices","Set","suspiciousActivity","registerDevice","data","deviceId","device","id","userId","deviceName","osType","osVersion","appVersion","model","manufacturer","pushToken","biometricEnabled","registeredAt","Date","lastSeen","isActive","trustedUntil","deviceFingerprint","_generateFingerprint","securityLevel","syncStatus","storageSpace","total","totalStorage","used","usedStorage","available","availableStorage","appSettings","debugMode","analyticsEnabled","crashReportingEnabled","offlineModeEnabled","metadata","locale","timezone","networkType","batteryLevel","set","info","emit","timestamp","error","getDevice","get","getUserDevices","Array","from","values","filter","d","updateDeviceStatus","status","Error","createSession","sessionId","session","createdAt","expiresAt","now","lastActivity","activityCount","ipAddress","userAgent","validateSession","trustDevice","daysValid","add","untrustDevice","delete","detectSuspiciousActivity","activity","suspicionScore","_calculateSuspicionScore","has","record","resolved","push","enableBiometric","biometricType","disableBiometric","updateStorageInfo","storageData","usagePercent","deleteDevice","getDeviceStats","userDevices","length","active","trusted","suspicious","byOS","iOS","Android","lastSync","Math","max","map","getTime","cleanupExpiredSessions","cleaned","count","fingerprint","Buffer","toString","score","suspiciousLogin","locationChange","hour","getHours","failedAttempts","isRooted","isJailbroken","min","module","exports"],"sources":["mobileDeviceManager.service.js"],"sourcesContent":["/**\r\n * Mobile Device Manager Service\r\n * ÿÆÿØŸÖÿ© ÿ•ÿØÿßÿ±ÿ© ÿßŸÑÿ£ÿ¨Ÿáÿ≤ÿ© ÿßŸÑŸÖÿ≠ŸÖŸàŸÑÿ©\r\n * \r\n * ÿßŸÑŸÖÿ≥ÿ§ŸàŸÑŸäÿßÿ™:\r\n * - ÿ•ÿØÿßÿ±ÿ© ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿ£ÿ¨Ÿáÿ≤ÿ©\r\n * - ÿ™ÿ™ÿ®ÿπ ÿ≠ÿßŸÑÿ© ÿßŸÑÿ¨Ÿáÿßÿ≤\r\n * - ÿ•ÿØÿßÿ±ÿ© ÿ¨ŸÑÿ≥ÿßÿ™ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ ÿπŸÑŸâ ÿßŸÑŸáÿßÿ™ŸÅ\r\n * - ÿ™ÿ≠ÿØŸäÿØ ÿßŸÑÿ£ÿ¨Ÿáÿ≤ÿ© ÿßŸÑŸÖŸàÿ´ŸàŸÇÿ© ŸàÿßŸÑŸÖÿ¥ÿ®ŸàŸáÿ©\r\n * - ÿ•ÿØÿßÿ±ÿ© ÿßŸÑŸÖÿµÿßÿØŸÇÿ© ÿßŸÑÿ®ŸäŸàŸÖÿ™ÿ±Ÿäÿ©\r\n */\r\n\r\nconst EventEmitter = require('events');\r\nconst uuid = require('crypto').randomUUID;\r\nconst { Logger } = require('../utils/logger');\r\n\r\nclass MobileDeviceManager extends EventEmitter {\r\n  constructor() {\r\n    super();\r\n    this.devices = new Map();\r\n    this.deviceSessions = new Map();\r\n    this.trustedDevices = new Set();\r\n    this.suspiciousActivity = new Map();\r\n  }\r\n\r\n  /**\r\n   * ÿ™ÿ≥ÿ¨ŸäŸÑ ÿ¨Ÿáÿßÿ≤ ŸÖÿ≠ŸÖŸàŸÑ ÿ¨ÿØŸäÿØ\r\n   * Register a new mobile device\r\n   */\r\n  registerDevice(data) {\r\n    try {\r\n      const deviceId = uuid();\r\n      const device = {\r\n        id: deviceId,\r\n        userId: data.userId,\r\n        deviceName: data.deviceName || 'Unknown Device',\r\n        osType: data.osType, // iOS, Android\r\n        osVersion: data.osVersion,\r\n        appVersion: data.appVersion,\r\n        model: data.model,\r\n        manufacturer: data.manufacturer,\r\n        pushToken: data.pushToken,\r\n        biometricEnabled: data.biometricEnabled || false,\r\n        registeredAt: new Date(),\r\n        lastSeen: new Date(),\r\n        isActive: true,\r\n        trustedUntil: null,\r\n        deviceFingerprint: this._generateFingerprint(data),\r\n        securityLevel: 'normal',\r\n        syncStatus: 'initial',\r\n        storageSpace: {\r\n          total: data.totalStorage || 0,\r\n          used: data.usedStorage || 0,\r\n          available: data.availableStorage || 0,\r\n        },\r\n        appSettings: {\r\n          debugMode: false,\r\n          analyticsEnabled: true,\r\n          crashReportingEnabled: true,\r\n          offlineModeEnabled: true,\r\n        },\r\n        metadata: {\r\n          locale: data.locale || 'en',\r\n          timezone: data.timezone || 'UTC',\r\n          networkType: data.networkType || 'unknown',\r\n          batteryLevel: data.batteryLevel || 100,\r\n        },\r\n      };\r\n\r\n      this.devices.set(deviceId, device);\r\n      Logger.info(`üì± Device registered: ${deviceId} (${device.osType})`);\r\n\r\n      this.emit('device:registered', {\r\n        deviceId,\r\n        userId: data.userId,\r\n        osType: data.osType,\r\n        timestamp: new Date(),\r\n      });\r\n\r\n      return device;\r\n    } catch (error) {\r\n      Logger.error('Device registration error:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ÿßŸÑÿ≠ÿµŸàŸÑ ÿπŸÑŸâ ÿ¨Ÿáÿßÿ≤ ŸÖÿ≠ÿØÿØ\r\n   * Get specific device\r\n   */\r\n  getDevice(deviceId) {\r\n    return this.devices.get(deviceId);\r\n  }\r\n\r\n  /**\r\n   * ÿßŸÑÿ≠ÿµŸàŸÑ ÿπŸÑŸâ ÿ¨ŸÖŸäÿπ ÿ£ÿ¨Ÿáÿ≤ÿ© ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ\r\n   * Get all user devices\r\n   */\r\n  getUserDevices(userId) {\r\n    return Array.from(this.devices.values()).filter(d => d.userId === userId);\r\n  }\r\n\r\n  /**\r\n   * ÿ™ÿ≠ÿØŸäÿ´ ÿ≠ÿßŸÑÿ© ÿßŸÑÿ¨Ÿáÿßÿ≤\r\n   * Update device status\r\n   */\r\n  updateDeviceStatus(deviceId, status) {\r\n    const device = this.devices.get(deviceId);\r\n    if (!device) throw new Error('Device not found');\r\n\r\n    device.lastSeen = new Date();\r\n    device.syncStatus = status;\r\n\r\n    this.emit('device:statusUpdated', {\r\n      deviceId,\r\n      status,\r\n      timestamp: new Date(),\r\n    });\r\n\r\n    return device;\r\n  }\r\n\r\n  /**\r\n   * ÿ•ŸÜÿ¥ÿßÿ° ÿ¨ŸÑÿ≥ÿ© ÿ¨Ÿáÿßÿ≤\r\n   * Create device session\r\n   */\r\n  createSession(deviceId, userId) {\r\n    try {\r\n      const sessionId = uuid();\r\n      const session = {\r\n        id: sessionId,\r\n        deviceId,\r\n        userId,\r\n        createdAt: new Date(),\r\n        expiresAt: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000), // 30 days\r\n        lastActivity: new Date(),\r\n        isActive: true,\r\n        activityCount: 0,\r\n        ipAddress: null,\r\n        userAgent: null,\r\n      };\r\n\r\n      this.deviceSessions.set(sessionId, session);\r\n      Logger.info(`üîê Session created: ${sessionId}`);\r\n\r\n      this.emit('session:created', {\r\n        sessionId,\r\n        deviceId,\r\n        userId,\r\n      });\r\n\r\n      return session;\r\n    } catch (error) {\r\n      Logger.error('Session creation error:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿµÿ≠ÿ© ÿßŸÑÿ¨ŸÑÿ≥ÿ©\r\n   * Validate session\r\n   */\r\n  validateSession(sessionId) {\r\n    const session = this.deviceSessions.get(sessionId);\r\n    if (!session) return null;\r\n\r\n    if (!session.isActive || new Date() > session.expiresAt) {\r\n      session.isActive = false;\r\n      return null;\r\n    }\r\n\r\n    session.lastActivity = new Date();\r\n    session.activityCount++;\r\n\r\n    return session;\r\n  }\r\n\r\n  /**\r\n   * ÿßŸÑŸÖŸàÿ´ŸàŸÇŸäÿ© ÿ∂ÿØ ÿßŸÑÿ¨Ÿáÿßÿ≤\r\n   * Trust device (for biometric auth)\r\n   */\r\n  trustDevice(deviceId, daysValid = 90) {\r\n    const device = this.devices.get(deviceId);\r\n    if (!device) throw new Error('Device not found');\r\n\r\n    device.trustedUntil = new Date(Date.now() + daysValid * 24 * 60 * 60 * 1000);\r\n    device.securityLevel = 'trusted';\r\n    this.trustedDevices.add(deviceId);\r\n\r\n    Logger.info(`‚úÖ Device trusted: ${deviceId} for ${daysValid} days`);\r\n\r\n    this.emit('device:trusted', {\r\n      deviceId,\r\n      trustedUntil: device.trustedUntil,\r\n    });\r\n\r\n    return device;\r\n  }\r\n\r\n  /**\r\n   * ÿ•ÿ≤ÿßŸÑÿ© ÿßŸÑÿ´ŸÇÿ© ŸÖŸÜ ÿ¨Ÿáÿßÿ≤\r\n   * Untrust device\r\n   */\r\n  untrustDevice(deviceId) {\r\n    const device = this.devices.get(deviceId);\r\n    if (!device) throw new Error('Device not found');\r\n\r\n    device.trustedUntil = null;\r\n    device.securityLevel = 'normal';\r\n    this.trustedDevices.delete(deviceId);\r\n\r\n    Logger.info(`‚ùå Device untrusted: ${deviceId}`);\r\n\r\n    this.emit('device:untrusted', { deviceId });\r\n\r\n    return device;\r\n  }\r\n\r\n  /**\r\n   * ŸÉÿ¥ŸÅ ÿßŸÑŸÜÿ¥ÿßÿ∑ ÿßŸÑŸÖÿ±Ÿäÿ®\r\n   * Detect suspicious activity\r\n   */\r\n  detectSuspiciousActivity(deviceId, activity) {\r\n    const device = this.devices.get(deviceId);\r\n    if (!device) return null;\r\n\r\n    const suspicionScore = this._calculateSuspicionScore(activity);\r\n\r\n    if (!this.suspiciousActivity.has(deviceId)) {\r\n      this.suspiciousActivity.set(deviceId, []);\r\n    }\r\n\r\n    const record = {\r\n      timestamp: new Date(),\r\n      activity,\r\n      suspicionScore,\r\n      resolved: false,\r\n    };\r\n\r\n    this.suspiciousActivity.get(deviceId).push(record);\r\n\r\n    if (suspicionScore > 70) {\r\n      device.securityLevel = 'suspicious';\r\n\r\n      this.emit('device:suspicious', {\r\n        deviceId,\r\n        suspicionScore,\r\n        activity,\r\n        timestamp: new Date(),\r\n      });\r\n    }\r\n\r\n    return record;\r\n  }\r\n\r\n  /**\r\n   * ÿ™ŸÅÿπŸäŸÑ ÿßŸÑŸÖÿµÿßÿØŸÇÿ© ÿßŸÑÿ®ŸäŸàŸÖÿ™ÿ±Ÿäÿ©\r\n   * Enable biometric authentication\r\n   */\r\n  enableBiometric(deviceId, biometricType) {\r\n    const device = this.devices.get(deviceId);\r\n    if (!device) throw new Error('Device not found');\r\n\r\n    device.biometricEnabled = true;\r\n    device.biometricType = biometricType; // fingerprint, face, iris\r\n\r\n    this.emit('biometric:enabled', {\r\n      deviceId,\r\n      biometricType,\r\n    });\r\n\r\n    return device;\r\n  }\r\n\r\n  /**\r\n   * ÿ™ÿπÿ∑ŸäŸÑ ÿßŸÑŸÖÿµÿßÿØŸÇÿ© ÿßŸÑÿ®ŸäŸàŸÖÿ™ÿ±Ÿäÿ©\r\n   * Disable biometric authentication\r\n   */\r\n  disableBiometric(deviceId) {\r\n    const device = this.devices.get(deviceId);\r\n    if (!device) throw new Error('Device not found');\r\n\r\n    device.biometricEnabled = false;\r\n    device.biometricType = null;\r\n\r\n    this.emit('biometric:disabled', { deviceId });\r\n\r\n    return device;\r\n  }\r\n\r\n  /**\r\n   * ÿ™ÿ≠ÿØŸäÿ´ ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿ™ÿÆÿ≤ŸäŸÜ ÿßŸÑÿ¨Ÿáÿßÿ≤\r\n   * Update device storage info\r\n   */\r\n  updateStorageInfo(deviceId, storageData) {\r\n    const device = this.devices.get(deviceId);\r\n    if (!device) throw new Error('Device not found');\r\n\r\n    device.storageSpace = {\r\n      total: storageData.total,\r\n      used: storageData.used,\r\n      available: storageData.available,\r\n    };\r\n\r\n    const usagePercent = (storageData.used / storageData.total) * 100;\r\n\r\n    if (usagePercent > 90) {\r\n      this.emit('device:lowStorage', {\r\n        deviceId,\r\n        usagePercent,\r\n      });\r\n    }\r\n\r\n    return device;\r\n  }\r\n\r\n  /**\r\n   * ÿ≠ÿ∞ŸÅ ÿ¨Ÿáÿßÿ≤\r\n   * Delete device\r\n   */\r\n  deleteDevice(deviceId) {\r\n    const device = this.devices.get(deviceId);\r\n    if (!device) throw new Error('Device not found');\r\n\r\n    this.devices.delete(deviceId);\r\n    this.trustedDevices.delete(deviceId);\r\n    this.suspiciousActivity.delete(deviceId);\r\n\r\n    Logger.info(`üóëÔ∏è  Device deleted: ${deviceId}`);\r\n\r\n    this.emit('device:deleted', { deviceId });\r\n\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * ÿßŸÑÿ≠ÿµŸàŸÑ ÿπŸÑŸâ ÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ÿßŸÑÿ£ÿ¨Ÿáÿ≤ÿ©\r\n   * Get device statistics\r\n   */\r\n  getDeviceStats(userId) {\r\n    const userDevices = this.getUserDevices(userId);\r\n\r\n    return {\r\n      total: userDevices.length,\r\n      active: userDevices.filter(d => d.isActive).length,\r\n      trusted: userDevices.filter(d => this.trustedDevices.has(d.id)).length,\r\n      suspicious: userDevices.filter(d => d.securityLevel === 'suspicious').length,\r\n      byOS: {\r\n        iOS: userDevices.filter(d => d.osType === 'iOS').length,\r\n        Android: userDevices.filter(d => d.osType === 'Android').length,\r\n      },\r\n      lastSync: Math.max(...userDevices.map(d => d.lastSeen.getTime())),\r\n    };\r\n  }\r\n\r\n  /**\r\n   * ÿ≠ÿ∞ŸÅ ÿ¨ŸÑÿ≥ÿßÿ™ ŸÖŸÜÿ™ŸáŸäÿ© ÿßŸÑÿµŸÑÿßÿ≠Ÿäÿ©\r\n   * Cleanup expired sessions\r\n   */\r\n  cleanupExpiredSessions() {\r\n    let cleaned = 0;\r\n    const now = new Date();\r\n\r\n    for (const [sessionId, session] of this.deviceSessions) {\r\n      if (session.expiresAt < now) {\r\n        this.deviceSessions.delete(sessionId);\r\n        cleaned++;\r\n      }\r\n    }\r\n\r\n    if (cleaned > 0) {\r\n      Logger.info(`üßπ Cleaned ${cleaned} expired sessions`);\r\n      this.emit('sessions:cleaned', { count: cleaned });\r\n    }\r\n\r\n    return cleaned;\r\n  }\r\n\r\n  /**\r\n   * ===== Private Methods =====\r\n   */\r\n\r\n  /**\r\n   * Generate device fingerprint\r\n   */\r\n  _generateFingerprint(data) {\r\n    const fingerprint = Buffer.from(\r\n      `${data.osType}-${data.osVersion}-${data.model}-${data.manufacturer}`\r\n    ).toString('base64');\r\n\r\n    return fingerprint;\r\n  }\r\n\r\n  /**\r\n   * Calculate suspicion score\r\n   */\r\n  _calculateSuspicionScore(activity) {\r\n    let score = 0;\r\n\r\n    // Suspicious login patterns\r\n    if (activity.suspiciousLogin) score += 30;\r\n\r\n    // Unusual location\r\n    if (activity.locationChange > 500) score += 25; // > 500km\r\n\r\n    // Time-based suspicion (login at odd hours)\r\n    const hour = new Date().getHours();\r\n    if (hour < 5 || hour > 23) score += 15;\r\n\r\n    // Multiple failed auth attempts\r\n    if (activity.failedAttempts > 3) score += 20;\r\n\r\n    // Jailbreak/Root detection\r\n    if (activity.isRooted || activity.isJailbroken) score += 40;\r\n\r\n    return Math.min(score, 100);\r\n  }\r\n}\r\n\r\nmodule.exports = new MobileDeviceManager();\r\n"],"mappings":"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","ignoreList":[]}