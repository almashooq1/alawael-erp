66b03e6843791bbb5b2ea0eaa966e532
/**
 * Leave Model (HR)
 * Modular, extensible leave record for HR system
 */
const mongoose = require('mongoose');
const LeaveSchema = new mongoose.Schema({
  employeeId: {
    type: mongoose.Schema.Types.ObjectId,
    ref: 'Employee',
    required: true
  },
  leaveType: {
    type: String,
    enum: ['إجازة سنوية', 'إجازة مرضية', 'إجازة بدون راتب', 'إجازة أمومة', 'إجازة أبوة', 'إجازة استثنائية'],
    required: true
  },
  startDate: {
    type: Date,
    required: true
  },
  endDate: {
    type: Date,
    required: true
  },
  duration: {
    type: Number,
    required: true
  },
  reason: String,
  status: {
    type: String,
    enum: ['مرسل', 'قيد المراجعة', 'موافق عليه', 'مرفوض'],
    default: 'مرسل'
  },
  approvedBy: mongoose.Schema.Types.ObjectId,
  approvalDate: Date,
  rejectionReason: String,
  isPaidLeave: {
    type: Boolean,
    default: true
  },
  leaveBalance: {
    used: Number,
    remaining: Number
  },
  documents: [String],
  attachments: [String],
  createdAt: {
    type: Date,
    default: Date.now
  },
  updatedAt: Date
});
LeaveSchema.index({
  employeeId: 1,
  startDate: -1
});
LeaveSchema.index({
  status: 1,
  startDate: -1
});
module.exports = mongoose.model('Leave', LeaveSchema);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJMZWF2ZVNjaGVtYSIsIlNjaGVtYSIsImVtcGxveWVlSWQiLCJ0eXBlIiwiVHlwZXMiLCJPYmplY3RJZCIsInJlZiIsInJlcXVpcmVkIiwibGVhdmVUeXBlIiwiU3RyaW5nIiwiZW51bSIsInN0YXJ0RGF0ZSIsIkRhdGUiLCJlbmREYXRlIiwiZHVyYXRpb24iLCJOdW1iZXIiLCJyZWFzb24iLCJzdGF0dXMiLCJkZWZhdWx0IiwiYXBwcm92ZWRCeSIsImFwcHJvdmFsRGF0ZSIsInJlamVjdGlvblJlYXNvbiIsImlzUGFpZExlYXZlIiwiQm9vbGVhbiIsImxlYXZlQmFsYW5jZSIsInVzZWQiLCJyZW1haW5pbmciLCJkb2N1bWVudHMiLCJhdHRhY2htZW50cyIsImNyZWF0ZWRBdCIsIm5vdyIsInVwZGF0ZWRBdCIsImluZGV4IiwibW9kdWxlIiwiZXhwb3J0cyIsIm1vZGVsIl0sInNvdXJjZXMiOlsiTGVhdmUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIExlYXZlIE1vZGVsIChIUilcclxuICogTW9kdWxhciwgZXh0ZW5zaWJsZSBsZWF2ZSByZWNvcmQgZm9yIEhSIHN5c3RlbVxyXG4gKi9cclxuY29uc3QgbW9uZ29vc2UgPSByZXF1aXJlKCdtb25nb29zZScpO1xyXG5cclxuY29uc3QgTGVhdmVTY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hKHtcclxuICBlbXBsb3llZUlkOiB7XHJcbiAgICB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsXHJcbiAgICByZWY6ICdFbXBsb3llZScsXHJcbiAgICByZXF1aXJlZDogdHJ1ZSxcclxuICB9LFxyXG4gIGxlYXZlVHlwZToge1xyXG4gICAgdHlwZTogU3RyaW5nLFxyXG4gICAgZW51bTogW1xyXG4gICAgICAn2KXYrNin2LLYqSDYs9mG2YjZitipJyxcclxuICAgICAgJ9il2KzYp9iy2Kkg2YXYsdi22YrYqScsXHJcbiAgICAgICfYpdis2KfYstipINio2K/ZiNmGINix2KfYqtioJyxcclxuICAgICAgJ9il2KzYp9iy2Kkg2KPZhdmI2YXYqScsXHJcbiAgICAgICfYpdis2KfYstipINij2KjZiNipJyxcclxuICAgICAgJ9il2KzYp9iy2Kkg2KfYs9iq2KvZhtin2KbZitipJyxcclxuICAgIF0sXHJcbiAgICByZXF1aXJlZDogdHJ1ZSxcclxuICB9LFxyXG4gIHN0YXJ0RGF0ZTogeyB0eXBlOiBEYXRlLCByZXF1aXJlZDogdHJ1ZSB9LFxyXG4gIGVuZERhdGU6IHsgdHlwZTogRGF0ZSwgcmVxdWlyZWQ6IHRydWUgfSxcclxuICBkdXJhdGlvbjogeyB0eXBlOiBOdW1iZXIsIHJlcXVpcmVkOiB0cnVlIH0sXHJcbiAgcmVhc29uOiBTdHJpbmcsXHJcbiAgc3RhdHVzOiB7XHJcbiAgICB0eXBlOiBTdHJpbmcsXHJcbiAgICBlbnVtOiBbJ9mF2LHYs9mEJywgJ9mC2YrYryDYp9mE2YXYsdin2KzYudipJywgJ9mF2YjYp9mB2YIg2LnZhNmK2YcnLCAn2YXYsdmB2YjYtiddLFxyXG4gICAgZGVmYXVsdDogJ9mF2LHYs9mEJyxcclxuICB9LFxyXG4gIGFwcHJvdmVkQnk6IG1vbmdvb3NlLlNjaGVtYS5UeXBlcy5PYmplY3RJZCxcclxuICBhcHByb3ZhbERhdGU6IERhdGUsXHJcbiAgcmVqZWN0aW9uUmVhc29uOiBTdHJpbmcsXHJcbiAgaXNQYWlkTGVhdmU6IHsgdHlwZTogQm9vbGVhbiwgZGVmYXVsdDogdHJ1ZSB9LFxyXG4gIGxlYXZlQmFsYW5jZToge1xyXG4gICAgdXNlZDogTnVtYmVyLFxyXG4gICAgcmVtYWluaW5nOiBOdW1iZXIsXHJcbiAgfSxcclxuICBkb2N1bWVudHM6IFtTdHJpbmddLFxyXG4gIGF0dGFjaG1lbnRzOiBbU3RyaW5nXSxcclxuICBjcmVhdGVkQXQ6IHsgdHlwZTogRGF0ZSwgZGVmYXVsdDogRGF0ZS5ub3cgfSxcclxuICB1cGRhdGVkQXQ6IERhdGUsXHJcbn0pO1xyXG5cclxuTGVhdmVTY2hlbWEuaW5kZXgoeyBlbXBsb3llZUlkOiAxLCBzdGFydERhdGU6IC0xIH0pO1xyXG5MZWF2ZVNjaGVtYS5pbmRleCh7IHN0YXR1czogMSwgc3RhcnREYXRlOiAtMSB9KTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gbW9uZ29vc2UubW9kZWwoJ0xlYXZlJywgTGVhdmVTY2hlbWEpO1xyXG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTUEsUUFBUSxHQUFHQyxPQUFPLENBQUMsVUFBVSxDQUFDO0FBRXBDLE1BQU1DLFdBQVcsR0FBRyxJQUFJRixRQUFRLENBQUNHLE1BQU0sQ0FBQztFQUN0Q0MsVUFBVSxFQUFFO0lBQ1ZDLElBQUksRUFBRUwsUUFBUSxDQUFDRyxNQUFNLENBQUNHLEtBQUssQ0FBQ0MsUUFBUTtJQUNwQ0MsR0FBRyxFQUFFLFVBQVU7SUFDZkMsUUFBUSxFQUFFO0VBQ1osQ0FBQztFQUNEQyxTQUFTLEVBQUU7SUFDVEwsSUFBSSxFQUFFTSxNQUFNO0lBQ1pDLElBQUksRUFBRSxDQUNKLGFBQWEsRUFDYixhQUFhLEVBQ2IsaUJBQWlCLEVBQ2pCLGFBQWEsRUFDYixZQUFZLEVBQ1osaUJBQWlCLENBQ2xCO0lBQ0RILFFBQVEsRUFBRTtFQUNaLENBQUM7RUFDREksU0FBUyxFQUFFO0lBQUVSLElBQUksRUFBRVMsSUFBSTtJQUFFTCxRQUFRLEVBQUU7RUFBSyxDQUFDO0VBQ3pDTSxPQUFPLEVBQUU7SUFBRVYsSUFBSSxFQUFFUyxJQUFJO0lBQUVMLFFBQVEsRUFBRTtFQUFLLENBQUM7RUFDdkNPLFFBQVEsRUFBRTtJQUFFWCxJQUFJLEVBQUVZLE1BQU07SUFBRVIsUUFBUSxFQUFFO0VBQUssQ0FBQztFQUMxQ1MsTUFBTSxFQUFFUCxNQUFNO0VBQ2RRLE1BQU0sRUFBRTtJQUNOZCxJQUFJLEVBQUVNLE1BQU07SUFDWkMsSUFBSSxFQUFFLENBQUMsTUFBTSxFQUFFLGNBQWMsRUFBRSxZQUFZLEVBQUUsT0FBTyxDQUFDO0lBQ3JEUSxPQUFPLEVBQUU7RUFDWCxDQUFDO0VBQ0RDLFVBQVUsRUFBRXJCLFFBQVEsQ0FBQ0csTUFBTSxDQUFDRyxLQUFLLENBQUNDLFFBQVE7RUFDMUNlLFlBQVksRUFBRVIsSUFBSTtFQUNsQlMsZUFBZSxFQUFFWixNQUFNO0VBQ3ZCYSxXQUFXLEVBQUU7SUFBRW5CLElBQUksRUFBRW9CLE9BQU87SUFBRUwsT0FBTyxFQUFFO0VBQUssQ0FBQztFQUM3Q00sWUFBWSxFQUFFO0lBQ1pDLElBQUksRUFBRVYsTUFBTTtJQUNaVyxTQUFTLEVBQUVYO0VBQ2IsQ0FBQztFQUNEWSxTQUFTLEVBQUUsQ0FBQ2xCLE1BQU0sQ0FBQztFQUNuQm1CLFdBQVcsRUFBRSxDQUFDbkIsTUFBTSxDQUFDO0VBQ3JCb0IsU0FBUyxFQUFFO0lBQUUxQixJQUFJLEVBQUVTLElBQUk7SUFBRU0sT0FBTyxFQUFFTixJQUFJLENBQUNrQjtFQUFJLENBQUM7RUFDNUNDLFNBQVMsRUFBRW5CO0FBQ2IsQ0FBQyxDQUFDO0FBRUZaLFdBQVcsQ0FBQ2dDLEtBQUssQ0FBQztFQUFFOUIsVUFBVSxFQUFFLENBQUM7RUFBRVMsU0FBUyxFQUFFLENBQUM7QUFBRSxDQUFDLENBQUM7QUFDbkRYLFdBQVcsQ0FBQ2dDLEtBQUssQ0FBQztFQUFFZixNQUFNLEVBQUUsQ0FBQztFQUFFTixTQUFTLEVBQUUsQ0FBQztBQUFFLENBQUMsQ0FBQztBQUUvQ3NCLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHcEMsUUFBUSxDQUFDcUMsS0FBSyxDQUFDLE9BQU8sRUFBRW5DLFdBQVcsQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==