{"version":3,"names":["express","require","router","Router","AdvancedSession","SESSION_STATUSES","ATTENDANCE_STATUS","post","req","res","beneficiaryId","programId","specialistId","title","description","scheduledDateTime","scheduledDuration","location","sessionGoals","plannedActivities","body","error","newSession","model","status","SCHEDULED","createdBy","user","id","save","populate","path","select","success","get","dateFrom","dateTo","page","limit","sortBy","sortOrder","query","filter","$gte","Date","$lte","skip","sessions","find","sort","parseInt","total","countDocuments","pagination","pages","Math","ceil","session","findById","params","put","allowedFields","forEach","field","undefined","updatedBy","actualStartTime","IN_PROGRESS","beneficiaryAttendance","implementedActivities","performanceAssessment","specialistNotes","usedEquipment","attachments","actualEndTime","actualDuration","round","COMPLETED","reason","CANCELLED","cancellationReason","newDateTime","RESCHEDULED","rescheduleReason","report","sessionInfo","_id","date","beneficiary","name","program","specialist","attendanceInfo","performanceInfo","activitiesImplemented","notes","followUp","duration","scheduled","actual","module","exports"],"sources":["advancedSessions.js"],"sourcesContent":["/**\r\n * API الجلسات المتقدمة - Advanced Sessions API\r\n * يدير جميع عمليات الجلسات المتقدمة وتتبعها\r\n */\r\n\r\nconst express = require('express');\r\nconst router = express.Router();\r\nconst {\r\n  AdvancedSession,\r\n  SESSION_STATUSES,\r\n  ATTENDANCE_STATUS,\r\n} = require('../models/advancedSession');\r\n\r\n/**\r\n * POST /api/sessions\r\n * إنشاء جلسة جديدة\r\n */\r\nrouter.post('/', async (req, res) => {\r\n  try {\r\n    const {\r\n      beneficiaryId,\r\n      programId,\r\n      specialistId,\r\n      title,\r\n      description,\r\n      scheduledDateTime,\r\n      scheduledDuration,\r\n      location,\r\n      sessionGoals,\r\n      plannedActivities,\r\n    } = req.body;\r\n\r\n    // التحقق من البيانات المطلوبة\r\n    if (!beneficiaryId || !programId || !specialistId || !scheduledDateTime) {\r\n      return res.error('البيانات المطلوبة غير مكتملة', 'Missing required fields', 400);\r\n    }\r\n\r\n    const newSession = new AdvancedSession.model({\r\n      beneficiaryId,\r\n      programId,\r\n      specialistId,\r\n      title,\r\n      description,\r\n      scheduledDateTime,\r\n      scheduledDuration: scheduledDuration || 60,\r\n      location,\r\n      sessionGoals: sessionGoals || [],\r\n      plannedActivities: plannedActivities || [],\r\n      status: SESSION_STATUSES.SCHEDULED,\r\n      createdBy: req.user?.id,\r\n    });\r\n\r\n    await newSession.save();\r\n\r\n    // إعادة ملء البيانات المرتبطة\r\n    await newSession.populate([\r\n      { path: 'beneficiaryId', select: 'name email' },\r\n      { path: 'programId', select: 'name' },\r\n      { path: 'specialistId', select: 'name email' },\r\n    ]);\r\n\r\n    res.success(newSession, 'تم إنشاء الجلسة بنجاح', 201);\r\n  } catch (error) {\r\n    res.error(error, 'فشل في إنشاء الجلسة');\r\n  }\r\n});\r\n\r\n/**\r\n * GET /api/sessions\r\n * الحصول على قائمة الجلسات مع التصفية\r\n */\r\nrouter.get('/', async (req, res) => {\r\n  try {\r\n    const {\r\n      beneficiaryId,\r\n      specialistId,\r\n      status,\r\n      dateFrom,\r\n      dateTo,\r\n      page = 1,\r\n      limit = 20,\r\n      sortBy = 'scheduledDateTime',\r\n      sortOrder = -1,\r\n    } = req.query;\r\n\r\n    const filter = {};\r\n    if (beneficiaryId) filter.beneficiaryId = beneficiaryId;\r\n    if (specialistId) filter.specialistId = specialistId;\r\n    if (status) filter.status = status;\r\n\r\n    if (dateFrom || dateTo) {\r\n      filter.scheduledDateTime = {};\r\n      if (dateFrom) filter.scheduledDateTime.$gte = new Date(dateFrom);\r\n      if (dateTo) filter.scheduledDateTime.$lte = new Date(dateTo);\r\n    }\r\n\r\n    const skip = (page - 1) * limit;\r\n\r\n    const sessions = await AdvancedSession.model\r\n      .find(filter)\r\n      .populate([\r\n        { path: 'beneficiaryId', select: 'name email' },\r\n        { path: 'programId', select: 'name' },\r\n        { path: 'specialistId', select: 'name email' },\r\n      ])\r\n      .sort({ [sortBy]: parseInt(sortOrder) })\r\n      .skip(skip)\r\n      .limit(parseInt(limit));\r\n\r\n    const total = await AdvancedSession.model.countDocuments(filter);\r\n\r\n    res.success(\r\n      {\r\n        sessions,\r\n        pagination: {\r\n          total,\r\n          page: parseInt(page),\r\n          limit: parseInt(limit),\r\n          pages: Math.ceil(total / limit),\r\n        },\r\n      },\r\n      'تم جلب الجلسات بنجاح'\r\n    );\r\n  } catch (error) {\r\n    res.error(error, 'فشل في جلب الجلسات');\r\n  }\r\n});\r\n\r\n/**\r\n * GET /api/sessions/:id\r\n * الحصول على تفاصيل جلسة واحدة\r\n */\r\nrouter.get('/:id', async (req, res) => {\r\n  try {\r\n    const session = await AdvancedSession.model\r\n      .findById(req.params.id)\r\n      .populate([{ path: 'beneficiaryId' }, { path: 'programId' }, { path: 'specialistId' }]);\r\n\r\n    if (!session) {\r\n      return res.error('الجلسة غير موجودة', 'Session not found', 404);\r\n    }\r\n\r\n    res.success(session, 'تم جلب تفاصيل الجلسة');\r\n  } catch (error) {\r\n    res.error(error, 'فشل في جلب الجلسة');\r\n  }\r\n});\r\n\r\n/**\r\n * PUT /api/sessions/:id\r\n * تحديث جلسة\r\n */\r\nrouter.put('/:id', async (req, res) => {\r\n  try {\r\n    const session = await AdvancedSession.model.findById(req.params.id);\r\n\r\n    if (!session) {\r\n      return res.error('الجلسة غير موجودة', 'Session not found', 404);\r\n    }\r\n\r\n    // تحديث الحقول المسموحة\r\n    const allowedFields = [\r\n      'title',\r\n      'description',\r\n      'scheduledDateTime',\r\n      'scheduledDuration',\r\n      'location',\r\n      'sessionGoals',\r\n      'plannedActivities',\r\n    ];\r\n\r\n    allowedFields.forEach(field => {\r\n      if (req.body[field] !== undefined) {\r\n        session[field] = req.body[field];\r\n      }\r\n    });\r\n\r\n    session.updatedBy = req.user?.id;\r\n    await session.save();\r\n\r\n    res.success(session, 'تم تحديث الجلسة بنجاح');\r\n  } catch (error) {\r\n    res.error(error, 'فشل في تحديث الجلسة');\r\n  }\r\n});\r\n\r\n/**\r\n * POST /api/sessions/:id/start\r\n * بدء جلسة\r\n */\r\nrouter.post('/:id/start', async (req, res) => {\r\n  try {\r\n    const session = await AdvancedSession.model.findById(req.params.id);\r\n\r\n    if (!session) {\r\n      return res.error('الجلسة غير موجودة', 'Session not found', 404);\r\n    }\r\n\r\n    if (session.status !== SESSION_STATUSES.SCHEDULED) {\r\n      return res.error('حالة الجلسة غير صحيحة للبدء', 'Invalid session status', 400);\r\n    }\r\n\r\n    session.actualStartTime = new Date();\r\n    session.status = SESSION_STATUSES.IN_PROGRESS;\r\n    session.updatedBy = req.user?.id;\r\n\r\n    await session.save();\r\n\r\n    res.success(session, 'تم بدء الجلسة بنجاح');\r\n  } catch (error) {\r\n    res.error(error, 'فشل في بدء الجلسة');\r\n  }\r\n});\r\n\r\n/**\r\n * POST /api/sessions/:id/complete\r\n * إكمال جلسة مع تسجيل الملاحظات\r\n */\r\nrouter.post('/:id/complete', async (req, res) => {\r\n  try {\r\n    const session = await AdvancedSession.model.findById(req.params.id);\r\n\r\n    if (!session) {\r\n      return res.error('الجلسة غير موجودة', 'Session not found', 404);\r\n    }\r\n\r\n    const {\r\n      beneficiaryAttendance,\r\n      implementedActivities,\r\n      performanceAssessment,\r\n      specialistNotes,\r\n      usedEquipment,\r\n      attachments,\r\n    } = req.body;\r\n\r\n    // تحديث تفاصيل الجلسة\r\n    session.actualEndTime = new Date();\r\n\r\n    if (session.actualStartTime) {\r\n      session.actualDuration = Math.round(\r\n        (session.actualEndTime - session.actualStartTime) / 60000\r\n      );\r\n    }\r\n\r\n    if (beneficiaryAttendance) {\r\n      session.beneficiaryAttendance = beneficiaryAttendance;\r\n    }\r\n\r\n    if (implementedActivities) {\r\n      session.implementedActivities = implementedActivities;\r\n    }\r\n\r\n    if (performanceAssessment) {\r\n      session.performanceAssessment = performanceAssessment;\r\n    }\r\n\r\n    if (specialistNotes) {\r\n      session.specialistNotes = specialistNotes;\r\n    }\r\n\r\n    if (usedEquipment) {\r\n      session.usedEquipment = usedEquipment;\r\n    }\r\n\r\n    if (attachments) {\r\n      session.attachments = attachments;\r\n    }\r\n\r\n    session.status = SESSION_STATUSES.COMPLETED;\r\n    session.updatedBy = req.user?.id;\r\n\r\n    await session.save();\r\n\r\n    res.success(session, 'تم إكمال الجلسة بنجاح');\r\n  } catch (error) {\r\n    res.error(error, 'فشل في إكمال الجلسة');\r\n  }\r\n});\r\n\r\n/**\r\n * POST /api/sessions/:id/cancel\r\n * إلغاء جلسة\r\n */\r\nrouter.post('/:id/cancel', async (req, res) => {\r\n  try {\r\n    const session = await AdvancedSession.model.findById(req.params.id);\r\n\r\n    if (!session) {\r\n      return res.error('الجلسة غير موجودة', 'Session not found', 404);\r\n    }\r\n\r\n    const { reason } = req.body;\r\n\r\n    session.status = SESSION_STATUSES.CANCELLED;\r\n    session.specialistNotes = session.specialistNotes || {};\r\n    session.specialistNotes.cancellationReason = reason;\r\n    session.updatedBy = req.user?.id;\r\n\r\n    await session.save();\r\n\r\n    res.success(session, 'تم إلغاء الجلسة بنجاح');\r\n  } catch (error) {\r\n    res.error(error, 'فشل في إلغاء الجلسة');\r\n  }\r\n});\r\n\r\n/**\r\n * POST /api/sessions/:id/reschedule\r\n * إعادة جدولة جلسة\r\n */\r\nrouter.post('/:id/reschedule', async (req, res) => {\r\n  try {\r\n    const session = await AdvancedSession.model.findById(req.params.id);\r\n\r\n    if (!session) {\r\n      return res.error('الجلسة غير موجودة', 'Session not found', 404);\r\n    }\r\n\r\n    const { newDateTime, reason } = req.body;\r\n\r\n    if (!newDateTime) {\r\n      return res.error('التاريخ الجديد مطلوب', 'New date/time required', 400);\r\n    }\r\n\r\n    session.scheduledDateTime = new Date(newDateTime);\r\n    session.status = SESSION_STATUSES.RESCHEDULED;\r\n    session.specialistNotes = session.specialistNotes || {};\r\n    session.specialistNotes.rescheduleReason = reason;\r\n    session.updatedBy = req.user?.id;\r\n\r\n    await session.save();\r\n\r\n    res.success(session, 'تم إعادة جدولة الجلسة بنجاح');\r\n  } catch (error) {\r\n    res.error(error, 'فشل في إعادة جدولة الجلسة');\r\n  }\r\n});\r\n\r\n/**\r\n * GET /api/sessions/:id/report\r\n * الحصول على تقرير الجلسة\r\n */\r\nrouter.get('/:id/report', async (req, res) => {\r\n  try {\r\n    const session = await AdvancedSession.model\r\n      .findById(req.params.id)\r\n      .populate([{ path: 'beneficiaryId' }, { path: 'programId' }, { path: 'specialistId' }]);\r\n\r\n    if (!session) {\r\n      return res.error('الجلسة غير موجودة', 'Session not found', 404);\r\n    }\r\n\r\n    const report = {\r\n      sessionInfo: {\r\n        id: session._id,\r\n        title: session.title,\r\n        date: session.scheduledDateTime,\r\n        beneficiary: session.beneficiaryId?.name,\r\n        program: session.programId?.name,\r\n        specialist: session.specialistId?.name,\r\n      },\r\n      attendanceInfo: session.beneficiaryAttendance,\r\n      performanceInfo: session.performanceAssessment,\r\n      activitiesImplemented: session.implementedActivities,\r\n      notes: session.specialistNotes,\r\n      followUp: session.followUp,\r\n      duration: {\r\n        scheduled: session.scheduledDuration,\r\n        actual: session.actualDuration,\r\n      },\r\n    };\r\n\r\n    res.success(report, 'تم جلب تقرير الجلسة');\r\n  } catch (error) {\r\n    res.error(error, 'فشل في جلب التقرير');\r\n  }\r\n});\r\n\r\nmodule.exports = router;\r\n"],"mappings":"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","ignoreList":[]}