ee7e8837fb0dc23270589b8471114573
/**
 * API البرامج المتخصصة - Specialized Programs API
 * يدير عمليات CRUD والتقارير الخاصة بالبرامج
 */

const express = require('express');
const router = express.Router();
const {
  SpecializedProgram,
  DISABILITY_TYPES,
  SEVERITY_LEVELS
} = require('../models/specializedProgram');

/**
 * GET /api/programs
 * الحصول على قائمة البرامج مع التصفية والترتيب
 */
router.get('/', async (req, res) => {
  try {
    const {
      disabilityType,
      isActive = true,
      page = 1,
      limit = 20,
      sortBy = 'createdAt',
      sortOrder = -1
    } = req.query;
    const filter = {
      isActive
    };
    if (disabilityType) filter.disabilityType = disabilityType;
    const skip = (page - 1) * limit;
    const programs = await SpecializedProgram.model.find(filter).sort({
      [sortBy]: parseInt(sortOrder)
    }).skip(skip).limit(parseInt(limit));
    const total = await SpecializedProgram.model.countDocuments(filter);
    res.success({
      programs,
      pagination: {
        total,
        page: parseInt(page),
        limit: parseInt(limit),
        pages: Math.ceil(total / limit)
      }
    }, 'تم جلب البرامج بنجاح');
  } catch (error) {
    res.error(error, 'فشل في جلب البرامج');
  }
});

/**
 * GET /api/programs/disability-types
 * الحصول على قائمة أنواع الإعاقات المدعومة
 */
router.get('/disability-types', (req, res) => {
  try {
    res.success({
      types: DISABILITY_TYPES,
      severityLevels: SEVERITY_LEVELS
    }, 'تم جلب أنواع الإعاقات');
  } catch (error) {
    res.error(error, 'فشل في جلب أنواع الإعاقات');
  }
});

/**
 * GET /api/programs/:id
 * الحصول على تفاصيل برنامج واحد
 */
router.get('/:id', async (req, res) => {
  try {
    const program = await SpecializedProgram.model.findById(req.params.id);
    if (!program) {
      return res.error('البرنامج غير موجود', 'Program not found', 404);
    }

    // جلب الأنشطة والمواد المرتبطة إذا كانت موجودة
    const enrichedProgram = {
      ...program.toObject(),
      activitiesCount: program.activities?.length || 0,
      materialsCount: program.materials?.length || 0,
      equipmentCount: program.requiredEquipment?.length || 0
    };
    res.success(enrichedProgram, 'تم جلب تفاصيل البرنامج');
  } catch (error) {
    res.error(error, 'فشل في جلب البرنامج');
  }
});

/**
 * POST /api/programs
 * إنشاء برنامج متخصص جديد
 */
router.post('/', async (req, res) => {
  try {
    const {
      name,
      code,
      description,
      disabilityType,
      supportedSeverityLevels,
      ageGroup,
      sessionConfig,
      programGoals,
      activities,
      requiredEquipment,
      materials,
      qualifiedSpecialists,
      eligibilityCriteria,
      expectedOutcomes,
      pricing
    } = req.body;

    // التحقق من البيانات المطلوبة
    if (!name || !code || !disabilityType) {
      return res.error('البيانات المطلوبة غير مكتملة', 'Missing required fields', 400);
    }

    // التحقق من فريادة الكود
    const existingProgram = await SpecializedProgram.model.findOne({
      code
    });
    if (existingProgram) {
      return res.error('هذا الكود مستخدم بالفعل', 'Code already exists', 400);
    }
    const newProgram = new SpecializedProgram.model({
      name,
      code,
      description,
      disabilityType,
      supportedSeverityLevels: supportedSeverityLevels || [],
      ageGroup,
      sessionConfig: sessionConfig || {},
      programGoals: programGoals || [],
      activities: activities || [],
      requiredEquipment: requiredEquipment || [],
      materials: materials || [],
      qualifiedSpecialists: qualifiedSpecialists || [],
      eligibilityCriteria: eligibilityCriteria || {},
      expectedOutcomes: expectedOutcomes || [],
      pricing,
      createdBy: req.user?.id,
      status: 'draft'
    });
    await newProgram.save();
    res.success(newProgram, 'تم إنشاء البرنامج بنجاح', 201);
  } catch (error) {
    res.error(error, 'فشل في إنشاء البرنامج');
  }
});

/**
 * PUT /api/programs/:id
 * تحديث برنامج متخصص
 */
router.put('/:id', async (req, res) => {
  try {
    const program = await SpecializedProgram.model.findById(req.params.id);
    if (!program) {
      return res.error('البرنامج غير موجود', 'Program not found', 404);
    }

    // تحديث الحقول المسموحة
    const allowedFields = ['name', 'description', 'supportedSeverityLevels', 'ageGroup', 'sessionConfig', 'programGoals', 'activities', 'requiredEquipment', 'materials', 'qualifiedSpecialists', 'eligibilityCriteria', 'expectedOutcomes', 'pricing', 'specialNotes', 'isActive', 'status'];
    allowedFields.forEach(field => {
      if (req.body[field] !== undefined) {
        program[field] = req.body[field];
      }
    });
    program.updatedBy = req.user?.id;
    program.updatedAt = new Date();
    await program.save();
    res.success(program, 'تم تحديث البرنامج بنجاح');
  } catch (error) {
    res.error(error, 'فشل في تحديث البرنامج');
  }
});

/**
 * DELETE /api/programs/:id
 * حذف برنامج (تأرشيف فقط، لا حذف حقيقي)
 */
router.delete('/:id', async (req, res) => {
  try {
    const program = await SpecializedProgram.model.findById(req.params.id);
    if (!program) {
      return res.error('البرنامج غير موجود', 'Program not found', 404);
    }
    program.isActive = false;
    program.status = 'archived';
    program.updatedBy = req.user?.id;
    program.updatedAt = new Date();
    await program.save();
    res.success(program, 'تم أرشفة البرنامج بنجاح');
  } catch (error) {
    res.error(error, 'فشل في حذف البرنامج');
  }
});

/**
 * GET /api/programs/by-disability/:disabilityType
 * الحصول على البرامج حسب نوع الإعاقة
 */
router.get('/by-disability/:disabilityType', async (req, res) => {
  try {
    const programs = await SpecializedProgram.model.find({
      disabilityType: req.params.disabilityType,
      isActive: true
    });
    if (programs.length === 0) {
      return res.success([], 'لا توجد برامج لهذا النوع من الإعاقة');
    }
    res.success(programs, `تم جلب ${programs.length} برامج لنوع الإعاقة المحدد`);
  } catch (error) {
    res.error(error, 'فشل في جلب البرامج');
  }
});

/**
 * POST /api/programs/:id/activate
 * تفعيل برنامج
 */
router.post('/:id/activate', async (req, res) => {
  try {
    const program = await SpecializedProgram.model.findById(req.params.id);
    if (!program) {
      return res.error('البرنامج غير موجود', 'Program not found', 404);
    }
    program.isActive = true;
    program.status = 'active';
    program.updatedBy = req.user?.id;
    await program.save();
    res.success(program, 'تم تفعيل البرنامج بنجاح');
  } catch (error) {
    res.error(error, 'فشل في تفعيل البرنامج');
  }
});

/**
 * GET /api/programs/:id/statistics
 * الحصول على إحصائيات البرنامج
 */
router.get('/:id/statistics', async (req, res) => {
  try {
    const program = await SpecializedProgram.model.findById(req.params.id);
    if (!program) {
      return res.error('البرنامج غير موجود', 'Program not found', 404);
    }
    res.success({
      programId: program._id,
      programName: program.name,
      statistics: program.statistics || {},
      lastUpdated: program.updatedAt
    }, 'تم جلب إحصائيات البرنامج');
  } catch (error) {
    res.error(error, 'فشل في جلب الإحصائيات');
  }
});
module.exports = router;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsInJvdXRlciIsIlJvdXRlciIsIlNwZWNpYWxpemVkUHJvZ3JhbSIsIkRJU0FCSUxJVFlfVFlQRVMiLCJTRVZFUklUWV9MRVZFTFMiLCJnZXQiLCJyZXEiLCJyZXMiLCJkaXNhYmlsaXR5VHlwZSIsImlzQWN0aXZlIiwicGFnZSIsImxpbWl0Iiwic29ydEJ5Iiwic29ydE9yZGVyIiwicXVlcnkiLCJmaWx0ZXIiLCJza2lwIiwicHJvZ3JhbXMiLCJtb2RlbCIsImZpbmQiLCJzb3J0IiwicGFyc2VJbnQiLCJ0b3RhbCIsImNvdW50RG9jdW1lbnRzIiwic3VjY2VzcyIsInBhZ2luYXRpb24iLCJwYWdlcyIsIk1hdGgiLCJjZWlsIiwiZXJyb3IiLCJ0eXBlcyIsInNldmVyaXR5TGV2ZWxzIiwicHJvZ3JhbSIsImZpbmRCeUlkIiwicGFyYW1zIiwiaWQiLCJlbnJpY2hlZFByb2dyYW0iLCJ0b09iamVjdCIsImFjdGl2aXRpZXNDb3VudCIsImFjdGl2aXRpZXMiLCJsZW5ndGgiLCJtYXRlcmlhbHNDb3VudCIsIm1hdGVyaWFscyIsImVxdWlwbWVudENvdW50IiwicmVxdWlyZWRFcXVpcG1lbnQiLCJwb3N0IiwibmFtZSIsImNvZGUiLCJkZXNjcmlwdGlvbiIsInN1cHBvcnRlZFNldmVyaXR5TGV2ZWxzIiwiYWdlR3JvdXAiLCJzZXNzaW9uQ29uZmlnIiwicHJvZ3JhbUdvYWxzIiwicXVhbGlmaWVkU3BlY2lhbGlzdHMiLCJlbGlnaWJpbGl0eUNyaXRlcmlhIiwiZXhwZWN0ZWRPdXRjb21lcyIsInByaWNpbmciLCJib2R5IiwiZXhpc3RpbmdQcm9ncmFtIiwiZmluZE9uZSIsIm5ld1Byb2dyYW0iLCJjcmVhdGVkQnkiLCJ1c2VyIiwic3RhdHVzIiwic2F2ZSIsInB1dCIsImFsbG93ZWRGaWVsZHMiLCJmb3JFYWNoIiwiZmllbGQiLCJ1bmRlZmluZWQiLCJ1cGRhdGVkQnkiLCJ1cGRhdGVkQXQiLCJEYXRlIiwiZGVsZXRlIiwicHJvZ3JhbUlkIiwiX2lkIiwicHJvZ3JhbU5hbWUiLCJzdGF0aXN0aWNzIiwibGFzdFVwZGF0ZWQiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsic3BlY2lhbGl6ZWRQcm9ncmFtcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQVBJINin2YTYqNix2KfZhdisINin2YTZhdiq2K7Ytdi12KkgLSBTcGVjaWFsaXplZCBQcm9ncmFtcyBBUElcclxuICog2YrYr9mK2LEg2LnZhdmE2YrYp9iqIENSVUQg2YjYp9mE2KrZgtin2LHZitixINin2YTYrtin2LXYqSDYqNin2YTYqNix2KfZhdisXHJcbiAqL1xyXG5cclxuY29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKTtcclxuY29uc3Qgcm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcclxuY29uc3Qge1xyXG4gIFNwZWNpYWxpemVkUHJvZ3JhbSxcclxuICBESVNBQklMSVRZX1RZUEVTLFxyXG4gIFNFVkVSSVRZX0xFVkVMUyxcclxufSA9IHJlcXVpcmUoJy4uL21vZGVscy9zcGVjaWFsaXplZFByb2dyYW0nKTtcclxuXHJcbi8qKlxyXG4gKiBHRVQgL2FwaS9wcm9ncmFtc1xyXG4gKiDYp9mE2K3YtdmI2YQg2LnZhNmJINmC2KfYptmF2Kkg2KfZhNio2LHYp9mF2Kwg2YXYuSDYp9mE2KrYtdmB2YrYqSDZiNin2YTYqtix2KrZitioXHJcbiAqL1xyXG5yb3V0ZXIuZ2V0KCcvJywgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHtcclxuICAgICAgZGlzYWJpbGl0eVR5cGUsXHJcbiAgICAgIGlzQWN0aXZlID0gdHJ1ZSxcclxuICAgICAgcGFnZSA9IDEsXHJcbiAgICAgIGxpbWl0ID0gMjAsXHJcbiAgICAgIHNvcnRCeSA9ICdjcmVhdGVkQXQnLFxyXG4gICAgICBzb3J0T3JkZXIgPSAtMSxcclxuICAgIH0gPSByZXEucXVlcnk7XHJcblxyXG4gICAgY29uc3QgZmlsdGVyID0geyBpc0FjdGl2ZSB9O1xyXG4gICAgaWYgKGRpc2FiaWxpdHlUeXBlKSBmaWx0ZXIuZGlzYWJpbGl0eVR5cGUgPSBkaXNhYmlsaXR5VHlwZTtcclxuXHJcbiAgICBjb25zdCBza2lwID0gKHBhZ2UgLSAxKSAqIGxpbWl0O1xyXG5cclxuICAgIGNvbnN0IHByb2dyYW1zID0gYXdhaXQgU3BlY2lhbGl6ZWRQcm9ncmFtLm1vZGVsXHJcbiAgICAgIC5maW5kKGZpbHRlcilcclxuICAgICAgLnNvcnQoeyBbc29ydEJ5XTogcGFyc2VJbnQoc29ydE9yZGVyKSB9KVxyXG4gICAgICAuc2tpcChza2lwKVxyXG4gICAgICAubGltaXQocGFyc2VJbnQobGltaXQpKTtcclxuXHJcbiAgICBjb25zdCB0b3RhbCA9IGF3YWl0IFNwZWNpYWxpemVkUHJvZ3JhbS5tb2RlbC5jb3VudERvY3VtZW50cyhmaWx0ZXIpO1xyXG5cclxuICAgIHJlcy5zdWNjZXNzKFxyXG4gICAgICB7XHJcbiAgICAgICAgcHJvZ3JhbXMsXHJcbiAgICAgICAgcGFnaW5hdGlvbjoge1xyXG4gICAgICAgICAgdG90YWwsXHJcbiAgICAgICAgICBwYWdlOiBwYXJzZUludChwYWdlKSxcclxuICAgICAgICAgIGxpbWl0OiBwYXJzZUludChsaW1pdCksXHJcbiAgICAgICAgICBwYWdlczogTWF0aC5jZWlsKHRvdGFsIC8gbGltaXQpLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0sXHJcbiAgICAgICfYqtmFINis2YTYqCDYp9mE2KjYsdin2YXYrCDYqNmG2KzYp9itJ1xyXG4gICAgKTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgcmVzLmVycm9yKGVycm9yLCAn2YHYtNmEINmB2Yog2KzZhNioINin2YTYqNix2KfZhdisJyk7XHJcbiAgfVxyXG59KTtcclxuXHJcbi8qKlxyXG4gKiBHRVQgL2FwaS9wcm9ncmFtcy9kaXNhYmlsaXR5LXR5cGVzXHJcbiAqINin2YTYrdi12YjZhCDYudmE2Ykg2YLYp9im2YXYqSDYo9mG2YjYp9i5INin2YTYpdi52KfZgtin2Kog2KfZhNmF2K/YudmI2YXYqVxyXG4gKi9cclxucm91dGVyLmdldCgnL2Rpc2FiaWxpdHktdHlwZXMnLCAocmVxLCByZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgcmVzLnN1Y2Nlc3MoXHJcbiAgICAgIHtcclxuICAgICAgICB0eXBlczogRElTQUJJTElUWV9UWVBFUyxcclxuICAgICAgICBzZXZlcml0eUxldmVsczogU0VWRVJJVFlfTEVWRUxTLFxyXG4gICAgICB9LFxyXG4gICAgICAn2KrZhSDYrNmE2Kgg2KPZhtmI2KfYuSDYp9mE2KXYudin2YLYp9iqJ1xyXG4gICAgKTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgcmVzLmVycm9yKGVycm9yLCAn2YHYtNmEINmB2Yog2KzZhNioINij2YbZiNin2Lkg2KfZhNil2LnYp9mC2KfYqicpO1xyXG4gIH1cclxufSk7XHJcblxyXG4vKipcclxuICogR0VUIC9hcGkvcHJvZ3JhbXMvOmlkXHJcbiAqINin2YTYrdi12YjZhCDYudmE2Ykg2KrZgdin2LXZitmEINio2LHZhtin2YXYrCDZiNin2K3Yr1xyXG4gKi9cclxucm91dGVyLmdldCgnLzppZCcsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBwcm9ncmFtID0gYXdhaXQgU3BlY2lhbGl6ZWRQcm9ncmFtLm1vZGVsLmZpbmRCeUlkKHJlcS5wYXJhbXMuaWQpO1xyXG5cclxuICAgIGlmICghcHJvZ3JhbSkge1xyXG4gICAgICByZXR1cm4gcmVzLmVycm9yKCfYp9mE2KjYsdmG2KfZhdisINi62YrYsSDZhdmI2KzZiNivJywgJ1Byb2dyYW0gbm90IGZvdW5kJywgNDA0KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyDYrNmE2Kgg2KfZhNij2YbYtNi32Kkg2YjYp9mE2YXZiNin2K8g2KfZhNmF2LHYqtio2LfYqSDYpdiw2Kcg2YPYp9mG2Kog2YXZiNis2YjYr9ipXHJcbiAgICBjb25zdCBlbnJpY2hlZFByb2dyYW0gPSB7XHJcbiAgICAgIC4uLnByb2dyYW0udG9PYmplY3QoKSxcclxuICAgICAgYWN0aXZpdGllc0NvdW50OiBwcm9ncmFtLmFjdGl2aXRpZXM/Lmxlbmd0aCB8fCAwLFxyXG4gICAgICBtYXRlcmlhbHNDb3VudDogcHJvZ3JhbS5tYXRlcmlhbHM/Lmxlbmd0aCB8fCAwLFxyXG4gICAgICBlcXVpcG1lbnRDb3VudDogcHJvZ3JhbS5yZXF1aXJlZEVxdWlwbWVudD8ubGVuZ3RoIHx8IDAsXHJcbiAgICB9O1xyXG5cclxuICAgIHJlcy5zdWNjZXNzKGVucmljaGVkUHJvZ3JhbSwgJ9iq2YUg2KzZhNioINiq2YHYp9i12YrZhCDYp9mE2KjYsdmG2KfZhdisJyk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIHJlcy5lcnJvcihlcnJvciwgJ9mB2LTZhCDZgdmKINis2YTYqCDYp9mE2KjYsdmG2KfZhdisJyk7XHJcbiAgfVxyXG59KTtcclxuXHJcbi8qKlxyXG4gKiBQT1NUIC9hcGkvcHJvZ3JhbXNcclxuICog2KXZhti02KfYoSDYqNix2YbYp9mF2Kwg2YXYqtiu2LXYtSDYrNiv2YrYr1xyXG4gKi9cclxucm91dGVyLnBvc3QoJy8nLCBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3Qge1xyXG4gICAgICBuYW1lLFxyXG4gICAgICBjb2RlLFxyXG4gICAgICBkZXNjcmlwdGlvbixcclxuICAgICAgZGlzYWJpbGl0eVR5cGUsXHJcbiAgICAgIHN1cHBvcnRlZFNldmVyaXR5TGV2ZWxzLFxyXG4gICAgICBhZ2VHcm91cCxcclxuICAgICAgc2Vzc2lvbkNvbmZpZyxcclxuICAgICAgcHJvZ3JhbUdvYWxzLFxyXG4gICAgICBhY3Rpdml0aWVzLFxyXG4gICAgICByZXF1aXJlZEVxdWlwbWVudCxcclxuICAgICAgbWF0ZXJpYWxzLFxyXG4gICAgICBxdWFsaWZpZWRTcGVjaWFsaXN0cyxcclxuICAgICAgZWxpZ2liaWxpdHlDcml0ZXJpYSxcclxuICAgICAgZXhwZWN0ZWRPdXRjb21lcyxcclxuICAgICAgcHJpY2luZyxcclxuICAgIH0gPSByZXEuYm9keTtcclxuXHJcbiAgICAvLyDYp9mE2KrYrdmC2YIg2YXZhiDYp9mE2KjZitin2YbYp9iqINin2YTZhdi32YTZiNio2KlcclxuICAgIGlmICghbmFtZSB8fCAhY29kZSB8fCAhZGlzYWJpbGl0eVR5cGUpIHtcclxuICAgICAgcmV0dXJuIHJlcy5lcnJvcign2KfZhNio2YrYp9mG2KfYqiDYp9mE2YXYt9mE2YjYqNipINi62YrYsSDZhdmD2KrZhdmE2KknLCAnTWlzc2luZyByZXF1aXJlZCBmaWVsZHMnLCA0MDApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vINin2YTYqtit2YLZgiDZhdmGINmB2LHZitin2K/YqSDYp9mE2YPZiNivXHJcbiAgICBjb25zdCBleGlzdGluZ1Byb2dyYW0gPSBhd2FpdCBTcGVjaWFsaXplZFByb2dyYW0ubW9kZWwuZmluZE9uZSh7IGNvZGUgfSk7XHJcbiAgICBpZiAoZXhpc3RpbmdQcm9ncmFtKSB7XHJcbiAgICAgIHJldHVybiByZXMuZXJyb3IoJ9mH2LDYpyDYp9mE2YPZiNivINmF2LPYqtiu2K/ZhSDYqNin2YTZgdi52YQnLCAnQ29kZSBhbHJlYWR5IGV4aXN0cycsIDQwMCk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgbmV3UHJvZ3JhbSA9IG5ldyBTcGVjaWFsaXplZFByb2dyYW0ubW9kZWwoe1xyXG4gICAgICBuYW1lLFxyXG4gICAgICBjb2RlLFxyXG4gICAgICBkZXNjcmlwdGlvbixcclxuICAgICAgZGlzYWJpbGl0eVR5cGUsXHJcbiAgICAgIHN1cHBvcnRlZFNldmVyaXR5TGV2ZWxzOiBzdXBwb3J0ZWRTZXZlcml0eUxldmVscyB8fCBbXSxcclxuICAgICAgYWdlR3JvdXAsXHJcbiAgICAgIHNlc3Npb25Db25maWc6IHNlc3Npb25Db25maWcgfHwge30sXHJcbiAgICAgIHByb2dyYW1Hb2FsczogcHJvZ3JhbUdvYWxzIHx8IFtdLFxyXG4gICAgICBhY3Rpdml0aWVzOiBhY3Rpdml0aWVzIHx8IFtdLFxyXG4gICAgICByZXF1aXJlZEVxdWlwbWVudDogcmVxdWlyZWRFcXVpcG1lbnQgfHwgW10sXHJcbiAgICAgIG1hdGVyaWFsczogbWF0ZXJpYWxzIHx8IFtdLFxyXG4gICAgICBxdWFsaWZpZWRTcGVjaWFsaXN0czogcXVhbGlmaWVkU3BlY2lhbGlzdHMgfHwgW10sXHJcbiAgICAgIGVsaWdpYmlsaXR5Q3JpdGVyaWE6IGVsaWdpYmlsaXR5Q3JpdGVyaWEgfHwge30sXHJcbiAgICAgIGV4cGVjdGVkT3V0Y29tZXM6IGV4cGVjdGVkT3V0Y29tZXMgfHwgW10sXHJcbiAgICAgIHByaWNpbmcsXHJcbiAgICAgIGNyZWF0ZWRCeTogcmVxLnVzZXI/LmlkLFxyXG4gICAgICBzdGF0dXM6ICdkcmFmdCcsXHJcbiAgICB9KTtcclxuXHJcbiAgICBhd2FpdCBuZXdQcm9ncmFtLnNhdmUoKTtcclxuXHJcbiAgICByZXMuc3VjY2VzcyhuZXdQcm9ncmFtLCAn2KrZhSDYpdmG2LTYp9ihINin2YTYqNix2YbYp9mF2Kwg2KjZhtis2KfYrScsIDIwMSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIHJlcy5lcnJvcihlcnJvciwgJ9mB2LTZhCDZgdmKINil2YbYtNin2KEg2KfZhNio2LHZhtin2YXYrCcpO1xyXG4gIH1cclxufSk7XHJcblxyXG4vKipcclxuICogUFVUIC9hcGkvcHJvZ3JhbXMvOmlkXHJcbiAqINiq2K3Yr9mK2Ksg2KjYsdmG2KfZhdisINmF2KrYrti12LVcclxuICovXHJcbnJvdXRlci5wdXQoJy86aWQnLCBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgcHJvZ3JhbSA9IGF3YWl0IFNwZWNpYWxpemVkUHJvZ3JhbS5tb2RlbC5maW5kQnlJZChyZXEucGFyYW1zLmlkKTtcclxuXHJcbiAgICBpZiAoIXByb2dyYW0pIHtcclxuICAgICAgcmV0dXJuIHJlcy5lcnJvcign2KfZhNio2LHZhtin2YXYrCDYutmK2LEg2YXZiNis2YjYrycsICdQcm9ncmFtIG5vdCBmb3VuZCcsIDQwNCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g2KrYrdiv2YrYqyDYp9mE2K3ZgtmI2YQg2KfZhNmF2LPZhdmI2K3YqVxyXG4gICAgY29uc3QgYWxsb3dlZEZpZWxkcyA9IFtcclxuICAgICAgJ25hbWUnLFxyXG4gICAgICAnZGVzY3JpcHRpb24nLFxyXG4gICAgICAnc3VwcG9ydGVkU2V2ZXJpdHlMZXZlbHMnLFxyXG4gICAgICAnYWdlR3JvdXAnLFxyXG4gICAgICAnc2Vzc2lvbkNvbmZpZycsXHJcbiAgICAgICdwcm9ncmFtR29hbHMnLFxyXG4gICAgICAnYWN0aXZpdGllcycsXHJcbiAgICAgICdyZXF1aXJlZEVxdWlwbWVudCcsXHJcbiAgICAgICdtYXRlcmlhbHMnLFxyXG4gICAgICAncXVhbGlmaWVkU3BlY2lhbGlzdHMnLFxyXG4gICAgICAnZWxpZ2liaWxpdHlDcml0ZXJpYScsXHJcbiAgICAgICdleHBlY3RlZE91dGNvbWVzJyxcclxuICAgICAgJ3ByaWNpbmcnLFxyXG4gICAgICAnc3BlY2lhbE5vdGVzJyxcclxuICAgICAgJ2lzQWN0aXZlJyxcclxuICAgICAgJ3N0YXR1cycsXHJcbiAgICBdO1xyXG5cclxuICAgIGFsbG93ZWRGaWVsZHMuZm9yRWFjaChmaWVsZCA9PiB7XHJcbiAgICAgIGlmIChyZXEuYm9keVtmaWVsZF0gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHByb2dyYW1bZmllbGRdID0gcmVxLmJvZHlbZmllbGRdO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBwcm9ncmFtLnVwZGF0ZWRCeSA9IHJlcS51c2VyPy5pZDtcclxuICAgIHByb2dyYW0udXBkYXRlZEF0ID0gbmV3IERhdGUoKTtcclxuXHJcbiAgICBhd2FpdCBwcm9ncmFtLnNhdmUoKTtcclxuXHJcbiAgICByZXMuc3VjY2Vzcyhwcm9ncmFtLCAn2KrZhSDYqtit2K/ZitirINin2YTYqNix2YbYp9mF2Kwg2KjZhtis2KfYrScpO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICByZXMuZXJyb3IoZXJyb3IsICfZgdi02YQg2YHZiiDYqtit2K/ZitirINin2YTYqNix2YbYp9mF2KwnKTtcclxuICB9XHJcbn0pO1xyXG5cclxuLyoqXHJcbiAqIERFTEVURSAvYXBpL3Byb2dyYW1zLzppZFxyXG4gKiDYrdiw2YEg2KjYsdmG2KfZhdisICjYqtij2LHYtNmK2YEg2YHZgti32Iwg2YTYpyDYrdiw2YEg2K3ZgtmK2YLZiilcclxuICovXHJcbnJvdXRlci5kZWxldGUoJy86aWQnLCBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgcHJvZ3JhbSA9IGF3YWl0IFNwZWNpYWxpemVkUHJvZ3JhbS5tb2RlbC5maW5kQnlJZChyZXEucGFyYW1zLmlkKTtcclxuXHJcbiAgICBpZiAoIXByb2dyYW0pIHtcclxuICAgICAgcmV0dXJuIHJlcy5lcnJvcign2KfZhNio2LHZhtin2YXYrCDYutmK2LEg2YXZiNis2YjYrycsICdQcm9ncmFtIG5vdCBmb3VuZCcsIDQwNCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvZ3JhbS5pc0FjdGl2ZSA9IGZhbHNlO1xyXG4gICAgcHJvZ3JhbS5zdGF0dXMgPSAnYXJjaGl2ZWQnO1xyXG4gICAgcHJvZ3JhbS51cGRhdGVkQnkgPSByZXEudXNlcj8uaWQ7XHJcbiAgICBwcm9ncmFtLnVwZGF0ZWRBdCA9IG5ldyBEYXRlKCk7XHJcblxyXG4gICAgYXdhaXQgcHJvZ3JhbS5zYXZlKCk7XHJcblxyXG4gICAgcmVzLnN1Y2Nlc3MocHJvZ3JhbSwgJ9iq2YUg2KPYsdi02YHYqSDYp9mE2KjYsdmG2KfZhdisINio2YbYrNin2K0nKTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgcmVzLmVycm9yKGVycm9yLCAn2YHYtNmEINmB2Yog2K3YsNmBINin2YTYqNix2YbYp9mF2KwnKTtcclxuICB9XHJcbn0pO1xyXG5cclxuLyoqXHJcbiAqIEdFVCAvYXBpL3Byb2dyYW1zL2J5LWRpc2FiaWxpdHkvOmRpc2FiaWxpdHlUeXBlXHJcbiAqINin2YTYrdi12YjZhCDYudmE2Ykg2KfZhNio2LHYp9mF2Kwg2K3Ys9ioINmG2YjYuSDYp9mE2KXYudin2YLYqVxyXG4gKi9cclxucm91dGVyLmdldCgnL2J5LWRpc2FiaWxpdHkvOmRpc2FiaWxpdHlUeXBlJywgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHByb2dyYW1zID0gYXdhaXQgU3BlY2lhbGl6ZWRQcm9ncmFtLm1vZGVsLmZpbmQoe1xyXG4gICAgICBkaXNhYmlsaXR5VHlwZTogcmVxLnBhcmFtcy5kaXNhYmlsaXR5VHlwZSxcclxuICAgICAgaXNBY3RpdmU6IHRydWUsXHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAocHJvZ3JhbXMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3VjY2VzcyhbXSwgJ9mE2Kcg2KrZiNis2K8g2KjYsdin2YXYrCDZhNmH2LDYpyDYp9mE2YbZiNi5INmF2YYg2KfZhNil2LnYp9mC2KknKTtcclxuICAgIH1cclxuXHJcbiAgICByZXMuc3VjY2Vzcyhwcm9ncmFtcywgYNiq2YUg2KzZhNioICR7cHJvZ3JhbXMubGVuZ3RofSDYqNix2KfZhdisINmE2YbZiNi5INin2YTYpdi52KfZgtipINin2YTZhdit2K/Yr2ApO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICByZXMuZXJyb3IoZXJyb3IsICfZgdi02YQg2YHZiiDYrNmE2Kgg2KfZhNio2LHYp9mF2KwnKTtcclxuICB9XHJcbn0pO1xyXG5cclxuLyoqXHJcbiAqIFBPU1QgL2FwaS9wcm9ncmFtcy86aWQvYWN0aXZhdGVcclxuICog2KrZgdi52YrZhCDYqNix2YbYp9mF2KxcclxuICovXHJcbnJvdXRlci5wb3N0KCcvOmlkL2FjdGl2YXRlJywgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHByb2dyYW0gPSBhd2FpdCBTcGVjaWFsaXplZFByb2dyYW0ubW9kZWwuZmluZEJ5SWQocmVxLnBhcmFtcy5pZCk7XHJcblxyXG4gICAgaWYgKCFwcm9ncmFtKSB7XHJcbiAgICAgIHJldHVybiByZXMuZXJyb3IoJ9in2YTYqNix2YbYp9mF2Kwg2LrZitixINmF2YjYrNmI2K8nLCAnUHJvZ3JhbSBub3QgZm91bmQnLCA0MDQpO1xyXG4gICAgfVxyXG5cclxuICAgIHByb2dyYW0uaXNBY3RpdmUgPSB0cnVlO1xyXG4gICAgcHJvZ3JhbS5zdGF0dXMgPSAnYWN0aXZlJztcclxuICAgIHByb2dyYW0udXBkYXRlZEJ5ID0gcmVxLnVzZXI/LmlkO1xyXG5cclxuICAgIGF3YWl0IHByb2dyYW0uc2F2ZSgpO1xyXG5cclxuICAgIHJlcy5zdWNjZXNzKHByb2dyYW0sICfYqtmFINiq2YHYudmK2YQg2KfZhNio2LHZhtin2YXYrCDYqNmG2KzYp9itJyk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIHJlcy5lcnJvcihlcnJvciwgJ9mB2LTZhCDZgdmKINiq2YHYudmK2YQg2KfZhNio2LHZhtin2YXYrCcpO1xyXG4gIH1cclxufSk7XHJcblxyXG4vKipcclxuICogR0VUIC9hcGkvcHJvZ3JhbXMvOmlkL3N0YXRpc3RpY3NcclxuICog2KfZhNit2LXZiNmEINi52YTZiSDYpdit2LXYp9im2YrYp9iqINin2YTYqNix2YbYp9mF2KxcclxuICovXHJcbnJvdXRlci5nZXQoJy86aWQvc3RhdGlzdGljcycsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBwcm9ncmFtID0gYXdhaXQgU3BlY2lhbGl6ZWRQcm9ncmFtLm1vZGVsLmZpbmRCeUlkKHJlcS5wYXJhbXMuaWQpO1xyXG5cclxuICAgIGlmICghcHJvZ3JhbSkge1xyXG4gICAgICByZXR1cm4gcmVzLmVycm9yKCfYp9mE2KjYsdmG2KfZhdisINi62YrYsSDZhdmI2KzZiNivJywgJ1Byb2dyYW0gbm90IGZvdW5kJywgNDA0KTtcclxuICAgIH1cclxuXHJcbiAgICByZXMuc3VjY2VzcyhcclxuICAgICAge1xyXG4gICAgICAgIHByb2dyYW1JZDogcHJvZ3JhbS5faWQsXHJcbiAgICAgICAgcHJvZ3JhbU5hbWU6IHByb2dyYW0ubmFtZSxcclxuICAgICAgICBzdGF0aXN0aWNzOiBwcm9ncmFtLnN0YXRpc3RpY3MgfHwge30sXHJcbiAgICAgICAgbGFzdFVwZGF0ZWQ6IHByb2dyYW0udXBkYXRlZEF0LFxyXG4gICAgICB9LFxyXG4gICAgICAn2KrZhSDYrNmE2Kgg2KXYrdi12KfYptmK2KfYqiDYp9mE2KjYsdmG2KfZhdisJ1xyXG4gICAgKTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgcmVzLmVycm9yKGVycm9yLCAn2YHYtNmEINmB2Yog2KzZhNioINin2YTYpdit2LXYp9im2YrYp9iqJyk7XHJcbiAgfVxyXG59KTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gcm91dGVyO1xyXG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE1BQU1BLE9BQU8sR0FBR0MsT0FBTyxDQUFDLFNBQVMsQ0FBQztBQUNsQyxNQUFNQyxNQUFNLEdBQUdGLE9BQU8sQ0FBQ0csTUFBTSxDQUFDLENBQUM7QUFDL0IsTUFBTTtFQUNKQyxrQkFBa0I7RUFDbEJDLGdCQUFnQjtFQUNoQkM7QUFDRixDQUFDLEdBQUdMLE9BQU8sQ0FBQyw4QkFBOEIsQ0FBQzs7QUFFM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQUMsTUFBTSxDQUFDSyxHQUFHLENBQUMsR0FBRyxFQUFFLE9BQU9DLEdBQUcsRUFBRUMsR0FBRyxLQUFLO0VBQ2xDLElBQUk7SUFDRixNQUFNO01BQ0pDLGNBQWM7TUFDZEMsUUFBUSxHQUFHLElBQUk7TUFDZkMsSUFBSSxHQUFHLENBQUM7TUFDUkMsS0FBSyxHQUFHLEVBQUU7TUFDVkMsTUFBTSxHQUFHLFdBQVc7TUFDcEJDLFNBQVMsR0FBRyxDQUFDO0lBQ2YsQ0FBQyxHQUFHUCxHQUFHLENBQUNRLEtBQUs7SUFFYixNQUFNQyxNQUFNLEdBQUc7TUFBRU47SUFBUyxDQUFDO0lBQzNCLElBQUlELGNBQWMsRUFBRU8sTUFBTSxDQUFDUCxjQUFj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