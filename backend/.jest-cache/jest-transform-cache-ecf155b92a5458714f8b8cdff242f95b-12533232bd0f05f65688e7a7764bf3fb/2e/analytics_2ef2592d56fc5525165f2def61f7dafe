5f1200f1d3cd1a851de344dd199317fe
// Advanced Analytics Routes
// نقاط التحليلات المتقدمة

const express = require('express');
const router = express.Router();
const AnalyticsService = require('../services/analyticsService');
const {
  ApiResponse,
  ApiError
} = require('../utils/apiResponse');

// تتبع سلوك المستخدم
router.get('/user-behavior/:userId', (req, res, next) => {
  try {
    const {
      userId
    } = req.params;
    const result = AnalyticsService.trackUserBehavior(userId);
    return res.status(200).json(new ApiResponse(200, result, 'User behavior tracked'));
  } catch (_error) {
    return next(new ApiError(500, 'Failed to track user behavior', [_error.message]));
  }
});

// الحصول على مقاييس الأداء
router.get('/performance-metrics', (req, res, next) => {
  try {
    const {
      timeRange
    } = req.query;
    const result = AnalyticsService.getPerformanceMetrics(timeRange || '24h');
    return res.status(200).json(new ApiResponse(200, result, 'Performance metrics fetched'));
  } catch (_error) {
    return next(new ApiError(500, 'Failed to fetch performance metrics', [_error.message]));
  }
});

// عرض لوحة تحكم مخصصة
router.get('/dashboard/:userId', (req, res, next) => {
  try {
    const {
      userId
    } = req.params;
    const result = AnalyticsService.getCustomDashboard(userId);
    return res.status(200).json(new ApiResponse(200, result, 'Dashboard fetched'));
  } catch (error) {
    return next(new ApiError(500, 'Failed to fetch dashboard', [error.message]));
  }
});

// تحليل الاتجاهات
router.get('/trends/:metric', (req, res, next) => {
  try {
    const {
      metric
    } = req.params;
    const {
      period
    } = req.query;
    const result = AnalyticsService.analyzeTrends(metric, period || '30d');
    return res.status(200).json(new ApiResponse(200, result, 'Trends analyzed'));
  } catch (_error) {
    return next(new ApiError(500, 'Failed to analyze trends', [_error.message]));
  }
});

// الحصول على التوصيات
router.get('/recommendations', (req, res, next) => {
  try {
    const result = AnalyticsService.getRecommendations();
    return res.status(200).json(new ApiResponse(200, result, 'Recommendations fetched'));
  } catch (_error) {
    return next(new ApiError(500, 'Failed to fetch recommendations', [_error.message]));
  }
});

// مقارنة المقاييس
router.post('/compare-metrics', (req, res) => {
  try {
    const {
      metric1,
      metric2,
      period
    } = req.body;
    if (!metric1 || !metric2) {
      return res.status(400).json({
        success: false,
        message: 'Metrics required'
      });
    }
    const result = AnalyticsService.compareMetrics(metric1, metric2, period || '30d');
    res.status(200).json(result);
  } catch (_error) {
    res.status(500).json({
      success: false,
      message: 'Failed to compare metrics',
      error: _error.message
    });
  }
});

// توليد تقرير تحليلي
router.post('/generate-report', (req, res) => {
  try {
    const {
      reportType
    } = req.body;
    const result = AnalyticsService.generateAnalysisReport(reportType || 'executive');
    res.status(200).json(result);
  } catch (_error) {
    res.status(500).json({
      success: false,
      message: 'Failed to generate report',
      error: _error.message
    });
  }
});

// تتبع التحويل
router.post('/track-conversion', (req, res) => {
  try {
    const {
      userId,
      event
    } = req.body;
    if (!userId || !event) {
      return res.status(400).json({
        success: false,
        message: 'User ID and event required'
      });
    }
    const result = AnalyticsService.trackConversion(userId, event);
    res.status(200).json(result);
  } catch (_error) {
    res.status(500).json({
      success: false,
      message: 'Failed to track conversion',
      error: _error.message
    });
  }
});

// التحليلات في الوقت الفعلي
router.get('/real-time', (req, res) => {
  try {
    const result = AnalyticsService.getRealTimeAnalytics();
    res.status(200).json(result);
  } catch (_error) {
    res.status(500).json({
      success: false,
      message: 'Failed to fetch real-time analytics',
      error: _error.message
    });
  }
});

// التنبؤات التحليلية
router.get('/predictions', (req, res) => {
  try {
    const result = AnalyticsService.getPredictiveAnalytics();
    res.status(200).json(result);
  } catch (_error) {
    res.status(500).json({
      success: false,
      message: 'Failed to fetch predictions',
      error: _error.message
    });
  }
});

// تصدير التقرير
router.get('/export/:format', (req, res) => {
  try {
    const {
      format
    } = req.params;
    if (!['pdf', 'xlsx', 'csv'].includes(format)) {
      return res.status(400).json({
        success: false,
        message: 'Invalid format. Supported: pdf, xlsx, csv'
      });
    }
    const result = AnalyticsService.exportAnalyticsReport(format);
    res.status(200).json(result);
  } catch (_error) {
    res.status(500).json({
      success: false,
      message: 'Failed to export report',
      error: _error.message
    });
  }
});

// اختبار A/B
router.get('/ab-test/:testId', (req, res) => {
  try {
    const {
      testId
    } = req.params;
    const result = AnalyticsService.getABTestResults(testId);
    res.status(200).json(result);
  } catch (error) {
    res.status(500).json({
      success: false,
      message: 'Failed to fetch A/B test results',
      error: error.message
    });
  }
});

// مقاييس التسويق
router.get('/marketing/:campaign', (req, res) => {
  try {
    const {
      campaign
    } = req.params;
    const result = AnalyticsService.getMarketingMetrics(campaign);
    res.status(200).json(result);
  } catch (_error) {
    res.status(500).json({
      success: false,
      message: 'Failed to fetch cohort metrics',
      error: _error.message
    });
  }
});

/**
 * ======================
 * NEW ADVANCED ANALYTICS ENDPOINTS
 * مسارات التحليلات المتقدمة الجديدة
 * ======================
 */

const {
  authenticate,
  authorize
} = require('../middleware/auth');
const {
  KPI,
  ReportTemplate,
  GeneratedReport,
  Dashboard,
  Prediction
} = require('../models/analytics');

/**
 * KPI ENDPOINTS
 */

// Get all KPIs
router.get('/kpis', authenticate, async (req, res) => {
  try {
    const {
      category,
      isActive
    } = req.query;
    const filter = {};
    if (category) filter.category = category;
    if (isActive !== undefined) filter.isActive = isActive === 'true';
    const kpis = await KPI.find(filter).sort({
      category: 1,
      code: 1
    });
    res.json({
      success: true,
      count: kpis.length,
      data: kpis
    });
  } catch (_error) {
    res.status(500).json({
      success: false,
      error: 'خطأ في جلب المؤشرات'
    });
  }
});

// Get single KPI
router.get('/kpis/:id', authenticate, async (req, res) => {
  try {
    const kpi = await KPI.findById(req.params.id);
    if (!kpi) return res.status(404).json({
      success: false,
      error: 'المؤشر غير موجود'
    });
    res.json({
      success: true,
      data: kpi
    });
  } catch (error) {
    res.status(500).json({
      success: false,
      error: 'خطأ في جلب المؤشر'
    });
  }
});

// Create KPI
router.post('/kpis', authenticate, authorize('admin', 'manager'), async (req, res) => {
  try {
    const kpi = new KPI({
      ...req.body,
      createdBy: req.user._id
    });
    await kpi.save();
    res.status(201).json({
      success: true,
      data: kpi,
      message: 'تم إنشاء المؤشر بنجاح'
    });
  } catch (error) {
    if (error.code === 11000) {
      return res.status(400).json({
        success: false,
        error: 'رمز المؤشر موجود مسبقاً'
      });
    }
    res.status(500).json({
      success: false,
      error: 'خطأ في إنشاء المؤشر'
    });
  }
});

// Calculate KPI
router.post('/kpis/:id/calculate', authenticate, async (req, res) => {
  try {
    const kpi = await AnalyticsService.calculateKPI(req.params.id);
    res.json({
      success: true,
      data: kpi,
      message: 'تم حساب المؤشر بنجاح'
    });
  } catch (error) {
    res.status(500).json({
      success: false,
      error: error.message || 'خطأ في حساب المؤشر'
    });
  }
});

/**
 * DASHBOARD ENDPOINTS
 */

// Executive Dashboard
router.get('/dashboard/executive', authenticate, authorize('admin', 'manager'), async (req, res) => {
  try {
    const dashboard = await AnalyticsService.getExecutiveDashboard(req.query);
    res.json({
      success: true,
      data: dashboard
    });
  } catch (error) {
    res.status(500).json({
      success: false,
      error: 'خطأ في جلب لوحة التحكم'
    });
  }
});

// Get dashboards
router.get('/dashboards', authenticate, async (req, res) => {
  try {
    const filter = {
      $or: [{
        'permissions.owner': req.user._id
      }, {
        'permissions.sharedWith.user': req.user._id
      }, {
        'permissions.isPublic': true
      }]
    };
    const dashboards = await Dashboard.find(filter).populate('permissions.owner', 'name email').sort({
      isDefault: -1,
      createdAt: -1
    });
    res.json({
      success: true,
      count: dashboards.length,
      data: dashboards
    });
  } catch (error) {
    res.status(500).json({
      success: false,
      error: 'خطأ في جلب لوحات التحكم'
    });
  }
});

/**
 * REPORT ENDPOINTS
 */

// Get report templates
router.get('/report-templates', authenticate, async (req, res) => {
  try {
    const {
      category
    } = req.query;
    const filter = {
      $or: [{
        'permissions.canView': req.user.role
      }, {
        'permissions.isPublic': true
      }]
    };
    if (category) filter.category = category;
    const templates = await ReportTemplate.find(filter).populate('structure.kpis').sort({
      category: 1,
      name: 1
    });
    res.json({
      success: true,
      count: templates.length,
      data: templates
    });
  } catch (error) {
    res.status(500).json({
      success: false,
      error: 'خطأ في جلب قوالب التقارير'
    });
  }
});

// Generate report
router.post('/reports/generate', authenticate, async (req, res) => {
  try {
    const {
      templateId,
      filters,
      format = 'pdf'
    } = req.body;
    if (!templateId) {
      return res.status(400).json({
        success: false,
        error: 'معرف القالب مطلوب'
      });
    }
    const report = await AnalyticsService.generateReport(templateId, filters, format, req.user._id);
    res.json({
      success: true,
      data: report,
      message: 'تم توليد التقرير بنجاح'
    });
  } catch (error) {
    res.status(500).json({
      success: false,
      error: error.message || 'خطأ في توليد التقرير'
    });
  }
});

// Get user reports
router.get('/reports', authenticate, async (req, res) => {
  try {
    const reports = await GeneratedReport.find({
      generatedBy: req.user._id
    }).populate('template', 'name nameAr category').sort({
      createdAt: -1
    }).limit(50);
    res.json({
      success: true,
      count: reports.length,
      data: reports
    });
  } catch (error) {
    res.status(500).json({
      success: false,
      error: 'خطأ في جلب التقارير'
    });
  }
});

// Download report
router.get('/reports/:id/download', authenticate, async (req, res) => {
  try {
    const report = await GeneratedReport.findById(req.params.id);
    if (!report) {
      return res.status(404).json({
        success: false,
        error: 'التقرير غير موجود'
      });
    }
    if (report.generatedBy.toString() !== req.user._id.toString()) {
      return res.status(403).json({
        success: false,
        error: 'ليس لديك صلاحية لتحميل هذا التقرير'
      });
    }
    if (report.status !== 'completed') {
      return res.status(400).json({
        success: false,
        error: 'التقرير لم يكتمل بعد'
      });
    }
    report.downloads += 1;
    await report.save();
    res.download(report.file.path);
  } catch (error) {
    res.status(500).json({
      success: false,
      error: 'خطأ في تحميل التقرير'
    });
  }
});

/**
 * PREDICTIVE ANALYTICS
 */

// Create prediction
router.post('/predictions', authenticate, authorize('admin', 'manager'), async (req, res) => {
  try {
    const {
      type,
      kpiId,
      period
    } = req.body;
    if (!type || !kpiId) {
      return res.status(400).json({
        success: false,
        error: 'النوع ومعرف المؤشر مطلوبان'
      });
    }
    const prediction = await AnalyticsService.generatePrediction(type, kpiId, period || 30);
    res.status(201).json({
      success: true,
      data: prediction,
      message: 'تم إنشاء التنبؤ بنجاح'
    });
  } catch (error) {
    res.status(500).json({
      success: false,
      error: error.message || 'خطأ في إنشاء التنبؤ'
    });
  }
});

// Get predictions
router.get('/predictions', authenticate, async (req, res) => {
  try {
    const predictions = await Prediction.find().populate('kpi', 'name nameAr code').sort({
      createdAt: -1
    }).limit(20);
    res.json({
      success: true,
      count: predictions.length,
      data: predictions
    });
  } catch (error) {
    res.status(500).json({
      success: false,
      error: 'خطأ في جلب التنبؤات'
    });
  }
});

/**
 * SUMMARY
 */

// Analytics summary
router.get('/summary', authenticate, async (req, res) => {
  try {
    const summary = {
      kpis: {
        total: await KPI.countDocuments({
          isActive: true
        }),
        byCategory: await KPI.aggregate([{
          $match: {
            isActive: true
          }
        }, {
          $group: {
            _id: '$category',
            count: {
              $sum: 1
            }
          }
        }])
      },
      reports: {
        total: await GeneratedReport.countDocuments(),
        completed: await GeneratedReport.countDocuments({
          status: 'completed'
        })
      },
      dashboards: {
        total: await Dashboard.countDocuments({
          isActive: true
        })
      }
    };
    res.json({
      success: true,
      data: summary
    });
  } catch (error) {
    res.status(500).json({
      success: false,
      error: 'خطأ في جلب ملخص التحليلات'
    });
  }
});
module.exports = router;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsInJvdXRlciIsIlJvdXRlciIsIkFuYWx5dGljc1NlcnZpY2UiLCJBcGlSZXNwb25zZSIsIkFwaUVycm9yIiwiZ2V0IiwicmVxIiwicmVzIiwibmV4dCIsInVzZXJJZCIsInBhcmFtcyIsInJlc3VsdCIsInRyYWNrVXNlckJlaGF2aW9yIiwic3RhdHVzIiwianNvbiIsIl9lcnJvciIsIm1lc3NhZ2UiLCJ0aW1lUmFuZ2UiLCJxdWVyeSIsImdldFBlcmZvcm1hbmNlTWV0cmljcyIsImdldEN1c3RvbURhc2hib2FyZCIsImVycm9yIiwibWV0cmljIiwicGVyaW9kIiwiYW5hbHl6ZVRyZW5kcyIsImdldFJlY29tbWVuZGF0aW9ucyIsInBvc3QiLCJtZXRyaWMxIiwibWV0cmljMiIsImJvZHkiLCJzdWNjZXNzIiwiY29tcGFyZU1ldHJpY3MiLCJyZXBvcnRUeXBlIiwiZ2VuZXJhdGVBbmFseXNpc1JlcG9ydCIsImV2ZW50IiwidHJhY2tDb252ZXJzaW9uIiwiZ2V0UmVhbFRpbWVBbmFseXRpY3MiLCJnZXRQcmVkaWN0aXZlQW5hbHl0aWNzIiwiZm9ybWF0IiwiaW5jbHVkZXMiLCJleHBvcnRBbmFseXRpY3NSZXBvcnQiLCJ0ZXN0SWQiLCJnZXRBQlRlc3RSZXN1bHRzIiwiY2FtcGFpZ24iLCJnZXRNYXJrZXRpbmdNZXRyaWNzIiwiYXV0aGVudGljYXRlIiwiYXV0aG9yaXplIiwiS1BJIiwiUmVwb3J0VGVtcGxhdGUiLCJHZW5lcmF0ZWRSZXBvcnQiLCJEYXNoYm9hcmQiLCJQcmVkaWN0aW9uIiwiY2F0ZWdvcnkiLCJpc0FjdGl2ZSIsImZpbHRlciIsInVuZGVmaW5lZCIsImtwaXMiLCJmaW5kIiwic29ydCIsImNvZGUiLCJjb3VudCIsImxlbmd0aCIsImRhdGEiLCJrcGkiLCJmaW5kQnlJZCIsImlkIiwiY3JlYXRlZEJ5IiwidXNlciIsIl9pZCIsInNhdmUiLCJjYWxjdWxhdGVLUEkiLCJkYXNoYm9hcmQiLCJnZXRFeGVjdXRpdmVEYXNoYm9hcmQiLCIkb3IiLCJkYXNoYm9hcmRzIiwicG9wdWxhdGUiLCJpc0RlZmF1bHQiLCJjcmVhdGVkQXQiLCJyb2xlIiwidGVtcGxhdGVzIiwibmFtZSIsInRlbXBsYXRlSWQiLCJmaWx0ZXJzIiwicmVwb3J0IiwiZ2VuZXJhdGVSZXBvcnQiLCJyZXBvcnRzIiwiZ2VuZXJhdGVkQnkiLCJsaW1pdCIsInRvU3RyaW5nIiwiZG93bmxvYWRzIiwiZG93bmxvYWQiLCJmaWxlIiwicGF0aCIsInR5cGUiLCJrcGlJZCIsInByZWRpY3Rpb24iLCJnZW5lcmF0ZVByZWRpY3Rpb24iLCJwcmVkaWN0aW9ucyIsInN1bW1hcnkiLCJ0b3RhbCIsImNvdW50RG9jdW1lbnRzIiwiYnlDYXRlZ29yeSIsImFnZ3JlZ2F0ZSIsIiRtYXRjaCIsIiRncm91cCIsIiRzdW0iLCJjb21wbGV0ZWQiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsiYW5hbHl0aWNzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIEFkdmFuY2VkIEFuYWx5dGljcyBSb3V0ZXNcclxuLy8g2YbZgtin2Lcg2KfZhNiq2K3ZhNmK2YTYp9iqINin2YTZhdiq2YLYr9mF2KlcclxuXHJcbmNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7XHJcbmNvbnN0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XHJcbmNvbnN0IEFuYWx5dGljc1NlcnZpY2UgPSByZXF1aXJlKCcuLi9zZXJ2aWNlcy9hbmFseXRpY3NTZXJ2aWNlJyk7XHJcbmNvbnN0IHsgQXBpUmVzcG9uc2UsIEFwaUVycm9yIH0gPSByZXF1aXJlKCcuLi91dGlscy9hcGlSZXNwb25zZScpO1xyXG5cclxuLy8g2KrYqtio2Lkg2LPZhNmI2YMg2KfZhNmF2LPYqtiu2K/ZhVxyXG5yb3V0ZXIuZ2V0KCcvdXNlci1iZWhhdmlvci86dXNlcklkJywgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHsgdXNlcklkIH0gPSByZXEucGFyYW1zO1xyXG5cclxuICAgIGNvbnN0IHJlc3VsdCA9IEFuYWx5dGljc1NlcnZpY2UudHJhY2tVc2VyQmVoYXZpb3IodXNlcklkKTtcclxuXHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24obmV3IEFwaVJlc3BvbnNlKDIwMCwgcmVzdWx0LCAnVXNlciBiZWhhdmlvciB0cmFja2VkJykpO1xyXG4gIH0gY2F0Y2ggKF9lcnJvcikge1xyXG4gICAgcmV0dXJuIG5leHQobmV3IEFwaUVycm9yKDUwMCwgJ0ZhaWxlZCB0byB0cmFjayB1c2VyIGJlaGF2aW9yJywgW19lcnJvci5tZXNzYWdlXSkpO1xyXG4gIH1cclxufSk7XHJcblxyXG4vLyDYp9mE2K3YtdmI2YQg2LnZhNmJINmF2YLYp9mK2YrYsyDYp9mE2KPYr9in2KFcclxucm91dGVyLmdldCgnL3BlcmZvcm1hbmNlLW1ldHJpY3MnLCAocmVxLCByZXMsIG5leHQpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyB0aW1lUmFuZ2UgfSA9IHJlcS5xdWVyeTtcclxuXHJcbiAgICBjb25zdCByZXN1bHQgPSBBbmFseXRpY3NTZXJ2aWNlLmdldFBlcmZvcm1hbmNlTWV0cmljcyh0aW1lUmFuZ2UgfHwgJzI0aCcpO1xyXG5cclxuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbihuZXcgQXBpUmVzcG9uc2UoMjAwLCByZXN1bHQsICdQZXJmb3JtYW5jZSBtZXRyaWNzIGZldGNoZWQnKSk7XHJcbiAgfSBjYXRjaCAoX2Vycm9yKSB7XHJcbiAgICByZXR1cm4gbmV4dChuZXcgQXBpRXJyb3IoNTAwLCAnRmFpbGVkIHRvIGZldGNoIHBlcmZvcm1hbmNlIG1ldHJpY3MnLCBbX2Vycm9yLm1lc3NhZ2VdKSk7XHJcbiAgfVxyXG59KTtcclxuXHJcbi8vINi52LHYtiDZhNmI2K3YqSDYqtit2YPZhSDZhdiu2LXYtdipXHJcbnJvdXRlci5nZXQoJy9kYXNoYm9hcmQvOnVzZXJJZCcsIChyZXEsIHJlcywgbmV4dCkgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IHVzZXJJZCB9ID0gcmVxLnBhcmFtcztcclxuXHJcbiAgICBjb25zdCByZXN1bHQgPSBBbmFseXRpY3NTZXJ2aWNlLmdldEN1c3RvbURhc2hib2FyZCh1c2VySWQpO1xyXG5cclxuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbihuZXcgQXBpUmVzcG9uc2UoMjAwLCByZXN1bHQsICdEYXNoYm9hcmQgZmV0Y2hlZCcpKTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgcmV0dXJuIG5leHQobmV3IEFwaUVycm9yKDUwMCwgJ0ZhaWxlZCB0byBmZXRjaCBkYXNoYm9hcmQnLCBbZXJyb3IubWVzc2FnZV0pKTtcclxuICB9XHJcbn0pO1xyXG5cclxuLy8g2KrYrdmE2YrZhCDYp9mE2KfYqtis2KfZh9in2Kpcclxucm91dGVyLmdldCgnL3RyZW5kcy86bWV0cmljJywgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHsgbWV0cmljIH0gPSByZXEucGFyYW1zO1xyXG4gICAgY29uc3QgeyBwZXJpb2QgfSA9IHJlcS5xdWVyeTtcclxuXHJcbiAgICBjb25zdCByZXN1bHQgPSBBbmFseXRpY3NTZXJ2aWNlLmFuYWx5emVUcmVuZHMobWV0cmljLCBwZXJpb2QgfHwgJzMwZCcpO1xyXG5cclxuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbihuZXcgQXBpUmVzcG9uc2UoMjAwLCByZXN1bHQsICdUcmVuZHMgYW5hbHl6ZWQnKSk7XHJcbiAgfSBjYXRjaCAoX2Vycm9yKSB7XHJcbiAgICByZXR1cm4gbmV4dChuZXcgQXBpRXJyb3IoNTAwLCAnRmFpbGVkIHRvIGFuYWx5emUgdHJlbmRzJywgW19lcnJvci5tZXNzYWdlXSkpO1xyXG4gIH1cclxufSk7XHJcblxyXG4vLyDYp9mE2K3YtdmI2YQg2LnZhNmJINin2YTYqtmI2LXZitin2Kpcclxucm91dGVyLmdldCgnL3JlY29tbWVuZGF0aW9ucycsIChyZXEsIHJlcywgbmV4dCkgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCByZXN1bHQgPSBBbmFseXRpY3NTZXJ2aWNlLmdldFJlY29tbWVuZGF0aW9ucygpO1xyXG5cclxuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbihuZXcgQXBpUmVzcG9uc2UoMjAwLCByZXN1bHQsICdSZWNvbW1lbmRhdGlvbnMgZmV0Y2hlZCcpKTtcclxuICB9IGNhdGNoIChfZXJyb3IpIHtcclxuICAgIHJldHVybiBuZXh0KG5ldyBBcGlFcnJvcig1MDAsICdGYWlsZWQgdG8gZmV0Y2ggcmVjb21tZW5kYXRpb25zJywgW19lcnJvci5tZXNzYWdlXSkpO1xyXG4gIH1cclxufSk7XHJcblxyXG4vLyDZhdmC2KfYsdmG2Kkg2KfZhNmF2YLYp9mK2YrYs1xyXG5yb3V0ZXIucG9zdCgnL2NvbXBhcmUtbWV0cmljcycsIChyZXEsIHJlcykgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IG1ldHJpYzEsIG1ldHJpYzIsIHBlcmlvZCB9ID0gcmVxLmJvZHk7XHJcblxyXG4gICAgaWYgKCFtZXRyaWMxIHx8ICFtZXRyaWMyKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XHJcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgbWVzc2FnZTogJ01ldHJpY3MgcmVxdWlyZWQnLFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCByZXN1bHQgPSBBbmFseXRpY3NTZXJ2aWNlLmNvbXBhcmVNZXRyaWNzKG1ldHJpYzEsIG1ldHJpYzIsIHBlcmlvZCB8fCAnMzBkJyk7XHJcblxyXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24ocmVzdWx0KTtcclxuICB9IGNhdGNoIChfZXJyb3IpIHtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIG1lc3NhZ2U6ICdGYWlsZWQgdG8gY29tcGFyZSBtZXRyaWNzJyxcclxuICAgICAgZXJyb3I6IF9lcnJvci5tZXNzYWdlLFxyXG4gICAgfSk7XHJcbiAgfVxyXG59KTtcclxuXHJcbi8vINiq2YjZhNmK2K8g2KrZgtix2YrYsSDYqtit2YTZitmE2Ypcclxucm91dGVyLnBvc3QoJy9nZW5lcmF0ZS1yZXBvcnQnLCAocmVxLCByZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyByZXBvcnRUeXBlIH0gPSByZXEuYm9keTtcclxuXHJcbiAgICBjb25zdCByZXN1bHQgPSBBbmFseXRpY3NTZXJ2aWNlLmdlbmVyYXRlQW5hbHlzaXNSZXBvcnQocmVwb3J0VHlwZSB8fCAnZXhlY3V0aXZlJyk7XHJcblxyXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24ocmVzdWx0KTtcclxuICB9IGNhdGNoIChfZXJyb3IpIHtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIG1lc3NhZ2U6ICdGYWlsZWQgdG8gZ2VuZXJhdGUgcmVwb3J0JyxcclxuICAgICAgZXJyb3I6IF9lcnJvci5tZXNzYWdlLFxyXG4gICAgfSk7XHJcbiAgfVxyXG59KTtcclxuXHJcbi8vINiq2KrYqNi5INin2YTYqtit2YjZitmEXHJcbnJvdXRlci5wb3N0KCcvdHJhY2stY29udmVyc2lvbicsIChyZXEsIHJlcykgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IHVzZXJJZCwgZXZlbnQgfSA9IHJlcS5ib2R5O1xyXG5cclxuICAgIGlmICghdXNlcklkIHx8ICFldmVudCkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIG1lc3NhZ2U6ICdVc2VyIElEIGFuZCBldmVudCByZXF1aXJlZCcsXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHJlc3VsdCA9IEFuYWx5dGljc1NlcnZpY2UudHJhY2tDb252ZXJzaW9uKHVzZXJJZCwgZXZlbnQpO1xyXG5cclxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHJlc3VsdCk7XHJcbiAgfSBjYXRjaCAoX2Vycm9yKSB7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XHJcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICBtZXNzYWdlOiAnRmFpbGVkIHRvIHRyYWNrIGNvbnZlcnNpb24nLFxyXG4gICAgICBlcnJvcjogX2Vycm9yLm1lc3NhZ2UsXHJcbiAgICB9KTtcclxuICB9XHJcbn0pO1xyXG5cclxuLy8g2KfZhNiq2K3ZhNmK2YTYp9iqINmB2Yog2KfZhNmI2YLYqiDYp9mE2YHYudmE2Ypcclxucm91dGVyLmdldCgnL3JlYWwtdGltZScsIChyZXEsIHJlcykgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCByZXN1bHQgPSBBbmFseXRpY3NTZXJ2aWNlLmdldFJlYWxUaW1lQW5hbHl0aWNzKCk7XHJcblxyXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24ocmVzdWx0KTtcclxuICB9IGNhdGNoIChfZXJyb3IpIHtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIG1lc3NhZ2U6ICdGYWlsZWQgdG8gZmV0Y2ggcmVhbC10aW1lIGFuYWx5dGljcycsXHJcbiAgICAgIGVycm9yOiBfZXJyb3IubWVzc2FnZSxcclxuICAgIH0pO1xyXG4gIH1cclxufSk7XHJcblxyXG4vLyDYp9mE2KrZhtio2KTYp9iqINin2YTYqtit2YTZitmE2YrYqVxyXG5yb3V0ZXIuZ2V0KCcvcHJlZGljdGlvbnMnLCAocmVxLCByZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgcmVzdWx0ID0gQW5hbHl0aWNzU2VydmljZS5nZXRQcmVkaWN0aXZlQW5hbHl0aWNzKCk7XHJcblxyXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24ocmVzdWx0KTtcclxuICB9IGNhdGNoIChfZXJyb3IpIHtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIG1lc3NhZ2U6ICdGYWlsZWQgdG8gZmV0Y2ggcHJlZGljdGlvbnMnLFxyXG4gICAgICBlcnJvcjogX2Vycm9yLm1lc3NhZ2UsXHJcbiAgICB9KTtcclxuICB9XHJcbn0pO1xyXG5cclxuLy8g2KrYtdiv2YrYsSDYp9mE2KrZgtix2YrYsVxyXG5yb3V0ZXIuZ2V0KCcvZXhwb3J0Lzpmb3JtYXQnLCAocmVxLCByZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyBmb3JtYXQgfSA9IHJlcS5wYXJhbXM7XHJcblxyXG4gICAgaWYgKCFbJ3BkZicsICd4bHN4JywgJ2NzdiddLmluY2x1ZGVzKGZvcm1hdCkpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBtZXNzYWdlOiAnSW52YWxpZCBmb3JtYXQuIFN1cHBvcnRlZDogcGRmLCB4bHN4LCBjc3YnLFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCByZXN1bHQgPSBBbmFseXRpY3NTZXJ2aWNlLmV4cG9ydEFuYWx5dGljc1JlcG9ydChmb3JtYXQpO1xyXG5cclxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHJlc3VsdCk7XHJcbiAgfSBjYXRjaCAoX2Vycm9yKSB7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XHJcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICBtZXNzYWdlOiAnRmFpbGVkIHRvIGV4cG9ydCByZXBvcnQnLFxyXG4gICAgICBlcnJvcjogX2Vycm9yLm1lc3NhZ2UsXHJcbiAgICB9KTtcclxuICB9XHJcbn0pO1xyXG5cclxuLy8g2KfYrtiq2KjYp9ixIEEvQlxyXG5yb3V0ZXIuZ2V0KCcvYWItdGVzdC86dGVzdElkJywgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHsgdGVzdElkIH0gPSByZXEucGFyYW1zO1xyXG5cclxuICAgIGNvbnN0IHJlc3VsdCA9IEFuYWx5dGljc1NlcnZpY2UuZ2V0QUJUZXN0UmVzdWx0cyh0ZXN0SWQpO1xyXG5cclxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHJlc3VsdCk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIG1lc3NhZ2U6ICdGYWlsZWQgdG8gZmV0Y2ggQS9CIHRlc3QgcmVzdWx0cycsXHJcbiAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlLFxyXG4gICAgfSk7XHJcbiAgfVxyXG59KTtcclxuXHJcbi8vINmF2YLYp9mK2YrYsyDYp9mE2KrYs9mI2YrZglxyXG5yb3V0ZXIuZ2V0KCcvbWFya2V0aW5nLzpjYW1wYWlnbicsIChyZXEsIHJlcykgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IGNhbXBhaWduIH0gPSByZXEucGFyYW1zO1xyXG5cclxuICAgIGNvbnN0IHJlc3VsdCA9IEFuYWx5dGljc1NlcnZpY2UuZ2V0TWFya2V0aW5nTWV0cmljcyhjYW1wYWlnbik7XHJcblxyXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24ocmVzdWx0KTtcclxuICB9IGNhdGNoIChfZXJyb3IpIHtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIG1lc3NhZ2U6ICdGYWlsZWQgdG8gZmV0Y2ggY29ob3J0IG1ldHJpY3MnLFxyXG4gICAgICBlcnJvcjogX2Vycm9yLm1lc3NhZ2UsXHJcbiAgICB9KTtcclxuICB9XHJcbn0pO1xyXG5cclxuLyoqXHJcbiAqID09PT09PT09PT09PT09PT09PT09PT1cclxuICogTkVXIEFEVkFOQ0VEIEFOQUxZVElDUyBFTkRQT0lOVFNcclxuICog2YXYs9in2LHYp9iqINin2YTYqtit2YTZitmE2KfYqiDYp9mE2YXYqtmC2K/ZhdipINin2YTYrNiv2YrYr9ipXHJcbiAqID09PT09PT09PT09PT09PT09PT09PT1cclxuICovXHJcblxyXG5jb25zdCB7IGF1dGhlbnRpY2F0ZSwgYXV0aG9yaXplIH0gPSByZXF1aXJlKCcuLi9taWRkbGV3YXJlL2F1dGgnKTtcclxuY29uc3Qge1xyXG4gIEtQSSxcclxuICBSZXBvcnRUZW1wbGF0ZSxcclxuICBHZW5lcmF0ZWRSZXBvcnQsXHJcbiAgRGFzaGJvYXJkLFxyXG4gIFByZWRpY3Rpb24sXHJcbn0gPSByZXF1aXJlKCcuLi9tb2RlbHMvYW5hbHl0aWNzJyk7XHJcblxyXG4vKipcclxuICogS1BJIEVORFBPSU5UU1xyXG4gKi9cclxuXHJcbi8vIEdldCBhbGwgS1BJc1xyXG5yb3V0ZXIuZ2V0KCcva3BpcycsIGF1dGhlbnRpY2F0ZSwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHsgY2F0ZWdvcnksIGlzQWN0aXZlIH0gPSByZXEucXVlcnk7XHJcbiAgICBjb25zdCBmaWx0ZXIgPSB7fTtcclxuICAgIGlmIChjYXRlZ29yeSkgZmlsdGVyLmNhdGVnb3J5ID0gY2F0ZWdvcnk7XHJcbiAgICBpZiAoaXNBY3RpdmUgIT09IHVuZGVmaW5lZCkgZmlsdGVyLmlzQWN0aXZlID0gaXNBY3RpdmUgPT09ICd0cnVlJztcclxuXHJcbiAgICBjb25zdCBrcGlzID0gYXdhaXQgS1BJLmZpbmQoZmlsdGVyKS5zb3J0KHsgY2F0ZWdvcnk6IDEsIGNvZGU6IDEgfSk7XHJcbiAgICByZXMuanNvbih7IHN1Y2Nlc3M6IHRydWUsIGNvdW50OiBrcGlzLmxlbmd0aCwgZGF0YToga3BpcyB9KTtcclxuICB9IGNhdGNoIChfZXJyb3IpIHtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAn2K7Yt9ijINmB2Yog2KzZhNioINin2YTZhdik2LTYsdin2KonIH0pO1xyXG4gIH1cclxufSk7XHJcblxyXG4vLyBHZXQgc2luZ2xlIEtQSVxyXG5yb3V0ZXIuZ2V0KCcva3Bpcy86aWQnLCBhdXRoZW50aWNhdGUsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBrcGkgPSBhd2FpdCBLUEkuZmluZEJ5SWQocmVxLnBhcmFtcy5pZCk7XHJcbiAgICBpZiAoIWtwaSkgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAn2KfZhNmF2KTYtNixINi62YrYsSDZhdmI2KzZiNivJyB9KTtcclxuICAgIHJlcy5qc29uKHsgc3VjY2VzczogdHJ1ZSwgZGF0YToga3BpIH0pO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ9iu2LfYoyDZgdmKINis2YTYqCDYp9mE2YXYpNi02LEnIH0pO1xyXG4gIH1cclxufSk7XHJcblxyXG4vLyBDcmVhdGUgS1BJXHJcbnJvdXRlci5wb3N0KCcva3BpcycsIGF1dGhlbnRpY2F0ZSwgYXV0aG9yaXplKCdhZG1pbicsICdtYW5hZ2VyJyksIGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBrcGkgPSBuZXcgS1BJKHsgLi4ucmVxLmJvZHksIGNyZWF0ZWRCeTogcmVxLnVzZXIuX2lkIH0pO1xyXG4gICAgYXdhaXQga3BpLnNhdmUoKTtcclxuICAgIHJlcy5zdGF0dXMoMjAxKS5qc29uKHsgc3VjY2VzczogdHJ1ZSwgZGF0YToga3BpLCBtZXNzYWdlOiAn2KrZhSDYpdmG2LTYp9ihINin2YTZhdik2LTYsSDYqNmG2KzYp9itJyB9KTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgaWYgKGVycm9yLmNvZGUgPT09IDExMDAwKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ9ix2YXYsiDYp9mE2YXYpNi02LEg2YXZiNis2YjYryDZhdiz2KjZgtin2YsnIH0pO1xyXG4gICAgfVxyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICfYrti32KMg2YHZiiDYpdmG2LTYp9ihINin2YTZhdik2LTYsScgfSk7XHJcbiAgfVxyXG59KTtcclxuXHJcbi8vIENhbGN1bGF0ZSBLUElcclxucm91dGVyLnBvc3QoJy9rcGlzLzppZC9jYWxjdWxhdGUnLCBhdXRoZW50aWNhdGUsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBrcGkgPSBhd2FpdCBBbmFseXRpY3NTZXJ2aWNlLmNhbGN1bGF0ZUtQSShyZXEucGFyYW1zLmlkKTtcclxuICAgIHJlcy5qc29uKHsgc3VjY2VzczogdHJ1ZSwgZGF0YToga3BpLCBtZXNzYWdlOiAn2KrZhSDYrdiz2KfYqCDYp9mE2YXYpNi02LEg2KjZhtis2KfYrScgfSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIHx8ICfYrti32KMg2YHZiiDYrdiz2KfYqCDYp9mE2YXYpNi02LEnIH0pO1xyXG4gIH1cclxufSk7XHJcblxyXG4vKipcclxuICogREFTSEJPQVJEIEVORFBPSU5UU1xyXG4gKi9cclxuXHJcbi8vIEV4ZWN1dGl2ZSBEYXNoYm9hcmRcclxucm91dGVyLmdldChcclxuICAnL2Rhc2hib2FyZC9leGVjdXRpdmUnLFxyXG4gIGF1dGhlbnRpY2F0ZSxcclxuICBhdXRob3JpemUoJ2FkbWluJywgJ21hbmFnZXInKSxcclxuICBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IGRhc2hib2FyZCA9IGF3YWl0IEFuYWx5dGljc1NlcnZpY2UuZ2V0RXhlY3V0aXZlRGFzaGJvYXJkKHJlcS5xdWVyeSk7XHJcbiAgICAgIHJlcy5qc29uKHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogZGFzaGJvYXJkIH0pO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICfYrti32KMg2YHZiiDYrNmE2Kgg2YTZiNit2Kkg2KfZhNiq2K3Zg9mFJyB9KTtcclxuICAgIH1cclxuICB9XHJcbik7XHJcblxyXG4vLyBHZXQgZGFzaGJvYXJkc1xyXG5yb3V0ZXIuZ2V0KCcvZGFzaGJvYXJkcycsIGF1dGhlbnRpY2F0ZSwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGZpbHRlciA9IHtcclxuICAgICAgJG9yOiBbXHJcbiAgICAgICAgeyAncGVybWlzc2lvbnMub3duZXInOiByZXEudXNlci5faWQgfSxcclxuICAgICAgICB7ICdwZXJtaXNzaW9ucy5zaGFyZWRXaXRoLnVzZXInOiByZXEudXNlci5faWQgfSxcclxuICAgICAgICB7ICdwZXJtaXNzaW9ucy5pc1B1YmxpYyc6IHRydWUgfSxcclxuICAgICAgXSxcclxuICAgIH07XHJcbiAgICBjb25zdCBkYXNoYm9hcmRzID0gYXdhaXQgRGFzaGJvYXJkLmZpbmQoZmlsdGVyKVxyXG4gICAgICAucG9wdWxhdGUoJ3Blcm1pc3Npb25zLm93bmVyJywgJ25hbWUgZW1haWwnKVxyXG4gICAgICAuc29ydCh7IGlzRGVmYXVsdDogLTEsIGNyZWF0ZWRBdDogLTEgfSk7XHJcbiAgICByZXMuanNvbih7IHN1Y2Nlc3M6IHRydWUsIGNvdW50OiBkYXNoYm9hcmRzLmxlbmd0aCwgZGF0YTogZGFzaGJvYXJkcyB9KTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICfYrti32KMg2YHZiiDYrNmE2Kgg2YTZiNit2KfYqiDYp9mE2KrYrdmD2YUnIH0pO1xyXG4gIH1cclxufSk7XHJcblxyXG4vKipcclxuICogUkVQT1JUIEVORFBPSU5UU1xyXG4gKi9cclxuXHJcbi8vIEdldCByZXBvcnQgdGVtcGxhdGVzXHJcbnJvdXRlci5nZXQoJy9yZXBvcnQtdGVtcGxhdGVzJywgYXV0aGVudGljYXRlLCBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyBjYXRlZ29yeSB9ID0gcmVxLnF1ZXJ5O1xyXG4gICAgY29uc3QgZmlsdGVyID0ge1xyXG4gICAgICAkb3I6IFt7ICdwZXJtaXNzaW9ucy5jYW5WaWV3JzogcmVxLnVzZXIucm9sZSB9LCB7ICdwZXJtaXNzaW9ucy5pc1B1YmxpYyc6IHRydWUgfV0sXHJcbiAgICB9O1xyXG4gICAgaWYgKGNhdGVnb3J5KSBmaWx0ZXIuY2F0ZWdvcnkgPSBjYXRlZ29yeTtcclxuXHJcbiAgICBjb25zdCB0ZW1wbGF0ZXMgPSBhd2FpdCBSZXBvcnRUZW1wbGF0ZS5maW5kKGZpbHRlcilcclxuICAgICAgLnBvcHVsYXRlKCdzdHJ1Y3R1cmUua3BpcycpXHJcbiAgICAgIC5zb3J0KHsgY2F0ZWdvcnk6IDEsIG5hbWU6IDEgfSk7XHJcbiAgICByZXMuanNvbih7IHN1Y2Nlc3M6IHRydWUsIGNvdW50OiB0ZW1wbGF0ZXMubGVuZ3RoLCBkYXRhOiB0ZW1wbGF0ZXMgfSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAn2K7Yt9ijINmB2Yog2KzZhNioINmC2YjYp9mE2Kgg2KfZhNiq2YLYp9ix2YrYsScgfSk7XHJcbiAgfVxyXG59KTtcclxuXHJcbi8vIEdlbmVyYXRlIHJlcG9ydFxyXG5yb3V0ZXIucG9zdCgnL3JlcG9ydHMvZ2VuZXJhdGUnLCBhdXRoZW50aWNhdGUsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IHRlbXBsYXRlSWQsIGZpbHRlcnMsIGZvcm1hdCA9ICdwZGYnIH0gPSByZXEuYm9keTtcclxuICAgIGlmICghdGVtcGxhdGVJZCkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICfZhdi52LHZgSDYp9mE2YLYp9mE2Kgg2YXYt9mE2YjYqCcgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgcmVwb3J0ID0gYXdhaXQgQW5hbHl0aWNzU2VydmljZS5nZW5lcmF0ZVJlcG9ydCh0ZW1wbGF0ZUlkLCBmaWx0ZXJzLCBmb3JtYXQsIHJlcS51c2VyLl9pZCk7XHJcbiAgICByZXMuanNvbih7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IHJlcG9ydCwgbWVzc2FnZTogJ9iq2YUg2KrZiNmE2YrYryDYp9mE2KrZgtix2YrYsSDYqNmG2KzYp9itJyB9KTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfHwgJ9iu2LfYoyDZgdmKINiq2YjZhNmK2K8g2KfZhNiq2YLYsdmK2LEnIH0pO1xyXG4gIH1cclxufSk7XHJcblxyXG4vLyBHZXQgdXNlciByZXBvcnRzXHJcbnJvdXRlci5nZXQoJy9yZXBvcnRzJywgYXV0aGVudGljYXRlLCBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgcmVwb3J0cyA9IGF3YWl0IEdlbmVyYXRlZFJlcG9ydC5maW5kKHsgZ2VuZXJhdGVkQnk6IHJlcS51c2VyLl9pZCB9KVxyXG4gICAgICAucG9wdWxhdGUoJ3RlbXBsYXRlJywgJ25hbWUgbmFtZUFyIGNhdGVnb3J5JylcclxuICAgICAgLnNvcnQoeyBjcmVhdGVkQXQ6IC0xIH0pXHJcbiAgICAgIC5saW1pdCg1MCk7XHJcbiAgICByZXMuanNvbih7IHN1Y2Nlc3M6IHRydWUsIGNvdW50OiByZXBvcnRzLmxlbmd0aCwgZGF0YTogcmVwb3J0cyB9KTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICfYrti32KMg2YHZiiDYrNmE2Kgg2KfZhNiq2YLYp9ix2YrYsScgfSk7XHJcbiAgfVxyXG59KTtcclxuXHJcbi8vIERvd25sb2FkIHJlcG9ydFxyXG5yb3V0ZXIuZ2V0KCcvcmVwb3J0cy86aWQvZG93bmxvYWQnLCBhdXRoZW50aWNhdGUsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCByZXBvcnQgPSBhd2FpdCBHZW5lcmF0ZWRSZXBvcnQuZmluZEJ5SWQocmVxLnBhcmFtcy5pZCk7XHJcbiAgICBpZiAoIXJlcG9ydCkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICfYp9mE2KrZgtix2YrYsSDYutmK2LEg2YXZiNis2YjYrycgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHJlcG9ydC5nZW5lcmF0ZWRCeS50b1N0cmluZygpICE9PSByZXEudXNlci5faWQudG9TdHJpbmcoKSkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICfZhNmK2LMg2YTYr9mK2YMg2LXZhNin2K3ZitipINmE2KrYrdmF2YrZhCDZh9iw2Kcg2KfZhNiq2YLYsdmK2LEnIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChyZXBvcnQuc3RhdHVzICE9PSAnY29tcGxldGVkJykge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICfYp9mE2KrZgtix2YrYsSDZhNmFINmK2YPYqtmF2YQg2KjYudivJyB9KTtcclxuICAgIH1cclxuXHJcbiAgICByZXBvcnQuZG93bmxvYWRzICs9IDE7XHJcbiAgICBhd2FpdCByZXBvcnQuc2F2ZSgpO1xyXG5cclxuICAgIHJlcy5kb3dubG9hZChyZXBvcnQuZmlsZS5wYXRoKTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICfYrti32KMg2YHZiiDYqtit2YXZitmEINin2YTYqtmC2LHZitixJyB9KTtcclxuICB9XHJcbn0pO1xyXG5cclxuLyoqXHJcbiAqIFBSRURJQ1RJVkUgQU5BTFlUSUNTXHJcbiAqL1xyXG5cclxuLy8gQ3JlYXRlIHByZWRpY3Rpb25cclxucm91dGVyLnBvc3QoJy9wcmVkaWN0aW9ucycsIGF1dGhlbnRpY2F0ZSwgYXV0aG9yaXplKCdhZG1pbicsICdtYW5hZ2VyJyksIGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IHR5cGUsIGtwaUlkLCBwZXJpb2QgfSA9IHJlcS5ib2R5O1xyXG4gICAgaWYgKCF0eXBlIHx8ICFrcGlJZCkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICfYp9mE2YbZiNi5INmI2YXYudix2YEg2KfZhNmF2KTYtNixINmF2LfZhNmI2KjYp9mGJyB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBwcmVkaWN0aW9uID0gYXdhaXQgQW5hbHl0aWNzU2VydmljZS5nZW5lcmF0ZVByZWRpY3Rpb24odHlwZSwga3BpSWQsIHBlcmlvZCB8fCAzMCk7XHJcbiAgICByZXMuc3RhdHVzKDIwMSkuanNvbih7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IHByZWRpY3Rpb24sIG1lc3NhZ2U6ICfYqtmFINil2YbYtNin2KEg2KfZhNiq2YbYqNikINio2YbYrNin2K0nIH0pO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB8fCAn2K7Yt9ijINmB2Yog2KXZhti02KfYoSDYp9mE2KrZhtio2KQnIH0pO1xyXG4gIH1cclxufSk7XHJcblxyXG4vLyBHZXQgcHJlZGljdGlvbnNcclxucm91dGVyLmdldCgnL3ByZWRpY3Rpb25zJywgYXV0aGVudGljYXRlLCBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgcHJlZGljdGlvbnMgPSBhd2FpdCBQcmVkaWN0aW9uLmZpbmQoKVxyXG4gICAgICAucG9wdWxhdGUoJ2twaScsICduYW1lIG5hbWVBciBjb2RlJylcclxuICAgICAgLnNvcnQoeyBjcmVhdGVkQXQ6IC0xIH0pXHJcbiAgICAgIC5saW1pdCgyMCk7XHJcbiAgICByZXMuanNvbih7IHN1Y2Nlc3M6IHRydWUsIGNvdW50OiBwcmVkaWN0aW9ucy5sZW5ndGgsIGRhdGE6IHByZWRpY3Rpb25zIH0pO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ9iu2LfYoyDZgdmKINis2YTYqCDYp9mE2KrZhtio2KTYp9iqJyB9KTtcclxuICB9XHJcbn0pO1xyXG5cclxuLyoqXHJcbiAqIFNVTU1BUllcclxuICovXHJcblxyXG4vLyBBbmFseXRpY3Mgc3VtbWFyeVxyXG5yb3V0ZXIuZ2V0KCcvc3VtbWFyeScsIGF1dGhlbnRpY2F0ZSwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHN1bW1hcnkgPSB7XHJcbiAgICAgIGtwaXM6IHtcclxuICAgICAgICB0b3RhbDogYXdhaXQgS1BJLmNvdW50RG9jdW1lbnRzKHsgaXNBY3RpdmU6IHRydWUgfSksXHJcbiAgICAgICAgYnlDYXRlZ29yeTogYXdhaXQgS1BJLmFnZ3JlZ2F0ZShbXHJcbiAgICAgICAgICB7ICRtYXRjaDogeyBpc0FjdGl2ZTogdHJ1ZSB9IH0sXHJcbiAgICAgICAgICB7ICRncm91cDogeyBfaWQ6ICckY2F0ZWdvcnknLCBjb3VudDogeyAkc3VtOiAxIH0gfSB9LFxyXG4gICAgICAgIF0pLFxyXG4gICAgICB9LFxyXG4gICAgICByZXBvcnRzOiB7XHJcbiAgICAgICAgdG90YWw6IGF3YWl0IEdlbmVyYXRlZFJlcG9ydC5jb3VudERvY3VtZW50cygpLFxyXG4gICAgICAgIGNvbXBsZXRlZDogYXdhaXQgR2VuZXJhdGVkUmVwb3J0LmNvdW50RG9jdW1lbnRzKHsgc3RhdHVzOiAnY29tcGxldGVkJyB9KSxcclxuICAgICAgfSxcclxuICAgICAgZGFzaGJvYXJkczoge1xyXG4gICAgICAgIHRvdGFsOiBhd2FpdCBEYXNoYm9hcmQuY291bnREb2N1bWVudHMoeyBpc0FjdGl2ZTogdHJ1ZSB9KSxcclxuICAgICAgfSxcclxuICAgIH07XHJcbiAgICByZXMuanNvbih7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IHN1bW1hcnkgfSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAn2K7Yt9ijINmB2Yog2KzZhNioINmF2YTYrti1INin2YTYqtit2YTZitmE2KfYqicgfSk7XHJcbiAgfVxyXG59KTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gcm91dGVyO1xyXG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7O0FBRUEsTUFBTUEsT0FBTyxHQUFHQyxPQUFPLENBQUMsU0FBUyxDQUFDO0FBQ2xDLE1BQU1DLE1BQU0sR0FBR0YsT0FBTyxDQUFDRyxNQUFNLENBQUMsQ0FBQztBQUMvQixNQUFNQyxnQkFBZ0IsR0FBR0gsT0FBTyxDQUFDLDhCQUE4QixDQUFDO0FBQ2hFLE1BQU07RUFBRUksV0FBVztFQUFFQztBQUFTLENBQUMsR0FBR0wsT0FBTyxDQUFDLHNCQUFzQixDQUFDOztBQUVqRTtBQUNBQyxNQUFNLENBQUNLLEdBQUcsQ0FBQyx3QkFBd0IsRUFBRSxDQUFDQyxHQUFHLEVBQUVDLEdBQUcsRUFBRUMsSUFBSSxLQUFLO0VBQ3ZELElBQUk7SUFDRixNQUFNO01BQUVDO0lBQU8sQ0FBQyxHQUFHSCxHQUFHLENBQUNJLE1BQU07SUFFN0IsTUFBTUMsTUFBTSxHQUFHVCxnQkFBZ0IsQ0FBQ1UsaUJBQWlCLENBQUNILE1BQU0sQ0FBQztJQUV6RCxPQUFPRixHQUFHLENBQUNNLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDLElB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