{"version":3,"names":["express","require","router","Router","jwt","crypto","Beneficiary","Schedule","ProgressReport","Message","Conversation","Survey","SurveyResponse","Notification","Document","authenticateBeneficiary","req","res","next","token","headers","authorization","split","status","json","success","message","decoded","verify","process","env","JWT_SECRET","beneficiary","findById","id","accountStatus","beneficiaryId","_id","error","beneficiaryRateLimit","limit","key","post","firstName","lastName","email","phone","password","confirmPassword","body","emailRegex","test","phoneRegex","strongPassword","existingBeneficiary","findOne","toLowerCase","hashedPassword","createHash","update","digest","save","name","twoFactorCode","loginAttempts","twoFactorEnabled","lastLoginDate","Date","sign","expiresIn","programs","enrolledPrograms","get","schedule","data","items","sort","a","b","startDate","upcomingCount","filter","item","length","params","scheduleItemId","attended","report","overallProgress","attendanceRate","assignmentCompletion","assessmentScore","achievements","instructorFeedback","lastUpdated","metrics","attendance","current","target","trend","assignments","completed","assignmentsCompleted","total","assignmentsTotal","completionRate","toFixed","assessments","averageGrade","highestScore","lowestScore","challenges","areasForImprovement","recommendations","conversations","find","isActive","lastMessageDate","messages","conversationId","createdAt","updateMany","recipientId","isRead","readAt","subject","attachments","priority","conversation","participants","$all","$elemMatch","userId","senderId","senderName","senderRole","lastMessage","lastMessageSenderId","messageCount","surveys","$lte","endDate","$gte","responses","respondedSurveyIds","map","r","surveyId","toString","availableSurveys","s","includes","available","title","description","questionsCount","questions","estimatedTime","survey","isAnonymous","allowSkipQuestions","existingResponse","surveyResponse","completionTime","select","put","dateOfBirth","familyMembers","notificationPreferences","findByIdAndUpdate","new","currentPassword","newPassword","currentHash","newHash","fileName","fileUrl","fileSize","fileType","category","programId","document","uploadedBy","$inc","documentUploadCount","documents","uploadedAt","notifications","unreadCount","countDocuments","patch","notification","notificationId","module","exports"],"sources":["beneficiaryPortal.js"],"sourcesContent":["/**\r\n * Beneficiary Portal Routes\r\n * مسارات بوابة المستفيدين الآمنة\r\n */\r\n\r\nconst express = require('express');\r\nconst router = express.Router();\r\nconst jwt = require('jsonwebtoken');\r\nconst crypto = require('crypto');\r\nconst {\r\n  Beneficiary,\r\n  Schedule,\r\n  ProgressReport,\r\n  Message,\r\n  Conversation,\r\n  Survey,\r\n  SurveyResponse,\r\n  Notification,\r\n  Document,\r\n} = require('../models/BeneficiaryPortal');\r\n\r\n// ==================== MIDDLEWARE ====================\r\n\r\n// Beneficiary Authentication Middleware\r\nconst authenticateBeneficiary = async (req, res, next) => {\r\n  try {\r\n    const token = req.headers.authorization?.split(' ')[1];\r\n    if (!token) {\r\n      return res.status(401).json({ success: false, message: 'No token provided' });\r\n    }\r\n\r\n    const decoded = jwt.verify(token, process.env.JWT_SECRET || 'secret_key');\r\n    const beneficiary = await Beneficiary.findById(decoded.id);\r\n\r\n    if (!beneficiary || beneficiary.accountStatus !== 'active') {\r\n      return res.status(401).json({ success: false, message: 'Unauthorized access' });\r\n    }\r\n\r\n    req.beneficiary = beneficiary;\r\n    req.beneficiaryId = beneficiary._id;\r\n    next();\r\n  } catch (error) {\r\n    res.status(401).json({ success: false, message: 'Invalid token', error: error.message });\r\n  }\r\n};\r\n\r\n// Rate Limiting for Beneficiary\r\nconst beneficiaryRateLimit = (req, res, next) => {\r\n  const limit = 100; // requests per hour\r\n  const key = `beneficiary_${req.beneficiaryId}`;\r\n  // Implementation would use Redis or similar\r\n  next();\r\n};\r\n\r\n// ==================== AUTHENTICATION ====================\r\n\r\n// Beneficiary Registration\r\nrouter.post('/auth/register', async (req, res) => {\r\n  try {\r\n    const { firstName, lastName, email, phone, password, confirmPassword } = req.body;\r\n\r\n    // Validation\r\n    if (!firstName || !lastName || !email || !phone || !password) {\r\n      return res.status(400).json({ success: false, message: 'Missing required fields' });\r\n    }\r\n\r\n    if (password !== confirmPassword) {\r\n      return res.status(400).json({ success: false, message: 'Passwords do not match' });\r\n    }\r\n\r\n    // Basic format validations\r\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n    if (!emailRegex.test(email)) {\r\n      return res.status(400).json({ success: false, message: 'Invalid email format' });\r\n    }\r\n\r\n    // Accept E.164-style phone numbers like +966501234567\r\n    const phoneRegex = /^\\+?[1-9]\\d{7,14}$/;\r\n    if (!phoneRegex.test(phone)) {\r\n      return res.status(400).json({ success: false, message: 'Invalid phone format' });\r\n    }\r\n\r\n    // Password strength: min 8 with upper, lower, digit, special\r\n    const strongPassword = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[\\W_]).{8,}$/;\r\n    if (!strongPassword.test(password)) {\r\n      return res.status(400).json({ success: false, message: 'Weak password' });\r\n    }\r\n\r\n    // Check if beneficiary exists\r\n    const existingBeneficiary = await Beneficiary.findOne({ email: email.toLowerCase() });\r\n    if (existingBeneficiary) {\r\n      return res.status(409).json({ success: false, message: 'Email already registered' });\r\n    }\r\n\r\n    // Hash password\r\n    const hashedPassword = crypto.createHash('sha256').update(password).digest('hex');\r\n\r\n    // Create beneficiary\r\n    const beneficiary = new Beneficiary({\r\n      firstName,\r\n      lastName,\r\n      email: email.toLowerCase(),\r\n      phone,\r\n      password: hashedPassword,\r\n      accountStatus: 'active',\r\n    });\r\n\r\n    await beneficiary.save();\r\n\r\n    res.status(201).json({\r\n      success: true,\r\n      message: 'Registration successful',\r\n      beneficiary: {\r\n        id: beneficiary._id,\r\n        email: beneficiary.email,\r\n        name: `${beneficiary.firstName} ${beneficiary.lastName}`,\r\n      },\r\n    });\r\n  } catch (error) {\r\n    res.status(500).json({ success: false, message: 'Registration failed', error: error.message });\r\n  }\r\n});\r\n\r\n// Beneficiary Login\r\nrouter.post('/auth/login', async (req, res) => {\r\n  try {\r\n    const { email, password, twoFactorCode } = req.body;\r\n\r\n    if (!email || !password) {\r\n      return res.status(400).json({ success: false, message: 'Email and password required' });\r\n    }\r\n\r\n    const beneficiary = await Beneficiary.findOne({ email: email.toLowerCase() });\r\n    if (!beneficiary) {\r\n      return res.status(401).json({ success: false, message: 'Invalid credentials' });\r\n    }\r\n\r\n    // Check account status\r\n    if (beneficiary.accountStatus !== 'active') {\r\n      return res.status(403).json({ success: false, message: 'Account is not active' });\r\n    }\r\n\r\n    // Hash and verify password\r\n    const hashedPassword = crypto.createHash('sha256').update(password).digest('hex');\r\n\r\n    if (beneficiary.password !== hashedPassword) {\r\n      beneficiary.loginAttempts = (beneficiary.loginAttempts || 0) + 1;\r\n      if (beneficiary.loginAttempts >= 5) {\r\n        beneficiary.accountStatus = 'suspended';\r\n      }\r\n      await beneficiary.save();\r\n      return res.status(401).json({ success: false, message: 'Invalid credentials' });\r\n    }\r\n\r\n    // Check 2FA if enabled\r\n    if (beneficiary.twoFactorEnabled && !twoFactorCode) {\r\n      return res\r\n        .status(403)\r\n        .json({ success: false, message: 'Two-factor authentication required' });\r\n    }\r\n\r\n    // Reset login attempts\r\n    beneficiary.loginAttempts = 0;\r\n    beneficiary.lastLoginDate = new Date();\r\n    await beneficiary.save();\r\n\r\n    // Generate JWT\r\n    const token = jwt.sign(\r\n      { id: beneficiary._id, email: beneficiary.email },\r\n      process.env.JWT_SECRET || 'secret_key',\r\n      { expiresIn: '24h' }\r\n    );\r\n\r\n    res.json({\r\n      success: true,\r\n      message: 'Login successful',\r\n      token,\r\n      beneficiary: {\r\n        id: beneficiary._id,\r\n        email: beneficiary.email,\r\n        name: `${beneficiary.firstName} ${beneficiary.lastName}`,\r\n        programs: beneficiary.enrolledPrograms,\r\n      },\r\n    });\r\n  } catch (error) {\r\n    res.status(500).json({ success: false, message: 'Login failed', error: error.message });\r\n  }\r\n});\r\n\r\n// ==================== SCHEDULE ROUTES ====================\r\n\r\n// Get Beneficiary Schedule\r\nrouter.get('/schedule', authenticateBeneficiary, async (req, res) => {\r\n  try {\r\n    const schedule = await Schedule.findOne({ beneficiaryId: req.beneficiaryId });\r\n\r\n    if (!schedule) {\r\n      return res.json({ success: true, data: { items: [] } });\r\n    }\r\n\r\n    // Sort by date\r\n    schedule.items.sort((a, b) => new Date(a.startDate) - new Date(b.startDate));\r\n\r\n    res.json({\r\n      success: true,\r\n      data: {\r\n        items: schedule.items,\r\n        upcomingCount: schedule.items.filter(\r\n          item => new Date(item.startDate) > new Date() && item.status === 'scheduled'\r\n        ).length,\r\n      },\r\n    });\r\n  } catch (error) {\r\n    res\r\n      .status(500)\r\n      .json({ success: false, message: 'Failed to fetch schedule', error: error.message });\r\n  }\r\n});\r\n\r\n// Mark Attendance\r\nrouter.post('/schedule/:scheduleItemId/attend', authenticateBeneficiary, async (req, res) => {\r\n  try {\r\n    const schedule = await Schedule.findOne({ beneficiaryId: req.beneficiaryId });\r\n    if (!schedule) {\r\n      return res.status(404).json({ success: false, message: 'Schedule not found' });\r\n    }\r\n\r\n    const item = schedule.items.id(req.params.scheduleItemId);\r\n    if (!item) {\r\n      return res.status(404).json({ success: false, message: 'Schedule item not found' });\r\n    }\r\n\r\n    item.attended = true;\r\n    item.status = 'completed';\r\n    await schedule.save();\r\n\r\n    res.json({ success: true, message: 'Attendance recorded' });\r\n  } catch (error) {\r\n    res\r\n      .status(500)\r\n      .json({ success: false, message: 'Failed to record attendance', error: error.message });\r\n  }\r\n});\r\n\r\n// ==================== PROGRESS REPORT ROUTES ====================\r\n\r\n// Get Progress Report\r\nrouter.get('/progress', authenticateBeneficiary, async (req, res) => {\r\n  try {\r\n    const report = await ProgressReport.findOne({ beneficiaryId: req.beneficiaryId });\r\n\r\n    if (!report) {\r\n      return res.json({\r\n        success: true,\r\n        data: {\r\n          overallProgress: 0,\r\n          status: 'no_data',\r\n          message: 'No progress data available yet',\r\n        },\r\n      });\r\n    }\r\n\r\n    res.json({\r\n      success: true,\r\n      data: {\r\n        overallProgress: report.overallProgress,\r\n        attendanceRate: report.attendanceRate,\r\n        assignmentCompletion: report.assignmentCompletion,\r\n        assessmentScore: report.assessmentScore,\r\n        achievements: report.achievements,\r\n        instructorFeedback: report.instructorFeedback,\r\n        status: report.status,\r\n        lastUpdated: report.lastUpdated,\r\n      },\r\n    });\r\n  } catch (error) {\r\n    res\r\n      .status(500)\r\n      .json({ success: false, message: 'Failed to fetch progress', error: error.message });\r\n  }\r\n});\r\n\r\n// Get Detailed Progress Analytics\r\nrouter.get('/progress/analytics', authenticateBeneficiary, async (req, res) => {\r\n  try {\r\n    const report = await ProgressReport.findOne({ beneficiaryId: req.beneficiaryId });\r\n\r\n    if (!report) {\r\n      return res.status(404).json({ success: false, message: 'No progress data' });\r\n    }\r\n\r\n    res.json({\r\n      success: true,\r\n      data: {\r\n        metrics: {\r\n          attendance: {\r\n            current: report.attendanceRate,\r\n            target: 85,\r\n            trend: 'up',\r\n          },\r\n          assignments: {\r\n            completed: report.assignmentsCompleted,\r\n            total: report.assignmentsTotal,\r\n            completionRate: ((report.assignmentsCompleted / report.assignmentsTotal) * 100).toFixed(\r\n              2\r\n            ),\r\n          },\r\n          assessments: {\r\n            averageGrade: report.averageGrade,\r\n            highestScore: 100,\r\n            lowestScore: report.assessmentScore,\r\n          },\r\n          achievements: report.achievements.length,\r\n        },\r\n        challenges: report.instructorFeedback?.areasForImprovement || [],\r\n        recommendations: report.instructorFeedback?.recommendations || [],\r\n      },\r\n    });\r\n  } catch (error) {\r\n    res\r\n      .status(500)\r\n      .json({ success: false, message: 'Failed to fetch analytics', error: error.message });\r\n  }\r\n});\r\n\r\n// ==================== MESSAGING ROUTES ====================\r\n\r\n// Get Conversations\r\nrouter.get('/messages/conversations', authenticateBeneficiary, async (req, res) => {\r\n  try {\r\n    const conversations = await Conversation.find({\r\n      'participants.userId': req.beneficiaryId,\r\n      isActive: true,\r\n    }).sort({ lastMessageDate: -1 });\r\n\r\n    res.json({\r\n      success: true,\r\n      data: conversations,\r\n    });\r\n  } catch (error) {\r\n    res\r\n      .status(500)\r\n      .json({ success: false, message: 'Failed to fetch conversations', error: error.message });\r\n  }\r\n});\r\n\r\n// Get Messages in Conversation\r\nrouter.get('/messages/conversation/:conversationId', authenticateBeneficiary, async (req, res) => {\r\n  try {\r\n    const messages = await Message.find({\r\n      conversationId: req.params.conversationId,\r\n    }).sort({ createdAt: 1 });\r\n\r\n    // Mark as read\r\n    await Message.updateMany(\r\n      { conversationId: req.params.conversationId, recipientId: req.beneficiaryId, isRead: false },\r\n      { isRead: true, readAt: new Date() }\r\n    );\r\n\r\n    res.json({\r\n      success: true,\r\n      data: messages,\r\n    });\r\n  } catch (error) {\r\n    res\r\n      .status(500)\r\n      .json({ success: false, message: 'Failed to fetch messages', error: error.message });\r\n  }\r\n});\r\n\r\n// Send Message\r\nrouter.post('/messages/send', authenticateBeneficiary, async (req, res) => {\r\n  try {\r\n    const { recipientId, subject, body, attachments, priority } = req.body;\r\n\r\n    if (!recipientId || !body) {\r\n      return res.status(400).json({ success: false, message: 'Missing required fields' });\r\n    }\r\n\r\n    // Find or create conversation\r\n    let conversation = await Conversation.findOne({\r\n      participants: {\r\n        $all: [\r\n          { $elemMatch: { userId: req.beneficiaryId } },\r\n          { $elemMatch: { userId: recipientId } },\r\n        ],\r\n      },\r\n    });\r\n\r\n    if (!conversation) {\r\n      conversation = new Conversation({\r\n        participants: [\r\n          { userId: req.beneficiaryId, name: req.beneficiary.firstName },\r\n          { userId: recipientId, name: 'Recipient' },\r\n        ],\r\n      });\r\n      await conversation.save();\r\n    }\r\n\r\n    // Create message\r\n    const message = new Message({\r\n      conversationId: conversation._id,\r\n      senderId: req.beneficiaryId,\r\n      senderName: req.beneficiary.firstName,\r\n      senderRole: 'beneficiary',\r\n      recipientId,\r\n      subject,\r\n      body,\r\n      attachments: attachments || [],\r\n      priority: priority || 'normal',\r\n    });\r\n\r\n    await message.save();\r\n\r\n    // Update conversation\r\n    conversation.lastMessage = body;\r\n    conversation.lastMessageDate = new Date();\r\n    conversation.lastMessageSenderId = req.beneficiaryId;\r\n    conversation.messageCount = (conversation.messageCount || 0) + 1;\r\n    await conversation.save();\r\n\r\n    res.status(201).json({\r\n      success: true,\r\n      message: 'Message sent successfully',\r\n      data: message,\r\n    });\r\n  } catch (error) {\r\n    res\r\n      .status(500)\r\n      .json({ success: false, message: 'Failed to send message', error: error.message });\r\n  }\r\n});\r\n\r\n// ==================== SURVEY ROUTES ====================\r\n\r\n// Get Available Surveys\r\nrouter.get('/surveys', authenticateBeneficiary, async (req, res) => {\r\n  try {\r\n    const surveys = await Survey.find({\r\n      status: 'active',\r\n      startDate: { $lte: new Date() },\r\n      endDate: { $gte: new Date() },\r\n    });\r\n\r\n    // Filter surveys already responded to\r\n    const responses = await SurveyResponse.find({ beneficiaryId: req.beneficiaryId });\r\n    const respondedSurveyIds = responses.map(r => r.surveyId.toString());\r\n\r\n    const availableSurveys = surveys.filter(s => !respondedSurveyIds.includes(s._id.toString()));\r\n\r\n    res.json({\r\n      success: true,\r\n      data: {\r\n        available: availableSurveys.length,\r\n        surveys: availableSurveys.map(s => ({\r\n          id: s._id,\r\n          title: s.title,\r\n          description: s.description,\r\n          questionsCount: s.questions.length,\r\n          estimatedTime: s.questions.length * 2, // 2 minutes per question\r\n        })),\r\n      },\r\n    });\r\n  } catch (error) {\r\n    res\r\n      .status(500)\r\n      .json({ success: false, message: 'Failed to fetch surveys', error: error.message });\r\n  }\r\n});\r\n\r\n// Get Survey Details\r\nrouter.get('/surveys/:surveyId', authenticateBeneficiary, async (req, res) => {\r\n  try {\r\n    const survey = await Survey.findById(req.params.surveyId);\r\n    if (!survey) {\r\n      return res.status(404).json({ success: false, message: 'Survey not found' });\r\n    }\r\n\r\n    res.json({\r\n      success: true,\r\n      data: {\r\n        id: survey._id,\r\n        title: survey.title,\r\n        description: survey.description,\r\n        questions: survey.questions,\r\n        isAnonymous: survey.isAnonymous,\r\n        allowSkipQuestions: survey.allowSkipQuestions,\r\n      },\r\n    });\r\n  } catch (error) {\r\n    res\r\n      .status(500)\r\n      .json({ success: false, message: 'Failed to fetch survey', error: error.message });\r\n  }\r\n});\r\n\r\n// Submit Survey Response\r\nrouter.post('/surveys/:surveyId/submit', authenticateBeneficiary, async (req, res) => {\r\n  try {\r\n    const { responses } = req.body;\r\n\r\n    if (!responses || responses.length === 0) {\r\n      return res.status(400).json({ success: false, message: 'No responses provided' });\r\n    }\r\n\r\n    // Check if already responded\r\n    const existingResponse = await SurveyResponse.findOne({\r\n      surveyId: req.params.surveyId,\r\n      beneficiaryId: req.beneficiaryId,\r\n    });\r\n\r\n    if (existingResponse) {\r\n      return res.status(409).json({ success: false, message: 'Already responded to this survey' });\r\n    }\r\n\r\n    // Create response\r\n    const surveyResponse = new SurveyResponse({\r\n      surveyId: req.params.surveyId,\r\n      beneficiaryId: req.beneficiaryId,\r\n      responses,\r\n      completionTime: req.body.completionTime || 0,\r\n    });\r\n\r\n    await surveyResponse.save();\r\n\r\n    res.status(201).json({\r\n      success: true,\r\n      message: 'Survey response submitted successfully',\r\n    });\r\n  } catch (error) {\r\n    res\r\n      .status(500)\r\n      .json({ success: false, message: 'Failed to submit survey', error: error.message });\r\n  }\r\n});\r\n\r\n// ==================== PROFILE ROUTES ====================\r\n\r\n// Get Beneficiary Profile\r\nrouter.get('/profile', authenticateBeneficiary, async (req, res) => {\r\n  try {\r\n    const beneficiary = await Beneficiary.findById(req.beneficiaryId).select('-password');\r\n\r\n    res.json({\r\n      success: true,\r\n      data: beneficiary,\r\n    });\r\n  } catch (error) {\r\n    res\r\n      .status(500)\r\n      .json({ success: false, message: 'Failed to fetch profile', error: error.message });\r\n  }\r\n});\r\n\r\n// Update Profile\r\nrouter.put('/profile', authenticateBeneficiary, async (req, res) => {\r\n  try {\r\n    const { firstName, lastName, phone, dateOfBirth, familyMembers, notificationPreferences } =\r\n      req.body;\r\n\r\n    const beneficiary = await Beneficiary.findByIdAndUpdate(\r\n      req.beneficiaryId,\r\n      {\r\n        firstName,\r\n        lastName,\r\n        phone,\r\n        dateOfBirth,\r\n        familyMembers,\r\n        notificationPreferences,\r\n      },\r\n      { new: true }\r\n    ).select('-password');\r\n\r\n    res.json({\r\n      success: true,\r\n      message: 'Profile updated successfully',\r\n      data: beneficiary,\r\n    });\r\n  } catch (error) {\r\n    res\r\n      .status(500)\r\n      .json({ success: false, message: 'Failed to update profile', error: error.message });\r\n  }\r\n});\r\n\r\n// Change Password\r\nrouter.post('/profile/change-password', authenticateBeneficiary, async (req, res) => {\r\n  try {\r\n    const { currentPassword, newPassword, confirmPassword } = req.body;\r\n\r\n    if (!currentPassword || !newPassword || newPassword !== confirmPassword) {\r\n      return res.status(400).json({ success: false, message: 'Invalid password data' });\r\n    }\r\n\r\n    const beneficiary = await Beneficiary.findById(req.beneficiaryId);\r\n\r\n    // Verify current password\r\n    const currentHash = crypto.createHash('sha256').update(currentPassword).digest('hex');\r\n    if (beneficiary.password !== currentHash) {\r\n      return res.status(401).json({ success: false, message: 'Current password is incorrect' });\r\n    }\r\n\r\n    // Update password\r\n    const newHash = crypto.createHash('sha256').update(newPassword).digest('hex');\r\n    beneficiary.password = newHash;\r\n    await beneficiary.save();\r\n\r\n    res.json({\r\n      success: true,\r\n      message: 'Password changed successfully',\r\n    });\r\n  } catch (error) {\r\n    res\r\n      .status(500)\r\n      .json({ success: false, message: 'Failed to change password', error: error.message });\r\n  }\r\n});\r\n\r\n// ==================== DOCUMENT ROUTES ====================\r\n\r\n// Upload Document\r\nrouter.post('/documents/upload', authenticateBeneficiary, async (req, res) => {\r\n  try {\r\n    // File upload handling would be here\r\n    const { fileName, fileUrl, fileSize, fileType, category, programId } = req.body;\r\n\r\n    const document = new Document({\r\n      beneficiaryId: req.beneficiaryId,\r\n      programId,\r\n      fileName,\r\n      fileUrl,\r\n      fileSize,\r\n      fileType,\r\n      category,\r\n      uploadedBy: req.beneficiaryId,\r\n    });\r\n\r\n    await document.save();\r\n\r\n    // Update beneficiary document count\r\n    await Beneficiary.findByIdAndUpdate(req.beneficiaryId, { $inc: { documentUploadCount: 1 } });\r\n\r\n    res.status(201).json({\r\n      success: true,\r\n      message: 'Document uploaded successfully',\r\n      data: document,\r\n    });\r\n  } catch (error) {\r\n    res\r\n      .status(500)\r\n      .json({ success: false, message: 'Failed to upload document', error: error.message });\r\n  }\r\n});\r\n\r\n// Get Documents\r\nrouter.get('/documents', authenticateBeneficiary, async (req, res) => {\r\n  try {\r\n    const documents = await Document.find({\r\n      beneficiaryId: req.beneficiaryId,\r\n    }).sort({ uploadedAt: -1 });\r\n\r\n    res.json({\r\n      success: true,\r\n      data: documents,\r\n    });\r\n  } catch (error) {\r\n    res\r\n      .status(500)\r\n      .json({ success: false, message: 'Failed to fetch documents', error: error.message });\r\n  }\r\n});\r\n\r\n// ==================== NOTIFICATION ROUTES ====================\r\n\r\n// Get Notifications\r\nrouter.get('/notifications', authenticateBeneficiary, async (req, res) => {\r\n  try {\r\n    const notifications = await Notification.find({\r\n      beneficiaryId: req.beneficiaryId,\r\n    })\r\n      .sort({ createdAt: -1 })\r\n      .limit(20);\r\n\r\n    const unreadCount = await Notification.countDocuments({\r\n      beneficiaryId: req.beneficiaryId,\r\n      isRead: false,\r\n    });\r\n\r\n    res.json({\r\n      success: true,\r\n      data: {\r\n        notifications,\r\n        unreadCount,\r\n      },\r\n    });\r\n  } catch (error) {\r\n    res\r\n      .status(500)\r\n      .json({ success: false, message: 'Failed to fetch notifications', error: error.message });\r\n  }\r\n});\r\n\r\n// Mark Notification as Read\r\nrouter.patch('/notifications/:notificationId/read', authenticateBeneficiary, async (req, res) => {\r\n  try {\r\n    const notification = await Notification.findByIdAndUpdate(\r\n      req.params.notificationId,\r\n      { isRead: true, readAt: new Date() },\r\n      { new: true }\r\n    );\r\n\r\n    res.json({\r\n      success: true,\r\n      data: notification,\r\n    });\r\n  } catch (error) {\r\n    res\r\n      .status(500)\r\n      .json({ success: false, message: 'Failed to update notification', error: error.message });\r\n  }\r\n});\r\n\r\nmodule.exports = router;\r\n"],"mappings":"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","ignoreList":[]}