{"version":3,"names":["mongoose","require","subscriptionPlanSchema","Schema","name","type","String","required","enum","unique","description","price","currency","default","monthly","Number","annual","features","contentAccess","sessionAccess","libraryAccess","storageGB","supportLevel","customReports","Boolean","apiAccess","downloadLimit","limitations","sessionLimitPerMonth","resourcesPerDay","maxSavedItems","concurrent_users","disabilityFocus","duration","isActive","discountPercentage","min","max","discountDescription","specialOffer","validUntil","Date","maxSubscribers","currentSubscribers","trialPeriod","enabled","days","autoRenewal","cancellationPolicy","refundPolicy","customization","brandingAllowed","customDomain","whiteLabel","timestamps","toJSON","virtuals","toObject","index","module","exports","model"],"sources":["SubscriptionPlan.js"],"sourcesContent":["const mongoose = require('mongoose');\r\n\r\nconst subscriptionPlanSchema = new mongoose.Schema(\r\n  {\r\n    name: {\r\n      type: String,\r\n      required: [true, 'اسم الخطة مطلوب'],\r\n      enum: ['free', 'basic', 'premium', 'enterprise'],\r\n      unique: true,\r\n    },\r\n    description: {\r\n      type: String,\r\n      required: [true, 'وصف الخطة مطلوب'],\r\n    },\r\n    price: {\r\n      currency: {\r\n        type: String,\r\n        default: 'SAR',\r\n      },\r\n      monthly: {\r\n        type: Number,\r\n        default: 0,\r\n      },\r\n      annual: {\r\n        type: Number,\r\n        default: 0,\r\n      },\r\n    },\r\n    features: {\r\n      contentAccess: {\r\n        type: [String],\r\n        default: [],\r\n        description: 'أنواع المحتوى المتاح',\r\n      },\r\n      sessionAccess: {\r\n        type: String,\r\n        enum: ['unlimited', 'limited', 'none'],\r\n        default: 'none',\r\n      },\r\n      libraryAccess: {\r\n        type: String,\r\n        enum: ['unlimited', 'limited', 'none'],\r\n        default: 'none',\r\n      },\r\n      storageGB: {\r\n        type: Number,\r\n        default: 0,\r\n      },\r\n      supportLevel: {\r\n        type: String,\r\n        enum: ['none', 'email', 'priority', '24/7'],\r\n        default: 'email',\r\n      },\r\n      customReports: Boolean,\r\n      apiAccess: Boolean,\r\n      downloadLimit: {\r\n        type: Number,\r\n        default: 0,\r\n        description: 'حد أقصى للتنزيلات شهرياً (0 = غير محدود)',\r\n      },\r\n    },\r\n    limitations: {\r\n      sessionLimitPerMonth: {\r\n        type: Number,\r\n        default: 0,\r\n        description: '0 = غير محدود',\r\n      },\r\n      resourcesPerDay: {\r\n        type: Number,\r\n        default: 0,\r\n      },\r\n      maxSavedItems: {\r\n        type: Number,\r\n        default: 0,\r\n      },\r\n      concurrent_users: {\r\n        type: Number,\r\n        default: 1,\r\n      },\r\n    },\r\n    disabilityFocus: {\r\n      type: [String],\r\n      enum: ['visual', 'hearing', 'mobility', 'intellectual', 'psychosocial', 'multiple', 'all'],\r\n      default: ['all'],\r\n    },\r\n    duration: {\r\n      type: String,\r\n      enum: ['monthly', 'annual', 'lifetime'],\r\n      default: 'monthly',\r\n    },\r\n    isActive: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    discountPercentage: {\r\n      type: Number,\r\n      default: 0,\r\n      min: 0,\r\n      max: 100,\r\n    },\r\n    discountDescription: String,\r\n    specialOffer: {\r\n      isActive: Boolean,\r\n      description: String,\r\n      validUntil: Date,\r\n    },\r\n    maxSubscribers: {\r\n      type: Number,\r\n      default: -1,\r\n      description: '-1 = غير محدود',\r\n    },\r\n    currentSubscribers: {\r\n      type: Number,\r\n      default: 0,\r\n    },\r\n    trialPeriod: {\r\n      enabled: Boolean,\r\n      days: {\r\n        type: Number,\r\n        default: 0,\r\n      },\r\n    },\r\n    autoRenewal: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    cancellationPolicy: String,\r\n    refundPolicy: String,\r\n    customization: {\r\n      brandingAllowed: Boolean,\r\n      customDomain: Boolean,\r\n      whiteLabel: Boolean,\r\n    },\r\n  },\r\n  {\r\n    timestamps: true,\r\n    toJSON: { virtuals: true },\r\n    toObject: { virtuals: true },\r\n  }\r\n);\r\n\r\nsubscriptionPlanSchema.index({ name: 1 });\r\nsubscriptionPlanSchema.index({ isActive: 1, price: 1 });\r\n\r\nmodule.exports = mongoose.model('SubscriptionPlan', subscriptionPlanSchema);\r\n"],"mappings":"AAAA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAU,CAAC;AAEpC,MAAMC,sBAAsB,GAAG,IAAIF,QAAQ,CAACG,MAAM,CAChD;EACEC,IAAI,EAAE;IACJC,IAAI,EAAEC,MAAM;IACZC,QAAQ,EAAE,CAAC,IAAI,EAAE,iBAAiB,CAAC;IACnCC,IAAI,EAAE,CAAC,MAAM,EAAE,OAAO,EAAE,SAAS,EAAE,YAAY,CAAC;IAChDC,MAAM,EAAE;EACV,CAAC;EACDC,WAAW,EAAE;IACXL,IAAI,EAAEC,MAAM;IACZC,QAAQ,EAAE,CAAC,IAAI,EAAE,iBAAiB;EACpC,CAAC;EACDI,KAAK,EAAE;IACLC,QAAQ,EAAE;MACRP,IAAI,EAAEC,MAAM;MACZO,OAAO,EAAE;IACX,CAAC;IACDC,OAAO,EAAE;MACPT,IAAI,EAAEU,MAAM;MACZF,OAAO,EAAE;IACX,CAAC;IACDG,MAAM,EAAE;MACNX,IAAI,EAAEU,MAAM;MACZF,OAAO,EAAE;IACX;EACF,CAAC;EACDI,QAAQ,EAAE;IACRC,aAAa,EAAE;MACbb,IAAI,EAAE,CAACC,MAAM,CAAC;MACdO,OAAO,EAAE,EAAE;MACXH,WAAW,EAAE;IACf,CAAC;IACDS,aAAa,EAAE;MACbd,IAAI,EAAEC,MAAM;MACZE,IAAI,EAAE,CAAC,WAAW,EAAE,SAAS,EAAE,MAAM,CAAC;MACtCK,OAAO,EAAE;IACX,CAAC;IACDO,aAAa,EAAE;MACbf,IAAI,EAAEC,MAAM;MACZE,IAAI,EAAE,CAAC,WAAW,EAAE,SAAS,EAAE,MAAM,CAAC;MACtCK,OAAO,EAAE;IACX,CAAC;IACDQ,SAAS,EAAE;MACThB,IAAI,EAAEU,MAAM;MACZF,OAAO,EAAE;IACX,CAAC;IACDS,YAAY,EAAE;MACZjB,IAAI,EAAEC,MAAM;MACZE,IAAI,EAAE,CAAC,MAAM,EAAE,OAAO,EAAE,UAAU,EAAE,MAAM,CAAC;MAC3CK,OAAO,EAAE;IACX,CAAC;IACDU,aAAa,EAAEC,OAAO;IACtBC,SAAS,EAAED,OAAO;IAClBE,aAAa,EAAE;MACbrB,IAAI,EAAEU,MAAM;MACZF,OAAO,EAAE,CAAC;MACVH,WAAW,EAAE;IACf;EACF,CAAC;EACDiB,WAAW,EAAE;IACXC,oBAAoB,EAAE;MACpBvB,IAAI,EAAEU,MAAM;MACZF,OAAO,EAAE,CAAC;MACVH,WAAW,EAAE;IACf,CAAC;IACDmB,eAAe,EAAE;MACfxB,IAAI,EAAEU,MAAM;MACZF,OAAO,EAAE;IACX,CAAC;IACDiB,aAAa,EAAE;MACbzB,IAAI,EAAEU,MAAM;MACZF,OAAO,EAAE;IACX,CAAC;IACDkB,gBAAgB,EAAE;MAChB1B,IAAI,EAAEU,MAAM;MACZF,OAAO,EAAE;IACX;EACF,CAAC;EACDmB,eAAe,EAAE;IACf3B,IAAI,EAAE,CAACC,MAAM,CAAC;IACdE,IAAI,EAAE,CAAC,QAAQ,EAAE,SAAS,EAAE,UAAU,EAAE,cAAc,EAAE,cAAc,EAAE,UAAU,EAAE,KAAK,CAAC;IAC1FK,OAAO,EAAE,CAAC,KAAK;EACjB,CAAC;EACDoB,QAAQ,EAAE;IACR5B,IAAI,EAAEC,MAAM;IACZE,IAAI,EAAE,CAAC,SAAS,EAAE,QAAQ,EAAE,UAAU,CAAC;IACvCK,OAAO,EAAE;EACX,CAAC;EACDqB,QAAQ,EAAE;IACR7B,IAAI,EAAEmB,OAAO;IACbX,OAAO,EAAE;EACX,CAAC;EACDsB,kBAAkB,EAAE;IAClB9B,IAAI,EAAEU,MAAM;IACZF,OAAO,EAAE,CAAC;IACVuB,GAAG,EAAE,CAAC;IACNC,GAAG,EAAE;EACP,CAAC;EACDC,mBAAmB,EAAEhC,MAAM;EAC3BiC,YAAY,EAAE;IACZL,QAAQ,EAAEV,OAAO;IACjBd,WAAW,EAAEJ,MAAM;IACnBkC,UAAU,EAAEC;EACd,CAAC;EACDC,cAAc,EAAE;IACdrC,IAAI,EAAEU,MAAM;IACZF,OAAO,EAAE,CAAC,CAAC;IACXH,WAAW,EAAE;EACf,CAAC;EACDiC,kBAAkB,EAAE;IAClBtC,IAAI,EAAEU,MAAM;IACZF,OAAO,EAAE;EACX,CAAC;EACD+B,WAAW,EAAE;IACXC,OAAO,EAAErB,OAAO;IAChBsB,IAAI,EAAE;MACJzC,IAAI,EAAEU,MAAM;MACZF,OAAO,EAAE;IACX;EACF,CAAC;EACDkC,WAAW,EAAE;IACX1C,IAAI,EAAEmB,OAAO;IACbX,OAAO,EAAE;EACX,CAAC;EACDmC,kBAAkB,EAAE1C,MAAM;EAC1B2C,YAAY,EAAE3C,MAAM;EACpB4C,aAAa,EAAE;IACbC,eAAe,EAAE3B,OAAO;IACxB4B,YAAY,EAAE5B,OAAO;IACrB6B,UAAU,EAAE7B;EACd;AACF,CAAC,EACD;EACE8B,UAAU,EAAE,IAAI;EAChBC,MAAM,EAAE;IAAEC,QAAQ,EAAE;EAAK,CAAC;EAC1BC,QAAQ,EAAE;IAAED,QAAQ,EAAE;EAAK;AAC7B,CACF,CAAC;AAEDtD,sBAAsB,CAACwD,KAAK,CAAC;EAAEtD,IAAI,EAAE;AAAE,CAAC,CAAC;AACzCF,sBAAsB,CAACwD,KAAK,CAAC;EAAExB,QAAQ,EAAE,CAAC;EAAEvB,KAAK,EAAE;AAAE,CAAC,CAAC;AAEvDgD,MAAM,CAACC,OAAO,GAAG5D,QAAQ,CAAC6D,KAAK,CAAC,kBAAkB,EAAE3D,sBAAsB,CAAC","ignoreList":[]}