{"version":3,"names":["express","require","router","Router","RBACService","ApiResponse","ApiError","get","req","res","next","result","getAllRoles","status","json","error","message","roleId","params","getRoleDetails","success","post","id","name","description","permissions","body","createRole","put","updates","updateRole","delete","deleteRole","getAvailablePermissions","userRole","requiredPermission","hasPermission","response","timestamp","Date","toISOString","permission","addPermissionToRole","removePermissionFromRole","userId","resource","action","checkAccess","getRBACStatistics","filterResult","query","filters","auditAccess","exportRBACConfig","file","importRBACConfig","module","exports"],"sources":["rbac.js"],"sourcesContent":["// RBAC (Role-Based Access Control) Routes\r\n// نقاط التحكم بالوصول بناءً على الأدوار\r\n\r\nconst express = require('express');\r\nconst router = express.Router();\r\nconst RBACService = require('../services/rbacService');\r\nconst { ApiResponse, ApiError } = require('../utils/apiResponse');\r\n\r\n// الحصول على جميع الأدوار\r\nrouter.get('/roles', (req, res, next) => {\r\n  try {\r\n    const result = RBACService.getAllRoles();\r\n\r\n    return res.status(200).json(new ApiResponse(200, result, 'Roles fetched'));\r\n  } catch (error) {\r\n    return next(new ApiError(500, 'Failed to fetch roles', [error.message]));\r\n  }\r\n});\r\n\r\n// الحصول على تفاصيل الدور\r\nrouter.get('/roles/:roleId', (req, res, next) => {\r\n  try {\r\n    const { roleId } = req.params;\r\n\r\n    const result = RBACService.getRoleDetails(roleId);\r\n\r\n    if (!result.success) {\r\n      return res.status(404).json(new ApiResponse(404, {}, 'Role not found'));\r\n    }\r\n\r\n    return res.status(200).json(new ApiResponse(200, result, 'Role details fetched'));\r\n  } catch (error) {\r\n    return next(new ApiError(500, 'Failed to fetch role details', [error.message]));\r\n  }\r\n});\r\n\r\n// إنشاء دور جديد\r\nrouter.post('/roles', (req, res, next) => {\r\n  try {\r\n    const { id, name, description, permissions } = req.body;\r\n\r\n    if (!name) {\r\n      return res.status(400).json(new ApiResponse(400, {}, 'Role name required'));\r\n    }\r\n\r\n    const result = RBACService.createRole({\r\n      id,\r\n      name,\r\n      description,\r\n      permissions,\r\n    });\r\n\r\n    return res.status(201).json(new ApiResponse(201, result, 'Role created'));\r\n  } catch (error) {\r\n    return next(new ApiError(500, 'Failed to create role', [error.message]));\r\n  }\r\n});\r\n\r\n// تحديث الدور\r\nrouter.put('/roles/:roleId', (req, res, next) => {\r\n  try {\r\n    const { roleId } = req.params;\r\n    const updates = req.body;\r\n\r\n    const result = RBACService.updateRole(roleId, updates);\r\n\r\n    if (!result.success) {\r\n      return res.status(404).json(new ApiResponse(404, {}, 'Role not found'));\r\n    }\r\n\r\n    return res.status(200).json(new ApiResponse(200, result, 'Role updated'));\r\n  } catch (error) {\r\n    return next(new ApiError(500, 'Failed to update role', [error.message]));\r\n  }\r\n});\r\n\r\n// حذف الدور\r\nrouter.delete('/roles/:roleId', (req, res, next) => {\r\n  try {\r\n    const { roleId } = req.params;\r\n\r\n    const result = RBACService.deleteRole(roleId);\r\n\r\n    if (!result.success) {\r\n      return next(new ApiError(400, result.message || 'Failed to delete role', [result.error]));\r\n    }\r\n\r\n    return res.status(200).json(new ApiResponse(200, result, 'Role deleted'));\r\n  } catch (error) {\r\n    return next(new ApiError(500, 'Failed to delete role', [error.message]));\r\n  }\r\n});\r\n\r\n// الحصول على الصلاحيات المتاحة\r\nrouter.get('/permissions', (req, res, next) => {\r\n  try {\r\n    const result = RBACService.getAvailablePermissions();\r\n\r\n    return res.status(200).json(new ApiResponse(200, result, 'Permissions fetched'));\r\n  } catch (error) {\r\n    return next(new ApiError(500, 'Failed to fetch permissions', [error.message]));\r\n  }\r\n});\r\n\r\n// التحقق من الصلاحية\r\nrouter.post('/check-permission', (req, res, next) => {\r\n  try {\r\n    const { userRole, requiredPermission } = req.body;\r\n\r\n    if (!userRole || !requiredPermission) {\r\n      return next(new ApiError(400, 'User role and required permission are required'));\r\n    }\r\n\r\n    const hasPermission = RBACService.hasPermission(userRole, requiredPermission);\r\n\r\n    const response = {\r\n      userRole,\r\n      requiredPermission,\r\n      hasPermission,\r\n      timestamp: new Date().toISOString(),\r\n    };\r\n\r\n    return res.status(200).json(new ApiResponse(200, response, 'Permission check completed'));\r\n  } catch (error) {\r\n    return next(new ApiError(500, 'Permission check failed', [error.message]));\r\n  }\r\n});\r\n\r\n// إضافة صلاحية للدور\r\nrouter.post('/roles/:roleId/permissions', (req, res, next) => {\r\n  try {\r\n    const { roleId } = req.params;\r\n    const { permission } = req.body;\r\n\r\n    if (!permission) {\r\n      return next(new ApiError(400, 'Permission required'));\r\n    }\r\n\r\n    const result = RBACService.addPermissionToRole(roleId, permission);\r\n\r\n    if (!result.success) {\r\n      return next(new ApiError(404, result.message || 'Role not found', [result.error]));\r\n    }\r\n\r\n    return res.status(200).json(new ApiResponse(200, result, 'Permission added'));\r\n  } catch (error) {\r\n    return next(new ApiError(500, 'Failed to add permission', [error.message]));\r\n  }\r\n});\r\n\r\n// إزالة صلاحية من الدور\r\nrouter.delete('/roles/:roleId/permissions/:permission', (req, res, next) => {\r\n  try {\r\n    const { roleId, permission } = req.params;\r\n\r\n    const result = RBACService.removePermissionFromRole(roleId, permission);\r\n\r\n    if (!result.success) {\r\n      return next(new ApiError(404, result.message || 'Role not found', [result.error]));\r\n    }\r\n\r\n    return res.status(200).json(new ApiResponse(200, result, 'Permission removed'));\r\n  } catch (error) {\r\n    return next(new ApiError(500, 'Failed to remove permission', [error.message]));\r\n  }\r\n});\r\n\r\n// فحص وصول المستخدم\r\nrouter.post('/check-access', (req, res, next) => {\r\n  try {\r\n    const { userId, resource, action } = req.body;\r\n\r\n    if (!userId || !resource || !action) {\r\n      return next(new ApiError(400, 'User ID, resource, and action are required'));\r\n    }\r\n\r\n    const result = RBACService.checkAccess(userId, resource, action);\r\n\r\n    return res.status(200).json(new ApiResponse(200, result, 'Access check completed'));\r\n  } catch (error) {\r\n    return next(new ApiError(500, 'Access check failed', [error.message]));\r\n  }\r\n});\r\n\r\n// إحصائيات RBAC\r\nrouter.get('/stats/overview', (req, res, next) => {\r\n  try {\r\n    const result = RBACService.getRBACStatistics();\r\n\r\n    return res.status(200).json(new ApiResponse(200, result, 'RBAC statistics fetched'));\r\n  } catch (error) {\r\n    return next(new ApiError(500, 'Failed to fetch RBAC statistics', [error.message]));\r\n  }\r\n});\r\n\r\n// تدقيق الوصول\r\nrouter.get('/audit/log', (req, res, next) => {\r\n  try {\r\n    const { userId, action, result: filterResult } = req.query;\r\n    const filters = {};\r\n    if (userId) filters.userId = userId;\r\n    if (action) filters.action = action;\r\n    if (filterResult) filters.result = filterResult;\r\n\r\n    const result = RBACService.auditAccess(filters);\r\n\r\n    return res.status(200).json(new ApiResponse(200, result, 'Audit log fetched'));\r\n  } catch (error) {\r\n    return next(new ApiError(500, 'Failed to fetch audit log', [error.message]));\r\n  }\r\n});\r\n\r\n// تصدير تكوين RBAC\r\nrouter.get('/export/config', (req, res, next) => {\r\n  try {\r\n    const result = RBACService.exportRBACConfig();\r\n\r\n    return res.status(200).json(new ApiResponse(200, result, 'RBAC configuration exported'));\r\n  } catch (error) {\r\n    return next(new ApiError(500, 'Failed to export RBAC configuration', [error.message]));\r\n  }\r\n});\r\n\r\n// استيراد تكوين RBAC\r\nrouter.post('/import/config', (req, res, next) => {\r\n  try {\r\n    const { file } = req.body;\r\n\r\n    if (!file) {\r\n      return next(new ApiError(400, 'File required'));\r\n    }\r\n\r\n    const result = RBACService.importRBACConfig(file);\r\n\r\n    return res.status(200).json(new ApiResponse(200, result, 'RBAC configuration imported'));\r\n  } catch (error) {\r\n    return next(new ApiError(500, 'Failed to import RBAC configuration', [error.message]));\r\n  }\r\n});\r\n\r\nmodule.exports = router;\r\n"],"mappings":"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","ignoreList":[]}