65718f9ef0b9eb2baab98964fe6b50fb
const logger = require('../utils/logger');

/**
 * Advanced Analytics Middleware
 * Collects and tracks application metrics
 */
class Analytics {
  constructor() {
    this.metrics = {
      requests: {
        total: 0,
        byMethod: {},
        byRoute: {},
        byStatus: {}
      },
      performance: {
        avgResponseTime: 0,
        slowRequests: [],
        fastestRequest: Infinity,
        slowestRequest: 0
      },
      errors: {
        total: 0,
        byType: {},
        byRoute: {}
      },
      users: {
        activeUsers: new Set(),
        totalSessions: 0,
        loginAttempts: 0
      },
      system: {
        uptime: Date.now(),
        memoryUsage: [],
        cpuUsage: []
      }
    };
  }

  /**
   * Track request metrics
   */
  trackRequest = (req, res, duration) => {
    const {
      method,
      path,
      user,
      _ip
    } = req;
    const {
      statusCode
    } = res;

    // Total requests
    this.metrics.requests.total++;

    // By method
    this.metrics.requests.byMethod[method] = (this.metrics.requests.byMethod[method] || 0) + 1;

    // By route
    const route = this.normalizeRoute(path);
    this.metrics.requests.byRoute[route] = {
      count: (this.metrics.requests.byRoute[route]?.count || 0) + 1,
      avgTime: this.calculateAverage(this.metrics.requests.byRoute[route]?.avgTime || 0, duration, this.metrics.requests.byRoute[route]?.count || 0)
    };

    // By status
    const _statusCategory = Math.floor(statusCode / 100) * 100;
    this.metrics.requests.byStatus[statusCode] = (this.metrics.requests.byStatus[statusCode] || 0) + 1;

    // Performance tracking
    this.trackPerformance(duration, route, statusCode);

    // User tracking
    if (user) {
      this.metrics.users.activeUsers.add(user.id);
    }
  };

  /**
   * Track performance metrics
   */
  trackPerformance = (duration, route, statusCode) => {
    const {
      performance
    } = this.metrics;

    // Update average response time
    performance.avgResponseTime = this.calculateAverage(performance.avgResponseTime, duration, this.metrics.requests.total - 1);

    // Track slow requests
    if (duration > 1000) {
      // > 1 second
      performance.slowRequests.push({
        route,
        duration,
        timestamp: new Date(),
        statusCode
      });

      // Keep only last 100 slow requests
      if (performance.slowRequests.length > 100) {
        performance.slowRequests.shift();
      }
    }

    // Update fastest/slowest
    performance.fastestRequest = Math.min(performance.fastestRequest, duration);
    performance.slowestRequest = Math.max(performance.slowestRequest, duration);
  };

  /**
   * Track errors
   */
  trackError = (error, req) => {
    this.metrics.errors.total++;
    const errorType = error.name || 'Unknown';
    this.metrics.errors.byType[errorType] = (this.metrics.errors.byType[errorType] || 0) + 1;
    const route = this.normalizeRoute(req.path);
    this.metrics.errors.byRoute[route] = (this.metrics.errors.byRoute[route] || 0) + 1;
  };

  /**
   * Track user activity
   */
  trackUserActivity = (userId, action) => {
    if (action === 'login') {
      this.metrics.users.activeUsers.add(userId);
      this.metrics.users.totalSessions++;
      this.metrics.users.loginAttempts++;
    } else if (action === 'logout') {
      this.metrics.users.activeUsers.delete(userId);
    }
  };

  /**
   * Get analytics summary
   */
  getSummary = () => {
    const uptime = Date.now() - this.metrics.system.uptime;
    return {
      requests: {
        total: this.metrics.requests.total,
        perSecond: (this.metrics.requests.total / (uptime / 1000)).toFixed(2),
        byMethod: this.metrics.requests.byMethod,
        byStatus: this.metrics.requests.byStatus,
        topRoutes: this.getTopRoutes(5)
      },
      performance: {
        avgResponseTime: this.metrics.performance.avgResponseTime.toFixed(2) + 'ms',
        fastestRequest: this.metrics.performance.fastestRequest + 'ms',
        slowestRequest: this.metrics.performance.slowestRequest + 'ms',
        slowRequests: this.metrics.performance.slowRequests.length
      },
      errors: {
        total: this.metrics.errors.total,
        byType: this.metrics.errors.byType,
        errorRate: (this.metrics.errors.total / this.metrics.requests.total * 100).toFixed(2) + '%',
        topErrorRoutes: this.getTopErrorRoutes(5)
      },
      users: {
        activeNow: this.metrics.users.activeUsers.size,
        totalSessions: this.metrics.users.totalSessions,
        loginAttempts: this.metrics.users.loginAttempts
      },
      system: {
        uptime: this.formatUptime(uptime),
        uptimeMs: uptime
      }
    };
  };

  /**
   * Reset analytics
   */
  reset = () => {
    this.metrics.system.uptime = Date.now();
    logger.info('Analytics reset');
  };

  /**
   * Helper methods
   */
  normalizeRoute = path => {
    return path.replace(/\/\d+/g, '/:id').split('?')[0];
  };
  calculateAverage = (currentAvg, newValue, count) => {
    return (currentAvg * count + newValue) / (count + 1);
  };
  getTopRoutes = limit => {
    return Object.entries(this.metrics.requests.byRoute).sort((a, b) => b[1].count - a[1].count).slice(0, limit).map(([route, data]) => ({
      route,
      ...data
    }));
  };
  getTopErrorRoutes = limit => {
    return Object.entries(this.metrics.errors.byRoute).sort((a, b) => b[1] - a[1]).slice(0, limit).map(([route, count]) => ({
      route,
      count
    }));
  };
  formatUptime = ms => {
    const seconds = Math.floor(ms / 1000);
    const minutes = Math.floor(seconds / 60);
    const hours = Math.floor(minutes / 60);
    const days = Math.floor(hours / 24);
    if (days > 0) return `${days}d ${hours % 24}h`;
    if (hours > 0) return `${hours}h ${minutes % 60}m`;
    if (minutes > 0) return `${minutes}m ${seconds % 60}s`;
    return `${seconds}s`;
  };

  /**
   * Export metrics for visualization
   */
  exportMetrics = () => {
    return {
      timestamp: new Date().toISOString(),
      ...this.getSummary()
    };
  };
}
module.exports = new Analytics();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJsb2dnZXIiLCJyZXF1aXJlIiwiQW5hbHl0aWNzIiwiY29uc3RydWN0b3IiLCJtZXRyaWNzIiwicmVxdWVzdHMiLCJ0b3RhbCIsImJ5TWV0aG9kIiwiYnlSb3V0ZSIsImJ5U3RhdHVzIiwicGVyZm9ybWFuY2UiLCJhdmdSZXNwb25zZVRpbWUiLCJzbG93UmVxdWVzdHMiLCJmYXN0ZXN0UmVxdWVzdCIsIkluZmluaXR5Iiwic2xvd2VzdFJlcXVlc3QiLCJlcnJvcnMiLCJieVR5cGUiLCJ1c2VycyIsImFjdGl2ZVVzZXJzIiwiU2V0IiwidG90YWxTZXNzaW9ucyIsImxvZ2luQXR0ZW1wdHMiLCJzeXN0ZW0iLCJ1cHRpbWUiLCJEYXRlIiwibm93IiwibWVtb3J5VXNhZ2UiLCJjcHVVc2FnZSIsInRyYWNrUmVxdWVzdCIsInJlcSIsInJlcyIsImR1cmF0aW9uIiwibWV0aG9kIiwicGF0aCIsInVzZXIiLCJfaXAiLCJzdGF0dXNDb2RlIiwicm91dGUiLCJub3JtYWxpemVSb3V0ZSIsImNvdW50IiwiYXZnVGltZSIsImNhbGN1bGF0ZUF2ZXJhZ2UiLCJfc3RhdHVzQ2F0ZWdvcnkiLCJNYXRoIiwiZmxvb3IiLCJ0cmFja1BlcmZvcm1hbmNlIiwiYWRkIiwiaWQiLCJwdXNoIiwidGltZXN0YW1wIiwibGVuZ3RoIiwic2hpZnQiLCJtaW4iLCJtYXgiLCJ0cmFja0Vycm9yIiwiZXJyb3IiLCJlcnJvclR5cGUiLCJuYW1lIiwidHJhY2tVc2VyQWN0aXZpdHkiLCJ1c2VySWQiLCJhY3Rpb24iLCJkZWxldGUiLCJnZXRTdW1tYXJ5IiwicGVyU2Vjb25kIiwidG9GaXhlZCIsInRvcFJvdXRlcyIsImdldFRvcFJvdXRlcyIsImVycm9yUmF0ZSIsInRvcEVycm9yUm91dGVzIiwiZ2V0VG9wRXJyb3JSb3V0ZXMiLCJhY3RpdmVOb3ciLCJzaXplIiwiZm9ybWF0VXB0aW1lIiwidXB0aW1lTXMiLCJyZXNldCIsImluZm8iLCJyZXBsYWNlIiwic3BsaXQiLCJjdXJyZW50QXZnIiwibmV3VmFsdWUiLCJsaW1pdCIsIk9iamVjdCIsImVudHJpZXMiLCJzb3J0IiwiYSIsImIiLCJzbGljZSIsIm1hcCIsImRhdGEiLCJtcyIsInNlY29uZHMiLCJtaW51dGVzIiwiaG91cnMiLCJkYXlzIiwiZXhwb3J0TWV0cmljcyIsInRvSVNPU3RyaW5nIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbImFuYWx5dGljcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBsb2dnZXIgPSByZXF1aXJlKCcuLi91dGlscy9sb2dnZXInKTtcclxuXHJcbi8qKlxyXG4gKiBBZHZhbmNlZCBBbmFseXRpY3MgTWlkZGxld2FyZVxyXG4gKiBDb2xsZWN0cyBhbmQgdHJhY2tzIGFwcGxpY2F0aW9uIG1ldHJpY3NcclxuICovXHJcbmNsYXNzIEFuYWx5dGljcyB7XHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICB0aGlzLm1ldHJpY3MgPSB7XHJcbiAgICAgIHJlcXVlc3RzOiB7XHJcbiAgICAgICAgdG90YWw6IDAsXHJcbiAgICAgICAgYnlNZXRob2Q6IHt9LFxyXG4gICAgICAgIGJ5Um91dGU6IHt9LFxyXG4gICAgICAgIGJ5U3RhdHVzOiB7fSxcclxuICAgICAgfSxcclxuICAgICAgcGVyZm9ybWFuY2U6IHtcclxuICAgICAgICBhdmdSZXNwb25zZVRpbWU6IDAsXHJcbiAgICAgICAgc2xvd1JlcXVlc3RzOiBbXSxcclxuICAgICAgICBmYXN0ZXN0UmVxdWVzdDogSW5maW5pdHksXHJcbiAgICAgICAgc2xvd2VzdFJlcXVlc3Q6IDAsXHJcbiAgICAgIH0sXHJcbiAgICAgIGVycm9yczoge1xyXG4gICAgICAgIHRvdGFsOiAwLFxyXG4gICAgICAgIGJ5VHlwZToge30sXHJcbiAgICAgICAgYnlSb3V0ZToge30sXHJcbiAgICAgIH0sXHJcbiAgICAgIHVzZXJzOiB7XHJcbiAgICAgICAgYWN0aXZlVXNlcnM6IG5ldyBTZXQoKSxcclxuICAgICAgICB0b3RhbFNlc3Npb25zOiAwLFxyXG4gICAgICAgIGxvZ2luQXR0ZW1wdHM6IDAsXHJcbiAgICAgIH0sXHJcbiAgICAgIHN5c3RlbToge1xyXG4gICAgICAgIHVwdGltZTogRGF0ZS5ub3coKSxcclxuICAgICAgICBtZW1vcnlVc2FnZTogW10sXHJcbiAgICAgICAgY3B1VXNhZ2U6IFtdLFxyXG4gICAgICB9LFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFRyYWNrIHJlcXVlc3QgbWV0cmljc1xyXG4gICAqL1xyXG4gIHRyYWNrUmVxdWVzdCA9IChyZXEsIHJlcywgZHVyYXRpb24pID0+IHtcclxuICAgIGNvbnN0IHsgbWV0aG9kLCBwYXRoLCB1c2VyLCBfaXAgfSA9IHJlcTtcclxuICAgIGNvbnN0IHsgc3RhdHVzQ29kZSB9ID0gcmVzO1xyXG5cclxuICAgIC8vIFRvdGFsIHJlcXVlc3RzXHJcbiAgICB0aGlzLm1ldHJpY3MucmVxdWVzdHMudG90YWwrKztcclxuXHJcbiAgICAvLyBCeSBtZXRob2RcclxuICAgIHRoaXMubWV0cmljcy5yZXF1ZXN0cy5ieU1ldGhvZFttZXRob2RdID0gKHRoaXMubWV0cmljcy5yZXF1ZXN0cy5ieU1ldGhvZFttZXRob2RdIHx8IDApICsgMTtcclxuXHJcbiAgICAvLyBCeSByb3V0ZVxyXG4gICAgY29uc3Qgcm91dGUgPSB0aGlzLm5vcm1hbGl6ZVJvdXRlKHBhdGgpO1xyXG4gICAgdGhpcy5tZXRyaWNzLnJlcXVlc3RzLmJ5Um91dGVbcm91dGVdID0ge1xyXG4gICAgICBjb3VudDogKHRoaXMubWV0cmljcy5yZXF1ZXN0cy5ieVJvdXRlW3JvdXRlXT8uY291bnQgfHwgMCkgKyAxLFxyXG4gICAgICBhdmdUaW1lOiB0aGlzLmNhbGN1bGF0ZUF2ZXJhZ2UoXHJcbiAgICAgICAgdGhpcy5tZXRyaWNzLnJlcXVlc3RzLmJ5Um91dGVbcm91dGVdPy5hdmdUaW1lIHx8IDAsXHJcbiAgICAgICAgZHVyYXRpb24sXHJcbiAgICAgICAgdGhpcy5tZXRyaWNzLnJlcXVlc3RzLmJ5Um91dGVbcm91dGVdPy5jb3VudCB8fCAwXHJcbiAgICAgICksXHJcbiAgICB9O1xyXG5cclxuICAgIC8vIEJ5IHN0YXR1c1xyXG4gICAgY29uc3QgX3N0YXR1c0NhdGVnb3J5ID0gTWF0aC5mbG9vcihzdGF0dXNDb2RlIC8gMTAwKSAqIDEwMDtcclxuICAgIHRoaXMubWV0cmljcy5yZXF1ZXN0cy5ieVN0YXR1c1tzdGF0dXNDb2RlXSA9XHJcbiAgICAgICh0aGlzLm1ldHJpY3MucmVxdWVzdHMuYnlTdGF0dXNbc3RhdHVzQ29kZV0gfHwgMCkgKyAxO1xyXG5cclxuICAgIC8vIFBlcmZvcm1hbmNlIHRyYWNraW5nXHJcbiAgICB0aGlzLnRyYWNrUGVyZm9ybWFuY2UoZHVyYXRpb24sIHJvdXRlLCBzdGF0dXNDb2RlKTtcclxuXHJcbiAgICAvLyBVc2VyIHRyYWNraW5nXHJcbiAgICBpZiAodXNlcikge1xyXG4gICAgICB0aGlzLm1ldHJpY3MudXNlcnMuYWN0aXZlVXNlcnMuYWRkKHVzZXIuaWQpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIFRyYWNrIHBlcmZvcm1hbmNlIG1ldHJpY3NcclxuICAgKi9cclxuICB0cmFja1BlcmZvcm1hbmNlID0gKGR1cmF0aW9uLCByb3V0ZSwgc3RhdHVzQ29kZSkgPT4ge1xyXG4gICAgY29uc3QgeyBwZXJmb3JtYW5jZSB9ID0gdGhpcy5tZXRyaWNzO1xyXG5cclxuICAgIC8vIFVwZGF0ZSBhdmVyYWdlIHJlc3BvbnNlIHRpbWVcclxuICAgIHBlcmZvcm1hbmNlLmF2Z1Jlc3BvbnNlVGltZSA9IHRoaXMuY2FsY3VsYXRlQXZlcmFnZShcclxuICAgICAgcGVyZm9ybWFuY2UuYXZnUmVzcG9uc2VUaW1lLFxyXG4gICAgICBkdXJhdGlvbixcclxuICAgICAgdGhpcy5tZXRyaWNzLnJlcXVlc3RzLnRvdGFsIC0gMVxyXG4gICAgKTtcclxuXHJcbiAgICAvLyBUcmFjayBzbG93IHJlcXVlc3RzXHJcbiAgICBpZiAoZHVyYXRpb24gPiAxMDAwKSB7XHJcbiAgICAgIC8vID4gMSBzZWNvbmRcclxuICAgICAgcGVyZm9ybWFuY2Uuc2xvd1JlcXVlc3RzLnB1c2goe1xyXG4gICAgICAgIHJvdXRlLFxyXG4gICAgICAgIGR1cmF0aW9uLFxyXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcclxuICAgICAgICBzdGF0dXNDb2RlLFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vIEtlZXAgb25seSBsYXN0IDEwMCBzbG93IHJlcXVlc3RzXHJcbiAgICAgIGlmIChwZXJmb3JtYW5jZS5zbG93UmVxdWVzdHMubGVuZ3RoID4gMTAwKSB7XHJcbiAgICAgICAgcGVyZm9ybWFuY2Uuc2xvd1JlcXVlc3RzLnNoaWZ0KCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBVcGRhdGUgZmFzdGVzdC9zbG93ZXN0XHJcbiAgICBwZXJmb3JtYW5jZS5mYXN0ZXN0UmVxdWVzdCA9IE1hdGgubWluKHBlcmZvcm1hbmNlLmZhc3Rlc3RSZXF1ZXN0LCBkdXJhdGlvbik7XHJcbiAgICBwZXJmb3JtYW5jZS5zbG93ZXN0UmVxdWVzdCA9IE1hdGgubWF4KHBlcmZvcm1hbmNlLnNsb3dlc3RSZXF1ZXN0LCBkdXJhdGlvbik7XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogVHJhY2sgZXJyb3JzXHJcbiAgICovXHJcbiAgdHJhY2tFcnJvciA9IChlcnJvciwgcmVxKSA9PiB7XHJcbiAgICB0aGlzLm1ldHJpY3MuZXJyb3JzLnRvdGFsKys7XHJcblxyXG4gICAgY29uc3QgZXJyb3JUeXBlID0gZXJyb3IubmFtZSB8fCAnVW5rbm93bic7XHJcbiAgICB0aGlzLm1ldHJpY3MuZXJyb3JzLmJ5VHlwZVtlcnJvclR5cGVdID0gKHRoaXMubWV0cmljcy5lcnJvcnMuYnlUeXBlW2Vycm9yVHlwZV0gfHwgMCkgKyAxO1xyXG5cclxuICAgIGNvbnN0IHJvdXRlID0gdGhpcy5ub3JtYWxpemVSb3V0ZShyZXEucGF0aCk7XHJcbiAgICB0aGlzLm1ldHJpY3MuZXJyb3JzLmJ5Um91dGVbcm91dGVdID0gKHRoaXMubWV0cmljcy5lcnJvcnMuYnlSb3V0ZVtyb3V0ZV0gfHwgMCkgKyAxO1xyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIFRyYWNrIHVzZXIgYWN0aXZpdHlcclxuICAgKi9cclxuICB0cmFja1VzZXJBY3Rpdml0eSA9ICh1c2VySWQsIGFjdGlvbikgPT4ge1xyXG4gICAgaWYgKGFjdGlvbiA9PT0gJ2xvZ2luJykge1xyXG4gICAgICB0aGlzLm1ldHJpY3MudXNlcnMuYWN0aXZlVXNlcnMuYWRkKHVzZXJJZCk7XHJcbiAgICAgIHRoaXMubWV0cmljcy51c2Vycy50b3RhbFNlc3Npb25zKys7XHJcbiAgICAgIHRoaXMubWV0cmljcy51c2Vycy5sb2dpbkF0dGVtcHRzKys7XHJcbiAgICB9IGVsc2UgaWYgKGFjdGlvbiA9PT0gJ2xvZ291dCcpIHtcclxuICAgICAgdGhpcy5tZXRyaWNzLnVzZXJzLmFjdGl2ZVVzZXJzLmRlbGV0ZSh1c2VySWQpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCBhbmFseXRpY3Mgc3VtbWFyeVxyXG4gICAqL1xyXG4gIGdldFN1bW1hcnkgPSAoKSA9PiB7XHJcbiAgICBjb25zdCB1cHRpbWUgPSBEYXRlLm5vdygpIC0gdGhpcy5tZXRyaWNzLnN5c3RlbS51cHRpbWU7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgcmVxdWVzdHM6IHtcclxuICAgICAgICB0b3RhbDogdGhpcy5tZXRyaWNzLnJlcXVlc3RzLnRvdGFsLFxyXG4gICAgICAgIHBlclNlY29uZDogKHRoaXMubWV0cmljcy5yZXF1ZXN0cy50b3RhbCAvICh1cHRpbWUgLyAxMDAwKSkudG9GaXhlZCgyKSxcclxuICAgICAgICBieU1ldGhvZDogdGhpcy5tZXRyaWNzLnJlcXVlc3RzLmJ5TWV0aG9kLFxyXG4gICAgICAgIGJ5U3RhdHVzOiB0aGlzLm1ldHJpY3MucmVxdWVzdHMuYnlTdGF0dXMsXHJcbiAgICAgICAgdG9wUm91dGVzOiB0aGlzLmdldFRvcFJvdXRlcyg1KSxcclxuICAgICAgfSxcclxuICAgICAgcGVyZm9ybWFuY2U6IHtcclxuICAgICAgICBhdmdSZXNwb25zZVRpbWU6IHRoaXMubWV0cmljcy5wZXJmb3JtYW5jZS5hdmdSZXNwb25zZVRpbWUudG9GaXhlZCgyKSArICdtcycsXHJcbiAgICAgICAgZmFzdGVzdFJlcXVlc3Q6IHRoaXMubWV0cmljcy5wZXJmb3JtYW5jZS5mYXN0ZXN0UmVxdWVzdCArICdtcycsXHJcbiAgICAgICAgc2xvd2VzdFJlcXVlc3Q6IHRoaXMubWV0cmljcy5wZXJmb3JtYW5jZS5zbG93ZXN0UmVxdWVzdCArICdtcycsXHJcbiAgICAgICAgc2xvd1JlcXVlc3RzOiB0aGlzLm1ldHJpY3MucGVyZm9ybWFuY2Uuc2xvd1JlcXVlc3RzLmxlbmd0aCxcclxuICAgICAgfSxcclxuICAgICAgZXJyb3JzOiB7XHJcbiAgICAgICAgdG90YWw6IHRoaXMubWV0cmljcy5lcnJvcnMudG90YWwsXHJcbiAgICAgICAgYnlUeXBlOiB0aGlzLm1ldHJpY3MuZXJyb3JzLmJ5VHlwZSxcclxuICAgICAgICBlcnJvclJhdGU6XHJcbiAgICAgICAgICAoKHRoaXMubWV0cmljcy5lcnJvcnMudG90YWwgLyB0aGlzLm1ldHJpY3MucmVxdWVzdHMudG90YWwpICogMTAwKS50b0ZpeGVkKDIpICsgJyUnLFxyXG4gICAgICAgIHRvcEVycm9yUm91dGVzOiB0aGlzLmdldFRvcEVycm9yUm91dGVzKDUpLFxyXG4gICAgICB9LFxyXG4gICAgICB1c2Vyczoge1xyXG4gICAgICAgIGFjdGl2ZU5vdzogdGhpcy5tZXRyaWNzLnVzZXJzLmFjdGl2ZVVzZXJzLnNpemUsXHJcbiAgICAgICAgdG90YWxTZXNzaW9uczogdGhpcy5tZXRyaWNzLnVzZXJzLnRvdGFsU2Vzc2lvbnMsXHJcbiAgICAgICAgbG9naW5BdHRlbXB0czogdGhpcy5tZXRyaWNzLnVzZXJzLmxvZ2luQXR0ZW1wdHMsXHJcbiAgICAgIH0sXHJcbiAgICAgIHN5c3RlbToge1xyXG4gICAgICAgIHVwdGltZTogdGhpcy5mb3JtYXRVcHRpbWUodXB0aW1lKSxcclxuICAgICAgICB1cHRpbWVNczogdXB0aW1lLFxyXG4gICAgICB9LFxyXG4gICAgfTtcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBSZXNldCBhbmFseXRpY3NcclxuICAgKi9cclxuICByZXNldCA9ICgpID0+IHtcclxuICAgIHRoaXMubWV0cmljcy5zeXN0ZW0udXB0aW1lID0gRGF0ZS5ub3coKTtcclxuICAgIGxvZ2dlci5pbmZvKCdBbmFseXRpY3MgcmVzZXQnKTtcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBIZWxwZXIgbWV0aG9kc1xyXG4gICAqL1xyXG4gIG5vcm1hbGl6ZVJvdXRlID0gcGF0aCA9PiB7XHJcbiAgICByZXR1cm4gcGF0aC5yZXBsYWNlKC9cXC9cXGQrL2csICcvOmlkJykuc3BsaXQoJz8nKVswXTtcclxuICB9O1xyXG5cclxuICBjYWxjdWxhdGVBdmVyYWdlID0gKGN1cnJlbnRBdmcsIG5ld1ZhbHVlLCBjb3VudCkgPT4ge1xyXG4gICAgcmV0dXJuIChjdXJyZW50QXZnICogY291bnQgKyBuZXdWYWx1ZSkgLyAoY291bnQgKyAxKTtcclxuICB9O1xyXG5cclxuICBnZXRUb3BSb3V0ZXMgPSBsaW1pdCA9PiB7XHJcbiAgICByZXR1cm4gT2JqZWN0LmVudHJpZXModGhpcy5tZXRyaWNzLnJlcXVlc3RzLmJ5Um91dGUpXHJcbiAgICAgIC5zb3J0KChhLCBiKSA9PiBiWzFdLmNvdW50IC0gYVsxXS5jb3VudClcclxuICAgICAgLnNsaWNlKDAsIGxpbWl0KVxyXG4gICAgICAubWFwKChbcm91dGUsIGRhdGFdKSA9PiAoeyByb3V0ZSwgLi4uZGF0YSB9KSk7XHJcbiAgfTtcclxuXHJcbiAgZ2V0VG9wRXJyb3JSb3V0ZXMgPSBsaW1pdCA9PiB7XHJcbiAgICByZXR1cm4gT2JqZWN0LmVudHJpZXModGhpcy5tZXRyaWNzLmVycm9ycy5ieVJvdXRlKVxyXG4gICAgICAuc29ydCgoYSwgYikgPT4gYlsxXSAtIGFbMV0pXHJcbiAgICAgIC5zbGljZSgwLCBsaW1pdClcclxuICAgICAgLm1hcCgoW3JvdXRlLCBjb3VudF0pID0+ICh7IHJvdXRlLCBjb3VudCB9KSk7XHJcbiAgfTtcclxuXHJcbiAgZm9ybWF0VXB0aW1lID0gbXMgPT4ge1xyXG4gICAgY29uc3Qgc2Vjb25kcyA9IE1hdGguZmxvb3IobXMgLyAxMDAwKTtcclxuICAgIGNvbnN0IG1pbnV0ZXMgPSBNYXRoLmZsb29yKHNlY29uZHMgLyA2MCk7XHJcbiAgICBjb25zdCBob3VycyA9IE1hdGguZmxvb3IobWludXRlcyAvIDYwKTtcclxuICAgIGNvbnN0IGRheXMgPSBNYXRoLmZsb29yKGhvdXJzIC8gMjQpO1xyXG5cclxuICAgIGlmIChkYXlzID4gMCkgcmV0dXJuIGAke2RheXN9ZCAke2hvdXJzICUgMjR9aGA7XHJcbiAgICBpZiAoaG91cnMgPiAwKSByZXR1cm4gYCR7aG91cnN9aCAke21pbnV0ZXMgJSA2MH1tYDtcclxuICAgIGlmIChtaW51dGVzID4gMCkgcmV0dXJuIGAke21pbnV0ZXN9bSAke3NlY29uZHMgJSA2MH1zYDtcclxuICAgIHJldHVybiBgJHtzZWNvbmRzfXNgO1xyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIEV4cG9ydCBtZXRyaWNzIGZvciB2aXN1YWxpemF0aW9uXHJcbiAgICovXHJcbiAgZXhwb3J0TWV0cmljcyA9ICgpID0+IHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgICAuLi50aGlzLmdldFN1bW1hcnkoKSxcclxuICAgIH07XHJcbiAgfTtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBuZXcgQW5hbHl0aWNzKCk7XHJcbiJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsTUFBTSxHQUFHQyxPQUFPLENBQUMsaUJBQWlCLENBQUM7O0FBRXpDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTUMsU0FBUyxDQUFDO0VBQ2RDLFdBQVdBLENBQUEs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