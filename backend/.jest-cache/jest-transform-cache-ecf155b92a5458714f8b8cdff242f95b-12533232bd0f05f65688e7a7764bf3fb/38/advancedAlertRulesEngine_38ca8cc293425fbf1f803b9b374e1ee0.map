{"version":3,"names":["mongoose","require","logger","EventEmitter","alertRuleSchema","Schema","ruleId","type","String","unique","index","name","required","description","isActive","Boolean","default","conditions","eventType","severity","customFilters","field","operator","value","Types","Mixed","logicalOperator","minOccurrences","Number","timeWindow","timeRange","enabled","startTime","endTime","daysOfWeek","actions","notify","channels","templateId","recipients","userIds","groups","roles","priority","enum","executeAction","actionType","actionData","logEvent","logLevel","includeDetails","webhook","url","method","headers","payload","runFunction","functionName","parameters","constraints","rateLimit","maxPerHour","maxPerDay","aggregation","groupBy","sendAfter","cooldown","duration","exclusions","eventTypes","customFilter","executionOrder","monitoring","trackMetrics","alertOnFailure","stats","triggered","succeeded","failed","lastTriggered","Date","lastSucceeded","lastFailed","tags","owner","createdAt","now","updatedAt","createdBy","notes","AlertRule","model","AdvancedAlertRulesEngine","constructor","cache","Map","cacheTimeout","recentEvents","executeCounters","createRule","ruleData","validateRuleData","rule","Math","random","toString","substr","savedRule","save","set","emit","info","error","message","updateRule","updates","findOneAndUpdate","new","Error","delete","deleteRule","result","deleteOne","toggleRule","searchRules","criteria","query","rules","find","sort","exec","evaluateEvent","eventData","triggeredRules","evaluateRule","checkConstraints","push","executeActions","event","length","includes","evaluateCustomFilters","isWithinTimeRange","isDayAllowed","checkOccurrences","filters","lastLogicalOp","filter","conditionResult","evaluateFilter","fieldValue","getNestedValue","RegExp","test","undefined","obj","path","split","reduce","acc","part","key","has","events","get","windowStart","filteredEvents","timestamp","checkRateLimit","hourly","daily","counter","oneHourAgo","oneDayAgo","t","promises","executeNotifyAction","executeCustomAction","executeLogAction","executeWebhookAction","executeFunctionAction","results","Promise","allSettled","r","status","axios","data","timeout","currentTime","toLocaleTimeString","hour","minute","hour12","today","toLocaleString","weekday","getRuleStatistics","findOne","clearCache","size","clear","module","exports","rulesEngine"],"sources":["advancedAlertRulesEngine.js"],"sourcesContent":["/**\r\n * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\r\n * ğŸ¯ Advanced Alert Rules Engine\r\n * Ù…Ø­Ø±Ùƒ Ø§Ù„Ù‚ÙˆØ§Ø¹Ø³ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø© Ù„Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª\r\n * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\r\n * \r\n * Ù†Ø¸Ø§Ù… Ù…ØªÙ‚Ø¯Ù… ÙˆØ°ÙƒÙŠ Ù„Ø¥Ø¯Ø§Ø±Ø© Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª:\r\n * - Ù‚ÙˆØ§Ø¹Ø³ Ù…Ø±Ù†Ø© ÙˆÙ‚Ø§Ø¨Ù„Ø© Ù„Ù„ØªØ®ØµÙŠØµ\r\n * - ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø´Ø±ÙˆØ· Ø§Ù„Ù…Ø¹Ù‚Ø¯Ø©\r\n * - Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„Ø°ÙƒÙŠØ©\r\n * - Ø§Ù„ØªØ³Ù„Ø³Ù„ ÙˆØ§Ù„ØªØ¬Ù…ÙŠØ¹\r\n */\r\n\r\nconst mongoose = require('mongoose');\r\nconst logger = require('../utils/logger');\r\nconst EventEmitter = require('events');\r\n\r\n// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\r\n// ğŸ“‹ Ù†Ù…ÙˆØ°Ø¬ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡\r\n// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\r\n\r\nconst alertRuleSchema = new mongoose.Schema({\r\n  ruleId: { type: String, unique: true, index: true },\r\n  name: { type: String, required: true },\r\n  description: String,\r\n\r\n  // Ø§Ù„ØªÙØ¹ÙŠÙ„\r\n  isActive: { type: Boolean, default: true, index: true },\r\n\r\n  // Ø´Ø±ÙˆØ· Ø§Ù„ØªÙØ¹ÙŠÙ„ (Conditions)\r\n  conditions: {\r\n    // Ù†ÙˆØ¹ Ø§Ù„Ø­Ø¯Ø«\r\n    eventType: [String], // ['system_error', 'high_traffic', 'low_performance', ...]\r\n    \r\n    // Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø´Ø¯Ø©\r\n    severity: [String], // ['low', 'medium', 'high', 'critical']\r\n    \r\n    // Ù…Ø±Ø´Ø­Ø§Øª Ù…Ø®ØµØµØ©\r\n    customFilters: [\r\n      {\r\n        field: String,        // Ø§Ø³Ù… Ø§Ù„Ø­Ù‚Ù„\r\n        operator: String,     // 'equals', 'contains', 'gt', 'lt', 'regex', ...\r\n        value: mongoose.Schema.Types.Mixed,\r\n        logicalOperator: String, // 'AND', 'OR'\r\n      },\r\n    ],\r\n\r\n    // Ø¹Ø¯Ø¯ Ø§Ù„ØªÙƒØ±Ø§Ø±Ø§Øª\r\n    minOccurrences: { type: Number, default: 1 },\r\n    timeWindow: Number, // Ø¨Ø§Ù„Ø«ÙˆØ§Ù†ÙŠ (5000 = 5 Ø«ÙˆØ§Ù†ÙŠ)\r\n\r\n    // Ù†Ø·Ø§Ù‚ Ø§Ù„ÙˆÙ‚Øª\r\n    timeRange: {\r\n      enabled: { type: Boolean, default: false },\r\n      startTime: String, // \"08:00\"\r\n      endTime: String,   // \"18:00\"\r\n    },\r\n\r\n    // Ø£ÙŠØ§Ù… Ù…Ø­Ø¯Ø¯Ø©\r\n    daysOfWeek: [String], // ['monday', 'tuesday', ...]\r\n  },\r\n\r\n  // Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª (Actions)\r\n  actions: {\r\n    // Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø±\r\n    notify: {\r\n      enabled: { type: Boolean, default: true },\r\n      channels: [String], // ['email', 'sms', 'whatsapp', ...]\r\n      templateId: String,\r\n      recipients: {\r\n        userIds: [String],\r\n        groups: [String],\r\n        roles: [String],\r\n      },\r\n      priority: {\r\n        type: String,\r\n        enum: ['low', 'medium', 'high', 'critical'],\r\n        default: 'medium',\r\n      },\r\n    },\r\n\r\n    // ØªÙ†ÙÙŠØ° Ø¹Ù…Ù„ÙŠØ©\r\n    executeAction: {\r\n      enabled: { type: Boolean, default: false },\r\n      actionType: String, // 'escalate', 'autofix', 'create_ticket', ...\r\n      actionData: mongoose.Schema.Types.Mixed,\r\n    },\r\n\r\n    // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø­Ø¯Ø«\r\n    logEvent: {\r\n      enabled: { type: Boolean, default: true },\r\n      logLevel: { type: String, default: 'info' },\r\n      includeDetails: { type: Boolean, default: true },\r\n    },\r\n\r\n    // Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ webhook\r\n    webhook: {\r\n      enabled: { type: Boolean, default: false },\r\n      url: String,\r\n      method: { type: String, default: 'POST' },\r\n      headers: mongoose.Schema.Types.Mixed,\r\n      payload: mongoose.Schema.Types.Mixed,\r\n    },\r\n\r\n    // ØªØ´ØºÙŠÙ„ ÙˆØ¸ÙŠÙØ©\r\n    runFunction: {\r\n      enabled: { type: Boolean, default: false },\r\n      functionName: String,\r\n      parameters: mongoose.Schema.Types.Mixed,\r\n    },\r\n  },\r\n\r\n  // Ø§Ù„Ù‚ÙŠÙˆØ¯ (Constraints)\r\n  constraints: {\r\n    // Ù…Ø¹Ø¯Ù„ Ø§Ù„ØªØ­Ø¯ÙŠØ¯ (Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù„Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª)\r\n    rateLimit: {\r\n      enabled: { type: Boolean, default: true },\r\n      maxPerHour: { type: Number, default: 10 },\r\n      maxPerDay: { type: Number, default: 100 },\r\n    },\r\n\r\n    // ØªØ¬Ù…ÙŠØ¹ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª\r\n    aggregation: {\r\n      enabled: { type: Boolean, default: false },\r\n      groupBy: String, // Ø­Ù‚Ù„ Ù„Ù„ØªØ¬Ù…ÙŠØ¹ Ø­Ø³Ø¨Ù‡\r\n      timeWindow: Number, // Ø«ÙˆØ§Ù†Ù\r\n      sendAfter: Number, // Ø¥Ø±Ø³Ø§Ù„ Ø¨Ø¹Ø¯ Ù‡Ø°Ø§ Ø§Ù„ÙˆÙ‚Øª\r\n    },\r\n\r\n    // ÙØªØ±Ø© Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± (Cooldown)\r\n    cooldown: {\r\n      enabled: { type: Boolean, default: true },\r\n      duration: { type: Number, default: 300 }, // 5 Ø¯Ù‚Ø§Ø¦Ù‚\r\n    },\r\n\r\n    // Ø§Ù„Ø§Ø³ØªØ«Ù†Ø§Ø¡Ø§Øª\r\n    exclusions: {\r\n      eventTypes: [String],\r\n      customFilter: mongoose.Schema.Types.Mixed,\r\n    },\r\n  },\r\n\r\n  // Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ§Øª ÙˆØ§Ù„ØªØ±ØªÙŠØ¨\r\n  priority: { type: Number, default: 1 },\r\n  executionOrder: { type: String, enum: ['sequential', 'parallel'], default: 'sequential' },\r\n\r\n  // Ø§Ù„Ù…Ø±Ø§Ù‚Ø¨Ø© ÙˆØ§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª\r\n  monitoring: {\r\n    enabled: { type: Boolean, default: true },\r\n    trackMetrics: { type: Boolean, default: true },\r\n    alertOnFailure: { type: Boolean, default: false },\r\n  },\r\n\r\n  // Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª\r\n  stats: {\r\n    triggered: { type: Number, default: 0 },\r\n    succeeded: { type: Number, default: 0 },\r\n    failed: { type: Number, default: 0 },\r\n    lastTriggered: Date,\r\n    lastSucceeded: Date,\r\n    lastFailed: Date,\r\n  },\r\n\r\n  // Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¹Ø±ÙŠÙÙŠØ©\r\n  tags: [String],\r\n  owner: String,\r\n  createdAt: { type: Date, default: Date.now, index: true },\r\n  updatedAt: { type: Date, default: Date.now },\r\n  createdBy: String,\r\n  notes: String,\r\n});\r\n\r\nconst AlertRule = mongoose.model('AlertRule', alertRuleSchema);\r\n\r\n// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\r\n// ğŸ¯ Ù…Ø­Ø±Ùƒ Ø§Ù„Ù‚ÙˆØ§Ø¹Ø³ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…\r\n// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\r\n\r\nclass AdvancedAlertRulesEngine extends EventEmitter {\r\n  constructor() {\r\n    super();\r\n\r\n    // Ø°Ø§ÙƒØ±Ø© Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø¤Ù‚Øª\r\n    this.cache = new Map();\r\n    this.cacheTimeout = 600000; // 10 Ø¯Ù‚Ø§Ø¦Ù‚\r\n\r\n    // Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø­Ø¯ÙˆØ¯ Ø§Ù„Ù†Ø´Ø·Ø©\r\n    this.recentEvents = new Map(); // Ù„Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ù…Ø¹Ø¯Ù„ Ø§Ù„ØªØ­Ø¯ÙŠØ¯\r\n\r\n    // Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„Ù…Ù†ÙØ°Ø©\r\n    this.executeCounters = new Map();\r\n  }\r\n\r\n  /**\r\n   * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\r\n   * ğŸ“‹ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù‚ÙˆØ§Ø¹Ø³\r\n   * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\r\n   */\r\n\r\n  /**\r\n   * Ø¥Ù†Ø´Ø§Ø¡ Ù‚Ø§Ø¹Ø¯Ø© Ø¬Ø¯ÙŠØ¯Ø©\r\n   */\r\n  async createRule(ruleData) {\r\n    try {\r\n      // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª\r\n      this.validateRuleData(ruleData);\r\n\r\n      const rule = new AlertRule({\r\n        ruleId: `RULE_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\r\n        ...ruleData,\r\n      });\r\n\r\n      const savedRule = await rule.save();\r\n\r\n      // Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ø§Ù„Ø°Ø§ÙƒØ±Ø© Ø§Ù„Ù…Ø¤Ù‚ØªØ©\r\n      this.cache.set(savedRule.ruleId, savedRule);\r\n\r\n      this.emit('ruleCreated', savedRule);\r\n\r\n      logger.info(`âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ù‚Ø§Ø¹Ø¯Ø© Ø¬Ø¯ÙŠØ¯Ø©: ${savedRule.ruleId}`);\r\n\r\n      return savedRule;\r\n    } catch (error) {\r\n      logger.error(`âŒ Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù‚Ø§Ø¹Ø¯Ø©: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ØªØ­Ø¯ÙŠØ« Ù‚Ø§Ø¹Ø¯Ø©\r\n   */\r\n  async updateRule(ruleId, updates) {\r\n    try {\r\n      const rule = await AlertRule.findOneAndUpdate(\r\n        { ruleId },\r\n        { ...updates, updatedAt: new Date() },\r\n        { new: true }\r\n      );\r\n\r\n      if (!rule) {\r\n        throw new Error(`Ø§Ù„Ù‚Ø§Ø¹Ø¯Ø© ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø©: ${ruleId}`);\r\n      }\r\n\r\n      // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø°Ø§ÙƒØ±Ø© Ø§Ù„Ù…Ø¤Ù‚ØªØ©\r\n      this.cache.delete(ruleId);\r\n\r\n      this.emit('ruleUpdated', rule);\r\n\r\n      logger.info(`ğŸ“ ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù‚Ø§Ø¹Ø¯Ø©: ${ruleId}`);\r\n\r\n      return rule;\r\n    } catch (error) {\r\n      logger.error(`âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù‚Ø§Ø¹Ø¯Ø©: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Ø­Ø°Ù Ù‚Ø§Ø¹Ø¯Ø©\r\n   */\r\n  async deleteRule(ruleId) {\r\n    try {\r\n      const result = await AlertRule.deleteOne({ ruleId });\r\n\r\n      this.cache.delete(ruleId);\r\n\r\n      this.emit('ruleDeleted', { ruleId });\r\n\r\n      logger.info(`ğŸ—‘ï¸ ØªÙ… Ø­Ø°Ù Ø§Ù„Ù‚Ø§Ø¹Ø¯Ø©: ${ruleId}`);\r\n\r\n      return result;\r\n    } catch (error) {\r\n      logger.error(`âŒ Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù‚Ø§Ø¹Ø¯Ø©: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ØªÙØ¹ÙŠÙ„/ØªØ¹Ø·ÙŠÙ„ Ù‚Ø§Ø¹Ø¯Ø©\r\n   */\r\n  async toggleRule(ruleId, isActive) {\r\n    try {\r\n      return await this.updateRule(ruleId, { isActive });\r\n    } catch (error) {\r\n      logger.error(`âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ¨Ø¯ÙŠÙ„ Ø­Ø§Ù„Ø© Ø§Ù„Ù‚Ø§Ø¹Ø¯Ø©: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù‚ÙˆØ§Ø¹Ø³\r\n   */\r\n  async searchRules(criteria = {}) {\r\n    try {\r\n      const query = { isActive: true, ...criteria };\r\n      const rules = await AlertRule.find(query)\r\n        .sort({ priority: -1, createdAt: -1 })\r\n        .exec();\r\n\r\n      return rules;\r\n    } catch (error) {\r\n      logger.error(`âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù‚ÙˆØ§Ø¹Ø³: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\r\n   * ğŸ” ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø£Ø­Ø¯Ø§Ø«\r\n   * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\r\n   */\r\n\r\n  /**\r\n   * Ù…Ø¹Ø§Ù„Ø¬Ø© Ø­Ø¯Ø«\r\n   */\r\n  async evaluateEvent(eventData) {\r\n    try {\r\n      // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù‚ÙˆØ§Ø¹Ø³ Ø§Ù„Ù†Ø´Ø·Ø©\r\n      const rules = await this.searchRules();\r\n\r\n      const triggeredRules = [];\r\n\r\n      for (const rule of rules) {\r\n        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø´Ø±ÙˆØ· Ø§Ù„Ù‚Ø§Ø¹Ø¯Ø©\r\n        if (await this.evaluateRule(rule, eventData)) {\r\n          // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù‚ÙŠÙˆØ¯\r\n          if (await this.checkConstraints(rule, eventData)) {\r\n            triggeredRules.push(rule);\r\n\r\n            // ØªÙ†ÙÙŠØ° Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª\r\n            await this.executeActions(rule, eventData);\r\n\r\n            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª\r\n            rule.stats.triggered++;\r\n            await rule.save();\r\n          }\r\n        }\r\n      }\r\n\r\n      this.emit('eventEvaluated', {\r\n        event: eventData,\r\n        triggeredRules,\r\n      });\r\n\r\n      return triggeredRules;\r\n    } catch (error) {\r\n      logger.error(`âŒ Ø®Ø·Ø£ ÙÙŠ ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø­Ø¯Ø«: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ØªÙ‚ÙŠÙŠÙ… Ù‚Ø§Ø¹Ø¯Ø© Ù…Ø¹ÙŠÙ†Ø©\r\n   */\r\n  async evaluateRule(rule, eventData) {\r\n    try {\r\n      // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ù†ÙˆØ¹ Ø§Ù„Ø­Ø¯Ø«\r\n      if (rule.conditions.eventType.length > 0) {\r\n        if (!rule.conditions.eventType.includes(eventData.type)) {\r\n          return false;\r\n        }\r\n      }\r\n\r\n      // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø´Ø¯Ø©\r\n      if (rule.conditions.severity.length > 0) {\r\n        if (!rule.conditions.severity.includes(eventData.severity)) {\r\n          return false;\r\n        }\r\n      }\r\n\r\n      // ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ù…Ø±Ø´Ø­Ø§Øª Ø§Ù„Ù…Ø®ØµØµØ©\r\n      if (!this.evaluateCustomFilters(rule.conditions.customFilters, eventData)) {\r\n        return false;\r\n      }\r\n\r\n      // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ù†Ø·Ø§Ù‚ Ø§Ù„ÙˆÙ‚Øª\r\n      if (rule.conditions.timeRange.enabled) {\r\n        if (!this.isWithinTimeRange(rule.conditions.timeRange)) {\r\n          return false;\r\n        }\r\n      }\r\n\r\n      // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø£ÙŠØ§Ù… Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹\r\n      if (rule.conditions.daysOfWeek.length > 0) {\r\n        if (!this.isDayAllowed(rule.conditions.daysOfWeek)) {\r\n          return false;\r\n        }\r\n      }\r\n\r\n      // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØªÙƒØ±Ø§Ø±Ø§Øª\r\n      if (!(await this.checkOccurrences(rule, eventData))) {\r\n        return false;\r\n      }\r\n\r\n      return true;\r\n    } catch (error) {\r\n      logger.error(`âŒ Ø®Ø·Ø£ ÙÙŠ ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ù‚Ø§Ø¹Ø¯Ø©: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ù…Ø±Ø´Ø­Ø§Øª Ø§Ù„Ù…Ø®ØµØµØ©\r\n   */\r\n  evaluateCustomFilters(filters, eventData) {\r\n    if (!filters || filters.length === 0) {\r\n      return true;\r\n    }\r\n\r\n    let result = true;\r\n    let lastLogicalOp = 'AND';\r\n\r\n    for (const filter of filters) {\r\n      const conditionResult = this.evaluateFilter(filter, eventData);\r\n\r\n      if (lastLogicalOp === 'AND') {\r\n        result = result && conditionResult;\r\n      } else if (lastLogicalOp === 'OR') {\r\n        result = result || conditionResult;\r\n      }\r\n\r\n      lastLogicalOp = filter.logicalOperator || 'AND';\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * ØªÙ‚ÙŠÙŠÙ… Ù…Ø±Ø´Ø­ ÙˆØ§Ø­Ø¯\r\n   */\r\n  evaluateFilter(filter, eventData) {\r\n    const fieldValue = this.getNestedValue(eventData, filter.field);\r\n\r\n    switch (filter.operator) {\r\n      case 'equals':\r\n        return fieldValue === filter.value;\r\n      case 'notEquals':\r\n        return fieldValue !== filter.value;\r\n      case 'contains':\r\n        return String(fieldValue).includes(String(filter.value));\r\n      case 'notContains':\r\n        return !String(fieldValue).includes(String(filter.value));\r\n      case 'gt':\r\n        return fieldValue > filter.value;\r\n      case 'gte':\r\n        return fieldValue >= filter.value;\r\n      case 'lt':\r\n        return fieldValue < filter.value;\r\n      case 'lte':\r\n        return fieldValue <= filter.value;\r\n      case 'regex':\r\n        return new RegExp(filter.value).test(String(fieldValue));\r\n      case 'in':\r\n        return filter.value.includes(fieldValue);\r\n      case 'notIn':\r\n        return !filter.value.includes(fieldValue);\r\n      case 'exists':\r\n        return fieldValue !== undefined && fieldValue !== null;\r\n      case 'notExists':\r\n        return fieldValue === undefined || fieldValue === null;\r\n      default:\r\n        return true;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù‚ÙŠÙ…Ø© Ù…ØªØ¯Ø§Ø®Ù„Ø©\r\n   */\r\n  getNestedValue(obj, path) {\r\n    return path.split('.').reduce((acc, part) => acc?.[part], obj);\r\n  }\r\n\r\n  /**\r\n   * Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØªÙƒØ±Ø§Ø±Ø§Øª\r\n   */\r\n  async checkOccurrences(rule, eventData) {\r\n    const key = `${rule.ruleId}_${eventData.type}`;\r\n    const now = Date.now();\r\n\r\n    if (!this.recentEvents.has(key)) {\r\n      this.recentEvents.set(key, []);\r\n    }\r\n\r\n    const events = this.recentEvents.get(key);\r\n    const windowStart = now - rule.conditions.timeWindow;\r\n\r\n    // ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©\r\n    const filteredEvents = events.filter(timestamp => timestamp > windowStart);\r\n\r\n    if (filteredEvents.length >= rule.conditions.minOccurrences) {\r\n      return true;\r\n    }\r\n\r\n    filteredEvents.push(now);\r\n    this.recentEvents.set(key, filteredEvents);\r\n\r\n    return filteredEvents.length >= rule.conditions.minOccurrences;\r\n  }\r\n\r\n  /**\r\n   * Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù‚ÙŠÙˆØ¯\r\n   */\r\n  async checkConstraints(rule, eventData) {\r\n    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ù…Ø¹Ø¯Ù„ Ø§Ù„ØªØ­Ø¯ÙŠØ¯\r\n    if (rule.constraints.rateLimit.enabled) {\r\n      if (!(await this.checkRateLimit(rule))) {\r\n        return false;\r\n      }\r\n    }\r\n\r\n    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø§Ø³ØªØ«Ù†Ø§Ø¡Ø§Øª\r\n    if (rule.constraints.exclusions.eventTypes.includes(eventData.type)) {\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ù…Ø¹Ø¯Ù„ Ø§Ù„ØªØ­Ø¯ÙŠØ¯\r\n   */\r\n  async checkRateLimit(rule) {\r\n    const key = `rate_${rule.ruleId}`;\r\n    const now = Date.now();\r\n\r\n    if (!this.executeCounters.has(key)) {\r\n      this.executeCounters.set(key, { hourly: [], daily: [] });\r\n    }\r\n\r\n    const counter = this.executeCounters.get(key);\r\n    const oneHourAgo = now - 3600000;\r\n    const oneDayAgo = now - 86400000;\r\n\r\n    // ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø¹Ø¯Ø§Ø¯Ø§Øª\r\n    counter.hourly = counter.hourly.filter(t => t > oneHourAgo);\r\n    counter.daily = counter.daily.filter(t => t > oneDayAgo);\r\n\r\n    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø­Ø¯ÙˆØ¯\r\n    if (counter.hourly.length >= rule.constraints.rateLimit.maxPerHour) {\r\n      return false;\r\n    }\r\n\r\n    if (counter.daily.length >= rule.constraints.rateLimit.maxPerDay) {\r\n      return false;\r\n    }\r\n\r\n    counter.hourly.push(now);\r\n    counter.daily.push(now);\r\n\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\r\n   * âš¡ ØªÙ†ÙÙŠØ° Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª\r\n   * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\r\n   */\r\n\r\n  /**\r\n   * ØªÙ†ÙÙŠØ° Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª\r\n   */\r\n  async executeActions(rule, eventData) {\r\n    try {\r\n      const promises = [];\r\n\r\n      // Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø±\r\n      if (rule.actions.notify.enabled) {\r\n        promises.push(this.executeNotifyAction(rule, eventData));\r\n      }\r\n\r\n      // ØªÙ†ÙÙŠØ° Ø¹Ù…Ù„ÙŠØ©\r\n      if (rule.actions.executeAction.enabled) {\r\n        promises.push(this.executeCustomAction(rule, eventData));\r\n      }\r\n\r\n      // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø­Ø¯Ø«\r\n      if (rule.actions.logEvent.enabled) {\r\n        promises.push(this.executeLogAction(rule, eventData));\r\n      }\r\n\r\n      // Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ webhook\r\n      if (rule.actions.webhook.enabled) {\r\n        promises.push(this.executeWebhookAction(rule, eventData));\r\n      }\r\n\r\n      // ØªØ´ØºÙŠÙ„ ÙˆØ¸ÙŠÙØ©\r\n      if (rule.actions.runFunction.enabled) {\r\n        promises.push(this.executeFunctionAction(rule, eventData));\r\n      }\r\n\r\n      // Ø§Ù†ØªØ¸Ø§Ø± Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª\r\n      const results = await Promise.allSettled(promises);\r\n\r\n      // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª\r\n      const succeeded = results.filter(r => r.status === 'fulfilled').length;\r\n      const failed = results.filter(r => r.status === 'rejected').length;\r\n\r\n      rule.stats.succeeded += succeeded;\r\n      rule.stats.failed += failed;\r\n      rule.stats.lastTriggered = new Date();\r\n\r\n      if (failed === 0) {\r\n        rule.stats.lastSucceeded = new Date();\r\n      } else {\r\n        rule.stats.lastFailed = new Date();\r\n      }\r\n\r\n      await rule.save();\r\n\r\n      this.emit('actionsExecuted', {\r\n        ruleId: rule.ruleId,\r\n        succeeded,\r\n        failed,\r\n      });\r\n\r\n    } catch (error) {\r\n      logger.error(`âŒ Ø®Ø·Ø£ ÙÙŠ ØªÙ†ÙÙŠØ° Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ØªÙ†ÙÙŠØ° Ø¥Ø¬Ø±Ø§Ø¡ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±\r\n   */\r\n  async executeNotifyAction(rule, eventData) {\r\n    try {\r\n      // Ù‡Ù†Ø§ ÙŠØªÙ… Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ø§Ù„Ø®Ø¯Ù…Ø© Ø§Ù„Ù…ÙˆØ­Ø¯Ø© Ù„Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª\r\n      logger.info(`ğŸ“¢ ØªÙ†ÙÙŠØ° Ø¥Ø¬Ø±Ø§Ø¡ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø± Ù„Ù„Ù‚Ø§Ø¹Ø¯Ø©: ${rule.ruleId}`);\r\n\r\n      return { status: 'executed' };\r\n    } catch (error) {\r\n      logger.error(`âŒ Ø®Ø·Ø£ ÙÙŠ ØªÙ†ÙÙŠØ° Ø¥Ø¬Ø±Ø§Ø¡ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ØªÙ†ÙÙŠØ° Ø¥Ø¬Ø±Ø§Ø¡ Ù…Ø®ØµØµ\r\n   */\r\n  async executeCustomAction(rule, eventData) {\r\n    try {\r\n      logger.info(`âš™ï¸ ØªÙ†ÙÙŠØ° Ø¥Ø¬Ø±Ø§Ø¡ Ù…Ø®ØµØµ: ${rule.actions.executeAction.actionType}`);\r\n\r\n      return { status: 'executed' };\r\n    } catch (error) {\r\n      logger.error(`âŒ Ø®Ø·Ø£ ÙÙŠ ØªÙ†ÙÙŠØ° Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ø§Ù„Ù…Ø®ØµØµ: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ØªÙ†ÙÙŠØ° Ø¥Ø¬Ø±Ø§Ø¡ Ø§Ù„ØªØ³Ø¬ÙŠÙ„\r\n   */\r\n  async executeLogAction(rule, eventData) {\r\n    try {\r\n      const logLevel = rule.actions.logEvent.logLevel || 'info';\r\n      const message = `Alert Rule [${rule.name}] triggered by event: ${eventData.type}`;\r\n\r\n      logger[logLevel](message);\r\n\r\n      return { status: 'executed' };\r\n    } catch (error) {\r\n      logger.error(`âŒ Ø®Ø·Ø£ ÙÙŠ ØªÙ†ÙÙŠØ° Ø¥Ø¬Ø±Ø§Ø¡ Ø§Ù„ØªØ³Ø¬ÙŠÙ„: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ØªÙ†ÙÙŠØ° Ø¥Ø¬Ø±Ø§Ø¡ webhook\r\n   */\r\n  async executeWebhookAction(rule, eventData) {\r\n    try {\r\n      const axios = require('axios');\r\n\r\n      const payload = rule.actions.webhook.payload || eventData;\r\n\r\n      await axios({\r\n        method: rule.actions.webhook.method,\r\n        url: rule.actions.webhook.url,\r\n        headers: rule.actions.webhook.headers,\r\n        data: payload,\r\n        timeout: 10000,\r\n      });\r\n\r\n      logger.info(`ğŸª ØªÙ… Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ webhook: ${rule.actions.webhook.url}`);\r\n\r\n      return { status: 'executed' };\r\n    } catch (error) {\r\n      logger.error(`âŒ Ø®Ø·Ø£ ÙÙŠ ØªÙ†ÙÙŠØ° webhook: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ØªÙ†ÙÙŠØ° Ø¥Ø¬Ø±Ø§Ø¡ Ø§Ù„Ø¯Ø§Ù„Ø©\r\n   */\r\n  async executeFunctionAction(rule, eventData) {\r\n    try {\r\n      logger.info(`ğŸ“ ØªÙ†ÙÙŠØ° Ø¯Ø§Ù„Ø©: ${rule.actions.runFunction.functionName}`);\r\n\r\n      // Ù‡Ù†Ø§ ÙŠÙ…ÙƒÙ† ØªÙ†ÙÙŠØ° Ø¯Ø§Ù„Ø© Ù…Ø¯ÙŠØ±Ø© Ù…Ù† Ø§Ù„ÙƒÙˆØ¯\r\n      // Ø§Ù„Ø¢Ù† Ù…Ø¬Ø±Ø¯ ØªØ³Ø¬ÙŠÙ„\r\n\r\n      return { status: 'executed' };\r\n    } catch (error) {\r\n      logger.error(`âŒ Ø®Ø·Ø£ ÙÙŠ ØªÙ†ÙÙŠØ° Ø§Ù„Ø¯Ø§Ù„Ø©: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\r\n   * ğŸ› ï¸ Ø§Ù„Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©\r\n   * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\r\n   */\r\n\r\n  /**\r\n   * Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù‚Ø§Ø¹Ø¯Ø©\r\n   */\r\n  validateRuleData(ruleData) {\r\n    if (!ruleData.name) {\r\n      throw new Error('Ø§Ø³Ù… Ø§Ù„Ù‚Ø§Ø¹Ø¯Ø© Ù…Ø·Ù„ÙˆØ¨');\r\n    }\r\n\r\n    if (ruleData.conditions && !ruleData.conditions.eventType) {\r\n      throw new Error('ÙŠØ¬Ø¨ ØªØ­Ø¯ÙŠØ¯ ÙˆØ§Ø­Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„ Ù…Ù† Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø£Ø­Ø¯Ø§Ø«');\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ù†Ø·Ø§Ù‚ Ø§Ù„ÙˆÙ‚Øª\r\n   */\r\n  isWithinTimeRange(timeRange) {\r\n    const now = new Date();\r\n    const currentTime = now.toLocaleTimeString('en-US', {\r\n      hour: '2-digit',\r\n      minute: '2-digit',\r\n      hour12: false,\r\n    });\r\n\r\n    const startTime = timeRange.startTime;\r\n    const endTime = timeRange.endTime;\r\n\r\n    if (startTime <= endTime) {\r\n      return currentTime >= startTime && currentTime <= endTime;\r\n    } else {\r\n      return currentTime >= startTime || currentTime <= endTime;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙŠÙˆÙ… Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹\r\n   */\r\n  isDayAllowed(daysOfWeek) {\r\n    const today = new Date().toLocaleString('en-US', { weekday: 'lowercase' });\r\n    return daysOfWeek.includes(today);\r\n  }\r\n\r\n  /**\r\n   * Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ù‚Ø§Ø¹Ø¯Ø©\r\n   */\r\n  async getRuleStatistics(ruleId) {\r\n    try {\r\n      const rule = await AlertRule.findOne({ ruleId });\r\n      return rule?.stats || {};\r\n    } catch (error) {\r\n      logger.error(`âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Ù…Ø³Ø­ Ø§Ù„Ø°Ø§ÙƒØ±Ø© Ø§Ù„Ù…Ø¤Ù‚ØªØ©\r\n   */\r\n  clearCache() {\r\n    const size = this.cache.size;\r\n    this.cache.clear();\r\n    logger.info(`ğŸ—‘ï¸ ØªÙ… Ù…Ø³Ø­ Ø§Ù„Ø°Ø§ÙƒØ±Ø© Ø§Ù„Ù…Ø¤Ù‚ØªØ© (${size} Ù‚Ø§Ø¹Ø¯Ø©)`);\r\n  }\r\n}\r\n\r\n// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\r\n// ğŸ“¦ Ø§Ù„ØªØµØ¯ÙŠØ±\r\n// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\r\n\r\nmodule.exports = {\r\n  AdvancedAlertRulesEngine,\r\n  AlertRule,\r\n  rulesEngine: new AdvancedAlertRulesEngine(),\r\n};\r\n"],"mappings":"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","ignoreList":[]}