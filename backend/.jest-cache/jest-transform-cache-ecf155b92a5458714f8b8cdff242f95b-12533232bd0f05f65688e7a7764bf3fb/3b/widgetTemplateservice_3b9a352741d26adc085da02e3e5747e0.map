{"version":3,"names":["EventEmitter","require","v4","uuidv4","Logger","WidgetTemplateService","constructor","logger","templates","Map","sharedTemplates","categories","_initializeBuiltInTemplates","builtInTemplates","id","name","category","description","icon","widgets","type","title","config","metric","currency","position","x","y","size","width","height","chartType","period","sortBy","limit","unit","minValue","maxValue","colorScheme","showMilestones","forEach","template","set","info","length","getAllTemplates","filter","Array","from","values","t","search","term","toLowerCase","includes","sort","a","b","localeCompare","error","message","getTemplate","templateId","get","Error","createTemplate","templateData","userId","isPublic","isBuiltIn","metadata","createdAt","Date","updatedAt","usageCount","rating","reviews","emit","updateTemplate","updates","allowedFields","field","deleteTemplate","delete","getByCategory","shareTemplate","userIds","shareId","sharedBy","sharedWith","sharedAt","permissions","getSharedTemplates","share","push","rateTemplate","score","review","timestamp","avgRating","reduce","sum","r","trackUsage","getPopularTemplates","slice","getCategories","map","count","duplicateTemplate","newData","original","duplicated","exportTemplate","getTemplateStats","stats","total","builtIn","custom","byCategory","topRated","mostUsed","module","exports"],"sources":["widgetTemplate.service.js"],"sourcesContent":["/**\r\n * Widget Template Service\r\n * Ø®Ø¯Ù…Ø© Ù‚ÙˆØ§Ù„Ø¨ Ø§Ù„ÙˆÙŠØ¯Ø¬Øª\r\n * \r\n * Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ§Øª:\r\n * - Ø¥Ø¯Ø§Ø±Ø© Ù‚ÙˆØ§Ù„Ø¨ Ø§Ù„ÙˆÙŠØ¯Ø¬Ø· Ø§Ù„Ù…Ø³Ø¨Ù‚Ø©\r\n * - Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ù‚ÙˆØ§Ù„Ø¨ Ù…Ø¹ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ø¢Ø®Ø±ÙŠÙ†\r\n * - Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª ÙˆØ§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù‚ÙˆØ§Ù„Ø¨\r\n * - Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ù‚ÙˆØ§Ù„Ø¨ ÙÙŠ Ø§Ù„ÙˆØ­Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©\r\n */\r\n\r\nconst { EventEmitter } = require('events');\r\nconst { v4: uuidv4 } = require('uuid');\r\nconst Logger = require('../utils/logger');\r\n\r\nclass WidgetTemplateService extends EventEmitter {\r\n  constructor() {\r\n    super();\r\n    this.logger = Logger;\r\n\r\n    // Pre-built templates\r\n    this.templates = new Map();\r\n\r\n    // Shared templates from users\r\n    this.sharedTemplates = new Map();\r\n\r\n    // Template categories\r\n    this.categories = [\r\n      'sales',\r\n      'management',\r\n      'finance',\r\n      'hr',\r\n      'operations',\r\n      'logistics',\r\n      'support',\r\n      'analytics',\r\n      'custom'\r\n    ];\r\n\r\n    // Initialize built-in templates\r\n    this._initializeBuiltInTemplates();\r\n  }\r\n\r\n  /**\r\n   * Initialize built-in templates\r\n   * ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù‚ÙˆØ§Ù„Ø¨ Ø§Ù„Ù…Ø¯Ù…Ø¬Ø©\r\n   * \r\n   * @private\r\n   */\r\n  _initializeBuiltInTemplates() {\r\n    const builtInTemplates = [\r\n      {\r\n        id: 'template-sales-dashboard',\r\n        name: 'Sales Dashboard',\r\n        category: 'sales',\r\n        description: 'Complete sales overview with KPIs',\r\n        icon: 'ðŸ“Š',\r\n        widgets: [\r\n          {\r\n            type: 'KPI',\r\n            title: 'Total Revenue',\r\n            config: { metric: 'revenue', currency: 'USD' },\r\n            position: { x: 0, y: 0 },\r\n            size: { width: 2, height: 1 }\r\n          },\r\n          {\r\n            type: 'CHART',\r\n            title: 'Sales Trend',\r\n            config: { chartType: 'line', period: 'monthly' },\r\n            position: { x: 2, y: 0 },\r\n            size: { width: 3, height: 2 }\r\n          },\r\n          {\r\n            type: 'TABLE',\r\n            title: 'Top Products',\r\n            config: { sortBy: 'revenue', limit: 10 },\r\n            position: { x: 0, y: 1 },\r\n            size: { width: 2, height: 2 }\r\n          }\r\n        ]\r\n      },\r\n      {\r\n        id: 'template-hr-dashboard',\r\n        name: 'HR Dashboard',\r\n        category: 'hr',\r\n        description: 'Employee management and monitoring',\r\n        icon: 'ðŸ‘¥',\r\n        widgets: [\r\n          {\r\n            type: 'KPI',\r\n            title: 'Total Employees',\r\n            config: { metric: 'employeeCount' },\r\n            position: { x: 0, y: 0 },\r\n            size: { width: 1, height: 1 }\r\n          },\r\n          {\r\n            type: 'KPI',\r\n            title: 'Attendance Rate',\r\n            config: { metric: 'attendanceRate', unit: '%' },\r\n            position: { x: 1, y: 0 },\r\n            size: { width: 1, height: 1 }\r\n          },\r\n          {\r\n            type: 'GAUGE',\r\n            title: 'Team Satisfaction',\r\n            config: { minValue: 0, maxValue: 100 },\r\n            position: { x: 2, y: 0 },\r\n            size: { width: 2, height: 2 }\r\n          }\r\n        ]\r\n      },\r\n      {\r\n        id: 'template-finance-dashboard',\r\n        name: 'Finance Dashboard',\r\n        category: 'finance',\r\n        description: 'Financial metrics and reports',\r\n        icon: 'ðŸ’°',\r\n        widgets: [\r\n          {\r\n            type: 'KPI',\r\n            title: 'Total Balance',\r\n            config: { metric: 'balance', currency: 'USD' },\r\n            position: { x: 0, y: 0 },\r\n            size: { width: 2, height: 1 }\r\n          },\r\n          {\r\n            type: 'CHART',\r\n            title: 'Cash Flow',\r\n            config: { chartType: 'bar', period: 'monthly' },\r\n            position: { x: 2, y: 0 },\r\n            size: { width: 3, height: 2 }\r\n          },\r\n          {\r\n            type: 'HEATMAP',\r\n            title: 'Expense Distribution',\r\n            config: { colorScheme: 'viridis' },\r\n            position: { x: 0, y: 1 },\r\n            size: { width: 2, height: 2 }\r\n          }\r\n        ]\r\n      },\r\n      {\r\n        id: 'template-operations-dashboard',\r\n        name: 'Operations Dashboard',\r\n        category: 'operations',\r\n        description: 'Operational metrics and monitoring',\r\n        icon: 'âš™ï¸',\r\n        widgets: [\r\n          {\r\n            type: 'KPI',\r\n            title: 'Active Tasks',\r\n            config: { metric: 'activeTasks' },\r\n            position: { x: 0, y: 0 },\r\n            size: { width: 1, height: 1 }\r\n          },\r\n          {\r\n            type: 'TIMELINE',\r\n            title: 'Project Timeline',\r\n            config: { showMilestones: true },\r\n            position: { x: 1, y: 0 },\r\n            size: { width: 3, height: 2 }\r\n          }\r\n        ]\r\n      }\r\n    ];\r\n\r\n    builtInTemplates.forEach(template => {\r\n      this.templates.set(template.id, template);\r\n    });\r\n\r\n    this.logger.info(`Initialized ${builtInTemplates.length} built-in templates`);\r\n  }\r\n\r\n  /**\r\n   * Get all templates\r\n   * Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù‚ÙˆØ§Ù„Ø¨\r\n   * \r\n   * @param {Object} filter - Filter options\r\n   * @returns {Array} Templates\r\n   */\r\n  getAllTemplates(filter = {}) {\r\n    try {\r\n      let templates = Array.from(this.templates.values());\r\n\r\n      // Filter by category\r\n      if (filter.category) {\r\n        templates = templates.filter(t => t.category === filter.category);\r\n      }\r\n\r\n      // Filter by search term\r\n      if (filter.search) {\r\n        const term = filter.search.toLowerCase();\r\n        templates = templates.filter(t =>\r\n          t.name.toLowerCase().includes(term) ||\r\n          t.description.toLowerCase().includes(term)\r\n        );\r\n      }\r\n\r\n      // Sort by name\r\n      templates.sort((a, b) => a.name.localeCompare(b.name));\r\n\r\n      return templates;\r\n    } catch (error) {\r\n      this.logger.error(`Error getting all templates: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get template by ID\r\n   * Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù‚Ø§Ù„Ø¨ Ø¨Ù€ ID\r\n   * \r\n   * @param {String} templateId - Template ID\r\n   * @returns {Object} Template\r\n   */\r\n  getTemplate(templateId) {\r\n    try {\r\n      const template = this.templates.get(templateId);\r\n      if (!template) {\r\n        throw new Error(`Template not found: ${templateId}`);\r\n      }\r\n      return template;\r\n    } catch (error) {\r\n      this.logger.error(`Error getting template: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Create custom template\r\n   * Ø¥Ù†Ø´Ø§Ø¡ Ù‚Ø§Ù„Ø¨ Ù…Ø®ØµØµ\r\n   * \r\n   * @param {Object} templateData - Template data\r\n   * @returns {Object} Created template\r\n   */\r\n  createTemplate(templateData) {\r\n    try {\r\n      const {\r\n        userId,\r\n        name,\r\n        category,\r\n        description,\r\n        icon,\r\n        widgets,\r\n        isPublic = false\r\n      } = templateData;\r\n\r\n      // Validate required fields\r\n      if (!name) throw new Error('Template name is required');\r\n      if (!category || !this.categories.includes(category)) {\r\n        throw new Error(`Invalid category: ${category}`);\r\n      }\r\n\r\n      const templateId = `template-${uuidv4()}`;\r\n\r\n      const template = {\r\n        id: templateId,\r\n        userId,\r\n        name,\r\n        category,\r\n        description: description || '',\r\n        icon: icon || 'ðŸ“¦',\r\n        widgets: widgets || [],\r\n        isPublic,\r\n        isBuiltIn: false,\r\n        metadata: {\r\n          createdAt: new Date(),\r\n          updatedAt: new Date(),\r\n          usageCount: 0,\r\n          rating: 0,\r\n          reviews: []\r\n        }\r\n      };\r\n\r\n      this.templates.set(templateId, template);\r\n      this.emit('template:created', { templateId, template });\r\n\r\n      this.logger.info(`Template created: ${templateId}`);\r\n      return template;\r\n    } catch (error) {\r\n      this.logger.error(`Error creating template: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Update template\r\n   * ØªØ­Ø¯ÙŠØ« Ù‚Ø§Ù„Ø¨\r\n   * \r\n   * @param {String} templateId - Template ID\r\n   * @param {Object} updates - Update data\r\n   * @returns {Object} Updated template\r\n   */\r\n  updateTemplate(templateId, updates) {\r\n    try {\r\n      const template = this.templates.get(templateId);\r\n      if (!template) {\r\n        throw new Error(`Template not found: ${templateId}`);\r\n      }\r\n\r\n      if (template.isBuiltIn) {\r\n        throw new Error('Cannot modify built-in templates');\r\n      }\r\n\r\n      const allowedFields = ['name', 'category', 'description', 'icon', 'widgets', 'isPublic'];\r\n\r\n      allowedFields.forEach(field => {\r\n        if (field in updates) {\r\n          template[field] = updates[field];\r\n        }\r\n      });\r\n\r\n      template.metadata.updatedAt = new Date();\r\n\r\n      this.emit('template:updated', { templateId, updates });\r\n      this.logger.info(`Template updated: ${templateId}`);\r\n      return template;\r\n    } catch (error) {\r\n      this.logger.error(`Error updating template: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Delete template\r\n   * Ø­Ø°Ù Ù‚Ø§Ù„Ø¨\r\n   * \r\n   * @param {String} templateId - Template ID\r\n   */\r\n  deleteTemplate(templateId) {\r\n    try {\r\n      const template = this.templates.get(templateId);\r\n      if (!template) {\r\n        throw new Error(`Template not found: ${templateId}`);\r\n      }\r\n\r\n      if (template.isBuiltIn) {\r\n        throw new Error('Cannot delete built-in templates');\r\n      }\r\n\r\n      this.templates.delete(templateId);\r\n      this.emit('template:deleted', { templateId });\r\n\r\n      this.logger.info(`Template deleted: ${templateId}`);\r\n    } catch (error) {\r\n      this.logger.error(`Error deleting template: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get templates by category\r\n   * Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù‚ÙˆØ§Ù„Ø¨ Ø­Ø³Ø¨ Ø§Ù„ÙØ¦Ø©\r\n   * \r\n   * @param {String} category - Category name\r\n   * @returns {Array} Templates\r\n   */\r\n  getByCategory(category) {\r\n    try {\r\n      if (!this.categories.includes(category)) {\r\n        throw new Error(`Invalid category: ${category}`);\r\n      }\r\n\r\n      const templates = Array.from(this.templates.values()).filter(\r\n        t => t.category === category\r\n      );\r\n\r\n      return templates.sort((a, b) => \r\n        (b.metadata.usageCount || 0) - (a.metadata.usageCount || 0)\r\n      );\r\n    } catch (error) {\r\n      this.logger.error(`Error getting templates by category: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Share template\r\n   * Ù…Ø´Ø§Ø±ÙƒØ© Ù‚Ø§Ù„Ø¨\r\n   * \r\n   * @param {String} templateId - Template ID\r\n   * @param {Array} userIds - User IDs to share with\r\n   */\r\n  shareTemplate(templateId, userIds) {\r\n    try {\r\n      const template = this.templates.get(templateId);\r\n      if (!template) {\r\n        throw new Error(`Template not found: ${templateId}`);\r\n      }\r\n\r\n      const shareId = uuidv4();\r\n\r\n      this.sharedTemplates.set(shareId, {\r\n        id: shareId,\r\n        templateId,\r\n        sharedBy: template.userId,\r\n        sharedWith: userIds,\r\n        sharedAt: new Date(),\r\n        permissions: ['view', 'duplicate']\r\n      });\r\n\r\n      this.emit('template:shared', { templateId, userIds, shareId });\r\n      this.logger.info(`Template shared: ${templateId} with ${userIds.length} users`);\r\n\r\n      return shareId;\r\n    } catch (error) {\r\n      this.logger.error(`Error sharing template: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get shared templates for user\r\n   * Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù‚ÙˆØ§Ù„Ø¨ Ø§Ù„Ù…Ø´ØªØ±ÙƒØ© Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…\r\n   * \r\n   * @param {String} userId - User ID\r\n   * @returns {Array} Shared templates\r\n   */\r\n  getSharedTemplates(userId) {\r\n    try {\r\n      const sharedTemplates = [];\r\n\r\n      this.sharedTemplates.forEach(share => {\r\n        if (share.sharedWith.includes(userId)) {\r\n          const template = this.templates.get(share.templateId);\r\n          if (template) {\r\n            sharedTemplates.push({\r\n              ...template,\r\n              sharedBy: share.sharedBy,\r\n              sharedAt: share.sharedAt\r\n            });\r\n          }\r\n        }\r\n      });\r\n\r\n      return sharedTemplates;\r\n    } catch (error) {\r\n      this.logger.error(`Error getting shared templates: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Rate template\r\n   * ØªÙ‚ÙŠÙŠÙ… Ù‚Ø§Ù„Ø¨\r\n   * \r\n   * @param {String} templateId - Template ID\r\n   * @param {Object} rating - Rating { score, review, userId }\r\n   */\r\n  rateTemplate(templateId, rating) {\r\n    try {\r\n      const template = this.templates.get(templateId);\r\n      if (!template) {\r\n        throw new Error(`Template not found: ${templateId}`);\r\n      }\r\n\r\n      const { score, review, userId } = rating;\r\n\r\n      if (score < 1 || score > 5) {\r\n        throw new Error('Rating score must be between 1-5');\r\n      }\r\n\r\n      template.metadata.reviews.push({\r\n        userId,\r\n        score,\r\n        review: review || '',\r\n        timestamp: new Date()\r\n      });\r\n\r\n      // Calculate average rating\r\n      const avgRating = template.metadata.reviews.reduce((sum, r) => sum + r.score, 0) /\r\n        template.metadata.reviews.length;\r\n      template.metadata.rating = avgRating;\r\n\r\n      this.emit('template:rated', { templateId, score, avgRating });\r\n      this.logger.info(`Template rated: ${templateId} with score ${score}`);\r\n    } catch (error) {\r\n      this.logger.error(`Error rating template: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Track template usage\r\n   * ØªØªØ¨Ø¹ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù‚Ø§Ù„Ø¨\r\n   * \r\n   * @param {String} templateId - Template ID\r\n   */\r\n  trackUsage(templateId) {\r\n    try {\r\n      const template = this.templates.get(templateId);\r\n      if (!template) return;\r\n\r\n      template.metadata.usageCount = (template.metadata.usageCount || 0) + 1;\r\n      this.emit('template:used', { templateId });\r\n    } catch (error) {\r\n      this.logger.error(`Error tracking template usage: ${error.message}`);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get popular templates\r\n   * Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù‚ÙˆØ§Ù„Ø¨ Ø§Ù„Ø´Ù‡ÙŠØ±Ø©\r\n   * \r\n   * @param {Number} limit - Result limit\r\n   * @returns {Array} Popular templates\r\n   */\r\n  getPopularTemplates(limit = 10) {\r\n    try {\r\n      const templates = Array.from(this.templates.values())\r\n        .sort((a, b) => (b.metadata.usageCount || 0) - (a.metadata.usageCount || 0))\r\n        .slice(0, limit);\r\n\r\n      return templates;\r\n    } catch (error) {\r\n      this.logger.error(`Error getting popular templates: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get categories list\r\n   * Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ÙØ¦Ø§Øª\r\n   * \r\n   * @returns {Array} Categories\r\n   */\r\n  getCategories() {\r\n    try {\r\n      return this.categories.map(category => {\r\n        const count = Array.from(this.templates.values()).filter(\r\n          t => t.category === category\r\n        ).length;\r\n\r\n        return { name: category, count };\r\n      });\r\n    } catch (error) {\r\n      this.logger.error(`Error getting categories: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Duplicate template\r\n   * Ù†Ø³Ø® Ù‚Ø§Ù„Ø¨\r\n   * \r\n   * @param {String} templateId - Template ID to duplicate\r\n   * @param {Object} newData - New template data\r\n   * @returns {Object} New template\r\n   */\r\n  duplicateTemplate(templateId, newData = {}) {\r\n    try {\r\n      const original = this.templates.get(templateId);\r\n      if (!original) {\r\n        throw new Error(`Template not found: ${templateId}`);\r\n      }\r\n\r\n      const duplicated = {\r\n        id: `template-${uuidv4()}`,\r\n        ...original,\r\n        name: newData.name || `${original.name} (Copy)`,\r\n        isBuiltIn: false,\r\n        metadata: {\r\n          ...original.metadata,\r\n          createdAt: new Date(),\r\n          updatedAt: new Date(),\r\n          usageCount: 0,\r\n          rating: 0,\r\n          reviews: []\r\n        }\r\n      };\r\n\r\n      this.templates.set(duplicated.id, duplicated);\r\n      this.emit('template:duplicated', { original: templateId, duplicated: duplicated.id });\r\n\r\n      return duplicated;\r\n    } catch (error) {\r\n      this.logger.error(`Error duplicating template: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Export template\r\n   * ØªØµØ¯ÙŠØ± Ù‚Ø§Ù„Ø¨\r\n   * \r\n   * @param {String} templateId - Template ID\r\n   * @returns {Object} Exportable template\r\n   */\r\n  exportTemplate(templateId) {\r\n    try {\r\n      const template = this.templates.get(templateId);\r\n      if (!template) {\r\n        throw new Error(`Template not found: ${templateId}`);\r\n      }\r\n\r\n      return {\r\n        name: template.name,\r\n        category: template.category,\r\n        description: template.description,\r\n        icon: template.icon,\r\n        widgets: template.widgets\r\n      };\r\n    } catch (error) {\r\n      this.logger.error(`Error exporting template: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get template stats\r\n   * Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù‚Ø§Ù„Ø¨\r\n   * \r\n   * @returns {Object} Statistics\r\n   */\r\n  getTemplateStats() {\r\n    try {\r\n      const templates = Array.from(this.templates.values());\r\n      const stats = {\r\n        total: templates.length,\r\n        builtIn: templates.filter(t => t.isBuiltIn).length,\r\n        custom: templates.filter(t => !t.isBuiltIn).length,\r\n        byCategory: {},\r\n        topRated: [],\r\n        mostUsed: []\r\n      };\r\n\r\n      // By category\r\n      this.categories.forEach(category => {\r\n        stats.byCategory[category] = templates.filter(t => t.category === category).length;\r\n      });\r\n\r\n      // Top rated\r\n      stats.topRated = templates\r\n        .filter(t => t.metadata.rating > 0)\r\n        .sort((a, b) => (b.metadata.rating || 0) - (a.metadata.rating || 0))\r\n        .slice(0, 5)\r\n        .map(t => ({ id: t.id, name: t.name, rating: t.metadata.rating }));\r\n\r\n      // Most used\r\n      stats.mostUsed = templates\r\n        .sort((a, b) => (b.metadata.usageCount || 0) - (a.metadata.usageCount || 0))\r\n        .slice(0, 5)\r\n        .map(t => ({ id: t.id, name: t.name, usageCount: t.metadata.usageCount }));\r\n\r\n      return stats;\r\n    } catch (error) {\r\n      this.logger.error(`Error getting template stats: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n}\r\n\r\nmodule.exports = new WidgetTemplateService();\r\n"],"mappings":"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","ignoreList":[]}