b922d5c075079b1f725ae739710eb697
/**
 * Leave Model (HR)
 * Modular, extensible leave record for HR system
 */
const mongoose = require('mongoose');
const LeaveSchema = new mongoose.Schema({
  employeeId: {
    type: mongoose.Schema.Types.ObjectId,
    ref: 'Employee',
    required: true,
    index: true
  },
  leaveType: {
    type: String,
    enum: ['إجازة سنوية', 'إجازة مرضية', 'إجازة بدون راتب', 'إجازة أمومة', 'إجازة أبوة', 'إجازة استثنائية'],
    required: true
  },
  startDate: {
    type: Date,
    required: true
  },
  endDate: {
    type: Date,
    required: true
  },
  duration: {
    type: Number,
    required: true
  },
  reason: String,
  status: {
    type: String,
    enum: ['مرسل', 'قيد المراجعة', 'موافق عليه', 'مرفوض'],
    default: 'مرسل',
    index: true
  },
  approvedBy: mongoose.Schema.Types.ObjectId,
  approvalDate: Date,
  rejectionReason: String,
  isPaidLeave: {
    type: Boolean,
    default: true
  },
  leaveBalance: {
    used: Number,
    remaining: Number
  },
  documents: [String],
  attachments: [String],
  createdAt: {
    type: Date,
    default: Date.now
  },
  updatedAt: Date
});
LeaveSchema.index({
  employeeId: 1,
  startDate: -1
});
LeaveSchema.index({
  status: 1,
  startDate: -1
});
module.exports = mongoose.model('Leave', LeaveSchema);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJMZWF2ZVNjaGVtYSIsIlNjaGVtYSIsImVtcGxveWVlSWQiLCJ0eXBlIiwiVHlwZXMiLCJPYmplY3RJZCIsInJlZiIsInJlcXVpcmVkIiwiaW5kZXgiLCJsZWF2ZVR5cGUiLCJTdHJpbmciLCJlbnVtIiwic3RhcnREYXRlIiwiRGF0ZSIsImVuZERhdGUiLCJkdXJhdGlvbiIsIk51bWJlciIsInJlYXNvbiIsInN0YXR1cyIsImRlZmF1bHQiLCJhcHByb3ZlZEJ5IiwiYXBwcm92YWxEYXRlIiwicmVqZWN0aW9uUmVhc29uIiwiaXNQYWlkTGVhdmUiLCJCb29sZWFuIiwibGVhdmVCYWxhbmNlIiwidXNlZCIsInJlbWFpbmluZyIsImRvY3VtZW50cyIsImF0dGFjaG1lbnRzIiwiY3JlYXRlZEF0Iiwibm93IiwidXBkYXRlZEF0IiwibW9kdWxlIiwiZXhwb3J0cyIsIm1vZGVsIl0sInNvdXJjZXMiOlsiTGVhdmUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIExlYXZlIE1vZGVsIChIUilcclxuICogTW9kdWxhciwgZXh0ZW5zaWJsZSBsZWF2ZSByZWNvcmQgZm9yIEhSIHN5c3RlbVxyXG4gKi9cclxuY29uc3QgbW9uZ29vc2UgPSByZXF1aXJlKCdtb25nb29zZScpO1xyXG5cclxuY29uc3QgTGVhdmVTY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hKHtcclxuICBlbXBsb3llZUlkOiB7XHJcbiAgICB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsXHJcbiAgICByZWY6ICdFbXBsb3llZScsXHJcbiAgICByZXF1aXJlZDogdHJ1ZSxcclxuICAgIGluZGV4OiB0cnVlLFxyXG4gIH0sXHJcbiAgbGVhdmVUeXBlOiB7XHJcbiAgICB0eXBlOiBTdHJpbmcsXHJcbiAgICBlbnVtOiBbXHJcbiAgICAgICfYpdis2KfYstipINiz2YbZiNmK2KknLFxyXG4gICAgICAn2KXYrNin2LLYqSDZhdix2LbZitipJyxcclxuICAgICAgJ9il2KzYp9iy2Kkg2KjYr9mI2YYg2LHYp9iq2KgnLFxyXG4gICAgICAn2KXYrNin2LLYqSDYo9mF2YjZhdipJyxcclxuICAgICAgJ9il2KzYp9iy2Kkg2KPYqNmI2KknLFxyXG4gICAgICAn2KXYrNin2LLYqSDYp9iz2KrYq9mG2KfYptmK2KknLFxyXG4gICAgXSxcclxuICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gIH0sXHJcbiAgc3RhcnREYXRlOiB7IHR5cGU6IERhdGUsIHJlcXVpcmVkOiB0cnVlIH0sXHJcbiAgZW5kRGF0ZTogeyB0eXBlOiBEYXRlLCByZXF1aXJlZDogdHJ1ZSB9LFxyXG4gIGR1cmF0aW9uOiB7IHR5cGU6IE51bWJlciwgcmVxdWlyZWQ6IHRydWUgfSxcclxuICByZWFzb246IFN0cmluZyxcclxuICBzdGF0dXM6IHtcclxuICAgIHR5cGU6IFN0cmluZyxcclxuICAgIGVudW06IFsn2YXYsdiz2YQnLCAn2YLZitivINin2YTZhdix2KfYrNi52KknLCAn2YXZiNin2YHZgiDYudmE2YrZhycsICfZhdix2YHZiNi2J10sXHJcbiAgICBkZWZhdWx0OiAn2YXYsdiz2YQnLFxyXG4gICAgaW5kZXg6IHRydWUsXHJcbiAgfSxcclxuICBhcHByb3ZlZEJ5OiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsXHJcbiAgYXBwcm92YWxEYXRlOiBEYXRlLFxyXG4gIHJlamVjdGlvblJlYXNvbjogU3RyaW5nLFxyXG4gIGlzUGFpZExlYXZlOiB7IHR5cGU6IEJvb2xlYW4sIGRlZmF1bHQ6IHRydWUgfSxcclxuICBsZWF2ZUJhbGFuY2U6IHtcclxuICAgIHVzZWQ6IE51bWJlcixcclxuICAgIHJlbWFpbmluZzogTnVtYmVyLFxyXG4gIH0sXHJcbiAgZG9jdW1lbnRzOiBbU3RyaW5nXSxcclxuICBhdHRhY2htZW50czogW1N0cmluZ10sXHJcbiAgY3JlYXRlZEF0OiB7IHR5cGU6IERhdGUsIGRlZmF1bHQ6IERhdGUubm93IH0sXHJcbiAgdXBkYXRlZEF0OiBEYXRlLFxyXG59KTtcclxuXHJcbkxlYXZlU2NoZW1hLmluZGV4KHsgZW1wbG95ZWVJZDogMSwgc3RhcnREYXRlOiAtMSB9KTtcclxuTGVhdmVTY2hlbWEuaW5kZXgoeyBzdGF0dXM6IDEsIHN0YXJ0RGF0ZTogLTEgfSk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IG1vbmdvb3NlLm1vZGVsKCdMZWF2ZScsIExlYXZlU2NoZW1hKTtcclxuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU1BLFFBQVEsR0FBR0MsT0FBTyxDQUFDLFVBQVUsQ0FBQztBQUVwQyxNQUFNQyxXQUFXLEdBQUcsSUFBSUYsUUFBUSxDQUFDRyxNQUFNLENBQUM7RUFDdENDLFVBQVUsRUFBRTtJQUNWQyxJQUFJLEVBQUVMLFFBQVEsQ0FBQ0csTUFBTSxDQUFDRyxLQUFLLENBQUNDLFFBQVE7SUFDcENDLEdBQUcsRUFBRSxVQUFVO0lBQ2ZDLFFBQVEsRUFBRSxJQUFJO0lBQ2RDLEtBQUssRUFBRTtFQUNULENBQUM7RUFDREMsU0FBUyxFQUFFO0lBQ1ROLElBQUksRUFBRU8sTUFBTTtJQUNaQyxJQUFJLEVBQUUsQ0FDSixhQUFhLEVBQ2IsYUFBYSxFQUNiLGlCQUFpQixFQUNqQixhQUFhLEVBQ2IsWUFBWSxFQUNaLGlCQUFpQixDQUNsQjtJQUNESixRQUFRLEVBQUU7RUFDWixDQUFDO0VBQ0RLLFNBQVMsRUFBRTtJQUFFVCxJQUFJLEVBQUVVLElBQUk7SUFBRU4sUUFBUSxFQUFFO0VBQUssQ0FBQztFQUN6Q08sT0FBTyxFQUFFO0lBQUVYLElBQUksRUFBRVUsSUFBSTtJQUFFTixRQUFRLEVBQUU7RUFBSyxDQUFDO0VBQ3ZDUSxRQUFRLEVBQUU7SUFBRVosSUFBSSxFQUFFYSxNQUFNO0lBQUVULFFBQVEsRUFBRTtFQUFLLENBQUM7RUFDMUNVLE1BQU0sRUFBRVAsTUFBTTtFQUNkUSxNQUFNLEVBQUU7SUFDTmYsSUFBSSxFQUFFTyxNQUFNO0lBQ1pDLElBQUksRUFBRSxDQUFDLE1BQU0sRUFBRSxjQUFjLEVBQUUsWUFBWSxFQUFFLE9BQU8sQ0FBQztJQUNyRFEsT0FBTyxFQUFFLE1BQU07SUFDZlgsS0FBSyxFQUFFO0VBQ1QsQ0FBQztFQUNEWSxVQUFVLEVBQUV0QixRQUFRLENBQUNHLE1BQU0sQ0FBQ0csS0FBSyxDQUFDQyxRQUFRO0VBQzFDZ0IsWUFBWSxFQUFFUixJQUFJO0VBQ2xCUyxlQUFlLEVBQUVaLE1BQU07RUFDdkJhLFdBQVcsRUFBRTtJQUFFcEIsSUFBSSxFQUFFcUIsT0FBTztJQUFFTCxPQUFPLEVBQUU7RUFBSyxDQUFDO0VBQzdDTSxZQUFZLEVBQUU7SUFDWkMsSUFBSSxFQUFFVixNQUFNO0lBQ1pXLFNBQVMsRUFBRVg7RUFDYixDQUFDO0VBQ0RZLFNBQVMsRUFBRSxDQUFDbEIsTUFBTSxDQUFDO0VBQ25CbUIsV0FBVyxFQUFFLENBQUNuQixNQUFNLENBQUM7RUFDckJvQixTQUFTLEVBQUU7SUFBRTNCLElBQUksRUFBRVUsSUFBSTtJQUFFTSxPQUFPLEVBQUVOLElBQUksQ0FBQ2tCO0VBQUksQ0FBQztFQUM1Q0MsU0FBUyxFQUFFbkI7QUFDYixDQUFDLENBQUM7QUFFRmIsV0FBVyxDQUFDUSxLQUFLLENBQUM7RUFBRU4sVUFBVSxFQUFFLENBQUM7RUFBRVUsU0FBUyxFQUFFLENBQUM7QUFBRSxDQUFDLENBQUM7QUFDbkRaLFdBQVcsQ0FBQ1EsS0FBSyxDQUFDO0VBQUVVLE1BQU0sRUFBRSxDQUFDO0VBQUVOLFNBQVMsRUFBRSxDQUFDO0FBQUUsQ0FBQyxDQUFDO0FBRS9DcUIsTUFBTSxDQUFDQyxPQUFPLEdBQUdwQyxRQUFRLENBQUNxQyxLQUFLLENBQUMsT0FBTyxFQUFFbkMsV0FBVyxDQUFDIiwiaWdub3JlTGlzdCI6W119