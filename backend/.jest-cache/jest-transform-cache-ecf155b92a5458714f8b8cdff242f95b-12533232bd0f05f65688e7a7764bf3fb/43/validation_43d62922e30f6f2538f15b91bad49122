aa7b3ff1d09e415f1e77b1e36150027c
/**
 * =====================================================
 * ADVANCED VALIDATION MIDDLEWARE - Phase 6
 * =====================================================
 * Comprehensive input validation for all endpoints
 */

// ==================== VALIDATORS ====================

/**
 * Email validation
 */
const isEmail = value => {
  const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
  return emailRegex.test(value || '');
};

/**
 * Password strength validation
 */
const isStrongPassword = password => {
  const passwordRegex = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/;
  return passwordRegex.test(password);
};

/**
 * Phone number validation
 */
const isPhoneNumber = phone => {
  const phoneRegex = /^[\d\s\-\+\(\)]+$/;
  return phoneRegex.test(phone) && phone.replace(/\D/g, '').length >= 10;
};

/**
 * URL validation
 */
const isValidUrl = url => {
  try {
    return Boolean(new URL(url));
  } catch (_e) {
    return false;
  }
};

/**
 * ID validation (MongoDB ObjectId)
 */
const isValidObjectId = id => {
  return /^[0-9a-f]{24}$/.test(id);
};

// ==================== SANITIZERS ====================

/**
 * Sanitize string input
 */
const sanitizeString = str => {
  if (!str) return '';
  return String(str).trim().replace(/[<>\"'&]/g, char => {
    const escape = {
      '<': '&lt;',
      '>': '&gt;',
      '"': '&quot;',
      "'": '&#x27;',
      '&': '&amp;'
    };
    return escape[char];
  });
};

/**
 * Sanitize email
 */
const sanitizeEmail = email => {
  return String(email || '').toLowerCase().trim();
};

/**
 * Sanitize request body
 */
const sanitizeBody = obj => {
  const sanitized = {};
  for (const [key, value] of Object.entries(obj)) {
    if (typeof value === 'string') {
      sanitized[key] = sanitizeString(value);
    } else if (typeof value === 'object' && value !== null) {
      sanitized[key] = sanitizeBody(value);
    } else {
      sanitized[key] = value;
    }
  }
  return sanitized;
};

// ==================== VALIDATION MIDDLEWARE ====================

/**
 * Registration validation
 */
const validateRegistration = (req, res, next) => {
  try {
    const {
      name,
      email,
      password,
      confirmPassword
    } = req.body || {};

    // Required fields
    if (!name || !email || !password) {
      return res.status(400).json({
        success: false,
        error: 'name, email, and password are required',
        errors: {
          name: !name ? 'Name is required' : undefined,
          email: !email ? 'Email is required' : undefined,
          password: !password ? 'Password is required' : undefined
        }
      });
    }

    // Email validation
    if (!isEmail(email)) {
      return res.status(400).json({
        success: false,
        error: 'Invalid email format',
        errors: {
          email: 'Please provide a valid email address'
        }
      });
    }

    // Password length
    if (String(password).length < 8) {
      return res.status(400).json({
        success: false,
        error: 'Password must be at least 8 characters',
        errors: {
          password: 'Password must have at least 8 characters'
        }
      });
    }

    // Confirm password
    if (confirmPassword && password !== confirmPassword) {
      return res.status(400).json({
        success: false,
        error: 'Passwords do not match',
        errors: {
          confirmPassword: 'Passwords must match'
        }
      });
    }

    // Sanitize inputs
    req.body.name = sanitizeString(name);
    req.body.email = sanitizeEmail(email);
    next();
  } catch (error) {
    res.status(500).json({
      success: false,
      error: 'Validation error',
      message: error.message
    });
  }
};

/**
 * Login validation
 */
const validateLogin = (req, res, next) => {
  try {
    const {
      email,
      password
    } = req.body || {};
    if (!email || !password) {
      return res.status(400).json({
        success: false,
        error: 'email and password are required',
        errors: {
          email: !email ? 'Email is required' : undefined,
          password: !password ? 'Password is required' : undefined
        }
      });
    }
    if (!isEmail(email)) {
      return res.status(400).json({
        success: false,
        error: 'Invalid email format',
        errors: {
          email: 'Please provide a valid email address'
        }
      });
    }

    // Sanitize
    req.body.email = sanitizeEmail(email);
    next();
  } catch (error) {
    res.status(500).json({
      success: false,
      error: 'Validation error',
      message: error.message
    });
  }
};

/**
 * Create user validation
 */
const validateCreateUser = (req, res, next) => {
  try {
    const {
      name,
      email,
      role,
      department
    } = req.body || {};
    if (!name || !email || !role) {
      return res.status(400).json({
        success: false,
        error: 'name, email, and role are required'
      });
    }
    if (!isEmail(email)) {
      return res.status(400).json({
        success: false,
        error: 'Invalid email format'
      });
    }
    const validRoles = ['admin', 'manager', 'employee', 'viewer'];
    if (!validRoles.includes(role)) {
      return res.status(400).json({
        success: false,
        error: `Invalid role. Must be one of: ${validRoles.join(', ')}`
      });
    }

    // Sanitize
    req.body.name = sanitizeString(name);
    req.body.email = sanitizeEmail(email);
    if (department) req.body.department = sanitizeString(department);
    next();
  } catch (error) {
    res.status(500).json({
      success: false,
      error: 'Validation error',
      message: error.message
    });
  }
};

/**
 * Validate ID parameter
 */
const validateId = (req, res, next) => {
  const {
    id
  } = req.params;
  if (!id) {
    return res.status(400).json({
      success: false,
      error: 'ID parameter is required'
    });
  }
  if (!isValidObjectId(id)) {
    return res.status(400).json({
      success: false,
      error: 'Invalid ID format'
    });
  }
  next();
};

/**
 * Validate pagination
 */
const validatePagination = (req, res, next) => {
  const {
    page = 1,
    limit = 10
  } = req.query;
  const pageNum = parseInt(page);
  const limitNum = parseInt(limit);
  if (isNaN(pageNum) || pageNum < 1) {
    return res.status(400).json({
      success: false,
      error: 'Invalid page number'
    });
  }
  if (isNaN(limitNum) || limitNum < 1 || limitNum > 100) {
    return res.status(400).json({
      success: false,
      error: 'Invalid limit. Must be between 1 and 100'
    });
  }
  req.pagination = {
    page: pageNum,
    limit: limitNum,
    skip: (pageNum - 1) * limitNum
  };
  next();
};
module.exports = {
  // Validators
  isEmail,
  isStrongPassword,
  isPhoneNumber,
  isValidUrl,
  isValidObjectId,
  // Sanitizers
  sanitizeString,
  sanitizeEmail,
  sanitizeBody,
  // Middleware
  validateRegistration,
  validateLogin,
  validateCreateUser,
  validateId,
  validatePagination
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJpc0VtYWlsIiwidmFsdWUiLCJlbWFpbFJlZ2V4IiwidGVzdCIsImlzU3Ryb25nUGFzc3dvcmQiLCJwYXNzd29yZCIsInBhc3N3b3JkUmVnZXgiLCJpc1Bob25lTnVtYmVyIiwicGhvbmUiLCJwaG9uZVJlZ2V4IiwicmVwbGFjZSIsImxlbmd0aCIsImlzVmFsaWRVcmwiLCJ1cmwiLCJCb29sZWFuIiwiVVJMIiwiX2UiLCJpc1ZhbGlkT2JqZWN0SWQiLCJpZCIsInNhbml0aXplU3RyaW5nIiwic3RyIiwiU3RyaW5nIiwidHJpbSIsImNoYXIiLCJlc2NhcGUiLCJzYW5pdGl6ZUVtYWlsIiwiZW1haWwiLCJ0b0xvd2VyQ2FzZSIsInNhbml0aXplQm9keSIsIm9iaiIsInNhbml0aXplZCIsImtleSIsIk9iamVjdCIsImVudHJpZXMiLCJ2YWxpZGF0ZVJlZ2lzdHJhdGlvbiIsInJlcSIsInJlcyIsIm5leHQiLCJuYW1lIiwiY29uZmlybVBhc3N3b3JkIiwiYm9keSIsInN0YXR1cyIsImpzb24iLCJzdWNjZXNzIiwiZXJyb3IiLCJlcnJvcnMiLCJ1bmRlZmluZWQiLCJtZXNzYWdlIiwidmFsaWRhdGVMb2dpbiIsInZhbGlkYXRlQ3JlYXRlVXNlciIsInJvbGUiLCJkZXBhcnRtZW50IiwidmFsaWRSb2xlcyIsImluY2x1ZGVzIiwiam9pbiIsInZhbGlkYXRlSWQiLCJwYXJhbXMiLCJ2YWxpZGF0ZVBhZ2luYXRpb24iLCJwYWdlIiwibGltaXQiLCJxdWVyeSIsInBhZ2VOdW0iLCJwYXJzZUludCIsImxpbWl0TnVtIiwiaXNOYU4iLCJwYWdpbmF0aW9uIiwic2tpcCIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlcyI6WyJ2YWxpZGF0aW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gKiBBRFZBTkNFRCBWQUxJREFUSU9OIE1JRERMRVdBUkUgLSBQaGFzZSA2XHJcbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAqIENvbXByZWhlbnNpdmUgaW5wdXQgdmFsaWRhdGlvbiBmb3IgYWxsIGVuZHBvaW50c1xyXG4gKi9cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09IFZBTElEQVRPUlMgPT09PT09PT09PT09PT09PT09PT1cclxuXHJcbi8qKlxyXG4gKiBFbWFpbCB2YWxpZGF0aW9uXHJcbiAqL1xyXG5jb25zdCBpc0VtYWlsID0gKHZhbHVlKSA9PiB7XHJcbiAgY29uc3QgZW1haWxSZWdleCA9IC9eW15cXHNAXStAW15cXHNAXStcXC5bXlxcc0BdKyQvO1xyXG4gIHJldHVybiBlbWFpbFJlZ2V4LnRlc3QodmFsdWUgfHwgJycpO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIFBhc3N3b3JkIHN0cmVuZ3RoIHZhbGlkYXRpb25cclxuICovXHJcbmNvbnN0IGlzU3Ryb25nUGFzc3dvcmQgPSAocGFzc3dvcmQpID0+IHtcclxuICBjb25zdCBwYXNzd29yZFJlZ2V4ID0gL14oPz0uKlthLXpdKSg/PS4qW0EtWl0pKD89LipcXGQpKD89LipbQCQhJSo/Jl0pW0EtWmEtelxcZEAkISUqPyZdezgsfSQvO1xyXG4gIHJldHVybiBwYXNzd29yZFJlZ2V4LnRlc3QocGFzc3dvcmQpO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIFBob25lIG51bWJlciB2YWxpZGF0aW9uXHJcbiAqL1xyXG5jb25zdCBpc1Bob25lTnVtYmVyID0gKHBob25lKSA9PiB7XHJcbiAgY29uc3QgcGhvbmVSZWdleCA9IC9eW1xcZFxcc1xcLVxcK1xcKFxcKV0rJC87XHJcbiAgcmV0dXJuIHBob25lUmVnZXgudGVzdChwaG9uZSkgJiYgcGhvbmUucmVwbGFjZSgvXFxEL2csICcnKS5sZW5ndGggPj0gMTA7XHJcbn07XHJcblxyXG4vKipcclxuICogVVJMIHZhbGlkYXRpb25cclxuICovXHJcbmNvbnN0IGlzVmFsaWRVcmwgPSAodXJsKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIHJldHVybiBCb29sZWFuKG5ldyBVUkwodXJsKSk7XHJcbiAgfSBjYXRjaCAoX2UpIHtcclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcbn07XHJcblxyXG4vKipcclxuICogSUQgdmFsaWRhdGlvbiAoTW9uZ29EQiBPYmplY3RJZClcclxuICovXHJcbmNvbnN0IGlzVmFsaWRPYmplY3RJZCA9IChpZCkgPT4ge1xyXG4gIHJldHVybiAvXlswLTlhLWZdezI0fSQvLnRlc3QoaWQpO1xyXG59O1xyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT0gU0FOSVRJWkVSUyA9PT09PT09PT09PT09PT09PT09PVxyXG5cclxuLyoqXHJcbiAqIFNhbml0aXplIHN0cmluZyBpbnB1dFxyXG4gKi9cclxuY29uc3Qgc2FuaXRpemVTdHJpbmcgPSAoc3RyKSA9PiB7XHJcbiAgaWYgKCFzdHIpIHJldHVybiAnJztcclxuICByZXR1cm4gU3RyaW5nKHN0cikudHJpbSgpLnJlcGxhY2UoL1s8PlxcXCInJl0vZywgKGNoYXIpID0+IHtcclxuICAgIGNvbnN0IGVzY2FwZSA9IHsgJzwnOiAnJmx0OycsICc+JzogJyZndDsnLCAnXCInOiAnJnF1b3Q7JywgXCInXCI6ICcmI3gyNzsnLCAnJic6ICcmYW1wOycgfTtcclxuICAgIHJldHVybiBlc2NhcGVbY2hhcl07XHJcbiAgfSk7XHJcbn07XHJcblxyXG4vKipcclxuICogU2FuaXRpemUgZW1haWxcclxuICovXHJcbmNvbnN0IHNhbml0aXplRW1haWwgPSAoZW1haWwpID0+IHtcclxuICByZXR1cm4gU3RyaW5nKGVtYWlsIHx8ICcnKS50b0xvd2VyQ2FzZSgpLnRyaW0oKTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBTYW5pdGl6ZSByZXF1ZXN0IGJvZHlcclxuICovXHJcbmNvbnN0IHNhbml0aXplQm9keSA9IChvYmopID0+IHtcclxuICBjb25zdCBzYW5pdGl6ZWQgPSB7fTtcclxuICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhvYmopKSB7XHJcbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykge1xyXG4gICAgICBzYW5pdGl6ZWRba2V5XSA9IHNhbml0aXplU3RyaW5nKHZhbHVlKTtcclxuICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAhPT0gbnVsbCkge1xyXG4gICAgICBzYW5pdGl6ZWRba2V5XSA9IHNhbml0aXplQm9keSh2YWx1ZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBzYW5pdGl6ZWRba2V5XSA9IHZhbHVlO1xyXG4gICAgfVxyXG4gIH1cclxuICByZXR1cm4gc2FuaXRpemVkO1xyXG59O1xyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT0gVkFMSURBVElPTiBNSURETEVXQVJFID09PT09PT09PT09PT09PT09PT09XHJcblxyXG4vKipcclxuICogUmVnaXN0cmF0aW9uIHZhbGlkYXRpb25cclxuICovXHJcbmNvbnN0IHZhbGlkYXRlUmVnaXN0cmF0aW9uID0gKHJlcSwgcmVzLCBuZXh0KSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHsgbmFtZSwgZW1haWwsIHBhc3N3b3JkLCBjb25maXJtUGFzc3dvcmQgfSA9IHJlcS5ib2R5IHx8IHt9O1xyXG5cclxuICAgIC8vIFJlcXVpcmVkIGZpZWxkc1xyXG4gICAgaWYgKCFuYW1lIHx8ICFlbWFpbCB8fCAhcGFzc3dvcmQpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBlcnJvcjogJ25hbWUsIGVtYWlsLCBhbmQgcGFzc3dvcmQgYXJlIHJlcXVpcmVkJyxcclxuICAgICAgICBlcnJvcnM6IHtcclxuICAgICAgICAgIG5hbWU6ICFuYW1lID8gJ05hbWUgaXMgcmVxdWlyZWQnIDogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgZW1haWw6ICFlbWFpbCA/ICdFbWFpbCBpcyByZXF1aXJlZCcgOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICBwYXNzd29yZDogIXBhc3N3b3JkID8gJ1Bhc3N3b3JkIGlzIHJlcXVpcmVkJyA6IHVuZGVmaW5lZCxcclxuICAgICAgICB9LFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBFbWFpbCB2YWxpZGF0aW9uXHJcbiAgICBpZiAoIWlzRW1haWwoZW1haWwpKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XHJcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgZXJyb3I6ICdJbnZhbGlkIGVtYWlsIGZvcm1hdCcsXHJcbiAgICAgICAgZXJyb3JzOiB7IGVtYWlsOiAnUGxlYXNlIHByb3ZpZGUgYSB2YWxpZCBlbWFpbCBhZGRyZXNzJyB9LFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBQYXNzd29yZCBsZW5ndGhcclxuICAgIGlmIChTdHJpbmcocGFzc3dvcmQpLmxlbmd0aCA8IDgpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBlcnJvcjogJ1Bhc3N3b3JkIG11c3QgYmUgYXQgbGVhc3QgOCBjaGFyYWN0ZXJzJyxcclxuICAgICAgICBlcnJvcnM6IHsgcGFzc3dvcmQ6ICdQYXNzd29yZCBtdXN0IGhhdmUgYXQgbGVhc3QgOCBjaGFyYWN0ZXJzJyB9LFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBDb25maXJtIHBhc3N3b3JkXHJcbiAgICBpZiAoY29uZmlybVBhc3N3b3JkICYmIHBhc3N3b3JkICE9PSBjb25maXJtUGFzc3dvcmQpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBlcnJvcjogJ1Bhc3N3b3JkcyBkbyBub3QgbWF0Y2gnLFxyXG4gICAgICAgIGVycm9yczogeyBjb25maXJtUGFzc3dvcmQ6ICdQYXNzd29yZHMgbXVzdCBtYXRjaCcgfSxcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gU2FuaXRpemUgaW5wdXRzXHJcbiAgICByZXEuYm9keS5uYW1lID0gc2FuaXRpemVTdHJpbmcobmFtZSk7XHJcbiAgICByZXEuYm9keS5lbWFpbCA9IHNhbml0aXplRW1haWwoZW1haWwpO1xyXG5cclxuICAgIG5leHQoKTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xyXG4gICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgZXJyb3I6ICdWYWxpZGF0aW9uIGVycm9yJyxcclxuICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcclxuICAgIH0pO1xyXG4gIH1cclxufTtcclxuXHJcbi8qKlxyXG4gKiBMb2dpbiB2YWxpZGF0aW9uXHJcbiAqL1xyXG5jb25zdCB2YWxpZGF0ZUxvZ2luID0gKHJlcSwgcmVzLCBuZXh0KSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHsgZW1haWwsIHBhc3N3b3JkIH0gPSByZXEuYm9keSB8fCB7fTtcclxuXHJcbiAgICBpZiAoIWVtYWlsIHx8ICFwYXNzd29yZCkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIGVycm9yOiAnZW1haWwgYW5kIHBhc3N3b3JkIGFyZSByZXF1aXJlZCcsXHJcbiAgICAgICAgZXJyb3JzOiB7XHJcbiAgICAgICAgICBlbWFpbDogIWVtYWlsID8gJ0VtYWlsIGlzIHJlcXVpcmVkJyA6IHVuZGVmaW5lZCxcclxuICAgICAgICAgIHBhc3N3b3JkOiAhcGFzc3dvcmQgPyAnUGFzc3dvcmQgaXMgcmVxdWlyZWQnIDogdW5kZWZpbmVkLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghaXNFbWFpbChlbWFpbCkpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBlcnJvcjogJ0ludmFsaWQgZW1haWwgZm9ybWF0JyxcclxuICAgICAgICBlcnJvcnM6IHsgZW1haWw6ICdQbGVhc2UgcHJvdmlkZSBhIHZhbGlkIGVtYWlsIGFkZHJlc3MnIH0sXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFNhbml0aXplXHJcbiAgICByZXEuYm9keS5lbWFpbCA9IHNhbml0aXplRW1haWwoZW1haWwpO1xyXG5cclxuICAgIG5leHQoKTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xyXG4gICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgZXJyb3I6ICdWYWxpZGF0aW9uIGVycm9yJyxcclxuICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcclxuICAgIH0pO1xyXG4gIH1cclxufTtcclxuXHJcbi8qKlxyXG4gKiBDcmVhdGUgdXNlciB2YWxpZGF0aW9uXHJcbiAqL1xyXG5jb25zdCB2YWxpZGF0ZUNyZWF0ZVVzZXIgPSAocmVxLCByZXMsIG5leHQpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyBuYW1lLCBlbWFpbCwgcm9sZSwgZGVwYXJ0bWVudCB9ID0gcmVxLmJvZHkgfHwge307XHJcblxyXG4gICAgaWYgKCFuYW1lIHx8ICFlbWFpbCB8fCAhcm9sZSkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIGVycm9yOiAnbmFtZSwgZW1haWwsIGFuZCByb2xlIGFyZSByZXF1aXJlZCcsXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghaXNFbWFpbChlbWFpbCkpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBlcnJvcjogJ0ludmFsaWQgZW1haWwgZm9ybWF0JyxcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgdmFsaWRSb2xlcyA9IFsnYWRtaW4nLCAnbWFuYWdlcicsICdlbXBsb3llZScsICd2aWV3ZXInXTtcclxuICAgIGlmICghdmFsaWRSb2xlcy5pbmNsdWRlcyhyb2xlKSkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIGVycm9yOiBgSW52YWxpZCByb2xlLiBNdXN0IGJlIG9uZSBvZjogJHt2YWxpZFJvbGVzLmpvaW4oJywgJyl9YCxcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gU2FuaXRpemVcclxuICAgIHJlcS5ib2R5Lm5hbWUgPSBzYW5pdGl6ZVN0cmluZyhuYW1lKTtcclxuICAgIHJlcS5ib2R5LmVtYWlsID0gc2FuaXRpemVFbWFpbChlbWFpbCk7XHJcbiAgICBpZiAoZGVwYXJ0bWVudCkgcmVxLmJvZHkuZGVwYXJ0bWVudCA9IHNhbml0aXplU3RyaW5nKGRlcGFydG1lbnQpO1xyXG5cclxuICAgIG5leHQoKTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xyXG4gICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgZXJyb3I6ICdWYWxpZGF0aW9uIGVycm9yJyxcclxuICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcclxuICAgIH0pO1xyXG4gIH1cclxufTtcclxuXHJcbi8qKlxyXG4gKiBWYWxpZGF0ZSBJRCBwYXJhbWV0ZXJcclxuICovXHJcbmNvbnN0IHZhbGlkYXRlSWQgPSAocmVxLCByZXMsIG5leHQpID0+IHtcclxuICBjb25zdCB7IGlkIH0gPSByZXEucGFyYW1zO1xyXG4gIFxyXG4gIGlmICghaWQpIHtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XHJcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICBlcnJvcjogJ0lEIHBhcmFtZXRlciBpcyByZXF1aXJlZCcsXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGlmICghaXNWYWxpZE9iamVjdElkKGlkKSkge1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIGVycm9yOiAnSW52YWxpZCBJRCBmb3JtYXQnLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBuZXh0KCk7XHJcbn07XHJcblxyXG4vKipcclxuICogVmFsaWRhdGUgcGFnaW5hdGlvblxyXG4gKi9cclxuY29uc3QgdmFsaWRhdGVQYWdpbmF0aW9uID0gKHJlcSwgcmVzLCBuZXh0KSA9PiB7XHJcbiAgY29uc3QgeyBwYWdlID0gMSwgbGltaXQgPSAxMCB9ID0gcmVxLnF1ZXJ5O1xyXG5cclxuICBjb25zdCBwYWdlTnVtID0gcGFyc2VJbnQocGFnZSk7XHJcbiAgY29uc3QgbGltaXROdW0gPSBwYXJzZUludChsaW1pdCk7XHJcblxyXG4gIGlmIChpc05hTihwYWdlTnVtKSB8fCBwYWdlTnVtIDwgMSkge1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIGVycm9yOiAnSW52YWxpZCBwYWdlIG51bWJlcicsXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGlmIChpc05hTihsaW1pdE51bSkgfHwgbGltaXROdW0gPCAxIHx8IGxpbWl0TnVtID4gMTAwKSB7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xyXG4gICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgZXJyb3I6ICdJbnZhbGlkIGxpbWl0LiBNdXN0IGJlIGJldHdlZW4gMSBhbmQgMTAwJyxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcmVxLnBhZ2luYXRpb24gPSB7XHJcbiAgICBwYWdlOiBwYWdlTnVtLFxyXG4gICAgbGltaXQ6IGxpbWl0TnVtLFxyXG4gICAgc2tpcDogKHBhZ2VOdW0gLSAxKSAqIGxpbWl0TnVtLFxyXG4gIH07XHJcblxyXG4gIG5leHQoKTtcclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0ge1xyXG4gIC8vIFZhbGlkYXRvcnNcclxuICBpc0VtYWlsLFxyXG4gIGlzU3Ryb25nUGFzc3dvcmQsXHJcbiAgaXNQaG9uZU51bWJlcixcclxuICBpc1ZhbGlkVXJsLFxyXG4gIGlzVmFsaWRPYmplY3RJZCxcclxuXHJcbiAgLy8gU2FuaXRpemVyc1xyXG4gIHNhbml0aXplU3RyaW5nLFxyXG4gIHNhbml0aXplRW1haWwsXHJcbiAgc2FuaXRpemVCb2R5LFxyXG5cclxuICAvLyBNaWRkbGV3YXJlXHJcbiAgdmFsaWRhdGVSZWdpc3RyYXRpb24sXHJcbiAgdmFsaWRhdGVMb2dpbixcclxuICB2YWxpZGF0ZUNyZWF0ZVVzZXIsXHJcbiAgdmFsaWRhdGVJZCxcclxuICB2YWxpZGF0ZVBhZ2luYXRpb24sXHJcbn07XHJcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE1BQU1BLE9BQU8sR0FBSUMsS0FBSyxJQUFLO0VBQ3pCLE1BQU1DLFVBQVUsR0FBRyw0QkFBNEI7RUFDL0MsT0FBT0EsVUFBVSxDQUFDQyxJQUFJLENBQUNGLEtBQUssSUFBSSxFQUFFLENBQUM7QUFDckMsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQSxNQUFNRyxnQkFBZ0IsR0FBSUMsUUFBUSxJQUFLO0VBQ3JDLE1BQU1DLGFBQWEsR0FBRyxzRUFBc0U7RUFDNUYsT0FBT0EsYUFBYSxDQUFDSCxJQUFJLENBQUNFLFFBQVEsQ0FBQztBQUNyQyxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBLE1BQU1FLGFBQWEsR0FBSUMsS0FBSyxJQUFLO0VBQy9C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