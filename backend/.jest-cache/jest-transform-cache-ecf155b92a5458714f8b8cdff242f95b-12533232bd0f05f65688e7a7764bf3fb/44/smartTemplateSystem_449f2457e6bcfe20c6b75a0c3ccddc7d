8a66fc6550771befdf8558fbafcd82e4
/**
 * ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
 * üìã Smart Notification Templates System
 * ŸÜÿ∏ÿßŸÖ ÿßŸÑŸÇŸàÿßŸÑÿ® ÿßŸÑÿ∞ŸÉŸäÿ© ŸÑŸÑÿ•ÿ¥ÿπÿßÿ±ÿßÿ™ ŸàÿßŸÑÿ™ŸÜÿ®ŸäŸáÿßÿ™
 * ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
 * 
 * ŸÜÿ∏ÿßŸÖ ŸÇŸàÿßŸÑÿ® ŸÖÿ™ŸÇÿØŸÖ Ÿàÿ∞ŸÉŸä ŸÖÿπ:
 * - ÿØÿπŸÖ ÿßŸÑŸÑÿ∫ÿßÿ™ ÿßŸÑŸÖÿ™ÿπÿØÿØÿ© (ÿßŸÑÿπÿ±ÿ®Ÿäÿ© ŸàÿßŸÑÿ•ŸÜÿ¨ŸÑŸäÿ≤Ÿäÿ©)
 * - ŸÖÿ™ÿ∫Ÿäÿ±ÿßÿ™ ÿØŸäŸÜÿßŸÖŸäŸÉŸäÿ©
 * - ÿ•ÿπÿßÿØÿ© ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ Ÿàÿ™ÿÆÿ≤ŸäŸÜ ŸÖÿ§ŸÇÿ™
 * - ÿ™ÿµŸÜŸäŸÅÿßÿ™ ŸÖŸÜÿ∏ŸÖÿ©
 */

const mongoose = require('mongoose');
const logger = require('../utils/logger');

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// üìã ŸÜŸÖŸàÿ∞ÿ¨ ÿßŸÑŸÇÿßŸÑÿ®
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

const templateSchema = new mongoose.Schema({
  // ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿ£ÿ≥ÿßÿ≥Ÿäÿ©
  templateId: {
    type: String,
    unique: true,
    index: true
  },
  name: String,
  category: {
    type: String,
    enum: ['system',
    // ÿ™ŸÜÿ®ŸäŸáÿßÿ™ ÿßŸÑŸÜÿ∏ÿßŸÖ
    'business',
    // ÿ•ÿ¥ÿπÿßÿ±ÿßÿ™ ÿßŸÑÿ£ÿπŸÖÿßŸÑ
    'transaction',
    // ÿ•ÿ¥ÿπÿßÿ±ÿßÿ™ ÿßŸÑŸÖÿπÿßŸÖŸÑÿßÿ™
    'security',
    // ÿ™ŸÜÿ®ŸäŸáÿßÿ™ ÿßŸÑÿ£ŸÖÿßŸÜ
    'reminder',
    // ÿßŸÑÿ™ÿ∞ŸÉŸäÿ±ÿßÿ™
    'warning',
    // ÿßŸÑÿ™ÿ≠ÿ∞Ÿäÿ±ÿßÿ™
    'success',
    // ÿ±ÿ≥ÿßÿ¶ŸÑ ÿßŸÑŸÜÿ¨ÿßÿ≠
    'error',
    // ÿ±ÿ≥ÿßÿ¶ŸÑ ÿßŸÑÿÆÿ∑ÿ£
    'custom' // ŸÖÿÆÿµÿµ
    ],
    default: 'custom'
  },
  // ÿßŸÑŸÖÿ≠ÿ™ŸàŸâ ŸÖÿ™ÿπÿØÿØ ÿßŸÑŸÑÿ∫ÿßÿ™
  content: {
    ar: {
      title: {
        type: String,
        required: true
      },
      body: {
        type: String,
        required: true
      },
      shortBody: String,
      actionText: String
    },
    en: {
      title: {
        type: String,
        required: true
      },
      body: {
        type: String,
        required: true
      },
      shortBody: String,
      actionText: String
    }
  },
  // ÿßŸÑŸÖÿ™ÿ∫Ÿäÿ±ÿßÿ™ ÿßŸÑŸÖÿØÿπŸàŸÖÿ©
  variables: [String],
  // ŸÖÿ´ŸÑ: {{user_name}}, {{amount}}, {{date}}
  requiredVariables: [String],
  // ÿßŸÑÿ•ÿπÿØÿßÿØÿßÿ™
  settings: {
    channels: [String],
    // ['email', 'sms', 'whatsapp', 'inApp', 'push']
    priority: {
      type: String,
      enum: ['low', 'medium', 'high', 'critical'],
      default: 'medium'
    },
    maxRetries: {
      type: Number,
      default: 3
    },
    expiryDays: Number,
    silent: {
      type: Boolean,
      default: false
    }
  },
  // ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸàÿµŸÅŸäÿ©
  metadata: {
    icon: String,
    color: String,
    sound: String,
    vibration: {
      type: Boolean,
      default: true
    }
  },
  // ÿßŸÑÿ£ÿØÿßÿ° ŸàÿßŸÑÿ™ÿ™ÿ®ÿπ
  usage: {
    count: {
      type: Number,
      default: 0
    },
    successRate: {
      type: Number,
      default: 0
    },
    lastUsed: Date
  },
  // ÿßŸÑÿ™ÿ≠ŸÉŸÖ
  isActive: {
    type: Boolean,
    default: true
  },
  createdAt: {
    type: Date,
    default: Date.now
  },
  updatedAt: {
    type: Date,
    default: Date.now
  },
  createdBy: String,
  tags: [String]
});
const Template = mongoose.model('NotificationTemplate', templateSchema);

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// üéØ ŸÜÿ∏ÿßŸÖ ÿßŸÑŸÇŸàÿßŸÑÿ® ÿßŸÑÿ∞ŸÉŸäÿ©
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

class SmartTemplateSystem {
  constructor() {
    // ÿ∞ÿßŸÉÿ±ÿ© ÿßŸÑÿ™ÿÆÿ≤ŸäŸÜ ÿßŸÑŸÖÿ§ŸÇÿ™
    this.cache = new Map();
    this.cacheTimeout = 3600000; // ÿ≥ÿßÿπÿ© Ÿàÿßÿ≠ÿØÿ©

    // ÿßŸÑŸÇŸàÿßŸÑÿ® ÿßŸÑŸÖÿØŸÖÿ¨ÿ©
    this.builtInTemplates = this.initializeBuiltInTemplates();

    // ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑŸÇŸàÿßŸÑÿ® ÿßŸÑŸÖÿØŸÖÿ¨ÿ© ÿ•ŸÑŸâ ÿßŸÑÿ∞ÿßŸÉÿ±ÿ© ÿßŸÑŸÖÿ§ŸÇÿ™ÿ©
    this.loadBuiltInTemplates();
  }

  /**
   * ÿ™ŸáŸäÿ¶ÿ© ÿßŸÑŸÇŸàÿßŸÑÿ® ÿßŸÑŸÖÿØŸÖÿ¨ÿ©
   */
  initializeBuiltInTemplates() {
    return {
      // ÿ™ŸÜÿ®ŸäŸáÿßÿ™ ÿßŸÑŸÜÿ∏ÿßŸÖ
      SYSTEM_ALERT: {
        name: 'System Alert',
        category: 'system',
        content: {
          ar: {
            title: 'ÿ™ŸÜÿ®ŸäŸá ŸÜÿ∏ÿßŸÖ',
            body: 'ÿ™ŸÖ ÿßŸÉÿ™ÿ¥ÿßŸÅ {{alert_type}} ŸÅŸä ÿßŸÑŸÜÿ∏ÿßŸÖ. ÿßŸÑÿ™ŸÅÿßÿµŸäŸÑ: {{details}}',
            shortBody: 'ÿ™ŸÜÿ®ŸäŸá: {{alert_type}}',
            actionText: 'ÿπÿ±ÿ∂ ÿßŸÑÿ™ŸÅÿßÿµŸäŸÑ'
          },
          en: {
            title: 'System Alert',
            body: 'A {{alert_type}} has been detected in the system. Details: {{details}}',
            shortBody: 'Alert: {{alert_type}}',
            actionText: 'View Details'
          }
        },
        variables: ['alert_type', 'details'],
        requiredVariables: ['alert_type'],
        settings: {
          channels: ['email', 'inApp', 'push'],
          priority: 'high',
          maxRetries: 3
        }
      },
      // ÿ•ÿ¥ÿπÿßÿ±ÿßÿ™ ÿßŸÑŸÖÿπÿßŸÖŸÑÿßÿ™
      TRANSACTION_SUCCESS: {
        name: 'Transaction Success',
        category: 'transaction',
        content: {
          ar: {
            title: '‚úÖ ÿ™ŸÖÿ™ ÿßŸÑÿπŸÖŸÑŸäÿ© ÿ®ŸÜÿ¨ÿßÿ≠',
            body: 'ÿ™ŸÖ ÿ•ŸÉŸÖÿßŸÑ ŸÖÿπÿßŸÖŸÑÿ™ŸÉ ÿ®ÿ±ŸÇŸÖ {{transaction_id}}. ÿßŸÑŸÖÿ®ŸÑÿ∫: {{amount}} {{currency}}. ÿßŸÑÿ™ÿßÿ±ŸäÿÆ: {{date}}',
            shortBody: 'ŸÖÿπÿßŸÖŸÑÿ© ŸÜÿßÿ¨ÿ≠ÿ©: {{amount}}',
            actionText: 'ÿπÿ±ÿ∂ ÿßŸÑŸÅÿßÿ™Ÿàÿ±ÿ©'
          },
          en: {
            title: '‚úÖ Transaction Completed',
            body: 'Your transaction {{transaction_id}} has been completed. Amount: {{amount}} {{currency}}. Date: {{date}}',
            shortBody: 'Success: {{amount}}',
            actionText: 'View Receipt'
          }
        },
        variables: ['transaction_id', 'amount', 'currency', 'date'],
        requiredVariables: ['transaction_id', 'amount'],
        settings: {
          channels: ['email', 'sms', 'whatsapp', 'inApp'],
          priority: 'medium',
          maxRetries: 3
        }
      },
      // ÿ™ŸÜÿ®ŸäŸáÿßÿ™ ÿßŸÑÿ£ŸÖÿßŸÜ
      SECURITY_WARNING: {
        name: 'Security Warning',
        category: 'security',
        content: {
          ar: {
            title: '‚ö†Ô∏è ÿ™ŸÜÿ®ŸäŸá ÿ£ŸÖÿßŸÜ',
            body: 'ÿ™ŸÖ ÿßŸÉÿ™ÿ¥ÿßŸÅ ŸÖÿ≠ÿßŸàŸÑÿ© {{threat_type}} ŸÅŸä ÿ≠ÿ≥ÿßÿ®ŸÉ. ÿ•ÿ∞ÿß ŸÑŸÖ ÿ™ŸÇŸÖ ÿ®Ÿáÿ∞ÿß ÿßŸÑÿ•ÿ¨ÿ±ÿßÿ°ÿå Ÿäÿ±ÿ¨Ÿâ ÿ™ÿ∫ŸäŸäÿ± ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ± ÿßŸÑÿ¢ŸÜ.',
            shortBody: 'ÿ™ÿ≠ÿ∞Ÿäÿ± ÿ£ŸÖÿßŸÜ: {{threat_type}}',
            actionText: 'ÿ™ÿ∫ŸäŸäÿ± ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±'
          },
          en: {
            title: '‚ö†Ô∏è Security Warning',
            body: 'A {{threat_type}} attempt was detected on your account. If this wasn\'t you, please change your password immediately.',
            shortBody: 'Security Alert: {{threat_type}}',
            actionText: 'Change Password'
          }
        },
        variables: ['threat_type'],
        requiredVariables: ['threat_type'],
        settings: {
          channels: ['email', 'sms', 'whatsapp', 'inApp', 'push'],
          priority: 'critical',
          maxRetries: 5,
          silent: false
        }
      },
      // ÿßŸÑÿ™ÿ∞ŸÉŸäÿ±ÿßÿ™
      REMINDER_UPCOMING: {
        name: 'Reminder - Upcoming Event',
        category: 'reminder',
        content: {
          ar: {
            title: '‚è∞ ÿ™ÿ∞ŸÉŸäÿ±',
            body: 'ÿ™ÿ∞ŸÉŸäÿ±: {{event_name}} ÿ≥Ÿäÿ®ÿØÿ£ {{time_until}}. {{event_details}}',
            shortBody: 'ÿ™ÿ∞ŸÉŸäÿ±: {{event_name}}',
            actionText: 'ÿπÿ±ÿ∂ ÿßŸÑŸÖÿ≤ŸäÿØ'
          },
          en: {
            title: '‚è∞ Reminder',
            body: 'Reminder: {{event_name}} starts {{time_until}}. {{event_details}}',
            shortBody: 'Reminder: {{event_name}}',
            actionText: 'Learn More'
          }
        },
        variables: ['event_name', 'time_until', 'event_details'],
        requiredVariables: ['event_name', 'time_until'],
        settings: {
          channels: ['email', 'inApp', 'push'],
          priority: 'medium',
          maxRetries: 2
        }
      },
      // ÿ±ÿ≥ÿßÿ¶ŸÑ ÿßŸÑÿÆÿ∑ÿ£
      ERROR_OPERATION_FAILED: {
        name: 'Operation Failed',
        category: 'error',
        content: {
          ar: {
            title: '‚ùå ŸÅÿ¥ŸÑÿ™ ÿßŸÑÿπŸÖŸÑŸäÿ©',
            body: 'ŸÅÿ¥ŸÑÿ™ ÿßŸÑÿπŸÖŸÑŸäÿ©: {{operation_name}}. ÿßŸÑÿÆÿ∑ÿ£: {{error_message}}. Ÿäÿ±ÿ¨Ÿâ ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿ© ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ ÿ£Ÿà ÿßŸÑÿ™ŸàÿßÿµŸÑ ŸÖÿπ ÿßŸÑÿØÿπŸÖ.',
            shortBody: 'ÿÆÿ∑ÿ£: {{operation_name}}',
            actionText: 'ÿßŸÑÿ™ŸàÿßÿµŸÑ ŸÖÿπ ÿßŸÑÿØÿπŸÖ'
          },
          en: {
            title: '‚ùå Operation Failed',
            body: 'Operation {{operation_name}} failed. Error: {{error_message}}. Please try again or contact support.',
            shortBody: 'Error: {{operation_name}}',
            actionText: 'Contact Support'
          }
        },
        variables: ['operation_name', 'error_message'],
        requiredVariables: ['operation_name'],
        settings: {
          channels: ['email', 'inApp', 'push'],
          priority: 'high',
          maxRetries: 3
        }
      },
      // ÿ±ÿ≥ÿßÿ¶ŸÑ ÿßŸÑŸÜÿ¨ÿßÿ≠
      SUCCESS_NOTIFICATION: {
        name: 'Success Notification',
        category: 'success',
        content: {
          ar: {
            title: '‚úÖ ŸÜÿ¨ÿ≠ÿ™ ÿßŸÑÿπŸÖŸÑŸäÿ©',
            body: '{{operation_name}} ŸÇÿØ ÿ™ŸÖÿ™ ÿ®ŸÜÿ¨ÿßÿ≠. {{additional_info}}',
            shortBody: 'ŸÜÿ¨ÿßÿ≠: {{operation_name}}',
            actionText: 'ÿπÿ±ÿ∂ ÿßŸÑÿ™ŸÅÿßÿµŸäŸÑ'
          },
          en: {
            title: '‚úÖ Success',
            body: '{{operation_name}} has been completed successfully. {{additional_info}}',
            shortBody: 'Success: {{operation_name}}',
            actionText: 'View Details'
          }
        },
        variables: ['operation_name', 'additional_info'],
        requiredVariables: ['operation_name'],
        settings: {
          channels: ['email', 'inApp', 'push'],
          priority: 'low',
          maxRetries: 2
        }
      },
      // ÿ™ŸÜÿ®ŸäŸáÿßÿ™ ÿßŸÑÿ£ÿπŸÖÿßŸÑ
      BUSINESS_UPDATE: {
        name: 'Business Update',
        category: 'business',
        content: {
          ar: {
            title: 'üìä ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ£ÿπŸÖÿßŸÑ',
            body: '{{update_title}}\n\nÿßŸÑÿ™ŸÅÿßÿµŸäŸÑ: {{update_content}}\n\nÿßŸÑÿ™ÿßÿ±ŸäÿÆ: {{date}}',
            shortBody: '{{update_title}}',
            actionText: 'ÿπÿ±ÿ∂ ÿßŸÑÿ™ŸÇÿ±Ÿäÿ±'
          },
          en: {
            title: 'üìä Business Update',
            body: '{{update_title}}\n\nDetails: {{update_content}}\n\nDate: {{date}}',
            shortBody: '{{update_title}}',
            actionText: 'View Report'
          }
        },
        variables: ['update_title', 'update_content', 'date'],
        requiredVariables: ['update_title'],
        settings: {
          channels: ['email', 'inApp', 'push'],
          priority: 'medium',
          maxRetries: 3
        }
      },
      // ÿ™ŸÜÿ®ŸäŸáÿßÿ™ ÿßŸÑÿ™ÿ≠ÿ∞Ÿäÿ±
      WARNING_NOTICE: {
        name: 'Warning Notice',
        category: 'warning',
        content: {
          ar: {
            title: '‚ö†Ô∏è ÿ™ŸÜÿ®ŸäŸá',
            body: 'ÿ™ŸÜÿ®ŸäŸá: {{warning_message}}. ÿßŸÑÿ•ÿ¨ÿ±ÿßÿ° ÿßŸÑŸÖÿ∑ŸÑŸàÿ®: {{required_action}}.',
            shortBody: 'ÿ™ŸÜÿ®ŸäŸá: {{warning_message}}',
            actionText: 'ÿßÿ™ÿÆÿßÿ∞ ÿ•ÿ¨ÿ±ÿßÿ°'
          },
          en: {
            title: '‚ö†Ô∏è Warning',
            body: 'Warning: {{warning_message}}. Required action: {{required_action}}.',
            shortBody: 'Warning: {{warning_message}}',
            actionText: 'Take Action'
          }
        },
        variables: ['warning_message', 'required_action'],
        requiredVariables: ['warning_message'],
        settings: {
          channels: ['email', 'sms', 'inApp', 'push'],
          priority: 'high',
          maxRetries: 3
        }
      }
    };
  }

  /**
   * ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑŸÇŸàÿßŸÑÿ® ÿßŸÑŸÖÿØŸÖÿ¨ÿ© ÿ•ŸÑŸâ ÿßŸÑÿ∞ÿßŸÉÿ±ÿ© ÿßŸÑŸÖÿ§ŸÇÿ™ÿ©
   */
  loadBuiltInTemplates() {
    Object.entries(this.builtInTemplates).forEach(([key, template]) => {
      this.cache.set(key, {
        ...template,
        templateId: key,
        isBuiltIn: true
      });
    });
    logger.info(`‚úÖ ÿ™ŸÖ ÿ™ÿ≠ŸÖŸäŸÑ ${Object.keys(this.builtInTemplates).length} ŸÇÿßŸÑÿ® ŸÖÿØŸÖÿ¨ ÿ•ŸÑŸâ ÿßŸÑÿ∞ÿßŸÉÿ±ÿ© ÿßŸÑŸÖÿ§ŸÇÿ™ÿ©`);
  }

  /**
   * ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   * üìã ÿ•ÿØÿßÿ±ÿ© ÿßŸÑŸÇŸàÿßŸÑÿ®
   * ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   */

  /**
   * ÿßŸÑÿ≠ÿµŸàŸÑ ÿπŸÑŸâ ŸÇÿßŸÑÿ®
   */
  async getTemplate(templateId, language = 'ar') {
    try {
      // ÿßŸÑÿ®ÿ≠ÿ´ ŸÅŸä ÿßŸÑÿ∞ÿßŸÉÿ±ÿ© ÿßŸÑŸÖÿ§ŸÇÿ™ÿ©
      if (this.cache.has(templateId)) {
        return this.cache.get(templateId);
      }

      // ÿßŸÑÿ®ÿ≠ÿ´ ŸÅŸä ŸÇÿßÿπÿØÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™
      const template = await Template.findOne({
        templateId,
        isActive: true
      }).exec();
      if (template) {
        // ÿ•ÿ∂ÿßŸÅÿ© ÿ•ŸÑŸâ ÿßŸÑÿ∞ÿßŸÉÿ±ÿ© ÿßŸÑŸÖÿ§ŸÇÿ™ÿ©
        this.cache.set(templateId, template);

        // ÿ™ÿ≠ÿØŸäÿØ ŸàŸÇÿ™ ÿßŸÜÿ™Ÿáÿßÿ° ÿßŸÑÿµŸÑÿßÿ≠Ÿäÿ©
        setTimeout(() => this.cache.delete(templateId), this.cacheTimeout);
      }
      return template;
    } catch (error) {
      logger.error(`‚ùå ÿÆÿ∑ÿ£ ŸÅŸä ÿ¨ŸÑÿ® ÿßŸÑŸÇÿßŸÑÿ®: ${error.message}`);
      throw error;
    }
  }

  /**
   * ÿ•ŸÜÿ¥ÿßÿ° ŸÇÿßŸÑÿ® ÿ¨ÿØŸäÿØ
   */
  async createTemplate(templateData) {
    try {
      // ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™
      this.validateTemplateData(templateData);
      const template = new Template({
        templateId: `CUSTOM_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,
        ...templateData
      });
      const savedTemplate = await template.save();

      // ÿ•ÿ∂ÿßŸÅÿ© ÿ•ŸÑŸâ ÿßŸÑÿ∞ÿßŸÉÿ±ÿ© ÿßŸÑŸÖÿ§ŸÇÿ™ÿ©
      this.cache.set(savedTemplate.templateId, savedTemplate);
      logger.info(`‚úÖ ÿ™ŸÖ ÿ•ŸÜÿ¥ÿßÿ° ŸÇÿßŸÑÿ® ÿ¨ÿØŸäÿØ: ${savedTemplate.templateId}`);
      return savedTemplate;
    } catch (error) {
      logger.error(`‚ùå ÿÆÿ∑ÿ£ ŸÅŸä ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑŸÇÿßŸÑÿ®: ${error.message}`);
      throw error;
    }
  }

  /**
   * ÿ™ÿ≠ÿØŸäÿ´ ŸÇÿßŸÑÿ®
   */
  async updateTemplate(templateId, updates) {
    try {
      const result = await Template.updateOne({
        templateId
      }, {
        ...updates,
        updatedAt: new Date()
      });

      // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ∞ÿßŸÉÿ±ÿ© ÿßŸÑŸÖÿ§ŸÇÿ™ÿ©
      this.cache.delete(templateId);
      logger.info(`üìù ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸÇÿßŸÑÿ®: ${templateId}`);
      return result;
    } catch (error) {
      logger.error(`‚ùå ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸÇÿßŸÑÿ®: ${error.message}`);
      throw error;
    }
  }

  /**
   * ÿ≠ÿ∞ŸÅ ŸÇÿßŸÑÿ®
   */
  async deleteTemplate(templateId) {
    try {
      const result = await Template.deleteOne({
        templateId
      });

      // ÿ≠ÿ∞ŸÅ ŸÖŸÜ ÿßŸÑÿ∞ÿßŸÉÿ±ÿ© ÿßŸÑŸÖÿ§ŸÇÿ™ÿ©
      this.cache.delete(templateId);
      logger.info(`üóëÔ∏è ÿ™ŸÖ ÿ≠ÿ∞ŸÅ ÿßŸÑŸÇÿßŸÑÿ®: ${templateId}`);
      return result;
    } catch (error) {
      logger.error(`‚ùå ÿÆÿ∑ÿ£ ŸÅŸä ÿ≠ÿ∞ŸÅ ÿßŸÑŸÇÿßŸÑÿ®: ${error.message}`);
      throw error;
    }
  }

  /**
   * ÿßŸÑÿ®ÿ≠ÿ´ ÿπŸÜ ÿßŸÑŸÇŸàÿßŸÑÿ®
   */
  async searchTemplates(criteria = {}) {
    try {
      const query = {
        isActive: true,
        ...criteria
      };
      const templates = await Template.find(query).exec();
      return templates;
    } catch (error) {
      logger.error(`‚ùå ÿÆÿ∑ÿ£ ŸÅŸä ÿßŸÑÿ®ÿ≠ÿ´ ÿπŸÜ ÿßŸÑŸÇŸàÿßŸÑÿ®: ${error.message}`);
      throw error;
    }
  }

  /**
   * ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   * üîÑ ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑÿ•ÿ¥ÿπÿßÿ± ŸÖŸÜ ÿßŸÑŸÇÿßŸÑÿ®
   * ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   */

  /**
   * ÿ•ŸÜÿ¥ÿßÿ° ÿ•ÿ¥ÿπÿßÿ± ŸÖŸÜ ŸÇÿßŸÑÿ®
   */
  async createNotificationFromTemplate(templateId, variables = {}, language = 'ar') {
    try {
      // ÿßŸÑÿ≠ÿµŸàŸÑ ÿπŸÑŸâ ÿßŸÑŸÇÿßŸÑÿ®
      const template = await this.getTemplate(templateId, language);
      if (!template) {
        throw new Error(`ÿßŸÑŸÇÿßŸÑÿ® ÿ∫Ÿäÿ± ŸÖŸàÿ¨ŸàÿØ: ${templateId}`);
      }

      // ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿßŸÑŸÖÿ™ÿ∫Ÿäÿ±ÿßÿ™ ÿßŸÑŸÖÿ∑ŸÑŸàÿ®ÿ©
      const missing = template.requiredVariables.filter(variable => !variables[variable]);
      if (missing.length > 0) {
        throw new Error(`ŸÖÿ™ÿ∫Ÿäÿ±ÿßÿ™ ŸÖÿ∑ŸÑŸàÿ®ÿ© ŸÖŸÅŸÇŸàÿØÿ©: ${missing.join(', ')}`);
      }

      // ÿ®ŸÜÿßÿ° ÿßŸÑÿ•ÿ¥ÿπÿßÿ±
      const notificationContent = this.buildNotificationContent(template, variables, language);
      return {
        title: notificationContent.title,
        body: notificationContent.body,
        shortBody: notificationContent.shortBody,
        actionText: notificationContent.actionText,
        type: template.category,
        channels: template.settings.channels,
        priority: template.settings.priority
      };
    } catch (error) {
      logger.error(`‚ùå ÿÆÿ∑ÿ£ ŸÅŸä ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑÿ•ÿ¥ÿπÿßÿ± ŸÖŸÜ ÿßŸÑŸÇÿßŸÑÿ®: ${error.message}`);
      throw error;
    }
  }

  /**
   * ÿ®ŸÜÿßÿ° ŸÖÿ≠ÿ™ŸàŸâ ÿßŸÑÿ•ÿ¥ÿπÿßÿ±
   */
  buildNotificationContent(template, variables, language = 'ar') {
    const templateContent = template.content[language] || template.content.en;
    return {
      title: this.replaceVariables(templateContent.title, variables),
      body: this.replaceVariables(templateContent.body, variables),
      shortBody: this.replaceVariables(templateContent.shortBody || '', variables),
      actionText: templateContent.actionText
    };
  }

  /**
   * ÿßÿ≥ÿ™ÿ®ÿØÿßŸÑ ÿßŸÑŸÖÿ™ÿ∫Ÿäÿ±ÿßÿ™
   */
  replaceVariables(text, variables) {
    if (!text) return '';
    return text.replace(/\{\{(\w+)\}\}/g, (match, variable) => {
      return variables[variable] !== undefined ? String(variables[variable]) : match;
    });
  }

  /**
   * ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   * üõ†Ô∏è ÿßŸÑÿ£ÿØŸàÿßÿ™ ÿßŸÑŸÖÿ≥ÿßÿπÿØÿ© ŸàÿßŸÑÿ™ÿ≠ŸÇŸÇ
   * ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   */

  /**
   * ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿµÿ≠ÿ© ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÇÿßŸÑÿ®
   */
  validateTemplateData(templateData) {
    // ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿßŸÑŸÖÿ≠ÿ™ŸàŸâ ÿßŸÑÿπÿ±ÿ®Ÿä
    if (!templateData.content?.ar?.title || !templateData.content?.ar?.body) {
      throw new Error('ÿßŸÑŸÖÿ≠ÿ™ŸàŸâ ÿßŸÑÿπÿ±ÿ®Ÿä ŸÖÿ∑ŸÑŸàÿ® (title Ÿà body)');
    }

    // ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿßŸÑŸÖÿ≠ÿ™ŸàŸâ ÿßŸÑÿ•ŸÜÿ¨ŸÑŸäÿ≤Ÿä
    if (!templateData.content?.en?.title || !templateData.content?.en?.body) {
      throw new Error('ÿßŸÑŸÖÿ≠ÿ™ŸàŸâ ÿßŸÑÿ•ŸÜÿ¨ŸÑŸäÿ≤Ÿä ŸÖÿ∑ŸÑŸàÿ® (title Ÿà body)');
    }

    // ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿßŸÑŸÖÿ™ÿ∫Ÿäÿ±ÿßÿ™
    if (templateData.requiredVariables) {
      const allVariables = new Set([...(templateData.variables || []), ...templateData.requiredVariables]);
      templateData.variables = Array.from(allVariables);
    }
    return true;
  }

  /**
   * ÿßŸÑÿ≠ÿµŸàŸÑ ÿπŸÑŸâ ÿ¨ŸÖŸäÿπ ÿßŸÑŸÇŸàÿßŸÑÿ≥ ÿßŸÑŸÖÿ™ÿßÿ≠ÿ©
   */
  async getAllTemplates(filters = {}) {
    try {
      const query = {
        isActive: true,
        ...filters
      };
      const templates = await Template.find(query).sort({
        category: 1,
        name: 1
      }).exec();
      return templates;
    } catch (error) {
      logger.error(`‚ùå ÿÆÿ∑ÿ£ ŸÅŸä ÿ¨ŸÑÿ® ÿ¨ŸÖŸäÿπ ÿßŸÑŸÇŸàÿßŸÑÿ®: ${error.message}`);
      throw error;
    }
  }

  /**
   * ÿßŸÑÿ≠ÿµŸàŸÑ ÿπŸÑŸâ ÿßŸÑŸÇŸàÿßŸÑÿ® ÿ≠ÿ≥ÿ® ÿßŸÑŸÅÿ¶ÿ©
   */
  async getTemplatesByCategory(category) {
    try {
      const templates = await Template.find({
        category,
        isActive: true
      }).exec();
      return templates;
    } catch (error) {
      logger.error(`‚ùå ÿÆÿ∑ÿ£ ŸÅŸä ÿ¨ŸÑÿ® ÿßŸÑŸÇŸàÿßŸÑÿ® ÿ≠ÿ≥ÿ® ÿßŸÑŸÅÿ¶ÿ©: ${error.message}`);
      throw error;
    }
  }

  /**
   * ŸÖÿ≥ÿ≠ ÿßŸÑÿ∞ÿßŸÉÿ±ÿ© ÿßŸÑŸÖÿ§ŸÇÿ™ÿ©
   */
  clearCache() {
    const size = this.cache.size;
    this.cache.clear();
    this.loadBuiltInTemplates();
    logger.info(`üóëÔ∏è ÿ™ŸÖ ŸÖÿ≥ÿ≠ ÿßŸÑÿ∞ÿßŸÉÿ±ÿ© ÿßŸÑŸÖÿ§ŸÇÿ™ÿ© (${size} ÿπŸÜÿµÿ±)`);
  }

  /**
   * ÿßŸÑÿ≠ÿµŸàŸÑ ÿπŸÑŸâ ÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ÿßŸÑÿ∞ÿßŸÉÿ±ÿ© ÿßŸÑŸÖÿ§ŸÇÿ™ÿ©
   */
  getCacheStats() {
    return {
      cacheSize: this.cache.size,
      builtInTemplates: Object.keys(this.builtInTemplates).length,
      cacheTimeout: this.cacheTimeout / 1000 + 's'
    };
  }
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// üì¶ ÿßŸÑÿ™ÿµÿØŸäÿ±
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

module.exports = {
  SmartTemplateSystem,
  Template,
  templateSystem: new SmartTemplateSystem()
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJsb2dnZXIiLCJ0ZW1wbGF0ZVNjaGVtYSIsIlNjaGVtYSIsInRlbXBsYXRlSWQiLCJ0eXBlIiwiU3RyaW5nIiwidW5pcXVlIiwiaW5kZXgiLCJuYW1lIiwiY2F0ZWdvcnkiLCJlbnVtIiwiZGVmYXVsdCIsImNvbnRlbnQiLCJhciIsInRpdGxlIiwicmVxdWlyZWQiLCJib2R5Iiwic2hvcnRCb2R5IiwiYWN0aW9uVGV4dCIsImVuIiwidmFyaWFibGVzIiwicmVxdWlyZWRWYXJpYWJsZXMiLCJzZXR0aW5ncyIsImNoYW5uZWxzIiwicHJpb3JpdHkiLCJtYXhSZXRyaWVzIiwiTnVtYmVyIiwiZXhwaXJ5RGF5cyIsInNpbGVudCIsIkJvb2xlYW4iLCJtZXRhZGF0YSIsImljb24iLCJjb2xvciIsInNvdW5kIiwidmlicmF0aW9uIiwidXNhZ2UiLCJjb3VudCIsInN1Y2Nlc3NSYXRlIiwibGFzdFVzZWQiLCJEYXRlIiwiaXNBY3RpdmUiLCJjcmVhdGVkQXQiLCJub3ciLCJ1cGRhdGVkQXQiLCJjcmVhdGVkQnkiLCJ0YWdzIiwiVGVtcGxhdGUiLCJtb2RlbCIsIlNtYXJ0VGVtcGxhdGVTeXN0ZW0iLCJjb25zdHJ1Y3RvciIsImNhY2hlIiwiTWFwIiwiY2FjaGVUaW1lb3V0IiwiYnVpbHRJblRlbXBsYXRlcyIsImluaXRpYWxpemVCdWlsdEluVGVtcGxhdGVzIiwibG9hZEJ1aWx0SW5UZW1wbGF0ZXMiLCJTWVNURU1fQUxFUlQiLCJUUkFOU0FDVElPTl9TVUNDRVNTIiwiU0VDVVJJVFlfV0FSTklORyIsIlJFTUlOREVSX1VQQ09NSU5HIiwiRVJST1JfT1BFUkFUSU9OX0ZBSUxFRCIsIlNVQ0NFU1NfTk9USUZJQ0FUSU9OIiwiQlVTSU5FU1NfVVBEQVRFIiwiV0FSTklOR19OT1RJQ0UiLCJPYmplY3QiLCJlbnRyaWVzIiwiZm9yRWFjaCIsImtleSIsInRlbXBsYXRlIiwic2V0IiwiaXNCdWlsdEluIiwiaW5mbyIsImtleXMiLCJsZW5ndGgiLCJnZXRUZW1wbGF0ZSIsImxhbmd1YWdlIiwiaGFzIiwiZ2V0IiwiZmluZE9uZSIsImV4ZWMiLCJzZXRUaW1lb3V0IiwiZGVsZXRlIiwiZXJyb3IiLCJtZXNzYWdlIiwiY3JlYXRlVGVtcGxhdGUiLCJ0ZW1wbGF0ZURhdGEiLCJ2YWxpZGF0ZVRlbXBsYXRlRGF0YSIsIk1hdGgiLCJyYW5kb20iLCJ0b1N0cmluZyIsInN1YnN0ciIsInNhdmVkVGVtcGxhdGUiLCJzYXZlIiwidXBkYXRlVGVtcGxhdGUiLCJ1cGRhdGVzIiwicmVzdWx0IiwidXBkYXRlT25lIiwiZGVsZXRlVGVtcGxhdGUiLCJkZWxldGVPbmUiLCJzZWFyY2hUZW1wbGF0ZXMiLCJjcml0ZXJpYSIsInF1ZXJ5IiwidGVtcGxhdGVzIiwiZmluZCIsImNyZWF0ZU5vdGlmaWNhdGlvbkZyb21UZW1wbGF0ZSIsIkVycm9yIiwibWlzc2luZyIsImZpbHRlciIsInZhcmlhYmxlIiwiam9pbiIsIm5vdGlmaWNhdGlvbkNvbnRlbnQiLCJidWlsZE5vdGlmaWNhdGlvbkNvbnRlbnQiLCJ0ZW1wbGF0ZUNvbnRlbnQiLCJyZXBsYWNlVmFyaWFibGVzIiwidGV4dCIsInJlcGxhY2UiLCJtYXRjaCIsInVuZGVmaW5lZCIsImFsbFZhcmlhYmxlcyIsIlNldCIsIkFycmF5IiwiZnJvbSIsImdldEFsbFRlbXBsYXRlcyIsImZpbHRlcnMiLCJzb3J0IiwiZ2V0VGVtcGxhdGVzQnlDYXRlZ29yeSIsImNsZWFyQ2FjaGUiLCJzaXplIiwiY2xlYXIiLCJnZXRDYWNoZVN0YXRzIiwiY2FjaGVTaXplIiwibW9kdWxlIiwiZXhwb3J0cyIsInRlbXBsYXRlU3lzdGVtIl0sInNvdXJjZXMiOlsic21hcnRUZW1wbGF0ZVN5c3RlbS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICog4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQXHJcbiAqIPCfk4sgU21hcnQgTm90aWZpY2F0aW9uIFRlbXBsYXRlcyBTeXN0ZW1cclxuICog2YbYuNin2YUg2KfZhNmC2YjYp9mE2Kgg2KfZhNiw2YPZitipINmE2YTYpdi02LnYp9ix2KfYqiDZiNin2YTYqtmG2KjZitmH2KfYqlxyXG4gKiDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZBcclxuICogXHJcbiAqINmG2LjYp9mFINmC2YjYp9mE2Kgg2YXYqtmC2K/ZhSDZiNiw2YPZiiDZhdi5OlxyXG4gKiAtINiv2LnZhSDYp9mE2YTYutin2Kog2KfZhNmF2KrYudiv2K/YqSAo2KfZhNi52LHYqNmK2Kkg2YjYp9mE2KXZhtis2YTZitiy2YrYqSlcclxuICogLSDZhdiq2LrZitix2KfYqiDYr9mK2YbYp9mF2YrZg9mK2KlcclxuICogLSDYpdi52KfYr9ipINin2LPYqtiu2K/Yp9mFINmI2KrYrtiy2YrZhiDZhdik2YLYqlxyXG4gKiAtINiq2LXZhtmK2YHYp9iqINmF2YbYuNmF2KlcclxuICovXHJcblxyXG5jb25zdCBtb25nb29zZSA9IHJlcXVpcmUoJ21vbmdvb3NlJyk7XHJcbmNvbnN0IGxvZ2dlciA9IHJlcXVpcmUoJy4uL3V0aWxzL2xvZ2dlcicpO1xyXG5cclxuLy8g4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQXHJcbi8vIPCfk4sg2YbZhdmI2LDYrCDYp9mE2YLYp9mE2KhcclxuLy8g4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQXHJcblxyXG5jb25zdCB0ZW1wbGF0ZVNjaGVtYSA9IG5ldyBtb25nb29zZS5TY2hlbWEoe1xyXG4gIC8vINmF2LnZhNmI2YXYp9iqINij2LPYp9iz2YrYqVxyXG4gIHRlbXBsYXRlSWQ6IHsgdHlwZTogU3RyaW5nLCB1bmlxdWU6IHRydWUsIGluZGV4OiB0cnVlIH0sXHJcbiAgbmFtZTogU3RyaW5nLFxyXG4gIGNhdGVnb3J5OiB7XHJcbiAgICB0eXBlOiBTdHJpbmcsXHJcbiAgICBlbnVtOiBbXHJcbiAgICAgICdzeXN0ZW0nLCAgICAgICAgLy8g2KrZhtio2YrZh9in2Kog2KfZhNmG2LjYp9mFXHJcbiAgICAgICdidXNpbmVzcycsICAgICAgLy8g2KXYtNi52KfYsdin2Kog2KfZhNij2LnZhdin2YRcclxuICAgICAgJ3RyYW5zYWN0aW9uJywgICAvLyDYpdi02LnYp9ix2KfYqiDYp9mE2YXYudin2YXZhNin2KpcclxuICAgICAgJ3NlY3VyaXR5JywgICAgICAvLyDYqtmG2KjZitmH2KfYqiDYp9mE2KPZhdin2YZcclxuICAgICAgJ3JlbWluZGVyJywgICAgICAvLyDYp9mE2KrYsNmD2YrYsdin2KpcclxuICAgICAgJ3dhcm5pbmcnLCAgICAgICAvLyDYp9mE2KrYrdiw2YrYsdin2KpcclxuICAgICAgJ3N1Y2Nlc3MnLCAgICAgICAvLyDYsdiz2KfYptmEINin2YTZhtis2KfYrVxyXG4gICAgICAnZXJyb3InLCAgICAgICAgIC8vINix2LPYp9im2YQg2KfZhNiu2LfYo1xyXG4gICAgICAnY3VzdG9tJywgICAgICAgIC8vINmF2K7Ytdi1XHJcbiAgICBdLFxyXG4gICAgZGVmYXVsdDogJ2N1c3RvbScsXHJcbiAgfSxcclxuXHJcbiAgLy8g2KfZhNmF2K3YqtmI2Ykg2YXYqti52K/YryDYp9mE2YTYutin2KpcclxuICBjb250ZW50OiB7XHJcbiAgICBhcjoge1xyXG4gICAgICB0aXRsZTogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sXHJcbiAgICAgIGJvZHk6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSB9LFxyXG4gICAgICBzaG9ydEJvZHk6IFN0cmluZyxcclxuICAgICAgYWN0aW9uVGV4dDogU3RyaW5nLFxyXG4gICAgfSxcclxuICAgIGVuOiB7XHJcbiAgICAgIHRpdGxlOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUgfSxcclxuICAgICAgYm9keTogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sXHJcbiAgICAgIHNob3J0Qm9keTogU3RyaW5nLFxyXG4gICAgICBhY3Rpb25UZXh0OiBTdHJpbmcsXHJcbiAgICB9LFxyXG4gIH0sXHJcblxyXG4gIC8vINin2YTZhdiq2LrZitix2KfYqiDYp9mE2YXYr9i52YjZhdipXHJcbiAgdmFyaWFibGVzOiBbU3RyaW5nXSwgLy8g2YXYq9mEOiB7e3VzZXJfbmFtZX19LCB7e2Ftb3VudH19LCB7e2RhdGV9fVxyXG4gIHJlcXVpcmVkVmFyaWFibGVzOiBbU3RyaW5nXSxcclxuXHJcbiAgLy8g2KfZhNil2LnYr9in2K/Yp9iqXHJcbiAgc2V0dGluZ3M6IHtcclxuICAgIGNoYW5uZWxzOiBbU3RyaW5nXSwgLy8gWydlbWFpbCcsICdzbXMnLCAnd2hhdHNhcHAnLCAnaW5BcHAnLCAncHVzaCddXHJcbiAgICBwcmlvcml0eToge1xyXG4gICAgICB0eXBlOiBTdHJpbmcsXHJcbiAgICAgIGVudW06IFsnbG93JywgJ21lZGl1bScsICdoaWdoJywgJ2NyaXRpY2FsJ10sXHJcbiAgICAgIGRlZmF1bHQ6ICdtZWRpdW0nLFxyXG4gICAgfSxcclxuICAgIG1heFJldHJpZXM6IHsgdHlwZTogTnVtYmVyLCBkZWZhdWx0OiAzIH0sXHJcbiAgICBleHBpcnlEYXlzOiBOdW1iZXIsXHJcbiAgICBzaWxlbnQ6IHsgdHlwZTogQm9vbGVhbiwgZGVmYXVsdDogZmFsc2UgfSxcclxuICB9LFxyXG5cclxuICAvLyDYp9mE2KjZitin2YbYp9iqINin2YTZiNi12YHZitipXHJcbiAgbWV0YWRhdGE6IHtcclxuICAgIGljb246IFN0cmluZyxcclxuICAgIGNvbG9yOiBTdHJpbmcsXHJcbiAgICBzb3VuZDogU3RyaW5nLFxyXG4gICAgdmlicmF0aW9uOiB7IHR5cGU6IEJvb2xlYW4sIGRlZmF1bHQ6IHRydWUgfSxcclxuICB9LFxyXG5cclxuICAvLyDYp9mE2KPYr9in2KEg2YjYp9mE2KrYqtio2LlcclxuICB1c2FnZToge1xyXG4gICAgY291bnQ6IHsgdHlwZTogTnVtYmVyLCBkZWZhdWx0OiAwIH0sXHJcbiAgICBzdWNjZXNzUmF0ZTogeyB0eXBlOiBOdW1iZXIsIGRlZmF1bHQ6IDAgfSxcclxuICAgIGxhc3RVc2VkOiBEYXRlLFxyXG4gIH0sXHJcblxyXG4gIC8vINin2YTYqtit2YPZhVxyXG4gIGlzQWN0aXZlOiB7IHR5cGU6IEJvb2xlYW4sIGRlZmF1bHQ6IHRydWUgfSxcclxuICBjcmVhdGVkQXQ6IHsgdHlwZTogRGF0ZSwgZGVmYXVsdDogRGF0ZS5ub3cgfSxcclxuICB1cGRhdGVkQXQ6IHsgdHlwZTogRGF0ZSwgZGVmYXVsdDogRGF0ZS5ub3cgfSxcclxuICBjcmVhdGVkQnk6IFN0cmluZyxcclxuICB0YWdzOiBbU3RyaW5nXSxcclxufSk7XHJcblxyXG5jb25zdCBUZW1wbGF0ZSA9IG1vbmdvb3NlLm1vZGVsKCdOb3RpZmljYXRpb25UZW1wbGF0ZScsIHRlbXBsYXRlU2NoZW1hKTtcclxuXHJcbi8vIOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkFxyXG4vLyDwn46vINmG2LjYp9mFINin2YTZgtmI2KfZhNioINin2YTYsNmD2YrYqVxyXG4vLyDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZBcclxuXHJcbmNsYXNzIFNtYXJ0VGVtcGxhdGVTeXN0ZW0ge1xyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgLy8g2LDYp9mD2LHYqSDYp9mE2KrYrtiy2YrZhiDYp9mE2YXYpNmC2KpcclxuICAgIHRoaXMuY2FjaGUgPSBuZXcgTWFwKCk7XHJcbiAgICB0aGlzLmNhY2hlVGltZW91dCA9IDM2MDAwMDA7IC8vINiz2KfYudipINmI2KfYrdiv2KlcclxuXHJcbiAgICAvLyDYp9mE2YLZiNin2YTYqCDYp9mE2YXYr9mF2KzYqVxyXG4gICAgdGhpcy5idWlsdEluVGVtcGxhdGVzID0gdGhpcy5pbml0aWFsaXplQnVpbHRJblRlbXBsYXRlcygpO1xyXG5cclxuICAgIC8vINiq2K3ZhdmK2YQg2KfZhNmC2YjYp9mE2Kgg2KfZhNmF2K/Zhdis2Kkg2KXZhNmJINin2YTYsNin2YPYsdipINin2YTZhdik2YLYqtipXHJcbiAgICB0aGlzLmxvYWRCdWlsdEluVGVtcGxhdGVzKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDYqtmH2YrYptipINin2YTZgtmI2KfZhNioINin2YTZhdiv2YXYrNipXHJcbiAgICovXHJcbiAgaW5pdGlhbGl6ZUJ1aWx0SW5UZW1wbGF0ZXMoKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAvLyDYqtmG2KjZitmH2KfYqiDYp9mE2YbYuNin2YVcclxuICAgICAgU1lTVEVNX0FMRVJUOiB7XHJcbiAgICAgICAgbmFtZTogJ1N5c3RlbSBBbGVydCcsXHJcbiAgICAgICAgY2F0ZWdvcnk6ICdzeXN0ZW0nLFxyXG4gICAgICAgIGNvbnRlbnQ6IHtcclxuICAgICAgICAgIGFyOiB7XHJcbiAgICAgICAgICAgIHRpdGxlOiAn2KrZhtio2YrZhyDZhti42KfZhScsXHJcbiAgICAgICAgICAgIGJvZHk6ICfYqtmFINin2YPYqti02KfZgSB7e2FsZXJ0X3R5cGV9fSDZgdmKINin2YTZhti42KfZhS4g2KfZhNiq2YHYp9i12YrZhDoge3tkZXRhaWxzfX0nLFxyXG4gICAgICAgICAgICBzaG9ydEJvZHk6ICfYqtmG2KjZitmHOiB7e2FsZXJ0X3R5cGV9fScsXHJcbiAgICAgICAgICAgIGFjdGlvblRleHQ6ICfYudix2LYg2KfZhNiq2YHYp9i12YrZhCcsXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgZW46IHtcclxuICAgICAgICAgICAgdGl0bGU6ICdTeXN0ZW0gQWxlcnQnLFxyXG4gICAgICAgICAgICBib2R5OiAnQSB7e2FsZXJ0X3R5cGV9fSBoYXMgYmVlbiBkZXRlY3RlZCBpbiB0aGUgc3lzdGVtLiBEZXRhaWxzOiB7e2RldGFpbHN9fScsXHJcbiAgICAgICAgICAgIHNob3J0Qm9keTogJ0FsZXJ0OiB7e2FsZXJ0X3R5cGV9fScsXHJcbiAgICAgICAgICAgIGFjdGlvblRleHQ6ICdWaWV3IERldGFpbHMnLFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIHZhcmlhYmxlczogWydhbGVydF90eXBlJywgJ2RldGFpbHMnXSxcclxuICAgICAgICByZXF1aXJlZFZhcmlhYmxlczogWydhbGVydF90eXBlJ10sXHJcbiAgICAgICAgc2V0dGluZ3M6IHtcclxuICAgICAgICAgIGNoYW5uZWxzOiBbJ2VtYWlsJywgJ2luQXBwJywgJ3B1c2gnXSxcclxuICAgICAgICAgIHByaW9yaXR5OiAnaGlnaCcsXHJcbiAgICAgICAgICBtYXhSZXRyaWVzOiAzLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0sXHJcblxyXG4gICAgICAvLyDYpdi02LnYp9ix2KfYqiDYp9mE2YXYudin2YXZhNin2KpcclxuICAgICAgVFJBTlNBQ1RJT05fU1VDQ0VTUzoge1xyXG4gICAgICAgIG5hbWU6ICdUcmFuc2FjdGlvbiBTdWNjZXNzJyxcclxuICAgICAgICBjYXRlZ29yeTogJ3RyYW5zYWN0aW9uJyxcclxuICAgICAgICBjb250ZW50OiB7XHJcbiAgICAgICAgICBhcjoge1xyXG4gICAgICAgICAgICB0aXRsZTogJ+KchSDYqtmF2Kog2KfZhNi52YXZhNmK2Kkg2KjZhtis2KfYrScsXHJcbiAgICAgICAgICAgIGJvZHk6ICfYqtmFINil2YPZhdin2YQg2YXYudin2YXZhNiq2YMg2KjYsdmC2YUge3t0cmFuc2FjdGlvbl9pZH19LiDYp9mE2YXYqNmE2Lo6IHt7YW1vdW50fX0ge3tjdXJyZW5jeX19LiDYp9mE2KrYp9ix2YrYrjoge3tkYXRlfX0nLFxyXG4gICAgICAgICAgICBzaG9ydEJvZHk6ICfZhdi52KfZhdmE2Kkg2YbYp9is2K3YqToge3thbW91bnR9fScsXHJcbiAgICAgICAgICAgIGFjdGlvblRleHQ6ICfYudix2LYg2KfZhNmB2KfYqtmI2LHYqScsXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgZW46IHtcclxuICAgICAgICAgICAgdGl0bGU6ICfinIUgVHJhbnNhY3Rpb24gQ29tcGxldGVkJyxcclxuICAgICAgICAgICAgYm9keTogJ1lvdXIgdHJhbnNhY3Rpb24ge3t0cmFuc2FjdGlvbl9pZH19IGhhcyBiZWVuIGNvbXBsZXRlZC4gQW1vdW50OiB7e2Ftb3VudH19IHt7Y3VycmVuY3l9fS4gRGF0ZToge3tkYXRlfX0nLFxyXG4gICAgICAgICAgICBzaG9ydEJvZHk6ICdTdWNjZXNzOiB7e2Ftb3VudH19JyxcclxuICAgICAgICAgICAgYWN0aW9uVGV4dDogJ1ZpZXcgUmVjZWlwdCcsXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdmFyaWFibGVzOiBbJ3RyYW5zYWN0aW9uX2lkJywgJ2Ftb3VudCcsICdjdXJyZW5jeScsICdkYXRlJ10sXHJcbiAgICAgICAgcmVxdWlyZWRWYXJpYWJsZXM6IFsndHJhbnNhY3Rpb25faWQnLCAnYW1vdW50J10sXHJcbiAgICAgICAgc2V0dGluZ3M6IHtcclxuICAgICAgICAgIGNoYW5uZWxzOiBbJ2VtYWlsJywgJ3NtcycsICd3aGF0c2FwcCcsICdpbkFwcCddLFxyXG4gICAgICAgICAgcHJpb3JpdHk6ICdtZWRpdW0nLFxyXG4gICAgICAgICAgbWF4UmV0cmllczogMyxcclxuICAgICAgICB9LFxyXG4gICAgICB9LFxyXG5cclxuICAgICAgLy8g2KrZhtio2YrZh9in2Kog2KfZhNij2YXYp9mGXHJcbiAgICAgIFNFQ1VSSVRZX1dBUk5JTkc6IHtcclxuICAgICAgICBuYW1lOiAnU2VjdXJpdHkgV2FybmluZycsXHJcbiAgICAgICAgY2F0ZWdvcnk6ICdzZWN1cml0eScsXHJcbiAgICAgICAgY29udGVudDoge1xyXG4gICAgICAgICAgYXI6IHtcclxuICAgICAgICAgICAgdGl0bGU6ICfimqDvuI8g2KrZhtio2YrZhyDYo9mF2KfZhicsXHJcbiAgICAgICAgICAgIGJvZHk6ICfYqtmFINin2YPYqti02KfZgSDZhdit2KfZiNmE2Kkge3t0aHJlYXRfdHlwZX19INmB2Yog2K3Ys9in2KjZgy4g2KXYsNinINmE2YUg2KrZgtmFINio2YfYsNinINin2YTYpdis2LHYp9ih2Iwg2YrYsdis2Ykg2KrYutmK2YrYsSDZg9mE2YXYqSDYp9mE2YXYsdmI2LEg2KfZhNii2YYuJyxcclxuICAgICAgICAgICAgc2hvcnRCb2R5OiAn2KrYrdiw2YrYsSDYo9mF2KfZhjoge3t0aHJlYXRfdHlwZX19JyxcclxuICAgICAgICAgICAgYWN0aW9uVGV4dDogJ9iq2LrZitmK2LEg2YPZhNmF2Kkg2KfZhNmF2LHZiNixJyxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBlbjoge1xyXG4gICAgICAgICAgICB0aXRsZTogJ+KaoO+4jyBTZWN1cml0eSBXYXJuaW5nJyxcclxuICAgICAgICAgICAgYm9keTogJ0Ege3t0aHJlYXRfdHlwZX19IGF0dGVtcHQgd2FzIGRldGVjdGVkIG9uIHlvdXIgYWNjb3VudC4gSWYgdGhpcyB3YXNuXFwndCB5b3UsIHBsZWFzZSBjaGFuZ2UgeW91ciBwYXNzd29yZCBpbW1lZGlhdGVseS4nLFxyXG4gICAgICAgICAgICBzaG9ydEJvZHk6ICdTZWN1cml0eSBBbGVydDoge3t0aHJlYXRfdHlwZX19JyxcclxuICAgICAgICAgICAgYWN0aW9uVGV4dDogJ0NoYW5nZSBQYXNzd29yZCcsXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdmFyaWFibGVzOiBbJ3RocmVhdF90eXBlJ10sXHJcbiAgICAgICAgcmVxdWlyZWRWYXJpYWJsZXM6IFsndGhyZWF0X3R5cGUnXSxcclxuICAgICAgICBzZXR0aW5nczoge1xyXG4gICAgICAgICAgY2hhbm5lbHM6IFsnZW1haWwnLCAnc21zJywgJ3doYXRzYXBwJywgJ2luQXBwJywgJ3B1c2gnXSxcclxuICAgICAgICAgIHByaW9yaXR5OiAnY3JpdGljYWwnLFxyXG4gICAgICAgICAgbWF4UmV0cmllczogNSxcclxuICAgICAgICAgIHNpbGVudDogZmFsc2UsXHJcbiAgICAgICAgfSxcclxuICAgICAgfSxcclxuXHJcbiAgICAgIC8vINin2YTYqtiw2YPZitix2KfYqlxyXG4gICAgICBSRU1JTkRFUl9VUENPTUlORzoge1xyXG4gICAgICAgIG5hbWU6ICdSZW1pbmRlciAtIFVwY29taW5nIEV2ZW50JyxcclxuICAgICAgICBjYXRlZ29yeTogJ3JlbWluZGVyJyxcclxuICAgICAgICBjb250ZW50OiB7XHJcbiAgICAgICAgICBhcjoge1xyXG4gICAgICAgICAgICB0aXRsZTogJ+KPsCDYqtiw2YPZitixJyxcclxuICAgICAgICAgICAgYm9keTogJ9iq2LDZg9mK2LE6IHt7ZXZlbnRfbmFtZX19INiz2YrYqNiv2KMge3t0aW1lX3VudGlsfX0uIHt7ZXZlbnRfZGV0YWlsc319JyxcclxuICAgICAgICAgICAgc2hvcnRCb2R5OiAn2KrYsNmD2YrYsToge3tldmVudF9uYW1lfX0nLFxyXG4gICAgICAgICAgICBhY3Rpb25UZXh0OiAn2LnYsdi2INin2YTZhdiy2YrYrycsXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgZW46IHtcclxuICAgICAgICAgICAgdGl0bGU6ICfij7AgUmVtaW5kZXInLFxyXG4gICAgICAgICAgICBib2R5OiAnUmVtaW5kZXI6IHt7ZXZlbnRfbmFtZX19IHN0YXJ0cyB7e3RpbWVfdW50aWx9fS4ge3tldmVudF9kZXRhaWxzfX0nLFxyXG4gICAgICAgICAgICBzaG9ydEJvZHk6ICdSZW1pbmRlcjoge3tldmVudF9uYW1lfX0nLFxyXG4gICAgICAgICAgICBhY3Rpb25UZXh0OiAnTGVhcm4gTW9yZScsXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdmFyaWFibGVzOiBbJ2V2ZW50X25hbWUnLCAndGltZV91bnRpbCcsICdldmVudF9kZXRhaWxzJ10sXHJcbiAgICAgICAgcmVxdWlyZWRWYXJpYWJsZXM6IFsnZXZlbnRfbmFtZScsICd0aW1lX3VudGlsJ10sXHJcbiAgICAgICAgc2V0dGluZ3M6IHtcclxuICAgICAgICAgIGNoYW5uZWxzOiBbJ2VtYWlsJywgJ2luQXBwJywgJ3B1c2gnXSxcclxuICAgICAgICAgIHByaW9yaXR5OiAnbWVkaXVtJyxcclxuICAgICAgICAgIG1heFJldHJpZXM6IDIsXHJcbiAgICAgICAgfSxcclxuICAgICAgfSxcclxuXHJcbiAgICAgIC8vINix2LPYp9im2YQg2KfZhNiu2LfYo1xyXG4gICAgICBFUlJPUl9PUEVSQVRJT05fRkFJTEVEOiB7XHJcbiAgICAgICAgbmFtZTogJ09wZXJhdGlvbiBGYWlsZWQnLFxyXG4gICAgICAgIGNhdGVnb3J5OiAnZXJyb3InLFxyXG4gICAgICAgIGNvbnRlbnQ6IHtcclxuICAgICAgICAgIGFyOiB7XHJcbiAgICAgICAgICAgIHRpdGxlOiAn4p2MINmB2LTZhNiqINin2YTYudmF2YTZitipJyxcclxuICAgICAgICAgICAgYm9keTogJ9mB2LTZhNiqINin2YTYudmF2YTZitipOiB7e29wZXJhdGlvbl9uYW1lfX0uINin2YTYrti32KM6IHt7ZXJyb3JfbWVzc2FnZX19LiDZitix2KzZiSDYp9mE2YXYrdin2YjZhNipINmF2LHYqSDYo9iu2LHZiSDYo9mIINin2YTYqtmI2KfYtdmEINmF2Lkg2KfZhNiv2LnZhS4nLFxyXG4gICAgICAgICAgICBzaG9ydEJvZHk6ICfYrti32KM6IHt7b3BlcmF0aW9uX25hbWV9fScsXHJcbiAgICAgICAgICAgIGFjdGlvblRleHQ6ICfYp9mE2KrZiNin2LXZhCDZhdi5INin2YTYr9i52YUnLFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIGVuOiB7XHJcbiAgICAgICAgICAgIHRpdGxlOiAn4p2MIE9wZXJhdGlvbiBGYWlsZWQnLFxyXG4gICAgICAgICAgICBib2R5OiAnT3BlcmF0aW9uIHt7b3BlcmF0aW9uX25hbWV9fSBmYWlsZWQuIEVycm9yOiB7e2Vycm9yX21lc3NhZ2V9fS4gUGxlYXNlIHRyeSBhZ2FpbiBvciBjb250YWN0IHN1cHBvcnQuJyxcclxuICAgICAgICAgICAgc2hvcnRCb2R5OiAnRXJyb3I6IHt7b3BlcmF0aW9uX25hbWV9fScsXHJcbiAgICAgICAgICAgIGFjdGlvblRleHQ6ICdDb250YWN0IFN1cHBvcnQnLFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIHZhcmlhYmxlczogWydvcGVyYXRpb25fbmFtZScsICdlcnJvcl9tZXNzYWdlJ10sXHJcbiAgICAgICAgcmVxdWlyZWRWYXJpYWJsZXM6IFsnb3BlcmF0aW9uX25hbWUnXSxcclxuICAgICAgICBzZXR0aW5nczoge1xyXG4gICAgICAgICAgY2hhbm5lbHM6IFsnZW1haWwnLCAnaW5BcHAnLCAncHVzaCddLFxyXG4gICAgICAgICAgcHJpb3JpdHk6ICdoaWdoJyxcclxuICAgICAgICAgIG1heFJldHJpZXM6IDMsXHJcbiAgICAgICAgfSxcclxuICAgICAgfSxcclxuXHJcbiAgICAgIC8vINix2LPYp9im2YQg2KfZhNmG2KzYp9itXHJcbiAgICAgIFNVQ0NFU1NfTk9USUZJQ0FUSU9OOiB7XHJcbiAgICAgICAgbmFtZTogJ1N1Y2Nlc3MgTm90aWZpY2F0aW9uJyxcclxuICAgICAgICBjYXRlZ29yeTogJ3N1Y2Nlc3MnLFxyXG4gICAgICAgIGNvbnRlbnQ6IHtcclxuICAgICAgICAgIGFyOiB7XHJcbiAgICAgICAgICAgIHRpdGxlOiAn4pyFINmG2KzYrdiqINin2YTYudmF2YTZitipJyxcclxuICAgICAgICAgICAgYm9keTogJ3t7b3BlcmF0aW9uX25hbWV9fSDZgtivINiq2YXYqiDYqNmG2KzYp9itLiB7e2FkZGl0aW9uYWxfaW5mb319JyxcclxuICAgICAgICAgICAgc2hvcnRCb2R5OiAn2YbYrNin2K06IHt7b3BlcmF0aW9uX25hbWV9fScsXHJcbiAgICAgICAgICAgIGFjdGlvblRleHQ6ICfYudix2LYg2KfZhNiq2YHYp9i12YrZhCcsXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgZW46IHtcclxuICAgICAgICAgICAgdGl0bGU6ICfinIUgU3VjY2VzcycsXHJcbiAgICAgICAgICAgIGJvZHk6ICd7e29wZXJhdGlvbl9uYW1lfX0gaGFzIGJlZW4gY29tcGxldGVkIHN1Y2Nlc3NmdWxseS4ge3thZGRpdGlvbmFsX2luZm99fScsXHJcbiAgICAgICAgICAgIHNob3J0Qm9keTogJ1N1Y2Nlc3M6IHt7b3BlcmF0aW9uX25hbWV9fScsXHJcbiAgICAgICAgICAgIGFjdGlvblRleHQ6ICdWaWV3IERldGFpbHMnLFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIHZhcmlhYmxlczogWydvcGVyYXRpb25fbmFtZScsICdhZGRpdGlvbmFsX2luZm8nXSxcclxuICAgICAgICByZXF1aXJlZFZhcmlhYmxlczogWydvcGVyYXRpb25fbmFtZSddLFxyXG4gICAgICAgIHNldHRpbmdzOiB7XHJcbiAgICAgICAgICBjaGFubmVsczogWydlbWFpbCcsICdpbkFwcCcsICdwdXNoJ10sXHJcbiAgICAgICAgICBwcmlvcml0eTogJ2xvdycsXHJcbiAgICAgICAgICBtYXhSZXRyaWVzOiAyLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0sXHJcblxyXG4gICAgICAvLyDYqtmG2KjZitmH2KfYqiDYp9mE2KPYudmF2KfZhFxyXG4gICAgICBCVVNJTkVTU19VUERBVEU6IHtcclxuICAgICAgICBuYW1lOiAnQnVzaW5lc3MgVXBkYXRlJyxcclxuICAgICAgICBjYXRlZ29yeTogJ2J1c2luZXNzJyxcclxuICAgICAgICBjb250ZW50OiB7XHJcbiAgICAgICAgICBhcjoge1xyXG4gICAgICAgICAgICB0aXRsZTogJ/Cfk4og2KrYrdiv2YrYqyDYp9mE2KPYudmF2KfZhCcsXHJcbiAgICAgICAgICAgIGJvZHk6ICd7e3VwZGF0ZV90aXRsZX19XFxuXFxu2KfZhNiq2YHYp9i12YrZhDoge3t1cGRhdGVfY29udGVudH19XFxuXFxu2KfZhNiq2KfYsdmK2K46IHt7ZGF0ZX19JyxcclxuICAgICAgICAgICAgc2hvcnRCb2R5OiAne3t1cGRhdGVfdGl0bGV9fScsXHJcbiAgICAgICAgICAgIGFjdGlvblRleHQ6ICfYudix2LYg2KfZhNiq2YLYsdmK2LEnLFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIGVuOiB7XHJcbiAgICAgICAgICAgIHRpdGxlOiAn8J+TiiBCdXNpbmVzcyBVcGRhdGUnLFxyXG4gICAgICAgICAgICBib2R5OiAne3t1cGRhdGVfdGl0bGV9fVxcblxcbkRldGFpbHM6IHt7dXBkYXRlX2NvbnRlbnR9fVxcblxcbkRhdGU6IHt7ZGF0ZX19JyxcclxuICAgICAgICAgICAgc2hvcnRCb2R5OiAne3t1cGRhdGVfdGl0bGV9fScsXHJcbiAgICAgICAgICAgIGFjdGlvblRleHQ6ICdWaWV3IFJlcG9ydCcsXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdmFyaWFibGVzOiBbJ3VwZGF0ZV90aXRsZScsICd1cGRhdGVfY29udGVudCcsICdkYXRlJ10sXHJcbiAgICAgICAgcmVxdWlyZWRWYXJpYWJsZXM6IFsndXBkYXRlX3RpdGxlJ10sXHJcbiAgICAgICAgc2V0dGluZ3M6IHtcclxuICAgICAgICAgIGNoYW5uZWxzOiBbJ2VtYWlsJywgJ2luQXBwJywgJ3B1c2gnXSxcclxuICAgICAgICAgIHByaW9yaXR5OiAnbWVkaXVtJyxcclxuICAgICAgICAgIG1heFJldHJpZXM6IDMsXHJcbiAgICAgICAgfSxcclxuICAgICAgfSxcclxuXHJcbiAgICAgIC8vINiq2YbYqNmK2YfYp9iqINin2YTYqtit2LDZitixXHJcbiAgICAgIFdBUk5JTkdfTk9USUNFOiB7XHJcbiAgICAgICAgbmFtZTogJ1dhcm5pbmcgTm90aWNlJyxcclxuICAgICAgICBjYXRlZ29yeTogJ3dhcm5pbmcnLFxyXG4gICAgICAgIGNvbnRlbnQ6IHtcclxuICAgICAgICAgIGFyOiB7XHJcbiAgICAgICAgICAgIHRpdGxlOiAn4pqg77iPINiq2YbYqNmK2YcnLFxyXG4gICAgICAgICAgICBib2R5OiAn2KrZhtio2YrZhzoge3t3YXJuaW5nX21lc3NhZ2V9fS4g2KfZhNil2KzYsdin2KEg2KfZhNmF2LfZhNmI2Kg6IHt7cmVxdWlyZWRfYWN0aW9ufX0uJyxcclxuICAgICAgICAgICAgc2hvcnRCb2R5OiAn2KrZhtio2YrZhzoge3t3YXJuaW5nX21lc3NhZ2V9fScsXHJcbiAgICAgICAgICAgIGFjdGlvblRleHQ6ICfYp9iq2K7Yp9iwINil2KzYsdin2KEnLFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIGVuOiB7XHJcbiAgICAgICAgICAgIHRpdGxlOiAn4pqg77iPIFdhcm5pbmcnLFxyXG4gICAgICAgICAgICBib2R5OiAnV2FybmluZzoge3t3YXJuaW5nX21lc3NhZ2V9fS4gUmVxdWlyZWQgYWN0aW9uOiB7e3JlcXVpcmVkX2FjdGlvbn19LicsXHJcbiAgICAgICAgICAgIHNob3J0Qm9keTogJ1dhcm5pbmc6IHt7d2FybmluZ19tZXNzYWdlfX0nLFxyXG4gICAgICAgICAgICBhY3Rpb25UZXh0OiAnVGFrZSBBY3Rpb24nLFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIHZhcmlhYmxlczogWyd3YXJuaW5nX21lc3NhZ2UnLCAncmVxdWlyZWRfYWN0aW9uJ10sXHJcbiAgICAgICAgcmVxdWlyZWRWYXJpYWJsZXM6IFsnd2FybmluZ19tZXNzYWdlJ10sXHJcbiAgICAgICAgc2V0dGluZ3M6IHtcclxuICAgICAgICAgIGNoYW5uZWxzOiBbJ2VtYWlsJywgJ3NtcycsICdpbkFwcCcsICdwdXNoJ10sXHJcbiAgICAgICAgICBwcmlvcml0eTogJ2hpZ2gnLFxyXG4gICAgICAgICAgbWF4UmV0cmllczogMyxcclxuICAgICAgICB9LFxyXG4gICAgICB9LFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqINiq2K3ZhdmK2YQg2KfZhNmC2YjYp9mE2Kgg2KfZhNmF2K/Zhdis2Kkg2KXZhNmJINin2YTYsNin2YPYsdipINin2YTZhdik2YLYqtipXHJcbiAgICovXHJcbiAgbG9hZEJ1aWx0SW5UZW1wbGF0ZXMoKSB7XHJcbiAgICBPYmplY3QuZW50cmllcyh0aGlzLmJ1aWx0SW5UZW1wbGF0ZXMpLmZvckVhY2goKFtrZXksIHRlbXBsYXRlXSkgPT4ge1xyXG4gICAgICB0aGlzLmNhY2hlLnNldChrZXksIHtcclxuICAgICAgICAuLi50ZW1wbGF0ZSxcclxuICAgICAgICB0ZW1wbGF0ZUlkOiBrZXksXHJcbiAgICAgICAgaXNCdWlsdEluOiB0cnVlLFxyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGxvZ2dlci5pbmZvKGDinIUg2KrZhSDYqtit2YXZitmEICR7T2JqZWN0LmtleXModGhpcy5idWlsdEluVGVtcGxhdGVzKS5sZW5ndGh9INmC2KfZhNioINmF2K/ZhdisINil2YTZiSDYp9mE2LDYp9mD2LHYqSDYp9mE2YXYpNmC2KrYqWApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQXHJcbiAgICog8J+TiyDYpdiv2KfYsdipINin2YTZgtmI2KfZhNioXHJcbiAgICog4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQXHJcbiAgICovXHJcblxyXG4gIC8qKlxyXG4gICAqINin2YTYrdi12YjZhCDYudmE2Ykg2YLYp9mE2KhcclxuICAgKi9cclxuICBhc3luYyBnZXRUZW1wbGF0ZSh0ZW1wbGF0ZUlkLCBsYW5ndWFnZSA9ICdhcicpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIC8vINin2YTYqNit2Ksg2YHZiiDYp9mE2LDYp9mD2LHYqSDYp9mE2YXYpNmC2KrYqVxyXG4gICAgICBpZiAodGhpcy5jYWNoZS5oYXModGVtcGxhdGVJZCkpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jYWNoZS5nZXQodGVtcGxhdGVJZCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vINin2YTYqNit2Ksg2YHZiiDZgtin2LnYr9ipINin2YTYqNmK2KfZhtin2KpcclxuICAgICAgY29uc3QgdGVtcGxhdGUgPSBhd2FpdCBUZW1wbGF0ZS5maW5kT25lKHtcclxuICAgICAgICB0ZW1wbGF0ZUlkLFxyXG4gICAgICAgIGlzQWN0aXZlOiB0cnVlLFxyXG4gICAgICB9KS5leGVjKCk7XHJcblxyXG4gICAgICBpZiAodGVtcGxhdGUpIHtcclxuICAgICAgICAvLyDYpdi22KfZgdipINil2YTZiSDYp9mE2LDYp9mD2LHYqSDYp9mE2YXYpNmC2KrYqVxyXG4gICAgICAgIHRoaXMuY2FjaGUuc2V0KHRlbXBsYXRlSWQsIHRlbXBsYXRlKTtcclxuXHJcbiAgICAgICAgLy8g2KrYrdiv2YrYryDZiNmC2Kog2KfZhtiq2YfYp9ihINin2YTYtdmE2KfYrdmK2KlcclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHRoaXMuY2FjaGUuZGVsZXRlKHRlbXBsYXRlSWQpLCB0aGlzLmNhY2hlVGltZW91dCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiB0ZW1wbGF0ZTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGxvZ2dlci5lcnJvcihg4p2MINiu2LfYoyDZgdmKINis2YTYqCDYp9mE2YLYp9mE2Kg6ICR7ZXJyb3IubWVzc2FnZX1gKTtcclxuICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDYpdmG2LTYp9ihINmC2KfZhNioINis2K/ZitivXHJcbiAgICovXHJcbiAgYXN5bmMgY3JlYXRlVGVtcGxhdGUodGVtcGxhdGVEYXRhKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAvLyDYp9mE2KrYrdmC2YIg2YXZhiDYp9mE2KjZitin2YbYp9iqXHJcbiAgICAgIHRoaXMudmFsaWRhdGVUZW1wbGF0ZURhdGEodGVtcGxhdGVEYXRhKTtcclxuXHJcbiAgICAgIGNvbnN0IHRlbXBsYXRlID0gbmV3IFRlbXBsYXRlKHtcclxuICAgICAgICB0ZW1wbGF0ZUlkOiBgQ1VTVE9NXyR7RGF0ZS5ub3coKX1fJHtNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgOSl9YCxcclxuICAgICAgICAuLi50ZW1wbGF0ZURhdGEsXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3Qgc2F2ZWRUZW1wbGF0ZSA9IGF3YWl0IHRlbXBsYXRlLnNhdmUoKTtcclxuXHJcbiAgICAgIC8vINil2LbYp9mB2Kkg2KXZhNmJINin2YTYsNin2YPYsdipINin2YTZhdik2YLYqtipXHJcbiAgICAgIHRoaXMuY2FjaGUuc2V0KHNhdmVkVGVtcGxhdGUudGVtcGxhdGVJZCwgc2F2ZWRUZW1wbGF0ZSk7XHJcblxyXG4gICAgICBsb2dnZXIuaW5mbyhg4pyFINiq2YUg2KXZhti02KfYoSDZgtin2YTYqCDYrNiv2YrYrzogJHtzYXZlZFRlbXBsYXRlLnRlbXBsYXRlSWR9YCk7XHJcblxyXG4gICAgICByZXR1cm4gc2F2ZWRUZW1wbGF0ZTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGxvZ2dlci5lcnJvcihg4p2MINiu2LfYoyDZgdmKINil2YbYtNin2KEg2KfZhNmC2KfZhNioOiAke2Vycm9yLm1lc3NhZ2V9YCk7XHJcbiAgICAgIHRocm93IGVycm9yO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog2KrYrdiv2YrYqyDZgtin2YTYqFxyXG4gICAqL1xyXG4gIGFzeW5jIHVwZGF0ZVRlbXBsYXRlKHRlbXBsYXRlSWQsIHVwZGF0ZXMpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IFRlbXBsYXRlLnVwZGF0ZU9uZShcclxuICAgICAgICB7IHRlbXBsYXRlSWQgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAuLi51cGRhdGVzLFxyXG4gICAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgIH1cclxuICAgICAgKTtcclxuXHJcbiAgICAgIC8vINiq2K3Yr9mK2Ksg2KfZhNiw2KfZg9ix2Kkg2KfZhNmF2KTZgtiq2KlcclxuICAgICAgdGhpcy5jYWNoZS5kZWxldGUodGVtcGxhdGVJZCk7XHJcblxyXG4gICAgICBsb2dnZXIuaW5mbyhg8J+TnSDYqtmFINiq2K3Yr9mK2Ksg2KfZhNmC2KfZhNioOiAke3RlbXBsYXRlSWR9YCk7XHJcblxyXG4gICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgbG9nZ2VyLmVycm9yKGDinYwg2K7Yt9ijINmB2Yog2KrYrdiv2YrYqyDYp9mE2YLYp9mE2Kg6ICR7ZXJyb3IubWVzc2FnZX1gKTtcclxuICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDYrdiw2YEg2YLYp9mE2KhcclxuICAgKi9cclxuICBhc3luYyBkZWxldGVUZW1wbGF0ZSh0ZW1wbGF0ZUlkKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBUZW1wbGF0ZS5kZWxldGVPbmUoeyB0ZW1wbGF0ZUlkIH0pO1xyXG5cclxuICAgICAgLy8g2K3YsNmBINmF2YYg2KfZhNiw2KfZg9ix2Kkg2KfZhNmF2KTZgtiq2KlcclxuICAgICAgdGhpcy5jYWNoZS5kZWxldGUodGVtcGxhdGVJZCk7XHJcblxyXG4gICAgICBsb2dnZXIuaW5mbyhg8J+Xke+4jyDYqtmFINit2LDZgSDYp9mE2YLYp9mE2Kg6ICR7dGVtcGxhdGVJZH1gKTtcclxuXHJcbiAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBsb2dnZXIuZXJyb3IoYOKdjCDYrti32KMg2YHZiiDYrdiw2YEg2KfZhNmC2KfZhNioOiAke2Vycm9yLm1lc3NhZ2V9YCk7XHJcbiAgICAgIHRocm93IGVycm9yO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog2KfZhNio2K3YqyDYudmGINin2YTZgtmI2KfZhNioXHJcbiAgICovXHJcbiAgYXN5bmMgc2VhcmNoVGVtcGxhdGVzKGNyaXRlcmlhID0ge30pIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHF1ZXJ5ID0ge1xyXG4gICAgICAgIGlzQWN0aXZlOiB0cnVlLFxyXG4gICAgICAgIC4uLmNyaXRlcmlhLFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgY29uc3QgdGVtcGxhdGVzID0gYXdhaXQgVGVtcGxhdGUuZmluZChxdWVyeSkuZXhlYygpO1xyXG5cclxuICAgICAgcmV0dXJuIHRlbXBsYXRlcztcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGxvZ2dlci5lcnJvcihg4p2MINiu2LfYoyDZgdmKINin2YTYqNit2Ksg2LnZhiDYp9mE2YLZiNin2YTYqDogJHtlcnJvci5tZXNzYWdlfWApO1xyXG4gICAgICB0aHJvdyBlcnJvcjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkFxyXG4gICAqIPCflIQg2KXZhti02KfYoSDYp9mE2KXYtNi52KfYsSDZhdmGINin2YTZgtin2YTYqFxyXG4gICAqIOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkFxyXG4gICAqL1xyXG5cclxuICAvKipcclxuICAgKiDYpdmG2LTYp9ihINil2LTYudin2LEg2YXZhiDZgtin2YTYqFxyXG4gICAqL1xyXG4gIGFzeW5jIGNyZWF0ZU5vdGlmaWNhdGlvbkZyb21UZW1wbGF0ZSh0ZW1wbGF0ZUlkLCB2YXJpYWJsZXMgPSB7fSwgbGFuZ3VhZ2UgPSAnYXInKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAvLyDYp9mE2K3YtdmI2YQg2LnZhNmJINin2YTZgtin2YTYqFxyXG4gICAgICBjb25zdCB0ZW1wbGF0ZSA9IGF3YWl0IHRoaXMuZ2V0VGVtcGxhdGUodGVtcGxhdGVJZCwgbGFuZ3VhZ2UpO1xyXG5cclxuICAgICAgaWYgKCF0ZW1wbGF0ZSkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihg2KfZhNmC2KfZhNioINi62YrYsSDZhdmI2KzZiNivOiAke3RlbXBsYXRlSWR9YCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vINin2YTYqtit2YLZgiDZhdmGINin2YTZhdiq2LrZitix2KfYqiDYp9mE2YXYt9mE2YjYqNipXHJcbiAgICAgIGNvbnN0IG1pc3NpbmcgPSB0ZW1wbGF0ZS5yZXF1aXJlZFZhcmlhYmxlcy5maWx0ZXIoXHJcbiAgICAgICAgdmFyaWFibGUgPT4gIXZhcmlhYmxlc1t2YXJpYWJsZV1cclxuICAgICAgKTtcclxuXHJcbiAgICAgIGlmIChtaXNzaW5nLmxlbmd0aCA+IDApIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYNmF2KrYutmK2LHYp9iqINmF2LfZhNmI2KjYqSDZhdmB2YLZiNiv2Kk6ICR7bWlzc2luZy5qb2luKCcsICcpfWApO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyDYqNmG2KfYoSDYp9mE2KXYtNi52KfYsVxyXG4gICAgICBjb25zdCBub3RpZmljYXRpb25Db250ZW50ID0gdGhpcy5idWlsZE5vdGlmaWNhdGlvbkNvbnRlbnQoXHJcbiAgICAgICAgdGVtcGxhdGUsXHJcbiAgICAgICAgdmFyaWFibGVzLFxyXG4gICAgICAgIGxhbmd1YWdlXHJcbiAgICAgICk7XHJcblxyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIHRpdGxlOiBub3RpZmljYXRpb25Db250ZW50LnRpdGxlLFxyXG4gICAgICAgIGJvZHk6IG5vdGlmaWNhdGlvbkNvbnRlbnQuYm9keSxcclxuICAgICAgICBzaG9ydEJvZHk6IG5vdGlmaWNhdGlvbkNvbnRlbnQuc2hvcnRCb2R5LFxyXG4gICAgICAgIGFjdGlvblRleHQ6IG5vdGlmaWNhdGlvbkNvbnRlbnQuYWN0aW9uVGV4dCxcclxuICAgICAgICB0eXBlOiB0ZW1wbGF0ZS5jYXRlZ29yeSxcclxuICAgICAgICBjaGFubmVsczogdGVtcGxhdGUuc2V0dGluZ3MuY2hhbm5lbHMsXHJcbiAgICAgICAgcHJpb3JpdHk6IHRlbXBsYXRlLnNldHRpbmdzLnByaW9yaXR5LFxyXG4gICAgICB9O1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgbG9nZ2VyLmVycm9yKGDinYwg2K7Yt9ijINmB2Yog2KXZhti02KfYoSDYp9mE2KXYtNi52KfYsSDZhdmGINin2YTZgtin2YTYqDogJHtlcnJvci5tZXNzYWdlfWApO1xyXG4gICAgICB0aHJvdyBlcnJvcjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqINio2YbYp9ihINmF2K3YqtmI2Ykg2KfZhNil2LTYudin2LFcclxuICAgKi9cclxuICBidWlsZE5vdGlmaWNhdGlvbkNvbnRlbnQodGVtcGxhdGUsIHZhcmlhYmxlcywgbGFuZ3VhZ2UgPSAnYXInKSB7XHJcbiAgICBjb25zdCB0ZW1wbGF0ZUNvbnRlbnQgPSB0ZW1wbGF0ZS5jb250ZW50W2xhbmd1YWdlXSB8fCB0ZW1wbGF0ZS5jb250ZW50LmVuO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIHRpdGxlOiB0aGlzLnJlcGxhY2VWYXJpYWJsZXModGVtcGxhdGVDb250ZW50LnRpdGxlLCB2YXJpYWJsZXMpLFxyXG4gICAgICBib2R5OiB0aGlzLnJlcGxhY2VWYXJpYWJsZXModGVtcGxhdGVDb250ZW50LmJvZHksIHZhcmlhYmxlcyksXHJcbiAgICAgIHNob3J0Qm9keTogdGhpcy5yZXBsYWNlVmFyaWFibGVzKHRlbXBsYXRlQ29udGVudC5zaG9ydEJvZHkgfHwgJycsIHZhcmlhYmxlcyksXHJcbiAgICAgIGFjdGlvblRleHQ6IHRlbXBsYXRlQ29udGVudC5hY3Rpb25UZXh0LFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqINin2LPYqtio2K/Yp9mEINin2YTZhdiq2LrZitix2KfYqlxyXG4gICAqL1xyXG4gIHJlcGxhY2VWYXJpYWJsZXModGV4dCwgdmFyaWFibGVzKSB7XHJcbiAgICBpZiAoIXRleHQpIHJldHVybiAnJztcclxuXHJcbiAgICByZXR1cm4gdGV4dC5yZXBsYWNlKC9cXHtcXHsoXFx3KylcXH1cXH0vZywgKG1hdGNoLCB2YXJpYWJsZSkgPT4ge1xyXG4gICAgICByZXR1cm4gdmFyaWFibGVzW3ZhcmlhYmxlXSAhPT0gdW5kZWZpbmVkID8gU3RyaW5nKHZhcmlhYmxlc1t2YXJpYWJsZV0pIDogbWF0Y2g7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkFxyXG4gICAqIPCfm6DvuI8g2KfZhNij2K/ZiNin2Kog2KfZhNmF2LPYp9i52K/YqSDZiNin2YTYqtit2YLZglxyXG4gICAqIOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkFxyXG4gICAqL1xyXG5cclxuICAvKipcclxuICAgKiDYp9mE2KrYrdmC2YIg2YXZhiDYtdit2Kkg2KjZitin2YbYp9iqINin2YTZgtin2YTYqFxyXG4gICAqL1xyXG4gIHZhbGlkYXRlVGVtcGxhdGVEYXRhKHRlbXBsYXRlRGF0YSkge1xyXG4gICAgLy8g2KfZhNiq2K3ZgtmCINmF2YYg2KfZhNmF2K3YqtmI2Ykg2KfZhNi52LHYqNmKXHJcbiAgICBpZiAoIXRlbXBsYXRlRGF0YS5jb250ZW50Py5hcj8udGl0bGUgfHwgIXRlbXBsYXRlRGF0YS5jb250ZW50Py5hcj8uYm9keSkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ9in2YTZhdit2KrZiNmJINin2YTYudix2KjZiiDZhdi32YTZiNioICh0aXRsZSDZiCBib2R5KScpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vINin2YTYqtit2YLZgiDZhdmGINin2YTZhdit2KrZiNmJINin2YTYpdmG2KzZhNmK2LLZilxyXG4gICAgaWYgKCF0ZW1wbGF0ZURhdGEuY29udGVudD8uZW4/LnRpdGxlIHx8ICF0ZW1wbGF0ZURhdGEuY29udGVudD8uZW4/LmJvZHkpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCfYp9mE2YXYrdiq2YjZiSDYp9mE2KXZhtis2YTZitiy2Yog2YXYt9mE2YjYqCAodGl0bGUg2YggYm9keSknKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyDYp9mE2KrYrdmC2YIg2YXZhiDYp9mE2YXYqti62YrYsdin2KpcclxuICAgIGlmICh0ZW1wbGF0ZURhdGEucmVxdWlyZWRWYXJpYWJsZXMpIHtcclxuICAgICAgY29uc3QgYWxsVmFyaWFibGVzID0gbmV3IFNldChbXHJcbiAgICAgICAgLi4udGVtcGxhdGVEYXRhLnZhcmlhYmxlcyB8fCBbXSxcclxuICAgICAgICAuLi50ZW1wbGF0ZURhdGEucmVxdWlyZWRWYXJpYWJsZXMsXHJcbiAgICAgIF0pO1xyXG5cclxuICAgICAgdGVtcGxhdGVEYXRhLnZhcmlhYmxlcyA9IEFycmF5LmZyb20oYWxsVmFyaWFibGVzKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqINin2YTYrdi12YjZhCDYudmE2Ykg2KzZhdmK2Lkg2KfZhNmC2YjYp9mE2LMg2KfZhNmF2KrYp9it2KlcclxuICAgKi9cclxuICBhc3luYyBnZXRBbGxUZW1wbGF0ZXMoZmlsdGVycyA9IHt9KSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBxdWVyeSA9IHsgaXNBY3RpdmU6IHRydWUsIC4uLmZpbHRlcnMgfTtcclxuICAgICAgY29uc3QgdGVtcGxhdGVzID0gYXdhaXQgVGVtcGxhdGUuZmluZChxdWVyeSlcclxuICAgICAgICAuc29ydCh7IGNhdGVnb3J5OiAxLCBuYW1lOiAxIH0pXHJcbiAgICAgICAgLmV4ZWMoKTtcclxuXHJcbiAgICAgIHJldHVybiB0ZW1wbGF0ZXM7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBsb2dnZXIuZXJyb3IoYOKdjCDYrti32KMg2YHZiiDYrNmE2Kgg2KzZhdmK2Lkg2KfZhNmC2YjYp9mE2Kg6ICR7ZXJyb3IubWVzc2FnZX1gKTtcclxuICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDYp9mE2K3YtdmI2YQg2LnZhNmJINin2YTZgtmI2KfZhNioINit2LPYqCDYp9mE2YHYptipXHJcbiAgICovXHJcbiAgYXN5bmMgZ2V0VGVtcGxhdGVzQnlDYXRlZ29yeShjYXRlZ29yeSkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgdGVtcGxhdGVzID0gYXdhaXQgVGVtcGxhdGUuZmluZCh7XHJcbiAgICAgICAgY2F0ZWdvcnksXHJcbiAgICAgICAgaXNBY3RpdmU6IHRydWUsXHJcbiAgICAgIH0pLmV4ZWMoKTtcclxuXHJcbiAgICAgIHJldHVybiB0ZW1wbGF0ZXM7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBsb2dnZXIuZXJyb3IoYOKdjCDYrti32KMg2YHZiiDYrNmE2Kgg2KfZhNmC2YjYp9mE2Kgg2K3Ys9ioINin2YTZgdim2Kk6ICR7ZXJyb3IubWVzc2FnZX1gKTtcclxuICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDZhdiz2K0g2KfZhNiw2KfZg9ix2Kkg2KfZhNmF2KTZgtiq2KlcclxuICAgKi9cclxuICBjbGVhckNhY2hlKCkge1xyXG4gICAgY29uc3Qgc2l6ZSA9IHRoaXMuY2FjaGUuc2l6ZTtcclxuICAgIHRoaXMuY2FjaGUuY2xlYXIoKTtcclxuICAgIHRoaXMubG9hZEJ1aWx0SW5UZW1wbGF0ZXMoKTtcclxuICAgIGxvZ2dlci5pbmZvKGDwn5eR77iPINiq2YUg2YXYs9itINin2YTYsNin2YPYsdipINin2YTZhdik2YLYqtipICgke3NpemV9INi52YbYtdixKWApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog2KfZhNit2LXZiNmEINi52YTZiSDYpdit2LXYp9im2YrYp9iqINin2YTYsNin2YPYsdipINin2YTZhdik2YLYqtipXHJcbiAgICovXHJcbiAgZ2V0Q2FjaGVTdGF0cygpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIGNhY2hlU2l6ZTogdGhpcy5jYWNoZS5zaXplLFxyXG4gICAgICBidWlsdEluVGVtcGxhdGVzOiBPYmplY3Qua2V5cyh0aGlzLmJ1aWx0SW5UZW1wbGF0ZXMpLmxlbmd0aCxcclxuICAgICAgY2FjaGVUaW1lb3V0OiB0aGlzLmNhY2hlVGltZW91dCAvIDEwMDAgKyAncycsXHJcbiAgICB9O1xyXG4gIH1cclxufVxyXG5cclxuLy8g4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQXHJcbi8vIPCfk6Yg2KfZhNiq2LXYr9mK2LFcclxuLy8g4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQXHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHtcclxuICBTbWFydFRlbXBsYXRlU3lzdGVtLFxyXG4gIFRlbXBsYXRlLFxyXG4gIHRlbXBsYXRlU3lzdGVtOiBuZXcgU21hcnRUZW1wbGF0ZVN5c3RlbSgpLFxyXG59O1xyXG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxNQUFNQSxRQUFRLEdBQUdDLE9BQU8sQ0FBQyxVQUFVLENBQUM7QUFDcEMsTUFBTUMsTUFBTSxHQUFHRCxPQUFPLENBQUMsaUJBQWlCLENBQUM7O0FBRXpDO0FBQ0E7QUFDQTs7QUFFQSxNQUFNRSxjQUFjLEdBQUcsSUFBSUgsUUFBUSxDQUFDSSxNQUFNLENBQUM7RUFDekM7RUFDQUMsVUFBVSxFQUFFO0lBQUVDLElBQUksRUFBRUMsTUFBTTtJQUFFQyxNQUFNLEVBQUUsSUFBSTtJQUFFQyxLQUFLLEVBQUU7RUFBSyxDQUFDO0VBQ3ZEQyxJQUFJLEVBQUVILE1BQU07RUFDWkksUUFBUSxFQUFFO0lBQ1JMLElBQUksRUFBRUMsTUFBTTtJQUNaSyxJQUFJLEVBQUUsQ0FDSixRQUFRO0lBQVM7SUFDakIsVUFBVTtJQUFPO0lBQ2pCLGFBQWE7SUFBSTtJQUNqQixVQUFVO0lBQU87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