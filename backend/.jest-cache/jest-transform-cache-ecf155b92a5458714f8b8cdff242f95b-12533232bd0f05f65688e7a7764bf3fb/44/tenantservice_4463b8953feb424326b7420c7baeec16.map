{"version":3,"names":["EventEmitter","require","v4","uuidv4","Logger","TenantService","constructor","logger","tenants","Map","tenantUsers","tenantSettings","tenantQuotas","tenantStatus","stats","totalTenants","activeTenants","suspendedTenants","totalUsers","totalStorage","_initializeDefaults","quotaPlans","name","maxUsers","storageGB","apiCallsPerDay","monthlyPrice","features","createTenant","tenantData","slug","email","planType","subdomain","metadata","Error","Array","from","values","some","t","tenantId","plan","get","tenant","id","status","createdAt","Date","updatedAt","createdBy","userId","timezone","language","set","_defaultSettings","usedStorage","usedUsers","usedApiCalls","lastResetDate","isActive","lastActivityDate","loginCount","failedLoginCount","emit","info","error","message","brandingColor","logo","favicon","emailFrom","smtpEnabled","twoFactorRequired","passwordPolicy","minLength","requireUppercase","requireNumbers","requireSpecialChars","expiryDays","sessionTimeout","dataRetention","backupEnabled","auditLoggingEnabled","apiRateLimitEnabled","getTenant","getTenantBySlug","find","updateTenant","updates","Object","assign","suspendTenant","reason","suspensionReason","suspendedAt","warn","reactivateTenant","deleteTenant","archivedAt","addUserToTenant","role","quota","has","addedAt","lastActivity","removeUserFromTenant","users","delete","getTenantUsers","entries","map","data","getUserTenants","userTenants","forEach","push","updateTenantSettings","settings","currentSettings","getTenantSettings","getTenantQuota","userUsagePercent","toFixed","storageUsagePercent","apiUsagePercent","recordApiCall","recordStorageUsage","sizeGB","getAllTenants","filters","filter","search","toLowerCase","includes","getStatistics","size","length","archivedTenants","_countAllUsers","averageUsersPerTenant","_calculateAverageUsers","planDistribution","_getPlanDistribution","count","distribution","module","exports"],"sources":["tenant.service.js"],"sourcesContent":["/**\r\n * Tenant Service\r\n * خدمة الالتزامات\r\n * \r\n * المسؤوليات:\r\n * - إدارة الالتزامات\r\n * - إنشاء ومعالجة الالتزامات\r\n * - إدارة بيانات الالتزام\r\n * - تتبع استخدام الموارد\r\n */\r\n\r\nconst { EventEmitter } = require('events');\r\nconst { v4: uuidv4 } = require('uuid');\r\nconst Logger = require('../utils/logger');\r\n\r\nclass TenantService extends EventEmitter {\r\n  constructor() {\r\n    super();\r\n    this.logger = Logger;\r\n\r\n    // Tenant storage\r\n    this.tenants = new Map();\r\n\r\n    // Tenant-user mapping\r\n    this.tenantUsers = new Map();\r\n\r\n    // Tenant settings\r\n    this.tenantSettings = new Map();\r\n\r\n    // Tenant quotas\r\n    this.tenantQuotas = new Map();\r\n\r\n    // Tenant status tracking\r\n    this.tenantStatus = new Map();\r\n\r\n    // Statistics\r\n    this.stats = {\r\n      totalTenants: 0,\r\n      activeTenants: 0,\r\n      suspendedTenants: 0,\r\n      totalUsers: 0,\r\n      totalStorage: 0\r\n    };\r\n\r\n    this._initializeDefaults();\r\n  }\r\n\r\n  /**\r\n   * Initialize default settings\r\n   * تهيئة الإعدادات الافتراضية\r\n   * \r\n   * @private\r\n   */\r\n  _initializeDefaults() {\r\n    // Default quota plans\r\n    this.quotaPlans = new Map([\r\n      ['starter', {\r\n        name: 'Starter Plan',\r\n        maxUsers: 10,\r\n        storageGB: 10,\r\n        apiCallsPerDay: 10000,\r\n        monthlyPrice: 29,\r\n        features: ['basic_access', 'limited_api', 'community_support']\r\n      }],\r\n      ['professional', {\r\n        name: 'Professional Plan',\r\n        maxUsers: 100,\r\n        storageGB: 100,\r\n        apiCallsPerDay: 100000,\r\n        monthlyPrice: 99,\r\n        features: ['full_access', 'advanced_api', 'email_support', 'sso']\r\n      }],\r\n      ['enterprise', {\r\n        name: 'Enterprise Plan',\r\n        maxUsers: 10000,\r\n        storageGB: 10000,\r\n        apiCallsPerDay: 10000000,\r\n        monthlyPrice: 999,\r\n        features: ['full_access', 'unlimited_api', 'priority_support', 'sso', 'custom_features', 'dedicated_infrastructure']\r\n      }]\r\n    ]);\r\n  }\r\n\r\n  /**\r\n   * Create a new tenant\r\n   * إنشاء التزام جديد\r\n   * \r\n   * @param {Object} tenantData - Tenant data\r\n   * @returns {Object} Created tenant\r\n   */\r\n  createTenant(tenantData) {\r\n    try {\r\n      const {\r\n        name,\r\n        slug,\r\n        email,\r\n        planType = 'starter',\r\n        subdomain,\r\n        metadata = {}\r\n      } = tenantData;\r\n\r\n      if (!name || !slug || !email) {\r\n        throw new Error('Name, slug, and email are required');\r\n      }\r\n\r\n      // Check duplicate slug\r\n      if (Array.from(this.tenants.values()).some(t => t.slug === slug)) {\r\n        throw new Error(`Tenant slug already exists: ${slug}`);\r\n      }\r\n\r\n      const tenantId = `tenant-${uuidv4()}`;\r\n      const plan = this.quotaPlans.get(planType);\r\n\r\n      if (!plan) {\r\n        throw new Error(`Unknown plan type: ${planType}`);\r\n      }\r\n\r\n      const tenant = {\r\n        id: tenantId,\r\n        name,\r\n        slug,\r\n        email,\r\n        planType,\r\n        subdomain: subdomain || `${slug}.app`,\r\n        status: 'active',\r\n        createdAt: new Date(),\r\n        updatedAt: new Date(),\r\n        metadata: {\r\n          ...metadata,\r\n          createdBy: metadata.userId,\r\n          timezone: metadata.timezone || 'UTC',\r\n          language: metadata.language || 'en'\r\n        }\r\n      };\r\n\r\n      this.tenants.set(tenantId, tenant);\r\n      this.tenantSettings.set(tenantId, this._defaultSettings());\r\n      this.tenantQuotas.set(tenantId, {\r\n        ...plan,\r\n        usedStorage: 0,\r\n        usedUsers: 0,\r\n        usedApiCalls: 0,\r\n        lastResetDate: new Date()\r\n      });\r\n      this.tenantStatus.set(tenantId, {\r\n        isActive: true,\r\n        lastActivityDate: new Date(),\r\n        loginCount: 0,\r\n        failedLoginCount: 0\r\n      });\r\n\r\n      this.stats.totalTenants++;\r\n      this.stats.activeTenants++;\r\n\r\n      this.emit('tenant:created', { tenantId, tenant });\r\n      this.logger.info(`Tenant created: ${tenantId} (${name})`);\r\n\r\n      return tenant;\r\n    } catch (error) {\r\n      this.logger.error(`Error creating tenant: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get default tenant settings\r\n   * الحصول على إعدادات الالتزام الافتراضية\r\n   * \r\n   * @private\r\n   */\r\n  _defaultSettings() {\r\n    return {\r\n      brandingColor: '#3498db',\r\n      logo: null,\r\n      favicon: null,\r\n      emailFrom: 'noreply@app.local',\r\n      smtpEnabled: false,\r\n      twoFactorRequired: false,\r\n      passwordPolicy: {\r\n        minLength: 8,\r\n        requireUppercase: true,\r\n        requireNumbers: true,\r\n        requireSpecialChars: true,\r\n        expiryDays: 90\r\n      },\r\n      sessionTimeout: 3600, // 1 hour\r\n      dataRetention: 365, // 1 year\r\n      backupEnabled: true,\r\n      auditLoggingEnabled: true,\r\n      apiRateLimitEnabled: true\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Get tenant by ID\r\n   * الحصول على الالتزام حسب الهوية\r\n   * \r\n   * @param {String} tenantId - Tenant ID\r\n   * @returns {Object} Tenant\r\n   */\r\n  getTenant(tenantId) {\r\n    try {\r\n      return this.tenants.get(tenantId);\r\n    } catch (error) {\r\n      this.logger.error(`Error getting tenant: ${error.message}`);\r\n      return null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get tenant by slug\r\n   * الحصول على الالتزام حسب الخاصية\r\n   * \r\n   * @param {String} slug - Tenant slug\r\n   * @returns {Object} Tenant\r\n   */\r\n  getTenantBySlug(slug) {\r\n    try {\r\n      return Array.from(this.tenants.values()).find(t => t.slug === slug);\r\n    } catch (error) {\r\n      this.logger.error(`Error getting tenant by slug: ${error.message}`);\r\n      return null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Update tenant\r\n   * تحديث الالتزام\r\n   * \r\n   * @param {String} tenantId - Tenant ID\r\n   * @param {Object} updates - Updates\r\n   */\r\n  updateTenant(tenantId, updates) {\r\n    try {\r\n      const tenant = this.tenants.get(tenantId);\r\n      if (!tenant) throw new Error(`Tenant not found: ${tenantId}`);\r\n\r\n      Object.assign(tenant, updates);\r\n      tenant.updatedAt = new Date();\r\n\r\n      this.emit('tenant:updated', { tenantId, updates });\r\n      this.logger.info(`Tenant updated: ${tenantId}`);\r\n    } catch (error) {\r\n      this.logger.error(`Error updating tenant: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Suspend tenant\r\n   * إيقاف الالتزام\r\n   * \r\n   * @param {String} tenantId - Tenant ID\r\n   * @param {String} reason - Suspension reason\r\n   */\r\n  suspendTenant(tenantId, reason) {\r\n    try {\r\n      const tenant = this.tenants.get(tenantId);\r\n      if (!tenant) throw new Error(`Tenant not found: ${tenantId}`);\r\n\r\n      tenant.status = 'suspended';\r\n      tenant.suspensionReason = reason;\r\n      tenant.suspendedAt = new Date();\r\n\r\n      this.stats.activeTenants--;\r\n      this.stats.suspendedTenants++;\r\n\r\n      this.emit('tenant:suspended', { tenantId, reason });\r\n      this.logger.warn(`Tenant suspended: ${tenantId} - ${reason}`);\r\n    } catch (error) {\r\n      this.logger.error(`Error suspending tenant: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Reactivate tenant\r\n   * إعادة تفعيل الالتزام\r\n   * \r\n   * @param {String} tenantId - Tenant ID\r\n   */\r\n  reactivateTenant(tenantId) {\r\n    try {\r\n      const tenant = this.tenants.get(tenantId);\r\n      if (!tenant) throw new Error(`Tenant not found: ${tenantId}`);\r\n\r\n      tenant.status = 'active';\r\n      tenant.suspensionReason = null;\r\n      tenant.suspendedAt = null;\r\n\r\n      this.stats.activeTenants++;\r\n      this.stats.suspendedTenants--;\r\n\r\n      this.emit('tenant:reactivated', { tenantId });\r\n      this.logger.info(`Tenant reactivated: ${tenantId}`);\r\n    } catch (error) {\r\n      this.logger.error(`Error reactivating tenant: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Delete tenant\r\n   * حذف الالتزام\r\n   * \r\n   * @param {String} tenantId - Tenant ID\r\n   */\r\n  deleteTenant(tenantId) {\r\n    try {\r\n      const tenant = this.tenants.get(tenantId);\r\n      if (!tenant) throw new Error(`Tenant not found: ${tenantId}`);\r\n\r\n      // Archive tenant data\r\n      tenant.archivedAt = new Date();\r\n      tenant.status = 'archived';\r\n\r\n      this.stats.totalTenants--;\r\n      if (tenant.status === 'active') {\r\n        this.stats.activeTenants--;\r\n      }\r\n\r\n      this.emit('tenant:archived', { tenantId });\r\n      this.logger.info(`Tenant archived: ${tenantId}`);\r\n    } catch (error) {\r\n      this.logger.error(`Error deleting tenant: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Add user to tenant\r\n   * إضافة مستخدم للالتزام\r\n   * \r\n   * @param {String} tenantId - Tenant ID\r\n   * @param {String} userId - User ID\r\n   * @param {String} role - User role in tenant\r\n   */\r\n  addUserToTenant(tenantId, userId, role = 'member') {\r\n    try {\r\n      const tenant = this.tenants.get(tenantId);\r\n      if (!tenant) throw new Error(`Tenant not found: ${tenantId}`);\r\n\r\n      const quota = this.tenantQuotas.get(tenantId);\r\n      if (quota.usedUsers >= quota.maxUsers) {\r\n        throw new Error(`User limit reached for tenant: ${tenantId}`);\r\n      }\r\n\r\n      if (!this.tenantUsers.has(tenantId)) {\r\n        this.tenantUsers.set(tenantId, new Map());\r\n      }\r\n\r\n      this.tenantUsers.get(tenantId).set(userId, {\r\n        role,\r\n        addedAt: new Date(),\r\n        lastActivity: new Date()\r\n      });\r\n\r\n      quota.usedUsers++;\r\n      this.stats.totalUsers++;\r\n\r\n      this.emit('tenant:user_added', { tenantId, userId, role });\r\n      this.logger.info(`User ${userId} added to tenant ${tenantId}`);\r\n    } catch (error) {\r\n      this.logger.error(`Error adding user to tenant: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Remove user from tenant\r\n   * إزالة مستخدم من الالتزام\r\n   * \r\n   * @param {String} tenantId - Tenant ID\r\n   * @param {String} userId - User ID\r\n   */\r\n  removeUserFromTenant(tenantId, userId) {\r\n    try {\r\n      const users = this.tenantUsers.get(tenantId);\r\n      if (!users || !users.has(userId)) {\r\n        throw new Error(`User not found in tenant: ${tenantId}`);\r\n      }\r\n\r\n      users.delete(userId);\r\n\r\n      const quota = this.tenantQuotas.get(tenantId);\r\n      if (quota) {\r\n        quota.usedUsers--;\r\n        this.stats.totalUsers--;\r\n      }\r\n\r\n      this.emit('tenant:user_removed', { tenantId, userId });\r\n      this.logger.info(`User ${userId} removed from tenant ${tenantId}`);\r\n    } catch (error) {\r\n      this.logger.error(`Error removing user from tenant: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get tenant users\r\n   * الحصول على مستخدمي الالتزام\r\n   * \r\n   * @param {String} tenantId - Tenant ID\r\n   * @returns {Array} Users\r\n   */\r\n  getTenantUsers(tenantId) {\r\n    try {\r\n      const users = this.tenantUsers.get(tenantId) || new Map();\r\n      return Array.from(users.entries()).map(([userId, data]) => ({\r\n        userId,\r\n        ...data\r\n      }));\r\n    } catch (error) {\r\n      this.logger.error(`Error getting tenant users: ${error.message}`);\r\n      return [];\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get user tenants\r\n   * الحصول على التزامات المستخدم\r\n   * \r\n   * @param {String} userId - User ID\r\n   * @returns {Array} Tenants\r\n   */\r\n  getUserTenants(userId) {\r\n    try {\r\n      const userTenants = [];\r\n      this.tenantUsers.forEach((users, tenantId) => {\r\n        if (users.has(userId)) {\r\n          const tenant = this.tenants.get(tenantId);\r\n          userTenants.push({\r\n            ...tenant,\r\n            role: users.get(userId).role\r\n          });\r\n        }\r\n      });\r\n      return userTenants;\r\n    } catch (error) {\r\n      this.logger.error(`Error getting user tenants: ${error.message}`);\r\n      return [];\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Update tenant settings\r\n   * تحديث إعدادات الالتزام\r\n   * \r\n   * @param {String} tenantId - Tenant ID\r\n   * @param {Object} settings - Settings\r\n   */\r\n  updateTenantSettings(tenantId, settings) {\r\n    try {\r\n      const tenant = this.tenants.get(tenantId);\r\n      if (!tenant) throw new Error(`Tenant not found: ${tenantId}`);\r\n\r\n      const currentSettings = this.tenantSettings.get(tenantId);\r\n      Object.assign(currentSettings, settings);\r\n\r\n      this.emit('tenant:settings_updated', { tenantId, settings });\r\n      this.logger.info(`Tenant settings updated: ${tenantId}`);\r\n    } catch (error) {\r\n      this.logger.error(`Error updating tenant settings: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get tenant settings\r\n   * الحصول على إعدادات الالتزام\r\n   * \r\n   * @param {String} tenantId - Tenant ID\r\n   * @returns {Object} Settings\r\n   */\r\n  getTenantSettings(tenantId) {\r\n    try {\r\n      return this.tenantSettings.get(tenantId);\r\n    } catch (error) {\r\n      this.logger.error(`Error getting tenant settings: ${error.message}`);\r\n      return null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get tenant quota usage\r\n   * الحصول على استخدام حصة الالتزام\r\n   * \r\n   * @param {String} tenantId - Tenant ID\r\n   * @returns {Object} Quota info\r\n   */\r\n  getTenantQuota(tenantId) {\r\n    try {\r\n      const quota = this.tenantQuotas.get(tenantId);\r\n      if (!quota) return null;\r\n\r\n      return {\r\n        ...quota,\r\n        userUsagePercent: (quota.usedUsers / quota.maxUsers * 100).toFixed(2),\r\n        storageUsagePercent: (quota.usedStorage / quota.storageGB * 100).toFixed(2),\r\n        apiUsagePercent: (quota.usedApiCalls / quota.apiCallsPerDay * 100).toFixed(2)\r\n      };\r\n    } catch (error) {\r\n      this.logger.error(`Error getting tenant quota: ${error.message}`);\r\n      return null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Record API call\r\n   * تسجيل استدعاء واجهة برمجية\r\n   * \r\n   * @param {String} tenantId - Tenant ID\r\n   */\r\n  recordApiCall(tenantId) {\r\n    try {\r\n      const quota = this.tenantQuotas.get(tenantId);\r\n      if (quota) {\r\n        quota.usedApiCalls++;\r\n      }\r\n    } catch (error) {\r\n      this.logger.error(`Error recording API call: ${error.message}`);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Record storage usage\r\n   * تسجيل استخدام التخزين\r\n   * \r\n   * @param {String} tenantId - Tenant ID\r\n   * @param {Number} sizeGB - Size in GB\r\n   */\r\n  recordStorageUsage(tenantId, sizeGB) {\r\n    try {\r\n      const quota = this.tenantQuotas.get(tenantId);\r\n      if (quota) {\r\n        quota.usedStorage += sizeGB;\r\n      }\r\n    } catch (error) {\r\n      this.logger.error(`Error recording storage usage: ${error.message}`);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get all tenants\r\n   * الحصول على جميع الالتزامات\r\n   * \r\n   * @param {Object} filters - Filters\r\n   * @returns {Array} Tenants\r\n   */\r\n  getAllTenants(filters = {}) {\r\n    try {\r\n      let tenants = Array.from(this.tenants.values());\r\n\r\n      if (filters.status) {\r\n        tenants = tenants.filter(t => t.status === filters.status);\r\n      }\r\n\r\n      if (filters.planType) {\r\n        tenants = tenants.filter(t => t.planType === filters.planType);\r\n      }\r\n\r\n      if (filters.search) {\r\n        const search = filters.search.toLowerCase();\r\n        tenants = tenants.filter(\r\n          t =>\r\n            t.name.toLowerCase().includes(search) ||\r\n            t.slug.toLowerCase().includes(search) ||\r\n            t.email.toLowerCase().includes(search)\r\n        );\r\n      }\r\n\r\n      return tenants;\r\n    } catch (error) {\r\n      this.logger.error(`Error getting all tenants: ${error.message}`);\r\n      return [];\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get statistics\r\n   * الحصول على الإحصائيات\r\n   * \r\n   * @returns {Object} Statistics\r\n   */\r\n  getStatistics() {\r\n    return {\r\n      totalTenants: this.tenants.size,\r\n      activeTenants: Array.from(this.tenants.values()).filter(t => t.status === 'active').length,\r\n      suspendedTenants: Array.from(this.tenants.values()).filter(t => t.status === 'suspended').length,\r\n      archivedTenants: Array.from(this.tenants.values()).filter(t => t.status === 'archived').length,\r\n      totalUsers: this._countAllUsers(),\r\n      averageUsersPerTenant: this._calculateAverageUsers(),\r\n      planDistribution: this._getPlanDistribution()\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Count all users across tenants\r\n   * عد جميع المستخدمين في جميع الالتزامات\r\n   * \r\n   * @private\r\n   */\r\n  _countAllUsers() {\r\n    let count = 0;\r\n    this.tenantUsers.forEach(users => {\r\n      count += users.size;\r\n    });\r\n    return count;\r\n  }\r\n\r\n  /**\r\n   * Calculate average users per tenant\r\n   * حساب متوسط المستخدمين لكل التزام\r\n   * \r\n   * @private\r\n   */\r\n  _calculateAverageUsers() {\r\n    const totalUsers = this._countAllUsers();\r\n    return this.tenants.size > 0 ? (totalUsers / this.tenants.size).toFixed(2) : 0;\r\n  }\r\n\r\n  /**\r\n   * Get plan distribution\r\n   * الحصول على توزيع الخطط\r\n   * \r\n   * @private\r\n   */\r\n  _getPlanDistribution() {\r\n    const distribution = {};\r\n    this.tenants.forEach(tenant => {\r\n      distribution[tenant.planType] = (distribution[tenant.planType] || 0) + 1;\r\n    });\r\n    return distribution;\r\n  }\r\n}\r\n\r\nmodule.exports = new TenantService();\r\n"],"mappings":"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","ignoreList":[]}