1f29436dffb86e7b413f30c408ba30f2
/**
 * Test Helpers and Utilities
 * Provides utilities for proper test cleanup and resource management
 */

// Track all active resources
const resources = {
  timers: new Set(),
  intervals: new Set(),
  connections: new Set(),
  servers: new Set(),
  promises: new Set()
};

/**
 * Track a timeout and ensure it gets cleaned up
 */
function trackTimeout(callback, delay, ...args) {
  const timeoutId = setTimeout(callback, delay, ...args);
  resources.timers.add(timeoutId);
  return timeoutId;
}

/**
 * Track an interval and ensure it gets cleaned up
 */
function trackInterval(callback, delay, ...args) {
  const intervalId = setInterval(callback, delay, ...args);
  resources.intervals.add(intervalId);
  return intervalId;
}

/**
 * Clear a timeout and remove from tracking
 */
function clearTrackedTimeout(timeoutId) {
  clearTimeout(timeoutId);
  resources.timers.delete(timeoutId);
}

/**
 * Clear an interval and remove from tracking
 */
function clearTrackedInterval(intervalId) {
  clearInterval(intervalId);
  resources.intervals.delete(intervalId);
}

/**
 * Track a promise for cleanup
 */
function trackPromise(promise) {
  resources.promises.add(promise);
  return promise.finally(() => {
    resources.promises.delete(promise);
  });
}

/**
 * Create a promise with timeout
 */
function createTimeoutPromise(delay) {
  return new Promise(resolve => {
    const timeoutId = trackTimeout(() => {
      resolve();
      resources.timers.delete(timeoutId);
    }, delay);
  });
}

/**
 * Wait for a condition with timeout
 */
async function waitFor(condition, options = {}) {
  const {
    timeout = 5000,
    interval = 100,
    message = 'Condition not met within timeout'
  } = options;
  const startTime = Date.now();
  while (Date.now() - startTime < timeout) {
    if (await condition()) {
      return true;
    }
    await createTimeoutPromise(interval);
  }
  throw new Error(message);
}

/**
 * Cleanup all tracked resources
 */
async function cleanupResources() {
  // Clear all timeouts
  for (const timeoutId of resources.timers) {
    try {
      clearTimeout(timeoutId);
    } catch (_error) {
      // Ignore errors
    }
  }
  resources.timers.clear();

  // Clear all intervals
  for (const intervalId of resources.intervals) {
    try {
      clearInterval(intervalId);
    } catch (_error) {
      // Ignore errors
    }
  }
  resources.intervals.clear();

  // Wait for promises to settle
  try {
    await Promise.allSettled(Array.from(resources.promises));
  } catch (_error) {
    // Ignore errors
  }
  resources.promises.clear();

  // Close connections
  for (const connection of resources.connections) {
    try {
      if (typeof connection.close === 'function') {
        await connection.close();
      } else if (typeof connection.destroy === 'function') {
        await connection.destroy();
      }
    } catch (_error) {
      // Ignore errors
    }
  }
  resources.connections.clear();

  // Close servers
  for (const server of resources.servers) {
    try {
      await new Promise((resolve, reject) => {
        server.close(error => {
          if (error) reject(error);else resolve();
        });
      });
    } catch (error) {
      // Ignore errors
    }
  }
  resources.servers.clear();
}

/**
 * Create a test timeout wrapper
 */
function withTimeout(testFn, customTimeout = 30000) {
  return async function () {
    const timeoutPromise = new Promise((_, reject) => {
      const timeoutId = trackTimeout(() => {
        reject(new Error(`Test timeout after ${customTimeout}ms`));
      }, customTimeout);
    });
    try {
      await Promise.race([testFn(), timeoutPromise]);
    } finally {
      await cleanupResources();
    }
  };
}

/**
 * Mock factory for creating reusable mocks
 */
class MockFactory {
  constructor() {
    this.mocks = new Map();
  }
  create(name, implementation = {}) {
    const mock = jest.fn(implementation);
    this.mocks.set(name, mock);
    return mock;
  }
  get(name) {
    return this.mocks.get(name);
  }
  reset(name) {
    const mock = this.mocks.get(name);
    if (mock) {
      mock.mockReset();
    }
  }
  resetAll() {
    for (const mock of this.mocks.values()) {
      mock.mockReset();
    }
  }
  clearAll() {
    this.mocks.clear();
  }
}

/**
 * HTTP Request Helper
 */
class HTTPHelper {
  static async request(app, method, path, options = {}) {
    let req = require('supertest')(app)[method.toLowerCase()](path);
    if (options.headers) {
      req = req.set(options.headers);
    }
    if (options.body) {
      req = req.send(options.body);
    }
    if (options.query) {
      req = req.query(options.query);
    }
    return req;
  }
  static async get(app, path, options = {}) {
    return this.request(app, 'GET', path, options);
  }
  static async post(app, path, body, options = {}) {
    return this.request(app, 'POST', path, {
      ...options,
      body
    });
  }
  static async put(app, path, body, options = {}) {
    return this.request(app, 'PUT', path, {
      ...options,
      body
    });
  }
  static async delete(app, path, options = {}) {
    return this.request(app, 'DELETE', path, options);
  }
}

/**
 * Database Helper
 */
class DatabaseHelper {
  static async connectAndClear(uri, dbName) {
    const mongoose = require('mongoose');
    await mongoose.connect(uri, {
      dbName: dbName || 'test_db'
    });
  }
  static async clearDatabase() {
    const mongoose = require('mongoose');
    const collections = mongoose.connection.collections;
    for (const collection of Object.values(collections)) {
      await collection.deleteMany({});
    }
  }
  static async disconnect() {
    const mongoose = require('mongoose');
    if (mongoose.connection.readyState !== 0) {
      await mongoose.disconnect();
    }
  }
}

// Export functions and classes
module.exports = {
  trackTimeout,
  trackInterval,
  clearTrackedTimeout,
  clearTrackedInterval,
  trackPromise,
  createTimeoutPromise,
  waitFor,
  cleanupResources,
  withTimeout,
  MockFactory,
  HTTPHelper,
  DatabaseHelper,
  getResources: () => ({
    ...resources
  })
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZXNvdXJjZXMiLCJ0aW1lcnMiLCJTZXQiLCJpbnRlcnZhbHMiLCJjb25uZWN0aW9ucyIsInNlcnZlcnMiLCJwcm9taXNlcyIsInRyYWNrVGltZW91dCIsImNhbGxiYWNrIiwiZGVsYXkiLCJhcmdzIiwidGltZW91dElkIiwic2V0VGltZW91dCIsImFkZCIsInRyYWNrSW50ZXJ2YWwiLCJpbnRlcnZhbElkIiwic2V0SW50ZXJ2YWwiLCJjbGVhclRyYWNrZWRUaW1lb3V0IiwiY2xlYXJUaW1lb3V0IiwiZGVsZXRlIiwiY2xlYXJUcmFja2VkSW50ZXJ2YWwiLCJjbGVhckludGVydmFsIiwidHJhY2tQcm9taXNlIiwicHJvbWlzZSIsImZpbmFsbHkiLCJjcmVhdGVUaW1lb3V0UHJvbWlzZSIsIlByb21pc2UiLCJyZXNvbHZlIiwid2FpdEZvciIsImNvbmRpdGlvbiIsIm9wdGlvbnMiLCJ0aW1lb3V0IiwiaW50ZXJ2YWwiLCJtZXNzYWdlIiwic3RhcnRUaW1lIiwiRGF0ZSIsIm5vdyIsIkVycm9yIiwiY2xlYW51cFJlc291cmNlcyIsIl9lcnJvciIsImNsZWFyIiwiYWxsU2V0dGxlZCIsIkFycmF5IiwiZnJvbSIsImNvbm5lY3Rpb24iLCJjbG9zZSIsImRlc3Ryb3kiLCJzZXJ2ZXIiLCJyZWplY3QiLCJlcnJvciIsIndpdGhUaW1lb3V0IiwidGVzdEZuIiwiY3VzdG9tVGltZW91dCIsInRpbWVvdXRQcm9taXNlIiwiXyIsInJhY2UiLCJNb2NrRmFjdG9yeSIsImNvbnN0cnVjdG9yIiwibW9ja3MiLCJNYXAiLCJjcmVhdGUiLCJuYW1lIiwiaW1wbGVtZW50YXRpb24iLCJtb2NrIiwiamVzdCIsImZuIiwic2V0IiwiZ2V0IiwicmVzZXQiLCJtb2NrUmVzZXQiLCJyZXNldEFsbCIsInZhbHVlcyIsImNsZWFyQWxsIiwiSFRUUEhlbHBlciIsInJlcXVlc3QiLCJhcHAiLCJtZXRob2QiLCJwYXRoIiwicmVxIiwicmVxdWlyZSIsInRvTG93ZXJDYXNlIiwiaGVhZGVycyIsImJvZHkiLCJzZW5kIiwicXVlcnkiLCJwb3N0IiwicHV0IiwiRGF0YWJhc2VIZWxwZXIiLCJjb25uZWN0QW5kQ2xlYXIiLCJ1cmkiLCJkYk5hbWUiLCJtb25nb29zZSIsImNvbm5lY3QiLCJjbGVhckRhdGFiYXNlIiwiY29sbGVjdGlvbnMiLCJjb2xsZWN0aW9uIiwiT2JqZWN0IiwiZGVsZXRlTWFueSIsImRpc2Nvbm5lY3QiLCJyZWFkeVN0YXRlIiwibW9kdWxlIiwiZXhwb3J0cyIsImdldFJlc291cmNlcyJdLCJzb3VyY2VzIjpbInRlc3QtaGVscGVycy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogVGVzdCBIZWxwZXJzIGFuZCBVdGlsaXRpZXNcclxuICogUHJvdmlkZXMgdXRpbGl0aWVzIGZvciBwcm9wZXIgdGVzdCBjbGVhbnVwIGFuZCByZXNvdXJjZSBtYW5hZ2VtZW50XHJcbiAqL1xyXG5cclxuLy8gVHJhY2sgYWxsIGFjdGl2ZSByZXNvdXJjZXNcclxuY29uc3QgcmVzb3VyY2VzID0ge1xyXG4gIHRpbWVyczogbmV3IFNldCgpLFxyXG4gIGludGVydmFsczogbmV3IFNldCgpLFxyXG4gIGNvbm5lY3Rpb25zOiBuZXcgU2V0KCksXHJcbiAgc2VydmVyczogbmV3IFNldCgpLFxyXG4gIHByb21pc2VzOiBuZXcgU2V0KClcclxufTtcclxuXHJcbi8qKlxyXG4gKiBUcmFjayBhIHRpbWVvdXQgYW5kIGVuc3VyZSBpdCBnZXRzIGNsZWFuZWQgdXBcclxuICovXHJcbmZ1bmN0aW9uIHRyYWNrVGltZW91dChjYWxsYmFjaywgZGVsYXksIC4uLmFyZ3MpIHtcclxuICBjb25zdCB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KGNhbGxiYWNrLCBkZWxheSwgLi4uYXJncyk7XHJcbiAgcmVzb3VyY2VzLnRpbWVycy5hZGQodGltZW91dElkKTtcclxuICByZXR1cm4gdGltZW91dElkO1xyXG59XHJcblxyXG4vKipcclxuICogVHJhY2sgYW4gaW50ZXJ2YWwgYW5kIGVuc3VyZSBpdCBnZXRzIGNsZWFuZWQgdXBcclxuICovXHJcbmZ1bmN0aW9uIHRyYWNrSW50ZXJ2YWwoY2FsbGJhY2ssIGRlbGF5LCAuLi5hcmdzKSB7XHJcbiAgY29uc3QgaW50ZXJ2YWxJZCA9IHNldEludGVydmFsKGNhbGxiYWNrLCBkZWxheSwgLi4uYXJncyk7XHJcbiAgcmVzb3VyY2VzLmludGVydmFscy5hZGQoaW50ZXJ2YWxJZCk7XHJcbiAgcmV0dXJuIGludGVydmFsSWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDbGVhciBhIHRpbWVvdXQgYW5kIHJlbW92ZSBmcm9tIHRyYWNraW5nXHJcbiAqL1xyXG5mdW5jdGlvbiBjbGVhclRyYWNrZWRUaW1lb3V0KHRpbWVvdXRJZCkge1xyXG4gIGNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xyXG4gIHJlc291cmNlcy50aW1lcnMuZGVsZXRlKHRpbWVvdXRJZCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDbGVhciBhbiBpbnRlcnZhbCBhbmQgcmVtb3ZlIGZyb20gdHJhY2tpbmdcclxuICovXHJcbmZ1bmN0aW9uIGNsZWFyVHJhY2tlZEludGVydmFsKGludGVydmFsSWQpIHtcclxuICBjbGVhckludGVydmFsKGludGVydmFsSWQpO1xyXG4gIHJlc291cmNlcy5pbnRlcnZhbHMuZGVsZXRlKGludGVydmFsSWQpO1xyXG59XHJcblxyXG4vKipcclxuICogVHJhY2sgYSBwcm9taXNlIGZvciBjbGVhbnVwXHJcbiAqL1xyXG5mdW5jdGlvbiB0cmFja1Byb21pc2UocHJvbWlzZSkge1xyXG4gIHJlc291cmNlcy5wcm9taXNlcy5hZGQocHJvbWlzZSk7XHJcbiAgcmV0dXJuIHByb21pc2UuZmluYWxseSgoKSA9PiB7XHJcbiAgICByZXNvdXJjZXMucHJvbWlzZXMuZGVsZXRlKHByb21pc2UpO1xyXG4gIH0pO1xyXG59XHJcblxyXG4vKipcclxuICogQ3JlYXRlIGEgcHJvbWlzZSB3aXRoIHRpbWVvdXRcclxuICovXHJcbmZ1bmN0aW9uIGNyZWF0ZVRpbWVvdXRQcm9taXNlKGRlbGF5KSB7XHJcbiAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xyXG4gICAgY29uc3QgdGltZW91dElkID0gdHJhY2tUaW1lb3V0KCgpID0+IHtcclxuICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICByZXNvdXJjZXMudGltZXJzLmRlbGV0ZSh0aW1lb3V0SWQpO1xyXG4gICAgfSwgZGVsYXkpO1xyXG4gIH0pO1xyXG59XHJcblxyXG4vKipcclxuICogV2FpdCBmb3IgYSBjb25kaXRpb24gd2l0aCB0aW1lb3V0XHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiB3YWl0Rm9yKGNvbmRpdGlvbiwgb3B0aW9ucyA9IHt9KSB7XHJcbiAgY29uc3Qge1xyXG4gICAgdGltZW91dCA9IDUwMDAsXHJcbiAgICBpbnRlcnZhbCA9IDEwMCxcclxuICAgIG1lc3NhZ2UgPSAnQ29uZGl0aW9uIG5vdCBtZXQgd2l0aGluIHRpbWVvdXQnXHJcbiAgfSA9IG9wdGlvbnM7XHJcblxyXG4gIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KCk7XHJcblxyXG4gIHdoaWxlIChEYXRlLm5vdygpIC0gc3RhcnRUaW1lIDwgdGltZW91dCkge1xyXG4gICAgaWYgKGF3YWl0IGNvbmRpdGlvbigpKSB7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgYXdhaXQgY3JlYXRlVGltZW91dFByb21pc2UoaW50ZXJ2YWwpO1xyXG4gIH1cclxuXHJcbiAgdGhyb3cgbmV3IEVycm9yKG1lc3NhZ2UpO1xyXG59XHJcblxyXG4vKipcclxuICogQ2xlYW51cCBhbGwgdHJhY2tlZCByZXNvdXJjZXNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGNsZWFudXBSZXNvdXJjZXMoKSB7XHJcbiAgLy8gQ2xlYXIgYWxsIHRpbWVvdXRzXHJcbiAgZm9yIChjb25zdCB0aW1lb3V0SWQgb2YgcmVzb3VyY2VzLnRpbWVycykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XHJcbiAgICB9IGNhdGNoIChfZXJyb3IpIHtcclxuICAgICAgLy8gSWdub3JlIGVycm9yc1xyXG4gICAgfVxyXG4gIH1cclxuICByZXNvdXJjZXMudGltZXJzLmNsZWFyKCk7XHJcblxyXG4gIC8vIENsZWFyIGFsbCBpbnRlcnZhbHNcclxuICBmb3IgKGNvbnN0IGludGVydmFsSWQgb2YgcmVzb3VyY2VzLmludGVydmFscykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbElkKTtcclxuICAgIH0gY2F0Y2ggKF9lcnJvcikge1xyXG4gICAgICAvLyBJZ25vcmUgZXJyb3JzXHJcbiAgICB9XHJcbiAgfVxyXG4gIHJlc291cmNlcy5pbnRlcnZhbHMuY2xlYXIoKTtcclxuXHJcbiAgLy8gV2FpdCBmb3IgcHJvbWlzZXMgdG8gc2V0dGxlXHJcbiAgdHJ5IHtcclxuICAgIGF3YWl0IFByb21pc2UuYWxsU2V0dGxlZChBcnJheS5mcm9tKHJlc291cmNlcy5wcm9taXNlcykpO1xyXG4gIH0gY2F0Y2ggKF9lcnJvcikge1xyXG4gICAgLy8gSWdub3JlIGVycm9yc1xyXG4gIH1cclxuICByZXNvdXJjZXMucHJvbWlzZXMuY2xlYXIoKTtcclxuXHJcbiAgLy8gQ2xvc2UgY29ubmVjdGlvbnNcclxuICBmb3IgKGNvbnN0IGNvbm5lY3Rpb24gb2YgcmVzb3VyY2VzLmNvbm5lY3Rpb25zKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBpZiAodHlwZW9mIGNvbm5lY3Rpb24uY2xvc2UgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICBhd2FpdCBjb25uZWN0aW9uLmNsb3NlKCk7XHJcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGNvbm5lY3Rpb24uZGVzdHJveSA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgIGF3YWl0IGNvbm5lY3Rpb24uZGVzdHJveSgpO1xyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChfZXJyb3IpIHtcclxuICAgICAgLy8gSWdub3JlIGVycm9yc1xyXG4gICAgfVxyXG4gIH1cclxuICByZXNvdXJjZXMuY29ubmVjdGlvbnMuY2xlYXIoKTtcclxuXHJcbiAgLy8gQ2xvc2Ugc2VydmVyc1xyXG4gIGZvciAoY29uc3Qgc2VydmVyIG9mIHJlc291cmNlcy5zZXJ2ZXJzKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgc2VydmVyLmNsb3NlKChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgaWYgKGVycm9yKSByZWplY3QoZXJyb3IpO1xyXG4gICAgICAgICAgZWxzZSByZXNvbHZlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgLy8gSWdub3JlIGVycm9yc1xyXG4gICAgfVxyXG4gIH1cclxuICByZXNvdXJjZXMuc2VydmVycy5jbGVhcigpO1xyXG59XHJcblxyXG4vKipcclxuICogQ3JlYXRlIGEgdGVzdCB0aW1lb3V0IHdyYXBwZXJcclxuICovXHJcbmZ1bmN0aW9uIHdpdGhUaW1lb3V0KHRlc3RGbiwgY3VzdG9tVGltZW91dCA9IDMwMDAwKSB7XHJcbiAgcmV0dXJuIGFzeW5jIGZ1bmN0aW9uKCkge1xyXG4gICAgY29uc3QgdGltZW91dFByb21pc2UgPSBuZXcgUHJvbWlzZSgoXywgcmVqZWN0KSA9PiB7XHJcbiAgICAgIGNvbnN0IHRpbWVvdXRJZCA9IHRyYWNrVGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihgVGVzdCB0aW1lb3V0IGFmdGVyICR7Y3VzdG9tVGltZW91dH1tc2ApKTtcclxuICAgICAgfSwgY3VzdG9tVGltZW91dCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICBhd2FpdCBQcm9taXNlLnJhY2UoW3Rlc3RGbigpLCB0aW1lb3V0UHJvbWlzZV0pO1xyXG4gICAgfSBmaW5hbGx5IHtcclxuICAgICAgYXdhaXQgY2xlYW51cFJlc291cmNlcygpO1xyXG4gICAgfVxyXG4gIH07XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBNb2NrIGZhY3RvcnkgZm9yIGNyZWF0aW5nIHJldXNhYmxlIG1vY2tzXHJcbiAqL1xyXG5jbGFzcyBNb2NrRmFjdG9yeSB7XHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICB0aGlzLm1vY2tzID0gbmV3IE1hcCgpO1xyXG4gIH1cclxuXHJcbiAgY3JlYXRlKG5hbWUsIGltcGxlbWVudGF0aW9uID0ge30pIHtcclxuICAgIGNvbnN0IG1vY2sgPSBqZXN0LmZuKGltcGxlbWVudGF0aW9uKTtcclxuICAgIHRoaXMubW9ja3Muc2V0KG5hbWUsIG1vY2spO1xyXG4gICAgcmV0dXJuIG1vY2s7XHJcbiAgfVxyXG5cclxuICBnZXQobmFtZSkge1xyXG4gICAgcmV0dXJuIHRoaXMubW9ja3MuZ2V0KG5hbWUpO1xyXG4gIH1cclxuXHJcbiAgcmVzZXQobmFtZSkge1xyXG4gICAgY29uc3QgbW9jayA9IHRoaXMubW9ja3MuZ2V0KG5hbWUpO1xyXG4gICAgaWYgKG1vY2spIHtcclxuICAgICAgbW9jay5tb2NrUmVzZXQoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJlc2V0QWxsKCkge1xyXG4gICAgZm9yIChjb25zdCBtb2NrIG9mIHRoaXMubW9ja3MudmFsdWVzKCkpIHtcclxuICAgICAgbW9jay5tb2NrUmVzZXQoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNsZWFyQWxsKCkge1xyXG4gICAgdGhpcy5tb2Nrcy5jbGVhcigpO1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIEhUVFAgUmVxdWVzdCBIZWxwZXJcclxuICovXHJcbmNsYXNzIEhUVFBIZWxwZXIge1xyXG4gIHN0YXRpYyBhc3luYyByZXF1ZXN0KGFwcCwgbWV0aG9kLCBwYXRoLCBvcHRpb25zID0ge30pIHtcclxuICAgIGxldCByZXEgPSByZXF1aXJlKCdzdXBlcnRlc3QnKShhcHApW21ldGhvZC50b0xvd2VyQ2FzZSgpXShwYXRoKTtcclxuXHJcbiAgICBpZiAob3B0aW9ucy5oZWFkZXJzKSB7XHJcbiAgICAgIHJlcSA9IHJlcS5zZXQob3B0aW9ucy5oZWFkZXJzKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAob3B0aW9ucy5ib2R5KSB7XHJcbiAgICAgIHJlcSA9IHJlcS5zZW5kKG9wdGlvbnMuYm9keSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKG9wdGlvbnMucXVlcnkpIHtcclxuICAgICAgcmVxID0gcmVxLnF1ZXJ5KG9wdGlvbnMucXVlcnkpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiByZXE7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgYXN5bmMgZ2V0KGFwcCwgcGF0aCwgb3B0aW9ucyA9IHt9KSB7XHJcbiAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KGFwcCwgJ0dFVCcsIHBhdGgsIG9wdGlvbnMpO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGFzeW5jIHBvc3QoYXBwLCBwYXRoLCBib2R5LCBvcHRpb25zID0ge30pIHtcclxuICAgIHJldHVybiB0aGlzLnJlcXVlc3QoYXBwLCAnUE9TVCcsIHBhdGgsIHsgLi4ub3B0aW9ucywgYm9keSB9KTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBhc3luYyBwdXQoYXBwLCBwYXRoLCBib2R5LCBvcHRpb25zID0ge30pIHtcclxuICAgIHJldHVybiB0aGlzLnJlcXVlc3QoYXBwLCAnUFVUJywgcGF0aCwgeyAuLi5vcHRpb25zLCBib2R5IH0pO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGFzeW5jIGRlbGV0ZShhcHAsIHBhdGgsIG9wdGlvbnMgPSB7fSkge1xyXG4gICAgcmV0dXJuIHRoaXMucmVxdWVzdChhcHAsICdERUxFVEUnLCBwYXRoLCBvcHRpb25zKTtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBEYXRhYmFzZSBIZWxwZXJcclxuICovXHJcbmNsYXNzIERhdGFiYXNlSGVscGVyIHtcclxuICBzdGF0aWMgYXN5bmMgY29ubmVjdEFuZENsZWFyKHVyaSwgZGJOYW1lKSB7XHJcbiAgICBjb25zdCBtb25nb29zZSA9IHJlcXVpcmUoJ21vbmdvb3NlJyk7XHJcbiAgICBhd2FpdCBtb25nb29zZS5jb25uZWN0KHVyaSwge1xyXG4gICAgICBkYk5hbWU6IGRiTmFtZSB8fCAndGVzdF9kYidcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGFzeW5jIGNsZWFyRGF0YWJhc2UoKSB7XHJcbiAgICBjb25zdCBtb25nb29zZSA9IHJlcXVpcmUoJ21vbmdvb3NlJyk7XHJcbiAgICBjb25zdCBjb2xsZWN0aW9ucyA9IG1vbmdvb3NlLmNvbm5lY3Rpb24uY29sbGVjdGlvbnM7XHJcblxyXG4gICAgZm9yIChjb25zdCBjb2xsZWN0aW9uIG9mIE9iamVjdC52YWx1ZXMoY29sbGVjdGlvbnMpKSB7XHJcbiAgICAgIGF3YWl0IGNvbGxlY3Rpb24uZGVsZXRlTWFueSh7fSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgYXN5bmMgZGlzY29ubmVjdCgpIHtcclxuICAgIGNvbnN0IG1vbmdvb3NlID0gcmVxdWlyZSgnbW9uZ29vc2UnKTtcclxuICAgIGlmIChtb25nb29zZS5jb25uZWN0aW9uLnJlYWR5U3RhdGUgIT09IDApIHtcclxuICAgICAgYXdhaXQgbW9uZ29vc2UuZGlzY29ubmVjdCgpO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuLy8gRXhwb3J0IGZ1bmN0aW9ucyBhbmQgY2xhc3Nlc1xyXG5tb2R1bGUuZXhwb3J0cyA9IHtcclxuICB0cmFja1RpbWVvdXQsXHJcbiAgdHJhY2tJbnRlcnZhbCxcclxuICBjbGVhclRyYWNrZWRUaW1lb3V0LFxyXG4gIGNsZWFyVHJhY2tlZEludGVydmFsLFxyXG4gIHRyYWNrUHJvbWlzZSxcclxuICBjcmVhdGVUaW1lb3V0UHJvbWlzZSxcclxuICB3YWl0Rm9yLFxyXG4gIGNsZWFudXBSZXNvdXJjZXMsXHJcbiAgd2l0aFRpbWVvdXQsXHJcbiAgTW9ja0ZhY3RvcnksXHJcbiAgSFRUUEhlbHBlcixcclxuICBEYXRhYmFzZUhlbHBlcixcclxuICBnZXRSZXNvdXJj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