{"version":3,"names":["EventEmitter","require","RBACPolicyEngine","constructor","rbacSystem","rbac","policies","Map","policyHistory","policyTemplates","conditionalRules","createPolicy","policyId","policyConfig","has","Error","policy","id","name","description","principal","action","resource","conditions","effect","priority","isActive","version","createdAt","Date","updatedAt","createdBy","metadata","set","push","timestamp","data","emit","updatePolicy","updates","get","oldPolicy","Object","assign","oldData","newData","deletePolicy","delete","getPolicy","getAllPolicies","filter","Array","from","values","active","undefined","p","_matchPrincipal","sort","a","b","evaluatePolicies","userId","context","evaluationResult","policiesApplied","deniedPolicies","finalDecision","evaluationDetails","applicablePolicies","_getApplicablePolicies","evaluationDetail","conditionsMet","reason","_evaluatePolicyConditions","evaluatePolicy","result","matches","createConditionalRule","ruleId","ruleConfig","rule","operator","evaluateRule","conditionResults","map","condition","_evaluateCondition","every","r","some","createPolicyTemplate","templateId","template","policyTemplate","variables","category","createPolicyFromTemplate","_substituteVariables","makeAccessDecision","decision","allowed","policyEvaluations","policyResult","_generateDecisionReason","hasPermission","addTemporaryException","exceptionId","exceptionConfig","exception","expiresAt","now","temporaryExceptions","setTimeout","_checkTemporaryExceptions","_matchAction","_matchResource","keys","length","key","value","entries","contextValue","_matchConditionValue","field","isArray","includes","String","startsWith","endsWith","policiaPrincipal","role","userRoles","getUserRoles","hasRole","roleId","department","policyActions","contextAction","policyResources","contextResource","res","prefix","slice","actual","expected","substituted","JSON","parse","stringify","substitute","obj","varName","join","getPolicyHistory","filters","history","h","limit","exportPolicies","templates","rules","importPolicies","forEach","module","exports"],"sources":["rbac-policy-engine.js"],"sourcesContent":["/**\r\n * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\r\n * ðŸŽ¯ RBAC Policy Engine - Ù…Ø­Ø±Ùƒ Ø§Ù„Ø³ÙŠØ§Ø³Ø§Øª Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©\r\n * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\r\n * \r\n * ÙŠÙˆÙØ± Ù†Ø¸Ø§Ù… Ù‚ÙˆØ§Ø¹Ø¯ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠ Ù…ØªÙ‚Ø¯Ù… Ù…Ø¹:\r\n * âœ… ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø³ÙŠØ§Ø³Ø§Øª Ø§Ù„Ù…Ø¹Ù‚Ø¯Ø©\r\n * âœ… Ø¯Ø¹Ù… Ø§Ù„Ø´Ø±ÙˆØ· Ø§Ù„Ù…ØªØ¹Ø¯Ø¯Ø©\r\n * âœ… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø§Ø³ØªØ«Ù†Ø§Ø¡Ø§Øª\r\n * âœ… Ù†Ø¸Ø§Ù… Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ§Øª\r\n */\r\n\r\nconst { EventEmitter } = require('events');\r\n\r\nclass RBACPolicyEngine extends EventEmitter {\r\n  constructor(rbacSystem) {\r\n    super();\r\n    this.rbac = rbacSystem;\r\n    this.policies = new Map();\r\n    this.policyHistory = [];\r\n    this.policyTemplates = new Map();\r\n    this.conditionalRules = new Map();\r\n  }\r\n\r\n  /**\r\n   * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\r\n   * 1ï¸âƒ£ POLICY MANAGEMENT - Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø³ÙŠØ§Ø³Ø§Øª\r\n   * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\r\n   */\r\n\r\n  /**\r\n   * Ø¥Ù†Ø´Ø§Ø¡ Ø³ÙŠØ§Ø³Ø© Ø¬Ø¯ÙŠØ¯Ø©\r\n   */\r\n  createPolicy(policyId, policyConfig = {}) {\r\n    if (this.policies.has(policyId)) {\r\n      throw new Error(`Policy ${policyId} already exists`);\r\n    }\r\n\r\n    const policy = {\r\n      id: policyId,\r\n      name: policyConfig.name || policyId,\r\n      description: policyConfig.description || '',\r\n      \r\n      // Policy Definition\r\n      principal: policyConfig.principal || {}, // Ù…Ù† Ù„Ù‡ Ø§Ù„Ø¥Ø°Ù†\r\n      action: policyConfig.action || [], // Ù…Ø§Ø°Ø§ ÙŠÙ…ÙƒÙ† Ø£Ù† ÙŠÙØ¹Ù„\r\n      resource: policyConfig.resource || [], // Ø¹Ù„Ù‰ Ù…Ø§Ø°Ø§\r\n      \r\n      // Conditions\r\n      conditions: policyConfig.conditions || {},\r\n      \r\n      // Effect\r\n      effect: policyConfig.effect || 'Allow', // Allow or Deny\r\n      priority: policyConfig.priority || 100, // Ø£Ø¹Ù„Ù‰ Ø±Ù‚Ù… = Ø£ÙˆÙ„ÙˆÙŠØ© Ø£Ø¹Ù„Ù‰\r\n      \r\n      // Status\r\n      isActive: policyConfig.isActive !== false,\r\n      \r\n      // Version Control\r\n      version: 1,\r\n      createdAt: new Date(),\r\n      updatedAt: new Date(),\r\n      createdBy: policyConfig.createdBy || 'system',\r\n      \r\n      // Metadata\r\n      metadata: policyConfig.metadata || {}\r\n    };\r\n\r\n    this.policies.set(policyId, policy);\r\n    this.policyHistory.push({\r\n      policyId,\r\n      action: 'CREATED',\r\n      timestamp: new Date(),\r\n      data: { ...policy }\r\n    });\r\n\r\n    if (this.rbac && this.rbac.emit) {\r\n      this.rbac.emit('policyCreated', policy);\r\n    }\r\n    this.emit('policyCreated', policy);\r\n    return policy;\r\n  }\r\n\r\n  /**\r\n   * ØªØ­Ø¯ÙŠØ« Ø³ÙŠØ§Ø³Ø© Ù…ÙˆØ¬ÙˆØ¯Ø©\r\n   */\r\n  updatePolicy(policyId, updates) {\r\n    const policy = this.policies.get(policyId);\r\n    if (!policy) throw new Error(`Policy ${policyId} not found`);\r\n\r\n    const oldPolicy = { ...policy };\r\n    \r\n    Object.assign(policy, updates, {\r\n      version: policy.version + 1,\r\n      updatedAt: new Date()\r\n    });\r\n\r\n    this.policyHistory.push({\r\n      policyId,\r\n      action: 'UPDATED',\r\n      timestamp: new Date(),\r\n      oldData: oldPolicy,\r\n      newData: { ...policy }\r\n    });\r\n\r\n    if (this.rbac && this.rbac.emit) {\r\n      this.rbac.emit('policyUpdated', policy);\r\n    }\r\n    this.emit('policyUpdated', policy);\r\n    return policy;\r\n  }\r\n\r\n  /**\r\n   * Ø­Ø°Ù Ø³ÙŠØ§Ø³Ø©\r\n   */\r\n  deletePolicy(policyId) {\r\n    const policy = this.policies.get(policyId);\r\n    if (!policy) throw new Error(`Policy ${policyId} not found`);\r\n\r\n    this.policies.delete(policyId);\r\n    \r\n    this.policyHistory.push({\r\n      policyId,\r\n      action: 'DELETED',\r\n      timestamp: new Date(),\r\n      data: policy\r\n    });\r\n\r\n    if (this.rbac && this.rbac.emit) {\r\n      this.rbac.emit('policyDeleted', policyId);\r\n    }\r\n    this.emit('policyDeleted', policyId);\r\n  }\r\n\r\n  /**\r\n   * Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø³ÙŠØ§Ø³Ø©\r\n   */\r\n  getPolicy(policyId) {\r\n    return this.policies.get(policyId) || null;\r\n  }\r\n\r\n  /**\r\n   * Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø³ÙŠØ§Ø³Ø§Øª Ù…Ø¹ Ø§Ù„ØªØµÙÙŠØ©\r\n   */\r\n  getAllPolicies(filter = {}) {\r\n    let policies = Array.from(this.policies.values());\r\n\r\n    if (filter.active !== undefined) {\r\n      policies = policies.filter(p => p.isActive === filter.active);\r\n    }\r\n\r\n    if (filter.effect) {\r\n      policies = policies.filter(p => p.effect === filter.effect);\r\n    }\r\n\r\n    if (filter.principal) {\r\n      policies = policies.filter(p => \r\n        this._matchPrincipal(p.principal, filter.principal)\r\n      );\r\n    }\r\n\r\n    return policies.sort((a, b) => b.priority - a.priority);\r\n  }\r\n\r\n  /**\r\n   * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\r\n   * 2ï¸âƒ£ POLICY EVALUATION - ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø³ÙŠØ§Ø³Ø§Øª\r\n   * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\r\n   */\r\n\r\n  /**\r\n   * ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø³ÙŠØ§Ø³Ø§Øª Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…\r\n   */\r\n  evaluatePolicies(userId, context = {}) {\r\n    const evaluationResult = {\r\n      userId,\r\n      timestamp: new Date(),\r\n      policiesApplied: [],\r\n      deniedPolicies: [],\r\n      finalDecision: 'Deny', // Default to deny\r\n      evaluationDetails: []\r\n    };\r\n\r\n    // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø³ÙŠØ§Ø³Ø§Øª Ø§Ù„Ù…Ø¯Ø±Ø¬Ø© Ø­Ø³Ø¨ Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©\r\n    const applicablePolicies = this._getApplicablePolicies(userId, context);\r\n\r\n    for (const policy of applicablePolicies) {\r\n      if (!policy.isActive) continue;\r\n\r\n      const evaluationDetail = {\r\n        policyId: policy.id,\r\n        effect: policy.effect,\r\n        conditionsMet: true,\r\n        reason: ''\r\n      };\r\n\r\n      // ØªÙ‚ÙŠÙŠÙ… Ø´Ø±ÙˆØ· Ø§Ù„Ø³ÙŠØ§Ø³Ø©\r\n      if (!this._evaluatePolicyConditions(userId, policy, context)) {\r\n        evaluationDetail.conditionsMet = false;\r\n        evaluationDetail.reason = 'Conditions not satisfied';\r\n        evaluationResult.evaluationDetails.push(evaluationDetail);\r\n        continue;\r\n      }\r\n\r\n      // Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ø³ÙŠØ§Ø³Ø© ØªØ³Ù…Ø­ Ø¨Ø§Ù„ÙˆØµÙˆÙ„ ÙˆÙ„Ù… Ù†Ø±Ù‰ Ø±ÙØ¶ Ø­ØªÙ‰ Ø§Ù„Ø¢Ù†\r\n      if (policy.effect === 'Allow') {\r\n        evaluationResult.policiesApplied.push(policy.id);\r\n        evaluationResult.finalDecision = 'Allow';\r\n        evaluationDetail.reason = 'Access granted by policy';\r\n      }\r\n\r\n      // Ø§Ù„Ø±ÙØ¶ ÙŠØ³Ø¨Ù‚ Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø©\r\n      if (policy.effect === 'Deny') {\r\n        evaluationResult.deniedPolicies.push(policy.id);\r\n        evaluationResult.finalDecision = 'Deny';\r\n        evaluationDetail.reason = 'Access denied by policy';\r\n        evaluationResult.evaluationDetails.push(evaluationDetail);\r\n        break; // Ø§Ù„ØªÙˆÙ‚Ù Ø§Ù„ÙÙˆØ±ÙŠ Ø¹Ù†Ø¯ Ø±ÙØ¶\r\n      }\r\n\r\n      evaluationResult.evaluationDetails.push(evaluationDetail);\r\n    }\r\n\r\n    return evaluationResult;\r\n  }\r\n\r\n  /**\r\n   * ØªÙ‚ÙŠÙŠÙ… Ø³ÙŠØ§Ø³Ø© ÙˆØ§Ø­Ø¯Ø©\r\n   */\r\n  evaluatePolicy(policyId, userId, context = {}) {\r\n    const policy = this.policies.get(policyId);\r\n    if (!policy) return { policyId, result: 'Unknown', reason: 'Policy not found' };\r\n\r\n    const matches = this._evaluatePolicyConditions(userId, policy, context);\r\n    \r\n    return {\r\n      policyId,\r\n      result: matches ? policy.effect : 'NotApplicable',\r\n      reason: matches ? `Policy effect: ${policy.effect}` : 'Policy conditions not met'\r\n    };\r\n  }\r\n\r\n  /**\r\n   * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\r\n   * 3ï¸âƒ£ CONDITIONAL RULES - Ø§Ù„Ù‚ÙˆØ§Ø¹Ø³ Ø§Ù„Ø´Ø±Ø·ÙŠØ©\r\n   * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\r\n   */\r\n\r\n  /**\r\n   * Ø¥Ù†Ø´Ø§Ø¡ Ù‚Ø§Ø¹Ø¯Ø© Ø´Ø±Ø·ÙŠØ©\r\n   */\r\n  createConditionalRule(ruleId, ruleConfig = {}) {\r\n    const rule = {\r\n      id: ruleId,\r\n      name: ruleConfig.name || ruleId,\r\n      description: ruleConfig.description || '',\r\n      \r\n      // Condition Operator\r\n      operator: ruleConfig.operator || 'AND', // AND, OR, NOT\r\n      conditions: ruleConfig.conditions || [], // Array of conditions\r\n      \r\n      // Action\r\n      action: ruleConfig.action || 'Allow',\r\n      \r\n      // Priority\r\n      priority: ruleConfig.priority || 50,\r\n      \r\n      // Status\r\n      isActive: ruleConfig.isActive !== false,\r\n      \r\n      // Metadata\r\n      metadata: ruleConfig.metadata || {}\r\n    };\r\n\r\n    this.conditionalRules.set(ruleId, rule);\r\n    return rule;\r\n  }\r\n\r\n  /**\r\n   * ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø´Ø±Ø·ÙŠØ©\r\n   */\r\n  evaluateRule(ruleId, context = {}) {\r\n    const rule = this.conditionalRules.get(ruleId);\r\n    if (!rule) return false;\r\n\r\n    if (!rule.isActive) return false;\r\n\r\n    const conditionResults = rule.conditions.map(condition =>\r\n      this._evaluateCondition(condition, context)\r\n    );\r\n\r\n    switch (rule.operator) {\r\n      case 'AND':\r\n        return conditionResults.every(r => r === true);\r\n      case 'OR':\r\n        return conditionResults.some(r => r === true);\r\n      case 'NOT':\r\n        return conditionResults.every(r => r === false);\r\n      default:\r\n        return false;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\r\n   * 4ï¸âƒ£ POLICY TEMPLATES - Ù‚ÙˆØ§Ù„Ø¨ Ø§Ù„Ø³ÙŠØ§Ø³Ø§Øª\r\n   * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\r\n   */\r\n\r\n  /**\r\n   * Ø¥Ù†Ø´Ø§Ø¡ Ù‚Ø§Ù„Ø¨ Ø³ÙŠØ§Ø³Ø©\r\n   */\r\n  createPolicyTemplate(templateId, template = {}) {\r\n    const policyTemplate = {\r\n      id: templateId,\r\n      name: template.name || templateId,\r\n      description: template.description || '',\r\n      \r\n      template: template.template || {},\r\n      variables: template.variables || {}, // Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ù‚Ø§Ù„Ø¨\r\n      \r\n      category: template.category || 'general',\r\n      \r\n      createdAt: new Date(),\r\n      updatedAt: new Date()\r\n    };\r\n\r\n    this.policyTemplates.set(templateId, policyTemplate);\r\n    return policyTemplate;\r\n  }\r\n\r\n  /**\r\n   * Ø¥Ù†Ø´Ø§Ø¡ Ø³ÙŠØ§Ø³Ø© Ù…Ù† Ù‚Ø§Ù„Ø¨\r\n   */\r\n  createPolicyFromTemplate(policyId, templateId, variables = {}) {\r\n    const template = this.policyTemplates.get(templateId);\r\n    if (!template) throw new Error(`Template ${templateId} not found`);\r\n\r\n    // Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª ÙÙŠ Ø§Ù„Ù‚Ø§Ù„Ø¨\r\n    const policyConfig = this._substituteVariables(template.template, variables);\r\n\r\n    return this.createPolicy(policyId, policyConfig);\r\n  }\r\n\r\n  /**\r\n   * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\r\n   * 5ï¸âƒ£ ACCESS DECISION - Ø§ØªØ®Ø§Ø° Ù‚Ø±Ø§Ø± Ø§Ù„ÙˆØµÙˆÙ„\r\n   * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\r\n   */\r\n\r\n  /**\r\n   * Ø§ØªØ®Ø§Ø° Ù‚Ø±Ø§Ø± Ø§Ù„ÙˆØµÙˆÙ„ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ\r\n   */\r\n  makeAccessDecision(userId, action, resource, context = {}) {\r\n    const decision = {\r\n      userId,\r\n      action,\r\n      resource,\r\n      timestamp: new Date(),\r\n      allowed: false,\r\n      reason: '',\r\n      policyEvaluations: []\r\n    };\r\n\r\n    // ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø³ÙŠØ§Ø³Ø§Øª\r\n    const policyResult = this.evaluatePolicies(userId, {\r\n      action,\r\n      resource,\r\n      ...context\r\n    });\r\n\r\n    decision.allowed = policyResult.finalDecision === 'Allow';\r\n    decision.reason = this._generateDecisionReason(policyResult);\r\n    decision.policyEvaluations = policyResult.evaluationDetails;\r\n\r\n    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø£Ø°ÙˆÙ†Ø§Øª Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø¯ÙˆØ§Ø±\r\n    if (!decision.allowed) {\r\n      const hasPermission = this.rbac.hasPermission(\r\n        userId,\r\n        `${action}:${resource}`,\r\n        context\r\n      );\r\n\r\n      if (hasPermission) {\r\n        decision.allowed = true;\r\n        decision.reason = 'Permission granted via role-based access';\r\n      }\r\n    }\r\n\r\n    return decision;\r\n  }\r\n\r\n  /**\r\n   * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\r\n   * 6ï¸âƒ£ EXCEPTION MANAGEMENT - Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø§Ø³ØªØ«Ù†Ø§Ø¡Ø§Øª\r\n   * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\r\n   */\r\n\r\n  /**\r\n   * Ø¥Ø¶Ø§ÙØ© Ø§Ø³ØªØ«Ù†Ø§Ø¡ Ù…Ø¤Ù‚Øª\r\n   */\r\n  addTemporaryException(exceptionId, exceptionConfig = {}) {\r\n    const exception = {\r\n      id: exceptionId,\r\n      userId: exceptionConfig.userId,\r\n      action: exceptionConfig.action,\r\n      resource: exceptionConfig.resource,\r\n      \r\n      effect: exceptionConfig.effect || 'Allow',\r\n      expiresAt: exceptionConfig.expiresAt || new Date(Date.now() + 86400000), // 24 hours\r\n      \r\n      reason: exceptionConfig.reason,\r\n      createdBy: exceptionConfig.createdBy || 'admin',\r\n      createdAt: new Date()\r\n    };\r\n\r\n    if (!this.temporaryExceptions) {\r\n      this.temporaryExceptions = new Map();\r\n    }\r\n\r\n    this.temporaryExceptions.set(exceptionId, exception);\r\n    \r\n    // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø§Ø³ØªØ«Ù†Ø§Ø¡ Ø§Ù„Ù…Ù†ØªÙ‡ÙŠ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ©\r\n    setTimeout(() => {\r\n      this.temporaryExceptions.delete(exceptionId);\r\n    }, exceptionConfig.expiresAt - Date.now());\r\n\r\n    return exception;\r\n  }\r\n\r\n  /**\r\n   * Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø§Ø³ØªØ«Ù†Ø§Ø¡Ø§Øª\r\n   */\r\n  _checkTemporaryExceptions(userId, action, resource) {\r\n    if (!this.temporaryExceptions) return null;\r\n\r\n    for (const exception of this.temporaryExceptions.values()) {\r\n      if (exception.expiresAt < new Date()) continue;\r\n\r\n      if (exception.userId === userId &&\r\n          exception.action === action &&\r\n          exception.resource === resource) {\r\n        return exception;\r\n      }\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  /**\r\n   * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\r\n   * PRIVATE METHODS - Ø§Ù„Ø·Ø±Ù‚ Ø§Ù„Ø®Ø§ØµØ©\r\n   * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\r\n   */\r\n\r\n  /**\r\n   * Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø³ÙŠØ§Ø³Ø§Øª Ø§Ù„Ù…Ù†Ø·Ø¨Ù‚Ø©\r\n   */\r\n  _getApplicablePolicies(userId, context) {\r\n    return this.getAllPolicies({ active: true })\r\n      .filter(policy => {\r\n        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù†Ø·Ø¨Ø§Ù‚ Ø§Ù„Ù…Ø¨Ø¯Ø£\r\n        if (!this._matchPrincipal(policy.principal, userId, context)) {\r\n          return false;\r\n        }\r\n\r\n        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ ÙˆØ§Ù„Ù…ÙˆØ±Ø¯\r\n        if (context.action && !this._matchAction(policy.action, context.action)) {\r\n          return false;\r\n        }\r\n\r\n        if (context.resource && !this._matchResource(policy.resource, context.resource)) {\r\n          return false;\r\n        }\r\n\r\n        return true;\r\n      });\r\n  }\r\n\r\n  /**\r\n   * ØªÙ‚ÙŠÙŠÙ… Ø´Ø±ÙˆØ· Ø§Ù„Ø³ÙŠØ§Ø³Ø©\r\n   */\r\n  _evaluatePolicyConditions(userId, policy, context) {\r\n    if (!policy.conditions || Object.keys(policy.conditions).length === 0) {\r\n      return true; // Ù„Ø§ ØªÙˆØ¬Ø¯ Ø´Ø±ÙˆØ· = Ù…ÙˆØ§ÙÙ‚Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ©\r\n    }\r\n\r\n    for (const [key, value] of Object.entries(policy.conditions)) {\r\n      const contextValue = context[key];\r\n      \r\n      if (!this._matchConditionValue(contextValue, value)) {\r\n        return false;\r\n      }\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * ØªÙ‚ÙŠÙŠÙ… Ø´Ø±Ø· ÙˆØ§Ø­Ø¯\r\n   */\r\n  _evaluateCondition(condition, context) {\r\n    if (typeof condition === 'function') {\r\n      return condition(context);\r\n    }\r\n\r\n    if (typeof condition === 'object' && condition !== null) {\r\n      const { field, operator, value } = condition;\r\n      const contextValue = context[field];\r\n\r\n      switch (operator) {\r\n        case 'equals':\r\n          return contextValue === value;\r\n        case 'not_equals':\r\n          return contextValue !== value;\r\n        case 'greater_than':\r\n          return contextValue > value;\r\n        case 'less_than':\r\n          return contextValue < value;\r\n        case 'in':\r\n          return Array.isArray(value) && value.includes(contextValue);\r\n        case 'contains':\r\n          return String(contextValue).includes(String(value));\r\n        case 'starts_with':\r\n          return String(contextValue).startsWith(String(value));\r\n        case 'ends_with':\r\n          return String(contextValue).endsWith(String(value));\r\n        default:\r\n          return false;\r\n      }\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Ù…Ø·Ø§Ø¨Ù‚Ø© Ø§Ù„Ù…Ø¨Ø¯Ø£\r\n   */\r\n  _matchPrincipal(policiaPrincipal, userId, context = {}) {\r\n    if (!policiaPrincipal) return true;\r\n\r\n    if (policiaPrincipal.userId && policiaPrincipal.userId !== userId) {\r\n      return false;\r\n    }\r\n\r\n    if (policiaPrincipal.role) {\r\n      const userRoles = this.rbac.getUserRoles(userId);\r\n      const hasRole = userRoles.some(r => r.roleId === policiaPrincipal.role);\r\n      if (!hasRole) return false;\r\n    }\r\n\r\n    if (policiaPrincipal.department && context.department !== policiaPrincipal.department) {\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * Ù…Ø·Ø§Ø¨Ù‚Ø© Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡\r\n   */\r\n  _matchAction(policyActions, contextAction) {\r\n    if (!Array.isArray(policyActions)) return false;\r\n    if (policyActions.includes('*')) return true;\r\n    return policyActions.includes(contextAction);\r\n  }\r\n\r\n  /**\r\n   * Ù…Ø·Ø§Ø¨Ù‚Ø© Ø§Ù„Ù…ÙˆØ±Ø¯\r\n   */\r\n  _matchResource(policyResources, contextResource) {\r\n    if (!Array.isArray(policyResources)) return false;\r\n    if (policyResources.includes('*')) return true;\r\n    \r\n    return policyResources.some(res => {\r\n      if (res === contextResource) return true;\r\n      \r\n      // Ø¯Ø¹Ù… wildcards: \"users/*\" ØªØ·Ø§Ø¨Ù‚ \"users/123\"\r\n      if (res.endsWith('/*')) {\r\n        const prefix = res.slice(0, -2);\r\n        return contextResource.startsWith(prefix);\r\n      }\r\n\r\n      return false;\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Ù…Ø·Ø§Ø¨Ù‚Ø© Ù‚ÙŠÙ…Ø© Ø§Ù„Ø´Ø±Ø·\r\n   */\r\n  _matchConditionValue(actual, expected) {\r\n    if (typeof expected === 'function') {\r\n      return expected(actual);\r\n    }\r\n    if (Array.isArray(expected)) {\r\n      return expected.includes(actual);\r\n    }\r\n    return actual === expected;\r\n  }\r\n\r\n  /**\r\n   * Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª ÙÙŠ Ø§Ù„Ù‚Ø§Ù„Ø¨\r\n   */\r\n  _substituteVariables(template, variables) {\r\n    const substituted = JSON.parse(JSON.stringify(template));\r\n\r\n    const substitute = (obj) => {\r\n      for (const key in obj) {\r\n        if (typeof obj[key] === 'string' && obj[key].startsWith('{{') && obj[key].endsWith('}}')) {\r\n          const varName = obj[key].slice(2, -2);\r\n          obj[key] = variables[varName] || obj[key];\r\n        } else if (typeof obj[key] === 'object' && obj[key] !== null) {\r\n          substitute(obj[key]);\r\n        }\r\n      }\r\n    };\r\n\r\n    substitute(substituted);\r\n    return substituted;\r\n  }\r\n\r\n  /**\r\n   * ØªÙˆÙ„ÙŠØ¯ Ø³Ø¨Ø¨ Ø§Ù„Ù‚Ø±Ø§Ø±\r\n   */\r\n  _generateDecisionReason(policyResult) {\r\n    if (policyResult.finalDecision === 'Allow') {\r\n      return `Access allowed by policies: ${policyResult.policiesApplied.join(', ')}`;\r\n    } else {\r\n      if (policyResult.deniedPolicies.length > 0) {\r\n        return `Access denied by policies: ${policyResult.deniedPolicies.join(', ')}`;\r\n      }\r\n      return 'No matching policies to allow access';\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø³Ø¬Ù„ Ø§Ù„Ø³ÙŠØ§Ø³Ø§Øª\r\n   */\r\n  getPolicyHistory(filters = {}) {\r\n    let history = this.policyHistory;\r\n\r\n    if (filters.policyId) {\r\n      history = history.filter(h => h.policyId === filters.policyId);\r\n    }\r\n\r\n    if (filters.action) {\r\n      history = history.filter(h => h.action === filters.action);\r\n    }\r\n\r\n    if (filters.limit) {\r\n      history = history.slice(-filters.limit);\r\n    }\r\n\r\n    return history;\r\n  }\r\n\r\n  /**\r\n   * ØªØµØ¯ÙŠØ± Ø§Ù„Ø³ÙŠØ§Ø³Ø§Øª\r\n   */\r\n  exportPolicies() {\r\n    return {\r\n      policies: Array.from(this.policies.values()),\r\n      templates: Array.from(this.policyTemplates.values()),\r\n      rules: Array.from(this.conditionalRules.values()),\r\n      timestamp: new Date()\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ø³ÙŠØ§Ø³Ø§Øª\r\n   */\r\n  importPolicies(data) {\r\n    if (data.policies) {\r\n      data.policies.forEach(policy => {\r\n        this.createPolicy(policy.id, policy);\r\n      });\r\n    }\r\n\r\n    if (data.templates) {\r\n      data.templates.forEach(template => {\r\n        this.createPolicyTemplate(template.id, template);\r\n      });\r\n    }\r\n\r\n    if (data.rules) {\r\n      data.rules.forEach(rule => {\r\n        this.createConditionalRule(rule.id, rule);\r\n      });\r\n    }\r\n  }\r\n}\r\n\r\nmodule.exports = RBACPolicyEngine;\r\n"],"mappings":"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","ignoreList":[]}