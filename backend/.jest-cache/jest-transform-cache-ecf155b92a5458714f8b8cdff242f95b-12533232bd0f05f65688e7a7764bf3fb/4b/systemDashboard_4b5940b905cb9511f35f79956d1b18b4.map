{"version":3,"names":["logger","require","searchEngine","validator","SystemDashboard","constructor","metrics","system","startTime","Date","uptime","status","services","performance","averageResponseTime","requestsProcessed","errorsEncountered","cacheHitRate","integrations","mongodb","latency","redis","elasticsearch","websocket","connections","alerts","events","initialize","info","search","endpoints","validation","response","methods","auth","analytics","error","getSystemHealth","now","getTime","timestamp","toISOString","Math","floor","Object","entries","map","name","data","length","checkServiceStatus","serviceName","service","message","updateIntegrationStatus","integrationName","lastChecked","event","type","integration","push","shift","recordMetric","responseTime","success","total","avg","addAlert","severity","details","alert","id","warn","getDashboardSummary","serviceCount","keys","activeServices","values","filter","s","integrationCount","connectedIntegrations","i","summary","serviceHealth","integrationHealth","systemStatus","criticalAlerts","a","round","errorRate","max","toFixed","recentAlerts","slice","recentEvents","exportMetrics","health","module","exports"],"sources":["systemDashboard.js"],"sourcesContent":["/**\n * Integrated System Dashboard Service\n * Central monitoring and orchestration\n * Phase 11: System Integration\n */\n\nconst logger = require('../utils/logger');\nconst searchEngine = require('./searchEngine');\nconst validator = require('./validator');\n\nclass SystemDashboard {\n  constructor() {\n    this.metrics = {\n      system: {\n        startTime: new Date(),\n        uptime: 0,\n        status: 'initializing',\n      },\n      services: {},\n      performance: {\n        averageResponseTime: 0,\n        requestsProcessed: 0,\n        errorsEncountered: 0,\n        cacheHitRate: 0,\n      },\n      integrations: {\n        mongodb: { status: 'disconnected', latency: 0 },\n        redis: { status: 'disconnected', latency: 0 },\n        elasticsearch: { status: 'disconnected', latency: 0 },\n        websocket: { status: 'disconnected', connections: 0 },\n      },\n    };\n\n    this.alerts = [];\n    this.events = [];\n  }\n\n  /**\n   * Initialize system components\n   */\n  async initialize() {\n    try {\n      logger.info('ðŸš€ System Dashboard: Initializing components...');\n\n      // Initialize services\n      this.metrics.services = {\n        search: { status: 'active', endpoints: 6 },\n        validation: { status: 'active', endpoints: 7 },\n        response: { status: 'active', methods: 18 },\n        auth: { status: 'active', methods: 3 },\n        analytics: { status: 'active', metrics: 5 },\n      };\n\n      this.metrics.system.status = 'ready';\n\n      logger.info('âœ… System Dashboard: Initialization complete');\n      return true;\n    } catch (error) {\n      logger.error('âŒ System Dashboard: Initialization failed', error);\n      return false;\n    }\n  }\n\n  /**\n   * Get system health status\n   */\n  getSystemHealth() {\n    const uptime = (Date.now() - this.metrics.system.startTime.getTime()) / 1000;\n\n    return {\n      status: this.metrics.system.status,\n      timestamp: new Date().toISOString(),\n      uptime: `${Math.floor(uptime)}s`,\n      services: Object.entries(this.metrics.services).map(([name, data]) => ({\n        name,\n        ...data,\n      })),\n      integrations: this.metrics.integrations,\n      performance: this.metrics.performance,\n      alerts: this.alerts.length,\n      events: this.events.length,\n    };\n  }\n\n  /**\n   * Check service status\n   */\n  checkServiceStatus(serviceName) {\n    const service = this.metrics.services[serviceName];\n    if (!service) {\n      return { status: 'unknown', message: `Service ${serviceName} not found` };\n    }\n    return service;\n  }\n\n  /**\n   * Update integration status\n   */\n  async updateIntegrationStatus(integrationName, status, latency = 0) {\n    if (this.metrics.integrations[integrationName]) {\n      this.metrics.integrations[integrationName] = {\n        status,\n        latency,\n        lastChecked: new Date().toISOString(),\n      };\n\n      const event = {\n        timestamp: new Date().toISOString(),\n        type: 'integration_update',\n        integration: integrationName,\n        status,\n      };\n      this.events.push(event);\n\n      if (this.events.length > 100) {\n        this.events.shift();\n      }\n    }\n  }\n\n  /**\n   * Record performance metric\n   */\n  recordMetric(responseTime, success = true) {\n    this.metrics.performance.requestsProcessed++;\n\n    if (!success) {\n      this.metrics.performance.errorsEncountered++;\n    }\n\n    const total = this.metrics.performance.requestsProcessed;\n    const avg = this.metrics.performance.averageResponseTime;\n    this.metrics.performance.averageResponseTime = (avg + responseTime) / 2;\n  }\n\n  /**\n   * Add system alert\n   */\n  addAlert(severity, message, details = {}) {\n    const alert = {\n      id: Date.now(),\n      timestamp: new Date().toISOString(),\n      severity,\n      message,\n      details,\n    };\n\n    this.alerts.push(alert);\n    logger.warn(`[${severity}] ${message}`);\n\n    // Keep only last 50 alerts\n    if (this.alerts.length > 50) {\n      this.alerts.shift();\n    }\n\n    return alert;\n  }\n\n  /**\n   * Get dashboard summary\n   */\n  getDashboardSummary() {\n    const serviceCount = Object.keys(this.metrics.services).length;\n    const activeServices = Object.values(this.metrics.services).filter(\n      s => s.status === 'active'\n    ).length;\n    const integrationCount = Object.keys(this.metrics.integrations).length;\n    const connectedIntegrations = Object.values(this.metrics.integrations).filter(\n      i => i.status === 'connected'\n    ).length;\n\n    return {\n      summary: {\n        serviceHealth: `${activeServices}/${serviceCount} active`,\n        integrationHealth: `${connectedIntegrations}/${integrationCount} connected`,\n        systemStatus: this.metrics.system.status,\n        criticalAlerts: this.alerts.filter(a => a.severity === 'critical').length,\n        averageResponseTime: `${Math.round(this.metrics.performance.averageResponseTime)}ms`,\n        errorRate: `${((this.metrics.performance.errorsEncountered / Math.max(1, this.metrics.performance.requestsProcessed)) * 100).toFixed(2)}%`,\n      },\n      services: this.metrics.services,\n      integrations: this.metrics.integrations,\n      recentAlerts: this.alerts.slice(-10),\n      recentEvents: this.events.slice(-10),\n    };\n  }\n\n  /**\n   * Export metrics for monitoring systems\n   */\n  exportMetrics() {\n    return {\n      timestamp: new Date().toISOString(),\n      metrics: {\n        system: this.metrics.system,\n        services: this.metrics.services,\n        performance: this.metrics.performance,\n        integrations: this.metrics.integrations,\n      },\n      health: this.getSystemHealth(),\n      summary: this.getDashboardSummary(),\n    };\n  }\n}\n\nmodule.exports = new SystemDashboard();\n"],"mappings":"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","ignoreList":[]}