2ba8b51b9cecdab0aabd3c1310c03ee7
const mongoose = require('mongoose');
const scheduledNotificationSchema = new mongoose.Schema({
  userId: {
    type: mongoose.Schema.Types.ObjectId,
    ref: 'User',
    required: true,
    index: true
  },
  title: {
    type: String,
    required: true
  },
  message: {
    type: String,
    required: true
  },
  channels: {
    type: [String],
    enum: ['in-app', 'email', 'sms', 'whatsapp', 'push'],
    default: ['in-app']
  },
  scheduleTime: {
    type: Date,
    required: true,
    index: true
  },
  sent: {
    type: Boolean,
    default: false
  },
  sentAt: {
    type: Date
  },
  createdBy: {
    type: mongoose.Schema.Types.ObjectId,
    ref: 'User',
    required: true
  },
  metadata: {
    type: mongoose.Schema.Types.Mixed,
    default: {}
  }
}, {
  timestamps: true
});
scheduledNotificationSchema.index({
  sent: 1,
  scheduleTime: 1
});
const ScheduledNotification = mongoose.model('ScheduledNotification', scheduledNotificationSchema);
module.exports = ScheduledNotification;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJzY2hlZHVsZWROb3RpZmljYXRpb25TY2hlbWEiLCJTY2hlbWEiLCJ1c2VySWQiLCJ0eXBlIiwiVHlwZXMiLCJPYmplY3RJZCIsInJlZiIsInJlcXVpcmVkIiwiaW5kZXgiLCJ0aXRsZSIsIlN0cmluZyIsIm1lc3NhZ2UiLCJjaGFubmVscyIsImVudW0iLCJkZWZhdWx0Iiwic2NoZWR1bGVUaW1lIiwiRGF0ZSIsInNlbnQiLCJCb29sZWFuIiwic2VudEF0IiwiY3JlYXRlZEJ5IiwibWV0YWRhdGEiLCJNaXhlZCIsInRpbWVzdGFtcHMiLCJTY2hlZHVsZWROb3RpZmljYXRpb24iLCJtb2RlbCIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlcyI6WyJTY2hlZHVsZWROb3RpZmljYXRpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgbW9uZ29vc2UgPSByZXF1aXJlKCdtb25nb29zZScpO1xyXG5cclxuY29uc3Qgc2NoZWR1bGVkTm90aWZpY2F0aW9uU2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYShcclxuICB7XHJcbiAgICB1c2VySWQ6IHtcclxuICAgICAgdHlwZTogbW9uZ29vc2UuU2NoZW1hLlR5cGVzLk9iamVjdElkLFxyXG4gICAgICByZWY6ICdVc2VyJyxcclxuICAgICAgcmVxdWlyZWQ6IHRydWUsXHJcbiAgICAgIGluZGV4OiB0cnVlLFxyXG4gICAgfSxcclxuICAgIHRpdGxlOiB7XHJcbiAgICAgIHR5cGU6IFN0cmluZyxcclxuICAgICAgcmVxdWlyZWQ6IHRydWUsXHJcbiAgICB9LFxyXG4gICAgbWVzc2FnZToge1xyXG4gICAgICB0eXBlOiBTdHJpbmcsXHJcbiAgICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gICAgfSxcclxuICAgIGNoYW5uZWxzOiB7XHJcbiAgICAgIHR5cGU6IFtTdHJpbmddLFxyXG4gICAgICBlbnVtOiBbJ2luLWFwcCcsICdlbWFpbCcsICdzbXMnLCAnd2hhdHNhcHAnLCAncHVzaCddLFxyXG4gICAgICBkZWZhdWx0OiBbJ2luLWFwcCddLFxyXG4gICAgfSxcclxuICAgIHNjaGVkdWxlVGltZToge1xyXG4gICAgICB0eXBlOiBEYXRlLFxyXG4gICAgICByZXF1aXJlZDogdHJ1ZSxcclxuICAgICAgaW5kZXg6IHRydWUsXHJcbiAgICB9LFxyXG4gICAgc2VudDoge1xyXG4gICAgICB0eXBlOiBCb29sZWFuLFxyXG4gICAgICBkZWZhdWx0OiBmYWxzZSxcclxuICAgIH0sXHJcbiAgICBzZW50QXQ6IHtcclxuICAgICAgdHlwZTogRGF0ZSxcclxuICAgIH0sXHJcbiAgICBjcmVhdGVkQnk6IHtcclxuICAgICAgdHlwZTogbW9uZ29vc2UuU2NoZW1hLlR5cGVzLk9iamVjdElkLFxyXG4gICAgICByZWY6ICdVc2VyJyxcclxuICAgICAgcmVxdWlyZWQ6IHRydWUsXHJcbiAgICB9LFxyXG4gICAgbWV0YWRhdGE6IHtcclxuICAgICAgdHlwZTogbW9uZ29vc2UuU2NoZW1hLlR5cGVzLk1peGVkLFxyXG4gICAgICBkZWZhdWx0OiB7fSxcclxuICAgIH0sXHJcbiAgfSxcclxuICB7XHJcbiAgICB0aW1lc3RhbXBzOiB0cnVlLFxyXG4gIH1cclxuKTtcclxuXHJcbnNjaGVkdWxlZE5vdGlmaWNhdGlvblNjaGVtYS5pbmRleCh7IHNlbnQ6IDEsIHNjaGVkdWxlVGltZTogMSB9KTtcclxuXHJcbmNvbnN0IFNjaGVkdWxlZE5vdGlmaWNhdGlvbiA9IG1vbmdvb3NlLm1vZGVsKCdTY2hlZHVsZWROb3RpZmljYXRpb24nLCBzY2hlZHVsZWROb3RpZmljYXRpb25TY2hlbWEpO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBTY2hlZHVsZWROb3RpZmljYXRpb247XHJcbiJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsUUFBUSxHQUFHQyxPQUFPLENBQUMsVUFBVSxDQUFDO0FBRXBDLE1BQU1DLDJCQUEyQixHQUFHLElBQUlGLFFBQVEsQ0FBQ0csTUFBTSxDQUNyRDtFQUNFQyxNQUFNLEVBQUU7SUFDTkMsSUFBSSxFQUFFTCxRQUFRLENBQUNHLE1BQU0sQ0FBQ0csS0FBSyxDQUFDQyxRQUFRO0lBQ3BDQyxHQUFHLEVBQUUsTUFBTTtJQUNYQyxRQUFRLEVBQUUsSUFBSTtJQUNkQyxLQUFLLEVBQUU7RUFDVCxDQUFDO0VBQ0RDLEtBQUssRUFBRTtJQUNMTixJQUFJLEVBQUVPLE1BQU07SUFDWkgsUUFBUSxFQUFFO0VBQ1osQ0FBQztFQUNESSxPQUFPLEVBQUU7SUFDUFIsSUFBSSxFQUFFTyxNQUFNO0lBQ1pILFFBQVEsRUFBRTtFQUNaLENBQUM7RUFDREssUUFBUSxFQUFFO0lBQ1JULElBQUksRUFBRSxDQUFDTyxNQUFNLENBQUM7SUFDZEcsSUFBSSxFQUFFLENBQUMsUUFBUSxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUUsVUFBVSxFQUFFLE1BQU0sQ0FBQztJQUNwREMsT0FBTyxFQUFFLENBQUMsUUFBUTtFQUNwQixDQUFDO0VBQ0RDLFlBQVksRUFBRTtJQUNaWixJQUFJLEVBQUVhLElBQUk7SUFDVlQsUUFBUSxFQUFFLElBQUk7SUFDZEMsS0FBSyxFQUFFO0VBQ1QsQ0FBQztFQUNEUyxJQUFJLEVBQUU7SUFDSmQsSUFBSSxFQUFFZSxPQUFPO0lBQ2JKLE9BQU8sRUFBRTtFQUNYLENBQUM7RUFDREssTUFBTSxFQUFFO0lBQ05oQixJQUFJLEVBQUVhO0VBQ1IsQ0FBQztFQUNESSxTQUFTLEVBQUU7SUFDVGpCLElBQUksRUFBRUwsUUFBUSxDQUFDRyxNQUFNLENBQUNHLEtBQUssQ0FBQ0MsUUFBUTtJQUNwQ0MsR0FBRyxFQUFFLE1BQU07SUFDWEMsUUFBUSxFQUFFO0VBQ1osQ0FBQztFQUNEYyxRQUFRLEVBQUU7SUFDUmxCLElBQUksRUFBRUwsUUFBUSxDQUFDRyxNQUFNLENBQUNHLEtBQUssQ0FBQ2tCLEtBQUs7SUFDakNSLE9BQU8sRUFBRSxDQUFDO0VBQ1o7QUFDRixDQUFDLEVBQ0Q7RUFDRVMsVUFBVSxFQUFFO0FBQ2QsQ0FDRixDQUFDO0FBRUR2QiwyQkFBMkIsQ0FBQ1EsS0FBSyxDQUFDO0VBQUVTLElBQUksRUFBRSxDQUFDO0VBQUVGLFlBQVksRUFBRTtBQUFFLENBQUMsQ0FBQztBQUUvRCxNQUFNUyxxQkFBcUIsR0FBRzFCLFFBQVEsQ0FBQzJCLEtBQUssQ0FBQyx1QkFBdUIsRUFBRXpCLDJCQUEyQixDQUFDO0FBRWxHMEIsTUFBTSxDQUFDQyxPQUFPLEdBQUdILHFCQUFxQiIsImlnbm9yZUxpc3QiOltdfQ==