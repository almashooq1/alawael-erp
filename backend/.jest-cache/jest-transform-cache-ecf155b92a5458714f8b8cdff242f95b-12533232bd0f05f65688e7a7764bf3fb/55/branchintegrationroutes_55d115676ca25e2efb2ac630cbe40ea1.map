{"version":3,"names":["express","require","router","Router","BranchERPIntegrationService","integrationService","lastSyncTime","syncCount","verifyIntegrationKey","req","res","next","apiKey","headers","replace","process","env","INTEGRATION_SECRET_KEY","status","json","success","error","timestamp","Date","toISOString","get","service","version","message","endpoints","sync","kpis","inventory","reports","forecasts","dashboard","authentication","REQUIRE_INTEGRATION_AUTH","use","post","result","syncBranchesToERP","synced_count","data","console","branchId","params","metrics","getBranchPerformanceMetrics","getBranchInventory","reportType","validTypes","includes","join","report","getBranchReports","getBranchForecasts","Promise","all","catch","components","financialReport","ENABLE_CONTINUOUS_SYNC","startContinuousSync","interval","syncInterval","stopContinuousSync","syncStatus","enabled","nextSync","now","lastSync","validation","branchApiUrl","baseURL","branchApiKeyConfigured","continuousSyncEnabled","integrationAuthRequired","err","module","exports"],"sources":["branch-integration.routes.js"],"sourcesContent":["/**\r\n * Branch-ERP Integration Routes\r\n * Handles all integration endpoints between ERP and Advanced Branch Management System\r\n * Version: 2.0.0\r\n * Date: February 18, 2026\r\n */\r\n\r\nconst express = require('express');\r\nconst router = express.Router();\r\nconst { BranchERPIntegrationService } = require('../integration/erp-branch-integration');\r\n\r\n// Initialize integration service\r\nconst integrationService = new BranchERPIntegrationService();\r\n\r\n// Track sync statistics\r\nintegrationService.lastSyncTime = null;\r\nintegrationService.syncCount = 0;\r\n\r\n// =============================================\r\n// MIDDLEWARE\r\n// =============================================\r\n\r\n/**\r\n * Verify API key for integration endpoints\r\n */\r\nconst verifyIntegrationKey = (req, res, next) => {\r\n  const apiKey = req.headers['x-integration-key'] || req.headers['authorization']?.replace('Bearer ', '');\r\n  \r\n  if (!apiKey || apiKey !== process.env.INTEGRATION_SECRET_KEY) {\r\n    return res.status(401).json({\r\n      success: false,\r\n      error: 'Invalid or missing integration API key',\r\n      timestamp: new Date().toISOString()\r\n    });\r\n  }\r\n  \r\n  next();\r\n};\r\n\r\n// =============================================\r\n// PUBLIC ENDPOINTS (No Auth Required)\r\n// =============================================\r\n\r\n/**\r\n * Health Check Endpoint\r\n * GET /api/integration/health\r\n */\r\nrouter.get('/health', (req, res) => {\r\n  try {\r\n    return res.status(200).json({\r\n      success: true,\r\n      status: 'healthy',\r\n      service: 'Branch-ERP Integration Service',\r\n      version: '2.0.0',\r\n      timestamp: new Date().toISOString()\r\n    });\r\n  } catch (error) {\r\n    return res.status(500).json({\r\n      success: false,\r\n      status: 'unhealthy',\r\n      error: error.message,\r\n      timestamp: new Date().toISOString()\r\n    });\r\n  }\r\n});\r\n\r\n/**\r\n * Get Integration Status\r\n * GET /api/integration/status\r\n */\r\nrouter.get('/status', async (req, res) => {\r\n  try {\r\n    const status = {\r\n      success: true,\r\n      status: 'operational',\r\n      service: 'Branch-ERP Integration Service',\r\n      version: '2.0.0',\r\n      timestamp: new Date().toISOString(),\r\n      endpoints: {\r\n        sync: 'POST /api/integration/sync/branches',\r\n        kpis: 'GET /api/integration/branches/:branchId/kpis',\r\n        inventory: 'GET /api/integration/branches/:branchId/inventory-sync',\r\n        reports: 'GET /api/integration/branches/:branchId/reports/:reportType',\r\n        forecasts: 'GET /api/integration/branches/:branchId/forecasts',\r\n        dashboard: 'GET /api/integration/branches/:branchId/dashboard'\r\n      },\r\n      authentication: process.env.INTEGRATION_SECRET_KEY ? 'required' : 'disabled'\r\n    };\r\n    \r\n    return res.status(200).json(status);\r\n  } catch (error) {\r\n    return res.status(500).json({\r\n      success: false,\r\n      error: error.message,\r\n      timestamp: new Date().toISOString()\r\n    });\r\n  }\r\n});\r\n\r\n// =============================================\r\n// PROTECTED ENDPOINTS (Auth Required)\r\n// =============================================\r\n\r\n// Apply auth middleware to protected routes (optional based on config)\r\nif (process.env.REQUIRE_INTEGRATION_AUTH === 'true') {\r\n  router.use(verifyIntegrationKey);\r\n}\r\n\r\n/**\r\n * Sync Branches to ERP\r\n * POST /api/integration/sync/branches\r\n * Manually trigger branch data synchronization\r\n */\r\nrouter.post('/sync/branches', async (req, res) => {\r\n  try {\r\n    const result = await integrationService.syncBranchesToERP();\r\n    integrationService.lastSyncTime = new Date();\r\n    integrationService.syncCount = (integrationService.syncCount || 0) + 1;\r\n    \r\n    return res.status(200).json({\r\n      success: result.success,\r\n      message: `Synced ${result.synced_count} branches`,\r\n      data: result,\r\n      timestamp: new Date().toISOString()\r\n    });\r\n  } catch (error) {\r\n    console.error('Sync error:', error);\r\n    return res.status(500).json({\r\n      success: false,\r\n      error: error.message,\r\n      timestamp: new Date().toISOString()\r\n    });\r\n  }\r\n});\r\n\r\n/**\r\n * Get Branch Performance Metrics (KPIs)\r\n * GET /api/integration/branches/:branchId/kpis\r\n */\r\nrouter.get('/branches/:branchId/kpis', async (req, res) => {\r\n  try {\r\n    const { branchId } = req.params;\r\n    \r\n    if (!branchId) {\r\n      return res.status(400).json({\r\n        success: false,\r\n        error: 'Branch ID is required',\r\n        timestamp: new Date().toISOString()\r\n      });\r\n    }\r\n    \r\n    const metrics = await integrationService.getBranchPerformanceMetrics(branchId);\r\n    \r\n    return res.status(200).json({\r\n      success: true,\r\n      data: metrics,\r\n      timestamp: new Date().toISOString()\r\n    });\r\n  } catch (error) {\r\n    console.error('KPI retrieval error:', error);\r\n    return res.status(500).json({\r\n      success: false,\r\n      error: error.message,\r\n      timestamp: new Date().toISOString()\r\n    });\r\n  }\r\n});\r\n\r\n/**\r\n * Get Branch Inventory Data\r\n * GET /api/integration/branches/:branchId/inventory-sync\r\n */\r\nrouter.get('/branches/:branchId/inventory-sync', async (req, res) => {\r\n  try {\r\n    const { branchId } = req.params;\r\n    \r\n    if (!branchId) {\r\n      return res.status(400).json({\r\n        success: false,\r\n        error: 'Branch ID is required',\r\n        timestamp: new Date().toISOString()\r\n      });\r\n    }\r\n    \r\n    const inventory = await integrationService.getBranchInventory(branchId);\r\n    \r\n    return res.status(200).json({\r\n      success: true,\r\n      data: inventory,\r\n      timestamp: new Date().toISOString()\r\n    });\r\n  } catch (error) {\r\n    console.error('Inventory retrieval error:', error);\r\n    return res.status(500).json({\r\n      success: false,\r\n      error: error.message,\r\n      timestamp: new Date().toISOString()\r\n    });\r\n  }\r\n});\r\n\r\n/**\r\n * Get Branch Reports\r\n * GET /api/integration/branches/:branchId/reports/:reportType\r\n * Report types: OPERATIONAL, FINANCIAL, QUALITY\r\n */\r\nrouter.get('/branches/:branchId/reports/:reportType', async (req, res) => {\r\n  try {\r\n    const { branchId, reportType } = req.params;\r\n    \r\n    if (!branchId || !reportType) {\r\n      return res.status(400).json({\r\n        success: false,\r\n        error: 'Branch ID and report type are required',\r\n        timestamp: new Date().toISOString()\r\n      });\r\n    }\r\n    \r\n    const validTypes = ['OPERATIONAL', 'FINANCIAL', 'QUALITY'];\r\n    if (!validTypes.includes(reportType)) {\r\n      return res.status(400).json({\r\n        success: false,\r\n        error: `Invalid report type. Allowed: ${validTypes.join(', ')}`,\r\n        timestamp: new Date().toISOString()\r\n      });\r\n    }\r\n    \r\n    const report = await integrationService.getBranchReports(branchId, reportType);\r\n    \r\n    return res.status(200).json({\r\n      success: true,\r\n      data: report,\r\n      timestamp: new Date().toISOString()\r\n    });\r\n  } catch (error) {\r\n    console.error('Report retrieval error:', error);\r\n    return res.status(500).json({\r\n      success: false,\r\n      error: error.message,\r\n      timestamp: new Date().toISOString()\r\n    });\r\n  }\r\n});\r\n\r\n/**\r\n * Get Branch Forecasts\r\n * GET /api/integration/branches/:branchId/forecasts\r\n * Includes demand, budget, and performance predictions\r\n */\r\nrouter.get('/branches/:branchId/forecasts', async (req, res) => {\r\n  try {\r\n    const { branchId } = req.params;\r\n    \r\n    if (!branchId) {\r\n      return res.status(400).json({\r\n        success: false,\r\n        error: 'Branch ID is required',\r\n        timestamp: new Date().toISOString()\r\n      });\r\n    }\r\n    \r\n    const forecasts = await integrationService.getBranchForecasts(branchId);\r\n    \r\n    return res.status(200).json({\r\n      success: true,\r\n      data: forecasts,\r\n      timestamp: new Date().toISOString()\r\n    });\r\n  } catch (error) {\r\n    console.error('Forecast retrieval error:', error);\r\n    return res.status(500).json({\r\n      success: false,\r\n      error: error.message,\r\n      timestamp: new Date().toISOString()\r\n    });\r\n  }\r\n});\r\n\r\n/**\r\n * Get Comprehensive Branch Dashboard\r\n * GET /api/integration/branches/:branchId/dashboard\r\n * Aggregates KPIs, inventory, reports, and forecasts\r\n */\r\nrouter.get('/branches/:branchId/dashboard', async (req, res) => {\r\n  try {\r\n    const { branchId } = req.params;\r\n    \r\n    if (!branchId) {\r\n      return res.status(400).json({\r\n        success: false,\r\n        error: 'Branch ID is required',\r\n        timestamp: new Date().toISOString()\r\n      });\r\n    }\r\n    \r\n    // Fetch all dashboard components in parallel\r\n    const [kpis, inventory, reports, forecasts] = await Promise.all([\r\n      integrationService.getBranchPerformanceMetrics(branchId),\r\n      integrationService.getBranchInventory(branchId),\r\n      integrationService.getBranchReports(branchId, 'FINANCIAL'),\r\n      integrationService.getBranchForecasts(branchId)\r\n    ]).catch(error => {\r\n      console.error('Dashboard aggregation error:', error);\r\n      return [null, null, null, null];\r\n    });\r\n    \r\n    return res.status(200).json({\r\n      success: true,\r\n      data: {\r\n        branchId,\r\n        timestamp: new Date().toISOString(),\r\n        components: {\r\n          kpis,\r\n          inventory,\r\n          financialReport: reports,\r\n          forecasts\r\n        }\r\n      },\r\n      timestamp: new Date().toISOString()\r\n    });\r\n  } catch (error) {\r\n    console.error('Dashboard retrieval error:', error);\r\n    return res.status(500).json({\r\n      success: false,\r\n      error: error.message,\r\n      timestamp: new Date().toISOString()\r\n    });\r\n  }\r\n});\r\n\r\n/**\r\n * Start Continuous Sync (if enabled)\r\n * POST /api/integration/sync/start\r\n */\r\nrouter.post('/sync/start', async (req, res) => {\r\n  try {\r\n    if (process.env.ENABLE_CONTINUOUS_SYNC !== 'true') {\r\n      return res.status(400).json({\r\n        success: false,\r\n        error: 'Continuous sync is not enabled. Set ENABLE_CONTINUOUS_SYNC=true',\r\n        timestamp: new Date().toISOString()\r\n      });\r\n    }\r\n    \r\n    integrationService.startContinuousSync();\r\n    \r\n    return res.status(200).json({\r\n      success: true,\r\n      message: 'Continuous sync started',\r\n      interval: `${integrationService.syncInterval}ms`,\r\n      timestamp: new Date().toISOString()\r\n    });\r\n  } catch (error) {\r\n    console.error('Sync start error:', error);\r\n    return res.status(500).json({\r\n      success: false,\r\n      error: error.message,\r\n      timestamp: new Date().toISOString()\r\n    });\r\n  }\r\n});\r\n\r\n/**\r\n * Stop Continuous Sync\r\n * POST /api/integration/sync/stop\r\n */\r\nrouter.post('/sync/stop', async (req, res) => {\r\n  try {\r\n    integrationService.stopContinuousSync();\r\n    \r\n    return res.status(200).json({\r\n      success: true,\r\n      message: 'Continuous sync stopped',\r\n      timestamp: new Date().toISOString()\r\n    });\r\n  } catch (error) {\r\n    console.error('Sync stop error:', error);\r\n    return res.status(500).json({\r\n      success: false,\r\n      error: error.message,\r\n      timestamp: new Date().toISOString()\r\n    });\r\n  }\r\n});\r\n\r\n/**\r\n * Get Sync Status\r\n * GET /api/integration/sync/status\r\n */\r\nrouter.get('/sync/status', async (req, res) => {\r\n  try {\r\n    const status = {\r\n      success: true,\r\n      syncStatus: {\r\n        enabled: process.env.ENABLE_CONTINUOUS_SYNC === 'true',\r\n        interval: `${integrationService.syncInterval}ms`,\r\n        nextSync: new Date(Date.now() + integrationService.syncInterval).toISOString(),\r\n        lastSync: integrationService.lastSyncTime || null,\r\n        syncCount: integrationService.syncCount || 0\r\n      },\r\n      timestamp: new Date().toISOString()\r\n    };\r\n    \r\n    return res.status(200).json(status);\r\n  } catch (error) {\r\n    return res.status(500).json({\r\n      success: false,\r\n      error: error.message,\r\n      timestamp: new Date().toISOString()\r\n    });\r\n  }\r\n});\r\n\r\n// =============================================\r\n// HEALTH CHECK & VALIDATION\r\n// =============================================\r\n\r\n/**\r\n * Validate Integration Connection\r\n * GET /api/integration/validate\r\n */\r\nrouter.get('/validate', async (req, res) => {\r\n  try {\r\n    const validation = {\r\n      success: true,\r\n      validation: {\r\n        branchApiUrl: integrationService.baseURL,\r\n        branchApiKeyConfigured: !!integrationService.apiKey,\r\n        continuousSyncEnabled: process.env.ENABLE_CONTINUOUS_SYNC === 'true',\r\n        integrationAuthRequired: process.env.REQUIRE_INTEGRATION_AUTH === 'true'\r\n      },\r\n      timestamp: new Date().toISOString()\r\n    };\r\n    \r\n    return res.status(200).json(validation);\r\n  } catch (error) {\r\n    return res.status(500).json({\r\n      success: false,\r\n      error: error.message,\r\n      timestamp: new Date().toISOString()\r\n    });\r\n  }\r\n});\r\n\r\n// =============================================\r\n// ERROR HANDLING\r\n// =============================================\r\n\r\nrouter.use((err, req, res, next) => {\r\n  console.error('Integration route error:', err);\r\n  \r\n  res.status(500).json({\r\n    success: false,\r\n    error: err.message || 'Internal server error',\r\n    timestamp: new Date().toISOString()\r\n  });\r\n});\r\n\r\n// =============================================\r\n// EXPORTS\r\n// =============================================\r\n\r\nmodule.exports = {\r\n  router,\r\n  integrationService\r\n};\r\n"],"mappings":"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","ignoreList":[]}