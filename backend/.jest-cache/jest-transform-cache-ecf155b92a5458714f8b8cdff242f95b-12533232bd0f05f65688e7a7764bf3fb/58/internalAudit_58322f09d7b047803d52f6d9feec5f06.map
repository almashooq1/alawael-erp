{"version":3,"names":["mongoose","require","AnnualAuditPlanSchema","Schema","planId","type","String","required","unique","trim","year","Number","title","titleAr","description","descriptionAr","departments","departmentId","departmentName","departmentNameAr","auditFrequency","enum","default","estimatedAuditors","riskLevel","priorities","objectives","objectiveId","measurementCriteria","resources","totalBudget","allocatedAuditors","auditDays","supportTools","standards","standardId","standardName","applicableGuidelines","schedule","phase","quarter","startDate","Date","endDate","auditors","status","auditTeam","auditorId","auditorName","role","specialization","certifications","approvalInfo","approvedBy","approvalDate","approverRole","comments","createdBy","createdDate","now","lastModifiedBy","lastModifiedDate","attachments","fileName","fileUrl","uploadDate","uploadedBy","timestamps","SurpriseAuditSchema","auditId","auditInfo","reason","reasonAr","triggeringFactor","initiatedBy","initiationDate","auditScope","processArea","processAreaAr","scopeDescription","riskAssessment","auditorsId","responsibility","scheduledDate","actualStartDate","actualEndDate","duration","location","notificationDate","notificationMethod","auditCriteria","criteriaId","criteriaTitle","criteriaType","expectedResults","evidence","evidenceId","category","collectionDate","collectedBy","findings","observations","observationId","severity","relatedCriteria","evidenceReferences","progressPercentage","min","max","preliminaryResults","totalFindingsCount","criticalFindingsCount","majorFindingsCount","minorFindingsCount","overallComplianceScore","riskRating","managementNotification","notificationSent","Boolean","recipientList","NonConformanceReportSchema","ncrId","reportInfo","reportDate","reportedBy","reporterRole","classification","immediateImpact","details","affectedProcessArea","affectedDepartment","affectedDepartmentAr","statementOfNonconformity","statementAr","relatedStandard","requirementNotMet","rootCause","potentialImpact","evidenceType","documentUrl","attachmentDate","impact","customerImpact","safetyImpact","complianceImpact","financialImpact","estimatedLoss","numberOfAffectedItems","impactDescription","ownership","ownerId","ownerName","ownerDepartment","ownerEmail","assignmentDate","temporaryActions","actionId","implementedDate","implementedBy","effectiveness","initialResponse","investigationDeadline","correctionDeadline","verificationDeadline","closingInfo","closedDate","closedBy","verificationMethod","verificationEvidence","closingComments","preventiveMeasures","escalation","escalated","escalationDate","escalationReason","escalatedTo","CorrectivePreventiveActionSchema","linkedNcr","ncrTitle","relationshipType","actionInfo","rootCauseAnalysis","method","analysis","analysisAr","identifiedRootCauses","causeId","cause","causeAr","probability","contributionPercentage","analysisDate","analyzedBy","proposedActions","actionSequence","objective","expectedOutcome","implementationMethod","resourcesRequired","estimatedCost","implementation","responsibleTeam","targetCompletionDate","actualCompletionDate","phases","phaseNumber","phaseName","progress","leadPerson","notes","budget","humanResources","equipment","materials","budget_ar","risks","riskId","mitigationPlan","mitigationOwner","monitoring","indicators","indicatorId","indicatorName","targetValue","currentValue","measurementFrequency","dataSource","reviewSchedule","monitoringFrequency","lastReviewDate","nextReviewDate","verificationDate","verificationResults","isEffective","effectivenessScore","verificationBy","performanceAfterAction","closure","closureDate","closureComment","lessonsLearned","relatedDocumentation","applicableToOtherAreas","recommendations","overallStatus","ClosureFollowUpSchema","followUpId","linkedTo","linkedId","linkedTitle","followUpInfo","initiatedDate","closureCriteria","measurable","targetMetrics","acceptanceCriteria","closureVerification","verifiedBy","allCriteriaMet","evidenceProvided","verificationNotes","samplingAndTesting","testingRequired","testType","sampleSize","testingMethod","testingDate","testResults","testPassed","testingPerformedBy","additionalVerification","verificationId","verificationType","date","performedBy","results","passed","fieldFollowUp","visitRequired","visitDate","visitedBy","visitDuration","departmentVisited","photographsAttached","conclusionOfVisit","periodicReviews","reviewNumber","reviewDate","reviewedBy","statusAtReview","additionalActionsNeeded","finalApproval","approvalRequired","approvalStatus","rejectionReason","conditionalRequirements","conditionsMet","finalClosure","closureReason","closureComments","preventiveMeasuresImplemented","documentation","reopening","reopened","reopeningDate","reopeningReason","reopenedBy","numberOfReopenings","timeline","originalDeadline","extensionsRequested","finalDeadline","daysToClose","daysOverdue","accountability","responsibleParty","responsibleDepartment","escalationPerformed","escalationDetails","managementReviewRequired","managementReviewDate","statusOverall","index","AnnualAuditPlan","model","SurpriseAudit","NonConformanceReport","CorrectivePreventiveAction","ClosureFollowUp","module","exports"],"sources":["internalAudit.js"],"sourcesContent":["const mongoose = require('mongoose');\r\n\r\n// ==========================================\r\n// نموذج نظام التدقيق الداخلي الشامل\r\n// Internal Audit Management System\r\n// ==========================================\r\n\r\n// 1. نموذج خطة التدقيق السنوية\r\n// Annual Audit Plan Schema\r\nconst AnnualAuditPlanSchema = new mongoose.Schema({\r\n  planId: {\r\n    type: String,\r\n    required: true,\r\n    unique: true,\r\n    trim: true\r\n  },\r\n  year: {\r\n    type: Number,\r\n    required: true\r\n  },\r\n  title: {\r\n    type: String,\r\n    required: true\r\n  },\r\n  titleAr: {\r\n    type: String,\r\n    required: true\r\n  },\r\n  description: String,\r\n  descriptionAr: String,\r\n  \r\n  // الأقسام والعمليات المدرجة\r\n  departments: [{\r\n    departmentId: String,\r\n    departmentName: String,\r\n    departmentNameAr: String,\r\n    auditFrequency: {\r\n      type: String,\r\n      enum: ['quarterly', 'semi-annual', 'annual'],\r\n      default: 'annual'\r\n    },\r\n    estimatedAuditors: Number,\r\n    riskLevel: {\r\n      type: String,\r\n      enum: ['high', 'medium', 'low'],\r\n      default: 'medium'\r\n    },\r\n    priorities: [String]\r\n  }],\r\n  \r\n  // الأهداف والنطاق\r\n  objectives: [{\r\n    objectiveId: String,\r\n    title: String,\r\n    titleAr: String,\r\n    description: String,\r\n    measurementCriteria: String\r\n  }],\r\n  \r\n  // الموارد المخصصة\r\n  resources: {\r\n    totalBudget: Number,\r\n    allocatedAuditors: Number,\r\n    auditDays: Number,\r\n    supportTools: [String]\r\n  },\r\n  \r\n  // المعايير المراد تطبيقها\r\n  standards: [{\r\n    standardId: String,\r\n    standardName: String,\r\n    applicableGuidelines: [String]\r\n  }],\r\n  \r\n  // جدول التنفيذ\r\n  schedule: [{\r\n    phase: Number,\r\n    quarter: String,\r\n    startDate: Date,\r\n    endDate: Date,\r\n    departments: [String],\r\n    auditors: [String],\r\n    status: {\r\n      type: String,\r\n      enum: ['planned', 'in-progress', 'completed', 'postponed'],\r\n      default: 'planned'\r\n    }\r\n  }],\r\n  \r\n  // الموارد البشرية المسؤولة\r\n  auditTeam: [{\r\n    auditorId: String,\r\n    auditorName: String,\r\n    role: {\r\n      type: String,\r\n      enum: ['lead-auditor', 'auditor', 'observer'],\r\n      default: 'auditor'\r\n    },\r\n    specialization: [String],\r\n    certifications: [String]\r\n  }],\r\n  \r\n  // الحالة\r\n  status: {\r\n    type: String,\r\n    enum: ['draft', 'approved', 'active', 'completed', 'archived'],\r\n    default: 'draft'\r\n  },\r\n  \r\n  approvalInfo: {\r\n    approvedBy: String,\r\n    approvalDate: Date,\r\n    approverRole: String,\r\n    comments: String\r\n  },\r\n  \r\n  createdBy: String,\r\n  createdDate: { type: Date, default: Date.now },\r\n  lastModifiedBy: String,\r\n  lastModifiedDate: Date,\r\n  \r\n  attachments: [{\r\n    fileName: String,\r\n    fileUrl: String,\r\n    uploadDate: Date,\r\n    uploadedBy: String\r\n  }]\r\n}, { timestamps: true });\r\n\r\n// 2. نموذج عمليات التدقيق المفاجئة\r\n// Surprise Audit Operations Schema\r\nconst SurpriseAuditSchema = new mongoose.Schema({\r\n  auditId: {\r\n    type: String,\r\n    required: true,\r\n    unique: true,\r\n    trim: true\r\n  },\r\n  type: {\r\n    type: String,\r\n    required: true,\r\n    enum: ['surprise', 'planned', 'follow-up']\r\n  },\r\n  \r\n  // معلومات التدقيق الأساسية\r\n  auditInfo: {\r\n    title: String,\r\n    titleAr: String,\r\n    description: String,\r\n    reason: String,\r\n    reasonAr: String,\r\n    triggeringFactor: String, // سبب التدقيق المفاجئ\r\n    initiatedBy: String,\r\n    initiationDate: Date\r\n  },\r\n  \r\n  // القسم المراد تدقيقه\r\n  auditScope: {\r\n    departmentId: String,\r\n    departmentName: String,\r\n    departmentNameAr: String,\r\n    processArea: String,\r\n    processAreaAr: String,\r\n    scopeDescription: String,\r\n    riskAssessment: String\r\n  },\r\n  \r\n  // فريق التدقيق\r\n  auditTeam: [{\r\n    auditorsId: String,\r\n    auditorName: String,\r\n    role: {\r\n      type: String,\r\n      enum: ['lead', 'member', 'observer'],\r\n      default: 'member'\r\n    },\r\n    responsibility: String\r\n  }],\r\n  \r\n  // جدول التدقيق\r\n  schedule: {\r\n    scheduledDate: Date,\r\n    actualStartDate: Date,\r\n    actualEndDate: Date,\r\n    duration: Number, // بالساعات\r\n    location: String,\r\n    notificationDate: Date,\r\n    notificationMethod: String\r\n  },\r\n  \r\n  // المعايير المراد الفحص عليها\r\n  auditCriteria: [{\r\n    criteriaId: String,\r\n    criteriaTitle: String,\r\n    criteriaType: {\r\n      type: String,\r\n      enum: ['compliance', 'performance', 'process', 'control'],\r\n      default: 'compliance'\r\n    },\r\n    description: String,\r\n    expectedResults: String\r\n  }],\r\n  \r\n  // الأدلة والمستندات\r\n  evidence: [{\r\n    evidenceId: String,\r\n    category: {\r\n      type: String,\r\n      enum: ['document', 'interview', 'observation', 'record', 'sample'],\r\n      default: 'document'\r\n    },\r\n    description: String,\r\n    location: String,\r\n    collectionDate: Date,\r\n    collectedBy: String,\r\n    fileUrl: String,\r\n    findings: String\r\n  }],\r\n  \r\n  // الملاحظات المبدئية\r\n  observations: [{\r\n    observationId: String,\r\n    category: {\r\n      type: String,\r\n      enum: ['strength', 'weakness', 'risk', 'opportunity'],\r\n      default: 'weakness'\r\n    },\r\n    description: String,\r\n    severity: {\r\n      type: String,\r\n      enum: ['critical', 'major', 'minor'],\r\n      default: 'minor'\r\n    },\r\n    relatedCriteria: [String],\r\n    evidenceReferences: [String]\r\n  }],\r\n  \r\n  // الحالة والتقدم\r\n  status: {\r\n    type: String,\r\n    enum: ['planned', 'in-progress', 'fieldwork-complete', 'reporting', 'completed', 'closed'],\r\n    default: 'planned'\r\n  },\r\n  \r\n  progressPercentage: {\r\n    type: Number,\r\n    default: 0,\r\n    min: 0,\r\n    max: 100\r\n  },\r\n  \r\n  // النتائج الأولية\r\n  preliminaryResults: {\r\n    totalFindingsCount: Number,\r\n    criticalFindingsCount: Number,\r\n    majorFindingsCount: Number,\r\n    minorFindingsCount: Number,\r\n    overallComplianceScore: Number,\r\n    riskRating: String\r\n  },\r\n  \r\n  managementNotification: {\r\n    notificationSent: Boolean,\r\n    notificationDate: Date,\r\n    notificationMethod: String,\r\n    recipientList: [String]\r\n  },\r\n  \r\n  createdBy: String,\r\n  createdDate: { type: Date, default: Date.now },\r\n  lastModifiedBy: String,\r\n  lastModifiedDate: Date\r\n}, { timestamps: true });\r\n\r\n// 3. نموذج تقارير عدم المطابقة\r\n// Non-Conformance Reports Schema\r\nconst NonConformanceReportSchema = new mongoose.Schema({\r\n  ncrId: {\r\n    type: String,\r\n    required: true,\r\n    unique: true,\r\n    trim: true\r\n  },\r\n  \r\n  // معلومات عدم المطابقة\r\n  reportInfo: {\r\n    title: String,\r\n    titleAr: String,\r\n    description: String,\r\n    descriptionAr: String,\r\n    reportDate: { type: Date, default: Date.now },\r\n    reportedBy: String,\r\n    reporterRole: String\r\n  },\r\n  \r\n  // تصنيف عدم المطابقة\r\n  classification: {\r\n    type: {\r\n      type: String,\r\n      enum: ['external-audit', 'internal-audit', 'management-review', 'customer-complaint', 'process-monitoring', 'other'],\r\n      default: 'internal-audit'\r\n    },\r\n    category: {\r\n      type: String,\r\n      enum: ['critical', 'major', 'minor'],\r\n      default: 'major'\r\n    },\r\n    severity: {\r\n      type: String,\r\n      enum: ['1-Critical', '2-High', '3-Medium', '4-Low'],\r\n      default: '3-Medium'\r\n    },\r\n    immediateImpact: Boolean\r\n  },\r\n  \r\n  // تفاصيل عدم المطابقة\r\n  details: {\r\n    affectedProcessArea: String,\r\n    affectedDepartment: String,\r\n    affectedDepartmentAr: String,\r\n    statementOfNonconformity: String,\r\n    statementAr: String,\r\n    relatedStandard: String,\r\n    requirementNotMet: String,\r\n    rootCause: String,\r\n    potentialImpact: String\r\n  },\r\n  \r\n  // الأدلة\r\n  evidence: [{\r\n    evidenceType: String,\r\n    description: String,\r\n    documentUrl: String,\r\n    attachmentDate: Date\r\n  }],\r\n  \r\n  // التأثير المحدث\r\n  impact: {\r\n    customerImpact: Boolean,\r\n    safetyImpact: Boolean,\r\n    complianceImpact: Boolean,\r\n    financialImpact: Boolean,\r\n    estimatedLoss: Number,\r\n    numberOfAffectedItems: Number,\r\n    impactDescription: String\r\n  },\r\n  \r\n  // الحالة\r\n  status: {\r\n    type: String,\r\n    enum: ['open', 'acknowledged', 'under-investigation', 'action-plan-defined', 'action-in-progress', 'verification-pending', 'closed', 'rejected'],\r\n    default: 'open'\r\n  },\r\n  \r\n  // المالك ومعلومات المتابعة\r\n  ownership: {\r\n    ownerId: String,\r\n    ownerName: String,\r\n    ownerDepartment: String,\r\n    ownerEmail: String,\r\n    assignmentDate: Date\r\n  },\r\n  \r\n  // التعليقات والإجراءات المؤقتة\r\n  temporaryActions: [{\r\n    actionId: String,\r\n    description: String,\r\n    implementedDate: Date,\r\n    implementedBy: String,\r\n    effectiveness: String\r\n  }],\r\n  \r\n  // الأولويات والتواريخ\r\n  priorities: {\r\n    initialResponse: Date,\r\n    investigationDeadline: Date,\r\n    correctionDeadline: Date,\r\n    verificationDeadline: Date\r\n  },\r\n  \r\n  // متابعة الإغلاق\r\n  closingInfo: {\r\n    closedDate: Date,\r\n    closedBy: String,\r\n    verificationMethod: String,\r\n    verificationEvidence: [String],\r\n    closingComments: String,\r\n    preventiveMeasures: String\r\n  },\r\n  \r\n  // التصعيد\r\n  escalation: {\r\n    escalated: Boolean,\r\n    escalationDate: Date,\r\n    escalationReason: String,\r\n    escalatedTo: String\r\n  },\r\n  \r\n  attachments: [{\r\n    fileName: String,\r\n    fileUrl: String,\r\n    uploadDate: Date,\r\n    uploadedBy: String\r\n  }],\r\n  \r\n  createdBy: String,\r\n  createdDate: { type: Date, default: Date.now },\r\n  lastModifiedBy: String,\r\n  lastModifiedDate: Date\r\n}, { timestamps: true });\r\n\r\n// 4. نموذج الخطط التصحيحية والوقائية\r\n// Corrective and Preventive Actions Schema\r\nconst CorrectivePreventiveActionSchema = new mongoose.Schema({\r\n  actionId: {\r\n    type: String,\r\n    required: true,\r\n    unique: true,\r\n    trim: true\r\n  },\r\n  \r\n  type: {\r\n    type: String,\r\n    required: true,\r\n    enum: ['corrective', 'preventive'],\r\n    default: 'corrective'\r\n  },\r\n  \r\n  // الارتباط بعدم المطابقة\r\n  linkedNcr: {\r\n    ncrId: String,\r\n    ncrTitle: String,\r\n    relationshipType: String\r\n  },\r\n  \r\n  // معلومات الإجراء\r\n  actionInfo: {\r\n    title: String,\r\n    titleAr: String,\r\n    description: String,\r\n    descriptionAr: String,\r\n    createdDate: { type: Date, default: Date.now },\r\n    createdBy: String\r\n  },\r\n  \r\n  // تحليل الأسباب الجذرية\r\n  rootCauseAnalysis: {\r\n    method: {\r\n      type: String,\r\n      enum: ['5-why', 'fishbone', 'fault-tree', 'pareto', 'other'],\r\n      default: '5-why'\r\n    },\r\n    analysis: String,\r\n    analysisAr: String,\r\n    identifiedRootCauses: [{\r\n      causeId: String,\r\n      cause: String,\r\n      causeAr: String,\r\n      probability: String,\r\n      contributionPercentage: Number\r\n    }],\r\n    analysisDate: Date,\r\n    analyzedBy: String\r\n  },\r\n  \r\n  // الإجراءات المقترحة\r\n  proposedActions: [{\r\n    actionSequence: Number,\r\n    description: String,\r\n    objective: String,\r\n    expectedOutcome: String,\r\n    implementationMethod: String,\r\n    resourcesRequired: String,\r\n    estimatedCost: Number\r\n  }],\r\n  \r\n  // تفاصيل التنفيذ\r\n  implementation: {\r\n    ownerName: String,\r\n    ownerDepartment: String,\r\n    ownerEmail: String,\r\n    responsibleTeam: [String],\r\n    startDate: Date,\r\n    targetCompletionDate: Date,\r\n    actualCompletionDate: Date,\r\n    status: {\r\n      type: String,\r\n      enum: ['planning', 'approved', 'in-progress', 'completed', 'delayed', 'on-hold'],\r\n      default: 'planning'\r\n    },\r\n    progressPercentage: {\r\n      type: Number,\r\n      default: 0,\r\n      min: 0,\r\n      max: 100\r\n    }\r\n  },\r\n  \r\n  // المراحل والتقدم\r\n  phases: [{\r\n    phaseNumber: Number,\r\n    phaseName: String,\r\n    description: String,\r\n    startDate: Date,\r\n    endDate: Date,\r\n    status: String,\r\n    progress: Number,\r\n    leadPerson: String,\r\n    notes: String\r\n  }],\r\n  \r\n  // الموارد المخصصة\r\n  resources: {\r\n    budget: Number,\r\n    humanResources: [String],\r\n    equipment: [String],\r\n    materials: [String],\r\n    budget_ar: String\r\n  },\r\n  \r\n  // المخاطر والعقبات\r\n  risks: [{\r\n    riskId: String,\r\n    description: String,\r\n    probability: String,\r\n    impact: String,\r\n    mitigationPlan: String,\r\n    mitigationOwner: String\r\n  }],\r\n  \r\n  // المراقبة والتحقق\r\n  monitoring: {\r\n    indicators: [{\r\n      indicatorId: String,\r\n      indicatorName: String,\r\n      targetValue: String,\r\n      currentValue: String,\r\n      measurementFrequency: String,\r\n      dataSource: String\r\n    }],\r\n    reviewSchedule: String,\r\n    monitoringFrequency: String,\r\n    lastReviewDate: Date,\r\n    nextReviewDate: Date\r\n  },\r\n  \r\n  // التحقق من الفعالية\r\n  effectiveness: {\r\n    verificationMethod: {\r\n      type: String,\r\n      enum: ['audit', 'measurement', 'observation', 'review', 'testing'],\r\n      default: 'audit'\r\n    },\r\n    verificationDate: Date,\r\n    verificationResults: String,\r\n    isEffective: Boolean,\r\n    effectivenessScore: Number,\r\n    verificationEvidence: [String],\r\n    verificationBy: String,\r\n    performanceAfterAction: String\r\n  },\r\n  \r\n  // الإغلاق\r\n  closure: {\r\n    closureDate: Date,\r\n    closedBy: String,\r\n    closureComment: String,\r\n    lessonsLearned: String,\r\n    relatedDocumentation: [String],\r\n    applicableToOtherAreas: Boolean,\r\n    recommendations: String\r\n  },\r\n  \r\n  // الحالة الكلية\r\n  overallStatus: {\r\n    type: String,\r\n    enum: ['new', 'assigned', 'in-progress', 'awaiting-verification', 'effective', 'ineffective', 'closed'],\r\n    default: 'new'\r\n  },\r\n  \r\n  attachments: [{\r\n    fileName: String,\r\n    fileUrl: String,\r\n    category: String,\r\n    uploadDate: Date,\r\n    uploadedBy: String\r\n  }],\r\n  \r\n  createdBy: String,\r\n  createdDate: { type: Date, default: Date.now },\r\n  lastModifiedBy: String,\r\n  lastModifiedDate: Date\r\n}, { timestamps: true });\r\n\r\n// 5. نموذج متابعة الإغلاق\r\n// Closure Follow-up Schema\r\nconst ClosureFollowUpSchema = new mongoose.Schema({\r\n  followUpId: {\r\n    type: String,\r\n    required: true,\r\n    unique: true,\r\n    trim: true\r\n  },\r\n  \r\n  // الارتباط بالمشكلة الأصلية\r\n  linkedTo: {\r\n    type: {\r\n      type: String,\r\n      enum: ['ncr', 'audit-finding', 'corrective-action', 'preventive-action'],\r\n      required: true\r\n    },\r\n    linkedId: String,\r\n    linkedTitle: String\r\n  },\r\n  \r\n  // معلومات المتابعة\r\n  followUpInfo: {\r\n    description: String,\r\n    descriptionAr: String,\r\n    initiatedDate: { type: Date, default: Date.now },\r\n    initiatedBy: String,\r\n    status: {\r\n      type: String,\r\n      enum: ['pending', 'in-progress', 'awaiting-evidence', 'completed', 'failed', 'escalated'],\r\n      default: 'pending'\r\n    }\r\n  },\r\n  \r\n  // معايير الإغلاق\r\n  closureCriteria: [{\r\n    criteriaId: String,\r\n    description: String,\r\n    descriptionAr: String,\r\n    measurable: Boolean,\r\n    targetMetrics: String,\r\n    acceptanceCriteria: String,\r\n    verificationMethod: String\r\n  }],\r\n  \r\n  // التحقق من الإغلاق\r\n  closureVerification: {\r\n    verificationDate: Date,\r\n    verifiedBy: String,\r\n    verificationMethod: String,\r\n    allCriteriaMet: Boolean,\r\n    evidenceProvided: [{\r\n      evidenceType: String,\r\n      description: String,\r\n      documentUrl: String,\r\n      attachmentDate: Date\r\n    }],\r\n    verificationNotes: String\r\n  },\r\n  \r\n  // الاختبارات والعينات\r\n  samplingAndTesting: {\r\n    testingRequired: Boolean,\r\n    testType: String,\r\n    sampleSize: Number,\r\n    testingMethod: String,\r\n    testingDate: Date,\r\n    testResults: String,\r\n    testPassed: Boolean,\r\n    testingPerformedBy: String\r\n  },\r\n  \r\n  // عمليات التحقق الإضافية\r\n  additionalVerification: [{\r\n    verificationId: String,\r\n    verificationType: String,\r\n    description: String,\r\n    date: Date,\r\n    performedBy: String,\r\n    results: String,\r\n    passed: Boolean\r\n  }],\r\n  \r\n  // المتابعة الميدانية\r\n  fieldFollowUp: {\r\n    visitRequired: Boolean,\r\n    visitDate: Date,\r\n    visitedBy: String,\r\n    visitDuration: Number,\r\n    departmentVisited: String,\r\n    observations: String,\r\n    photographsAttached: Boolean,\r\n    conclusionOfVisit: String\r\n  },\r\n  \r\n  // المراجعات الفترية\r\n  periodicReviews: [{\r\n    reviewNumber: Number,\r\n    reviewDate: Date,\r\n    reviewedBy: String,\r\n    statusAtReview: String,\r\n    findings: String,\r\n    additionalActionsNeeded: Boolean\r\n  }],\r\n  \r\n  // الموافقة النهائية\r\n  finalApproval: {\r\n    approvalRequired: Boolean,\r\n    approvalStatus: {\r\n      type: String,\r\n      enum: ['pending', 'approved', 'rejected', 'conditional'],\r\n      default: 'pending'\r\n    },\r\n    approvedBy: String,\r\n    approvalDate: Date,\r\n    rejectionReason: String,\r\n    conditionalRequirements: String,\r\n    conditionsMet: Boolean\r\n  },\r\n  \r\n  // الإغلاق النهائي\r\n  finalClosure: {\r\n    closureDate: Date,\r\n    closedBy: String,\r\n    closureReason: {\r\n      type: String,\r\n      enum: ['criteria-met', 'time-expired', 'superseded', 'waived', 'other'],\r\n      default: 'criteria-met'\r\n    },\r\n    closureComments: String,\r\n    lessonsLearned: String,\r\n    preventiveMeasuresImplemented: String,\r\n    documentation: [String]\r\n  },\r\n  \r\n  // إعادة الفتح\r\n  reopening: {\r\n    reopened: Boolean,\r\n    reopeningDate: Date,\r\n    reopeningReason: String,\r\n    reopenedBy: String,\r\n    numberOfReopenings: Number\r\n  },\r\n  \r\n  // الجدول الزمني\r\n  timeline: {\r\n    originalDeadline: Date,\r\n    extensionsRequested: Number,\r\n    finalDeadline: Date,\r\n    daysToClose: Number,\r\n    daysOverdue: Number\r\n  },\r\n  \r\n  // المسؤولية والمحاسبية\r\n  accountability: {\r\n    responsibleParty: String,\r\n    responsibleDepartment: String,\r\n    escalationPerformed: Boolean,\r\n    escalationDetails: String,\r\n    managementReviewRequired: Boolean,\r\n    managementReviewDate: Date\r\n  },\r\n  \r\n  statusOverall: {\r\n    type: String,\r\n    enum: ['not-started', 'in-progress', 'monitoring', 'closed', 'suspended'],\r\n    default: 'not-started'\r\n  },\r\n  \r\n  attachments: [{\r\n    fileName: String,\r\n    fileUrl: String,\r\n    category: String,\r\n    uploadDate: Date,\r\n    uploadedBy: String\r\n  }],\r\n  \r\n  createdBy: String,\r\n  createdDate: { type: Date, default: Date.now },\r\n  lastModifiedBy: String,\r\n  lastModifiedDate: Date\r\n}, { timestamps: true });\r\n\r\n// إنشاء الفهارس\r\nAnnualAuditPlanSchema.index({ year: 1, status: 1 });\r\nSurpriseAuditSchema.index({ auditId: 1, status: 1, 'auditScope.departmentId': 1 });\r\nNonConformanceReportSchema.index({ ncrId: 1, status: 1, 'classification.category': 1 });\r\nCorrectivePreventiveActionSchema.index({ actionId: 1, type: 1, 'implementation.status': 1 });\r\nClosureFollowUpSchema.index({ followUpId: 1, 'linkedTo.linkedId': 1, statusOverall: 1 });\r\n\r\n// إنشاء النماذج\r\nconst AnnualAuditPlan = mongoose.model('AnnualAuditPlan', AnnualAuditPlanSchema);\r\nconst SurpriseAudit = mongoose.model('SurpriseAudit', SurpriseAuditSchema);\r\nconst NonConformanceReport = mongoose.model('NonConformanceReport', NonConformanceReportSchema);\r\nconst CorrectivePreventiveAction = mongoose.model('CorrectivePreventiveAction', CorrectivePreventiveActionSchema);\r\nconst ClosureFollowUp = mongoose.model('ClosureFollowUp', ClosureFollowUpSchema);\r\n\r\nmodule.exports = {\r\n  AnnualAuditPlan,\r\n  SurpriseAudit,\r\n  NonConformanceReport,\r\n  CorrectivePreventiveAction,\r\n  ClosureFollowUp\r\n};\r\n"],"mappings":"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","ignoreList":[]}