79387e0d3bcc5c41324987ad33fff81a
/**
 * Jest Test Setup File
 * Initialize test environment and global configuration
 */

const {
  cleanupResources,
  MockFactory,
  HTTPHelper,
  DatabaseHelper
} = require('./test-helpers');

// =============================================
// ENVIRONMENT SETUP
// =============================================

// Set test environment
process.env.NODE_ENV = 'test';

// Configure environment variables for tests
process.env.BRANCH_API_URL = process.env.BRANCH_API_URL || 'http://localhost:5000/api/v2';
process.env.BRANCH_API_KEY = process.env.BRANCH_API_KEY || 'test-api-key-123';
process.env.SYNC_INTERVAL = process.env.SYNC_INTERVAL || '60000';
process.env.ENABLE_CONTINUOUS_SYNC = process.env.ENABLE_CONTINUOUS_SYNC || 'false';

// Increase stack trace limit for debugging
Error.stackTraceLimit = 50;

// =============================================
// GLOBAL TEST TIMEOUT
// =============================================

jest.setTimeout(60000);

// =============================================
// GLOBAL FETCH MOCK
// =============================================

global.fetch = jest.fn();

// Default fetch mock implementation
global.fetch.mockImplementation(() => Promise.resolve({
  ok: true,
  status: 200,
  json: async () => ({})
}));

// =============================================
// GLOBAL ERROR HANDLING
// =============================================

// Suppress console errors in tests (comment out to see errors)
const originalConsoleError = console.error;
const originalConsoleWarn = console.warn;

// Only suppress specific patterns
console.error = (...args) => {
  const message = args[0]?.toString?.() || '';

  // Allow test-related errors
  if (message.includes('Error') || message.includes('Test')) {
    originalConsoleError(...args);
  }
  // Suppress specific known warnings
  else if (message.includes('ExperimentalWarning')) {
    // Suppress experimental warnings
  }
  // Log everything else
  else {
    originalConsoleError(...args);
  }
};
console.warn = (...args) => {
  const message = args[0]?.toString?.() || '';

  // Log all warnings
  originalConsoleWarn(...args);
};

// =============================================
// GLOBAL TEST UTILITIES
// =============================================

/**
 * Create a mock successful response
 */
global.mockSuccessResponse = (data = {}, status = 200) => ({
  ok: status < 400,
  status,
  json: async () => ({
    success: true,
    ...data
  })
});

/**
 * Create a mock error response
 */
global.mockErrorResponse = (error = 'Error', status = 500) => ({
  ok: false,
  status,
  json: async () => ({
    success: false,
    error
  })
});

/**
 * Create a mock timeout
 */
global.mockTimeout = () => Promise.reject(new Error('Timeout'));

/**
 * Reset all mocks
 */
global.resetMocks = () => {
  jest.clearAllMocks();
};

// =============================================
// MAKE TEST HELPERS GLOBALLY AVAILABLE
// =============================================

global.testHelpers = {
  cleanupResources,
  MockFactory,
  HTTPHelper,
  DatabaseHelper
};

// =============================================
// GLOBAL TEST MATCHERS
// =============================================

expect.extend({
  /**
   * Custom matcher for checking if response is in valid ERP format
   */
  toBeValidERPResponse(received) {
    const pass = received && typeof received === 'object' && 'success' in received && 'timestamp' in received;
    return {
      pass,
      message: () => pass ? `Expected response not to be valid ERP format` : `Expected response to be valid ERP format with 'success' and 'timestamp' properties`
    };
  },
  /**
   * Custom matcher for checking if value is within range
   */
  toBeWithinRange(received, floor, ceiling) {
    const pass = received >= floor && received <= ceiling;
    return {
      pass,
      message: () => pass ? `Expected ${received} not to be within range ${floor} - ${ceiling}` : `Expected ${received} to be within range ${floor} - ${ceiling}`
    };
  },
  /**
   * Custom matcher for branch status validation
   */
  toBeValidBranchStatus(received) {
    const validStatuses = ['ACTIVE', 'INACTIVE', 'CLOSED', 'SUSPENDED', 'PLANNED'];
    const pass = validStatuses.includes(received);
    return {
      pass,
      message: () => pass ? `Expected status not to be valid` : `Expected status to be one of: ${validStatuses.join(', ')}, but got: ${received}`
    };
  }
});

// =============================================
// ASSERTION HELPERS
// =============================================

/**
 * Assert response structure
 */
global.assertResponseStructure = (response, expectedFields = []) => {
  expect(response).toBeDefined();
  expect(response).toHaveProperty('timestamp');
  expectedFields.forEach(field => {
    expect(response).toHaveProperty(field);
  });
};

/**
 * Assert error structure
 */
global.assertErrorStructure = response => {
  expect(response).toBeDefined();
  expect(response).toHaveProperty('error');
  expect(response).toHaveProperty('timestamp');
};

/**
 * Assert performance within SLA
 */
global.assertPerformanceSLA = (duration, slaMs, operation = 'Operation') => {
  expect(duration).toBeLessThan(slaMs);
  console.log(`âœ“ ${operation} completed in ${duration}ms (SLA: ${slaMs}ms)`);
};

// =============================================
// MEMORY AND CLEANUP
// =============================================

// Track registered cleanup functions
const cleanupFunctions = [];

/**
 * Register cleanup function
 */
global.registerCleanup = fn => {
  cleanupFunctions.push(fn);
};

// Run cleanup after each test
afterEach(async () => {
  try {
    // Clear all active timers from this test
    await cleanupResources();

    // Run custom cleanup functions
    cleanupFunctions.forEach(fn => {
      try {
        fn();
      } catch (error) {
        console.warn('Cleanup error:', error);
      }
    });
    cleanupFunctions.length = 0;

    // Clear all mocks
    jest.clearAllMocks();

    // Reset mocks
    jest.resetAllMocks();

    // Clear pending timers just in case
    jest.clearAllTimers();

    // Give event loop a chance to process
    await new Promise(resolve => setImmediate(resolve));
  } catch (error) {
    console.warn('Error during afterEach cleanup:', error);
  }
});

// =============================================
// PERFORMANCE MONITORING
// =============================================

let testStartTime;
beforeEach(() => {
  testStartTime = performance.now();
});
afterEach(() => {
  const testDuration = performance.now() - testStartTime;
  const testName = expect.getState().currentTestName;
  if (testDuration > 1000) {
    console.warn(`âš ï¸ Slow test "${testName}": ${testDuration.toFixed(2)}ms`);
  }
});

// =============================================
// LOGGING
// =============================================

// Log test suite information
console.log('');
console.log('â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•');
console.log('ðŸ§ª Jest Test Suite Initialized');
console.log('â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•');
console.log(`Environment: ${process.env.NODE_ENV}`);
console.log(`Branch API: ${process.env.BRANCH_API_URL}`);
console.log('Timeout: 30000ms');
console.log('â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•');
console.log('');

// =============================================
// ERROR TRACKING
// =============================================

// Track uncaught exceptions
process.on('uncaughtException', error => {
  console.error('Uncaught Exception:', error);
});

// Track unhandled promise rejections
process.on('unhandledRejection', (reason, promise) => {
  console.error('Unhandled Rejection at:', promise, 'reason:', reason);
});

// =============================================
// CLEANUP ON EXIT
// =============================================

// Track all timers created during tests
const activeTimers = {
  timeouts: [],
  intervals: [],
  handles: []
};

// Override setTimeout to track timers
const originalSetTimeout = global.setTimeout;
global.setTimeout = function (...args) {
  const timeout = originalSetTimeout.apply(this, args);
  activeTimers.timeouts.push(timeout);
  return timeout;
};

// Override setInterval to track intervals
const originalSetInterval = global.setInterval;
global.setInterval = function (...args) {
  const interval = originalSetInterval.apply(this, args);
  activeTimers.intervals.push(interval);
  return interval;
};

// Restore original functions but keep tracking
Object.assign(global.setTimeout, originalSetTimeout);
Object.assign(global.setInterval, originalSetInterval);

// Clean up function for timers
function cleanupAllTimers() {
  // Clear timeouts
  activeTimers.timeouts.forEach(timeout => {
    clearTimeout(timeout);
  });
  activeTimers.timeouts = [];

  // Clear intervals
  activeTimers.intervals.forEach(interval => {
    clearInterval(interval);
  });
  activeTimers.intervals = [];

  // Clear jest timers
  try {
    jest.clearAllTimers();
  } catch (e) {
    // Ignore if timers already cleared
  }
}

// Ensure proper cleanup on process exit
afterAll(async () => {
  try {
    // Clear all timers and resources
    await cleanupResources();

    // Reset mocks
    jest.resetAllMocks();

    // Clear all mocks
    jest.clearAllMocks();

    // Restore all mocks
    jest.restoreAllMocks();

    // Clear pending timers
    jest.clearAllTimers();
    console.log('');
    console.log('â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•');
    console.log('âœ“ Test suite cleanup completed');
    console.log('â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•');
    console.log('');
  } catch (error) {
    console.error('Error during afterAll cleanup:', error);
  }
});

// Register cleanup on exit
process.on('exit', async () => {
  try {
    await cleanupResources();
  } catch (error) {
    // Ignore errors on exit
  }
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjbGVhbnVwUmVzb3VyY2VzIiwiTW9ja0ZhY3RvcnkiLCJIVFRQSGVscGVyIiwiRGF0YWJhc2VIZWxwZXIiLCJyZXF1aXJlIiwicHJvY2VzcyIsImVudiIsIk5PREVfRU5WIiwiQlJBTkNIX0FQSV9VUkwiLCJCUkFOQ0hfQVBJX0tFWSIsIlNZTkNfSU5URVJWQUwiLCJFTkFCTEVfQ09OVElOVU9VU19TWU5DIiwiRXJyb3IiLCJzdGFja1RyYWNlTGltaXQiLCJqZXN0Iiwic2V0VGltZW91dCIsImdsb2JhbCIsImZldGNoIiwiZm4iLCJtb2NrSW1wbGVtZW50YXRpb24iLCJQcm9taXNlIiwicmVzb2x2ZSIsIm9rIiwic3RhdHVzIiwianNvbiIsIm9yaWdpbmFsQ29uc29sZUVycm9yIiwiY29uc29sZSIsImVycm9yIiwib3JpZ2luYWxDb25zb2xlV2FybiIsIndhcm4iLCJhcmdzIiwibWVzc2FnZSIsInRvU3RyaW5nIiwiaW5jbHVkZXMiLCJtb2NrU3VjY2Vzc1Jlc3BvbnNlIiwiZGF0YSIsInN1Y2Nlc3MiLCJtb2NrRXJyb3JSZXNwb25zZSIsIm1vY2tUaW1lb3V0IiwicmVqZWN0IiwicmVzZXRNb2NrcyIsImNsZWFyQWxsTW9ja3MiLCJ0ZXN0SGVscGVycyIsImV4cGVjdCIsImV4dGVuZCIsInRvQmVWYWxpZEVSUFJlc3BvbnNlIiwicmVjZWl2ZWQiLCJwYXNzIiwidG9CZVdpdGhpblJhbmdlIiwiZmxvb3IiLCJjZWlsaW5nIiwidG9CZVZhbGlkQnJhbmNoU3RhdHVzIiwidmFsaWRTdGF0dXNlcyIsImpvaW4iLCJhc3NlcnRSZXNwb25zZVN0cnVjdHVyZSIsInJlc3BvbnNlIiwiZXhwZWN0ZWRGaWVsZHMiLCJ0b0JlRGVmaW5lZCIsInRvSGF2ZVByb3BlcnR5IiwiZm9yRWFjaCIsImZpZWxkIiwiYXNzZXJ0RXJyb3JTdHJ1Y3R1cmUiLCJhc3NlcnRQZXJmb3JtYW5jZVNMQSIsImR1cmF0aW9uIiwic2xhTXMiLCJvcGVyYXRpb24iLCJ0b0JlTGVzc1RoYW4iLCJsb2ciLCJjbGVhbnVwRnVuY3Rpb25zIiwicmVnaXN0ZXJDbGVhbnVwIiwicHVzaCIsImFmdGVyRWFjaCIsImxlbmd0aCIsInJlc2V0QWxsTW9ja3MiLCJjbGVhckFsbFRpbWVycyIsInNldEltbWVkaWF0ZSIsInRlc3RTdGFydFRpbWUiLCJiZWZvcmVFYWNoIiwicGVyZm9ybWFuY2UiLCJub3ciLCJ0ZXN0RHVyYXRpb24iLCJ0ZXN0TmFtZSIsImdldFN0YXRlIiwiY3VycmVudFRlc3ROYW1lIiwidG9GaXhlZCIsIm9uIiwicmVhc29uIiwicHJvbWlzZSIsImFjdGl2ZVRpbWVycyIsInRpbWVvdXRzIiwiaW50ZXJ2YWxzIiwiaGFuZGxlcyIsIm9yaWdpbmFsU2V0VGltZW91dCIsInRpbWVvdXQiLCJhcHBseSIsIm9yaWdpbmFsU2V0SW50ZXJ2YWwiLCJzZXRJbnRlcnZhbCIsImludGVydmFsIiwiT2JqZWN0IiwiYXNzaWduIiwiY2xlYW51cEFsbFRpbWVycyIsImNsZWFyVGltZW91dCIsImNsZWFySW50ZXJ2YWwiLCJlIiwiYWZ0ZXJBbGwiLCJyZXN0b3JlQWxsTW9ja3MiXSwic291cmNlcyI6WyJzZXR1cC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEplc3QgVGVzdCBTZXR1cCBGaWxlXG4gKiBJbml0aWFsaXplIHRlc3QgZW52aXJvbm1lbnQgYW5kIGdsb2JhbCBjb25maWd1cmF0aW9uXG4gKi9cblxuY29uc3Qge1xuICBjbGVhbnVwUmVzb3VyY2VzLFxuICBNb2NrRmFjdG9yeSxcbiAgSFRUUEhlbHBlcixcbiAgRGF0YWJhc2VIZWxwZXJcbn0gPSByZXF1aXJlKCcuL3Rlc3QtaGVscGVycycpO1xuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIEVOVklST05NRU5UIFNFVFVQXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLy8gU2V0IHRlc3QgZW52aXJvbm1lbnRcbnByb2Nlc3MuZW52Lk5PREVfRU5WID0gJ3Rlc3QnO1xuXG4vLyBDb25maWd1cmUgZW52aXJvbm1lbnQgdmFyaWFibGVzIGZvciB0ZXN0c1xucHJvY2Vzcy5lbnYuQlJBTkNIX0FQSV9VUkwgPSBwcm9jZXNzLmVudi5CUkFOQ0hfQVBJX1VSTCB8fCAnaHR0cDovL2xvY2FsaG9zdDo1MDAwL2FwaS92Mic7XG5wcm9jZXNzLmVudi5CUkFOQ0hfQVBJX0tFWSA9IHByb2Nlc3MuZW52LkJSQU5DSF9BUElfS0VZIHx8ICd0ZXN0LWFwaS1rZXktMTIzJztcbnByb2Nlc3MuZW52LlNZTkNfSU5URVJWQUwgPSBwcm9jZXNzLmVudi5TWU5DX0lOVEVSVkFMIHx8ICc2MDAwMCc7XG5wcm9jZXNzLmVudi5FTkFCTEVfQ09OVElOVU9VU19TWU5DID0gcHJvY2Vzcy5lbnYuRU5BQkxFX0NPTlRJTlVPVVNfU1lOQyB8fCAnZmFsc2UnO1xuXG4vLyBJbmNyZWFzZSBzdGFjayB0cmFjZSBsaW1pdCBmb3IgZGVidWdnaW5nXG5FcnJvci5zdGFja1RyYWNlTGltaXQgPSA1MDtcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBHTE9CQUwgVEVTVCBUSU1FT1VUXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuamVzdC5zZXRUaW1lb3V0KDYwMDAwKTtcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBHTE9CQUwgRkVUQ0ggTU9DS1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmdsb2JhbC5mZXRjaCA9IGplc3QuZm4oKTtcblxuLy8gRGVmYXVsdCBmZXRjaCBtb2NrIGltcGxlbWVudGF0aW9uXG5nbG9iYWwuZmV0Y2gubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+XG4gIFByb21pc2UucmVzb2x2ZSh7XG4gICAgb2s6IHRydWUsXG4gICAgc3RhdHVzOiAyMDAsXG4gICAganNvbjogYXN5bmMgKCkgPT4gKHt9KVxuICB9KVxuKTtcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBHTE9CQUwgRVJST1IgSEFORExJTkdcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4vLyBTdXBwcmVzcyBjb25zb2xlIGVycm9ycyBpbiB0ZXN0cyAoY29tbWVudCBvdXQgdG8gc2VlIGVycm9ycylcbmNvbnN0IG9yaWdpbmFsQ29uc29sZUVycm9yID0gY29uc29sZS5lcnJvcjtcbmNvbnN0IG9yaWdpbmFsQ29uc29sZVdhcm4gPSBjb25zb2xlLndhcm47XG5cbi8vIE9ubHkgc3VwcHJlc3Mgc3BlY2lmaWMgcGF0dGVybnNcbmNvbnNvbGUuZXJyb3IgPSAoLi4uYXJncykgPT4ge1xuICBjb25zdCBtZXNzYWdlID0gYXJnc1swXT8udG9TdHJpbmc/LigpIHx8ICcnO1xuXG4gIC8vIEFsbG93IHRlc3QtcmVsYXRlZCBlcnJvcnNcbiAgaWYgKG1lc3NhZ2UuaW5jbHVkZXMoJ0Vycm9yJykgfHwgbWVzc2FnZS5pbmNsdWRlcygnVGVzdCcpKSB7XG4gICAgb3JpZ2luYWxDb25zb2xlRXJyb3IoLi4uYXJncyk7XG4gIH1cbiAgLy8gU3VwcHJlc3Mgc3BlY2lmaWMga25vd24gd2FybmluZ3NcbiAgZWxzZSBpZiAobWVzc2FnZS5pbmNsdWRlcygnRXhwZXJpbWVudGFsV2FybmluZycpKSB7XG4gICAgLy8gU3VwcHJlc3MgZXhwZXJpbWVudGFsIHdhcm5pbmdzXG4gIH1cbiAgLy8gTG9nIGV2ZXJ5dGhpbmcgZWxzZVxuICBlbHNlIHtcbiAgICBvcmlnaW5hbENvbnNvbGVFcnJvciguLi5hcmdzKTtcbiAgfVxufTtcblxuY29uc29sZS53YXJuID0gKC4uLmFyZ3MpID0+IHtcbiAgY29uc3QgbWVzc2FnZSA9IGFyZ3NbMF0/LnRvU3RyaW5nPy4oKSB8fCAnJztcblxuICAvLyBMb2cgYWxsIHdhcm5pbmdzXG4gIG9yaWdpbmFsQ29uc29sZVdhcm4oLi4uYXJncyk7XG59O1xuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIEdMT0JBTCBURVNUIFVUSUxJVElFU1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbi8qKlxuICogQ3JlYXRlIGEgbW9jayBzdWNjZXNzZnVsIHJlc3BvbnNlXG4gKi9cbmdsb2JhbC5tb2NrU3VjY2Vzc1Jlc3BvbnNlID0gKGRhdGEgPSB7fSwgc3RhdHVzID0gMjAwKSA9PiAoe1xuICBvazogc3RhdHVzIDwgNDAwLFxuICBzdGF0dXMsXG4gIGpzb246IGFzeW5jICgpID0+ICh7IHN1Y2Nlc3M6IHRydWUsIC4uLmRhdGEgfSlcbn0pO1xuXG4vKipcbiAqIENyZWF0ZSBhIG1vY2sgZXJyb3IgcmVzcG9uc2VcbiAqL1xuZ2xvYmFsLm1vY2tFcnJvclJlc3BvbnNlID0gKGVycm9yID0gJ0Vycm9yJywgc3RhdHVzID0gNTAwKSA9PiAoe1xuICBvazogZmFsc2UsXG4gIHN0YXR1cyxcbiAganNvbjogYXN5bmMgKCkgPT4gKHsgc3VjY2VzczogZmFsc2UsIGVycm9yIH0pXG59KTtcblxuLyoqXG4gKiBDcmVhdGUgYSBtb2NrIHRpbWVvdXRcbiAqL1xuZ2xvYmFsLm1vY2tUaW1lb3V0ID0gKCkgPT5cbiAgUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCdUaW1lb3V0JykpO1xuXG4vKipcbiAqIFJlc2V0IGFsbCBtb2Nrc1xuICovXG5nbG9iYWwucmVzZXRNb2NrcyA9ICgpID0+IHtcbiAgamVzdC5jbGVhckFsbE1vY2tzKCk7XG59O1xuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIE1BS0UgVEVTVCBIRUxQRVJTIEdMT0JBTExZIEFWQUlMQUJMRVxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmdsb2JhbC50ZXN0SGVscGVycyA9IHtcbiAgY2xlYW51cFJlc291cmNlcyxcbiAgTW9ja0ZhY3RvcnksXG4gIEhUVFBIZWxwZXIsXG4gIERhdGFiYXNlSGVscGVyXG59O1xuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIEdMT0JBTCBURVNUIE1BVENIRVJTXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwZWN0LmV4dGVuZCh7XG4gIC8qKlxuICAgKiBDdXN0b20gbWF0Y2hlciBmb3IgY2hlY2tpbmcgaWYgcmVzcG9uc2UgaXMgaW4gdmFsaWQgRVJQIGZvcm1hdFxuICAgKi9cbiAgdG9CZVZhbGlkRVJQUmVzcG9uc2UocmVjZWl2ZWQpIHtcbiAgICBjb25zdCBwYXNzID1cbiAgICAgIHJlY2VpdmVkICYmXG4gICAgICB0eXBlb2YgcmVjZWl2ZWQgPT09ICdvYmplY3QnICYmXG4gICAgICAnc3VjY2VzcycgaW4gcmVjZWl2ZWQgJiZcbiAgICAgICd0aW1lc3RhbXAnIGluIHJlY2VpdmVkO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHBhc3MsXG4gICAgICBtZXNzYWdlOiAoKSA9PlxuICAgICAgICBwYXNzXG4gICAgICAgICAgPyBgRXhwZWN0ZWQgcmVzcG9uc2Ugbm90IHRvIGJlIHZhbGlkIEVSUCBmb3JtYXRgXG4gICAgICAgICAgOiBgRXhwZWN0ZWQgcmVzcG9uc2UgdG8gYmUgdmFsaWQgRVJQIGZvcm1hdCB3aXRoICdzdWNjZXNzJyBhbmQgJ3RpbWVzdGFtcCcgcHJvcGVydGllc2BcbiAgICB9O1xuICB9LFxuXG4gIC8qKlxuICAgKiBDdXN0b20gbWF0Y2hlciBmb3IgY2hlY2tpbmcgaWYgdmFsdWUgaXMgd2l0aGluIHJhbmdlXG4gICAqL1xuICB0b0JlV2l0aGluUmFuZ2UocmVjZWl2ZWQsIGZsb29yLCBjZWlsaW5nKSB7XG4gICAgY29uc3QgcGFzcyA9IHJlY2VpdmVkID49IGZsb29yICYmIHJlY2VpdmVkIDw9IGNlaWxpbmc7XG5cbiAgICByZXR1cm4ge1xuICAgICAgcGFzcyxcbiAgICAgIG1lc3NhZ2U6ICgpID0+XG4gICAgICAgIHBhc3NcbiAgICAgICAgICA/IGBFeHBlY3RlZCAke3JlY2VpdmVkfSBub3QgdG8gYmUgd2l0aGluIHJhbmdlICR7Zmxvb3J9IC0gJHtjZWlsaW5nfWBcbiAgICAgICAgICA6IGBFeHBlY3RlZCAke3JlY2VpdmVkfSB0byBiZSB3aXRoaW4gcmFuZ2UgJHtmbG9vcn0gLSAke2NlaWxpbmd9YFxuICAgIH07XG4gIH0sXG5cbiAgLyoqXG4gICAqIEN1c3RvbSBtYXRjaGVyIGZvciBicmFuY2ggc3RhdHVzIHZhbGlkYXRpb25cbiAgICovXG4gIHRvQmVWYWxpZEJyYW5jaFN0YXR1cyhyZWNlaXZlZCkge1xuICAgIGNvbnN0IHZhbGlkU3RhdHVzZXMgPSBbJ0FDVElWRScsICdJTkFDVElWRScsICdDTE9TRUQnLCAnU1VTUEVOREVEJywgJ1BMQU5ORUQnXTtcbiAgICBjb25zdCBwYXNzID0gdmFsaWRTdGF0dXNlcy5pbmNsdWRlcyhyZWNlaXZlZCk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgcGFzcyxcbiAgICAgIG1lc3NhZ2U6ICgpID0+XG4gICAgICAgIHBhc3NcbiAgICAgICAgICA/IGBFeHBlY3RlZCBzdGF0dXMgbm90IHRvIGJlIHZhbGlkYFxuICAgICAgICAgIDogYEV4cGVjdGVkIHN0YXR1cyB0byBiZSBvbmUgb2Y6ICR7dmFsaWRTdGF0dXNlcy5qb2luKCcsICcpfSwgYnV0IGdvdDogJHtyZWNlaXZlZH1gXG4gICAgfTtcbiAgfVxufSk7XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gQVNTRVJUSU9OIEhFTFBFUlNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4vKipcbiAqIEFzc2VydCByZXNwb25zZSBzdHJ1Y3R1cmVcbiAqL1xuZ2xvYmFsLmFzc2VydFJlc3BvbnNlU3RydWN0dXJlID0gKHJlc3BvbnNlLCBleHBlY3RlZEZpZWxkcyA9IFtdKSA9PiB7XG4gIGV4cGVjdChyZXNwb25zZSkudG9CZURlZmluZWQoKTtcbiAgZXhwZWN0KHJlc3BvbnNlKS50b0hhdmVQcm9wZXJ0eSgndGltZXN0YW1wJyk7XG5cbiAgZXhwZWN0ZWRGaWVsZHMuZm9yRWFjaChmaWVsZCA9PiB7XG4gICAgZXhwZWN0KHJlc3BvbnNlKS50b0hhdmVQcm9wZXJ0eShmaWVsZCk7XG4gIH0pO1xufTtcblxuLyoqXG4gKiBBc3NlcnQgZXJyb3Igc3RydWN0dXJlXG4gKi9cbmdsb2JhbC5hc3NlcnRFcnJvclN0cnVjdHVyZSA9IChyZXNwb25zZSkgPT4ge1xuICBleHBlY3QocmVzcG9uc2UpLnRvQmVEZWZpbmVkKCk7XG4gIGV4cGVjdChyZXNwb25zZSkudG9IYXZlUHJvcGVydHkoJ2Vycm9yJyk7XG4gIGV4cGVjdChyZXNwb25zZSkudG9IYXZlUHJvcGVydHkoJ3RpbWVzdGFtcCcpO1xufTtcblxuLyoqXG4gKiBBc3NlcnQgcGVyZm9ybWFuY2Ugd2l0aGluIFNMQVxuICovXG5nbG9iYWwuYXNzZXJ0UGVyZm9ybWFuY2VTTEEgPSAoZHVyYXRpb24sIHNsYU1zLCBvcGVyYXRpb24gPSAnT3BlcmF0aW9uJykgPT4ge1xuICBleHBlY3QoZHVyYXRpb24pLnRvQmVMZXNzVGhhbihzbGFNcyk7XG4gIGNvbnNvbGUubG9nKGDinJMgJHtvcGVyYXRpb259IGNvbXBsZXRlZCBpbiAke2R1cmF0aW9ufW1zIChTTEE6ICR7c2xhTXN9bXMpYCk7XG59O1xuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIE1FTU9SWSBBTkQgQ0xFQU5VUFxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbi8vIFRyYWNrIHJlZ2lzdGVyZWQgY2xlYW51cCBmdW5jdGlvbnNcbmNvbnN0IGNsZWFudXBGdW5jdGlvbnMgPSBbXTtcblxuLyoqXG4gKiBSZWdpc3RlciBjbGVhbnVwIGZ1bmN0aW9uXG4gKi9cbmdsb2JhbC5yZWdpc3RlckNsZWFudXAgPSAoZm4pID0+IHtcbiAgY2xlYW51cEZ1bmN0aW9ucy5wdXNoKGZuKTtcbn07XG5cbi8vIFJ1biBjbGVhbnVwIGFmdGVyIGVhY2ggdGVzdFxuYWZ0ZXJFYWNoKGFzeW5jICgpID0+IHtcbiAgdHJ5IHtcbiAgICAvLyBDbGVhciBhbGwgYWN0aXZlIHRpbWVycyBmcm9tIHRoaXMgdGVzdFxuICAgIGF3YWl0IGNsZWFudXBSZXNvdXJjZXMoKTtcblxuICAgIC8vIFJ1biBjdXN0b20gY2xlYW51cCBmdW5jdGlvbnNcbiAgICBjbGVhbnVwRnVuY3Rpb25zLmZvckVhY2goZm4gPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgZm4oKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUud2FybignQ2xlYW51cCBlcnJvcjonLCBlcnJvcik7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBjbGVhbnVwRnVuY3Rpb25zLmxlbmd0aCA9IDA7XG5cbiAgICAvLyBDbGVhciBhbGwgbW9ja3NcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcblxuICAgIC8vIFJlc2V0IG1vY2tzXG4gICAgamVzdC5yZXNldEFsbE1vY2tzKCk7XG5cbiAgICAvLyBDbGVhciBwZW5kaW5nIHRpbWVycyBqdXN0IGluIGNhc2VcbiAgICBqZXN0LmNsZWFyQWxsVGltZXJzKCk7XG5cbiAgICAvLyBHaXZlIGV2ZW50IGxvb3AgYSBjaGFuY2UgdG8gcHJvY2Vzc1xuICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0SW1tZWRpYXRlKHJlc29sdmUpKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLndhcm4oJ0Vycm9yIGR1cmluZyBhZnRlckVhY2ggY2xlYW51cDonLCBlcnJvcik7XG4gIH1cbn0pO1xuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFBFUkZPUk1BTkNFIE1PTklUT1JJTkdcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5sZXQgdGVzdFN0YXJ0VGltZTtcblxuYmVmb3JlRWFjaCgoKSA9PiB7XG4gIHRlc3RTdGFydFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTtcbn0pO1xuXG5hZnRlckVhY2goKCkgPT4ge1xuICBjb25zdCB0ZXN0RHVyYXRpb24gPSBwZXJmb3JtYW5jZS5ub3coKSAtIHRlc3RTdGFydFRpbWU7XG4gIGNvbnN0IHRlc3ROYW1lID0gZXhwZWN0LmdldFN0YXRlKCkuY3VycmVudFRlc3ROYW1lO1xuXG4gIGlmICh0ZXN0RHVyYXRpb24gPiAxMDAwKSB7XG4gICAgY29uc29sZS53YXJuKGDimqDvuI8gU2xvdyB0ZXN0IFwiJHt0ZXN0TmFtZX1cIjogJHt0ZXN0RHVyYXRpb24udG9GaXhlZCgyKX1tc2ApO1xuICB9XG59KTtcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBMT0dHSU5HXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLy8gTG9nIHRlc3Qgc3VpdGUgaW5mb3JtYXRpb25cbmNvbnNvbGUubG9nKCcnKTtcbmNvbnNvbGUubG9nKCfilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZAnKTtcbmNvbnNvbGUubG9nKCfwn6eqIEplc3QgVGVzdCBTdWl0ZSBJbml0aWFsaXplZCcpO1xuY29uc29sZS5sb2coJ+KVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkCcpO1xuY29uc29sZS5sb2coYEVudmlyb25tZW50OiAke3Byb2Nlc3MuZW52Lk5PREVfRU5WfWApO1xuY29uc29sZS5sb2coYEJyYW5jaCBBUEk6ICR7cHJvY2Vzcy5lbnYuQlJBTkNIX0FQSV9VUkx9YCk7XG5jb25zb2xlLmxvZygnVGltZW91dDogMzAwMDBtcycpO1xuY29uc29sZS5sb2coJ+KVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkCcpO1xuY29uc29sZS5sb2coJycpO1xuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIEVSUk9SIFRSQUNLSU5HXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLy8gVHJhY2sgdW5jYXVnaHQgZXhjZXB0aW9uc1xucHJvY2Vzcy5vbigndW5jYXVnaHRFeGNlcHRpb24nLCAoZXJyb3IpID0+IHtcbiAgY29uc29sZS5lcnJvcignVW5jYXVnaHQgRXhjZXB0aW9uOicsIGVycm9yKTtcbn0pO1xuXG4vLyBUcmFjayB1bmhhbmRsZWQgcHJvbWlzZSByZWplY3Rpb25zXG5wcm9jZXNzLm9uKCd1bmhhbmRsZWRSZWplY3Rpb24nLCAocmVhc29uLCBwcm9taXNlKSA9PiB7XG4gIGNvbnNvbGUuZXJyb3IoJ1VuaGFuZGxlZCBSZWplY3Rpb24gYXQ6JywgcHJvbWlzZSwgJ3JlYXNvbjonLCByZWFzb24pO1xufSk7XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gQ0xFQU5VUCBPTiBFWElUXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLy8gVHJhY2sgYWxsIHRpbWVycyBjcmVhdGVkIGR1cmluZyB0ZXN0c1xuY29uc3QgYWN0aXZlVGltZXJzID0ge1xuICB0aW1lb3V0czogW10sXG4gIGludGVydmFsczogW10sXG4gIGhhbmRsZXM6IFtdXG59O1xuXG4vLyBPdmVycmlkZSBzZXRUaW1lb3V0IHRvIHRyYWNrIHRpbWVyc1xuY29uc3Qgb3JpZ2luYWxTZXRUaW1lb3V0ID0gZ2xvYmFsLnNldFRpbWVvdXQ7XG5nbG9iYWwuc2V0VGltZW91dCA9IGZ1bmN0aW9uKC4uLmFyZ3MpIHtcbiAgY29uc3QgdGltZW91dCA9IG9yaWdpbmFsU2V0VGltZW91dC5hcHBseSh0aGlzLCBhcmdzKTtcbiAgYWN0aXZlVGltZXJzLnRpbWVvdXRzLnB1c2godGltZW91dCk7XG4gIHJldHVybiB0aW1lb3V0O1xufTtcblxuLy8gT3ZlcnJpZGUgc2V0SW50ZXJ2YWwgdG8gdHJhY2sgaW50ZXJ2YWxzXG5jb25zdCBvcmlnaW5hbFNldEludGVydmFsID0gZ2xvYmFsLnNldEludGVydmFsO1xuZ2xvYmFsLnNldEludGVydmFsID0gZnVuY3Rpb24oLi4uYXJncykge1xuICBjb25zdCBpbnRlcnZhbCA9IG9yaWdpbmFsU2V0SW50ZXJ2YWwuYXBwbHkodGhpcywgYXJncyk7XG4gIGFjdGl2ZVRpbWVycy5pbnRlcnZhbHMucHVzaChpbnRlcnZhbCk7XG4gIHJldHVybiBpbnRlcnZhbDtcbn07XG5cbi8vIFJlc3RvcmUgb3JpZ2luYWwgZnVuY3Rpb25zIGJ1dCBrZWVwIHRyYWNraW5nXG5PYmplY3QuYXNzaWduKGdsb2JhbC5zZXRUaW1lb3V0LCBvcmlnaW5hbFNldFRpbWVvdXQpO1xuT2JqZWN0LmFzc2lnbihnbG9iYWwuc2V0SW50ZXJ2YWwsIG9yaWdpbmFsU2V0SW50ZXJ2YWwpO1xuXG4vLyBDbGVhbiB1cCBmdW5jdGlvbiBmb3IgdGltZXJzXG5mdW5jdGlvbiBjbGVhbnVwQWxsVGltZXJzKCkge1xuICAvLyBDbGVhciB0aW1lb3V0c1xuICBhY3RpdmVUaW1lcnMudGltZW91dHMuZm9yRWFjaCh0aW1lb3V0ID0+IHtcbiAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gIH0pO1xuICBhY3RpdmVUaW1lcnMudGltZW91dHMgPSBbXTtcblxuICAvLyBDbGVhciBpbnRlcnZhbHNcbiAgYWN0aXZlVGltZXJzLmludGVydmFscy5mb3JFYWNoKGludGVydmFsID0+IHtcbiAgICBjbGVhckludGVydmFsKGludGVydmFsKTtcbiAgfSk7XG4gIGFjdGl2ZVRpbWVycy5pbnRlcnZhbHMgPSBbXTtcblxuICAvLyBDbGVhciBqZXN0IHRpbWVyc1xuICB0cnkge1xuICAgIGplc3QuY2xlYXJBbGxUaW1lcnMoKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIC8vIElnbm9yZSBpZiB0aW1lcnMgYWxyZWFkeSBjbGVhcmVkXG4gIH1cbn1cblxuLy8gRW5zdXJlIHByb3BlciBjbGVhbnVwIG9uIHByb2Nlc3MgZXhpdFxuYWZ0ZXJBbGwoYXN5bmMgKCkgPT4ge1xuICB0cnkge1xuICAgIC8vIENsZWFyIGFsbCB0aW1lcnMgYW5kIHJlc291cmNlc1xuICAgIGF3YWl0IGNsZWFudXBSZXNvdXJjZXMoKTtcblxuICAgIC8vIFJlc2V0IG1vY2tzXG4gICAgamVzdC5yZXNldEFsbE1vY2tzKCk7XG5cbiAgICAvLyBDbGVhciBhbGwgbW9ja3NcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcblxuICAgIC8vIFJlc3RvcmUgYWxsIG1vY2tzXG4gICAgamVzdC5yZXN0b3JlQWxsTW9ja3MoKTtcblxuICAgIC8vIENsZWFyIHBlbmRpbmcgdGltZXJzXG4gICAgamVzdC5jbGVhckFsbFRpbWVycygpO1xuXG4gICAgY29uc29sZS5sb2coJycpO1xuICAgIGNvbnNvbGUubG9nKCfilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZAnKTtcbiAgICBjb25zb2xlLmxvZygn4pyTIFRlc3Qgc3VpdGUgY2xlYW51cCBjb21wbGV0ZWQnKTtcbiAgICBjb25zb2xlLmxvZygn4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQJyk7XG4gICAgY29uc29sZS5sb2coJycpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGR1cmluZyBhZnRlckFsbCBjbGVhbnVwOicsIGVycm9yKTtcbiAgfVxufSk7XG5cbi8vIFJlZ2lzdGVyIGNsZWFudXAgb24gZXhpdFxucHJvY2Vzcy5vbignZXhpdCcsIGFzeW5jICgpID0+IHtcbiAgdHJ5IHtcbiAgICBhd2FpdCBjbGVhbnVwUmVzb3VyY2VzKCk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgLy8gSWdub3JlIGVycm9ycyBvbiBleGl0XG4gIH1cbn0pO1xuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxNQUFNO0VBQ0pBLGdCQUFnQjtFQUNoQkMsV0FBVztFQUNYQyxVQUFVO0VBQ1ZDO0FBQ0YsQ0FBQyxHQUFHQyxPQUFPLENBQUMsZ0JBQWdCLENBQUM7O0FBRTdCO0FBQ0E7QUFDQTs7QUFF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