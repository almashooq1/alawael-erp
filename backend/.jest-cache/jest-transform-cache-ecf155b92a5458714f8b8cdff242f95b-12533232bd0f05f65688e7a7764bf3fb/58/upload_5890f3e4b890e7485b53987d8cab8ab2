7f5e8838b94a62fee6113ab4da69bde3
/**
 * Upload Routes
 * File Upload and Management API Endpoints
 *
 * Routes:
 * - POST /api/upload/file      - Upload single file
 * - POST /api/upload/bulk      - Bulk upload files
 * - GET  /api/upload/:id       - Get file metadata
 * - DELETE /api/upload/:id     - Delete file
 * - GET  /api/upload/documents/:docId - Get document by ID
 */

const express = require('express');
const router = express.Router();
const multer = require('multer');
const {
  authenticate,
  authorize
} = require('../middleware/auth');
const path = require('path');
const fs = require('fs');

// Configure multer for file uploads
const storage = multer.diskStorage({
  destination: (req, file, cb) => {
    const uploadDir = path.join(__dirname, '../uploads');
    if (!fs.existsSync(uploadDir)) {
      fs.mkdirSync(uploadDir, {
        recursive: true
      });
    }
    cb(null, uploadDir);
  },
  filename: (req, file, cb) => {
    const uniqueName = `${Date.now()}-${Math.random().toString(36).substring(7)}-${file.originalname}`;
    cb(null, uniqueName);
  }
});
const fileFilter = (req, file, cb) => {
  // Allowed file types
  const allowedMimes = ['application/pdf', 'image/jpeg', 'image/png', 'text/csv', 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet', 'application/msword', 'image/gif', 'image/webp'];
  if (allowedMimes.includes(file.mimetype)) {
    cb(null, true);
  } else {
    cb(new Error(`Invalid file type: ${file.mimetype}`), false);
  }
};
const upload = multer({
  storage,
  fileFilter,
  limits: {
    fileSize: 50 * 1024 * 1024
  } // 50MB limit
});

/**
 * @route   POST /api/upload/file
 * @access  Private
 * @body    {File} file - File to upload
 * @param   {String} category - File category (document/image/report)
 * @returns {Object} File metadata
 */
router.post('/file', authenticate, upload.single('file'), (req, res) => {
  try {
    if (!req.file) {
      return res.status(400).json({
        success: false,
        message: 'No file provided'
      });
    }
    const fileData = {
      id: 'file_' + Date.now(),
      filename: req.file.filename,
      originalname: req.file.originalname,
      mimetype: req.file.mimetype,
      size: req.file.size,
      path: req.file.path,
      category: req.body.category || 'general',
      uploadedBy: req.user?.id || 'system',
      uploadedAt: new Date().toISOString(),
      isPublic: false
    };
    res.status(201).json({
      success: true,
      message: 'File uploaded successfully',
      data: fileData
    });
  } catch (error) {
    res.status(500).json({
      success: false,
      message: 'Error uploading file',
      error: error.message
    });
  }
});

/**
 * @route   POST /api/upload/bulk
 * @access  Private
 * @body    {Array} files - Multiple files
 * @returns {Object} Bulk upload results
 */
router.post('/bulk', authenticate, upload.array('files', 10), (req, res) => {
  try {
    if (!req.files || req.files.length === 0) {
      return res.status(400).json({
        success: false,
        message: 'No files provided'
      });
    }
    const uploadedFiles = req.files.map(file => ({
      id: 'file_' + Date.now(),
      filename: file.filename,
      originalname: file.originalname,
      mimetype: file.mimetype,
      size: file.size,
      path: file.path,
      category: req.body.category || 'general',
      uploadedBy: req.user?.id || 'system',
      uploadedAt: new Date().toISOString()
    }));
    res.status(201).json({
      success: true,
      message: `${uploadedFiles.length} files uploaded successfully`,
      data: {
        count: uploadedFiles.length,
        files: uploadedFiles,
        timestamp: new Date().toISOString()
      }
    });
  } catch (error) {
    res.status(500).json({
      success: false,
      message: 'Error uploading files',
      error: error.message
    });
  }
});

/**
 * @route   GET /api/upload/:id
 * @access  Private
 * @param   {String} id - File ID
 * @returns {Object} File metadata
 */
router.get('/:id', authenticate, (req, res) => {
  try {
    const {
      id
    } = req.params;
    if (!id) {
      return res.status(400).json({
        success: false,
        message: 'File ID is required'
      });
    }

    // TODO: Implement file metadata retrieval
    res.json({
      success: true,
      message: 'File metadata retrieved successfully',
      data: {
        id,
        filename: 'document.pdf',
        originalname: 'original-document.pdf',
        mimetype: 'application/pdf',
        size: 102400,
        category: 'document',
        uploadedBy: 'user123',
        uploadedAt: new Date().toISOString(),
        isPublic: false
      }
    });
  } catch (error) {
    res.status(500).json({
      success: false,
      message: 'Error retrieving file metadata',
      error: error.message
    });
  }
});

/**
 * @route   DELETE /api/upload/:id
 * @access  Private
 * @param   {String} id - File ID
 * @returns {Object} Deletion confirmation
 */
router.delete('/:id', authenticate, authorize(['admin', 'manager']), (req, res) => {
  try {
    const {
      id
    } = req.params;
    if (!id) {
      return res.status(400).json({
        success: false,
        message: 'File ID is required'
      });
    }

    // TODO: Implement file deletion with cleanup
    res.json({
      success: true,
      message: 'File deleted successfully',
      data: {
        id,
        deletedAt: new Date().toISOString()
      }
    });
  } catch (error) {
    res.status(500).json({
      success: false,
      message: 'Error deleting file',
      error: error.message
    });
  }
});

/**
 * @route   GET /api/upload/documents/:docId
 * @access  Private
 * @param   {String} docId - Document ID
 * @returns {Object} Document details with file metadata
 */
router.get('/documents/:docId', authenticate, (req, res) => {
  try {
    const {
      docId
    } = req.params;
    if (!docId) {
      return res.status(400).json({
        success: false,
        message: 'Document ID is required'
      });
    }

    // TODO: Implement document retrieval with related files
    res.json({
      success: true,
      message: 'Document retrieved successfully',
      data: {
        id: docId,
        title: 'Sample Document',
        description: 'A sample document with attachments',
        files: [{
          id: 'file_1',
          filename: 'document.pdf',
          size: 102400,
          uploadedAt: new Date().toISOString()
        }],
        createdAt: new Date().toISOString()
      }
    });
  } catch (error) {
    res.status(500).json({
      success: false,
      message: 'Error retrieving document',
      error: error.message
    });
  }
});
module.exports = router;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsInJvdXRlciIsIlJvdXRlciIsIm11bHRlciIsImF1dGhlbnRpY2F0ZSIsImF1dGhvcml6ZSIsInBhdGgiLCJmcyIsInN0b3JhZ2UiLCJkaXNrU3RvcmFnZSIsImRlc3RpbmF0aW9uIiwicmVxIiwiZmlsZSIsImNiIiwidXBsb2FkRGlyIiwiam9pbiIsIl9fZGlybmFtZSIsImV4aXN0c1N5bmMiLCJta2RpclN5bmMiLCJyZWN1cnNpdmUiLCJmaWxlbmFtZSIsInVuaXF1ZU5hbWUiLCJEYXRlIiwibm93IiwiTWF0aCIsInJhbmRvbSIsInRvU3RyaW5nIiwic3Vic3RyaW5nIiwib3JpZ2luYWxuYW1lIiwiZmlsZUZpbHRlciIsImFsbG93ZWRNaW1lcyIsImluY2x1ZGVzIiwibWltZXR5cGUiLCJFcnJvciIsInVwbG9hZCIsImxpbWl0cyIsImZpbGVTaXplIiwicG9zdCIsInNpbmdsZSIsInJlcyIsInN0YXR1cyIsImpzb24iLCJzdWNjZXNzIiwibWVzc2FnZSIsImZpbGVEYXRhIiwiaWQiLCJzaXplIiwiY2F0ZWdvcnkiLCJib2R5IiwidXBsb2FkZWRCeSIsInVzZXIiLCJ1cGxvYWRlZEF0IiwidG9JU09TdHJpbmciLCJpc1B1YmxpYyIsImRhdGEiLCJlcnJvciIsImFycmF5IiwiZmlsZXMiLCJsZW5ndGgiLCJ1cGxvYWRlZEZpbGVzIiwibWFwIiwiY291bnQiLCJ0aW1lc3RhbXAiLCJnZXQiLCJwYXJhbXMiLCJkZWxldGUiLCJkZWxldGVkQXQiLCJkb2NJZCIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJjcmVhdGVkQXQiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsidXBsb2FkLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBVcGxvYWQgUm91dGVzXHJcbiAqIEZpbGUgVXBsb2FkIGFuZCBNYW5hZ2VtZW50IEFQSSBFbmRwb2ludHNcclxuICpcclxuICogUm91dGVzOlxyXG4gKiAtIFBPU1QgL2FwaS91cGxvYWQvZmlsZSAgICAgIC0gVXBsb2FkIHNpbmdsZSBmaWxlXHJcbiAqIC0gUE9TVCAvYXBpL3VwbG9hZC9idWxrICAgICAgLSBCdWxrIHVwbG9hZCBmaWxlc1xyXG4gKiAtIEdFVCAgL2FwaS91cGxvYWQvOmlkICAgICAgIC0gR2V0IGZpbGUgbWV0YWRhdGFcclxuICogLSBERUxFVEUgL2FwaS91cGxvYWQvOmlkICAgICAtIERlbGV0ZSBmaWxlXHJcbiAqIC0gR0VUICAvYXBpL3VwbG9hZC9kb2N1bWVudHMvOmRvY0lkIC0gR2V0IGRvY3VtZW50IGJ5IElEXHJcbiAqL1xyXG5cclxuY29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKTtcclxuY29uc3Qgcm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcclxuY29uc3QgbXVsdGVyID0gcmVxdWlyZSgnbXVsdGVyJyk7XHJcbmNvbnN0IHsgYXV0aGVudGljYXRlLCBhdXRob3JpemUgfSA9IHJlcXVpcmUoJy4uL21pZGRsZXdhcmUvYXV0aCcpO1xyXG5jb25zdCBwYXRoID0gcmVxdWlyZSgncGF0aCcpO1xyXG5jb25zdCBmcyA9IHJlcXVpcmUoJ2ZzJyk7XHJcblxyXG4vLyBDb25maWd1cmUgbXVsdGVyIGZvciBmaWxlIHVwbG9hZHNcclxuY29uc3Qgc3RvcmFnZSA9IG11bHRlci5kaXNrU3RvcmFnZSh7XHJcbiAgZGVzdGluYXRpb246IChyZXEsIGZpbGUsIGNiKSA9PiB7XHJcbiAgICBjb25zdCB1cGxvYWREaXIgPSBwYXRoLmpvaW4oX19kaXJuYW1lLCAnLi4vdXBsb2FkcycpO1xyXG4gICAgaWYgKCFmcy5leGlzdHNTeW5jKHVwbG9hZERpcikpIHtcclxuICAgICAgZnMubWtkaXJTeW5jKHVwbG9hZERpciwgeyByZWN1cnNpdmU6IHRydWUgfSk7XHJcbiAgICB9XHJcbiAgICBjYihudWxsLCB1cGxvYWREaXIpO1xyXG4gIH0sXHJcbiAgZmlsZW5hbWU6IChyZXEsIGZpbGUsIGNiKSA9PiB7XHJcbiAgICBjb25zdCB1bmlxdWVOYW1lID0gYCR7RGF0ZS5ub3coKX0tJHtNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoNyl9LSR7ZmlsZS5vcmlnaW5hbG5hbWV9YDtcclxuICAgIGNiKG51bGwsIHVuaXF1ZU5hbWUpO1xyXG4gIH1cclxufSk7XHJcblxyXG5jb25zdCBmaWxlRmlsdGVyID0gKHJlcSwgZmlsZSwgY2IpID0+IHtcclxuICAvLyBBbGxvd2VkIGZpbGUgdHlwZXNcclxuICBjb25zdCBhbGxvd2VkTWltZXMgPSBbXHJcbiAgICAnYXBwbGljYXRpb24vcGRmJyxcclxuICAgICdpbWFnZS9qcGVnJyxcclxuICAgICdpbWFnZS9wbmcnLFxyXG4gICAgJ3RleHQvY3N2JyxcclxuICAgICdhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQuc3ByZWFkc2hlZXRtbC5zaGVldCcsXHJcbiAgICAnYXBwbGljYXRpb24vbXN3b3JkJyxcclxuICAgICdpbWFnZS9naWYnLFxyXG4gICAgJ2ltYWdlL3dlYnAnXHJcbiAgXTtcclxuXHJcbiAgaWYgKGFsbG93ZWRNaW1lcy5pbmNsdWRlcyhmaWxlLm1pbWV0eXBlKSkge1xyXG4gICAgY2IobnVsbCwgdHJ1ZSk7XHJcbiAgfSBlbHNlIHtcclxuICAgIGNiKG5ldyBFcnJvcihgSW52YWxpZCBmaWxlIHR5cGU6ICR7ZmlsZS5taW1ldHlwZX1gKSwgZmFsc2UpO1xyXG4gIH1cclxufTtcclxuXHJcbmNvbnN0IHVwbG9hZCA9IG11bHRlcih7XHJcbiAgc3RvcmFnZSxcclxuICBmaWxlRmlsdGVyLFxyXG4gIGxpbWl0czogeyBmaWxlU2l6ZTogNTAgKiAxMDI0ICogMTAyNCB9IC8vIDUwTUIgbGltaXRcclxufSk7XHJcblxyXG4vKipcclxuICogQHJvdXRlICAgUE9TVCAvYXBpL3VwbG9hZC9maWxlXHJcbiAqIEBhY2Nlc3MgIFByaXZhdGVcclxuICogQGJvZHkgICAge0ZpbGV9IGZpbGUgLSBGaWxlIHRvIHVwbG9hZFxyXG4gKiBAcGFyYW0gICB7U3RyaW5nfSBjYXRlZ29yeSAtIEZpbGUgY2F0ZWdvcnkgKGRvY3VtZW50L2ltYWdlL3JlcG9ydClcclxuICogQHJldHVybnMge09iamVjdH0gRmlsZSBtZXRhZGF0YVxyXG4gKi9cclxucm91dGVyLnBvc3QoJy9maWxlJywgYXV0aGVudGljYXRlLCB1cGxvYWQuc2luZ2xlKCdmaWxlJyksIChyZXEsIHJlcykgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBpZiAoIXJlcS5maWxlKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XHJcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgbWVzc2FnZTogJ05vIGZpbGUgcHJvdmlkZWQnXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGZpbGVEYXRhID0ge1xyXG4gICAgICBpZDogJ2ZpbGVfJyArIERhdGUubm93KCksXHJcbiAgICAgIGZpbGVuYW1lOiByZXEuZmlsZS5maWxlbmFtZSxcclxuICAgICAgb3JpZ2luYWxuYW1lOiByZXEuZmlsZS5vcmlnaW5hbG5hbWUsXHJcbiAgICAgIG1pbWV0eXBlOiByZXEuZmlsZS5taW1ldHlwZSxcclxuICAgICAgc2l6ZTogcmVxLmZpbGUuc2l6ZSxcclxuICAgICAgcGF0aDogcmVxLmZpbGUucGF0aCxcclxuICAgICAgY2F0ZWdvcnk6IHJlcS5ib2R5LmNhdGVnb3J5IHx8ICdnZW5lcmFsJyxcclxuICAgICAgdXBsb2FkZWRCeTogcmVxLnVzZXI/LmlkIHx8ICdzeXN0ZW0nLFxyXG4gICAgICB1cGxvYWRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgIGlzUHVibGljOiBmYWxzZVxyXG4gICAgfTtcclxuXHJcbiAgICByZXMuc3RhdHVzKDIwMSkuanNvbih7XHJcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgIG1lc3NhZ2U6ICdGaWxlIHVwbG9hZGVkIHN1Y2Nlc3NmdWxseScsXHJcbiAgICAgIGRhdGE6IGZpbGVEYXRhXHJcbiAgICB9KTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xyXG4gICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgbWVzc2FnZTogJ0Vycm9yIHVwbG9hZGluZyBmaWxlJyxcclxuICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2VcclxuICAgIH0pO1xyXG4gIH1cclxufSk7XHJcblxyXG4vKipcclxuICogQHJvdXRlICAgUE9TVCAvYXBpL3VwbG9hZC9idWxrXHJcbiAqIEBhY2Nlc3MgIFByaXZhdGVcclxuICogQGJvZHkgICAge0FycmF5fSBmaWxlcyAtIE11bHRpcGxlIGZpbGVzXHJcbiAqIEByZXR1cm5zIHtPYmplY3R9IEJ1bGsgdXBsb2FkIHJlc3VsdHNcclxuICovXHJcbnJvdXRlci5wb3N0KCcvYnVsaycsIGF1dGhlbnRpY2F0ZSwgdXBsb2FkLmFycmF5KCdmaWxlcycsIDEwKSwgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGlmICghcmVxLmZpbGVzIHx8IHJlcS5maWxlcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBtZXNzYWdlOiAnTm8gZmlsZXMgcHJvdmlkZWQnXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHVwbG9hZGVkRmlsZXMgPSByZXEuZmlsZXMubWFwKGZpbGUgPT4gKHtcclxuICAgICAgaWQ6ICdmaWxlXycgKyBEYXRlLm5vdygpLFxyXG4gICAgICBmaWxlbmFtZTogZmlsZS5maWxlbmFtZSxcclxuICAgICAgb3JpZ2luYWxuYW1lOiBmaWxlLm9yaWdpbmFsbmFtZSxcclxuICAgICAgbWltZXR5cGU6IGZpbGUubWltZXR5cGUsXHJcbiAgICAgIHNpemU6IGZpbGUuc2l6ZSxcclxuICAgICAgcGF0aDogZmlsZS5wYXRoLFxyXG4gICAgICBjYXRlZ29yeTogcmVxLmJvZHkuY2F0ZWdvcnkgfHwgJ2dlbmVyYWwnLFxyXG4gICAgICB1cGxvYWRlZEJ5OiByZXEudXNlcj8uaWQgfHwgJ3N5c3RlbScsXHJcbiAgICAgIHVwbG9hZGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxyXG4gICAgfSkpO1xyXG5cclxuICAgIHJlcy5zdGF0dXMoMjAxKS5qc29uKHtcclxuICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgbWVzc2FnZTogYCR7dXBsb2FkZWRGaWxlcy5sZW5ndGh9IGZpbGVzIHVwbG9hZGVkIHN1Y2Nlc3NmdWxseWAsXHJcbiAgICAgIGRhdGE6IHtcclxuICAgICAgICBjb3VudDogdXBsb2FkZWRGaWxlcy5sZW5ndGgsXHJcbiAgICAgICAgZmlsZXM6IHVwbG9hZGVkRmlsZXMsXHJcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIG1lc3NhZ2U6ICdFcnJvciB1cGxvYWRpbmcgZmlsZXMnLFxyXG4gICAgICBlcnJvcjogZXJyb3IubWVzc2FnZVxyXG4gICAgfSk7XHJcbiAgfVxyXG59KTtcclxuXHJcbi8qKlxyXG4gKiBAcm91dGUgICBHRVQgL2FwaS91cGxvYWQvOmlkXHJcbiAqIEBhY2Nlc3MgIFByaXZhdGVcclxuICogQHBhcmFtICAge1N0cmluZ30gaWQgLSBGaWxlIElEXHJcbiAqIEByZXR1cm5zIHtPYmplY3R9IEZpbGUgbWV0YWRhdGFcclxuICovXHJcbnJvdXRlci5nZXQoJy86aWQnLCBhdXRoZW50aWNhdGUsIChyZXEsIHJlcykgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IGlkIH0gPSByZXEucGFyYW1zO1xyXG5cclxuICAgIGlmICghaWQpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBtZXNzYWdlOiAnRmlsZSBJRCBpcyByZXF1aXJlZCdcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVE9ETzogSW1wbGVtZW50IGZpbGUgbWV0YWRhdGEgcmV0cmlldmFsXHJcbiAgICByZXMuanNvbih7XHJcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgIG1lc3NhZ2U6ICdGaWxlIG1ldGFkYXRhIHJldHJpZXZlZCBzdWNjZXNzZnVsbHknLFxyXG4gICAgICBkYXRhOiB7XHJcbiAgICAgICAgaWQsXHJcbiAgICAgICAgZmlsZW5hbWU6ICdkb2N1bWVudC5wZGYnLFxyXG4gICAgICAgIG9yaWdpbmFsbmFtZTogJ29yaWdpbmFsLWRvY3VtZW50LnBkZicsXHJcbiAgICAgICAgbWltZXR5cGU6ICdhcHBsaWNhdGlvbi9wZGYnLFxyXG4gICAgICAgIHNpemU6IDEwMjQwMCxcclxuICAgICAgICBjYXRlZ29yeTogJ2RvY3VtZW50JyxcclxuICAgICAgICB1cGxvYWRlZEJ5OiAndXNlcjEyMycsXHJcbiAgICAgICAgdXBsb2FkZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgICAgIGlzUHVibGljOiBmYWxzZVxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xyXG4gICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgbWVzc2FnZTogJ0Vycm9yIHJldHJpZXZpbmcgZmlsZSBtZXRhZGF0YScsXHJcbiAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlXHJcbiAgICB9KTtcclxuICB9XHJcbn0pO1xyXG5cclxuLyoqXHJcbiAqIEByb3V0ZSAgIERFTEVURSAvYXBpL3VwbG9hZC86aWRcclxuICogQGFjY2VzcyAgUHJpdmF0ZVxyXG4gKiBAcGFyYW0gICB7U3RyaW5nfSBpZCAtIEZpbGUgSURcclxuICogQHJldHVybnMge09iamVjdH0gRGVsZXRpb24gY29uZmlybWF0aW9uXHJcbiAqL1xyXG5yb3V0ZXIuZGVsZXRlKCcvOmlkJywgYXV0aGVudGljYXRlLCBhdXRob3JpemUoWydhZG1pbicsICdtYW5hZ2VyJ10pLCAocmVxLCByZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyBpZCB9ID0gcmVxLnBhcmFtcztcclxuXHJcbiAgICBpZiAoIWlkKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XHJcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgbWVzc2FnZTogJ0ZpbGUgSUQgaXMgcmVxdWlyZWQnXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFRPRE86IEltcGxlbWVudCBmaWxlIGRlbGV0aW9uIHdpdGggY2xlYW51cFxyXG4gICAgcmVzLmpzb24oe1xyXG4gICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICBtZXNzYWdlOiAnRmlsZSBkZWxldGVkIHN1Y2Nlc3NmdWxseScsXHJcbiAgICAgIGRhdGE6IHtcclxuICAgICAgICBpZCxcclxuICAgICAgICBkZWxldGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xyXG4gICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgbWVzc2FnZTogJ0Vycm9yIGRlbGV0aW5nIGZpbGUnLFxyXG4gICAgICBlcnJvcjogZXJyb3IubWVzc2FnZVxyXG4gICAgfSk7XHJcbiAgfVxyXG59KTtcclxuXHJcbi8qKlxyXG4gKiBAcm91dGUgICBHRVQgL2FwaS91cGxvYWQvZG9jdW1lbnRzLzpkb2NJZFxyXG4gKiBAYWNjZXNzICBQcml2YXRlXHJcbiAqIEBwYXJhbSAgIHtTdHJpbmd9IGRvY0lkIC0gRG9jdW1lbnQgSURcclxuICogQHJldHVybnMge09iamVjdH0gRG9jdW1lbnQgZGV0YWlscyB3aXRoIGZpbGUgbWV0YWRhdGFcclxuICovXHJcbnJvdXRlci5nZXQoJy9kb2N1bWVudHMvOmRvY0lkJywgYXV0aGVudGljYXRlLCAocmVxLCByZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyBkb2NJZCB9ID0gcmVxLnBhcmFtcztcclxuXHJcbiAgICBpZiAoIWRvY0lkKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XHJcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgbWVzc2FnZTogJ0RvY3VtZW50IElEIGlzIHJlcXVpcmVkJ1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBUT0RPOiBJbXBsZW1lbnQgZG9jdW1lbnQgcmV0cmlldmFsIHdpdGggcmVsYXRlZCBmaWxlc1xyXG4gICAgcmVzLmpzb24oe1xyXG4gICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICBtZXNzYWdlOiAnRG9jdW1lbnQgcmV0cmlldmVkIHN1Y2Nlc3NmdWxseScsXHJcbiAgICAgIGRhdGE6IHtcclxuICAgICAgICBpZDogZG9jSWQsXHJcbiAgICAgICAgdGl0bGU6ICdTYW1wbGUgRG9jdW1lbnQnLFxyXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnQSBzYW1wbGUgZG9jdW1lbnQgd2l0aCBhdHRhY2htZW50cycsXHJcbiAgICAgICAgZmlsZXM6IFtcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgaWQ6ICdmaWxlXzEnLFxyXG4gICAgICAgICAgICBmaWxlbmFtZTogJ2RvY3VtZW50LnBkZicsXHJcbiAgICAgICAgICAgIHNpemU6IDEwMjQwMCxcclxuICAgICAgICAgICAgdXBsb2FkZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgXSxcclxuICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xyXG4gICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgbWVzc2FnZTogJ0Vycm9yIHJldHJpZXZpbmcgZG9jdW1lbnQnLFxyXG4gICAgICBlcnJvcjogZXJyb3IubWVzc2FnZVxyXG4gICAgfSk7XHJcbiAgfVxyXG59KTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gcm91dGVyO1xyXG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsTUFBTUEsT0FBTyxHQUFHQyxPQUFPLENBQUMsU0FBUyxDQUFDO0FBQ2xDLE1BQU1DLE1BQU0sR0FBR0YsT0FBTyxDQUFDRyxNQUFNLENBQUMsQ0FBQztBQUMvQixNQUFNQyxNQUFNLEdBQUdILE9BQU8sQ0FBQyxRQUFRLENBQUM7QUFDaEMsTUFBTTtFQUFFSSxZQUFZO0VBQUVDO0FBQVUsQ0FBQyxHQUFHTCxPQUFPLENBQUMsb0JBQW9CLENBQUM7QUFDakUsTUFBTU0sSUFBSSxHQUFHTixPQUFPLENBQUMsTUFBTSxDQUFDO0FBQzVCLE1BQU1PLEVBQUUsR0FBR1AsT0FBTyxDQUFDLElBQUksQ0FBQzs7QUFFeEI7QUFDQSxNQUFNUSxPQUFPLEdBQUdMLE1BQU0sQ0FBQ00sV0FBVyxDQUFDO0VBQ2pDQyxXQUFXLEVBQUVBLENBQUNDLEdBQUcsRUFBRUMsSUFBSSxFQUFFQyxFQUFFLEtBQUs7SUFDOUIsTUFBTUMsU0FBUyxHQUFHUixJQUFJLENBQUNTLElBQUksQ0FBQ0MsU0FBUyxFQUFFLFlBQVksQ0FBQztJQUNwRCxJQUFJLENBQUNULEVBQUUsQ0FBQ1UsVUFBVSxDQUFDSCxTQUFTLENBQUMsRUFBRTtNQUM3QlAsRUFBRSxDQUFDVyxTQUFTLENBQUNKLFNBQVMsRUFBRTtRQUFFSyxTQUFTLEVBQUU7TUFBSyxDQUFDLENBQUM7SUFDOUM7SUFDQU4sRUFBRSxDQUFDLElBQUksRUFBRUMs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