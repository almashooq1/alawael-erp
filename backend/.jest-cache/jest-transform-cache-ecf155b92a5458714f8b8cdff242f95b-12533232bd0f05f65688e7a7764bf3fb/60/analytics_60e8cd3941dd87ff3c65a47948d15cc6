33a57d3aaaf0550d2cc4a1b9d56be497
const logger = require('../utils/logger');

/**
 * Advanced Analytics Middleware
 * Collects and tracks application metrics
 */
class Analytics {
  constructor() {
    this.metrics = {
      requests: {
        total: 0,
        byMethod: {},
        byRoute: {},
        byStatus: {}
      },
      performance: {
        avgResponseTime: 0,
        slowRequests: [],
        fastestRequest: Infinity,
        slowestRequest: 0
      },
      errors: {
        total: 0,
        byType: {},
        byRoute: {}
      },
      users: {
        activeUsers: new Set(),
        totalSessions: 0,
        loginAttempts: 0
      },
      system: {
        uptime: Date.now(),
        memoryUsage: [],
        cpuUsage: []
      }
    };
  }

  /**
   * Track request metrics
   */
  trackRequest = (req, res, duration) => {
    const {
      method,
      path,
      user,
      ip
    } = req;
    const {
      statusCode
    } = res;

    // Total requests
    this.metrics.requests.total++;

    // By method
    this.metrics.requests.byMethod[method] = (this.metrics.requests.byMethod[method] || 0) + 1;

    // By route
    const route = this.normalizeRoute(path);
    this.metrics.requests.byRoute[route] = {
      count: (this.metrics.requests.byRoute[route]?.count || 0) + 1,
      avgTime: this.calculateAverage(this.metrics.requests.byRoute[route]?.avgTime || 0, duration, this.metrics.requests.byRoute[route]?.count || 0)
    };

    // By status
    const statusCategory = Math.floor(statusCode / 100) * 100;
    this.metrics.requests.byStatus[statusCode] = (this.metrics.requests.byStatus[statusCode] || 0) + 1;

    // Performance tracking
    this.trackPerformance(duration, route, statusCode);

    // User tracking
    if (user) {
      this.metrics.users.activeUsers.add(user.id);
    }
  };

  /**
   * Track performance metrics
   */
  trackPerformance = (duration, route, statusCode) => {
    const {
      performance
    } = this.metrics;

    // Update average response time
    performance.avgResponseTime = this.calculateAverage(performance.avgResponseTime, duration, this.metrics.requests.total - 1);

    // Track slow requests
    if (duration > 1000) {
      // > 1 second
      performance.slowRequests.push({
        route,
        duration,
        timestamp: new Date(),
        statusCode
      });

      // Keep only last 100 slow requests
      if (performance.slowRequests.length > 100) {
        performance.slowRequests.shift();
      }
    }

    // Update fastest/slowest
    performance.fastestRequest = Math.min(performance.fastestRequest, duration);
    performance.slowestRequest = Math.max(performance.slowestRequest, duration);
  };

  /**
   * Track errors
   */
  trackError = (error, req) => {
    this.metrics.errors.total++;
    const errorType = error.name || 'Unknown';
    this.metrics.errors.byType[errorType] = (this.metrics.errors.byType[errorType] || 0) + 1;
    const route = this.normalizeRoute(req.path);
    this.metrics.errors.byRoute[route] = (this.metrics.errors.byRoute[route] || 0) + 1;
  };

  /**
   * Track user activity
   */
  trackUserActivity = (userId, action) => {
    if (action === 'login') {
      this.metrics.users.activeUsers.add(userId);
      this.metrics.users.totalSessions++;
      this.metrics.users.loginAttempts++;
    } else if (action === 'logout') {
      this.metrics.users.activeUsers.delete(userId);
    }
  };

  /**
   * Get analytics summary
   */
  getSummary = () => {
    const uptime = Date.now() - this.metrics.system.uptime;
    return {
      requests: {
        total: this.metrics.requests.total,
        perSecond: (this.metrics.requests.total / (uptime / 1000)).toFixed(2),
        byMethod: this.metrics.requests.byMethod,
        byStatus: this.metrics.requests.byStatus,
        topRoutes: this.getTopRoutes(5)
      },
      performance: {
        avgResponseTime: this.metrics.performance.avgResponseTime.toFixed(2) + 'ms',
        fastestRequest: this.metrics.performance.fastestRequest + 'ms',
        slowestRequest: this.metrics.performance.slowestRequest + 'ms',
        slowRequests: this.metrics.performance.slowRequests.length
      },
      errors: {
        total: this.metrics.errors.total,
        byType: this.metrics.errors.byType,
        errorRate: (this.metrics.errors.total / this.metrics.requests.total * 100).toFixed(2) + '%',
        topErrorRoutes: this.getTopErrorRoutes(5)
      },
      users: {
        activeNow: this.metrics.users.activeUsers.size,
        totalSessions: this.metrics.users.totalSessions,
        loginAttempts: this.metrics.users.loginAttempts
      },
      system: {
        uptime: this.formatUptime(uptime),
        uptimeMs: uptime
      }
    };
  };

  /**
   * Reset analytics
   */
  reset = () => {
    this.metrics.system.uptime = Date.now();
    logger.info('Analytics reset');
  };

  /**
   * Helper methods
   */
  normalizeRoute = path => {
    return path.replace(/\/\d+/g, '/:id').split('?')[0];
  };
  calculateAverage = (currentAvg, newValue, count) => {
    return (currentAvg * count + newValue) / (count + 1);
  };
  getTopRoutes = limit => {
    return Object.entries(this.metrics.requests.byRoute).sort((a, b) => b[1].count - a[1].count).slice(0, limit).map(([route, data]) => ({
      route,
      ...data
    }));
  };
  getTopErrorRoutes = limit => {
    return Object.entries(this.metrics.errors.byRoute).sort((a, b) => b[1] - a[1]).slice(0, limit).map(([route, count]) => ({
      route,
      count
    }));
  };
  formatUptime = ms => {
    const seconds = Math.floor(ms / 1000);
    const minutes = Math.floor(seconds / 60);
    const hours = Math.floor(minutes / 60);
    const days = Math.floor(hours / 24);
    if (days > 0) return `${days}d ${hours % 24}h`;
    if (hours > 0) return `${hours}h ${minutes % 60}m`;
    if (minutes > 0) return `${minutes}m ${seconds % 60}s`;
    return `${seconds}s`;
  };

  /**
   * Export metrics for visualization
   */
  exportMetrics = () => {
    return {
      timestamp: new Date().toISOString(),
      ...this.getSummary()
    };
  };
}
module.exports = new Analytics();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJsb2dnZXIiLCJyZXF1aXJlIiwiQW5hbHl0aWNzIiwiY29uc3RydWN0b3IiLCJtZXRyaWNzIiwicmVxdWVzdHMiLCJ0b3RhbCIsImJ5TWV0aG9kIiwiYnlSb3V0ZSIsImJ5U3RhdHVzIiwicGVyZm9ybWFuY2UiLCJhdmdSZXNwb25zZVRpbWUiLCJzbG93UmVxdWVzdHMiLCJmYXN0ZXN0UmVxdWVzdCIsIkluZmluaXR5Iiwic2xvd2VzdFJlcXVlc3QiLCJlcnJvcnMiLCJieVR5cGUiLCJ1c2VycyIsImFjdGl2ZVVzZXJzIiwiU2V0IiwidG90YWxTZXNzaW9ucyIsImxvZ2luQXR0ZW1wdHMiLCJzeXN0ZW0iLCJ1cHRpbWUiLCJEYXRlIiwibm93IiwibWVtb3J5VXNhZ2UiLCJjcHVVc2FnZSIsInRyYWNrUmVxdWVzdCIsInJlcSIsInJlcyIsImR1cmF0aW9uIiwibWV0aG9kIiwicGF0aCIsInVzZXIiLCJpcCIsInN0YXR1c0NvZGUiLCJyb3V0ZSIsIm5vcm1hbGl6ZVJvdXRlIiwiY291bnQiLCJhdmdUaW1lIiwiY2FsY3VsYXRlQXZlcmFnZSIsInN0YXR1c0NhdGVnb3J5IiwiTWF0aCIsImZsb29yIiwidHJhY2tQZXJmb3JtYW5jZSIsImFkZCIsImlkIiwicHVzaCIsInRpbWVzdGFtcCIsImxlbmd0aCIsInNoaWZ0IiwibWluIiwibWF4IiwidHJhY2tFcnJvciIsImVycm9yIiwiZXJyb3JUeXBlIiwibmFtZSIsInRyYWNrVXNlckFjdGl2aXR5IiwidXNlcklkIiwiYWN0aW9uIiwiZGVsZXRlIiwiZ2V0U3VtbWFyeSIsInBlclNlY29uZCIsInRvRml4ZWQiLCJ0b3BSb3V0ZXMiLCJnZXRUb3BSb3V0ZXMiLCJlcnJvclJhdGUiLCJ0b3BFcnJvclJvdXRlcyIsImdldFRvcEVycm9yUm91dGVzIiwiYWN0aXZlTm93Iiwic2l6ZSIsImZvcm1hdFVwdGltZSIsInVwdGltZU1zIiwicmVzZXQiLCJpbmZvIiwicmVwbGFjZSIsInNwbGl0IiwiY3VycmVudEF2ZyIsIm5ld1ZhbHVlIiwibGltaXQiLCJPYmplY3QiLCJlbnRyaWVzIiwic29ydCIsImEiLCJiIiwic2xpY2UiLCJtYXAiLCJkYXRhIiwibXMiLCJzZWNvbmRzIiwibWludXRlcyIsImhvdXJzIiwiZGF5cyIsImV4cG9ydE1ldHJpY3MiLCJ0b0lTT1N0cmluZyIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlcyI6WyJhbmFseXRpY3MuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgbG9nZ2VyID0gcmVxdWlyZSgnLi4vdXRpbHMvbG9nZ2VyJyk7XHJcblxyXG4vKipcclxuICogQWR2YW5jZWQgQW5hbHl0aWNzIE1pZGRsZXdhcmVcclxuICogQ29sbGVjdHMgYW5kIHRyYWNrcyBhcHBsaWNhdGlvbiBtZXRyaWNzXHJcbiAqL1xyXG5jbGFzcyBBbmFseXRpY3Mge1xyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgdGhpcy5tZXRyaWNzID0ge1xyXG4gICAgICByZXF1ZXN0czoge1xyXG4gICAgICAgIHRvdGFsOiAwLFxyXG4gICAgICAgIGJ5TWV0aG9kOiB7fSxcclxuICAgICAgICBieVJvdXRlOiB7fSxcclxuICAgICAgICBieVN0YXR1czoge30sXHJcbiAgICAgIH0sXHJcbiAgICAgIHBlcmZvcm1hbmNlOiB7XHJcbiAgICAgICAgYXZnUmVzcG9uc2VUaW1lOiAwLFxyXG4gICAgICAgIHNsb3dSZXF1ZXN0czogW10sXHJcbiAgICAgICAgZmFzdGVzdFJlcXVlc3Q6IEluZmluaXR5LFxyXG4gICAgICAgIHNsb3dlc3RSZXF1ZXN0OiAwLFxyXG4gICAgICB9LFxyXG4gICAgICBlcnJvcnM6IHtcclxuICAgICAgICB0b3RhbDogMCxcclxuICAgICAgICBieVR5cGU6IHt9LFxyXG4gICAgICAgIGJ5Um91dGU6IHt9LFxyXG4gICAgICB9LFxyXG4gICAgICB1c2Vyczoge1xyXG4gICAgICAgIGFjdGl2ZVVzZXJzOiBuZXcgU2V0KCksXHJcbiAgICAgICAgdG90YWxTZXNzaW9uczogMCxcclxuICAgICAgICBsb2dpbkF0dGVtcHRzOiAwLFxyXG4gICAgICB9LFxyXG4gICAgICBzeXN0ZW06IHtcclxuICAgICAgICB1cHRpbWU6IERhdGUubm93KCksXHJcbiAgICAgICAgbWVtb3J5VXNhZ2U6IFtdLFxyXG4gICAgICAgIGNwdVVzYWdlOiBbXSxcclxuICAgICAgfSxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBUcmFjayByZXF1ZXN0IG1ldHJpY3NcclxuICAgKi9cclxuICB0cmFja1JlcXVlc3QgPSAocmVxLCByZXMsIGR1cmF0aW9uKSA9PiB7XHJcbiAgICBjb25zdCB7IG1ldGhvZCwgcGF0aCwgdXNlciwgaXAgfSA9IHJlcTtcclxuICAgIGNvbnN0IHsgc3RhdHVzQ29kZSB9ID0gcmVzO1xyXG5cclxuICAgIC8vIFRvdGFsIHJlcXVlc3RzXHJcbiAgICB0aGlzLm1ldHJpY3MucmVxdWVzdHMudG90YWwrKztcclxuXHJcbiAgICAvLyBCeSBtZXRob2RcclxuICAgIHRoaXMubWV0cmljcy5yZXF1ZXN0cy5ieU1ldGhvZFttZXRob2RdID0gKHRoaXMubWV0cmljcy5yZXF1ZXN0cy5ieU1ldGhvZFttZXRob2RdIHx8IDApICsgMTtcclxuXHJcbiAgICAvLyBCeSByb3V0ZVxyXG4gICAgY29uc3Qgcm91dGUgPSB0aGlzLm5vcm1hbGl6ZVJvdXRlKHBhdGgpO1xyXG4gICAgdGhpcy5tZXRyaWNzLnJlcXVlc3RzLmJ5Um91dGVbcm91dGVdID0ge1xyXG4gICAgICBjb3VudDogKHRoaXMubWV0cmljcy5yZXF1ZXN0cy5ieVJvdXRlW3JvdXRlXT8uY291bnQgfHwgMCkgKyAxLFxyXG4gICAgICBhdmdUaW1lOiB0aGlzLmNhbGN1bGF0ZUF2ZXJhZ2UoXHJcbiAgICAgICAgdGhpcy5tZXRyaWNzLnJlcXVlc3RzLmJ5Um91dGVbcm91dGVdPy5hdmdUaW1lIHx8IDAsXHJcbiAgICAgICAgZHVyYXRpb24sXHJcbiAgICAgICAgdGhpcy5tZXRyaWNzLnJlcXVlc3RzLmJ5Um91dGVbcm91dGVdPy5jb3VudCB8fCAwXHJcbiAgICAgICksXHJcbiAgICB9O1xyXG5cclxuICAgIC8vIEJ5IHN0YXR1c1xyXG4gICAgY29uc3Qgc3RhdHVzQ2F0ZWdvcnkgPSBNYXRoLmZsb29yKHN0YXR1c0NvZGUgLyAxMDApICogMTAwO1xyXG4gICAgdGhpcy5tZXRyaWNzLnJlcXVlc3RzLmJ5U3RhdHVzW3N0YXR1c0NvZGVdID1cclxuICAgICAgKHRoaXMubWV0cmljcy5yZXF1ZXN0cy5ieVN0YXR1c1tzdGF0dXNDb2RlXSB8fCAwKSArIDE7XHJcblxyXG4gICAgLy8gUGVyZm9ybWFuY2UgdHJhY2tpbmdcclxuICAgIHRoaXMudHJhY2tQZXJmb3JtYW5jZShkdXJhdGlvbiwgcm91dGUsIHN0YXR1c0NvZGUpO1xyXG5cclxuICAgIC8vIFVzZXIgdHJhY2tpbmdcclxuICAgIGlmICh1c2VyKSB7XHJcbiAgICAgIHRoaXMubWV0cmljcy51c2Vycy5hY3RpdmVVc2Vycy5hZGQodXNlci5pZCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogVHJhY2sgcGVyZm9ybWFuY2UgbWV0cmljc1xyXG4gICAqL1xyXG4gIHRyYWNrUGVyZm9ybWFuY2UgPSAoZHVyYXRpb24sIHJvdXRlLCBzdGF0dXNDb2RlKSA9PiB7XHJcbiAgICBjb25zdCB7IHBlcmZvcm1hbmNlIH0gPSB0aGlzLm1ldHJpY3M7XHJcblxyXG4gICAgLy8gVXBkYXRlIGF2ZXJhZ2UgcmVzcG9uc2UgdGltZVxyXG4gICAgcGVyZm9ybWFuY2UuYXZnUmVzcG9uc2VUaW1lID0gdGhpcy5jYWxjdWxhdGVBdmVyYWdlKFxyXG4gICAgICBwZXJmb3JtYW5jZS5hdmdSZXNwb25zZVRpbWUsXHJcbiAgICAgIGR1cmF0aW9uLFxyXG4gICAgICB0aGlzLm1ldHJpY3MucmVxdWVzdHMudG90YWwgLSAxXHJcbiAgICApO1xyXG5cclxuICAgIC8vIFRyYWNrIHNsb3cgcmVxdWVzdHNcclxuICAgIGlmIChkdXJhdGlvbiA+IDEwMDApIHtcclxuICAgICAgLy8gPiAxIHNlY29uZFxyXG4gICAgICBwZXJmb3JtYW5jZS5zbG93UmVxdWVzdHMucHVzaCh7XHJcbiAgICAgICAgcm91dGUsXHJcbiAgICAgICAgZHVyYXRpb24sXHJcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgIHN0YXR1c0NvZGUsXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLy8gS2VlcCBvbmx5IGxhc3QgMTAwIHNsb3cgcmVxdWVzdHNcclxuICAgICAgaWYgKHBlcmZvcm1hbmNlLnNsb3dSZXF1ZXN0cy5sZW5ndGggPiAxMDApIHtcclxuICAgICAgICBwZXJmb3JtYW5jZS5zbG93UmVxdWVzdHMuc2hpZnQoKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIFVwZGF0ZSBmYXN0ZXN0L3Nsb3dlc3RcclxuICAgIHBlcmZvcm1hbmNlLmZhc3Rlc3RSZXF1ZXN0ID0gTWF0aC5taW4ocGVyZm9ybWFuY2UuZmFzdGVzdFJlcXVlc3QsIGR1cmF0aW9uKTtcclxuICAgIHBlcmZvcm1hbmNlLnNsb3dlc3RSZXF1ZXN0ID0gTWF0aC5tYXgocGVyZm9ybWFuY2Uuc2xvd2VzdFJlcXVlc3QsIGR1cmF0aW9uKTtcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBUcmFjayBlcnJvcnNcclxuICAgKi9cclxuICB0cmFja0Vycm9yID0gKGVycm9yLCByZXEpID0+IHtcclxuICAgIHRoaXMubWV0cmljcy5lcnJvcnMudG90YWwrKztcclxuXHJcbiAgICBjb25zdCBlcnJvclR5cGUgPSBlcnJvci5uYW1lIHx8ICdVbmtub3duJztcclxuICAgIHRoaXMubWV0cmljcy5lcnJvcnMuYnlUeXBlW2Vycm9yVHlwZV0gPSAodGhpcy5tZXRyaWNzLmVycm9ycy5ieVR5cGVbZXJyb3JUeXBlXSB8fCAwKSArIDE7XHJcblxyXG4gICAgY29uc3Qgcm91dGUgPSB0aGlzLm5vcm1hbGl6ZVJvdXRlKHJlcS5wYXRoKTtcclxuICAgIHRoaXMubWV0cmljcy5lcnJvcnMuYnlSb3V0ZVtyb3V0ZV0gPSAodGhpcy5tZXRyaWNzLmVycm9ycy5ieVJvdXRlW3JvdXRlXSB8fCAwKSArIDE7XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogVHJhY2sgdXNlciBhY3Rpdml0eVxyXG4gICAqL1xyXG4gIHRyYWNrVXNlckFjdGl2aXR5ID0gKHVzZXJJZCwgYWN0aW9uKSA9PiB7XHJcbiAgICBpZiAoYWN0aW9uID09PSAnbG9naW4nKSB7XHJcbiAgICAgIHRoaXMubWV0cmljcy51c2Vycy5hY3RpdmVVc2Vycy5hZGQodXNlcklkKTtcclxuICAgICAgdGhpcy5tZXRyaWNzLnVzZXJzLnRvdGFsU2Vzc2lvbnMrKztcclxuICAgICAgdGhpcy5tZXRyaWNzLnVzZXJzLmxvZ2luQXR0ZW1wdHMrKztcclxuICAgIH0gZWxzZSBpZiAoYWN0aW9uID09PSAnbG9nb3V0Jykge1xyXG4gICAgICB0aGlzLm1ldHJpY3MudXNlcnMuYWN0aXZlVXNlcnMuZGVsZXRlKHVzZXJJZCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IGFuYWx5dGljcyBzdW1tYXJ5XHJcbiAgICovXHJcbiAgZ2V0U3VtbWFyeSA9ICgpID0+IHtcclxuICAgIGNvbnN0IHVwdGltZSA9IERhdGUubm93KCkgLSB0aGlzLm1ldHJpY3Muc3lzdGVtLnVwdGltZTtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICByZXF1ZXN0czoge1xyXG4gICAgICAgIHRvdGFsOiB0aGlzLm1ldHJpY3MucmVxdWVzdHMudG90YWwsXHJcbiAgICAgICAgcGVyU2Vjb25kOiAodGhpcy5tZXRyaWNzLnJlcXVlc3RzLnRvdGFsIC8gKHVwdGltZSAvIDEwMDApKS50b0ZpeGVkKDIpLFxyXG4gICAgICAgIGJ5TWV0aG9kOiB0aGlzLm1ldHJpY3MucmVxdWVzdHMuYnlNZXRob2QsXHJcbiAgICAgICAgYnlTdGF0dXM6IHRoaXMubWV0cmljcy5yZXF1ZXN0cy5ieVN0YXR1cyxcclxuICAgICAgICB0b3BSb3V0ZXM6IHRoaXMuZ2V0VG9wUm91dGVzKDUpLFxyXG4gICAgICB9LFxyXG4gICAgICBwZXJmb3JtYW5jZToge1xyXG4gICAgICAgIGF2Z1Jlc3BvbnNlVGltZTogdGhpcy5tZXRyaWNzLnBlcmZvcm1hbmNlLmF2Z1Jlc3BvbnNlVGltZS50b0ZpeGVkKDIpICsgJ21zJyxcclxuICAgICAgICBmYXN0ZXN0UmVxdWVzdDogdGhpcy5tZXRyaWNzLnBlcmZvcm1hbmNlLmZhc3Rlc3RSZXF1ZXN0ICsgJ21zJyxcclxuICAgICAgICBzbG93ZXN0UmVxdWVzdDogdGhpcy5tZXRyaWNzLnBlcmZvcm1hbmNlLnNsb3dlc3RSZXF1ZXN0ICsgJ21zJyxcclxuICAgICAgICBzbG93UmVxdWVzdHM6IHRoaXMubWV0cmljcy5wZXJmb3JtYW5jZS5zbG93UmVxdWVzdHMubGVuZ3RoLFxyXG4gICAgICB9LFxyXG4gICAgICBlcnJvcnM6IHtcclxuICAgICAgICB0b3RhbDogdGhpcy5tZXRyaWNzLmVycm9ycy50b3RhbCxcclxuICAgICAgICBieVR5cGU6IHRoaXMubWV0cmljcy5lcnJvcnMuYnlUeXBlLFxyXG4gICAgICAgIGVycm9yUmF0ZTpcclxuICAgICAgICAgICgodGhpcy5tZXRyaWNzLmVycm9ycy50b3RhbCAvIHRoaXMubWV0cmljcy5yZXF1ZXN0cy50b3RhbCkgKiAxMDApLnRvRml4ZWQoMikgKyAnJScsXHJcbiAgICAgICAgdG9wRXJyb3JSb3V0ZXM6IHRoaXMuZ2V0VG9wRXJyb3JSb3V0ZXMoNSksXHJcbiAgICAgIH0sXHJcbiAgICAgIHVzZXJzOiB7XHJcbiAgICAgICAgYWN0aXZlTm93OiB0aGlzLm1ldHJpY3MudXNlcnMuYWN0aXZlVXNlcnMuc2l6ZSxcclxuICAgICAgICB0b3RhbFNlc3Npb25zOiB0aGlzLm1ldHJpY3MudXNlcnMudG90YWxTZXNzaW9ucyxcclxuICAgICAgICBsb2dpbkF0dGVtcHRzOiB0aGlzLm1ldHJpY3MudXNlcnMubG9naW5BdHRlbXB0cyxcclxuICAgICAgfSxcclxuICAgICAgc3lzdGVtOiB7XHJcbiAgICAgICAgdXB0aW1lOiB0aGlzLmZvcm1hdFVwdGltZSh1cHRpbWUpLFxyXG4gICAgICAgIHVwdGltZU1zOiB1cHRpbWUsXHJcbiAgICAgIH0sXHJcbiAgICB9O1xyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIFJlc2V0IGFuYWx5dGljc1xyXG4gICAqL1xyXG4gIHJlc2V0ID0gKCkgPT4ge1xyXG4gICAgdGhpcy5tZXRyaWNzLnN5c3RlbS51cHRpbWUgPSBEYXRlLm5vdygpO1xyXG4gICAgbG9nZ2VyLmluZm8oJ0FuYWx5dGljcyByZXNldCcpO1xyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIEhlbHBlciBtZXRob2RzXHJcbiAgICovXHJcbiAgbm9ybWFsaXplUm91dGUgPSBwYXRoID0+IHtcclxuICAgIHJldHVybiBwYXRoLnJlcGxhY2UoL1xcL1xcZCsvZywgJy86aWQnKS5zcGxpdCgnPycpWzBdO1xyXG4gIH07XHJcblxyXG4gIGNhbGN1bGF0ZUF2ZXJhZ2UgPSAoY3VycmVudEF2ZywgbmV3VmFsdWUsIGNvdW50KSA9PiB7XHJcbiAgICByZXR1cm4gKGN1cnJlbnRBdmcgKiBjb3VudCArIG5ld1ZhbHVlKSAvIChjb3VudCArIDEpO1xyXG4gIH07XHJcblxyXG4gIGdldFRvcFJvdXRlcyA9IGxpbWl0ID0+IHtcclxuICAgIHJldHVybiBPYmplY3QuZW50cmllcyh0aGlzLm1ldHJpY3MucmVxdWVzdHMuYnlSb3V0ZSlcclxuICAgICAgLnNvcnQoKGEsIGIpID0+IGJbMV0uY291bnQgLSBhWzFdLmNvdW50KVxyXG4gICAgICAuc2xpY2UoMCwgbGltaXQpXHJcbiAgICAgIC5tYXAoKFtyb3V0ZSwgZGF0YV0pID0+ICh7IHJvdXRlLCAuLi5kYXRhIH0pKTtcclxuICB9O1xyXG5cclxuICBnZXRUb3BFcnJvclJvdXRlcyA9IGxpbWl0ID0+IHtcclxuICAgIHJldHVybiBPYmplY3QuZW50cmllcyh0aGlzLm1ldHJpY3MuZXJyb3JzLmJ5Um91dGUpXHJcbiAgICAgIC5zb3J0KChhLCBiKSA9PiBiWzFdIC0gYVsxXSlcclxuICAgICAgLnNsaWNlKDAsIGxpbWl0KVxyXG4gICAgICAubWFwKChbcm91dGUsIGNvdW50XSkgPT4gKHsgcm91dGUsIGNvdW50IH0pKTtcclxuICB9O1xyXG5cclxuICBmb3JtYXRVcHRpbWUgPSBtcyA9PiB7XHJcbiAgICBjb25zdCBzZWNvbmRzID0gTWF0aC5mbG9vcihtcyAvIDEwMDApO1xyXG4gICAgY29uc3QgbWludXRlcyA9IE1hdGguZmxvb3Ioc2Vjb25kcyAvIDYwKTtcclxuICAgIGNvbnN0IGhvdXJzID0gTWF0aC5mbG9vcihtaW51dGVzIC8gNjApO1xyXG4gICAgY29uc3QgZGF5cyA9IE1hdGguZmxvb3IoaG91cnMgLyAyNCk7XHJcblxyXG4gICAgaWYgKGRheXMgPiAwKSByZXR1cm4gYCR7ZGF5c31kICR7aG91cnMgJSAyNH1oYDtcclxuICAgIGlmIChob3VycyA+IDApIHJldHVybiBgJHtob3Vyc31oICR7bWludXRlcyAlIDYwfW1gO1xyXG4gICAgaWYgKG1pbnV0ZXMgPiAwKSByZXR1cm4gYCR7bWludXRlc31tICR7c2Vjb25kcyAlIDYwfXNgO1xyXG4gICAgcmV0dXJuIGAke3NlY29uZHN9c2A7XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogRXhwb3J0IG1ldHJpY3MgZm9yIHZpc3VhbGl6YXRpb25cclxuICAgKi9cclxuICBleHBvcnRNZXRyaWNzID0gKCkgPT4ge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgIC4uLnRoaXMuZ2V0U3VtbWFyeSgpLFxyXG4gICAgfTtcclxuICB9O1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IG5ldyBBbmFseXRpY3MoKTtcclxuIl0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxNQUFNLEdBQUdDLE9BQU8sQ0FBQyxpQkFBaUIsQ0FBQzs7QUFFekM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNQyxTQUFTLENBQUM7RUFDZEMsV0FBV0EsQ0FBQSxFQUFH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