598fe029e282655b27b28f7fd596cd85
// HR Payroll Controller
const Payroll = require('../../models/HR/Payroll');

// Create new payroll
exports.createPayroll = async (req, res) => {
  try {
    const payroll = new Payroll(req.body);
    await payroll.save();
    res.status(201).json(payroll);
  } catch (err) {
    res.status(400).json({
      error: err.message
    });
  }
};

// Get all payrolls
exports.getPayrolls = async (req, res) => {
  try {
    const payrolls = await Payroll.find();
    res.json(payrolls);
  } catch (err) {
    res.status(500).json({
      error: err.message
    });
  }
};

// Get payroll by ID
exports.getPayrollById = async (req, res) => {
  try {
    const payroll = await Payroll.findById(req.params.id);
    if (!payroll) return res.status(404).json({
      error: 'Not found'
    });
    res.json(payroll);
  } catch (err) {
    res.status(500).json({
      error: err.message
    });
  }
};

// Update payroll
exports.updatePayroll = async (req, res) => {
  try {
    const payroll = await Payroll.findByIdAndUpdate(req.params.id, req.body, {
      new: true
    });
    if (!payroll) return res.status(404).json({
      error: 'Not found'
    });
    res.json(payroll);
  } catch (err) {
    res.status(400).json({
      error: err.message
    });
  }
};

// Delete payroll
exports.deletePayroll = async (req, res) => {
  try {
    const payroll = await Payroll.findByIdAndDelete(req.params.id);
    if (!payroll) return res.status(404).json({
      error: 'Not found'
    });
    res.json({
      message: 'Deleted'
    });
  } catch (err) {
    res.status(500).json({
      error: err.message
    });
  }
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJQYXlyb2xsIiwicmVxdWlyZSIsImV4cG9ydHMiLCJjcmVhdGVQYXlyb2xsIiwicmVxIiwicmVzIiwicGF5cm9sbCIsImJvZHkiLCJzYXZlIiwic3RhdHVzIiwianNvbiIsImVyciIsImVycm9yIiwibWVzc2FnZSIsImdldFBheXJvbGxzIiwicGF5cm9sbHMiLCJmaW5kIiwiZ2V0UGF5cm9sbEJ5SWQiLCJmaW5kQnlJZCIsInBhcmFtcyIsImlkIiwidXBkYXRlUGF5cm9sbCIsImZpbmRCeUlkQW5kVXBkYXRlIiwibmV3IiwiZGVsZXRlUGF5cm9sbCIsImZpbmRCeUlkQW5kRGVsZXRlIl0sInNvdXJjZXMiOlsicGF5cm9sbENvbnRyb2xsZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gSFIgUGF5cm9sbCBDb250cm9sbGVyXHJcbmNvbnN0IFBheXJvbGwgPSByZXF1aXJlKCcuLi8uLi9tb2RlbHMvSFIvUGF5cm9sbCcpO1xyXG5cclxuLy8gQ3JlYXRlIG5ldyBwYXlyb2xsXHJcbmV4cG9ydHMuY3JlYXRlUGF5cm9sbCA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBwYXlyb2xsID0gbmV3IFBheXJvbGwocmVxLmJvZHkpO1xyXG4gICAgYXdhaXQgcGF5cm9sbC5zYXZlKCk7XHJcbiAgICByZXMuc3RhdHVzKDIwMSkuanNvbihwYXlyb2xsKTtcclxuICB9IGNhdGNoIChlcnIpIHtcclxuICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IGVyci5tZXNzYWdlIH0pO1xyXG4gIH1cclxufTtcclxuXHJcbi8vIEdldCBhbGwgcGF5cm9sbHNcclxuZXhwb3J0cy5nZXRQYXlyb2xscyA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBwYXlyb2xscyA9IGF3YWl0IFBheXJvbGwuZmluZCgpO1xyXG4gICAgcmVzLmpzb24ocGF5cm9sbHMpO1xyXG4gIH0gY2F0Y2ggKGVycikge1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogZXJyLm1lc3NhZ2UgfSk7XHJcbiAgfVxyXG59O1xyXG5cclxuLy8gR2V0IHBheXJvbGwgYnkgSURcclxuZXhwb3J0cy5nZXRQYXlyb2xsQnlJZCA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBwYXlyb2xsID0gYXdhaXQgUGF5cm9sbC5maW5kQnlJZChyZXEucGFyYW1zLmlkKTtcclxuICAgIGlmICghcGF5cm9sbCkgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyb3I6ICdOb3QgZm91bmQnIH0pO1xyXG4gICAgcmVzLmpzb24ocGF5cm9sbCk7XHJcbiAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiBlcnIubWVzc2FnZSB9KTtcclxuICB9XHJcbn07XHJcblxyXG4vLyBVcGRhdGUgcGF5cm9sbFxyXG5leHBvcnRzLnVwZGF0ZVBheXJvbGwgPSBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgcGF5cm9sbCA9IGF3YWl0IFBheXJvbGwuZmluZEJ5SWRBbmRVcGRhdGUocmVxLnBhcmFtcy5pZCwgcmVxLmJvZHksIHsgbmV3OiB0cnVlIH0pO1xyXG4gICAgaWYgKCFwYXlyb2xsKSByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogJ05vdCBmb3VuZCcgfSk7XHJcbiAgICByZXMuanNvbihwYXlyb2xsKTtcclxuICB9IGNhdGNoIChlcnIpIHtcclxuICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IGVyci5tZXNzYWdlIH0pO1xyXG4gIH1cclxufTtcclxuXHJcbi8vIERlbGV0ZSBwYXlyb2xsXHJcbmV4cG9ydHMuZGVsZXRlUGF5cm9sbCA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBwYXlyb2xsID0gYXdhaXQgUGF5cm9sbC5maW5kQnlJZEFuZERlbGV0ZShyZXEucGFyYW1zLmlkKTtcclxuICAgIGlmICghcGF5cm9sbCkgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyb3I6ICdOb3QgZm91bmQnIH0pO1xyXG4gICAgcmVzLmpzb24oeyBtZXNzYWdlOiAnRGVsZXRlZCcgfSk7XHJcbiAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiBlcnIubWVzc2FnZSB9KTtcclxuICB9XHJcbn07XHJcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQSxNQUFNQSxPQUFPLEdBQUdDLE9BQU8sQ0FBQyx5QkFBeUIsQ0FBQzs7QUFFbEQ7QUFDQUMsT0FBTyxDQUFDQyxhQUFhLEdBQUcsT0FBT0MsR0FBRyxFQUFFQyxHQUFHLEtBQUs7RUFDMUMsSUFBSTtJQUNGLE1BQU1DLE9BQU8sR0FBRyxJQUFJTixPQUFPLENBQUNJLEdBQUcsQ0FBQ0csSUFBSSxDQUFDO0lBQ3JDLE1BQU1ELE9BQU8sQ0FBQ0UsSUFBSSxDQUFDLENBQUM7SUFDcEJILEdBQUcsQ0FBQ0ksTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUNKLE9BQU8sQ0FBQztFQUMvQixDQUFDLENBQUMsT0FBT0ssR0FBRyxFQUFFO0lBQ1pOLEdBQUcsQ0FBQ0ksTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7TUFBRUUsS0FBSyxFQUFFRCxHQUFHLENBQUNFO0lBQVEsQ0FBQyxDQUFDO0VBQzlDO0FBQ0YsQ0FBQzs7QUFFRDtBQUNBWCxPQUFPLENBQUNZLFdBQVcsR0FBRyxPQUFPVixHQUFHLEVBQUVDLEdBQUcsS0FBSztFQUN4QyxJQUFJO0lBQ0YsTUFBTVUsUUFBUSxHQUFHLE1BQU1mLE9BQU8sQ0FBQ2dCLElBQUksQ0FBQyxDQUFDO0lBQ3JDWCxHQUFHLENBQUNLLElBQUksQ0FBQ0ssUUFBUSxDQUFDO0VBQ3BCLENBQUMsQ0FBQyxPQUFPSixHQUFHLEVBQUU7SUFDWk4sR0FBRyxDQUFDSSxNQUFNLENBQUMsR0FB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