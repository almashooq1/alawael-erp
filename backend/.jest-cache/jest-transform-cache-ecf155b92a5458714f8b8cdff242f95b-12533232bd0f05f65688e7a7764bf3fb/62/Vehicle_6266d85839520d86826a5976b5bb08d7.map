{"version":3,"names":["mongoose","require","vehicleSchema","Schema","vehicleNumber","type","String","required","unique","plateNumber","enum","brand","model","year","Number","color","capacity","min","fuelLevel","default","status","gpsDevice","deviceId","lastUpdate","Date","currentLocation","coordinates","address","speed","heading","currentDriver","Types","ObjectId","ref","driver","currentRoute","mileage","fuelConsumption","fuelType","tankCapacity","currentFuelLevel","averageConsumption","lastRefill","date","amount","cost","station","maintenance","lastMaintenanceDate","nextMaintenanceDate","nextMaintenanceKm","currentOdometer","maintenanceHistory","description","workshop","insurance","company","policyNumber","startDate","expiryDate","coverageAmount","annualCost","safety","lastInspectionDate","nextInspectionDate","emergencyAlerts","timestamp","location","severity","resolved","Boolean","resolvedAt","speedingIncidents","harshBrakingIncidents","assignedPassengers","statistics","totalDistanceCovered","totalFuelConsumed","totalMaintenanceCost","averageSpeed","tripCount","notes","documents","name","url","uploadDate","isActive","timestamps","index","virtual","get","percentage","daysUntilMaintenance","Math","ceil","methods","updateGPSLocation","longitude","latitude","undefined","currentSpeed","save","addEmergencyAlert","alert","push","updateFuelConsumption","distance","consumed","statics","findNearby","maxDistance","find","$near","$geometry","$maxDistance","findAvailable","$gte","$exists","module","exports"],"sources":["Vehicle.js"],"sourcesContent":["const mongoose = require('mongoose');\r\n\r\nconst vehicleSchema = new mongoose.Schema(\r\n  {\r\n    // معلومات أساسية\r\n    vehicleNumber: {\r\n      type: String,\r\n      required: true,\r\n      unique: true\r\n    },\r\n    plateNumber: {\r\n      type: String,\r\n      required: true,\r\n      unique: true,\r\n    },\r\n    type: {\r\n      type: String,\r\n      enum: ['bus', 'van', 'car', 'truck'],\r\n      required: true,\r\n    },\r\n    brand: String,\r\n    model: String,\r\n    year: Number,\r\n    color: String,\r\n    capacity: {\r\n      type: Number,\r\n      required: true,\r\n      min: 1,\r\n    },\r\n\r\n    // مستوى الوقود (للتوافق مع الاختبارات)\r\n    fuelLevel: {\r\n      type: Number,\r\n      default: 100,\r\n    },\r\n\r\n    // حالة المركبة\r\n    status: {\r\n      type: String,\r\n      enum: ['active', 'maintenance', 'inactive', 'emergency'],\r\n      default: 'active',\r\n    },\r\n\r\n    // معلومات GPS والموقع\r\n    gpsDevice: {\r\n      deviceId: String,\r\n      lastUpdate: Date,\r\n      currentLocation: {\r\n        type: {\r\n          type: String,\r\n          enum: ['Point'],\r\n          default: 'Point',\r\n        },\r\n        coordinates: {\r\n          type: [Number], // [longitude, latitude]\r\n        },\r\n        address: String,\r\n        speed: Number, // km/h\r\n        heading: Number, // اتجاه الحركة (0-360)\r\n      },\r\n    },\r\n\r\n    // السائق الحالي\r\n    currentDriver: {\r\n      type: mongoose.Schema.Types.ObjectId,\r\n      ref: 'User',\r\n    },\r\n\r\n    // حقل مستعار للسائق (للتوافق مع الاختبارات)\r\n    driver: {\r\n      type: mongoose.Schema.Types.ObjectId,\r\n      ref: 'User',\r\n    },\r\n\r\n    // المسار الحالي\r\n    currentRoute: {\r\n      type: mongoose.Schema.Types.ObjectId,\r\n      ref: 'TransportRoute',\r\n    },\r\n\r\n    // مسافة المركبة\r\n    mileage: {\r\n      type: Number,\r\n      default: 0,\r\n    },\r\n\r\n    // استهلاك الوقود\r\n    fuelConsumption: {\r\n      fuelType: {\r\n        type: String,\r\n        enum: ['petrol', 'diesel', 'electric', 'hybrid'],\r\n      },\r\n      tankCapacity: Number, // لتر\r\n      currentFuelLevel: Number, // لتر\r\n      averageConsumption: Number, // لتر/100كم\r\n      lastRefill: {\r\n        date: Date,\r\n        amount: Number,\r\n        cost: Number,\r\n        station: String,\r\n      },\r\n    },\r\n\r\n    // صيانة المركبة\r\n    maintenance: {\r\n      lastMaintenanceDate: Date,\r\n      nextMaintenanceDate: Date,\r\n      nextMaintenanceKm: Number,\r\n      currentOdometer: Number, // كم\r\n      maintenanceHistory: [\r\n        {\r\n          date: Date,\r\n          type: String,\r\n          description: String,\r\n          cost: Number,\r\n          workshop: String,\r\n        },\r\n      ],\r\n    },\r\n\r\n    // سجل الصيانة (للتوافق مع الاختبارات)\r\n    maintenanceHistory: [\r\n      {\r\n        date: Date,\r\n        type: String,\r\n        description: String,\r\n        cost: Number,\r\n        workshop: String,\r\n      },\r\n    ],\r\n\r\n    // تأمين المركبة\r\n    insurance: {\r\n      company: String,\r\n      policyNumber: String,\r\n      startDate: Date,\r\n      expiryDate: Date,\r\n      coverageAmount: Number,\r\n      annualCost: Number,\r\n    },\r\n\r\n    // مراقبة السلامة\r\n    safety: {\r\n      lastInspectionDate: Date,\r\n      nextInspectionDate: Date,\r\n      emergencyAlerts: [\r\n        {\r\n          timestamp: Date,\r\n          type: {\r\n            type: String,\r\n            enum: ['accident', 'breakdown', 'speeding', 'harsh_braking', 'deviation'],\r\n          },\r\n          location: {\r\n            type: {\r\n              type: String,\r\n              default: 'Point',\r\n            },\r\n            coordinates: [Number],\r\n          },\r\n          severity: {\r\n            type: String,\r\n            enum: ['low', 'medium', 'high', 'critical'],\r\n          },\r\n          resolved: {\r\n            type: Boolean,\r\n            default: false,\r\n          },\r\n          resolvedAt: Date,\r\n        },\r\n      ],\r\n      speedingIncidents: {\r\n        type: Number,\r\n        default: 0,\r\n      },\r\n      harshBrakingIncidents: {\r\n        type: Number,\r\n        default: 0,\r\n      },\r\n    },\r\n\r\n    // الركاب المعينين\r\n    assignedPassengers: [\r\n      {\r\n        type: mongoose.Schema.Types.ObjectId,\r\n        ref: 'User',\r\n      },\r\n    ],\r\n\r\n    // إحصائيات\r\n    statistics: {\r\n      totalDistanceCovered: {\r\n        type: Number,\r\n        default: 0,\r\n      }, // كم\r\n      totalFuelConsumed: {\r\n        type: Number,\r\n        default: 0,\r\n      }, // لتر\r\n      totalMaintenanceCost: {\r\n        type: Number,\r\n        default: 0,\r\n      }, // ريال\r\n      averageSpeed: Number, // km/h\r\n      tripCount: {\r\n        type: Number,\r\n        default: 0,\r\n      },\r\n    },\r\n\r\n    // معلومات إضافية\r\n    notes: String,\r\n    documents: [\r\n      {\r\n        name: String,\r\n        type: String,\r\n        url: String,\r\n        uploadDate: Date,\r\n      },\r\n    ],\r\n\r\n    isActive: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n  },\r\n  {\r\n    timestamps: true,\r\n  }\r\n);\r\n\r\n// Indexes للبحث والأداء\r\nvehicleSchema.index({ status: 1, isActive: 1 });\r\nvehicleSchema.index({ currentDriver: 1 });\r\nvehicleSchema.index({ 'gpsDevice.currentLocation.coordinates': '2dsphere' });\r\n\r\n// Virtual للحصول على حالة الوقود\r\nvehicleSchema.virtual('fuelStatus').get(function () {\r\n  if (!this.fuelConsumption.currentFuelLevel || !this.fuelConsumption.tankCapacity) {\r\n    return 'unknown';\r\n  }\r\n  const percentage =\r\n    (this.fuelConsumption.currentFuelLevel / this.fuelConsumption.tankCapacity) * 100;\r\n  if (percentage < 20) return 'critical';\r\n  if (percentage < 40) return 'low';\r\n  if (percentage < 70) return 'medium';\r\n  return 'good';\r\n});\r\n\r\n// Virtual للحصول على حالة الصيانة\r\nvehicleSchema.virtual('maintenanceStatus').get(function () {\r\n  if (!this.maintenance.nextMaintenanceDate) return 'unknown';\r\n  const daysUntilMaintenance = Math.ceil(\r\n    (this.maintenance.nextMaintenanceDate - new Date()) / (1000 * 60 * 60 * 24)\r\n  );\r\n  if (daysUntilMaintenance < 0) return 'overdue';\r\n  if (daysUntilMaintenance <= 7) return 'urgent';\r\n  if (daysUntilMaintenance <= 30) return 'soon';\r\n  return 'good';\r\n});\r\n\r\n// Method لتحديث موقع GPS\r\nvehicleSchema.methods.updateGPSLocation = function (location, speed, heading) {\r\n  this.gpsDevice.currentLocation = {\r\n    type: 'Point',\r\n    coordinates: location.coordinates || [location.longitude, location.latitude],\r\n  };\r\n  if (speed !== undefined) this.currentSpeed = speed;\r\n  if (heading !== undefined) this.gpsDevice.heading = heading;\r\n  this.gpsDevice.lastUpdate = new Date();\r\n  return this.save();\r\n};\r\n\r\n// Method لإضافة تنبيه طوارئ\r\nvehicleSchema.methods.addEmergencyAlert = function (alert) {\r\n  this.safety.emergencyAlerts.push({\r\n    timestamp: new Date(),\r\n    type: alert.type,\r\n    location: alert.location,\r\n    severity: alert.severity,\r\n  });\r\n\r\n  // تحديث حالة المركبة للطوارئ الحرجة\r\n  if (alert.severity === 'critical') {\r\n    this.status = 'emergency';\r\n  }\r\n\r\n  return this.save();\r\n};\r\n\r\n// Method لتحديث استهلاك الوقود\r\nvehicleSchema.methods.updateFuelConsumption = function (distance) {\r\n  if (this.fuelConsumption.averageConsumption) {\r\n    const consumed = (distance / 100) * this.fuelConsumption.averageConsumption;\r\n    this.fuelConsumption.currentFuelLevel -= consumed;\r\n    this.statistics.totalFuelConsumed += consumed;\r\n    this.statistics.totalDistanceCovered += distance;\r\n  }\r\n  return this.save();\r\n};\r\n\r\n// Static method للبحث عن مركبات قريبة\r\nvehicleSchema.statics.findNearby = function (longitude, latitude, maxDistance = 5000) {\r\n  return this.find({\r\n    'gpsDevice.currentLocation.coordinates': {\r\n      $near: {\r\n        $geometry: {\r\n          type: 'Point',\r\n          coordinates: [longitude, latitude],\r\n        },\r\n        $maxDistance: maxDistance,\r\n      },\r\n    },\r\n    status: 'active',\r\n    isActive: true,\r\n  });\r\n};\r\n\r\n// Static method للحصول على المركبات المتاحة\r\nvehicleSchema.statics.findAvailable = function (capacity) {\r\n  return this.find({\r\n    status: 'active',\r\n    isActive: true,\r\n    capacity: { $gte: capacity },\r\n    currentDriver: { $exists: true },\r\n  });\r\n};\r\n\r\nmodule.exports = mongoose.model('Vehicle', vehicleSchema);\r\n"],"mappings":"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","ignoreList":[]}