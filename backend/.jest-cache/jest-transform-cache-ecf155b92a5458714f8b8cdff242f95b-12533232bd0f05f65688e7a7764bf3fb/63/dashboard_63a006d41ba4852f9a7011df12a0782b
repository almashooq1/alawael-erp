e12bbf5225250c1b38d8d044908fb0d0
/**
 * Dashboard Routes
 * System monitoring, health checks, and metrics
 * Phase 11: System Integration
 */

const express = require('express');
const router = express.Router();
const systemDashboard = require('../services/systemDashboard');
const responseFormatter = require('../services/responseFormatter');
const {
  requireAdmin,
  optionalAuth
} = require('../middleware/auth');

/**
 * GET /api/dashboard/health
 * System health check
 */
router.get('/health', optionalAuth, (_req, res) => {
  try {
    const health = systemDashboard.getSystemHealth();
    res.json(responseFormatter.success(health, 'System health status'));
  } catch (error) {
    res.status(500).json(responseFormatter.serverError('Health check failed', error));
  }
});

/**
 * GET /api/dashboard/summary
 * Dashboard summary
 */
router.get('/summary', optionalAuth, (_req, res) => {
  try {
    const summary = systemDashboard.getDashboardSummary();
    res.json(responseFormatter.success(summary, 'Dashboard summary'));
  } catch (error) {
    res.status(500).json(responseFormatter.serverError('Summary retrieval failed', error));
  }
});

/**
 * GET /api/dashboard/services
 * List all services status
 */
router.get('/services', optionalAuth, (_req, res) => {
  try {
    const health = systemDashboard.getSystemHealth();
    res.json(responseFormatter.list(health.services, 'Services status'));
  } catch (error) {
    res.status(500).json(responseFormatter.serverError('Services retrieval failed', error));
  }
});

/**
 * GET /api/dashboard/services/:name
 * Get specific service status
 */
router.get('/services/:name', optionalAuth, (req, res) => {
  try {
    const {
      name
    } = req.params;
    const status = systemDashboard.checkServiceStatus(name);
    if (status.status === 'unknown') {
      return res.status(404).json(responseFormatter.notFound(`Service ${name}`));
    }
    res.json(responseFormatter.success(status, `Service ${name} status`));
  } catch (error) {
    res.status(500).json(responseFormatter.serverError('Service check failed', error));
  }
});

/**
 * GET /api/dashboard/integrations
 * List all integrations status
 */
router.get('/integrations', optionalAuth, (req, res) => {
  try {
    const health = systemDashboard.getSystemHealth();
    res.json(responseFormatter.success(health.integrations, 'Integrations status'));
  } catch (error) {
    res.status(500).json(responseFormatter.serverError('Integrations retrieval failed', error));
  }
});

/**
 * GET /api/dashboard/performance
 * Performance metrics
 */
router.get('/performance', optionalAuth, (req, res) => {
  try {
    const health = systemDashboard.getSystemHealth();
    res.json(responseFormatter.analytics(health.performance, 'current', 'Performance metrics'));
  } catch (error) {
    res.status(500).json(responseFormatter.serverError('Performance metrics failed', error));
  }
});

/**
 * GET /api/dashboard/alerts
 * System alerts
 */
router.get('/alerts', requireAdmin, (req, res) => {
  try {
    const summary = systemDashboard.getDashboardSummary();
    res.json(responseFormatter.list(summary.recentAlerts, 'Recent alerts'));
  } catch (error) {
    res.status(500).json(responseFormatter.serverError('Alerts retrieval failed', error));
  }
});

/**
 * GET /api/dashboard/events
 * System events log
 */
router.get('/events', requireAdmin, (req, res) => {
  try {
    const summary = systemDashboard.getDashboardSummary();
    res.json(responseFormatter.list(summary.recentEvents, 'Recent events'));
  } catch (error) {
    res.status(500).json(responseFormatter.serverError('Events retrieval failed', error));
  }
});

/**
 * POST /api/dashboard/alert
 * Add custom alert
 */
router.post('/alert', requireAdmin, (req, res) => {
  try {
    const {
      severity,
      message,
      details
    } = req.body;
    if (!severity || !message) {
      return res.status(400).json(responseFormatter.validationError(['severity and message are required']));
    }
    const alert = systemDashboard.addAlert(severity, message, details);
    res.status(201).json(responseFormatter.created(alert, 'Alert created'));
  } catch (error) {
    res.status(500).json(responseFormatter.serverError('Alert creation failed', error));
  }
});

/**
 * GET /api/dashboard/export
 * Export all metrics
 */
router.get('/export', requireAdmin, (req, res) => {
  try {
    const metrics = systemDashboard.exportMetrics();
    res.setHeader('Content-Type', 'application/json');
    res.setHeader('Content-Disposition', 'attachment; filename=metrics.json');
    res.json(metrics);
  } catch (error) {
    res.status(500).json(responseFormatter.serverError('Export failed', error));
  }
});

/**
 * GET /api/dashboard/config
 * Get system configuration (admin only)
 */
router.get('/config', requireAdmin, (req, res) => {
  try {
    const config = require('../config/production').getConfig();
    const sanitized = {
      server: config.server,
      features: config.features,
      deployment: config.deployment,
      version: config.deployment.version
    };
    res.json(responseFormatter.success(sanitized, 'System configuration'));
  } catch (error) {
    res.status(500).json(responseFormatter.serverError('Config retrieval failed', error));
  }
});
module.exports = router;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsInJvdXRlciIsIlJvdXRlciIsInN5c3RlbURhc2hib2FyZCIsInJlc3BvbnNlRm9ybWF0dGVyIiwicmVxdWlyZUFkbWluIiwib3B0aW9uYWxBdXRoIiwiZ2V0IiwiX3JlcSIsInJlcyIsImhlYWx0aCIsImdldFN5c3RlbUhlYWx0aCIsImpzb24iLCJzdWNjZXNzIiwiZXJyb3IiLCJzdGF0dXMiLCJzZXJ2ZXJFcnJvciIsInN1bW1hcnkiLCJnZXREYXNoYm9hcmRTdW1tYXJ5IiwibGlzdCIsInNlcnZpY2VzIiwicmVxIiwibmFtZSIsInBhcmFtcyIsImNoZWNrU2VydmljZVN0YXR1cyIsIm5vdEZvdW5kIiwiaW50ZWdyYXRpb25zIiwiYW5hbHl0aWNzIiwicGVyZm9ybWFuY2UiLCJyZWNlbnRBbGVydHMiLCJyZWNlbnRFdmVudHMiLCJwb3N0Iiwic2V2ZXJpdHkiLCJtZXNzYWdlIiwiZGV0YWlscyIsImJvZHkiLCJ2YWxpZGF0aW9uRXJyb3IiLCJhbGVydCIsImFkZEFsZXJ0IiwiY3JlYXRlZCIsIm1ldHJpY3MiLCJleHBvcnRNZXRyaWNzIiwic2V0SGVhZGVyIiwiY29uZmlnIiwiZ2V0Q29uZmlnIiwic2FuaXRpemVkIiwic2VydmVyIiwiZmVhdHVyZXMiLCJkZXBsb3ltZW50IiwidmVyc2lvbiIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlcyI6WyJkYXNoYm9hcmQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBEYXNoYm9hcmQgUm91dGVzXG4gKiBTeXN0ZW0gbW9uaXRvcmluZywgaGVhbHRoIGNoZWNrcywgYW5kIG1ldHJpY3NcbiAqIFBoYXNlIDExOiBTeXN0ZW0gSW50ZWdyYXRpb25cbiAqL1xuXG5jb25zdCBleHByZXNzID0gcmVxdWlyZSgnZXhwcmVzcycpO1xuY29uc3Qgcm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcbmNvbnN0IHN5c3RlbURhc2hib2FyZCA9IHJlcXVpcmUoJy4uL3NlcnZpY2VzL3N5c3RlbURhc2hib2FyZCcpO1xuY29uc3QgcmVzcG9uc2VGb3JtYXR0ZXIgPSByZXF1aXJlKCcuLi9zZXJ2aWNlcy9yZXNwb25zZUZvcm1hdHRlcicpO1xuY29uc3QgeyByZXF1aXJlQWRtaW4sIG9wdGlvbmFsQXV0aCB9ID0gcmVxdWlyZSgnLi4vbWlkZGxld2FyZS9hdXRoJyk7XG5cbi8qKlxuICogR0VUIC9hcGkvZGFzaGJvYXJkL2hlYWx0aFxuICogU3lzdGVtIGhlYWx0aCBjaGVja1xuICovXG5yb3V0ZXIuZ2V0KCcvaGVhbHRoJywgb3B0aW9uYWxBdXRoLCAoX3JlcSwgcmVzKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgaGVhbHRoID0gc3lzdGVtRGFzaGJvYXJkLmdldFN5c3RlbUhlYWx0aCgpO1xuICAgIHJlcy5qc29uKHJlc3BvbnNlRm9ybWF0dGVyLnN1Y2Nlc3MoaGVhbHRoLCAnU3lzdGVtIGhlYWx0aCBzdGF0dXMnKSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24ocmVzcG9uc2VGb3JtYXR0ZXIuc2VydmVyRXJyb3IoJ0hlYWx0aCBjaGVjayBmYWlsZWQnLCBlcnJvcikpO1xuICB9XG59KTtcblxuLyoqXG4gKiBHRVQgL2FwaS9kYXNoYm9hcmQvc3VtbWFyeVxuICogRGFzaGJvYXJkIHN1bW1hcnlcbiAqL1xucm91dGVyLmdldCgnL3N1bW1hcnknLCBvcHRpb25hbEF1dGgsIChfcmVxLCByZXMpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBzdW1tYXJ5ID0gc3lzdGVtRGFzaGJvYXJkLmdldERhc2hib2FyZFN1bW1hcnkoKTtcbiAgICByZXMuanNvbihyZXNwb25zZUZvcm1hdHRlci5zdWNjZXNzKHN1bW1hcnksICdEYXNoYm9hcmQgc3VtbWFyeScpKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbihyZXNwb25zZUZvcm1hdHRlci5zZXJ2ZXJFcnJvcignU3VtbWFyeSByZXRyaWV2YWwgZmFpbGVkJywgZXJyb3IpKTtcbiAgfVxufSk7XG5cbi8qKlxuICogR0VUIC9hcGkvZGFzaGJvYXJkL3NlcnZpY2VzXG4gKiBMaXN0IGFsbCBzZXJ2aWNlcyBzdGF0dXNcbiAqL1xucm91dGVyLmdldCgnL3NlcnZpY2VzJywgb3B0aW9uYWxBdXRoLCAoX3JlcSwgcmVzKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgaGVhbHRoID0gc3lzdGVtRGFzaGJvYXJkLmdldFN5c3RlbUhlYWx0aCgpO1xuICAgIHJlcy5qc29uKHJlc3BvbnNlRm9ybWF0dGVyLmxpc3QoaGVhbHRoLnNlcnZpY2VzLCAnU2VydmljZXMgc3RhdHVzJykpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHJlc3BvbnNlRm9ybWF0dGVyLnNlcnZlckVycm9yKCdTZXJ2aWNlcyByZXRyaWV2YWwgZmFpbGVkJywgZXJyb3IpKTtcbiAgfVxufSk7XG5cbi8qKlxuICogR0VUIC9hcGkvZGFzaGJvYXJkL3NlcnZpY2VzLzpuYW1lXG4gKiBHZXQgc3BlY2lmaWMgc2VydmljZSBzdGF0dXNcbiAqL1xucm91dGVyLmdldCgnL3NlcnZpY2VzLzpuYW1lJywgb3B0aW9uYWxBdXRoLCAocmVxLCByZXMpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IG5hbWUgfSA9IHJlcS5wYXJhbXM7XG4gICAgY29uc3Qgc3RhdHVzID0gc3lzdGVtRGFzaGJvYXJkLmNoZWNrU2VydmljZVN0YXR1cyhuYW1lKTtcblxuICAgIGlmIChzdGF0dXMuc3RhdHVzID09PSAndW5rbm93bicpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbihyZXNwb25zZUZvcm1hdHRlci5ub3RGb3VuZChgU2VydmljZSAke25hbWV9YCkpO1xuICAgIH1cblxuICAgIHJlcy5qc29uKHJlc3BvbnNlRm9ybWF0dGVyLnN1Y2Nlc3Moc3RhdHVzLCBgU2VydmljZSAke25hbWV9IHN0YXR1c2ApKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbihyZXNwb25zZUZvcm1hdHRlci5zZXJ2ZXJFcnJvcignU2VydmljZSBjaGVjayBmYWlsZWQnLCBlcnJvcikpO1xuICB9XG59KTtcblxuLyoqXG4gKiBHRVQgL2FwaS9kYXNoYm9hcmQvaW50ZWdyYXRpb25zXG4gKiBMaXN0IGFsbCBpbnRlZ3JhdGlvbnMgc3RhdHVzXG4gKi9cbnJvdXRlci5nZXQoJy9pbnRlZ3JhdGlvbnMnLCBvcHRpb25hbEF1dGgsIChyZXEsIHJlcykgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IGhlYWx0aCA9IHN5c3RlbURhc2hib2FyZC5nZXRTeXN0ZW1IZWFsdGgoKTtcbiAgICByZXMuanNvbihyZXNwb25zZUZvcm1hdHRlci5zdWNjZXNzKGhlYWx0aC5pbnRlZ3JhdGlvbnMsICdJbnRlZ3JhdGlvbnMgc3RhdHVzJykpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHJlc3BvbnNlRm9ybWF0dGVyLnNlcnZlckVycm9yKCdJbnRlZ3JhdGlvbnMgcmV0cmlldmFsIGZhaWxlZCcsIGVycm9yKSk7XG4gIH1cbn0pO1xuXG4vKipcbiAqIEdFVCAvYXBpL2Rhc2hib2FyZC9wZXJmb3JtYW5jZVxuICogUGVyZm9ybWFuY2UgbWV0cmljc1xuICovXG5yb3V0ZXIuZ2V0KCcvcGVyZm9ybWFuY2UnLCBvcHRpb25hbEF1dGgsIChyZXEsIHJlcykgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IGhlYWx0aCA9IHN5c3RlbURhc2hib2FyZC5nZXRTeXN0ZW1IZWFsdGgoKTtcbiAgICByZXMuanNvbihyZXNwb25zZUZvcm1hdHRlci5hbmFseXRpY3MoaGVhbHRoLnBlcmZvcm1hbmNlLCAnY3VycmVudCcsICdQZXJmb3JtYW5jZSBtZXRyaWNzJykpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHJlc3BvbnNlRm9ybWF0dGVyLnNlcnZlckVycm9yKCdQZXJmb3JtYW5jZSBtZXRyaWNzIGZhaWxlZCcsIGVycm9yKSk7XG4gIH1cbn0pO1xuXG4vKipcbiAqIEdFVCAvYXBpL2Rhc2hib2FyZC9hbGVydHNcbiAqIFN5c3RlbSBhbGVydHNcbiAqL1xucm91dGVyLmdldCgnL2FsZXJ0cycsIHJlcXVpcmVBZG1pbiwgKHJlcSwgcmVzKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3Qgc3VtbWFyeSA9IHN5c3RlbURhc2hib2FyZC5nZXREYXNoYm9hcmRTdW1tYXJ5KCk7XG4gICAgcmVzLmpzb24ocmVzcG9uc2VGb3JtYXR0ZXIubGlzdChzdW1tYXJ5LnJlY2VudEFsZXJ0cywgJ1JlY2VudCBhbGVydHMnKSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24ocmVzcG9uc2VGb3JtYXR0ZXIuc2VydmVyRXJyb3IoJ0FsZXJ0cyByZXRyaWV2YWwgZmFpbGVkJywgZXJyb3IpKTtcbiAgfVxufSk7XG5cbi8qKlxuICogR0VUIC9hcGkvZGFzaGJvYXJkL2V2ZW50c1xuICogU3lzdGVtIGV2ZW50cyBsb2dcbiAqL1xucm91dGVyLmdldCgnL2V2ZW50cycsIHJlcXVpcmVBZG1pbiwgKHJlcSwgcmVzKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3Qgc3VtbWFyeSA9IHN5c3RlbURhc2hib2FyZC5nZXREYXNoYm9hcmRTdW1tYXJ5KCk7XG4gICAgcmVzLmpzb24ocmVzcG9uc2VGb3JtYXR0ZXIubGlzdChzdW1tYXJ5LnJlY2VudEV2ZW50cywgJ1JlY2VudCBldmVudHMnKSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24ocmVzcG9uc2VGb3JtYXR0ZXIuc2VydmVyRXJyb3IoJ0V2ZW50cyByZXRyaWV2YWwgZmFpbGVkJywgZXJyb3IpKTtcbiAgfVxufSk7XG5cbi8qKlxuICogUE9TVCAvYXBpL2Rhc2hib2FyZC9hbGVydFxuICogQWRkIGN1c3RvbSBhbGVydFxuICovXG5yb3V0ZXIucG9zdCgnL2FsZXJ0JywgcmVxdWlyZUFkbWluLCAocmVxLCByZXMpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IHNldmVyaXR5LCBtZXNzYWdlLCBkZXRhaWxzIH0gPSByZXEuYm9keTtcblxuICAgIGlmICghc2V2ZXJpdHkgfHwgIW1lc3NhZ2UpIHtcbiAgICAgIHJldHVybiByZXNcbiAgICAgICAgLnN0YXR1cyg0MDApXG4gICAgICAgIC5qc29uKHJlc3BvbnNlRm9ybWF0dGVyLnZhbGlkYXRpb25FcnJvcihbJ3NldmVyaXR5IGFuZCBtZXNzYWdlIGFyZSByZXF1aXJlZCddKSk7XG4gICAgfVxuXG4gICAgY29uc3QgYWxlcnQgPSBzeXN0ZW1EYXNoYm9hcmQuYWRkQWxlcnQoc2V2ZXJpdHksIG1lc3NhZ2UsIGRldGFpbHMpO1xuICAgIHJlcy5zdGF0dXMoMjAxKS5qc29uKHJlc3BvbnNlRm9ybWF0dGVyLmNyZWF0ZWQoYWxlcnQsICdBbGVydCBjcmVhdGVkJykpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHJlc3BvbnNlRm9ybWF0dGVyLnNlcnZlckVycm9yKCdBbGVydCBjcmVhdGlvbiBmYWlsZWQnLCBlcnJvcikpO1xuICB9XG59KTtcblxuLyoqXG4gKiBHRVQgL2FwaS9kYXNoYm9hcmQvZXhwb3J0XG4gKiBFeHBvcnQgYWxsIG1ldHJpY3NcbiAqL1xucm91dGVyLmdldCgnL2V4cG9ydCcsIHJlcXVpcmVBZG1pbiwgKHJlcSwgcmVzKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgbWV0cmljcyA9IHN5c3RlbURhc2hib2FyZC5leHBvcnRNZXRyaWNzKCk7XG4gICAgcmVzLnNldEhlYWRlcignQ29udGVudC1UeXBlJywgJ2FwcGxpY2F0aW9uL2pzb24nKTtcbiAgICByZXMuc2V0SGVhZGVyKCdDb250ZW50LURpc3Bvc2l0aW9uJywgJ2F0dGFjaG1lbnQ7IGZpbGVuYW1lPW1ldHJpY3MuanNvbicpO1xuICAgIHJlcy5qc29uKG1ldHJpY3MpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHJlc3BvbnNlRm9ybWF0dGVyLnNlcnZlckVycm9yKCdFeHBvcnQgZmFpbGVkJywgZXJyb3IpKTtcbiAgfVxufSk7XG5cbi8qKlxuICogR0VUIC9hcGkvZGFzaGJvYXJkL2NvbmZpZ1xuICogR2V0IHN5c3RlbSBjb25maWd1cmF0aW9uIChhZG1pbiBvbmx5KVxuICovXG5yb3V0ZXIuZ2V0KCcvY29uZmlnJywgcmVxdWlyZUFkbWluLCAocmVxLCByZXMpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBjb25maWcgPSByZXF1aXJlKCcuLi9jb25maWcvcHJvZHVjdGlvbicpLmdldENvbmZpZygpO1xuICAgIGNvbnN0IHNhbml0aXplZCA9IHtcbiAgICAgIHNlcnZlcjogY29uZmlnLnNlcnZlcixcbiAgICAgIGZlYXR1cmVzOiBjb25maWcuZmVhdHVyZXMsXG4gICAgICBkZXBsb3ltZW50OiBjb25maWcuZGVwbG95bWVudCxcbiAgICAgIHZlcnNpb246IGNvbmZpZy5kZXBsb3ltZW50LnZlcnNpb24sXG4gICAgfTtcbiAgICByZXMuanNvbihyZXNwb25zZUZvcm1hdHRlci5zdWNjZXNzKHNhbml0aXplZCwgJ1N5c3RlbSBjb25maWd1cmF0aW9uJykpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHJlc3BvbnNlRm9ybWF0dGVyLnNlcnZlckVycm9yKCdDb25maWcgcmV0cmlldmFsIGZhaWxlZCcsIGVycm9yKSk7XG4gIH1cbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHJvdXRlcjtcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxNQUFNQSxPQUFPLEdBQUdDLE9BQU8sQ0FBQyxTQUFTLENBQUM7QUFDbEMsTUFBTUMsTUFBTSxHQUFHRixPQUFPLENBQUNHLE1BQU0sQ0FBQyxDQUFDO0FBQy9CLE1BQU1DLGVBQWUsR0FBR0gsT0FBTyxDQUFDLDZCQUE2QixDQUFDO0FBQzlELE1BQU1JLGlCQUFpQixHQUFHSixP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