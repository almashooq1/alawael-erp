{"version":3,"names":["express","require","router","Router","MigrationManager","CSVProcessor","migrationManager","post","req","res","sourceDB","targetDB","body","status","json","success","error","csvProcessor","logger","console","message","tables","options","Array","isArray","length","plan","createMigrationPlan","get","migrationPlan","summary","executeMigrationPlan","getExecutionSummary","log","getExecutionLog","totalEntries","delete","clearLog","csvPath","tableName","result","migrateFromCSV","exportTableToCSV","sampleSize","sampleCSV","query","info","getCSVInfo","expectedColumns","validateCSVStructure","valid","pauseMigration","resumeMigration","setMigrationManager","manager","module","exports"],"sources":["migrations.js"],"sourcesContent":["/**\r\n * Migration Routes\r\n * API endpoints for managing data migrations\r\n */\r\n\r\nconst express = require('express');\r\nconst router = express.Router();\r\nconst MigrationManager = require('../services/migration/MigrationManager');\r\nconst CSVProcessor = require('../services/migration/CSVProcessor');\r\n\r\n// Initialize migration manager (would be instantiated in app.js with actual DB connections)\r\nlet migrationManager = null;\r\n\r\n/**\r\n * Initialize migration manager\r\n * POST /api/migrations/initialize\r\n */\r\nrouter.post('/initialize', (req, res) => {\r\n  try {\r\n    const { sourceDB, targetDB } = req.body;\r\n\r\n    if (!sourceDB || !targetDB) {\r\n      return res.status(400).json({\r\n        success: false,\r\n        error: 'Source and target databases are required',\r\n      });\r\n    }\r\n\r\n    migrationManager = new MigrationManager({\r\n      sourceDB,\r\n      targetDB,\r\n      csvProcessor: new CSVProcessor(),\r\n      logger: console,\r\n    });\r\n\r\n    res.json({\r\n      success: true,\r\n      message: 'Migration manager initialized',\r\n    });\r\n  } catch (error) {\r\n    res.status(500).json({\r\n      success: false,\r\n      error: error.message,\r\n    });\r\n  }\r\n});\r\n\r\n/**\r\n * Create migration plan\r\n * POST /api/migrations/plan\r\n */\r\nrouter.post('/plan', (req, res) => {\r\n  try {\r\n    if (!migrationManager) {\r\n      return res.status(400).json({\r\n        success: false,\r\n        error: 'Migration manager not initialized. Call /initialize first.',\r\n      });\r\n    }\r\n\r\n    const { tables, options } = req.body;\r\n\r\n    if (!Array.isArray(tables) || tables.length === 0) {\r\n      return res.status(400).json({\r\n        success: false,\r\n        error: 'Tables array is required and cannot be empty',\r\n      });\r\n    }\r\n\r\n    const plan = migrationManager.createMigrationPlan(tables, options);\r\n\r\n    res.json({\r\n      success: true,\r\n      plan,\r\n    });\r\n  } catch (error) {\r\n    res.status(500).json({\r\n      success: false,\r\n      error: error.message,\r\n    });\r\n  }\r\n});\r\n\r\n/**\r\n * Get migration plan\r\n * GET /api/migrations/plan\r\n */\r\nrouter.get('/plan', (req, res) => {\r\n  try {\r\n    if (!migrationManager || !migrationManager.migrationPlan) {\r\n      return res.status(400).json({\r\n        success: false,\r\n        error: 'No migration plan created',\r\n      });\r\n    }\r\n\r\n    res.json({\r\n      success: true,\r\n      plan: migrationManager.migrationPlan,\r\n    });\r\n  } catch (error) {\r\n    res.status(500).json({\r\n      success: false,\r\n      error: error.message,\r\n    });\r\n  }\r\n});\r\n\r\n/**\r\n * Execute migration plan\r\n * POST /api/migrations/execute\r\n */\r\nrouter.post('/execute', async (req, res) => {\r\n  try {\r\n    if (!migrationManager) {\r\n      return res.status(400).json({\r\n        success: false,\r\n        error: 'Migration manager not initialized',\r\n      });\r\n    }\r\n\r\n    const options = req.body;\r\n    const summary = await migrationManager.executeMigrationPlan(options);\r\n\r\n    res.json({\r\n      success: true,\r\n      ...summary,\r\n    });\r\n  } catch (error) {\r\n    res.status(500).json({\r\n      success: false,\r\n      error: error.message,\r\n    });\r\n  }\r\n});\r\n\r\n/**\r\n * Get execution summary\r\n * GET /api/migrations/summary\r\n */\r\nrouter.get('/summary', (req, res) => {\r\n  try {\r\n    if (!migrationManager) {\r\n      return res.status(400).json({\r\n        success: false,\r\n        error: 'Migration manager not initialized',\r\n      });\r\n    }\r\n\r\n    const summary = migrationManager.getExecutionSummary();\r\n\r\n    res.json({\r\n      success: true,\r\n      ...summary,\r\n    });\r\n  } catch (error) {\r\n    res.status(500).json({\r\n      success: false,\r\n      error: error.message,\r\n    });\r\n  }\r\n});\r\n\r\n/**\r\n * Get migration log\r\n * GET /api/migrations/log\r\n */\r\nrouter.get('/log', (req, res) => {\r\n  try {\r\n    if (!migrationManager) {\r\n      return res.status(400).json({\r\n        success: false,\r\n        error: 'Migration manager not initialized',\r\n      });\r\n    }\r\n\r\n    const log = migrationManager.getExecutionLog();\r\n\r\n    res.json({\r\n      success: true,\r\n      log,\r\n      totalEntries: log.length,\r\n    });\r\n  } catch (error) {\r\n    res.status(500).json({\r\n      success: false,\r\n      error: error.message,\r\n    });\r\n  }\r\n});\r\n\r\n/**\r\n * Clear migration log\r\n * DELETE /api/migrations/log\r\n */\r\nrouter.delete('/log', (req, res) => {\r\n  try {\r\n    if (!migrationManager) {\r\n      return res.status(400).json({\r\n        success: false,\r\n        error: 'Migration manager not initialized',\r\n      });\r\n    }\r\n\r\n    migrationManager.clearLog();\r\n\r\n    res.json({\r\n      success: true,\r\n      message: 'Migration log cleared',\r\n    });\r\n  } catch (error) {\r\n    res.status(500).json({\r\n      success: false,\r\n      error: error.message,\r\n    });\r\n  }\r\n});\r\n\r\n/**\r\n * Import CSV and migrate to database\r\n * POST /api/migrations/import-csv\r\n */\r\nrouter.post('/import-csv', async (req, res) => {\r\n  try {\r\n    if (!migrationManager) {\r\n      return res.status(400).json({\r\n        success: false,\r\n        error: 'Migration manager not initialized',\r\n      });\r\n    }\r\n\r\n    const { csvPath, tableName, options } = req.body;\r\n\r\n    if (!csvPath || !tableName) {\r\n      return res.status(400).json({\r\n        success: false,\r\n        error: 'CSV path and table name are required',\r\n      });\r\n    }\r\n\r\n    const result = await migrationManager.migrateFromCSV(csvPath, tableName, options);\r\n\r\n    res.json({\r\n      success: result.status === 'completed',\r\n      ...result,\r\n    });\r\n  } catch (error) {\r\n    res.status(500).json({\r\n      success: false,\r\n      error: error.message,\r\n    });\r\n  }\r\n});\r\n\r\n/**\r\n * Export table to CSV\r\n * POST /api/migrations/export-csv\r\n */\r\nrouter.post('/export-csv', async (req, res) => {\r\n  try {\r\n    if (!migrationManager) {\r\n      return res.status(400).json({\r\n        success: false,\r\n        error: 'Migration manager not initialized',\r\n      });\r\n    }\r\n\r\n    const { tableName, csvPath, options } = req.body;\r\n\r\n    if (!tableName || !csvPath) {\r\n      return res.status(400).json({\r\n        success: false,\r\n        error: 'Table name and CSV path are required',\r\n      });\r\n    }\r\n\r\n    const result = await migrationManager.exportTableToCSV(tableName, csvPath, options);\r\n\r\n    res.json({\r\n      success: result.status === 'completed',\r\n      ...result,\r\n    });\r\n  } catch (error) {\r\n    res.status(500).json({\r\n      success: false,\r\n      error: error.message,\r\n    });\r\n  }\r\n});\r\n\r\n/**\r\n * Sample CSV file\r\n * POST /api/migrations/sample-csv\r\n */\r\nrouter.post('/sample-csv', async (req, res) => {\r\n  try {\r\n    const { csvPath, sampleSize } = req.body;\r\n\r\n    if (!csvPath) {\r\n      return res.status(400).json({\r\n        success: false,\r\n        error: 'CSV path is required',\r\n      });\r\n    }\r\n\r\n    const csvProcessor = new CSVProcessor();\r\n    const result = await csvProcessor.sampleCSV(csvPath, sampleSize || 10);\r\n\r\n    res.json({\r\n      success: true,\r\n      ...result,\r\n    });\r\n  } catch (error) {\r\n    res.status(500).json({\r\n      success: false,\r\n      error: error.message,\r\n    });\r\n  }\r\n});\r\n\r\n/**\r\n * Get CSV info\r\n * GET /api/migrations/csv-info\r\n */\r\nrouter.get('/csv-info', async (req, res) => {\r\n  try {\r\n    const { csvPath } = req.query;\r\n\r\n    if (!csvPath) {\r\n      return res.status(400).json({\r\n        success: false,\r\n        error: 'CSV path is required as query parameter',\r\n      });\r\n    }\r\n\r\n    const csvProcessor = new CSVProcessor();\r\n    const info = await csvProcessor.getCSVInfo(csvPath);\r\n\r\n    res.json({\r\n      success: true,\r\n      info,\r\n    });\r\n  } catch (error) {\r\n    res.status(500).json({\r\n      success: false,\r\n      error: error.message,\r\n    });\r\n  }\r\n});\r\n\r\n/**\r\n * Validate CSV structure\r\n * POST /api/migrations/validate-csv\r\n */\r\nrouter.post('/validate-csv', async (req, res) => {\r\n  try {\r\n    const { csvPath, expectedColumns } = req.body;\r\n\r\n    if (!csvPath) {\r\n      return res.status(400).json({\r\n        success: false,\r\n        error: 'CSV path is required',\r\n      });\r\n    }\r\n\r\n    const csvProcessor = new CSVProcessor();\r\n    const result = await csvProcessor.validateCSVStructure(csvPath, expectedColumns);\r\n\r\n    res.json({\r\n      success: result.valid,\r\n      ...result,\r\n    });\r\n  } catch (error) {\r\n    res.status(500).json({\r\n      success: false,\r\n      error: error.message,\r\n    });\r\n  }\r\n});\r\n\r\n/**\r\n * Pause migration\r\n * POST /api/migrations/pause\r\n */\r\nrouter.post('/pause', (req, res) => {\r\n  try {\r\n    if (!migrationManager) {\r\n      return res.status(400).json({\r\n        success: false,\r\n        error: 'Migration manager not initialized',\r\n      });\r\n    }\r\n\r\n    const result = migrationManager.pauseMigration();\r\n\r\n    res.json({\r\n      success: true,\r\n      ...result,\r\n    });\r\n  } catch (error) {\r\n    res.status(500).json({\r\n      success: false,\r\n      error: error.message,\r\n    });\r\n  }\r\n});\r\n\r\n/**\r\n * Resume migration\r\n * POST /api/migrations/resume\r\n */\r\nrouter.post('/resume', (req, res) => {\r\n  try {\r\n    if (!migrationManager) {\r\n      return res.status(400).json({\r\n        success: false,\r\n        error: 'Migration manager not initialized',\r\n      });\r\n    }\r\n\r\n    const result = migrationManager.resumeMigration();\r\n\r\n    res.json({\r\n      success: true,\r\n      ...result,\r\n    });\r\n  } catch (error) {\r\n    res.status(500).json({\r\n      success: false,\r\n      error: error.message,\r\n    });\r\n  }\r\n});\r\n\r\n/**\r\n * Set migration manager instance\r\n * Called during app initialization\r\n */\r\nfunction setMigrationManager(manager) {\r\n  migrationManager = manager;\r\n}\r\n\r\nmodule.exports = router;\r\nmodule.exports.setMigrationManager = setMigrationManager;\r\n"],"mappings":"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","ignoreList":[]}