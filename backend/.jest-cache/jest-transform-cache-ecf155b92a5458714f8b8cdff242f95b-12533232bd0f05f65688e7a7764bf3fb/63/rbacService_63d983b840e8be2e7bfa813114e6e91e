990ec0933cae9351d87a8aa978b13821
// RBAC (Role-Based Access Control) Service
// خدمة التحكم بالوصول بناءً على الأدوار

class RBACService {
  // جميع الأدوار المتاحة
  static roles = {
    admin: {
      name: 'مسؤول',
      description: 'وصول كامل للنظام',
      permissions: ['all']
    },
    manager: {
      name: 'مدير',
      description: 'إدارة الفريق والموارد',
      permissions: ['create', 'read', 'update', 'delete', 'export', 'manage_team']
    },
    user: {
      name: 'مستخدم',
      description: 'وصول أساسي للنظام',
      permissions: ['read', 'create_own', 'update_own']
    },
    viewer: {
      name: 'عارض',
      description: 'عرض البيانات فقط',
      permissions: ['read']
    }
  };

  // التحقق من الصلاحية
  static hasPermission(userRole, requiredPermission) {
    const role = this.roles[userRole];
    if (!role) return false;

    // مسؤول يملك جميع الصلاحيات
    if (role.permissions.includes('all')) return true;

    // التحقق من الصلاحية المطلوبة
    return role.permissions.includes(requiredPermission);
  }

  // التحقق من وجود دور معين
  static hasRole(userRole, requiredRole) {
    // يمكن إضافة هرمية الأدوار هنا
    const roleHierarchy = {
      admin: ['admin', 'manager', 'user', 'viewer'],
      manager: ['manager', 'user', 'viewer'],
      user: ['user', 'viewer'],
      viewer: ['viewer']
    };
    const userRoles = roleHierarchy[userRole] || [];
    return userRoles.includes(requiredRole);
  }

  // الحصول على جميع الأدوار
  static getAllRoles() {
    return {
      success: true,
      roles: Object.entries(this.roles).map(([key, value]) => ({
        id: key,
        ...value,
        permissionCount: value.permissions.length
      })),
      totalRoles: Object.keys(this.roles).length,
      timestamp: new Date().toISOString()
    };
  }

  // الحصول على تفاصيل الدور
  static getRoleDetails(roleId) {
    const role = this.roles[roleId];
    if (!role) {
      return {
        success: false,
        message: 'Role not found'
      };
    }
    return {
      success: true,
      role: {
        id: roleId,
        ...role,
        permissionCount: role.permissions.length,
        usersCount: Math.floor(Math.random() * 50) + 1
      },
      timestamp: new Date().toISOString()
    };
  }

  // إضافة دور جديد
  static createRole(roleData) {
    const roleId = roleData.id || `role_${Date.now()}`;
    this.roles[roleId] = {
      name: roleData.name,
      description: roleData.description,
      permissions: roleData.permissions || []
    };
    return {
      success: true,
      role: {
        id: roleId,
        ...this.roles[roleId]
      },
      message: 'Role created successfully'
    };
  }

  // تحديث الدور
  static updateRole(roleId, updates) {
    if (!this.roles[roleId]) {
      return {
        success: false,
        message: 'Role not found'
      };
    }
    this.roles[roleId] = {
      ...this.roles[roleId],
      ...updates
    };
    return {
      success: true,
      role: {
        id: roleId,
        ...this.roles[roleId]
      },
      message: 'Role updated successfully'
    };
  }

  // حذف الدور
  static deleteRole(roleId) {
    if (roleId === 'admin') {
      return {
        success: false,
        message: 'Cannot delete admin role'
      };
    }
    delete this.roles[roleId];
    return {
      success: true,
      message: 'Role deleted successfully'
    };
  }

  // الحصول على الصلاحيات المتاحة
  static getAvailablePermissions() {
    const allPermissions = ['create', 'read', 'update', 'delete', 'create_own', 'update_own', 'delete_own', 'export', 'import', 'manage_users', 'manage_roles', 'manage_team', 'view_reports', 'manage_settings', 'manage_integrations', 'view_analytics', 'manage_content'];
    return {
      success: true,
      permissions: allPermissions.map(p => ({
        id: p,
        name: p.replace(/_/g, ' ').toUpperCase(),
        description: `Permission to ${p.replace(/_/g, ' ')}`
      })),
      totalPermissions: allPermissions.length,
      timestamp: new Date().toISOString()
    };
  }

  // إضافة صلاحية للدور
  static addPermissionToRole(roleId, permission) {
    if (!this.roles[roleId]) {
      return {
        success: false,
        message: 'Role not found'
      };
    }
    if (!this.roles[roleId].permissions.includes(permission)) {
      this.roles[roleId].permissions.push(permission);
    }
    return {
      success: true,
      message: 'Permission added successfully',
      role: {
        id: roleId,
        ...this.roles[roleId]
      }
    };
  }

  // إزالة صلاحية من الدور
  static removePermissionFromRole(roleId, permission) {
    if (!this.roles[roleId]) {
      return {
        success: false,
        message: 'Role not found'
      };
    }
    this.roles[roleId].permissions = this.roles[roleId].permissions.filter(p => p !== permission);
    return {
      success: true,
      message: 'Permission removed successfully',
      role: {
        id: roleId,
        ...this.roles[roleId]
      }
    };
  }

  // فحص وصول المستخدم
  static checkAccess(userId, resource, action) {
    // محاكاة فحص الوصول
    const userRole = 'admin'; // يمكن جلبها من قاعدة البيانات

    return {
      success: true,
      userId: userId,
      resource: resource,
      action: action,
      access: this.hasPermission(userRole, action),
      reason: this.hasPermission(userRole, action) ? 'Permission granted' : 'Permission denied',
      timestamp: new Date().toISOString()
    };
  }

  // إحصائيات الأدوار والصلاحيات
  static getRBACStatistics() {
    return {
      success: true,
      statistics: {
        totalRoles: Object.keys(this.roles).length,
        totalPermissions: 17,
        usersByRole: {
          admin: 5,
          manager: 18,
          user: 127,
          viewer: 6
        },
        permissionsUsage: {
          read: 156,
          create: 89,
          update: 76,
          delete: 23,
          export: 45,
          import: 12
        },
        rolesWithoutUsers: [],
        unusedPermissions: []
      },
      timestamp: new Date().toISOString()
    };
  }

  // تدقيق الوصول
  static auditAccess(filters = {}) {
    return {
      success: true,
      auditLog: [{
        id: 'AUDIT_001',
        userId: 'USER_001',
        userRole: 'admin',
        action: 'view_report',
        resource: 'Sales Report',
        result: 'SUCCESS',
        timestamp: new Date(Date.now() - 5 * 60000).toISOString()
      }, {
        id: 'AUDIT_002',
        userId: 'USER_003',
        userRole: 'user',
        action: 'delete_document',
        resource: 'Document #123',
        result: 'DENIED',
        reason: 'Permission denied',
        timestamp: new Date(Date.now() - 15 * 60000).toISOString()
      }],
      totalAudits: 2,
      timestamp: new Date().toISOString()
    };
  }

  // تصدير تكوين RBAC
  static exportRBACConfig() {
    return {
      success: true,
      file: {
        name: `rbac_config_${new Date().toISOString().split('T')[0]}.json`,
        size: '12 KB',
        downloadUrl: `https://example.com/exports/rbac_${Date.now()}.json`,
        expiresIn: '24h'
      },
      timestamp: new Date().toISOString()
    };
  }

  // استيراد تكوين RBAC
  static importRBACConfig(file) {
    return {
      success: true,
      message: 'RBAC configuration imported successfully',
      rolesImported: 8,
      permissionsUpdated: 15,
      timestamp: new Date().toISOString()
    };
  }
}
module.exports = RBACService;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJSQkFDU2VydmljZSIsInJvbGVzIiwiYWRtaW4iLCJuYW1lIiwiZGVzY3JpcHRpb24iLCJwZXJtaXNzaW9ucyIsIm1hbmFnZXIiLCJ1c2VyIiwidmlld2VyIiwiaGFzUGVybWlzc2lvbiIsInVzZXJSb2xlIiwicmVxdWlyZWRQZXJtaXNzaW9uIiwicm9sZSIsImluY2x1ZGVzIiwiaGFzUm9sZSIsInJlcXVpcmVkUm9sZSIsInJvbGVIaWVyYXJjaHkiLCJ1c2VyUm9sZXMiLCJnZXRBbGxSb2xlcyIsInN1Y2Nlc3MiLCJPYmplY3QiLCJlbnRyaWVzIiwibWFwIiwia2V5IiwidmFsdWUiLCJpZCIsInBlcm1pc3Npb25Db3VudCIsImxlbmd0aCIsInRvdGFsUm9sZXMiLCJrZXlzIiwidGltZXN0YW1wIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwiZ2V0Um9sZURldGFpbHMiLCJyb2xlSWQiLCJtZXNzYWdlIiwidXNlcnNDb3VudCIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsImNyZWF0ZVJvbGUiLCJyb2xlRGF0YSIsIm5vdyIsInVwZGF0ZVJvbGUiLCJ1cGRhdGVzIiwiZGVsZXRlUm9sZSIsImdldEF2YWlsYWJsZVBlcm1pc3Npb25zIiwiYWxsUGVybWlzc2lvbnMiLCJwIiwicmVwbGFjZSIsInRvVXBwZXJDYXNlIiwidG90YWxQZXJtaXNzaW9ucyIsImFkZFBlcm1pc3Npb25Ub1JvbGUiLCJwZXJtaXNzaW9uIiwicHVzaCIsInJlbW92ZVBlcm1pc3Npb25Gcm9tUm9sZSIsImZpbHRlciIsImNoZWNrQWNjZXNzIiwidXNlcklkIiwicmVzb3VyY2UiLCJhY3Rpb24iLCJhY2Nlc3MiLCJyZWFzb24iLCJnZXRSQkFDU3RhdGlzdGljcyIsInN0YXRpc3RpY3MiLCJ1c2Vyc0J5Um9sZSIsInBlcm1pc3Npb25zVXNhZ2UiLCJyZWFkIiwiY3JlYXRlIiwidXBkYXRlIiwiZGVsZXRlIiwiZXhwb3J0IiwiaW1wb3J0Iiwicm9sZXNXaXRob3V0VXNlcnMiLCJ1bnVzZWRQZXJtaXNzaW9ucyIsImF1ZGl0QWNjZXNzIiwiZmlsdGVycyIsImF1ZGl0TG9nIiwicmVzdWx0IiwidG90YWxBdWRpdHMiLCJleHBvcnRSQkFDQ29uZmlnIiwiZmlsZSIsInNwbGl0Iiwic2l6ZSIsImRvd25sb2FkVXJsIiwiZXhwaXJlc0luIiwiaW1wb3J0UkJBQ0NvbmZpZyIsInJvbGVzSW1wb3J0ZWQiLCJwZXJtaXNzaW9uc1VwZGF0ZWQiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsicmJhY1NlcnZpY2UuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gUkJBQyAoUm9sZS1CYXNlZCBBY2Nlc3MgQ29udHJvbCkgU2VydmljZVxyXG4vLyDYrtiv2YXYqSDYp9mE2KrYrdmD2YUg2KjYp9mE2YjYtdmI2YQg2KjZhtin2KHZiyDYudmE2Ykg2KfZhNij2K/ZiNin2LFcclxuXHJcbmNsYXNzIFJCQUNTZXJ2aWNlIHtcclxuICAvLyDYrNmF2YrYuSDYp9mE2KPYr9mI2KfYsSDYp9mE2YXYqtin2K3YqVxyXG4gIHN0YXRpYyByb2xlcyA9IHtcclxuICAgIGFkbWluOiB7XHJcbiAgICAgIG5hbWU6ICfZhdiz2KTZiNmEJyxcclxuICAgICAgZGVzY3JpcHRpb246ICfZiNi12YjZhCDZg9in2YXZhCDZhNmE2YbYuNin2YUnLFxyXG4gICAgICBwZXJtaXNzaW9uczogWydhbGwnXSxcclxuICAgIH0sXHJcbiAgICBtYW5hZ2VyOiB7XHJcbiAgICAgIG5hbWU6ICfZhdiv2YrYsScsXHJcbiAgICAgIGRlc2NyaXB0aW9uOiAn2KXYr9in2LHYqSDYp9mE2YHYsdmK2YIg2YjYp9mE2YXZiNin2LHYrycsXHJcbiAgICAgIHBlcm1pc3Npb25zOiBbJ2NyZWF0ZScsICdyZWFkJywgJ3VwZGF0ZScsICdkZWxldGUnLCAnZXhwb3J0JywgJ21hbmFnZV90ZWFtJ10sXHJcbiAgICB9LFxyXG4gICAgdXNlcjoge1xyXG4gICAgICBuYW1lOiAn2YXYs9iq2K7Yr9mFJyxcclxuICAgICAgZGVzY3JpcHRpb246ICfZiNi12YjZhCDYo9iz2KfYs9mKINmE2YTZhti42KfZhScsXHJcbiAgICAgIHBlcm1pc3Npb25zOiBbJ3JlYWQnLCAnY3JlYXRlX293bicsICd1cGRhdGVfb3duJ10sXHJcbiAgICB9LFxyXG4gICAgdmlld2VyOiB7XHJcbiAgICAgIG5hbWU6ICfYudin2LHYticsXHJcbiAgICAgIGRlc2NyaXB0aW9uOiAn2LnYsdi2INin2YTYqNmK2KfZhtin2Kog2YHZgti3JyxcclxuICAgICAgcGVybWlzc2lvbnM6IFsncmVhZCddLFxyXG4gICAgfSxcclxuICB9O1xyXG5cclxuICAvLyDYp9mE2KrYrdmC2YIg2YXZhiDYp9mE2LXZhNin2K3ZitipXHJcbiAgc3RhdGljIGhhc1Blcm1pc3Npb24odXNlclJvbGUsIHJlcXVpcmVkUGVybWlzc2lvbikge1xyXG4gICAgY29uc3Qgcm9sZSA9IHRoaXMucm9sZXNbdXNlclJvbGVdO1xyXG4gICAgaWYgKCFyb2xlKSByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgLy8g2YXYs9ik2YjZhCDZitmF2YTZgyDYrNmF2YrYuSDYp9mE2LXZhNin2K3Zitin2KpcclxuICAgIGlmIChyb2xlLnBlcm1pc3Npb25zLmluY2x1ZGVzKCdhbGwnKSkgcmV0dXJuIHRydWU7XHJcblxyXG4gICAgLy8g2KfZhNiq2K3ZgtmCINmF2YYg2KfZhNi12YTYp9it2YrYqSDYp9mE2YXYt9mE2YjYqNipXHJcbiAgICByZXR1cm4gcm9sZS5wZXJtaXNzaW9ucy5pbmNsdWRlcyhyZXF1aXJlZFBlcm1pc3Npb24pO1xyXG4gIH1cclxuXHJcbiAgLy8g2KfZhNiq2K3ZgtmCINmF2YYg2YjYrNmI2K8g2K/ZiNixINmF2LnZitmGXHJcbiAgc3RhdGljIGhhc1JvbGUodXNlclJvbGUsIHJlcXVpcmVkUm9sZSkge1xyXG4gICAgLy8g2YrZhdmD2YYg2KXYttin2YHYqSDZh9ix2YXZitipINin2YTYo9iv2YjYp9ixINmH2YbYp1xyXG4gICAgY29uc3Qgcm9sZUhpZXJhcmNoeSA9IHtcclxuICAgICAgYWRtaW46IFsnYWRtaW4nLCAnbWFuYWdlcicsICd1c2VyJywgJ3ZpZXdlciddLFxyXG4gICAgICBtYW5hZ2VyOiBbJ21hbmFnZXInLCAndXNlcicsICd2aWV3ZXInXSxcclxuICAgICAgdXNlcjogWyd1c2VyJywgJ3ZpZXdlciddLFxyXG4gICAgICB2aWV3ZXI6IFsndmlld2VyJ10sXHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IHVzZXJSb2xlcyA9IHJvbGVIaWVyYXJjaHlbdXNlclJvbGVdIHx8IFtdO1xyXG4gICAgcmV0dXJuIHVzZXJSb2xlcy5pbmNsdWRlcyhyZXF1aXJlZFJvbGUpO1xyXG4gIH1cclxuXHJcbiAgLy8g2KfZhNit2LXZiNmEINi52YTZiSDYrNmF2YrYuSDYp9mE2KPYr9mI2KfYsVxyXG4gIHN0YXRpYyBnZXRBbGxSb2xlcygpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgIHJvbGVzOiBPYmplY3QuZW50cmllcyh0aGlzLnJvbGVzKS5tYXAoKFtrZXksIHZhbHVlXSkgPT4gKHtcclxuICAgICAgICBpZDoga2V5LFxyXG4gICAgICAgIC4uLnZhbHVlLFxyXG4gICAgICAgIHBlcm1pc3Npb25Db3VudDogdmFsdWUucGVybWlzc2lvbnMubGVuZ3RoLFxyXG4gICAgICB9KSksXHJcbiAgICAgIHRvdGFsUm9sZXM6IE9iamVjdC5rZXlzKHRoaXMucm9sZXMpLmxlbmd0aCxcclxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgLy8g2KfZhNit2LXZiNmEINi52YTZiSDYqtmB2KfYtdmK2YQg2KfZhNiv2YjYsVxyXG4gIHN0YXRpYyBnZXRSb2xlRGV0YWlscyhyb2xlSWQpIHtcclxuICAgIGNvbnN0IHJvbGUgPSB0aGlzLnJvbGVzW3JvbGVJZF07XHJcbiAgICBpZiAoIXJvbGUpIHtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBtZXNzYWdlOiAnUm9sZSBub3QgZm91bmQnLFxyXG4gICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgIHJvbGU6IHtcclxuICAgICAgICBpZDogcm9sZUlkLFxyXG4gICAgICAgIC4uLnJvbGUsXHJcbiAgICAgICAgcGVybWlzc2lvbkNvdW50OiByb2xlLnBlcm1pc3Npb25zLmxlbmd0aCxcclxuICAgICAgICB1c2Vyc0NvdW50OiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA1MCkgKyAxLFxyXG4gICAgICB9LFxyXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICAvLyDYpdi22KfZgdipINiv2YjYsSDYrNiv2YrYr1xyXG4gIHN0YXRpYyBjcmVhdGVSb2xlKHJvbGVEYXRhKSB7XHJcbiAgICBjb25zdCByb2xlSWQgPSByb2xlRGF0YS5pZCB8fCBgcm9sZV8ke0RhdGUubm93KCl9YDtcclxuICAgIHRoaXMucm9sZXNbcm9sZUlkXSA9IHtcclxuICAgICAgbmFtZTogcm9sZURhdGEubmFtZSxcclxuICAgICAgZGVzY3JpcHRpb246IHJvbGVEYXRhLmRlc2NyaXB0aW9uLFxyXG4gICAgICBwZXJtaXNzaW9uczogcm9sZURhdGEucGVybWlzc2lvbnMgfHwgW10sXHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgIHJvbGU6IHtcclxuICAgICAgICBpZDogcm9sZUlkLFxyXG4gICAgICAgIC4uLnRoaXMucm9sZXNbcm9sZUlkXSxcclxuICAgICAgfSxcclxuICAgICAgbWVzc2FnZTogJ1JvbGUgY3JlYXRlZCBzdWNjZXNzZnVsbHknLFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIC8vINiq2K3Yr9mK2Ksg2KfZhNiv2YjYsVxyXG4gIHN0YXRpYyB1cGRhdGVSb2xlKHJvbGVJZCwgdXBkYXRlcykge1xyXG4gICAgaWYgKCF0aGlzLnJvbGVzW3JvbGVJZF0pIHtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBtZXNzYWdlOiAnUm9sZSBub3QgZm91bmQnLFxyXG4gICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMucm9sZXNbcm9sZUlkXSA9IHtcclxuICAgICAgLi4udGhpcy5yb2xlc1tyb2xlSWRdLFxyXG4gICAgICAuLi51cGRhdGVzLFxyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICByb2xlOiB7XHJcbiAgICAgICAgaWQ6IHJvbGVJZCxcclxuICAgICAgICAuLi50aGlzLnJvbGVzW3JvbGVJZF0sXHJcbiAgICAgIH0sXHJcbiAgICAgIG1lc3NhZ2U6ICdSb2xlIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5JyxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICAvLyDYrdiw2YEg2KfZhNiv2YjYsVxyXG4gIHN0YXRpYyBkZWxldGVSb2xlKHJvbGVJZCkge1xyXG4gICAgaWYgKHJvbGVJZCA9PT0gJ2FkbWluJykge1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIG1lc3NhZ2U6ICdDYW5ub3QgZGVsZXRlIGFkbWluIHJvbGUnLFxyXG4gICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGRlbGV0ZSB0aGlzLnJvbGVzW3JvbGVJZF07XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICBtZXNzYWdlOiAnUm9sZSBkZWxldGVkIHN1Y2Nlc3NmdWxseScsXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgLy8g2KfZhNit2LXZiNmEINi52YTZiSDYp9mE2LXZhNin2K3Zitin2Kog2KfZhNmF2KrYp9it2KlcclxuICBzdGF0aWMgZ2V0QXZhaWxhYmxlUGVybWlzc2lvbnMoKSB7XHJcbiAgICBjb25zdCBhbGxQZXJtaXNzaW9ucyA9IFtcclxuICAgICAgJ2NyZWF0ZScsXHJcbiAgICAgICdyZWFkJyxcclxuICAgICAgJ3VwZGF0ZScsXHJcbiAgICAgICdkZWxldGUnLFxyXG4gICAgICAnY3JlYXRlX293bicsXHJcbiAgICAgICd1cGRhdGVfb3duJyxcclxuICAgICAgJ2RlbGV0ZV9vd24nLFxyXG4gICAgICAnZXhwb3J0JyxcclxuICAgICAgJ2ltcG9ydCcsXHJcbiAgICAgICdtYW5hZ2VfdXNlcnMnLFxyXG4gICAgICAnbWFuYWdlX3JvbGVzJyxcclxuICAgICAgJ21hbmFnZV90ZWFtJyxcclxuICAgICAgJ3ZpZXdfcmVwb3J0cycsXHJcbiAgICAgICdtYW5hZ2Vfc2V0dGluZ3MnLFxyXG4gICAgICAnbWFuYWdlX2ludGVncmF0aW9ucycsXHJcbiAgICAgICd2aWV3X2FuYWx5dGljcycsXHJcbiAgICAgICdtYW5hZ2VfY29udGVudCcsXHJcbiAgICBdO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgIHBlcm1pc3Npb25zOiBhbGxQZXJtaXNzaW9ucy5tYXAocCA9PiAoe1xyXG4gICAgICAgIGlkOiBwLFxyXG4gICAgICAgIG5hbWU6IHAucmVwbGFjZSgvXy9nLCAnICcpLnRvVXBwZXJDYXNlKCksXHJcbiAgICAgICAgZGVzY3JpcHRpb246IGBQZXJtaXNzaW9uIHRvICR7cC5yZXBsYWNlKC9fL2csICcgJyl9YCxcclxuICAgICAgfSkpLFxyXG4gICAgICB0b3RhbFBlcm1pc3Npb25zOiBhbGxQZXJtaXNzaW9ucy5sZW5ndGgsXHJcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIC8vINil2LbYp9mB2Kkg2LXZhNin2K3ZitipINmE2YTYr9mI2LFcclxuICBzdGF0aWMgYWRkUGVybWlzc2lvblRvUm9sZShyb2xlSWQsIHBlcm1pc3Npb24pIHtcclxuICAgIGlmICghdGhpcy5yb2xlc1tyb2xlSWRdKSB7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgbWVzc2FnZTogJ1JvbGUgbm90IGZvdW5kJyxcclxuICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIXRoaXMucm9sZXNbcm9sZUlkXS5wZXJtaXNzaW9ucy5pbmNsdWRlcyhwZXJtaXNzaW9uKSkge1xyXG4gICAgICB0aGlzLnJvbGVzW3JvbGVJZF0ucGVybWlzc2lvbnMucHVzaChwZXJtaXNzaW9uKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICBtZXNzYWdlOiAnUGVybWlzc2lvbiBhZGRlZCBzdWNjZXNzZnVsbHknLFxyXG4gICAgICByb2xlOiB7XHJcbiAgICAgICAgaWQ6IHJvbGVJZCxcclxuICAgICAgICAuLi50aGlzLnJvbGVzW3JvbGVJZF0sXHJcbiAgICAgIH0sXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgLy8g2KXYstin2YTYqSDYtdmE2KfYrdmK2Kkg2YXZhiDYp9mE2K/ZiNixXHJcbiAgc3RhdGljIHJlbW92ZVBlcm1pc3Npb25Gcm9tUm9sZShyb2xlSWQsIHBlcm1pc3Npb24pIHtcclxuICAgIGlmICghdGhpcy5yb2xlc1tyb2xlSWRdKSB7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgbWVzc2FnZTogJ1JvbGUgbm90IGZvdW5kJyxcclxuICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnJvbGVzW3JvbGVJZF0ucGVybWlzc2lvbnMgPSB0aGlzLnJvbGVzW3JvbGVJZF0ucGVybWlzc2lvbnMuZmlsdGVyKHAgPT4gcCAhPT0gcGVybWlzc2lvbik7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgbWVzc2FnZTogJ1Blcm1pc3Npb24gcmVtb3ZlZCBzdWNjZXNzZnVsbHknLFxyXG4gICAgICByb2xlOiB7XHJcbiAgICAgICAgaWQ6IHJvbGVJZCxcclxuICAgICAgICAuLi50aGlzLnJvbGVzW3JvbGVJZF0sXHJcbiAgICAgIH0sXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgLy8g2YHYrdi1INmI2LXZiNmEINin2YTZhdiz2KrYrtiv2YVcclxuICBzdGF0aWMgY2hlY2tBY2Nlc3ModXNlcklkLCByZXNvdXJjZSwgYWN0aW9uKSB7XHJcbiAgICAvLyDZhdit2KfZg9in2Kkg2YHYrdi1INin2YTZiNi12YjZhFxyXG4gICAgY29uc3QgdXNlclJvbGUgPSAnYWRtaW4nOyAvLyDZitmF2YPZhiDYrNmE2KjZh9inINmF2YYg2YLYp9i52K/YqSDYp9mE2KjZitin2YbYp9iqXHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgdXNlcklkOiB1c2VySWQsXHJcbiAgICAgIHJlc291cmNlOiByZXNvdXJjZSxcclxuICAgICAgYWN0aW9uOiBhY3Rpb24sXHJcbiAgICAgIGFjY2VzczogdGhpcy5oYXNQZXJtaXNzaW9uKHVzZXJSb2xlLCBhY3Rpb24pLFxyXG4gICAgICByZWFzb246IHRoaXMuaGFzUGVybWlzc2lvbih1c2VyUm9sZSwgYWN0aW9uKSA/ICdQZXJtaXNzaW9uIGdyYW50ZWQnIDogJ1Blcm1pc3Npb24gZGVuaWVkJyxcclxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgLy8g2KXYrdi12KfYptmK2KfYqiDYp9mE2KPYr9mI2KfYsSDZiNin2YTYtdmE2KfYrdmK2KfYqlxyXG4gIHN0YXRpYyBnZXRSQkFDU3RhdGlzdGljcygpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgIHN0YXRpc3RpY3M6IHtcclxuICAgICAgICB0b3RhbFJvbGVzOiBPYmplY3Qua2V5cyh0aGlzLnJvbGVzKS5sZW5ndGgsXHJcbiAgICAgICAgdG90YWxQZXJtaXNzaW9uczogMTcsXHJcbiAgICAgICAgdXNlcnNCeVJvbGU6IHtcclxuICAgICAgICAgIGFkbWluOiA1LFxyXG4gICAgICAgICAgbWFuYWdlcjogMTgsXHJcbiAgICAgICAgICB1c2VyOiAxMjcsXHJcbiAgICAgICAgICB2aWV3ZXI6IDYsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBwZXJtaXNzaW9uc1VzYWdlOiB7XHJcbiAgICAgICAgICByZWFkOiAxNTYsXHJcbiAgICAgICAgICBjcmVhdGU6IDg5LFxyXG4gICAgICAgICAgdXBkYXRlOiA3NixcclxuICAgICAgICAgIGRlbGV0ZTogMjMsXHJcbiAgICAgICAgICBleHBvcnQ6IDQ1LFxyXG4gICAgICAgICAgaW1wb3J0OiAxMixcclxuICAgICAgICB9LFxyXG4gICAgICAgIHJvbGVzV2l0aG91dFVzZXJzOiBbXSxcclxuICAgICAgICB1bnVzZWRQZXJtaXNzaW9uczogW10sXHJcbiAgICAgIH0sXHJcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIC8vINiq2K/ZgtmK2YIg2KfZhNmI2LXZiNmEXHJcbiAgc3RhdGljIGF1ZGl0QWNjZXNzKGZpbHRlcnMgPSB7fSkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgYXVkaXRMb2c6IFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICBpZDogJ0FVRElUXzAwMScsXHJcbiAgICAgICAgICB1c2VySWQ6ICdVU0VSXzAwMScsXHJcbiAgICAgICAgICB1c2VyUm9sZTogJ2FkbWluJyxcclxuICAgICAgICAgIGFjdGlvbjogJ3ZpZXdfcmVwb3J0JyxcclxuICAgICAgICAgIHJlc291cmNlOiAnU2FsZXMgUmVwb3J0JyxcclxuICAgICAgICAgIHJlc3VsdDogJ1NVQ0NFU1MnLFxyXG4gICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZShEYXRlLm5vdygpIC0gNSAqIDYwMDAwKS50b0lTT1N0cmluZygpLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgaWQ6ICdBVURJVF8wMDInLFxyXG4gICAgICAgICAgdXNlcklkOiAnVVNFUl8wMDMnLFxyXG4gICAgICAgICAgdXNlclJvbGU6ICd1c2VyJyxcclxuICAgICAgICAgIGFjdGlvbjogJ2RlbGV0ZV9kb2N1bWVudCcsXHJcbiAgICAgICAgICByZXNvdXJjZTogJ0RvY3VtZW50ICMxMjMnLFxyXG4gICAgICAgICAgcmVzdWx0OiAnREVOSUVEJyxcclxuICAgICAgICAgIHJlYXNvbjogJ1Blcm1pc3Npb24gZGVuaWVkJyxcclxuICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoRGF0ZS5ub3coKSAtIDE1ICogNjAwMDApLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgfSxcclxuICAgICAgXSxcclxuICAgICAgdG90YWxBdWRpdHM6IDIsXHJcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIC8vINiq2LXYr9mK2LEg2KrZg9mI2YrZhiBSQkFDXHJcbiAgc3RhdGljIGV4cG9ydFJCQUNDb25maWcoKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICBmaWxlOiB7XHJcbiAgICAgICAgbmFtZTogYHJiYWNfY29uZmlnXyR7bmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF19Lmpzb25gLFxyXG4gICAgICAgIHNpemU6ICcxMiBLQicsXHJcbiAgICAgICAgZG93bmxvYWRVcmw6IGBodHRwczovL2V4YW1wbGUuY29tL2V4cG9ydHMvcmJhY18ke0RhdGUubm93KCl9Lmpzb25gLFxyXG4gICAgICAgIGV4cGlyZXNJbjogJzI0aCcsXHJcbiAgICAgIH0sXHJcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIC8vINin2LPYqtmK2LHYp9ivINiq2YPZiNmK2YYgUkJBQ1xyXG4gIHN0YXRpYyBpbXBvcnRSQkFDQ29uZmlnKGZpbGUpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgIG1lc3NhZ2U6ICdSQkFDIGNvbmZpZ3VyYXRpb24gaW1wb3J0ZWQgc3VjY2Vzc2Z1bGx5JyxcclxuICAgICAgcm9sZXNJbXBvcnRlZDogOCxcclxuICAgICAgcGVybWlzc2lvbnNVcGRhdGVkOiAxNSxcclxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICB9O1xyXG4gIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBSQkFDU2VydmljZTtcclxuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBOztBQUVBLE1BQU1BLFdBQVcsQ0FBQztFQUNoQjtFQUNBLE9BQU9DLEtBQUssR0FBRztJQUNiQyxLQUFLLEVBQUU7TUFDTEMsSUFBSSxFQUFFLE9BQU87TUFDYkMsV0FBVyxFQUFFLGtCQUFrQjtNQUMvQkMsV0FBVyxFQUFFLENBQUMsS0FBSztJQUNyQixDQUFDO0lBQ0RDLE9BQU8sRUFBRTtNQUNQSCxJQUFJLEVBQUUsTUFBTTtNQUNaQyxXQUFXLEVBQUUsdUJBQXVCO01BQ3BDQyxXQUFXLEVBQUUsQ0FBQyxRQUFRLEVBQUUsTUFBTSxFQUFFLFFBQVEsRUFBRSxRQUFRLEVBQUUsUUFBUSxFQUFFLGFBQWE7SUFDN0UsQ0FBQztJQUNERSxJQUFJLEVBQUU7TUFDSkosSUFBSSxFQUFFLFFBQVE7TUFDZEMsV0FBVyxFQUFFLG1CQUFtQjtNQUNoQ0MsV0FBVyxFQUFFLENBQUMsTUFBTSxFQUFFLFlBQVksRUFBRSxZQUFZO0lBQ2xELENBQUM7SUFDREcsTUFBTSxFQUFFO01BQ05MLElBQUksRUFBRSxNQUFNO01BQ1pDLFdBQVcsRUFBRSxrQkFBa0I7TUFDL0JDLFdBQVcsRUFBRSxDQUFDLE1BQU07SUFDdEI7RUFDRixDQUFDOztFQUVE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