{"version":3,"names":["express","require","protect","authorize","mobileAppController","router","Router","use","post","registerDevice","get","getUserDevices","trustDevice","untrustDevice","enableBiometric","delete","deleteDevice","getPendingOperations","queueOperation","syncOperations","getSyncStatus","resolveConflict","sendPushNotification","sendBatchNotifications","registerPushToken","testPushDelivery","getPushStats","startSession","endSession","trackEvent","logCrash","getSessionStats","getUserAnalytics","getCrashReport","getPerformanceReport","req","res","json","success","status","message","timestamp","Date","toISOString","module","exports"],"sources":["mobileApp.routes.js"],"sourcesContent":["/**\r\n * Mobile App Backend Routes\r\n * مسارات تطبيق الهاتف المحمول\r\n * \r\n * Phase 21: Mobile App Backend Support\r\n * تاريخ الإنشاء: 17 فبراير 2026\r\n */\r\n\r\nconst express = require('express');\r\nconst { protect, authorize } = require('../middleware/auth');\r\nconst mobileAppController = require('../controllers/mobileApp.controller');\r\n\r\nconst router = express.Router();\r\n\r\n// Apply authentication middleware to all routes\r\nrouter.use(protect);\r\n\r\n// ============================================================\r\n// Device Management Routes\r\n// ============================================================\r\n\r\n/**\r\n * POST /api/mobile/devices/register\r\n * تسجيل جهاز محمول جديد\r\n * Register new mobile device\r\n */\r\nrouter.post('/devices/register', mobileAppController.registerDevice);\r\n\r\n/**\r\n * GET /api/mobile/devices\r\n * الحصول على أجهزة المستخدم\r\n * Get user devices\r\n */\r\nrouter.get('/devices', mobileAppController.getUserDevices);\r\n\r\n/**\r\n * POST /api/mobile/devices/trust\r\n * الثقة في جهاز\r\n * Trust device for biometric auth\r\n */\r\nrouter.post('/devices/trust', mobileAppController.trustDevice);\r\n\r\n/**\r\n * POST /api/mobile/devices/untrust\r\n * إزالة الثقة من جهاز\r\n * Untrust device\r\n */\r\nrouter.post('/devices/untrust', mobileAppController.untrustDevice);\r\n\r\n/**\r\n * POST /api/mobile/devices/biometric/enable\r\n * تفعيل البيومتري\r\n * Enable biometric authentication\r\n */\r\nrouter.post('/devices/biometric/enable', mobileAppController.enableBiometric);\r\n\r\n/**\r\n * DELETE /api/mobile/devices/:deviceId\r\n * حذف جهاز\r\n * Delete device\r\n */\r\nrouter.delete('/devices/:deviceId', mobileAppController.deleteDevice);\r\n\r\n// ============================================================\r\n// Offline Sync Routes\r\n// ============================================================\r\n\r\n/**\r\n * GET /api/mobile/sync/pending\r\n * الحصول على العمليات المعلقة\r\n * Get pending offline operations\r\n */\r\nrouter.get('/sync/pending', mobileAppController.getPendingOperations);\r\n\r\n/**\r\n * POST /api/mobile/sync/queue\r\n * إضافة عملية إلى قائمة الانتظار\r\n * Queue offline operation\r\n */\r\nrouter.post('/sync/queue', mobileAppController.queueOperation);\r\n\r\n/**\r\n * POST /api/mobile/sync/sync\r\n * مزامنة العمليات المعلقة\r\n * Sync pending operations\r\n */\r\nrouter.post('/sync/sync', mobileAppController.syncOperations);\r\n\r\n/**\r\n * GET /api/mobile/sync/status\r\n * الحصول على حالة المزامنة\r\n * Get sync status\r\n */\r\nrouter.get('/sync/status', mobileAppController.getSyncStatus);\r\n\r\n/**\r\n * POST /api/mobile/sync/conflict/resolve\r\n * حل تعارض في البيانات\r\n * Resolve data conflict\r\n */\r\nrouter.post('/sync/conflict/resolve', mobileAppController.resolveConflict);\r\n\r\n// ============================================================\r\n// Push Notifications Routes\r\n// ============================================================\r\n\r\n/**\r\n * POST /api/mobile/push/send\r\n * إرسال إشعار دفع\r\n * Send push notification\r\n */\r\nrouter.post('/push/send', mobileAppController.sendPushNotification);\r\n\r\n/**\r\n * POST /api/mobile/push/batch\r\n * إرسال إشعارات مجموعية\r\n * Send batch push notifications\r\n */\r\nrouter.post('/push/batch', mobileAppController.sendBatchNotifications);\r\n\r\n/**\r\n * POST /api/mobile/push/token/register\r\n * تسجيل رمز الإشعارات\r\n * Register push token\r\n */\r\nrouter.post('/push/token/register', mobileAppController.registerPushToken);\r\n\r\n/**\r\n * POST /api/mobile/push/test\r\n * اختبار إرسال الإشعارات\r\n * Test push notification delivery\r\n */\r\nrouter.post('/push/test', mobileAppController.testPushDelivery);\r\n\r\n/**\r\n * GET /api/mobile/push/stats\r\n * الحصول على إحصائيات الإشعارات\r\n * Get push notification statistics\r\n */\r\nrouter.get('/push/stats', mobileAppController.getPushStats);\r\n\r\n// ============================================================\r\n// Mobile Analytics Routes\r\n// ============================================================\r\n\r\n/**\r\n * POST /api/mobile/analytics/session/start\r\n * بدء جلسة محمول\r\n * Start mobile session\r\n */\r\nrouter.post('/analytics/session/start', mobileAppController.startSession);\r\n\r\n/**\r\n * POST /api/mobile/analytics/session/end\r\n * إنهاء جلسة\r\n * End session\r\n */\r\nrouter.post('/analytics/session/end', mobileAppController.endSession);\r\n\r\n/**\r\n * POST /api/mobile/analytics/event\r\n * تتبع حدث\r\n * Track event\r\n */\r\nrouter.post('/analytics/event', mobileAppController.trackEvent);\r\n\r\n/**\r\n * POST /api/mobile/analytics/crash\r\n * تسجيل توقف أو خطأ\r\n * Log crash\r\n */\r\nrouter.post('/analytics/crash', mobileAppController.logCrash);\r\n\r\n/**\r\n * GET /api/mobile/analytics/session/stats\r\n * الحصول على إحصائيات الجلسة\r\n * Get session statistics\r\n */\r\nrouter.get('/analytics/session/stats', mobileAppController.getSessionStats);\r\n\r\n/**\r\n * GET /api/mobile/analytics/user\r\n * الحصول على تحليلات المستخدم\r\n * Get user analytics\r\n */\r\nrouter.get('/analytics/user', mobileAppController.getUserAnalytics);\r\n\r\n/**\r\n * GET /api/mobile/analytics/crashes\r\n * الحصول على تقرير الأعطال\r\n * Get crash report\r\n */\r\nrouter.get('/analytics/crashes', mobileAppController.getCrashReport);\r\n\r\n/**\r\n * GET /api/mobile/analytics/performance\r\n * الحصول على تقرير الأداء\r\n * Get performance report\r\n */\r\nrouter.get('/analytics/performance', mobileAppController.getPerformanceReport);\r\n\r\n// ============================================================\r\n// Health Check\r\n// ============================================================\r\n\r\n/**\r\n * GET /api/mobile/health\r\n * التحقق من صحة الخدمة\r\n * Health check\r\n */\r\nrouter.get('/health', (req, res) => {\r\n  res.json({\r\n    success: true,\r\n    status: 'healthy',\r\n    message: 'Mobile backend is operational',\r\n    timestamp: new Date().toISOString(),\r\n  });\r\n});\r\n\r\nmodule.exports = router;\r\n"],"mappings":"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","ignoreList":[]}