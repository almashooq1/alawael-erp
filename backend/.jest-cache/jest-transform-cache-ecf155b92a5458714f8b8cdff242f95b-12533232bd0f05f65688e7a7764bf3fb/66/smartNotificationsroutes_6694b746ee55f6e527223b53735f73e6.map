{"version":3,"names":["express","require","router","Router","SmartNotificationsController","protect","authorize","use","post","createNotification","broadcastNotification","get","getNotifications","getStats","getPerformanceReport","patch","updatePreferences","recordInteraction","delete","deleteNotification","clearAllNotifications","processQueue","module","exports"],"sources":["smartNotifications.routes.js"],"sourcesContent":["/**\r\n * مسارات الإشعارات الذكية\r\n * Smart Notifications Routes\r\n */\r\n\r\nconst express = require('express');\r\nconst router = express.Router();\r\nconst SmartNotificationsController = require('../controllers/smartNotifications.controller');\r\nconst { protect, authorize } = require('../middleware/auth');\r\n\r\n// جميع المسارات تتطلب المصادقة\r\nrouter.use(protect);\r\n\r\n// ========== إدارة الإشعارات ==========\r\n\r\n/**\r\n * @route   POST /api/notifications/smart/create\r\n * @desc    إنشاء إشعار ذكي\r\n * @access  Private\r\n */\r\nrouter.post('/create', SmartNotificationsController.createNotification);\r\n\r\n/**\r\n * @route   POST /api/notifications/smart/broadcast\r\n * @desc    إرسال إشعار مجموعي\r\n * @access  Private (Admin, Manager)\r\n */\r\nrouter.post(\r\n  '/broadcast',\r\n  authorize('admin', 'manager'),\r\n  SmartNotificationsController.broadcastNotification\r\n);\r\n\r\n/**\r\n * @route   GET /api/notifications/smart/list\r\n * @desc    جلب إشعارات المستخدم\r\n * @access  Private\r\n */\r\nrouter.get('/list', SmartNotificationsController.getNotifications);\r\n\r\n/**\r\n * @route   GET /api/notifications/smart/stats\r\n * @desc    جلب إحصائيات الإشعارات\r\n * @access  Private\r\n */\r\nrouter.get('/stats', SmartNotificationsController.getStats);\r\n\r\n/**\r\n * @route   GET /api/notifications/smart/performance\r\n * @desc    جلب تقرير أداء الإشعارات\r\n * @access  Private\r\n */\r\nrouter.get('/performance', SmartNotificationsController.getPerformanceReport);\r\n\r\n// ========== تفضيلات الإشعارات ==========\r\n\r\n/**\r\n * @route   PATCH /api/notifications/smart/preferences\r\n * @desc    تحديث تفضيلات الإشعارات\r\n * @access  Private\r\n */\r\nrouter.patch('/preferences', SmartNotificationsController.updatePreferences);\r\n\r\n// ========== التفاعل والحذف ==========\r\n\r\n/**\r\n * @route   POST /api/notifications/smart/:notificationId/interact\r\n * @desc    تسجيل التفاعل مع الإشعار\r\n * @access  Private\r\n */\r\nrouter.post('/:notificationId/interact', SmartNotificationsController.recordInteraction);\r\n\r\n/**\r\n * @route   DELETE /api/notifications/smart/:notificationId\r\n * @desc    حذف إشعار محدد\r\n * @access  Private\r\n */\r\nrouter.delete('/:notificationId', SmartNotificationsController.deleteNotification);\r\n\r\n/**\r\n * @route   DELETE /api/notifications/smart/all\r\n * @desc    حذف جميع إشعارات المستخدم\r\n * @access  Private\r\n */\r\nrouter.delete('/', SmartNotificationsController.clearAllNotifications);\r\n\r\n// ========== معالجة الطابور (Admin only) ==========\r\n\r\n/**\r\n * @route   POST /api/notifications/smart/process-queue\r\n * @desc    معالجة طابور الإشعارات\r\n * @access  Private (Admin)\r\n */\r\nrouter.post('/process-queue', authorize('admin'), SmartNotificationsController.processQueue);\r\n\r\nmodule.exports = router;\r\n"],"mappings":"AAAA;AACA;AACA;AACA;;AAEA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAS,CAAC;AAClC,MAAMC,MAAM,GAAGF,OAAO,CAACG,MAAM,CAAC,CAAC;AAC/B,MAAMC,4BAA4B,GAAGH,OAAO,CAAC,8CAA8C,CAAC;AAC5F,MAAM;EAAEI,OAAO;EAAEC;AAAU,CAAC,GAAGL,OAAO,CAAC,oBAAoB,CAAC;;AAE5D;AACAC,MAAM,CAACK,GAAG,CAACF,OAAO,CAAC;;AAEnB;;AAEA;AACA;AACA;AACA;AACA;AACAH,MAAM,CAACM,IAAI,CAAC,SAAS,EAAEJ,4BAA4B,CAACK,kBAAkB,CAAC;;AAEvE;AACA;AACA;AACA;AACA;AACAP,MAAM,CAACM,IAAI,CACT,YAAY,EACZF,SAAS,CAAC,OAAO,EAAE,SAAS,CAAC,EAC7BF,4BAA4B,CAACM,qBAC/B,CAAC;;AAED;AACA;AACA;AACA;AACA;AACAR,MAAM,CAACS,GAAG,CAAC,OAAO,EAAEP,4BAA4B,CAACQ,gBAAgB,CAAC;;AAElE;AACA;AACA;AACA;AACA;AACAV,MAAM,CAACS,GAAG,CAAC,QAAQ,EAAEP,4BAA4B,CAACS,QAAQ,CAAC;;AAE3D;AACA;AACA;AACA;AACA;AACAX,MAAM,CAACS,GAAG,CAAC,cAAc,EAAEP,4BAA4B,CAACU,oBAAoB,CAAC;;AAE7E;;AAEA;AACA;AACA;AACA;AACA;AACAZ,MAAM,CAACa,KAAK,CAAC,cAAc,EAAEX,4BAA4B,CAACY,iBAAiB,CAAC;;AAE5E;;AAEA;AACA;AACA;AACA;AACA;AACAd,MAAM,CAACM,IAAI,CAAC,2BAA2B,EAAEJ,4BAA4B,CAACa,iBAAiB,CAAC;;AAExF;AACA;AACA;AACA;AACA;AACAf,MAAM,CAACgB,MAAM,CAAC,kBAAkB,EAAEd,4BAA4B,CAACe,kBAAkB,CAAC;;AAElF;AACA;AACA;AACA;AACA;AACAjB,MAAM,CAACgB,MAAM,CAAC,GAAG,EAAEd,4BAA4B,CAACgB,qBAAqB,CAAC;;AAEtE;;AAEA;AACA;AACA;AACA;AACA;AACAlB,MAAM,CAACM,IAAI,CAAC,gBAAgB,EAAEF,SAAS,CAAC,OAAO,CAAC,EAAEF,4BAA4B,CAACiB,YAAY,CAAC;AAE5FC,MAAM,CAACC,OAAO,GAAGrB,MAAM","ignoreList":[]}