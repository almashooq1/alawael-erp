{"version":3,"names":["express","require","router","Router","AIService","post","req","res","studentId","absencesLast30Days","attendanceRate","behaviorScore","performanceScore","body","status","json","error","dayData","dayOfWeek","Date","toLocaleString","weekday","aiResult","predictAttendance","err","message","module","exports"],"sources":["ai.js"],"sourcesContent":["// AI Attendance Prediction Route\r\nconst express = require('express');\r\nconst router = express.Router();\r\n\r\n// AIService: منطق التوقع الحقيقي\r\nconst AIService = require('../services/aiService');\r\n\r\n// POST /api/ai/predict-absence\r\nrouter.post('/predict-absence', async (req, res) => {\r\n  try {\r\n    const { studentId, absencesLast30Days, attendanceRate, behaviorScore, performanceScore } =\r\n      req.body;\r\n    if (!studentId) return res.status(400).json({ error: 'studentId required' });\r\n\r\n    // بناء بيانات اليوم (يمكن تطويرها لاحقاً)\r\n    const dayData = {\r\n      dayOfWeek: new Date().toLocaleString('en-US', { weekday: 'long' }),\r\n      absencesLast30Days,\r\n      attendanceRate,\r\n      behaviorScore,\r\n      performanceScore,\r\n      // يمكن إضافة المزيد من الخصائص لاحقاً\r\n    };\r\n\r\n    // استدعاء منطق الذكاء الاصطناعي\r\n    const aiResult = await AIService.predictAttendance(dayData);\r\n    res.json({ studentId, ...aiResult });\r\n  } catch (err) {\r\n    res.status(500).json({ error: err.message });\r\n  }\r\n});\r\n\r\nmodule.exports = router;\r\n"],"mappings":"AAAA;AACA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAS,CAAC;AAClC,MAAMC,MAAM,GAAGF,OAAO,CAACG,MAAM,CAAC,CAAC;;AAE/B;AACA,MAAMC,SAAS,GAAGH,OAAO,CAAC,uBAAuB,CAAC;;AAElD;AACAC,MAAM,CAACG,IAAI,CAAC,kBAAkB,EAAE,OAAOC,GAAG,EAAEC,GAAG,KAAK;EAClD,IAAI;IACF,MAAM;MAAEC,SAAS;MAAEC,kBAAkB;MAAEC,cAAc;MAAEC,aAAa;MAAEC;IAAiB,CAAC,GACtFN,GAAG,CAACO,IAAI;IACV,IAAI,CAACL,SAAS,EAAE,OAAOD,GAAG,CAACO,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,KAAK,EAAE;IAAqB,CAAC,CAAC;;IAE5E;IACA,MAAMC,OAAO,GAAG;MACdC,SAAS,EAAE,IAAIC,IAAI,CAAC,CAAC,CAACC,cAAc,CAAC,OAAO,EAAE;QAAEC,OAAO,EAAE;MAAO,CAAC,CAAC;MAClEZ,kBAAkB;MAClBC,cAAc;MACdC,aAAa;MACbC;MACA;IACF,CAAC;;IAED;IACA,MAAMU,QAAQ,GAAG,MAAMlB,SAAS,CAACmB,iBAAiB,CAACN,OAAO,CAAC;IAC3DV,GAAG,CAACQ,IAAI,CAAC;MAAEP,SAAS;MAAE,GAAGc;IAAS,CAAC,CAAC;EACtC,CAAC,CAAC,OAAOE,GAAG,EAAE;IACZjB,GAAG,CAACO,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,KAAK,EAAEQ,GAAG,CAACC;IAAQ,CAAC,CAAC;EAC9C;AACF,CAAC,CAAC;AAEFC,MAAM,CAACC,OAAO,GAAGzB,MAAM","ignoreList":[]}