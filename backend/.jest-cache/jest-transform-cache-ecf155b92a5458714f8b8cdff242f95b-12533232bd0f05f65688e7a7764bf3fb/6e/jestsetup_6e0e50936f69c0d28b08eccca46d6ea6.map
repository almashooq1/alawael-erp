{"version":3,"names":["MongoMemoryServer","require","mongoose","mongo","beforeAll","process","env","NODE_ENV","JWT_SECRET","USE_MOCK_DB","USE_MOCK_CACHE","create","uri","getUri","connect","dbName","afterAll","disconnect","stop"],"sources":["jest.setup.js"],"sourcesContent":["const { MongoMemoryServer } = require('mongodb-memory-server');\r\nconst mongoose = require('mongoose');\r\n\r\nlet mongo;\r\n\r\nbeforeAll(async () => {\r\n  // Ensure test-friendly env\r\n  process.env.NODE_ENV = process.env.NODE_ENV || 'test';\r\n  process.env.JWT_SECRET = process.env.JWT_SECRET || 'test_secret_key';\r\n  // Disable mock DB so Mongoose connects to memory server\r\n  process.env.USE_MOCK_DB = 'false';\r\n  // Keep cache mocked to avoid external dependencies\r\n  process.env.USE_MOCK_CACHE = process.env.USE_MOCK_CACHE || 'true';\r\n\r\n  mongo = await MongoMemoryServer.create();\r\n  const uri = mongo.getUri();\r\n\r\n  await mongoose.connect(uri, {\r\n    dbName: 'beneficiary_portal_test',\r\n  });\r\n});\r\n\r\nafterAll(async () => {\r\n  await mongoose.disconnect();\r\n  if (mongo) await mongo.stop();\r\n});\r\n"],"mappings":"AAAA,MAAM;EAAEA;AAAkB,CAAC,GAAGC,OAAO,CAAC,uBAAuB,CAAC;AAC9D,MAAMC,QAAQ,GAAGD,OAAO,CAAC,UAAU,CAAC;AAEpC,IAAIE,KAAK;AAETC,SAAS,CAAC,YAAY;EACpB;EACAC,OAAO,CAACC,GAAG,CAACC,QAAQ,GAAGF,OAAO,CAACC,GAAG,CAACC,QAAQ,IAAI,MAAM;EACrDF,OAAO,CAACC,GAAG,CAACE,UAAU,GAAGH,OAAO,CAACC,GAAG,CAACE,UAAU,IAAI,iBAAiB;EACpE;EACAH,OAAO,CAACC,GAAG,CAACG,WAAW,GAAG,OAAO;EACjC;EACAJ,OAAO,CAACC,GAAG,CAACI,cAAc,GAAGL,OAAO,CAACC,GAAG,CAACI,cAAc,IAAI,MAAM;EAEjEP,KAAK,GAAG,MAAMH,iBAAiB,CAACW,MAAM,CAAC,CAAC;EACxC,MAAMC,GAAG,GAAGT,KAAK,CAACU,MAAM,CAAC,CAAC;EAE1B,MAAMX,QAAQ,CAACY,OAAO,CAACF,GAAG,EAAE;IAC1BG,MAAM,EAAE;EACV,CAAC,CAAC;AACJ,CAAC,CAAC;AAEFC,QAAQ,CAAC,YAAY;EACnB,MAAMd,QAAQ,CAACe,UAAU,CAAC,CAAC;EAC3B,IAAId,KAAK,EAAE,MAAMA,KAAK,CAACe,IAAI,CAAC,CAAC;AAC/B,CAAC,CAAC","ignoreList":[]}