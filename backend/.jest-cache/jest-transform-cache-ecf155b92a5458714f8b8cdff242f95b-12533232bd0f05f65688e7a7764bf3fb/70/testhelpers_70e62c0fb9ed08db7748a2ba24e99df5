1f2738af210ea36266cd5c063393371f
/**
 * Test Helpers and Utilities
 * Provides utilities for proper test cleanup and resource management
 */

// Track all active resources
const resources = {
  timers: new Set(),
  intervals: new Set(),
  connections: new Set(),
  servers: new Set(),
  promises: new Set()
};

/**
 * Track a timeout and ensure it gets cleaned up
 */
function trackTimeout(callback, delay, ...args) {
  const timeoutId = setTimeout(callback, delay, ...args);
  resources.timers.add(timeoutId);
  return timeoutId;
}

/**
 * Track an interval and ensure it gets cleaned up
 */
function trackInterval(callback, delay, ...args) {
  const intervalId = setInterval(callback, delay, ...args);
  resources.intervals.add(intervalId);
  return intervalId;
}

/**
 * Clear a timeout and remove from tracking
 */
function clearTrackedTimeout(timeoutId) {
  clearTimeout(timeoutId);
  resources.timers.delete(timeoutId);
}

/**
 * Clear an interval and remove from tracking
 */
function clearTrackedInterval(intervalId) {
  clearInterval(intervalId);
  resources.intervals.delete(intervalId);
}

/**
 * Track a promise for cleanup
 */
function trackPromise(promise) {
  resources.promises.add(promise);
  return promise.finally(() => {
    resources.promises.delete(promise);
  });
}

/**
 * Create a promise with timeout
 */
function createTimeoutPromise(delay) {
  return new Promise(resolve => {
    const timeoutId = trackTimeout(() => {
      resolve();
      resources.timers.delete(timeoutId);
    }, delay);
  });
}

/**
 * Wait for a condition with timeout
 */
async function waitFor(condition, options = {}) {
  const {
    timeout = 5000,
    interval = 100,
    message = 'Condition not met within timeout'
  } = options;
  const startTime = Date.now();
  while (Date.now() - startTime < timeout) {
    if (await condition()) {
      return true;
    }
    await createTimeoutPromise(interval);
  }
  throw new Error(message);
}

/**
 * Cleanup all tracked resources
 */
async function cleanupResources() {
  // Clear all timeouts
  for (const timeoutId of resources.timers) {
    try {
      clearTimeout(timeoutId);
    } catch (error) {
      // Ignore errors
    }
  }
  resources.timers.clear();

  // Clear all intervals
  for (const intervalId of resources.intervals) {
    try {
      clearInterval(intervalId);
    } catch (error) {
      // Ignore errors
    }
  }
  resources.intervals.clear();

  // Wait for promises to settle
  try {
    await Promise.allSettled(Array.from(resources.promises));
  } catch (error) {
    // Ignore errors
  }
  resources.promises.clear();

  // Close connections
  for (const connection of resources.connections) {
    try {
      if (typeof connection.close === 'function') {
        await connection.close();
      } else if (typeof connection.destroy === 'function') {
        await connection.destroy();
      }
    } catch (error) {
      // Ignore errors
    }
  }
  resources.connections.clear();

  // Close servers
  for (const server of resources.servers) {
    try {
      await new Promise((resolve, reject) => {
        server.close(error => {
          if (error) reject(error);else resolve();
        });
      });
    } catch (error) {
      // Ignore errors
    }
  }
  resources.servers.clear();
}

/**
 * Create a test timeout wrapper
 */
function withTimeout(testFn, customTimeout = 30000) {
  return async function () {
    const timeoutPromise = new Promise((_, reject) => {
      const timeoutId = trackTimeout(() => {
        reject(new Error(`Test timeout after ${customTimeout}ms`));
      }, customTimeout);
    });
    try {
      await Promise.race([testFn(), timeoutPromise]);
    } finally {
      await cleanupResources();
    }
  };
}

/**
 * Mock factory for creating reusable mocks
 */
class MockFactory {
  constructor() {
    this.mocks = new Map();
  }
  create(name, implementation = {}) {
    const mock = jest.fn(implementation);
    this.mocks.set(name, mock);
    return mock;
  }
  get(name) {
    return this.mocks.get(name);
  }
  reset(name) {
    const mock = this.mocks.get(name);
    if (mock) {
      mock.mockReset();
    }
  }
  resetAll() {
    for (const mock of this.mocks.values()) {
      mock.mockReset();
    }
  }
  clearAll() {
    this.mocks.clear();
  }
}

/**
 * HTTP Request Helper
 */
class HTTPHelper {
  static async request(app, method, path, options = {}) {
    let req = require('supertest')(app)[method.toLowerCase()](path);
    if (options.headers) {
      req = req.set(options.headers);
    }
    if (options.body) {
      req = req.send(options.body);
    }
    if (options.query) {
      req = req.query(options.query);
    }
    return req;
  }
  static async get(app, path, options = {}) {
    return this.request(app, 'GET', path, options);
  }
  static async post(app, path, body, options = {}) {
    return this.request(app, 'POST', path, {
      ...options,
      body
    });
  }
  static async put(app, path, body, options = {}) {
    return this.request(app, 'PUT', path, {
      ...options,
      body
    });
  }
  static async delete(app, path, options = {}) {
    return this.request(app, 'DELETE', path, options);
  }
}

/**
 * Database Helper
 */
class DatabaseHelper {
  static async connectAndClear(uri, dbName) {
    const mongoose = require('mongoose');
    await mongoose.connect(uri, {
      dbName: dbName || 'test_db'
    });
  }
  static async clearDatabase() {
    const mongoose = require('mongoose');
    const collections = mongoose.connection.collections;
    for (const collection of Object.values(collections)) {
      await collection.deleteMany({});
    }
  }
  static async disconnect() {
    const mongoose = require('mongoose');
    if (mongoose.connection.readyState !== 0) {
      await mongoose.disconnect();
    }
  }
}

// Export functions and classes
module.exports = {
  trackTimeout,
  trackInterval,
  clearTrackedTimeout,
  clearTrackedInterval,
  trackPromise,
  createTimeoutPromise,
  waitFor,
  cleanupResources,
  withTimeout,
  MockFactory,
  HTTPHelper,
  DatabaseHelper,
  getResources: () => ({
    ...resources
  })
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZXNvdXJjZXMiLCJ0aW1lcnMiLCJTZXQiLCJpbnRlcnZhbHMiLCJjb25uZWN0aW9ucyIsInNlcnZlcnMiLCJwcm9taXNlcyIsInRyYWNrVGltZW91dCIsImNhbGxiYWNrIiwiZGVsYXkiLCJhcmdzIiwidGltZW91dElkIiwic2V0VGltZW91dCIsImFkZCIsInRyYWNrSW50ZXJ2YWwiLCJpbnRlcnZhbElkIiwic2V0SW50ZXJ2YWwiLCJjbGVhclRyYWNrZWRUaW1lb3V0IiwiY2xlYXJUaW1lb3V0IiwiZGVsZXRlIiwiY2xlYXJUcmFja2VkSW50ZXJ2YWwiLCJjbGVhckludGVydmFsIiwidHJhY2tQcm9taXNlIiwicHJvbWlzZSIsImZpbmFsbHkiLCJjcmVhdGVUaW1lb3V0UHJvbWlzZSIsIlByb21pc2UiLCJyZXNvbHZlIiwid2FpdEZvciIsImNvbmRpdGlvbiIsIm9wdGlvbnMiLCJ0aW1lb3V0IiwiaW50ZXJ2YWwiLCJtZXNzYWdlIiwic3RhcnRUaW1lIiwiRGF0ZSIsIm5vdyIsIkVycm9yIiwiY2xlYW51cFJlc291cmNlcyIsImVycm9yIiwiY2xlYXIiLCJhbGxTZXR0bGVkIiwiQXJyYXkiLCJmcm9tIiwiY29ubmVjdGlvbiIsImNsb3NlIiwiZGVzdHJveSIsInNlcnZlciIsInJlamVjdCIsIndpdGhUaW1lb3V0IiwidGVzdEZuIiwiY3VzdG9tVGltZW91dCIsInRpbWVvdXRQcm9taXNlIiwiXyIsInJhY2UiLCJNb2NrRmFjdG9yeSIsImNvbnN0cnVjdG9yIiwibW9ja3MiLCJNYXAiLCJjcmVhdGUiLCJuYW1lIiwiaW1wbGVtZW50YXRpb24iLCJtb2NrIiwiamVzdCIsImZuIiwic2V0IiwiZ2V0IiwicmVzZXQiLCJtb2NrUmVzZXQiLCJyZXNldEFsbCIsInZhbHVlcyIsImNsZWFyQWxsIiwiSFRUUEhlbHBlciIsInJlcXVlc3QiLCJhcHAiLCJtZXRob2QiLCJwYXRoIiwicmVxIiwicmVxdWlyZSIsInRvTG93ZXJDYXNlIiwiaGVhZGVycyIsImJvZHkiLCJzZW5kIiwicXVlcnkiLCJwb3N0IiwicHV0IiwiRGF0YWJhc2VIZWxwZXIiLCJjb25uZWN0QW5kQ2xlYXIiLCJ1cmkiLCJkYk5hbWUiLCJtb25nb29zZSIsImNvbm5lY3QiLCJjbGVhckRhdGFiYXNlIiwiY29sbGVjdGlvbnMiLCJjb2xsZWN0aW9uIiwiT2JqZWN0IiwiZGVsZXRlTWFueSIsImRpc2Nvbm5lY3QiLCJyZWFkeVN0YXRlIiwibW9kdWxlIiwiZXhwb3J0cyIsImdldFJlc291cmNlcyJdLCJzb3VyY2VzIjpbInRlc3QtaGVscGVycy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogVGVzdCBIZWxwZXJzIGFuZCBVdGlsaXRpZXNcclxuICogUHJvdmlkZXMgdXRpbGl0aWVzIGZvciBwcm9wZXIgdGVzdCBjbGVhbnVwIGFuZCByZXNvdXJjZSBtYW5hZ2VtZW50XHJcbiAqL1xyXG5cclxuLy8gVHJhY2sgYWxsIGFjdGl2ZSByZXNvdXJjZXNcclxuY29uc3QgcmVzb3VyY2VzID0ge1xyXG4gIHRpbWVyczogbmV3IFNldCgpLFxyXG4gIGludGVydmFsczogbmV3IFNldCgpLFxyXG4gIGNvbm5lY3Rpb25zOiBuZXcgU2V0KCksXHJcbiAgc2VydmVyczogbmV3IFNldCgpLFxyXG4gIHByb21pc2VzOiBuZXcgU2V0KClcclxufTtcclxuXHJcbi8qKlxyXG4gKiBUcmFjayBhIHRpbWVvdXQgYW5kIGVuc3VyZSBpdCBnZXRzIGNsZWFuZWQgdXBcclxuICovXHJcbmZ1bmN0aW9uIHRyYWNrVGltZW91dChjYWxsYmFjaywgZGVsYXksIC4uLmFyZ3MpIHtcclxuICBjb25zdCB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KGNhbGxiYWNrLCBkZWxheSwgLi4uYXJncyk7XHJcbiAgcmVzb3VyY2VzLnRpbWVycy5hZGQodGltZW91dElkKTtcclxuICByZXR1cm4gdGltZW91dElkO1xyXG59XHJcblxyXG4vKipcclxuICogVHJhY2sgYW4gaW50ZXJ2YWwgYW5kIGVuc3VyZSBpdCBnZXRzIGNsZWFuZWQgdXBcclxuICovXHJcbmZ1bmN0aW9uIHRyYWNrSW50ZXJ2YWwoY2FsbGJhY2ssIGRlbGF5LCAuLi5hcmdzKSB7XHJcbiAgY29uc3QgaW50ZXJ2YWxJZCA9IHNldEludGVydmFsKGNhbGxiYWNrLCBkZWxheSwgLi4uYXJncyk7XHJcbiAgcmVzb3VyY2VzLmludGVydmFscy5hZGQoaW50ZXJ2YWxJZCk7XHJcbiAgcmV0dXJuIGludGVydmFsSWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDbGVhciBhIHRpbWVvdXQgYW5kIHJlbW92ZSBmcm9tIHRyYWNraW5nXHJcbiAqL1xyXG5mdW5jdGlvbiBjbGVhclRyYWNrZWRUaW1lb3V0KHRpbWVvdXRJZCkge1xyXG4gIGNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xyXG4gIHJlc291cmNlcy50aW1lcnMuZGVsZXRlKHRpbWVvdXRJZCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDbGVhciBhbiBpbnRlcnZhbCBhbmQgcmVtb3ZlIGZyb20gdHJhY2tpbmdcclxuICovXHJcbmZ1bmN0aW9uIGNsZWFyVHJhY2tlZEludGVydmFsKGludGVydmFsSWQpIHtcclxuICBjbGVhckludGVydmFsKGludGVydmFsSWQpO1xyXG4gIHJlc291cmNlcy5pbnRlcnZhbHMuZGVsZXRlKGludGVydmFsSWQpO1xyXG59XHJcblxyXG4vKipcclxuICogVHJhY2sgYSBwcm9taXNlIGZvciBjbGVhbnVwXHJcbiAqL1xyXG5mdW5jdGlvbiB0cmFja1Byb21pc2UocHJvbWlzZSkge1xyXG4gIHJlc291cmNlcy5wcm9taXNlcy5hZGQocHJvbWlzZSk7XHJcbiAgcmV0dXJuIHByb21pc2UuZmluYWxseSgoKSA9PiB7XHJcbiAgICByZXNvdXJjZXMucHJvbWlzZXMuZGVsZXRlKHByb21pc2UpO1xyXG4gIH0pO1xyXG59XHJcblxyXG4vKipcclxuICogQ3JlYXRlIGEgcHJvbWlzZSB3aXRoIHRpbWVvdXRcclxuICovXHJcbmZ1bmN0aW9uIGNyZWF0ZVRpbWVvdXRQcm9taXNlKGRlbGF5KSB7XHJcbiAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xyXG4gICAgY29uc3QgdGltZW91dElkID0gdHJhY2tUaW1lb3V0KCgpID0+IHtcclxuICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICByZXNvdXJjZXMudGltZXJzLmRlbGV0ZSh0aW1lb3V0SWQpO1xyXG4gICAgfSwgZGVsYXkpO1xyXG4gIH0pO1xyXG59XHJcblxyXG4vKipcclxuICogV2FpdCBmb3IgYSBjb25kaXRpb24gd2l0aCB0aW1lb3V0XHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiB3YWl0Rm9yKGNvbmRpdGlvbiwgb3B0aW9ucyA9IHt9KSB7XHJcbiAgY29uc3Qge1xyXG4gICAgdGltZW91dCA9IDUwMDAsXHJcbiAgICBpbnRlcnZhbCA9IDEwMCxcclxuICAgIG1lc3NhZ2UgPSAnQ29uZGl0aW9uIG5vdCBtZXQgd2l0aGluIHRpbWVvdXQnXHJcbiAgfSA9IG9wdGlvbnM7XHJcblxyXG4gIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KCk7XHJcblxyXG4gIHdoaWxlIChEYXRlLm5vdygpIC0gc3RhcnRUaW1lIDwgdGltZW91dCkge1xyXG4gICAgaWYgKGF3YWl0IGNvbmRpdGlvbigpKSB7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgYXdhaXQgY3JlYXRlVGltZW91dFByb21pc2UoaW50ZXJ2YWwpO1xyXG4gIH1cclxuXHJcbiAgdGhyb3cgbmV3IEVycm9yKG1lc3NhZ2UpO1xyXG59XHJcblxyXG4vKipcclxuICogQ2xlYW51cCBhbGwgdHJhY2tlZCByZXNvdXJjZXNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGNsZWFudXBSZXNvdXJjZXMoKSB7XHJcbiAgLy8gQ2xlYXIgYWxsIHRpbWVvdXRzXHJcbiAgZm9yIChjb25zdCB0aW1lb3V0SWQgb2YgcmVzb3VyY2VzLnRpbWVycykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAvLyBJZ25vcmUgZXJyb3JzXHJcbiAgICB9XHJcbiAgfVxyXG4gIHJlc291cmNlcy50aW1lcnMuY2xlYXIoKTtcclxuXHJcbiAgLy8gQ2xlYXIgYWxsIGludGVydmFsc1xyXG4gIGZvciAoY29uc3QgaW50ZXJ2YWxJZCBvZiByZXNvdXJjZXMuaW50ZXJ2YWxzKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjbGVhckludGVydmFsKGludGVydmFsSWQpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgLy8gSWdub3JlIGVycm9yc1xyXG4gICAgfVxyXG4gIH1cclxuICByZXNvdXJjZXMuaW50ZXJ2YWxzLmNsZWFyKCk7XHJcblxyXG4gIC8vIFdhaXQgZm9yIHByb21pc2VzIHRvIHNldHRsZVxyXG4gIHRyeSB7XHJcbiAgICBhd2FpdCBQcm9taXNlLmFsbFNldHRsZWQoQXJyYXkuZnJvbShyZXNvdXJjZXMucHJvbWlzZXMpKTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgLy8gSWdub3JlIGVycm9yc1xyXG4gIH1cclxuICByZXNvdXJjZXMucHJvbWlzZXMuY2xlYXIoKTtcclxuXHJcbiAgLy8gQ2xvc2UgY29ubmVjdGlvbnNcclxuICBmb3IgKGNvbnN0IGNvbm5lY3Rpb24gb2YgcmVzb3VyY2VzLmNvbm5lY3Rpb25zKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBpZiAodHlwZW9mIGNvbm5lY3Rpb24uY2xvc2UgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICBhd2FpdCBjb25uZWN0aW9uLmNsb3NlKCk7XHJcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGNvbm5lY3Rpb24uZGVzdHJveSA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgIGF3YWl0IGNvbm5lY3Rpb24uZGVzdHJveSgpO1xyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAvLyBJZ25vcmUgZXJyb3JzXHJcbiAgICB9XHJcbiAgfVxyXG4gIHJlc291cmNlcy5jb25uZWN0aW9ucy5jbGVhcigpO1xyXG5cclxuICAvLyBDbG9zZSBzZXJ2ZXJzXHJcbiAgZm9yIChjb25zdCBzZXJ2ZXIgb2YgcmVzb3VyY2VzLnNlcnZlcnMpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICBzZXJ2ZXIuY2xvc2UoKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICBpZiAoZXJyb3IpIHJlamVjdChlcnJvcik7XHJcbiAgICAgICAgICBlbHNlIHJlc29sdmUoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAvLyBJZ25vcmUgZXJyb3JzXHJcbiAgICB9XHJcbiAgfVxyXG4gIHJlc291cmNlcy5zZXJ2ZXJzLmNsZWFyKCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDcmVhdGUgYSB0ZXN0IHRpbWVvdXQgd3JhcHBlclxyXG4gKi9cclxuZnVuY3Rpb24gd2l0aFRpbWVvdXQodGVzdEZuLCBjdXN0b21UaW1lb3V0ID0gMzAwMDApIHtcclxuICByZXR1cm4gYXN5bmMgZnVuY3Rpb24oKSB7XHJcbiAgICBjb25zdCB0aW1lb3V0UHJvbWlzZSA9IG5ldyBQcm9taXNlKChfLCByZWplY3QpID0+IHtcclxuICAgICAgY29uc3QgdGltZW91dElkID0gdHJhY2tUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICByZWplY3QobmV3IEVycm9yKGBUZXN0IHRpbWVvdXQgYWZ0ZXIgJHtjdXN0b21UaW1lb3V0fW1zYCkpO1xyXG4gICAgICB9LCBjdXN0b21UaW1lb3V0KTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIGF3YWl0IFByb21pc2UucmFjZShbdGVzdEZuKCksIHRpbWVvdXRQcm9taXNlXSk7XHJcbiAgICB9IGZpbmFsbHkge1xyXG4gICAgICBhd2FpdCBjbGVhbnVwUmVzb3VyY2VzKCk7XHJcbiAgICB9XHJcbiAgfTtcclxufVxyXG5cclxuLyoqXHJcbiAqIE1vY2sgZmFjdG9yeSBmb3IgY3JlYXRpbmcgcmV1c2FibGUgbW9ja3NcclxuICovXHJcbmNsYXNzIE1vY2tGYWN0b3J5IHtcclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHRoaXMubW9ja3MgPSBuZXcgTWFwKCk7XHJcbiAgfVxyXG5cclxuICBjcmVhdGUobmFtZSwgaW1wbGVtZW50YXRpb24gPSB7fSkge1xyXG4gICAgY29uc3QgbW9jayA9IGplc3QuZm4oaW1wbGVtZW50YXRpb24pO1xyXG4gICAgdGhpcy5tb2Nrcy5zZXQobmFtZSwgbW9jayk7XHJcbiAgICByZXR1cm4gbW9jaztcclxuICB9XHJcblxyXG4gIGdldChuYW1lKSB7XHJcbiAgICByZXR1cm4gdGhpcy5tb2Nrcy5nZXQobmFtZSk7XHJcbiAgfVxyXG5cclxuICByZXNldChuYW1lKSB7XHJcbiAgICBjb25zdCBtb2NrID0gdGhpcy5tb2Nrcy5nZXQobmFtZSk7XHJcbiAgICBpZiAobW9jaykge1xyXG4gICAgICBtb2NrLm1vY2tSZXNldCgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmVzZXRBbGwoKSB7XHJcbiAgICBmb3IgKGNvbnN0IG1vY2sgb2YgdGhpcy5tb2Nrcy52YWx1ZXMoKSkge1xyXG4gICAgICBtb2NrLm1vY2tSZXNldCgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY2xlYXJBbGwoKSB7XHJcbiAgICB0aGlzLm1vY2tzLmNsZWFyKCk7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogSFRUUCBSZXF1ZXN0IEhlbHBlclxyXG4gKi9cclxuY2xhc3MgSFRUUEhlbHBlciB7XHJcbiAgc3RhdGljIGFzeW5jIHJlcXVlc3QoYXBwLCBtZXRob2QsIHBhdGgsIG9wdGlvbnMgPSB7fSkge1xyXG4gICAgbGV0IHJlcSA9IHJlcXVpcmUoJ3N1cGVydGVzdCcpKGFwcClbbWV0aG9kLnRvTG93ZXJDYXNlKCldKHBhdGgpO1xyXG5cclxuICAgIGlmIChvcHRpb25zLmhlYWRlcnMpIHtcclxuICAgICAgcmVxID0gcmVxLnNldChvcHRpb25zLmhlYWRlcnMpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChvcHRpb25zLmJvZHkpIHtcclxuICAgICAgcmVxID0gcmVxLnNlbmQob3B0aW9ucy5ib2R5KTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAob3B0aW9ucy5xdWVyeSkge1xyXG4gICAgICByZXEgPSByZXEucXVlcnkob3B0aW9ucy5xdWVyeSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHJlcTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBhc3luYyBnZXQoYXBwLCBwYXRoLCBvcHRpb25zID0ge30pIHtcclxuICAgIHJldHVybiB0aGlzLnJlcXVlc3QoYXBwLCAnR0VUJywgcGF0aCwgb3B0aW9ucyk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgYXN5bmMgcG9zdChhcHAsIHBhdGgsIGJvZHksIG9wdGlvbnMgPSB7fSkge1xyXG4gICAgcmV0dXJuIHRoaXMucmVxdWVzdChhcHAsICdQT1NUJywgcGF0aCwgeyAuLi5vcHRpb25zLCBib2R5IH0pO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGFzeW5jIHB1dChhcHAsIHBhdGgsIGJvZHksIG9wdGlvbnMgPSB7fSkge1xyXG4gICAgcmV0dXJuIHRoaXMucmVxdWVzdChhcHAsICdQVVQnLCBwYXRoLCB7IC4uLm9wdGlvbnMsIGJvZHkgfSk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgYXN5bmMgZGVsZXRlKGFwcCwgcGF0aCwgb3B0aW9ucyA9IHt9KSB7XHJcbiAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KGFwcCwgJ0RFTEVURScsIHBhdGgsIG9wdGlvbnMpO1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIERhdGFiYXNlIEhlbHBlclxyXG4gKi9cclxuY2xhc3MgRGF0YWJhc2VIZWxwZXIge1xyXG4gIHN0YXRpYyBhc3luYyBjb25uZWN0QW5kQ2xlYXIodXJpLCBkYk5hbWUpIHtcclxuICAgIGNvbnN0IG1vbmdvb3NlID0gcmVxdWlyZSgnbW9uZ29vc2UnKTtcclxuICAgIGF3YWl0IG1vbmdvb3NlLmNvbm5lY3QodXJpLCB7XHJcbiAgICAgIGRiTmFtZTogZGJOYW1lIHx8ICd0ZXN0X2RiJ1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgYXN5bmMgY2xlYXJEYXRhYmFzZSgpIHtcclxuICAgIGNvbnN0IG1vbmdvb3NlID0gcmVxdWlyZSgnbW9uZ29vc2UnKTtcclxuICAgIGNvbnN0IGNvbGxlY3Rpb25zID0gbW9uZ29vc2UuY29ubmVjdGlvbi5jb2xsZWN0aW9ucztcclxuXHJcbiAgICBmb3IgKGNvbnN0IGNvbGxlY3Rpb24gb2YgT2JqZWN0LnZhbHVlcyhjb2xsZWN0aW9ucykpIHtcclxuICAgICAgYXdhaXQgY29sbGVjdGlvbi5kZWxldGVNYW55KHt9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHN0YXRpYyBhc3luYyBkaXNjb25uZWN0KCkge1xyXG4gICAgY29uc3QgbW9uZ29vc2UgPSByZXF1aXJlKCdtb25nb29zZScpO1xyXG4gICAgaWYgKG1vbmdvb3NlLmNvbm5lY3Rpb24ucmVhZHlTdGF0ZSAhPT0gMCkge1xyXG4gICAgICBhd2FpdCBtb25nb29zZS5kaXNjb25uZWN0KCk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG4vLyBFeHBvcnQgZnVuY3Rpb25zIGFuZCBjbGFzc2VzXHJcbm1vZHVsZS5leHBvcnRzID0ge1xyXG4gIHRyYWNrVGltZW91dCxcclxuICB0cmFja0ludGVydmFsLFxyXG4gIGNsZWFyVHJhY2tlZFRpbWVvdXQsXHJcbiAgY2xlYXJUcmFja2VkSW50ZXJ2YWwsXHJcbiAgdHJhY2tQcm9taXNlLFxyXG4gIGNyZWF0ZVRpbWVvdXRQcm9taXNlLFxyXG4gIHdhaXRGb3IsXHJcbiAgY2xlYW51cFJlc291cmNlcyxcclxuICB3aXRoVGltZW91dCxcclxuICBNb2NrRmFjdG9yeSxcclxuICBIVFRQSGVscGVyLFxyXG4gIERhdGFiYXNlSGVscGVyLFxyXG4gIGdldFJlc291cmNlczogKCkgPT4gKHsg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TyxJQUFJLENBQUMyQyxPQUFPLENBQUNDLEdBQUcsRUFBRSxLQUFLLEVBQUVFLElBQUksRUFBRTtNQUFFLEdBQUc5QyxPQUFPO01BQUVtRDtJQUFLLENBQUMsQ0FBQztFQUM3RDtFQUVBLGFBQWE5RCxNQUFNQSxDQUFDdUQsR0FBRyxFQUFFRSxJQUFJLEVBQUU5QyxPQUFPLEdBQUcsQ0FBQyxDQUFDLEVBQUU7SUFDM0MsT0FBTyxJQUFJLENBQUMyQyxPQUFPLENBQUNDLEdBQUcsRUFBRSxRQUFRLEVBQUVFLElBQUksRUFBRTlDLE9BQU8sQ0FBQztFQUNuRDtBQUNGOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE1BQU13RCxjQUFjLENBQUM7RUFDbkIsYUFBYUMsZUFBZUEsQ0FBQ0MsR0FBRyxFQUFFQyxNQUFNLEVBQUU7SUFDeEMsTUFBTUMsUUFBUSxHQUFHWixPQUFPLENBQUMsVUFBVSxDQUFDO0lBQ3BDLE1BQU1ZLFFBQVEsQ0FBQ0MsT0FBTyxDQUFDSCxHQUFHLEVBQUU7TUFDMUJDLE1BQU0sRUFBRUEsTUFBTSxJQUFJO0lBQ3BCLENBQUMsQ0FBQztFQUNKO0VBRUEsYUFBYUcsYUFBYUEsQ0FBQSxFQUFHO0lBQzNCLE1BQU1GLFFBQVEsR0FBR1osT0FBTyxDQUFDLFVBQVUsQ0FBQztJQUNwQyxNQUFNZSxXQUFXLEdBQUdILFFBQVEsQ0FBQzlDLFVBQVUsQ0FBQ2lELFdBQVc7SUFFbkQsS0FBSyxNQUFNQyxVQUFVLElBQUlDLE1BQU0sQ0FBQ3pCLE1BQU0sQ0FBQ3VCLFdBQVcsQ0FBQyxFQUFFO01BQ25ELE1BQU1DLFVBQVUsQ0FBQ0UsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ2pDO0VBQ0Y7RUFFQSxhQUFhQyxVQUFVQSxDQUFBLEVBQUc7SUFDeEIsTUFBTVAsUUFBUSxHQUFHWixPQUFPLENBQUMsVUFBVSxDQUFDO0lBQ3BDLElBQUlZLFFBQVEsQ0FBQzlDLFVBQVUsQ0FBQ3NELFVBQVUsS0FBSyxDQUFDLEVBQUU7TUFDeEMsTUFBTVIsUUFBUSxDQUFDTyxVQUFVLENBQUMsQ0FBQztJQUM3QjtFQUNGO0FBQ0Y7O0FBRUE7QUFDQUUsTUFBTSxDQUFDQyxPQUFPLEdBQUc7RUFDZjdGLFlBQVk7RUFDWk8sYUFBYTtFQUNiRyxtQkFBbUI7RUFDbkJHLG9CQUFvQjtFQUNwQkUsWUFBWTtFQUNaRyxvQkFBb0I7RUFDcEJHLE9BQU87RUFDUFUsZ0JBQWdCO0VBQ2hCVyxXQUFXO0VBQ1hNLFdBQVc7RUFDWGlCLFVBQVU7RUFDVmMsY0FBYztFQUNkZSxZQUFZLEVBQUVBLENBQUEsTUFBTztJQUFFLEdBQUdyRztFQUFVLENBQUM7QUFDdkMsQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==