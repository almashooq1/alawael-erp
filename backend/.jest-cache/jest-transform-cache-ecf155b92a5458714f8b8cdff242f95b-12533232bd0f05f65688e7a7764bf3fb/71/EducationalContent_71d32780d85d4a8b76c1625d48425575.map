{"version":3,"names":["mongoose","require","educationalContentSchema","Schema","title","type","String","required","trim","minlength","description","contentType","enum","default","disabilityCategory","contentUrl","thumbnailUrl","duration","Number","level","author","Types","ObjectId","ref","tags","views","rating","average","min","max","count","isPublished","Boolean","publishedAt","Date","accessibilityFeatures","subtitles","signLanguageInterpreter","audioDescription","captions","easyLanguage","largeText","resources","name","url","format","statistics","downloads","shares","comments","status","reviewNotes","timestamps","toJSON","virtuals","toObject","index","createdAt","virtual","get","statics","getPopularContent","limit","find","sort","populate","getByCategory","category","methods","incrementViews","save","module","exports","model"],"sources":["EducationalContent.js"],"sourcesContent":["const mongoose = require('mongoose');\r\n\r\nconst educationalContentSchema = new mongoose.Schema(\r\n  {\r\n    title: {\r\n      type: String,\r\n      required: [true, 'عنوان المحتوى مطلوب'],\r\n      trim: true,\r\n      minlength: [5, 'يجب أن يكون العنوان على الأقل 5 أحرف'],\r\n    },\r\n    description: {\r\n      type: String,\r\n      required: [true, 'وصف المحتوى مطلوب'],\r\n      minlength: [20, 'يجب أن يكون الوصف على الأقل 20 حرف'],\r\n    },\r\n    contentType: {\r\n      type: String,\r\n      enum: ['article', 'video', 'audio', 'pdf', 'infographic', 'interactive'],\r\n      default: 'article',\r\n      required: true,\r\n    },\r\n    disabilityCategory: {\r\n      type: String,\r\n      enum: [\r\n        'visual',\r\n        'hearing',\r\n        'mobility',\r\n        'intellectual',\r\n        'psychosocial',\r\n        'multiple',\r\n        'general',\r\n      ],\r\n      default: 'general',\r\n      required: true,\r\n    },\r\n    contentUrl: {\r\n      type: String,\r\n      required: [true, 'رابط المحتوى مطلوب'],\r\n    },\r\n    thumbnailUrl: String,\r\n    duration: {\r\n      type: Number,\r\n      description: 'المدة بالدقائق',\r\n    },\r\n    level: {\r\n      type: String,\r\n      enum: ['beginner', 'intermediate', 'advanced'],\r\n      default: 'beginner',\r\n    },\r\n    author: {\r\n      type: mongoose.Schema.Types.ObjectId,\r\n      ref: 'User',\r\n      required: true,\r\n    },\r\n    tags: [String],\r\n    views: {\r\n      type: Number,\r\n      default: 0,\r\n    },\r\n    rating: {\r\n      average: {\r\n        type: Number,\r\n        default: 0,\r\n        min: 0,\r\n        max: 5,\r\n      },\r\n      count: {\r\n        type: Number,\r\n        default: 0,\r\n      },\r\n    },\r\n    isPublished: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    publishedAt: Date,\r\n    accessibilityFeatures: {\r\n      subtitles: Boolean,\r\n      signLanguageInterpreter: Boolean,\r\n      audioDescription: Boolean,\r\n      captions: Boolean,\r\n      easyLanguage: Boolean,\r\n      largeText: Boolean,\r\n    },\r\n    resources: [\r\n      {\r\n        name: String,\r\n        url: String,\r\n        format: String,\r\n      },\r\n    ],\r\n    statistics: {\r\n      downloads: {\r\n        type: Number,\r\n        default: 0,\r\n      },\r\n      shares: {\r\n        type: Number,\r\n        default: 0,\r\n      },\r\n      comments: {\r\n        type: Number,\r\n        default: 0,\r\n      },\r\n    },\r\n    status: {\r\n      type: String,\r\n      enum: ['draft', 'pending_review', 'approved', 'rejected'],\r\n      default: 'draft',\r\n    },\r\n    reviewNotes: String,\r\n  },\r\n  {\r\n    timestamps: true,\r\n    toJSON: { virtuals: true },\r\n    toObject: { virtuals: true },\r\n  }\r\n);\r\n\r\n// Indexes\r\neducationalContentSchema.index({ disabilityCategory: 1, isPublished: 1 });\r\neducationalContentSchema.index({ author: 1 });\r\neducationalContentSchema.index({ contentType: 1 });\r\neducationalContentSchema.index({ createdAt: -1 });\r\neducationalContentSchema.index({ tags: 1 });\r\n\r\n// Virtual for content category\r\neducationalContentSchema.virtual('category').get(function () {\r\n  return this.disabilityCategory;\r\n});\r\n\r\n// Static method to get popular content\r\neducationalContentSchema.statics.getPopularContent = function (limit = 10) {\r\n  return this.find({ isPublished: true })\r\n    .sort({ views: -1, 'rating.average': -1 })\r\n    .limit(limit)\r\n    .populate('author', 'name email');\r\n};\r\n\r\n// Static method to get content by category\r\neducationalContentSchema.statics.getByCategory = function (category, limit = 20) {\r\n  return this.find({\r\n    disabilityCategory: category,\r\n    isPublished: true,\r\n  })\r\n    .sort({ createdAt: -1 })\r\n    .limit(limit)\r\n    .populate('author', 'name email');\r\n};\r\n\r\n// Instance method to increment views\r\neducationalContentSchema.methods.incrementViews = function () {\r\n  this.views += 1;\r\n  return this.save();\r\n};\r\n\r\nmodule.exports = mongoose.model('EducationalContent', educationalContentSchema);\r\n"],"mappings":"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","ignoreList":[]}