{"version":3,"names":["mongoose","require","scheduledNotificationSchema","Schema","userId","type","Types","ObjectId","ref","required","index","title","String","message","channels","enum","default","scheduleTime","Date","sent","Boolean","sentAt","createdBy","metadata","Mixed","timestamps","ScheduledNotification","model","module","exports"],"sources":["ScheduledNotification.js"],"sourcesContent":["const mongoose = require('mongoose');\r\n\r\nconst scheduledNotificationSchema = new mongoose.Schema(\r\n  {\r\n    userId: {\r\n      type: mongoose.Schema.Types.ObjectId,\r\n      ref: 'User',\r\n      required: true,\r\n      index: true,\r\n    },\r\n    title: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n    message: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n    channels: {\r\n      type: [String],\r\n      enum: ['in-app', 'email', 'sms', 'whatsapp', 'push'],\r\n      default: ['in-app'],\r\n    },\r\n    scheduleTime: {\r\n      type: Date,\r\n      required: true,\r\n      index: true,\r\n    },\r\n    sent: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    sentAt: {\r\n      type: Date,\r\n    },\r\n    createdBy: {\r\n      type: mongoose.Schema.Types.ObjectId,\r\n      ref: 'User',\r\n      required: true,\r\n    },\r\n    metadata: {\r\n      type: mongoose.Schema.Types.Mixed,\r\n      default: {},\r\n    },\r\n  },\r\n  {\r\n    timestamps: true,\r\n  }\r\n);\r\n\r\nscheduledNotificationSchema.index({ sent: 1, scheduleTime: 1 });\r\n\r\nconst ScheduledNotification = mongoose.model('ScheduledNotification', scheduledNotificationSchema);\r\n\r\nmodule.exports = ScheduledNotification;\r\n"],"mappings":"AAAA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAU,CAAC;AAEpC,MAAMC,2BAA2B,GAAG,IAAIF,QAAQ,CAACG,MAAM,CACrD;EACEC,MAAM,EAAE;IACNC,IAAI,EAAEL,QAAQ,CAACG,MAAM,CAACG,KAAK,CAACC,QAAQ;IACpCC,GAAG,EAAE,MAAM;IACXC,QAAQ,EAAE,IAAI;IACdC,KAAK,EAAE;EACT,CAAC;EACDC,KAAK,EAAE;IACLN,IAAI,EAAEO,MAAM;IACZH,QAAQ,EAAE;EACZ,CAAC;EACDI,OAAO,EAAE;IACPR,IAAI,EAAEO,MAAM;IACZH,QAAQ,EAAE;EACZ,CAAC;EACDK,QAAQ,EAAE;IACRT,IAAI,EAAE,CAACO,MAAM,CAAC;IACdG,IAAI,EAAE,CAAC,QAAQ,EAAE,OAAO,EAAE,KAAK,EAAE,UAAU,EAAE,MAAM,CAAC;IACpDC,OAAO,EAAE,CAAC,QAAQ;EACpB,CAAC;EACDC,YAAY,EAAE;IACZZ,IAAI,EAAEa,IAAI;IACVT,QAAQ,EAAE,IAAI;IACdC,KAAK,EAAE;EACT,CAAC;EACDS,IAAI,EAAE;IACJd,IAAI,EAAEe,OAAO;IACbJ,OAAO,EAAE;EACX,CAAC;EACDK,MAAM,EAAE;IACNhB,IAAI,EAAEa;EACR,CAAC;EACDI,SAAS,EAAE;IACTjB,IAAI,EAAEL,QAAQ,CAACG,MAAM,CAACG,KAAK,CAACC,QAAQ;IACpCC,GAAG,EAAE,MAAM;IACXC,QAAQ,EAAE;EACZ,CAAC;EACDc,QAAQ,EAAE;IACRlB,IAAI,EAAEL,QAAQ,CAACG,MAAM,CAACG,KAAK,CAACkB,KAAK;IACjCR,OAAO,EAAE,CAAC;EACZ;AACF,CAAC,EACD;EACES,UAAU,EAAE;AACd,CACF,CAAC;AAEDvB,2BAA2B,CAACQ,KAAK,CAAC;EAAES,IAAI,EAAE,CAAC;EAAEF,YAAY,EAAE;AAAE,CAAC,CAAC;AAE/D,MAAMS,qBAAqB,GAAG1B,QAAQ,CAAC2B,KAAK,CAAC,uBAAuB,EAAEzB,2BAA2B,CAAC;AAElG0B,MAAM,CAACC,OAAO,GAAGH,qBAAqB","ignoreList":[]}