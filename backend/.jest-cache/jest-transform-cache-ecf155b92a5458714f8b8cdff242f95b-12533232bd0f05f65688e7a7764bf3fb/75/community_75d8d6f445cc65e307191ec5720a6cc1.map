{"version":3,"names":["express","require","router","Router","communityData","content","sessions","library","subscriptions","ratings","reviews","contentIdCounter","sessionIdCounter","VALID_CATEGORIES","post","req","res","title","description","contentType","disabilityCategory","contentUrl","level","tags","accessibilityFeatures","body","newContent","_id","views","rating","createdAt","Date","updatedAt","push","status","json","success","message","data","error","get","popular","sort","a","b","slice","category","params","includes","join","filtered","filter","c","total","length","stats","totalContent","totalViews","reduce","acc","averageRating","Math","max","contentByCategory","contentByType","forEach","page","parseInt","query","limit","skip","paginatedContent","contentId","id","find","userId","user","sessionType","targetDisabilityCategory","scheduledDate","duration","newSession","participants","now","upcoming","s","totalSessions","activeSessions","totalParticipants","sum","upcomingSessions","sessionId","isNaN","session","String","console","comment","feedback","author","resourceType","fileUrl","language","license","newResource","downloads","q","type","results","r","toLowerCase","resources","totalResources","totalDownloads","resourcesByType","resourcesByCategory","resource","review","resourceId","plans","name","price","features","limitations","newPlan","planId","subscriptionType","subscription","startDate","endDate","totalSubscriptions","activeSubscriptions","subscriptionByPlan","revenue","module","exports"],"sources":["community.js"],"sourcesContent":["/**\r\n * Community Awareness Routes\r\n * Endpoints for educational content, virtual sessions, digital library, and subscriptions\r\n */\r\n\r\nconst express = require('express');\r\nconst router = express.Router();\r\n\r\n// Mock database storage\r\nconst communityData = {\r\n  content: [],\r\n  sessions: [],\r\n  library: [],\r\n  subscriptions: [],\r\n  ratings: [],\r\n  reviews: [],\r\n};\r\n\r\nlet contentIdCounter = 1;\r\nlet sessionIdCounter = 1;\r\n\r\n// Valid disability categories\r\nconst VALID_CATEGORIES = ['visual', 'hearing', 'mobility', 'cognitive', 'learning', 'developmental'];\r\n\r\n// ================== EDUCATIONAL CONTENT ==================\r\n\r\n// POST /api/community/content - Create educational content\r\nrouter.post('/content', (req, res) => {\r\n  try {\r\n    const { title, description, contentType, disabilityCategory, contentUrl, level, tags, accessibilityFeatures } = req.body;\r\n    \r\n    const newContent = {\r\n      _id: contentIdCounter++,\r\n      title,\r\n      description,\r\n      contentType,\r\n      disabilityCategory,\r\n      contentUrl,\r\n      level,\r\n      tags: tags || [],\r\n      accessibilityFeatures: accessibilityFeatures || {},\r\n      views: 0,\r\n      rating: 0,\r\n      createdAt: new Date(),\r\n      updatedAt: new Date(),\r\n    };\r\n\r\n    communityData.content.push(newContent);\r\n\r\n    return res.status(201).json({\r\n      success: true,\r\n      message: 'Educational content created successfully',\r\n      data: newContent,\r\n    });\r\n  } catch (error) {\r\n    return res.status(500).json({\r\n      success: false,\r\n      message: error.message,\r\n    });\r\n  }\r\n});\r\n\r\n// GET /api/community/content/popular - Get popular content (MUST come before /:id)\r\nrouter.get('/content/popular', (req, res) => {\r\n  try {\r\n    const popular = communityData.content.sort((a, b) => b.views - a.views).slice(0, 10);\r\n\r\n    return res.status(200).json({\r\n      success: true,\r\n      data: popular,\r\n    });\r\n  } catch (error) {\r\n    return res.status(500).json({\r\n      success: false,\r\n      message: error.message,\r\n    });\r\n  }\r\n});\r\n\r\n// GET /api/community/content/category/:category - Get content by category (MUST come before /:id)\r\nrouter.get('/content/category/:category', (req, res) => {\r\n  try {\r\n    const category = req.params.category;\r\n    \r\n    // Validate category\r\n    if (!VALID_CATEGORIES.includes(category)) {\r\n      return res.status(400).json({\r\n        success: false,\r\n        message: `Invalid category. Valid categories are: ${VALID_CATEGORIES.join(', ')}`,\r\n      });\r\n    }\r\n\r\n    const filtered = communityData.content.filter(c => c.disabilityCategory === category);\r\n\r\n    return res.status(200).json({\r\n      success: true,\r\n      data: {\r\n        content: filtered,\r\n        total: filtered.length,\r\n      },\r\n    });\r\n  } catch (error) {\r\n    return res.status(500).json({\r\n      success: false,\r\n      message: error.message,\r\n    });\r\n  }\r\n});\r\n\r\n// GET /api/community/content/stats - Get content statistics (MUST come before /:id)\r\nrouter.get('/content/stats', (req, res) => {\r\n  try {\r\n    const stats = {\r\n      totalContent: communityData.content.length,\r\n      totalViews: communityData.content.reduce((acc, c) => acc + c.views, 0),\r\n      averageRating: communityData.content.reduce((acc, c) => acc + c.rating, 0) / Math.max(communityData.content.length, 1),\r\n      contentByCategory: {},\r\n      contentByType: {},\r\n    };\r\n\r\n    communityData.content.forEach(c => {\r\n      stats.contentByCategory[c.disabilityCategory] = (stats.contentByCategory[c.disabilityCategory] || 0) + 1;\r\n      stats.contentByType[c.contentType] = (stats.contentByType[c.contentType] || 0) + 1;\r\n    });\r\n\r\n    return res.status(200).json({\r\n      success: true,\r\n      data: stats,\r\n    });\r\n  } catch (error) {\r\n    return res.status(500).json({\r\n      success: false,\r\n      message: error.message,\r\n    });\r\n  }\r\n});\r\n\r\n// GET /api/community/content - Get all educational content\r\nrouter.get('/content', (req, res) => {\r\n  try {\r\n    const page = parseInt(req.query.page) || 1;\r\n    const limit = parseInt(req.query.limit) || 10;\r\n    const skip = (page - 1) * limit;\r\n\r\n    const paginatedContent = communityData.content.slice(skip, skip + limit);\r\n\r\n    return res.status(200).json({\r\n      success: true,\r\n      data: {\r\n        content: paginatedContent,\r\n        total: communityData.content.length,\r\n        page,\r\n        limit,\r\n      },\r\n    });\r\n  } catch (error) {\r\n    return res.status(500).json({\r\n      success: false,\r\n      message: error.message,\r\n    });\r\n  }\r\n});\r\n\r\n// GET /api/community/content/:id - Get specific content by ID\r\nrouter.get('/content/:id', (req, res) => {\r\n  try {\r\n    const contentId = parseInt(req.params.id);\r\n    const content = communityData.content.find(c => c._id === contentId);\r\n\r\n    if (!content) {\r\n      return res.status(404).json({\r\n        success: false,\r\n        message: 'Content not found',\r\n      });\r\n    }\r\n\r\n    content.views++;\r\n    return res.status(200).json({\r\n      success: true,\r\n      data: content,\r\n    });\r\n  } catch (error) {\r\n    return res.status(500).json({\r\n      success: false,\r\n      message: error.message,\r\n    });\r\n  }\r\n});\r\n\r\n// POST /api/community/content/:id/rate - Rate content\r\nrouter.post('/content/:id/rate', (req, res) => {\r\n  try {\r\n    const { rating } = req.body;\r\n    const contentId = parseInt(req.params.id);\r\n    \r\n    // Validate rating\r\n    if (!rating || rating < 1 || rating > 5) {\r\n      return res.status(400).json({\r\n        success: false,\r\n        message: 'Rating must be between 1 and 5',\r\n      });\r\n    }\r\n\r\n    const content = communityData.content.find(c => c._id === contentId);\r\n\r\n    if (!content) {\r\n      return res.status(404).json({\r\n        success: false,\r\n        message: 'Content not found',\r\n      });\r\n    }\r\n\r\n    communityData.ratings.push({ contentId, rating, userId: req.user?._id || 'guest', createdAt: new Date() });\r\n    content.rating = (content.rating * 0.9 + rating * 0.1); // Weighted average\r\n\r\n    return res.status(200).json({\r\n      success: true,\r\n      message: 'Content rated successfully',\r\n      data: content,\r\n    });\r\n  } catch (error) {\r\n    return res.status(500).json({\r\n      success: false,\r\n      message: error.message,\r\n    });\r\n  }\r\n});\r\n\r\n// ================== VIRTUAL SESSIONS ==================\r\n\r\n// POST /api/community/sessions - Create virtual session\r\nrouter.post('/sessions', (req, res) => {\r\n  try {\r\n    const { title, description, sessionType, targetDisabilityCategory, scheduledDate, duration } = req.body;\r\n\r\n    const newSession = {\r\n      _id: sessionIdCounter++,\r\n      title,\r\n      description,\r\n      sessionType,\r\n      targetDisabilityCategory,\r\n      scheduledDate,\r\n      duration,\r\n      participants: [],\r\n      status: 'scheduled',\r\n      createdAt: new Date(),\r\n      updatedAt: new Date(),\r\n    };\r\n\r\n    communityData.sessions.push(newSession);\r\n\r\n    return res.status(201).json({\r\n      success: true,\r\n      message: 'Virtual session created successfully',\r\n      data: newSession,\r\n    });\r\n  } catch (error) {\r\n    return res.status(500).json({\r\n      success: false,\r\n      message: error.message,\r\n    });\r\n  }\r\n});\r\n\r\n// GET /api/community/sessions/upcoming - Get upcoming sessions (MUST come before /:id)\r\nrouter.get('/sessions/upcoming', (req, res) => {\r\n  try {\r\n    const now = new Date();\r\n    const upcoming = communityData.sessions.filter(s => new Date(s.scheduledDate) > now);\r\n\r\n    return res.status(200).json({\r\n      success: true,\r\n      data: upcoming,\r\n    });\r\n  } catch (error) {\r\n    return res.status(500).json({\r\n      success: false,\r\n      message: error.message,\r\n    });\r\n  }\r\n});\r\n\r\n// GET /api/community/sessions/stats - Get session statistics (MUST come before /:id)\r\nrouter.get('/sessions/stats', (req, res) => {\r\n  try {\r\n    const stats = {\r\n      totalSessions: communityData.sessions.length,\r\n      activeSessions: communityData.sessions.filter(s => s.status === 'active').length,\r\n      totalParticipants: communityData.sessions.reduce((sum, s) => sum + s.participants.length, 0),\r\n      upcomingSessions: communityData.sessions.filter(s => new Date(s.scheduledDate) > new Date()).length,\r\n    };\r\n\r\n    return res.status(200).json({\r\n      success: true,\r\n      data: stats,\r\n    });\r\n  } catch (error) {\r\n    return res.status(500).json({\r\n      success: false,\r\n      message: error.message,\r\n    });\r\n  }\r\n});\r\n\r\n// GET /api/community/sessions - Get all sessions\r\nrouter.get('/sessions', (req, res) => {\r\n  try {\r\n    return res.status(200).json({\r\n      success: true,\r\n      data: {\r\n        sessions: communityData.sessions,\r\n        total: communityData.sessions.length,\r\n      },\r\n    });\r\n  } catch (error) {\r\n    return res.status(500).json({\r\n      success: false,\r\n      message: error.message,\r\n    });\r\n  }\r\n});\r\n\r\n// POST /api/community/sessions/:id/register - Register for session\r\nrouter.post('/sessions/:id/register', (req, res) => {\r\n  try {\r\n    let sessionId = req.params.id;\r\n    \r\n    // Try to parse as number, otherwise use as string\r\n    if (!isNaN(sessionId)) {\r\n      sessionId = parseInt(sessionId);\r\n    }\r\n    \r\n    const session = communityData.sessions.find(s => {\r\n      if (typeof sessionId === 'number') {\r\n        return s._id === sessionId;\r\n      } else {\r\n        return s._id === sessionId || String(s._id) === sessionId;\r\n      }\r\n    });\r\n\r\n    if (!session) {\r\n      return res.status(404).json({\r\n        success: false,\r\n        message: 'Session not found',\r\n      });\r\n    }\r\n\r\n    // Extract userId from either request body or generate one for testing\r\n    const userId = req.body?.userId || `user-${req.user?._id || 'guest'}`;\r\n    \r\n    if (userId && !session.participants.includes(userId)) {\r\n      session.participants.push(userId);\r\n    }\r\n\r\n    return res.status(200).json({\r\n      success: true,\r\n      message: 'Registered for session successfully',\r\n      data: session,\r\n    });\r\n  } catch (error) {\r\n    console.error('Register session error:', error);\r\n    return res.status(500).json({\r\n      success: false,\r\n      message: error.message,\r\n    });\r\n  }\r\n});\r\n\r\n// POST /api/community/sessions/:id/feedback - Add session feedback\r\nrouter.post('/sessions/:id/feedback', (req, res) => {\r\n  try {\r\n    const sessionId = parseInt(req.params.id);\r\n    const { userId, rating, comment } = req.body;\r\n    const session = communityData.sessions.find(s => s._id === sessionId);\r\n\r\n    if (!session) {\r\n      return res.status(404).json({\r\n        success: false,\r\n        message: 'Session not found',\r\n      });\r\n    }\r\n\r\n    const feedback = {\r\n      sessionId,\r\n      userId,\r\n      rating,\r\n      comment,\r\n      createdAt: new Date(),\r\n    };\r\n\r\n    communityData.reviews.push(feedback);\r\n\r\n    return res.status(200).json({\r\n      success: true,\r\n      message: 'Feedback added successfully',\r\n      data: feedback,\r\n    });\r\n  } catch (error) {\r\n    return res.status(500).json({\r\n      success: false,\r\n      message: error.message,\r\n    });\r\n  }\r\n});\r\n\r\n// ================== DIGITAL LIBRARY ==================\r\n\r\n// POST /api/community/library/upload - Upload resource to library\r\nrouter.post('/library/upload', (req, res) => {\r\n  try {\r\n    const { title, author, resourceType, fileUrl, category, description, language, tags, license } = req.body;\r\n\r\n    const newResource = {\r\n      _id: `lib-${Date.now()}`,\r\n      title,\r\n      author,\r\n      resourceType,\r\n      fileUrl,\r\n      category: category || 'general',\r\n      description,\r\n      language: language || 'en',\r\n      tags: tags || [],\r\n      license: license || 'cc_by',\r\n      downloads: 0,\r\n      rating: 0,\r\n      createdAt: new Date(),\r\n    };\r\n\r\n    communityData.library.push(newResource);\r\n\r\n    return res.status(201).json({\r\n      success: true,\r\n      message: 'Resource added to library',\r\n      data: newResource,\r\n    });\r\n  } catch (error) {\r\n    return res.status(500).json({\r\n      success: false,\r\n      message: error.message,\r\n    });\r\n  }\r\n});\r\n\r\n// POST /api/community/library - Add to library (alias for upload)\r\nrouter.post('/library', (req, res) => {\r\n  try {\r\n    const { title, author, resourceType, fileUrl, category, description, language, tags, license } = req.body;\r\n\r\n    const newResource = {\r\n      _id: `lib-${Date.now()}`,\r\n      title,\r\n      author,\r\n      resourceType,\r\n      fileUrl,\r\n      category: category || 'general',\r\n      description,\r\n      language: language || 'en',\r\n      tags: tags || [],\r\n      license: license || 'cc_by',\r\n      downloads: 0,\r\n      rating: 0,\r\n      createdAt: new Date(),\r\n    };\r\n\r\n    communityData.library.push(newResource);\r\n\r\n    return res.status(201).json({\r\n      success: true,\r\n      message: 'Resource added to library',\r\n      data: newResource,\r\n    });\r\n  } catch (error) {\r\n    return res.status(500).json({\r\n      success: false,\r\n      message: error.message,\r\n    });\r\n  }\r\n});\r\n\r\n// GET /api/community/library/search - Search library resources (MUST come before /:id)\r\nrouter.get('/library/search', (req, res) => {\r\n  try {\r\n    const { q, category, type } = req.query;\r\n    let results = communityData.library;\r\n\r\n    if (q) {\r\n      results = results.filter(r => \r\n        r.title.toLowerCase().includes(q.toLowerCase()) ||\r\n        r.author.toLowerCase().includes(q.toLowerCase())\r\n      );\r\n    }\r\n\r\n    if (category) {\r\n      results = results.filter(r => r.category === category);\r\n    }\r\n\r\n    if (type) {\r\n      results = results.filter(r => r.resourceType === type);\r\n    }\r\n\r\n    return res.status(200).json({\r\n      success: true,\r\n      data: results,\r\n    });\r\n  } catch (error) {\r\n    return res.status(500).json({\r\n      success: false,\r\n      message: error.message,\r\n    });\r\n  }\r\n});\r\n\r\n// GET /api/community/library/category/:category - Get resources by category (MUST come before /:id)\r\nrouter.get('/library/category/:category', (req, res) => {\r\n  try {\r\n    const filtered = communityData.library.filter(r => r.category === req.params.category);\r\n\r\n    return res.status(200).json({\r\n      success: true,\r\n      data: {\r\n        resources: filtered,\r\n        total: filtered.length,\r\n      },\r\n    });\r\n  } catch (error) {\r\n    return res.status(500).json({\r\n      success: false,\r\n      message: error.message,\r\n    });\r\n  }\r\n});\r\n\r\n// GET /api/community/library/stats - Get library statistics (MUST come before /:id)\r\nrouter.get('/library/stats', (req, res) => {\r\n  try {\r\n    const stats = {\r\n      totalResources: communityData.library.length,\r\n      totalDownloads: communityData.library.reduce((acc, r) => acc + r.downloads, 0),\r\n      averageRating: communityData.library.reduce((acc, r) => acc + r.rating, 0) / Math.max(communityData.library.length, 1),\r\n      resourcesByType: {},\r\n      resourcesByCategory: {},\r\n    };\r\n\r\n    communityData.library.forEach(r => {\r\n      stats.resourcesByType[r.resourceType] = (stats.resourcesByType[r.resourceType] || 0) + 1;\r\n      stats.resourcesByCategory[r.category] = (stats.resourcesByCategory[r.category] || 0) + 1;\r\n    });\r\n\r\n    return res.status(200).json({\r\n      success: true,\r\n      data: stats,\r\n    });\r\n  } catch (error) {\r\n    return res.status(500).json({\r\n      success: false,\r\n      message: error.message,\r\n    });\r\n  }\r\n});\r\n\r\n// GET /api/community/library - Get library resources\r\nrouter.get('/library', (req, res) => {\r\n  try {\r\n    return res.status(200).json({\r\n      success: true,\r\n      data: {\r\n        resources: communityData.library,\r\n        total: communityData.library.length,\r\n      },\r\n    });\r\n  } catch (error) {\r\n    return res.status(500).json({\r\n      success: false,\r\n      message: error.message,\r\n    });\r\n  }\r\n});\r\n\r\n// POST /api/community/library/:id/review - Add review to resource\r\nrouter.post('/library/:id/review', (req, res) => {\r\n  try {\r\n    const { userId, rating, comment } = req.body;\r\n    const resource = communityData.library.find(r => r._id === req.params.id);\r\n\r\n    if (!resource) {\r\n      return res.status(404).json({\r\n        success: false,\r\n        message: 'Resource not found',\r\n      });\r\n    }\r\n\r\n    const review = {\r\n      resourceId: req.params.id,\r\n      userId,\r\n      rating,\r\n      comment,\r\n      createdAt: new Date(),\r\n    };\r\n\r\n    communityData.reviews.push(review);\r\n    resource.rating = (resource.rating * 0.9 + rating * 0.1);\r\n\r\n    return res.status(200).json({\r\n      success: true,\r\n      message: 'Review added successfully',\r\n      data: review,\r\n    });\r\n  } catch (error) {\r\n    return res.status(500).json({\r\n      success: false,\r\n      message: error.message,\r\n    });\r\n  }\r\n});\r\n\r\n// POST /api/community/library/:id/download - Download resource\r\nrouter.post('/library/:id/download', (req, res) => {\r\n  try {\r\n    const resource = communityData.library.find(r => r._id === req.params.id);\r\n\r\n    if (!resource) {\r\n      return res.status(404).json({\r\n        success: false,\r\n        message: 'Resource not found',\r\n      });\r\n    }\r\n\r\n    resource.downloads++;\r\n\r\n    return res.status(200).json({\r\n      success: true,\r\n      message: 'Download started',\r\n      data: resource,\r\n    });\r\n  } catch (error) {\r\n    return res.status(500).json({\r\n      success: false,\r\n      message: error.message,\r\n    });\r\n  }\r\n});\r\n\r\n// ================== SUBSCRIPTIONS ==================\r\n\r\n// GET /api/community/subscriptions/plans - Get subscription plans (MUST come before /:userId)\r\nrouter.get('/subscriptions/plans', (req, res) => {\r\n  try {\r\n    const plans = [\r\n      {\r\n        _id: 'basic',\r\n        name: 'Basic',\r\n        price: 0,\r\n        features: ['Access to public content'],\r\n      },\r\n      {\r\n        _id: 'premium',\r\n        name: 'Premium',\r\n        price: 99,\r\n        features: ['All content', 'Priority support', 'Ad-free'],\r\n      },\r\n      {\r\n        _id: 'enterprise',\r\n        name: 'Enterprise',\r\n        price: 999,\r\n        features: ['Custom content', '24/7 support', 'API access'],\r\n      },\r\n    ];\r\n\r\n    return res.status(200).json({\r\n      success: true,\r\n      data: plans,\r\n    });\r\n  } catch (error) {\r\n    return res.status(500).json({\r\n      success: false,\r\n      message: error.message,\r\n    });\r\n  }\r\n});\r\n\r\n// POST /api/community/subscriptions/plans - Create subscription plan (admin only)\r\nrouter.post('/subscriptions/plans', (req, res) => {\r\n  try {\r\n    const { name, description, price, features, limitations } = req.body;\r\n\r\n    const newPlan = {\r\n      _id: `plan-${Date.now()}`,\r\n      name,\r\n      description,\r\n      price,\r\n      features,\r\n      limitations,\r\n      createdAt: new Date(),\r\n    };\r\n\r\n    communityData.subscriptions.push(newPlan);\r\n\r\n    return res.status(200).json({\r\n      success: true,\r\n      message: 'Subscription plan created successfully',\r\n      data: newPlan,\r\n    });\r\n  } catch (error) {\r\n    return res.status(500).json({\r\n      success: false,\r\n      message: error.message,\r\n    });\r\n  }\r\n});\r\n\r\n// POST /api/community/subscriptions/subscribe - Subscribe to plan\r\nrouter.post('/subscriptions/subscribe', (req, res) => {\r\n  try {\r\n    const { planId, subscriptionType } = req.body;\r\n\r\n    const subscription = {\r\n      _id: `sub-${Date.now()}`,\r\n      planId,\r\n      subscriptionType: subscriptionType || 'monthly',\r\n      startDate: new Date(),\r\n      endDate: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000),\r\n      status: 'active',\r\n    };\r\n\r\n    communityData.subscriptions.push(subscription);\r\n\r\n    return res.status(201).json({\r\n      success: true,\r\n      message: 'Subscribed successfully',\r\n      data: subscription,\r\n    });\r\n  } catch (error) {\r\n    return res.status(500).json({\r\n      success: false,\r\n      message: error.message,\r\n    });\r\n  }\r\n});\r\n\r\n// GET /api/community/subscriptions/user - Get current user subscription (MUST come before /:userId)\r\nrouter.get('/subscriptions/user', (req, res) => {\r\n  try {\r\n    // For testing, return a mock subscription\r\n    const subscription = {\r\n      _id: `sub-${Date.now()}`,\r\n      userId: req.user?._id || 'test-user',\r\n      planId: 'premium',\r\n      startDate: new Date(),\r\n      endDate: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000),\r\n      status: 'active',\r\n    };\r\n\r\n    return res.status(200).json({\r\n      success: true,\r\n      data: subscription,\r\n    });\r\n  } catch (error) {\r\n    return res.status(500).json({\r\n      success: false,\r\n      message: error.message,\r\n    });\r\n  }\r\n});\r\n\r\n// GET /api/community/subscriptions/stats - Get subscription statistics (MUST come before /:userId)\r\nrouter.get('/subscriptions/stats', (req, res) => {\r\n  try {\r\n    const stats = {\r\n      totalSubscriptions: communityData.subscriptions.filter(s => s.status === 'active' && !s.features).length || 0,\r\n      activeSubscriptions: communityData.subscriptions.filter(s => s.status === 'active' && !s.features).length || 0,\r\n      subscriptionByPlan: {},\r\n      revenue: 0,\r\n    };\r\n\r\n    communityData.subscriptions.forEach(s => {\r\n      if (!s.features) { // Only count actual subscriptions, not plans\r\n        stats.subscriptionByPlan[s.planId] = (stats.subscriptionByPlan[s.planId] || 0) + 1;\r\n      }\r\n    });\r\n\r\n    return res.status(200).json({\r\n      success: true,\r\n      data: stats,\r\n    });\r\n  } catch (error) {\r\n    return res.status(500).json({\r\n      success: false,\r\n      message: error.message,\r\n    });\r\n  }\r\n});\r\n\r\n// POST /api/community/subscriptions - Subscribe to plan (old endpoint for backward compatibility)\r\nrouter.post('/subscriptions', (req, res) => {\r\n  try {\r\n    const { planId, userId } = req.body;\r\n\r\n    const subscription = {\r\n      _id: `sub-${Date.now()}`,\r\n      userId,\r\n      planId,\r\n      startDate: new Date(),\r\n      endDate: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000),\r\n      status: 'active',\r\n    };\r\n\r\n    communityData.subscriptions.push(subscription);\r\n\r\n    return res.status(201).json({\r\n      success: true,\r\n      message: 'Subscribed successfully',\r\n      data: subscription,\r\n    });\r\n  } catch (error) {\r\n    return res.status(500).json({\r\n      success: false,\r\n      message: error.message,\r\n    });\r\n  }\r\n});\r\n\r\n// GET /api/community/subscriptions/:userId - Get user subscription\r\nrouter.get('/subscriptions/:userId', (req, res) => {\r\n  try {\r\n    const subscription = communityData.subscriptions.find(s => s.userId === req.params.userId && s.status === 'active');\r\n\r\n    if (!subscription) {\r\n      return res.status(404).json({\r\n        success: false,\r\n        message: 'No active subscription found',\r\n      });\r\n    }\r\n\r\n    return res.status(200).json({\r\n      success: true,\r\n      data: subscription,\r\n    });\r\n  } catch (error) {\r\n    return res.status(500).json({\r\n      success: false,\r\n      message: error.message,\r\n    });\r\n  }\r\n});\r\n\r\nmodule.exports = router;\r\n"],"mappings":"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","ignoreList":[]}