{"version":3,"names":["express","require","router","Router","RealtimeCollaborationController","protect","authorize","use","post","createSession","joinSession","leaveSession","applyChange","undo","redo","patch","updatePresence","updateTypingStatus","get","getActiveUsers","addComment","replyToComment","getDocumentSnapshot","getSessionStats","exportChangeHistory","module","exports"],"sources":["realtimeCollaboration.routes.js"],"sourcesContent":["/**\r\n * مسارات التعاون في الوقت الفعلي\r\n * Real-Time Collaboration Routes\r\n */\r\n\r\nconst express = require('express');\r\nconst router = express.Router();\r\nconst RealtimeCollaborationController = require('../controllers/realtimeCollaboration.controller');\r\nconst { protect, authorize } = require('../middleware/auth');\r\n\r\n// جميع المسارات تتطلب المصادقة\r\nrouter.use(protect);\r\n\r\n// ========== إدارة جلسات التعاون ==========\r\n\r\n/**\r\n * @route   POST /api/collaboration/sessions\r\n * @desc    إنشاء جلسة تعاون جديدة\r\n * @access  Private\r\n */\r\nrouter.post('/sessions', RealtimeCollaborationController.createSession);\r\n\r\n/**\r\n * @route   POST /api/collaboration/sessions/:sessionId/join\r\n * @desc    الانضمام إلى جلسة تعاون\r\n * @access  Private\r\n */\r\nrouter.post('/sessions/:sessionId/join', RealtimeCollaborationController.joinSession);\r\n\r\n/**\r\n * @route   POST /api/collaboration/sessions/:sessionId/leave\r\n * @desc    مغادرة جلسة التعاون\r\n * @access  Private\r\n */\r\nrouter.post('/sessions/:sessionId/leave', RealtimeCollaborationController.leaveSession);\r\n\r\n// ========== إدارة التغييرات ==========\r\n\r\n/**\r\n * @route   POST /api/collaboration/sessions/:sessionId/changes\r\n * @desc    تطبيق تغيير على المستند\r\n * @access  Private\r\n */\r\nrouter.post('/sessions/:sessionId/changes', RealtimeCollaborationController.applyChange);\r\n\r\n/**\r\n * @route   POST /api/collaboration/sessions/:sessionId/undo\r\n * @desc    التراجع عن التغيير الأخير\r\n * @access  Private\r\n */\r\nrouter.post('/sessions/:sessionId/undo', RealtimeCollaborationController.undo);\r\n\r\n/**\r\n * @route   POST /api/collaboration/sessions/:sessionId/redo\r\n * @desc    إعادة التغيير المتراجع عنه\r\n * @access  Private\r\n */\r\nrouter.post('/sessions/:sessionId/redo', RealtimeCollaborationController.redo);\r\n\r\n// ========== إدارة الموضع والحضور ==========\r\n\r\n/**\r\n * @route   PATCH /api/collaboration/sessions/:sessionId/presence\r\n * @desc    تحديث موضع المؤشر والتحديد\r\n * @access  Private\r\n */\r\nrouter.patch('/sessions/:sessionId/presence', RealtimeCollaborationController.updatePresence);\r\n\r\n/**\r\n * @route   PATCH /api/collaboration/sessions/:sessionId/typing\r\n * @desc    تحديث حالة الكتابة\r\n * @access  Private\r\n */\r\nrouter.patch('/sessions/:sessionId/typing', RealtimeCollaborationController.updateTypingStatus);\r\n\r\n/**\r\n * @route   GET /api/collaboration/sessions/:sessionId/users\r\n * @desc    الحصول على جميع المستخدمين النشطين\r\n * @access  Private\r\n */\r\nrouter.get('/sessions/:sessionId/users', RealtimeCollaborationController.getActiveUsers);\r\n\r\n// ========== إدارة التعليقات ==========\r\n\r\n/**\r\n * @route   POST /api/collaboration/sessions/:sessionId/comments\r\n * @desc    إضافة تعليق على المستند\r\n * @access  Private\r\n */\r\nrouter.post('/sessions/:sessionId/comments', RealtimeCollaborationController.addComment);\r\n\r\n/**\r\n * @route   POST /api/collaboration/comments/:commentId/replies\r\n * @desc    الرد على تعليق\r\n * @access  Private\r\n */\r\nrouter.post('/comments/:commentId/replies', RealtimeCollaborationController.replyToComment);\r\n\r\n// ========== الإحصائيات والتصدير ==========\r\n\r\n/**\r\n * @route   GET /api/collaboration/sessions/:sessionId/snapshot\r\n * @desc    الحصول على نسخة المستند عند نقطة زمنية معينة\r\n * @access  Private\r\n */\r\nrouter.get('/sessions/:sessionId/snapshot', RealtimeCollaborationController.getDocumentSnapshot);\r\n\r\n/**\r\n * @route   GET /api/collaboration/sessions/:sessionId/stats\r\n * @desc    الحصول على إحصائيات الجلسة\r\n * @access  Private\r\n */\r\nrouter.get('/sessions/:sessionId/stats', RealtimeCollaborationController.getSessionStats);\r\n\r\n/**\r\n * @route   GET /api/collaboration/sessions/:sessionId/export\r\n * @desc    تصدير سجل التغييرات\r\n * @access  Private\r\n */\r\nrouter.get('/sessions/:sessionId/export', RealtimeCollaborationController.exportChangeHistory);\r\n\r\nmodule.exports = router;\r\n"],"mappings":"AAAA;AACA;AACA;AACA;;AAEA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAS,CAAC;AAClC,MAAMC,MAAM,GAAGF,OAAO,CAACG,MAAM,CAAC,CAAC;AAC/B,MAAMC,+BAA+B,GAAGH,OAAO,CAAC,iDAAiD,CAAC;AAClG,MAAM;EAAEI,OAAO;EAAEC;AAAU,CAAC,GAAGL,OAAO,CAAC,oBAAoB,CAAC;;AAE5D;AACAC,MAAM,CAACK,GAAG,CAACF,OAAO,CAAC;;AAEnB;;AAEA;AACA;AACA;AACA;AACA;AACAH,MAAM,CAACM,IAAI,CAAC,WAAW,EAAEJ,+BAA+B,CAACK,aAAa,CAAC;;AAEvE;AACA;AACA;AACA;AACA;AACAP,MAAM,CAACM,IAAI,CAAC,2BAA2B,EAAEJ,+BAA+B,CAACM,WAAW,CAAC;;AAErF;AACA;AACA;AACA;AACA;AACAR,MAAM,CAACM,IAAI,CAAC,4BAA4B,EAAEJ,+BAA+B,CAACO,YAAY,CAAC;;AAEvF;;AAEA;AACA;AACA;AACA;AACA;AACAT,MAAM,CAACM,IAAI,CAAC,8BAA8B,EAAEJ,+BAA+B,CAACQ,WAAW,CAAC;;AAExF;AACA;AACA;AACA;AACA;AACAV,MAAM,CAACM,IAAI,CAAC,2BAA2B,EAAEJ,+BAA+B,CAACS,IAAI,CAAC;;AAE9E;AACA;AACA;AACA;AACA;AACAX,MAAM,CAACM,IAAI,CAAC,2BAA2B,EAAEJ,+BAA+B,CAACU,IAAI,CAAC;;AAE9E;;AAEA;AACA;AACA;AACA;AACA;AACAZ,MAAM,CAACa,KAAK,CAAC,+BAA+B,EAAEX,+BAA+B,CAACY,cAAc,CAAC;;AAE7F;AACA;AACA;AACA;AACA;AACAd,MAAM,CAACa,KAAK,CAAC,6BAA6B,EAAEX,+BAA+B,CAACa,kBAAkB,CAAC;;AAE/F;AACA;AACA;AACA;AACA;AACAf,MAAM,CAACgB,GAAG,CAAC,4BAA4B,EAAEd,+BAA+B,CAACe,cAAc,CAAC;;AAExF;;AAEA;AACA;AACA;AACA;AACA;AACAjB,MAAM,CAACM,IAAI,CAAC,+BAA+B,EAAEJ,+BAA+B,CAACgB,UAAU,CAAC;;AAExF;AACA;AACA;AACA;AACA;AACAlB,MAAM,CAACM,IAAI,CAAC,8BAA8B,EAAEJ,+BAA+B,CAACiB,cAAc,CAAC;;AAE3F;;AAEA;AACA;AACA;AACA;AACA;AACAnB,MAAM,CAACgB,GAAG,CAAC,+BAA+B,EAAEd,+BAA+B,CAACkB,mBAAmB,CAAC;;AAEhG;AACA;AACA;AACA;AACA;AACApB,MAAM,CAACgB,GAAG,CAAC,4BAA4B,EAAEd,+BAA+B,CAACmB,eAAe,CAAC;;AAEzF;AACA;AACA;AACA;AACA;AACArB,MAAM,CAACgB,GAAG,CAAC,6BAA6B,EAAEd,+BAA+B,CAACoB,mBAAmB,CAAC;AAE9FC,MAAM,CAACC,OAAO,GAAGxB,MAAM","ignoreList":[]}