46b75e950433d235b67e0f7e6a2e08ed
/**
 * Users Routes
 * User Management API Endpoints
 *
 * Routes:
 * - GET  /api/users              - Get all users with pagination
 * - POST /api/users              - Create new user
 * - GET  /api/users/:id          - Get user by ID
 * - PATCH /api/users/:id         - Update user
 * - DELETE /api/users/:id        - Delete user
 * - POST /api/users/batch        - Batch create users
 */

const express = require('express');
const router = express.Router();
const {
  authenticate,
  authorize
} = require('../middleware/auth');

/**
 * @route   GET /api/users
 * @access  Private
 * @param   {Number} page - Page number (default: 1)
 * @param   {Number} limit - Items per page (default: 20)
 * @param   {String} role - Filter by role
 * @param   {String} status - Filter by status (active/inactive)
 * @returns {Object} { users: Array, total: Number, page: Number, limit: Number }
 */
router.get('/', authenticate, authorize(['admin', 'manager']), (req, res) => {
  try {
    const {
      page = 1,
      limit = 20
    } = req.query;

    // TODO: Implement user retrieval with filters
    res.json({
      success: true,
      message: 'Users retrieved successfully',
      data: {
        users: [],
        total: 0,
        page: parseInt(page),
        limit: parseInt(limit)
      },
      timestamp: new Date().toISOString()
    });
  } catch (error) {
    res.status(500).json({
      success: false,
      message: 'Error retrieving users',
      error: error.message
    });
  }
});

/**
 * @route   POST /api/users
 * @access  Private
 * @body    {String} email - User email
 * @body    {String} firstName - First name
 * @body    {String} lastName - Last name
 * @body    {String} role - User role
 * @body    {String} department - Department
 * @returns {Object} Created user
 */
router.post('/', authenticate, authorize(['admin']), (req, res) => {
  try {
    const {
      email,
      firstName,
      lastName,
      role,
      department
    } = req.body;

    // Validate required fields
    if (!email || !firstName || !lastName) {
      return res.status(400).json({
        success: false,
        message: 'Missing required fields: email, firstName, lastName'
      });
    }

    // TODO: Implement user creation with validation
    res.status(201).json({
      success: true,
      message: 'User created successfully',
      data: {
        id: 'user_' + Date.now(),
        email,
        firstName,
        lastName,
        role: role || 'user',
        department,
        createdAt: new Date().toISOString()
      }
    });
  } catch (error) {
    res.status(500).json({
      success: false,
      message: 'Error creating user',
      error: error.message
    });
  }
});

/**
 * @route   GET /api/users/:id
 * @access  Private
 * @param   {String} id - User ID
 * @returns {Object} User details
 */
router.get('/:id', authenticate, authorize(['admin', 'manager']), (req, res) => {
  try {
    const {
      id
    } = req.params;
    if (!id) {
      return res.status(400).json({
        success: false,
        message: 'User ID is required'
      });
    }

    // TODO: Implement user retrieval by ID
    res.json({
      success: true,
      message: 'User retrieved successfully',
      data: {
        id,
        email: 'user@example.com',
        firstName: 'John',
        lastName: 'Doe',
        role: 'user',
        status: 'active'
      }
    });
  } catch (error) {
    res.status(500).json({
      success: false,
      message: 'Error retrieving user',
      error: error.message
    });
  }
});

/**
 * @route   PATCH /api/users/:id
 * @access  Private
 * @param   {String} id - User ID
 * @body    {Object} updateData - Fields to update
 * @returns {Object} Updated user
 */
router.patch('/:id', authenticate, authorize(['admin']), (req, res) => {
  try {
    const {
      id
    } = req.params;
    const updateData = req.body;
    if (!id) {
      return res.status(400).json({
        success: false,
        message: 'User ID is required'
      });
    }

    // TODO: Implement user update
    res.json({
      success: true,
      message: 'User updated successfully',
      data: {
        id,
        ...updateData,
        updatedAt: new Date().toISOString()
      }
    });
  } catch (error) {
    res.status(500).json({
      success: false,
      message: 'Error updating user',
      error: error.message
    });
  }
});

/**
 * @route   DELETE /api/users/:id
 * @access  Private
 * @param   {String} id - User ID
 * @returns {Object} Deletion confirmation
 */
router.delete('/:id', authenticate, authorize(['admin']), (req, res) => {
  try {
    const {
      id
    } = req.params;
    if (!id) {
      return res.status(400).json({
        success: false,
        message: 'User ID is required'
      });
    }

    // TODO: Implement user deletion with soft delete
    res.json({
      success: true,
      message: 'User deleted successfully',
      data: {
        id,
        deletedAt: new Date().toISOString()
      }
    });
  } catch (error) {
    res.status(500).json({
      success: false,
      message: 'Error deleting user',
      error: error.message
    });
  }
});

/**
 * @route   POST /api/users/batch
 * @access  Private
 * @body    {Array} users - Array of user objects
 * @returns {Object} Creation results
 */
router.post('/batch', authenticate, authorize(['admin']), (req, res) => {
  try {
    const {
      users
    } = req.body;
    if (!Array.isArray(users) || users.length === 0) {
      return res.status(400).json({
        success: false,
        message: 'Users array is required and cannot be empty'
      });
    }

    // TODO: Implement batch user creation
    const created = users.map(user => ({
      ...user,
      id: 'user_' + Date.now(),
      createdAt: new Date().toISOString()
    }));
    res.status(201).json({
      success: true,
      message: `${created.length} users created successfully`,
      data: {
        created: created.length,
        users: created,
        timestamp: new Date().toISOString()
      }
    });
  } catch (error) {
    res.status(500).json({
      success: false,
      message: 'Error creating users',
      error: error.message
    });
  }
});
module.exports = router;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsInJvdXRlciIsIlJvdXRlciIsImF1dGhlbnRpY2F0ZSIsImF1dGhvcml6ZSIsImdldCIsInJlcSIsInJlcyIsInBhZ2UiLCJsaW1pdCIsInF1ZXJ5IiwianNvbiIsInN1Y2Nlc3MiLCJtZXNzYWdlIiwiZGF0YSIsInVzZXJzIiwidG90YWwiLCJwYXJzZUludCIsInRpbWVzdGFtcCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsImVycm9yIiwic3RhdHVzIiwicG9zdCIsImVtYWlsIiwiZmlyc3ROYW1lIiwibGFzdE5hbWUiLCJyb2xlIiwiZGVwYXJ0bWVudCIsImJvZHkiLCJpZCIsIm5vdyIsImNyZWF0ZWRBdCIsInBhcmFtcyIsInBhdGNoIiwidXBkYXRlRGF0YSIsInVwZGF0ZWRBdCIsImRlbGV0ZSIsImRlbGV0ZWRBdCIsIkFycmF5IiwiaXNBcnJheSIsImxlbmd0aCIsImNyZWF0ZWQiLCJtYXAiLCJ1c2VyIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbInVzZXJzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogVXNlcnMgUm91dGVzXG4gKiBVc2VyIE1hbmFnZW1lbnQgQVBJIEVuZHBvaW50c1xuICpcbiAqIFJvdXRlczpcbiAqIC0gR0VUICAvYXBpL3VzZXJzICAgICAgICAgICAgICAtIEdldCBhbGwgdXNlcnMgd2l0aCBwYWdpbmF0aW9uXG4gKiAtIFBPU1QgL2FwaS91c2VycyAgICAgICAgICAgICAgLSBDcmVhdGUgbmV3IHVzZXJcbiAqIC0gR0VUICAvYXBpL3VzZXJzLzppZCAgICAgICAgICAtIEdldCB1c2VyIGJ5IElEXG4gKiAtIFBBVENIIC9hcGkvdXNlcnMvOmlkICAgICAgICAgLSBVcGRhdGUgdXNlclxuICogLSBERUxFVEUgL2FwaS91c2Vycy86aWQgICAgICAgIC0gRGVsZXRlIHVzZXJcbiAqIC0gUE9TVCAvYXBpL3VzZXJzL2JhdGNoICAgICAgICAtIEJhdGNoIGNyZWF0ZSB1c2Vyc1xuICovXG5cbmNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7XG5jb25zdCByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xuY29uc3QgeyBhdXRoZW50aWNhdGUsIGF1dGhvcml6ZSB9ID0gcmVxdWlyZSgnLi4vbWlkZGxld2FyZS9hdXRoJyk7XG5cbi8qKlxuICogQHJvdXRlICAgR0VUIC9hcGkvdXNlcnNcbiAqIEBhY2Nlc3MgIFByaXZhdGVcbiAqIEBwYXJhbSAgIHtOdW1iZXJ9IHBhZ2UgLSBQYWdlIG51bWJlciAoZGVmYXVsdDogMSlcbiAqIEBwYXJhbSAgIHtOdW1iZXJ9IGxpbWl0IC0gSXRlbXMgcGVyIHBhZ2UgKGRlZmF1bHQ6IDIwKVxuICogQHBhcmFtICAge1N0cmluZ30gcm9sZSAtIEZpbHRlciBieSByb2xlXG4gKiBAcGFyYW0gICB7U3RyaW5nfSBzdGF0dXMgLSBGaWx0ZXIgYnkgc3RhdHVzIChhY3RpdmUvaW5hY3RpdmUpXG4gKiBAcmV0dXJucyB7T2JqZWN0fSB7IHVzZXJzOiBBcnJheSwgdG90YWw6IE51bWJlciwgcGFnZTogTnVtYmVyLCBsaW1pdDogTnVtYmVyIH1cbiAqL1xucm91dGVyLmdldCgnLycsIGF1dGhlbnRpY2F0ZSwgYXV0aG9yaXplKFsnYWRtaW4nLCAnbWFuYWdlciddKSwgKHJlcSwgcmVzKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBwYWdlID0gMSwgbGltaXQgPSAyMCB9ID0gcmVxLnF1ZXJ5O1xuXG4gICAgLy8gVE9ETzogSW1wbGVtZW50IHVzZXIgcmV0cmlldmFsIHdpdGggZmlsdGVyc1xuICAgIHJlcy5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBtZXNzYWdlOiAnVXNlcnMgcmV0cmlldmVkIHN1Y2Nlc3NmdWxseScsXG4gICAgICBkYXRhOiB7XG4gICAgICAgIHVzZXJzOiBbXSxcbiAgICAgICAgdG90YWw6IDAsXG4gICAgICAgIHBhZ2U6IHBhcnNlSW50KHBhZ2UpLFxuICAgICAgICBsaW1pdDogcGFyc2VJbnQobGltaXQpXG4gICAgICB9LFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIG1lc3NhZ2U6ICdFcnJvciByZXRyaWV2aW5nIHVzZXJzJyxcbiAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlXG4gICAgfSk7XG4gIH1cbn0pO1xuXG4vKipcbiAqIEByb3V0ZSAgIFBPU1QgL2FwaS91c2Vyc1xuICogQGFjY2VzcyAgUHJpdmF0ZVxuICogQGJvZHkgICAge1N0cmluZ30gZW1haWwgLSBVc2VyIGVtYWlsXG4gKiBAYm9keSAgICB7U3RyaW5nfSBmaXJzdE5hbWUgLSBGaXJzdCBuYW1lXG4gKiBAYm9keSAgICB7U3RyaW5nfSBsYXN0TmFtZSAtIExhc3QgbmFtZVxuICogQGJvZHkgICAge1N0cmluZ30gcm9sZSAtIFVzZXIgcm9sZVxuICogQGJvZHkgICAge1N0cmluZ30gZGVwYXJ0bWVudCAtIERlcGFydG1lbnRcbiAqIEByZXR1cm5zIHtPYmplY3R9IENyZWF0ZWQgdXNlclxuICovXG5yb3V0ZXIucG9zdCgnLycsIGF1dGhlbnRpY2F0ZSwgYXV0aG9yaXplKFsnYWRtaW4nXSksIChyZXEsIHJlcykgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHsgZW1haWwsIGZpcnN0TmFtZSwgbGFzdE5hbWUsIHJvbGUsIGRlcGFydG1lbnQgfSA9IHJlcS5ib2R5O1xuXG4gICAgLy8gVmFsaWRhdGUgcmVxdWlyZWQgZmllbGRzXG4gICAgaWYgKCFlbWFpbCB8fCAhZmlyc3ROYW1lIHx8ICFsYXN0TmFtZSkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIG1lc3NhZ2U6ICdNaXNzaW5nIHJlcXVpcmVkIGZpZWxkczogZW1haWwsIGZpcnN0TmFtZSwgbGFzdE5hbWUnXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBUT0RPOiBJbXBsZW1lbnQgdXNlciBjcmVhdGlvbiB3aXRoIHZhbGlkYXRpb25cbiAgICByZXMuc3RhdHVzKDIwMSkuanNvbih7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgbWVzc2FnZTogJ1VzZXIgY3JlYXRlZCBzdWNjZXNzZnVsbHknLFxuICAgICAgZGF0YToge1xuICAgICAgICBpZDogJ3VzZXJfJyArIERhdGUubm93KCksXG4gICAgICAgIGVtYWlsLFxuICAgICAgICBmaXJzdE5hbWUsXG4gICAgICAgIGxhc3ROYW1lLFxuICAgICAgICByb2xlOiByb2xlIHx8ICd1c2VyJyxcbiAgICAgICAgZGVwYXJ0bWVudCxcbiAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgIH1cbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIG1lc3NhZ2U6ICdFcnJvciBjcmVhdGluZyB1c2VyJyxcbiAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlXG4gICAgfSk7XG4gIH1cbn0pO1xuXG4vKipcbiAqIEByb3V0ZSAgIEdFVCAvYXBpL3VzZXJzLzppZFxuICogQGFjY2VzcyAgUHJpdmF0ZVxuICogQHBhcmFtICAge1N0cmluZ30gaWQgLSBVc2VyIElEXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBVc2VyIGRldGFpbHNcbiAqL1xucm91dGVyLmdldCgnLzppZCcsIGF1dGhlbnRpY2F0ZSwgYXV0aG9yaXplKFsnYWRtaW4nLCAnbWFuYWdlciddKSwgKHJlcSwgcmVzKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBpZCB9ID0gcmVxLnBhcmFtcztcblxuICAgIGlmICghaWQpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBtZXNzYWdlOiAnVXNlciBJRCBpcyByZXF1aXJlZCdcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFRPRE86IEltcGxlbWVudCB1c2VyIHJldHJpZXZhbCBieSBJRFxuICAgIHJlcy5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBtZXNzYWdlOiAnVXNlciByZXRyaWV2ZWQgc3VjY2Vzc2Z1bGx5JyxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgaWQsXG4gICAgICAgIGVtYWlsOiAndXNlckBleGFtcGxlLmNvbScsXG4gICAgICAgIGZpcnN0TmFtZTogJ0pvaG4nLFxuICAgICAgICBsYXN0TmFtZTogJ0RvZScsXG4gICAgICAgIHJvbGU6ICd1c2VyJyxcbiAgICAgICAgc3RhdHVzOiAnYWN0aXZlJ1xuICAgICAgfVxuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgbWVzc2FnZTogJ0Vycm9yIHJldHJpZXZpbmcgdXNlcicsXG4gICAgICBlcnJvcjogZXJyb3IubWVzc2FnZVxuICAgIH0pO1xuICB9XG59KTtcblxuLyoqXG4gKiBAcm91dGUgICBQQVRDSCAvYXBpL3VzZXJzLzppZFxuICogQGFjY2VzcyAgUHJpdmF0ZVxuICogQHBhcmFtICAge1N0cmluZ30gaWQgLSBVc2VyIElEXG4gKiBAYm9keSAgICB7T2JqZWN0fSB1cGRhdGVEYXRhIC0gRmllbGRzIHRvIHVwZGF0ZVxuICogQHJldHVybnMge09iamVjdH0gVXBkYXRlZCB1c2VyXG4gKi9cbnJvdXRlci5wYXRjaCgnLzppZCcsIGF1dGhlbnRpY2F0ZSwgYXV0aG9yaXplKFsnYWRtaW4nXSksIChyZXEsIHJlcykgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHsgaWQgfSA9IHJlcS5wYXJhbXM7XG4gICAgY29uc3QgdXBkYXRlRGF0YSA9IHJlcS5ib2R5O1xuXG4gICAgaWYgKCFpZCkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIG1lc3NhZ2U6ICdVc2VyIElEIGlzIHJlcXVpcmVkJ1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gVE9ETzogSW1wbGVtZW50IHVzZXIgdXBkYXRlXG4gICAgcmVzLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIG1lc3NhZ2U6ICdVc2VyIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5JyxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgaWQsXG4gICAgICAgIC4uLnVwZGF0ZURhdGEsXG4gICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICB9XG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBtZXNzYWdlOiAnRXJyb3IgdXBkYXRpbmcgdXNlcicsXG4gICAgICBlcnJvcjogZXJyb3IubWVzc2FnZVxuICAgIH0pO1xuICB9XG59KTtcblxuLyoqXG4gKiBAcm91dGUgICBERUxFVEUgL2FwaS91c2Vycy86aWRcbiAqIEBhY2Nlc3MgIFByaXZhdGVcbiAqIEBwYXJhbSAgIHtTdHJpbmd9IGlkIC0gVXNlciBJRFxuICogQHJldHVybnMge09iamVjdH0gRGVsZXRpb24gY29uZmlybWF0aW9uXG4gKi9cbnJvdXRlci5kZWxldGUoJy86aWQnLCBhdXRoZW50aWNhdGUsIGF1dGhvcml6ZShbJ2FkbWluJ10pLCAocmVxLCByZXMpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IGlkIH0gPSByZXEucGFyYW1zO1xuXG4gICAgaWYgKCFpZCkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIG1lc3NhZ2U6ICdVc2VyIElEIGlzIHJlcXVpcmVkJ1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gVE9ETzogSW1wbGVtZW50IHVzZXIgZGVsZXRpb24gd2l0aCBzb2Z0IGRlbGV0ZVxuICAgIHJlcy5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBtZXNzYWdlOiAnVXNlciBkZWxldGVkIHN1Y2Nlc3NmdWxseScsXG4gICAgICBkYXRhOiB7XG4gICAgICAgIGlkLFxuICAgICAgICBkZWxldGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgfVxuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgbWVzc2FnZTogJ0Vycm9yIGRlbGV0aW5nIHVzZXInLFxuICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2VcbiAgICB9KTtcbiAgfVxufSk7XG5cbi8qKlxuICogQHJvdXRlICAgUE9TVCAvYXBpL3VzZXJzL2JhdGNoXG4gKiBAYWNjZXNzICBQcml2YXRlXG4gKiBAYm9keSAgICB7QXJyYXl9IHVzZXJzIC0gQXJyYXkgb2YgdXNlciBvYmplY3RzXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBDcmVhdGlvbiByZXN1bHRzXG4gKi9cbnJvdXRlci5wb3N0KCcvYmF0Y2gnLCBhdXRoZW50aWNhdGUsIGF1dGhvcml6ZShbJ2FkbWluJ10pLCAocmVxLCByZXMpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IHVzZXJzIH0gPSByZXEuYm9keTtcblxuICAgIGlmICghQXJyYXkuaXNBcnJheSh1c2VycykgfHwgdXNlcnMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgbWVzc2FnZTogJ1VzZXJzIGFycmF5IGlzIHJlcXVpcmVkIGFuZCBjYW5ub3QgYmUgZW1wdHknXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBUT0RPOiBJbXBsZW1lbnQgYmF0Y2ggdXNlciBjcmVhdGlvblxuICAgIGNvbnN0IGNyZWF0ZWQgPSB1c2Vycy5tYXAodXNlciA9PiAoe1xuICAgICAgLi4udXNlcixcbiAgICAgIGlkOiAndXNlcl8nICsgRGF0ZS5ub3coKSxcbiAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgfSkpO1xuXG4gICAgcmVzLnN0YXR1cygyMDEpLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIG1lc3NhZ2U6IGAke2NyZWF0ZWQubGVuZ3RofSB1c2VycyBjcmVhdGVkIHN1Y2Nlc3NmdWxseWAsXG4gICAgICBkYXRhOiB7XG4gICAgICAgIGNyZWF0ZWQ6IGNyZWF0ZWQubGVuZ3RoLFxuICAgICAgICB1c2VyczogY3JlYXRlZCxcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgIH1cbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIG1lc3NhZ2U6ICdFcnJvciBjcmVhdGluZyB1c2VycycsXG4gICAgICBlcnJvcjogZXJyb3IubWVzc2FnZVxuICAgIH0pO1xuICB9XG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSByb3V0ZXI7XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxNQUFNQSxPQUFPLEdBQUdDLE9BQU8sQ0FBQyxTQUFTLENBQUM7QUFDbEMsTUFBTUMsTUFBTSxHQUFHRixPQUFPLENBQUNHLE1BQU0sQ0FBQyxDQUFDO0FBQy9CLE1BQU07RUFBRUMsWUFBWTtFQUFFQztBQUFVLENBQUMsR0FBR0osT0FBTyxDQUFDLG9CQUFvQixDQUFDOztBQUVqRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQUMsTUFBTSxDQUFDSSxHQUFHLENB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