{"version":3,"names":["express","require","router","Router","TransportRouteController","protect","authorize","post","createRoute","get","getAllRoutes","findNearbyRoutes","findAvailableRoutes","getAllRoutesStatistics","getRouteById","getNearbyPoints","put","updateRoute","delete","deleteRoute","patch","updateRouteStatus","optimizeRoute","suggestAlternatives","addPassenger","removePassenger","updateTripStatus","addRating","getRouteStatistics","assignVehicle","module","exports"],"sources":["transportRoutes.js"],"sourcesContent":["/**\r\n * Transport Route Routes - مسارات API لمسارات النقل\r\n */\r\n\r\nconst express = require('express');\r\nconst router = express.Router();\r\nconst TransportRouteController = require('../controllers/transportRoute.controller');\r\nconst { protect, authorize } = require('../middleware/auth');\r\n\r\n// ========== مسارات عامة ==========\r\n\r\n/**\r\n * @route   POST /api/transport-routes\r\n * @desc    إنشاء مسار جديد\r\n * @access  Private (Admin, Manager)\r\n */\r\nrouter.post('/', protect, authorize('admin', 'manager'), TransportRouteController.createRoute);\r\n\r\n/**\r\n * @route   GET /api/transport-routes\r\n * @desc    جلب جميع المسارات\r\n * @access  Private\r\n */\r\nrouter.get('/', protect, TransportRouteController.getAllRoutes);\r\n\r\n/**\r\n * @route   GET /api/transport-routes/nearby\r\n * @desc    البحث عن مسارات قريبة\r\n * @access  Private\r\n */\r\nrouter.get('/nearby', protect, TransportRouteController.findNearbyRoutes);\r\n\r\n/**\r\n * @route   GET /api/transport-routes/available\r\n * @desc    البحث عن مسارات متاحة\r\n * @access  Private\r\n */\r\nrouter.get('/available', protect, TransportRouteController.findAvailableRoutes);\r\n\r\n/**\r\n * @route   GET /api/transport-routes/statistics\r\n * @desc    جلب إحصائيات جميع المسارات\r\n * @access  Private\r\n */\r\nrouter.get('/statistics', protect, TransportRouteController.getAllRoutesStatistics);\r\n\r\n/**\r\n * @route   GET /api/transport-routes/:id\r\n * @desc    جلب مسار بواسطة ID\r\n * @access  Private\r\n */\r\nrouter.get('/:id', protect, TransportRouteController.getRouteById);\r\n\r\n/**\r\n * @route   GET /api/transport-routes/:id/nearby\r\n * @desc    جلب نقاط قريبة من المسار\r\n * @access  Private\r\n */\r\nrouter.get('/:id/nearby', protect, TransportRouteController.getNearbyPoints);\r\n\r\n/**\r\n * @route   PUT /api/transport-routes/:id\r\n * @desc    تحديث مسار\r\n * @access  Private (Admin, Manager)\r\n */\r\nrouter.put('/:id', protect, authorize('admin', 'manager'), TransportRouteController.updateRoute);\r\n\r\n/**\r\n * @route   DELETE /api/transport-routes/:id\r\n * @desc    حذف مسار\r\n * @access  Private (Admin)\r\n */\r\nrouter.delete('/:id', protect, authorize('admin'), TransportRouteController.deleteRoute);\r\n\r\n/**\r\n * @route   PATCH /api/transport-routes/:id/status\r\n * @desc    تحديث حالة المسار\r\n * @access  Private (Manager, Admin)\r\n */\r\nrouter.patch('/:id/status', protect, authorize('manager', 'admin'), TransportRouteController.updateRouteStatus);\r\n\r\n// ========== مسارات التحسين ==========\r\n\r\n/**\r\n * @route   POST /api/transport-routes/:id/optimize\r\n * @desc    تحسين المسار\r\n * @access  Private (Manager, Admin)\r\n */\r\nrouter.post('/:id/optimize', protect, authorize('manager', 'admin'), TransportRouteController.optimizeRoute);\r\n\r\n/**\r\n * @route   POST /api/transport-routes/:id/alternatives\r\n * @desc    اقتراح مسارات بديلة\r\n * @access  Private (Manager, Admin)\r\n */\r\nrouter.post('/:id/alternatives', protect, authorize('manager', 'admin'), TransportRouteController.suggestAlternatives);\r\n\r\n// ========== مسارات الركاب ==========\r\n\r\n/**\r\n * @route   POST /api/transport-routes/:id/passengers\r\n * @desc    إضافة راكب للمسار\r\n * @access  Private (Manager, Admin)\r\n */\r\nrouter.post('/:id/passengers', protect, authorize('manager', 'admin'), TransportRouteController.addPassenger);\r\n\r\n/**\r\n * @route   DELETE /api/transport-routes/:id/passengers/:userId\r\n * @desc    إزالة راكب من المسار\r\n * @access  Private (Manager, Admin)\r\n */\r\nrouter.delete('/:id/passengers/:userId', protect, authorize('manager', 'admin'), TransportRouteController.removePassenger);\r\n\r\n// ========== مسارات الرحلات ==========\r\n\r\n/**\r\n * @route   POST /api/transport-routes/:id/trip-status\r\n * @desc    تحديث حالة الرحلة\r\n * @access  Private (Driver, Manager, Admin)\r\n */\r\nrouter.post('/:id/trip-status', protect, authorize('driver', 'manager', 'admin'), TransportRouteController.updateTripStatus);\r\n\r\n// ========== مسارات التقييم ==========\r\n\r\n/**\r\n * @route   POST /api/transport-routes/:id/rating\r\n * @desc    إضافة تقييم للمسار\r\n * @access  Private\r\n */\r\nrouter.post('/:id/rating', protect, TransportRouteController.addRating);\r\n\r\n// ========== مسارات الإحصائيات ==========\r\n\r\n/**\r\n * @route   GET /api/transport-routes/:id/statistics\r\n * @desc    جلب إحصائيات المسار\r\n * @access  Private\r\n */\r\nrouter.get('/:id/statistics', protect, TransportRouteController.getRouteStatistics);\r\n\r\n// ========== مسارات التعيين ==========\r\n\r\n/**\r\n * @route   POST /api/transport-routes/:id/assign-vehicle\r\n * @desc    تعيين مركبة للمسار\r\n * @access  Private (Manager, Admin)\r\n */\r\nrouter.post('/:id/assign-vehicle', protect, authorize('manager', 'admin'), TransportRouteController.assignVehicle);\r\n\r\nmodule.exports = router;\r\n"],"mappings":"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","ignoreList":[]}