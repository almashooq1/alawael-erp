272668d5b5da9dcc50491908acfa1178
/**
 * Driver Management Service - خدمة إدارة السائقين الذكية
 * تتضمن التقييم والتنبؤ والتحليل
 */

const Driver = require('../models/Driver');
const User = require('../models/User');
const Trip = require('../models/Trip');
const Vehicle = require('../models/Vehicle');
class DriverManagementService {
  /**
   * حساب درجة الأمان للسائق
   */
  static async calculateSafetyScore(driverId) {
    try {
      const driver = await Driver.findById(driverId);
      if (!driver) throw new Error('Driver not found');
      const violations = driver.violations;
      const totalViolations = violations.totalViolations || 0;

      // معادلة حساب درجة الأمان
      let safetyScore = 100;

      // انخفاض النقاط بناءً على الانتهاكات
      safetyScore -= violations.speedingIncidents * 5;
      safetyScore -= violations.harshBraking * 3;
      safetyScore -= violations.harshAcceleration * 3;
      safetyScore -= violations.distraction * 7;
      safetyScore -= violations.seatbeltViolations * 10;
      safetyScore -= violations.trafficViolations * 6;
      safetyScore -= violations.accidents * 15;

      // الحد الأدنى 0
      safetyScore = Math.max(0, safetyScore);
      driver.performance.safetyScore = Math.min(100, safetyScore);
      driver.performance.lastAssessmentDate = new Date();
      await driver.save();
      return driver.performance.safetyScore;
    } catch (error) {
      throw new Error(`Failed to calculate safety score: ${error.message}`);
    }
  }

  /**
   * حساب درجة الموثوقية
   */
  static async calculateReliabilityScore(driverId) {
    try {
      const driver = await Driver.findById(driverId);
      if (!driver) throw new Error('Driver not found');
      const stats = driver.statistics;
      const totalTrips = stats.totalTrips || 1;

      // نسبة الرحلات المكتملة
      const completionRate = stats.completedTrips / totalTrips * 100 || 0;

      // عدد الرحلات الملغاة
      const cancellationRate = stats.cancelledTrips / totalTrips * 100 || 0;

      // معادلة درجة الموثوقية
      const reliabilityScore = completionRate * 0.6 - cancellationRate * 0.4 + (driver.performance.attendanceScore * 0.1 || 0);
      driver.performance.reliabilityScore = Math.min(100, Math.max(0, reliabilityScore));
      await driver.save();
      return driver.performance.reliabilityScore;
    } catch (error) {
      throw new Error(`Failed to calculate reliability score: ${error.message}`);
    }
  }

  /**
   * حساب درجة خدمة العملاء
   */
  static async calculateCustomerServiceScore(driverId) {
    try {
      const driver = await Driver.findById(driverId);
      if (!driver) throw new Error('Driver not found');

      // الحصول على تقييمات الركاب
      const trips = await Trip.find({
        driver: driverId
      }).populate('passengers.user');
      let totalRating = 0;
      let ratingCount = 0;
      trips.forEach(trip => {
        trip.passengers.list.forEach(passenger => {
          if (passenger.rating && passenger.rating > 0) {
            totalRating += passenger.rating;
            ratingCount++;
          }
        });
      });
      const averageRating = ratingCount > 0 ? totalRating / ratingCount * 20 : 50;
      driver.performance.customerServiceScore = Math.min(100, Math.max(0, averageRating));
      driver.statistics.averagePassengerRating = ratingCount > 0 ? totalRating / ratingCount : 0;
      await driver.save();
      return driver.performance.customerServiceScore;
    } catch (error) {
      throw new Error(`Failed to calculate customer service score: ${error.message}`);
    }
  }

  /**
   * حساب درجة كفاءة استهلاك الوقود
   */
  static async calculateFuelEfficiencyScore(driverId) {
    try {
      const driver = await Driver.findById(driverId);
      if (!driver) throw new Error('Driver not found');

      // البيانات المتعلقة باستهلاك الوقود من الرحلات
      const trips = await Trip.find({
        driver: driverId
      });
      if (trips.length === 0) {
        driver.performance.fuelEfficiencyScore = 100;
        await driver.save();
        return 100;
      }
      let totalFuelUsed = 0;
      let totalDistance = 0;
      trips.forEach(trip => {
        if (trip.fuelUsed) totalFuelUsed += trip.fuelUsed;
        if (trip.distance) totalDistance += trip.distance;
      });
      const fuelEfficiency = totalDistance > 0 ? totalDistance / totalFuelUsed * 5 : 50;
      driver.performance.fuelEfficiencyScore = Math.min(100, Math.max(0, fuelEfficiency));
      await driver.save();
      return driver.performance.fuelEfficiencyScore;
    } catch (error) {
      throw new Error(`Failed to calculate fuel efficiency score: ${error.message}`);
    }
  }

  /**
   * حساب درجة الصيانة
   */
  static async calculateMaintenanceScore(driverId) {
    try {
      const driver = await Driver.findById(driverId);
      if (!driver) throw new Error('Driver not found');
      const vehicles = await Vehicle.find({
        driver: driverId
      });
      if (vehicles.length === 0) {
        driver.performance.maintenanceScore = 100;
        await driver.save();
        return 100;
      }
      let maintenanceScore = 100;
      vehicles.forEach(vehicle => {
        if (vehicle.maintenanceHistory && vehicle.maintenanceHistory.length > 0) {
          const lastMaintenanceDate = vehicle.maintenanceHistory[vehicle.maintenanceHistory.length - 1].maintenanceDate;
          const daysSinceLastMaintenance = Math.floor((new Date() - lastMaintenanceDate) / (1000 * 60 * 60 * 24));

          // إذا مرت أكثر من 90 يوم بدون صيانة، نقلل النقاط
          if (daysSinceLastMaintenance > 90) {
            maintenanceScore -= 10;
          }
        } else {
          // لا توجد سجلات صيانة
          maintenanceScore -= 20;
        }
      });
      driver.performance.maintenanceScore = Math.min(100, Math.max(0, maintenanceScore));
      await driver.save();
      return driver.performance.maintenanceScore;
    } catch (error) {
      throw new Error(`Failed to calculate maintenance score: ${error.message}`);
    }
  }

  /**
   * حساب درجة الحضور
   */
  static async calculateAttendanceScore(driverId) {
    try {
      const driver = await Driver.findById(driverId);
      if (!driver) throw new Error('Driver not found');

      // آخر 30 يوم
      const thirtyDaysAgo = new Date(new Date().setDate(new Date().getDate() - 30));
      const trips = await Trip.find({
        driver: driverId,
        createdAt: {
          $gte: thirtyDaysAgo
        }
      });

      // عدد أيام العمل المتوقعة (حسب أيام العمل المجدولة)
      const expectedWorkingDays = driver.schedule?.workingDays?.length || 5;
      const daysInMonth = 30;
      const totalExpectedDays = Math.floor(daysInMonth / 7 * expectedWorkingDays);
      const attendanceRate = trips.length / totalExpectedDays * 100 || 0;
      driver.performance.attendanceScore = Math.min(100, Math.max(0, attendanceRate));
      await driver.save();
      return driver.performance.attendanceScore;
    } catch (error) {
      throw new Error(`Failed to calculate attendance score: ${error.message}`);
    }
  }

  /**
   * تحديث جميع درجات الأداء
   */
  static async updateAllPerformanceScores(driverId) {
    try {
      await Promise.all([this.calculateSafetyScore(driverId), this.calculateReliabilityScore(driverId), this.calculateCustomerServiceScore(driverId), this.calculateFuelEfficiencyScore(driverId), this.calculateMaintenanceScore(driverId), this.calculateAttendanceScore(driverId)]);
      const driver = await Driver.findById(driverId);
      driver.calculateOverallRating();
      await driver.save();
      return driver.performance;
    } catch (error) {
      throw new Error(`Failed to update all performance scores: ${error.message}`);
    }
  }

  /**
   * التنبؤ برخصة القيادة الست تنتهي قريباً
   */
  static async predictExpiringLicenses() {
    try {
      const thirtyDaysFromNow = new Date(new Date().setDate(new Date().getDate() + 30));
      const drivers = await Driver.find({
        'licenseDetails.expiryDate': {
          $lte: thirtyDaysFromNow,
          $gte: new Date()
        }
      });
      return drivers.map(driver => ({
        driverId: driver._id,
        driverName: driver.fullName,
        licenseNumber: driver.licenseDetails.licenseNumber,
        expiryDate: driver.licenseDetails.expiryDate,
        daysUntilExpiry: driver.daysUntilLicenseExpiry
      }));
    } catch (error) {
      throw new Error(`Failed to predict expiring licenses: ${error.message}`);
    }
  }

  /**
   * التنبؤ بمعدل الغياب للسائق
   */
  static async predictAbsenceRate(driverId) {
    try {
      const driver = await Driver.findById(driverId);
      if (!driver) throw new Error('Driver not found');

      // الحصول على بيانات آخر 60 يوم
      const sixtyDaysAgo = new Date(new Date().setDate(new Date().getDate() - 60));
      const trips = await Trip.find({
        driver: driverId,
        createdAt: {
          $gte: sixtyDaysAgo
        }
      });

      // عدد أيام العمل المجدولة
      const expectedWorkingDays = Math.floor(60 / 7) * (driver.schedule?.workingDays?.length || 5);

      // الأيام التي لم يعمل فيها
      const absenceDays = expectedWorkingDays - trips.length;

      // معدل الغياب
      const absenceRate = absenceDays / expectedWorkingDays * 100 || 0;

      // معادلة التنبؤ (الاتجاه الحالي)
      // إذا كان معدل الغياب أكثر من 20%، فهناك احتمالية عالية للغياب المستقبلي
      const predictedAbsenceRate = Math.min(100, absenceRate * 1.2);
      driver.aiMetrics.predictedAbsenceRate = Math.round(predictedAbsenceRate);

      // تحديد الاتجاه
      if (absenceRate > 20) {
        driver.aiMetrics.predictedPerformanceTrend = 'declining';
        driver.aiMetrics.trainingRecommendations = ['عقد اجتماع مع السائق لفهم المشاكل', 'تقديم دعم إضافي', 'مراقبة الغياب عن كثب'];
      } else {
        driver.aiMetrics.predictedPerformanceTrend = 'stable';
      }
      await driver.save();
      return {
        driverId: driver._id,
        currentAbsenceRate: absenceRate,
        predictedAbsenceRate: Math.round(predictedAbsenceRate),
        trend: driver.aiMetrics.predictedPerformanceTrend
      };
    } catch (error) {
      throw new Error(`Failed to predict absence rate: ${error.message}`);
    }
  }

  /**
   * التنبؤ باتجاه الأداء
   */
  static async predictPerformanceTrend(driverId) {
    try {
      const driver = await Driver.findById(driverId);
      if (!driver) throw new Error('Driver not found');

      // الحصول على بيانات الأداء من آخر رحلات
      const recentTrips = await Trip.find({
        driver: driverId
      }).sort({
        createdAt: -1
      }).limit(10);
      if (recentTrips.length === 0) {
        return {
          trend: 'no_data'
        };
      }

      // حساب متوسط التقيييمات
      let totalRating = 0;
      let ratingCount = 0;
      recentTrips.forEach(trip => {
        trip.passengers.list.forEach(passenger => {
          if (passenger.rating && passenger.rating > 0) {
            totalRating += passenger.rating;
            ratingCount++;
          }
        });
      });
      const averageRating = ratingCount > 0 ? totalRating / ratingCount : 0;

      // مقارنة مع الأداء السابق
      const previousRating = driver.statistics.averagePassengerRating || 0;
      const ratingChange = averageRating - previousRating;
      let trend = 'stable';
      if (ratingChange > 0.5) {
        trend = 'improving';
      } else if (ratingChange < -0.5) {
        trend = 'declining';
      }
      driver.aiMetrics.predictedPerformanceTrend = trend;

      // التوصيات بناءً على الاتجاه
      if (trend === 'declining') {
        driver.aiMetrics.trainingRecommendations = ['تدريب على خدمة العملاء', 'مراجعة قواعد السلامة', 'اجتماع مع المدير'];
        driver.aiMetrics.riskFactors = ['انخفاض التقييمات', 'تدهور الأداء'];
      } else if (trend === 'improving') {
        driver.aiMetrics.strengths = ['تحسن الأداء', 'ارتفاع التقييمات'];
      }
      await driver.save();
      return {
        driverId: driver._id,
        trend,
        averageRating,
        ratingChange,
        recommendations: driver.aiMetrics.trainingRecommendations
      };
    } catch (error) {
      throw new Error(`Failed to predict performance trend: ${error.message}`);
    }
  }

  /**
   * إنشاء تقرير شامل للسائق
   */
  static async generateComprehensiveReport(driverId) {
    try {
      const driver = await Driver.findById(driverId).populate('userId', 'name email phone');
      if (!driver) throw new Error('Driver not found');

      // تحديث جميع الدرجات
      await this.updateAllPerformanceScores(driverId);

      // التنبؤات
      const absencePrediction = await this.predictAbsenceRate(driverId);
      const performanceTrend = await this.predictPerformanceTrend(driverId);

      // جمع البيانات
      const report = {
        driverId: driver._id,
        driverName: driver.fullName,
        email: driver.email,
        personalPhone: driver.personalPhone,
        status: driver.status,
        hireDate: driver.hireDate,
        experienceInYears: driver.experienceInYears,
        // درجات الأداء
        performance: {
          overallRating: driver.performance.overallRating,
          safetyScore: driver.performance.safetyScore,
          reliabilityScore: driver.performance.reliabilityScore,
          customerServiceScore: driver.performance.customerServiceScore,
          fuelEfficiencyScore: driver.performance.fuelEfficiencyScore,
          maintenanceScore: driver.performance.maintenanceScore,
          attendanceScore: driver.performance.attendanceScore
        },
        // الإحصائيات
        statistics: {
          totalTrips: driver.statistics.totalTrips,
          completedTrips: driver.statistics.completedTrips,
          cancelledTrips: driver.statistics.cancelledTrips,
          totalHoursWorked: driver.statistics.totalHoursWorked,
          totalKilometersDriven: driver.statistics.totalKilometersDriven,
          averagePassengerRating: driver.statistics.averagePassengerRating
        },
        // الانتهاكات
        violations: {
          total: driver.violations.totalViolations,
          speeding: driver.violations.speedingIncidents,
          accidents: driver.violations.accidents,
          other: driver.violations.totalViolations - driver.violations.speedingIncidents - driver.violations.accidents
        },
        // التنبؤات والتوصيات
        predictions: {
          absenceRate: absencePrediction.predictedAbsenceRate,
          performanceTrend: performanceTrend.trend,
          trainingRecommendations: driver.aiMetrics.trainingRecommendations,
          riskFactors: driver.aiMetrics.riskFactors,
          strengths: driver.aiMetrics.strengths
        },
        // معلومات الرخصة
        license: {
          number: driver.licenseDetails.licenseNumber,
          type: driver.licenseDetails.licenseType,
          expiryDate: driver.licenseDetails.expiryDate,
          daysUntilExpiry: driver.daysUntilLicenseExpiry,
          isValid: driver.isLicenseValid()
        },
        // الشهادات النشطة
        activeCertifications: driver.getActiveCertifications(),
        generatedAt: new Date()
      };
      return report;
    } catch (error) {
      throw new Error(`Failed to generate comprehensive report: ${error.message}`);
    }
  }

  /**
   * الحصول على قائمة السائقين الذين يحتاجون تدريباً
   */
  static async getDriversNeedingTraining() {
    try {
      const drivers = await Driver.find({
        isActive: true,
        $or: [{
          'performance.safetyScore': {
            $lt: 70
          }
        }, {
          'performance.customerServiceScore': {
            $lt: 70
          }
        }, {
          'training.trainingDueDate': {
            $lte: new Date()
          }
        }]
      }).sort({
        'performance.safetyScore': 1
      });
      return drivers.map(driver => ({
        driverId: driver._id,
        driverName: driver.fullName,
        safetyScore: driver.performance.safetyScore,
        customerServiceScore: driver.performance.customerServiceScore,
        trainingDueDate: driver.training.trainingDueDate,
        recommendations: driver.aiMetrics.trainingRecommendations
      }));
    } catch (error) {
      throw new Error(`Failed to get drivers needing training: ${error.message}`);
    }
  }

  /**
   * الحصول على أفضل السائقين
   */
  static async getTopPerformers(limit = 10) {
    try {
      const drivers = await Driver.find({
        isActive: true
      }).sort({
        'performance.overallRating': -1
      }).limit(limit).select('firstName lastName performance statistics aiMetrics');
      return drivers;
    } catch (error) {
      throw new Error(`Failed to get top performers: ${error.message}`);
    }
  }
}
module.exports = DriverManagementService;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJEcml2ZXIiLCJyZXF1aXJlIiwiVXNlciIsIlRyaXAiLCJWZWhpY2xlIiwiRHJpdmVyTWFuYWdlbWVudFNlcnZpY2UiLCJjYWxjdWxhdGVTYWZldHlTY29yZSIsImRyaXZlcklkIiwiZHJpdmVyIiwiZmluZEJ5SWQiLCJFcnJvciIsInZpb2xhdGlvbnMiLCJ0b3RhbFZpb2xhdGlvbnMiLCJzYWZldHlTY29yZSIsInNwZWVkaW5nSW5jaWRlbnRzIiwiaGFyc2hCcmFraW5nIiwiaGFyc2hBY2NlbGVyYXRpb24iLCJkaXN0cmFjdGlvbiIsInNlYXRiZWx0VmlvbGF0aW9ucyIsInRyYWZmaWNWaW9sYXRpb25zIiwiYWNjaWRlbnRzIiwiTWF0aCIsIm1heCIsInBlcmZvcm1hbmNlIiwibWluIiwibGFzdEFzc2Vzc21lbnREYXRlIiwiRGF0ZSIsInNhdmUiLCJlcnJvciIsIm1lc3NhZ2UiLCJjYWxjdWxhdGVSZWxpYWJpbGl0eVNjb3JlIiwic3RhdHMiLCJzdGF0aXN0aWNzIiwidG90YWxUcmlwcyIsImNvbXBsZXRpb25SYXRlIiwiY29tcGxldGVkVHJpcHMiLCJjYW5jZWxsYXRpb25SYXRlIiwiY2FuY2VsbGVkVHJpcHMiLCJyZWxpYWJpbGl0eVNjb3JlIiwiYXR0ZW5kYW5jZVNjb3JlIiwiY2FsY3VsYXRlQ3VzdG9tZXJTZXJ2aWNlU2NvcmUiLCJ0cmlwcyIsImZpbmQiLCJwb3B1bGF0ZSIsInRvdGFsUmF0aW5nIiwicmF0aW5nQ291bnQiLCJmb3JFYWNoIiwidHJpcCIsInBhc3NlbmdlcnMiLCJsaXN0IiwicGFzc2VuZ2VyIiwicmF0aW5nIiwiYXZlcmFnZVJhdGluZyIsImN1c3RvbWVyU2VydmljZVNjb3JlIiwiYXZlcmFnZVBhc3NlbmdlclJhdGluZyIsImNhbGN1bGF0ZUZ1ZWxFZmZpY2llbmN5U2NvcmUiLCJsZW5ndGgiLCJmdWVsRWZmaWNpZW5jeVNjb3JlIiwidG90YWxGdWVsVXNlZCIsInRvdGFsRGlzdGFuY2UiLCJmdWVsVXNlZCIsImRpc3RhbmNlIiwiZnVlbEVmZmljaWVuY3kiLCJjYWxjdWxhdGVNYWludGVuYW5jZVNjb3JlIiwidmVoaWNsZXMiLCJtYWludGVuYW5jZVNjb3JlIiwidmVoaWNsZSIsIm1haW50ZW5hbmNlSGlzdG9yeSIsImxhc3RNYWludGVuYW5jZURhdGUiLCJtYWludGVuYW5jZURhdGUiLCJkYXlzU2luY2VMYXN0TWFpbnRlbmFuY2UiLCJmbG9vciIsImNhbGN1bGF0ZUF0dGVuZGFuY2VTY29yZSIsInRoaXJ0eURheXNBZ28iLCJzZXREYXRlIiwiZ2V0RGF0ZSIsImNyZWF0ZWRBdCIsIiRndGUiLCJleHBlY3RlZFdvcmtpbmdEYXlzIiwic2NoZWR1bGUiLCJ3b3JraW5nRGF5cyIsImRheXNJbk1vbnRoIiwidG90YWxFeHBlY3RlZERheXMiLCJhdHRlbmRhbmNlUmF0ZSIsInVwZGF0ZUFsbFBlcmZvcm1hbmNlU2NvcmVzIiwiUHJvbWlzZSIsImFsbCIsImNhbGN1bGF0ZU92ZXJhbGxSYXRpbmciLCJwcmVkaWN0RXhwaXJpbmdMaWNlbnNlcyIsInRoaXJ0eURheXNGcm9tTm93IiwiZHJpdmVycyIsIiRsdGUiLCJtYXAiLCJfaWQiLCJkcml2ZXJOYW1lIiwiZnVsbE5hbWUiLCJsaWNlbnNlTnVtYmVyIiwibGljZW5zZURldGFpbHMiLCJleHBpcnlEYXRlIiwiZGF5c1VudGlsRXhwaXJ5IiwiZGF5c1VudGlsTGljZW5zZUV4cGlyeSIsInByZWRpY3RBYnNlbmNlUmF0ZSIsInNpeHR5RGF5c0FnbyIsImFic2VuY2VEYXlzIiwiYWJzZW5jZVJhdGUiLCJwcmVkaWN0ZWRBYnNlbmNlUmF0ZSIsImFpTWV0cmljcyIsInJvdW5kIiwicHJlZGljdGVkUGVyZm9ybWFuY2VUcmVuZCIsInRyYWluaW5nUmVjb21tZW5kYXRpb25zIiwiY3VycmVudEFic2VuY2VSYXRlIiwidHJlbmQiLCJwcmVkaWN0UGVyZm9ybWFuY2VUcmVuZCIsInJlY2VudFRyaXBzIiwic29ydCIsImxpbWl0IiwicHJldmlvdXNSYXRpbmciLCJyYXRpbmdDaGFuZ2UiLCJyaXNrRmFjdG9ycyIsInN0cmVuZ3RocyIsInJlY29tbWVuZGF0aW9ucyIsImdlbmVyYXRlQ29tcHJlaGVuc2l2ZVJlcG9ydCIsImFic2VuY2VQcmVkaWN0aW9uIiwicGVyZm9ybWFuY2VUcmVuZCIsInJlcG9ydCIsImVtYWlsIiwicGVyc29uYWxQaG9uZSIsInN0YXR1cyIsImhpcmVEYXRlIiwiZXhwZXJpZW5jZUluWWVhcnMiLCJvdmVyYWxsUmF0aW5nIiwidG90YWxIb3Vyc1dvcmtlZCIsInRvdGFsS2lsb21ldGVyc0RyaXZlbiIsInRvdGFsIiwic3BlZWRpbmciLCJvdGhlciIsInByZWRpY3Rpb25zIiwibGljZW5zZSIsIm51bWJlciIsInR5cGUiLCJsaWNlbnNlVHlwZSIsImlzVmFsaWQiLCJpc0xpY2Vuc2VWYWxpZCIsImFjdGl2ZUNlcnRpZmljYXRpb25zIiwiZ2V0QWN0aXZlQ2VydGlmaWNhdGlvbnMiLCJnZW5lcmF0ZWRBdCIsImdldERyaXZlcnNOZWVkaW5nVHJhaW5pbmciLCJpc0FjdGl2ZSIsIiRvciIsIiRsdCIsInRyYWluaW5nRHVlRGF0ZSIsInRyYWluaW5nIiwiZ2V0VG9wUGVyZm9ybWVycyIsInNlbGVjdCIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlcyI6WyJkcml2ZXJNYW5hZ2VtZW50LnNlcnZpY2UuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIERyaXZlciBNYW5hZ2VtZW50IFNlcnZpY2UgLSDYrtiv2YXYqSDYpdiv2KfYsdipINin2YTYs9in2KbZgtmK2YYg2KfZhNiw2YPZitipXHJcbiAqINiq2KrYttmF2YYg2KfZhNiq2YLZitmK2YUg2YjYp9mE2KrZhtio2KQg2YjYp9mE2KrYrdmE2YrZhFxyXG4gKi9cclxuXHJcbmNvbnN0IERyaXZlciA9IHJlcXVpcmUoJy4uL21vZGVscy9Ecml2ZXInKTtcclxuY29uc3QgVXNlciA9IHJlcXVpcmUoJy4uL21vZGVscy9Vc2VyJyk7XHJcbmNvbnN0IFRyaXAgPSByZXF1aXJlKCcuLi9tb2RlbHMvVHJpcCcpO1xyXG5jb25zdCBWZWhpY2xlID0gcmVxdWlyZSgnLi4vbW9kZWxzL1ZlaGljbGUnKTtcclxuXHJcbmNsYXNzIERyaXZlck1hbmFnZW1lbnRTZXJ2aWNlIHtcclxuICAvKipcclxuICAgKiDYrdiz2KfYqCDYr9ix2KzYqSDYp9mE2KPZhdin2YYg2YTZhNiz2KfYptmCXHJcbiAgICovXHJcbiAgc3RhdGljIGFzeW5jIGNhbGN1bGF0ZVNhZmV0eVNjb3JlKGRyaXZlcklkKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBkcml2ZXIgPSBhd2FpdCBEcml2ZXIuZmluZEJ5SWQoZHJpdmVySWQpO1xyXG4gICAgICBpZiAoIWRyaXZlcikgdGhyb3cgbmV3IEVycm9yKCdEcml2ZXIgbm90IGZvdW5kJyk7XHJcblxyXG4gICAgICBjb25zdCB2aW9sYXRpb25zID0gZHJpdmVyLnZpb2xhdGlvbnM7XHJcbiAgICAgIGNvbnN0IHRvdGFsVmlvbGF0aW9ucyA9IHZpb2xhdGlvbnMudG90YWxWaW9sYXRpb25zIHx8IDA7XHJcblxyXG4gICAgICAvLyDZhdi52KfYr9mE2Kkg2K3Ys9in2Kgg2K/Ysdis2Kkg2KfZhNij2YXYp9mGXHJcbiAgICAgIGxldCBzYWZldHlTY29yZSA9IDEwMDtcclxuXHJcbiAgICAgIC8vINin2YbYrtmB2KfYtiDYp9mE2YbZgtin2Lcg2KjZhtin2KHZiyDYudmE2Ykg2KfZhNin2YbYqtmH2KfZg9in2KpcclxuICAgICAgc2FmZXR5U2NvcmUgLT0gdmlvbGF0aW9ucy5zcGVlZGluZ0luY2lkZW50cyAqIDU7XHJcbiAgICAgIHNhZmV0eVNjb3JlIC09IHZpb2xhdGlvbnMuaGFyc2hCcmFraW5nICogMztcclxuICAgICAgc2FmZXR5U2NvcmUgLT0gdmlvbGF0aW9ucy5oYXJzaEFjY2VsZXJhdGlvbiAqIDM7XHJcbiAgICAgIHNhZmV0eVNjb3JlIC09IHZpb2xhdGlvbnMuZGlzdHJhY3Rpb24gKiA3O1xyXG4gICAgICBzYWZldHlTY29yZSAtPSB2aW9sYXRpb25zLnNlYXRiZWx0VmlvbGF0aW9ucyAqIDEwO1xyXG4gICAgICBzYWZldHlTY29yZSAtPSB2aW9sYXRpb25zLnRyYWZmaWNWaW9sYXRpb25zICogNjtcclxuICAgICAgc2FmZXR5U2NvcmUgLT0gdmlvbGF0aW9ucy5hY2NpZGVudHMgKiAxNTtcclxuXHJcbiAgICAgIC8vINin2YTYrdivINin2YTYo9iv2YbZiSAwXHJcbiAgICAgIHNhZmV0eVNjb3JlID0gTWF0aC5tYXgoMCwgc2FmZXR5U2NvcmUpO1xyXG5cclxuICAgICAgZHJpdmVyLnBlcmZvcm1hbmNlLnNhZmV0eVNjb3JlID0gTWF0aC5taW4oMTAwLCBzYWZldHlTY29yZSk7XHJcbiAgICAgIGRyaXZlci5wZXJmb3JtYW5jZS5sYXN0QXNzZXNzbWVudERhdGUgPSBuZXcgRGF0ZSgpO1xyXG5cclxuICAgICAgYXdhaXQgZHJpdmVyLnNhdmUoKTtcclxuICAgICAgcmV0dXJuIGRyaXZlci5wZXJmb3JtYW5jZS5zYWZldHlTY29yZTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGNhbGN1bGF0ZSBzYWZldHkgc2NvcmU6ICR7ZXJyb3IubWVzc2FnZX1gKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqINit2LPYp9ioINiv2LHYrNipINin2YTZhdmI2KvZiNmC2YrYqVxyXG4gICAqL1xyXG4gIHN0YXRpYyBhc3luYyBjYWxjdWxhdGVSZWxpYWJpbGl0eVNjb3JlKGRyaXZlcklkKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBkcml2ZXIgPSBhd2FpdCBEcml2ZXIuZmluZEJ5SWQoZHJpdmVySWQpO1xyXG4gICAgICBpZiAoIWRyaXZlcikgdGhyb3cgbmV3IEVycm9yKCdEcml2ZXIgbm90IGZvdW5kJyk7XHJcblxyXG4gICAgICBjb25zdCBzdGF0cyA9IGRyaXZlci5zdGF0aXN0aWNzO1xyXG4gICAgICBjb25zdCB0b3RhbFRyaXBzID0gc3RhdHMudG90YWxUcmlwcyB8fCAxO1xyXG5cclxuICAgICAgLy8g2YbYs9io2Kkg2KfZhNix2K3ZhNin2Kog2KfZhNmF2YPYqtmF2YTYqVxyXG4gICAgICBjb25zdCBjb21wbGV0aW9uUmF0ZSA9IChzdGF0cy5jb21wbGV0ZWRUcmlwcyAvIHRvdGFsVHJpcHMpICogMTAwIHx8IDA7XHJcblxyXG4gICAgICAvLyDYudiv2K8g2KfZhNix2K3ZhNin2Kog2KfZhNmF2YTYutin2KlcclxuICAgICAgY29uc3QgY2FuY2VsbGF0aW9uUmF0ZSA9IChzdGF0cy5jYW5jZWxsZWRUcmlwcyAvIHRvdGFsVHJpcHMpICogMTAwIHx8IDA7XHJcblxyXG4gICAgICAvLyDZhdi52KfYr9mE2Kkg2K/Ysdis2Kkg2KfZhNmF2YjYq9mI2YLZitipXHJcbiAgICAgIGNvbnN0IHJlbGlhYmlsaXR5U2NvcmUgPVxyXG4gICAgICAgIGNvbXBsZXRpb25SYXRlICogMC42IC0gY2FuY2VsbGF0aW9uUmF0ZSAqIDAuNCArIChkcml2ZXIucGVyZm9ybWFuY2UuYXR0ZW5kYW5jZVNjb3JlICogMC4xIHx8IDApO1xyXG5cclxuICAgICAgZHJpdmVyLnBlcmZvcm1hbmNlLnJlbGlhYmlsaXR5U2NvcmUgPSBNYXRoLm1pbigxMDAsIE1hdGgubWF4KDAsIHJlbGlhYmlsaXR5U2NvcmUpKTtcclxuXHJcbiAgICAgIGF3YWl0IGRyaXZlci5zYXZlKCk7XHJcbiAgICAgIHJldHVybiBkcml2ZXIucGVyZm9ybWFuY2UucmVsaWFiaWxpdHlTY29yZTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGNhbGN1bGF0ZSByZWxpYWJpbGl0eSBzY29yZTogJHtlcnJvci5tZXNzYWdlfWApO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog2K3Ys9in2Kgg2K/Ysdis2Kkg2K7Yr9mF2Kkg2KfZhNi52YXZhNin2KFcclxuICAgKi9cclxuICBzdGF0aWMgYXN5bmMgY2FsY3VsYXRlQ3VzdG9tZXJTZXJ2aWNlU2NvcmUoZHJpdmVySWQpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IGRyaXZlciA9IGF3YWl0IERyaXZlci5maW5kQnlJZChkcml2ZXJJZCk7XHJcbiAgICAgIGlmICghZHJpdmVyKSB0aHJvdyBuZXcgRXJyb3IoJ0RyaXZlciBub3QgZm91bmQnKTtcclxuXHJcbiAgICAgIC8vINin2YTYrdi12YjZhCDYudmE2Ykg2KrZgtmK2YrZhdin2Kog2KfZhNix2YPYp9ioXHJcbiAgICAgIGNvbnN0IHRyaXBzID0gYXdhaXQgVHJpcC5maW5kKHsgZHJpdmVyOiBkcml2ZXJJZCB9KS5wb3B1bGF0ZSgncGFzc2VuZ2Vycy51c2VyJyk7XHJcblxyXG4gICAgICBsZXQgdG90YWxSYXRpbmcgPSAwO1xyXG4gICAgICBsZXQgcmF0aW5nQ291bnQgPSAwO1xyXG5cclxuICAgICAgdHJpcHMuZm9yRWFjaCgodHJpcCkgPT4ge1xyXG4gICAgICAgIHRyaXAucGFzc2VuZ2Vycy5saXN0LmZvckVhY2goKHBhc3NlbmdlcikgPT4ge1xyXG4gICAgICAgICAgaWYgKHBhc3Nlbmdlci5yYXRpbmcgJiYgcGFzc2VuZ2VyLnJhdGluZyA+IDApIHtcclxuICAgICAgICAgICAgdG90YWxSYXRpbmcgKz0gcGFzc2VuZ2VyLnJhdGluZztcclxuICAgICAgICAgICAgcmF0aW5nQ291bnQrKztcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCBhdmVyYWdlUmF0aW5nID0gcmF0aW5nQ291bnQgPiAwID8gKHRvdGFsUmF0aW5nIC8gcmF0aW5nQ291bnQpICogMjAgOiA1MDtcclxuXHJcbiAgICAgIGRyaXZlci5wZXJmb3JtYW5jZS5jdXN0b21lclNlcnZpY2VTY29yZSA9IE1hdGgubWluKDEwMCwgTWF0aC5tYXgoMCwgYXZlcmFnZVJhdGluZykpO1xyXG4gICAgICBkcml2ZXIuc3RhdGlzdGljcy5hdmVyYWdlUGFzc2VuZ2VyUmF0aW5nID0gcmF0aW5nQ291bnQgPiAwID8gdG90YWxSYXRpbmcgLyByYXRpbmdDb3VudCA6IDA7XHJcblxyXG4gICAgICBhd2FpdCBkcml2ZXIuc2F2ZSgpO1xyXG4gICAgICByZXR1cm4gZHJpdmVyLnBlcmZvcm1hbmNlLmN1c3RvbWVyU2VydmljZVNjb3JlO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gY2FsY3VsYXRlIGN1c3RvbWVyIHNlcnZpY2Ugc2NvcmU6ICR7ZXJyb3IubWVzc2FnZX1gKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqINit2LPYp9ioINiv2LHYrNipINmD2YHYp9ih2Kkg2KfYs9iq2YfZhNin2YMg2KfZhNmI2YLZiNivXHJcbiAgICovXHJcbiAgc3RhdGljIGFzeW5jIGNhbGN1bGF0ZUZ1ZWxFZmZpY2llbmN5U2NvcmUoZHJpdmVySWQpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IGRyaXZlciA9IGF3YWl0IERyaXZlci5maW5kQnlJZChkcml2ZXJJZCk7XHJcbiAgICAgIGlmICghZHJpdmVyKSB0aHJvdyBuZXcgRXJyb3IoJ0RyaXZlciBub3QgZm91bmQnKTtcclxuXHJcbiAgICAgIC8vINin2YTYqNmK2KfZhtin2Kog2KfZhNmF2KrYudmE2YLYqSDYqNin2LPYqtmH2YTYp9mDINin2YTZiNmC2YjYryDZhdmGINin2YTYsdit2YTYp9iqXHJcbiAgICAgIGNvbnN0IHRyaXBzID0gYXdhaXQgVHJpcC5maW5kKHsgZHJpdmVyOiBkcml2ZXJJZCB9KTtcclxuXHJcbiAgICAgIGlmICh0cmlwcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICBkcml2ZXIucGVyZm9ybWFuY2UuZnVlbEVmZmljaWVuY3lTY29yZSA9IDEwMDtcclxuICAgICAgICBhd2FpdCBkcml2ZXIuc2F2ZSgpO1xyXG4gICAgICAgIHJldHVybiAxMDA7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGxldCB0b3RhbEZ1ZWxVc2VkID0gMDtcclxuICAgICAgbGV0IHRvdGFsRGlzdGFuY2UgPSAwO1xyXG5cclxuICAgICAgdHJpcHMuZm9yRWFjaCgodHJpcCkgPT4ge1xyXG4gICAgICAgIGlmICh0cmlwLmZ1ZWxVc2VkKSB0b3RhbEZ1ZWxVc2VkICs9IHRyaXAuZnVlbFVzZWQ7XHJcbiAgICAgICAgaWYgKHRyaXAuZGlzdGFuY2UpIHRvdGFsRGlzdGFuY2UgKz0gdHJpcC5kaXN0YW5jZTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCBmdWVsRWZmaWNpZW5jeSA9IHRvdGFsRGlzdGFuY2UgPiAwID8gKHRvdGFsRGlzdGFuY2UgLyB0b3RhbEZ1ZWxVc2VkKSAqIDUgOiA1MDtcclxuXHJcbiAgICAgIGRyaXZlci5wZXJmb3JtYW5jZS5mdWVsRWZmaWNpZW5jeVNjb3JlID0gTWF0aC5taW4oMTAwLCBNYXRoLm1heCgwLCBmdWVsRWZmaWNpZW5jeSkpO1xyXG5cclxuICAgICAgYXdhaXQgZHJpdmVyLnNhdmUoKTtcclxuICAgICAgcmV0dXJuIGRyaXZlci5wZXJmb3JtYW5jZS5mdWVsRWZmaWNpZW5jeVNjb3JlO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gY2FsY3VsYXRlIGZ1ZWwgZWZmaWNpZW5jeSBzY29yZTogJHtlcnJvci5tZXNzYWdlfWApO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog2K3Ys9in2Kgg2K/Ysdis2Kkg2KfZhNi12YrYp9mG2KlcclxuICAgKi9cclxuICBzdGF0aWMgYXN5bmMgY2FsY3VsYXRlTWFpbnRlbmFuY2VTY29yZShkcml2ZXJJZCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgZHJpdmVyID0gYXdhaXQgRHJpdmVyLmZpbmRCeUlkKGRyaXZlcklkKTtcclxuICAgICAgaWYgKCFkcml2ZXIpIHRocm93IG5ldyBFcnJvcignRHJpdmVyIG5vdCBmb3VuZCcpO1xyXG5cclxuICAgICAgY29uc3QgdmVoaWNsZXMgPSBhd2FpdCBWZWhpY2xlLmZpbmQoeyBkcml2ZXI6IGRyaXZlcklkIH0pO1xyXG5cclxuICAgICAgaWYgKHZlaGljbGVzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIGRyaXZlci5wZXJmb3JtYW5jZS5tYWludGVuYW5jZVNjb3JlID0gMTAwO1xyXG4gICAgICAgIGF3YWl0IGRyaXZlci5zYXZlKCk7XHJcbiAgICAgICAgcmV0dXJuIDEwMDtcclxuICAgICAgfVxyXG5cclxuICAgICAgbGV0IG1haW50ZW5hbmNlU2NvcmUgPSAxMDA7XHJcblxyXG4gICAgICB2ZWhpY2xlcy5mb3JFYWNoKCh2ZWhpY2xlKSA9PiB7XHJcbiAgICAgICAgaWYgKHZlaGljbGUubWFpbnRlbmFuY2VIaXN0b3J5ICYmIHZlaGljbGUubWFpbnRlbmFuY2VIaXN0b3J5Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgIGNvbnN0IGxhc3RNYWludGVuYW5jZURhdGUgPSB2ZWhpY2xlLm1haW50ZW5hbmNlSGlzdG9yeVt2ZWhpY2xlLm1haW50ZW5hbmNlSGlzdG9yeS5sZW5ndGggLSAxXVxyXG4gICAgICAgICAgICAubWFpbnRlbmFuY2VEYXRlO1xyXG4gICAgICAgICAgY29uc3QgZGF5c1NpbmNlTGFzdE1haW50ZW5hbmNlID0gTWF0aC5mbG9vcigobmV3IERhdGUoKSAtIGxhc3RNYWludGVuYW5jZURhdGUpIC8gKDEwMDAgKiA2MCAqIDYwICogMjQpKTtcclxuXHJcbiAgICAgICAgICAvLyDYpdiw2Kcg2YXYsdiqINij2YPYq9ixINmF2YYgOTAg2YrZiNmFINio2K/ZiNmGINi12YrYp9mG2KnYjCDZhtmC2YTZhCDYp9mE2YbZgtin2LdcclxuICAgICAgICAgIGlmIChkYXlzU2luY2VMYXN0TWFpbnRlbmFuY2UgPiA5MCkge1xyXG4gICAgICAgICAgICBtYWludGVuYW5jZVNjb3JlIC09IDEwO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAvLyDZhNinINiq2YjYrNivINiz2KzZhNin2Kog2LXZitin2YbYqVxyXG4gICAgICAgICAgbWFpbnRlbmFuY2VTY29yZSAtPSAyMDtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgZHJpdmVyLnBlcmZvcm1hbmNlLm1haW50ZW5hbmNlU2NvcmUgPSBNYXRoLm1pbigxMDAsIE1hdGgubWF4KDAsIG1haW50ZW5hbmNlU2NvcmUpKTtcclxuXHJcbiAgICAgIGF3YWl0IGRyaXZlci5zYXZlKCk7XHJcbiAgICAgIHJldHVybiBkcml2ZXIucGVyZm9ybWFuY2UubWFpbnRlbmFuY2VTY29yZTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGNhbGN1bGF0ZSBtYWludGVuYW5jZSBzY29yZTogJHtlcnJvci5tZXNzYWdlfWApO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog2K3Ys9in2Kgg2K/Ysdis2Kkg2KfZhNit2LbZiNixXHJcbiAgICovXHJcbiAgc3RhdGljIGFzeW5jIGNhbGN1bGF0ZUF0dGVuZGFuY2VTY29yZShkcml2ZXJJZCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgZHJpdmVyID0gYXdhaXQgRHJpdmVyLmZpbmRCeUlkKGRyaXZlcklkKTtcclxuICAgICAgaWYgKCFkcml2ZXIpIHRocm93IG5ldyBFcnJvcignRHJpdmVyIG5vdCBmb3VuZCcpO1xyXG5cclxuICAgICAgLy8g2KLYrtixIDMwINmK2YjZhVxyXG4gICAgICBjb25zdCB0aGlydHlEYXlzQWdvID0gbmV3IERhdGUobmV3IERhdGUoKS5zZXREYXRlKG5ldyBEYXRlKCkuZ2V0RGF0ZSgpIC0gMzApKTtcclxuXHJcbiAgICAgIGNvbnN0IHRyaXBzID0gYXdhaXQgVHJpcC5maW5kKHtcclxuICAgICAgICBkcml2ZXI6IGRyaXZlcklkLFxyXG4gICAgICAgIGNyZWF0ZWRBdDogeyAkZ3RlOiB0aGlydHlEYXlzQWdvIH0sXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLy8g2LnYr9ivINij2YrYp9mFINin2YTYudmF2YQg2KfZhNmF2KrZiNmC2LnYqSAo2K3Ys9ioINij2YrYp9mFINin2YTYudmF2YQg2KfZhNmF2KzYr9mI2YTYqSlcclxuICAgICAgY29uc3QgZXhwZWN0ZWRXb3JraW5nRGF5cyA9IGRyaXZlci5zY2hlZHVsZT8ud29ya2luZ0RheXM/Lmxlbmd0aCB8fCA1O1xyXG4gICAgICBjb25zdCBkYXlzSW5Nb250aCA9IDMwO1xyXG4gICAgICBjb25zdCB0b3RhbEV4cGVjdGVkRGF5cyA9IE1hdGguZmxvb3IoKGRheXNJbk1vbnRoIC8gNykgKiBleHBlY3RlZFdvcmtpbmdEYXlzKTtcclxuXHJcbiAgICAgIGNvbnN0IGF0dGVuZGFuY2VSYXRlID0gKHRyaXBzLmxlbmd0aCAvIHRvdGFsRXhwZWN0ZWREYXlzKSAqIDEwMCB8fCAwO1xyXG5cclxuICAgICAgZHJpdmVyLnBlcmZvcm1hbmNlLmF0dGVuZGFuY2VTY29yZSA9IE1hdGgubWluKDEwMCwgTWF0aC5tYXgoMCwgYXR0ZW5kYW5jZVJhdGUpKTtcclxuXHJcbiAgICAgIGF3YWl0IGRyaXZlci5zYXZlKCk7XHJcbiAgICAgIHJldHVybiBkcml2ZXIucGVyZm9ybWFuY2UuYXR0ZW5kYW5jZVNjb3JlO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gY2FsY3VsYXRlIGF0dGVuZGFuY2Ugc2NvcmU6ICR7ZXJyb3IubWVzc2FnZX1gKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqINiq2K3Yr9mK2Ksg2KzZhdmK2Lkg2K/Ysdis2KfYqiDYp9mE2KPYr9in2KFcclxuICAgKi9cclxuICBzdGF0aWMgYXN5bmMgdXBkYXRlQWxsUGVyZm9ybWFuY2VTY29yZXMoZHJpdmVySWQpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGF3YWl0IFByb21pc2UuYWxsKFtcclxuICAgICAgICB0aGlzLmNhbGN1bGF0ZVNhZmV0eVNjb3JlKGRyaXZlcklkKSxcclxuICAgICAgICB0aGlzLmNhbGN1bGF0ZVJlbGlhYmlsaXR5U2NvcmUoZHJpdmVySWQpLFxyXG4gICAgICAgIHRoaXMuY2FsY3VsYXRlQ3VzdG9tZXJTZXJ2aWNlU2NvcmUoZHJpdmVySWQpLFxyXG4gICAgICAgIHRoaXMuY2FsY3VsYXRlRnVlbEVmZmljaWVuY3lTY29yZShkcml2ZXJJZCksXHJcbiAgICAgICAgdGhpcy5jYWxjdWxhdGVNYWludGVuYW5jZVNjb3JlKGRyaXZlcklkKSxcclxuICAgICAgICB0aGlzLmNhbGN1bGF0ZUF0dGVuZGFuY2VTY29yZShkcml2ZXJJZCksXHJcbiAgICAgIF0pO1xyXG5cclxuICAgICAgY29uc3QgZHJpdmVyID0gYXdhaXQgRHJpdmVyLmZpbmRCeUlkKGRyaXZlcklkKTtcclxuICAgICAgZHJpdmVyLmNhbGN1bGF0ZU92ZXJhbGxSYXRpbmcoKTtcclxuICAgICAgYXdhaXQgZHJpdmVyLnNhdmUoKTtcclxuXHJcbiAgICAgIHJldHVybiBkcml2ZXIucGVyZm9ybWFuY2U7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byB1cGRhdGUgYWxsIHBlcmZvcm1hbmNlIHNjb3JlczogJHtlcnJvci5tZXNzYWdlfWApO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog2KfZhNiq2YbYqNikINio2LHYrti12Kkg2KfZhNmC2YrYp9iv2Kkg2KfZhNiz2Kog2KrZhtiq2YfZiiDZgtix2YrYqNin2YtcclxuICAgKi9cclxuICBzdGF0aWMgYXN5bmMgcHJlZGljdEV4cGlyaW5nTGljZW5zZXMoKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCB0aGlydHlEYXlzRnJvbU5vdyA9IG5ldyBEYXRlKG5ldyBEYXRlKCkuc2V0RGF0ZShuZXcgRGF0ZSgpLmdldERhdGUoKSArIDMwKSk7XHJcblxyXG4gICAgICBjb25zdCBkcml2ZXJzID0gYXdhaXQgRHJpdmVyLmZpbmQoe1xyXG4gICAgICAgICdsaWNlbnNlRGV0YWlscy5leHBpcnlEYXRlJzoge1xyXG4gICAgICAgICAgJGx0ZTogdGhpcnR5RGF5c0Zyb21Ob3csXHJcbiAgICAgICAgICAkZ3RlOiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgcmV0dXJuIGRyaXZlcnMubWFwKChkcml2ZXIpID0+ICh7XHJcbiAgICAgICAgZHJpdmVySWQ6IGRyaXZlci5faWQsXHJcbiAgICAgICAgZHJpdmVyTmFtZTogZHJpdmVyLmZ1bGxOYW1lLFxyXG4gICAgICAgIGxpY2Vuc2VOdW1iZXI6IGRyaXZlci5saWNlbnNlRGV0YWlscy5saWNlbnNlTnVtYmVyLFxyXG4gICAgICAgIGV4cGlyeURhdGU6IGRyaXZlci5saWNlbnNlRGV0YWlscy5leHBpcnlEYXRlLFxyXG4gICAgICAgIGRheXNVbnRpbEV4cGlyeTogZHJpdmVyLmRheXNVbnRpbExpY2Vuc2VFeHBpcnksXHJcbiAgICAgIH0pKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIHByZWRpY3QgZXhwaXJpbmcgbGljZW5zZXM6ICR7ZXJyb3IubWVzc2FnZX1gKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqINin2YTYqtmG2KjYpCDYqNmF2LnYr9mEINin2YTYutmK2KfYqCDZhNmE2LPYp9im2YJcclxuICAgKi9cclxuICBzdGF0aWMgYXN5bmMgcHJlZGljdEFic2VuY2VSYXRlKGRyaXZlcklkKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBkcml2ZXIgPSBhd2FpdCBEcml2ZXIuZmluZEJ5SWQoZHJpdmVySWQpO1xyXG4gICAgICBpZiAoIWRyaXZlcikgdGhyb3cgbmV3IEVycm9yKCdEcml2ZXIgbm90IGZvdW5kJyk7XHJcblxyXG4gICAgICAvLyDYp9mE2K3YtdmI2YQg2LnZhNmJINio2YrYp9mG2KfYqiDYotiu2LEgNjAg2YrZiNmFXHJcbiAgICAgIGNvbnN0IHNpeHR5RGF5c0FnbyA9IG5ldyBEYXRlKG5ldyBEYXRlKCkuc2V0RGF0ZShuZXcgRGF0ZSgpLmdldERhdGUoKSAtIDYwKSk7XHJcblxyXG4gICAgICBjb25zdCB0cmlwcyA9IGF3YWl0IFRyaXAuZmluZCh7XHJcbiAgICAgICAgZHJpdmVyOiBkcml2ZXJJZCxcclxuICAgICAgICBjcmVhdGVkQXQ6IHsgJGd0ZTogc2l4dHlEYXlzQWdvIH0sXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLy8g2LnYr9ivINij2YrYp9mFINin2YTYudmF2YQg2KfZhNmF2KzYr9mI2YTYqVxyXG4gICAgICBjb25zdCBleHBlY3RlZFdvcmtpbmdEYXlzID0gTWF0aC5mbG9vcig2MCAvIDcpICogKGRyaXZlci5zY2hlZHVsZT8ud29ya2luZ0RheXM/Lmxlbmd0aCB8fCA1KTtcclxuXHJcbiAgICAgIC8vINin2YTYo9mK2KfZhSDYp9mE2KrZiiDZhNmFINmK2LnZhdmEINmB2YrZh9inXHJcbiAgICAgIGNvbnN0IGFic2VuY2VEYXlzID0gZXhwZWN0ZWRXb3JraW5nRGF5cyAtIHRyaXBzLmxlbmd0aDtcclxuXHJcbiAgICAgIC8vINmF2LnYr9mEINin2YTYutmK2KfYqFxyXG4gICAgICBjb25zdCBhYnNlbmNlUmF0ZSA9IChhYnNlbmNlRGF5cyAvIGV4cGVjdGVkV29ya2luZ0RheXMpICogMTAwIHx8IDA7XHJcblxyXG4gICAgICAvLyDZhdi52KfYr9mE2Kkg2KfZhNiq2YbYqNikICjYp9mE2KfYqtis2KfZhyDYp9mE2K3Yp9mE2YopXHJcbiAgICAgIC8vINil2LDYpyDZg9in2YYg2YXYudiv2YQg2KfZhNi62YrYp9ioINij2YPYq9ixINmF2YYgMjAl2Iwg2YHZh9mG2KfZgyDYp9it2KrZhdin2YTZitipINi52KfZhNmK2Kkg2YTZhNi62YrYp9ioINin2YTZhdiz2KrZgtio2YTZilxyXG4gICAgICBjb25zdCBwcmVkaWN0ZWRBYnNlbmNlUmF0ZSA9IE1hdGgubWluKDEwMCwgYWJzZW5jZVJhdGUgKiAxLjIpO1xyXG5cclxuICAgICAgZHJpdmVyLmFpTWV0cmljcy5wcmVkaWN0ZWRBYnNlbmNlUmF0ZSA9IE1hdGgucm91bmQocHJlZGljdGVkQWJzZW5jZVJhdGUpO1xyXG5cclxuICAgICAgLy8g2KrYrdiv2YrYryDYp9mE2KfYqtis2KfZh1xyXG4gICAgICBpZiAoYWJzZW5jZVJhdGUgPiAyMCkge1xyXG4gICAgICAgIGRyaXZlci5haU1ldHJpY3MucHJlZGljdGVkUGVyZm9ybWFuY2VUcmVuZCA9ICdkZWNsaW5pbmcnO1xyXG4gICAgICAgIGRyaXZlci5haU1ldHJpY3MudHJhaW5pbmdSZWNvbW1lbmRhdGlvbnMgPSBbXHJcbiAgICAgICAgICAn2LnZgtivINin2KzYqtmF2KfYuSDZhdi5INin2YTYs9in2KbZgiDZhNmB2YfZhSDYp9mE2YXYtNin2YPZhCcsXHJcbiAgICAgICAgICAn2KrZgtiv2YrZhSDYr9i52YUg2KXYttin2YHZiicsXHJcbiAgICAgICAgICAn2YXYsdin2YLYqNipINin2YTYutmK2KfYqCDYudmGINmD2KvYqCcsXHJcbiAgICAgICAgXTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBkcml2ZXIuYWlNZXRyaWNzLnByZWRpY3RlZFBlcmZvcm1hbmNlVHJlbmQgPSAnc3RhYmxlJztcclxuICAgICAgfVxyXG5cclxuICAgICAgYXdhaXQgZHJpdmVyLnNhdmUoKTtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBkcml2ZXJJZDogZHJpdmVyLl9pZCxcclxuICAgICAgICBjdXJyZW50QWJzZW5jZVJhdGU6IGFic2VuY2VSYXRlLFxyXG4gICAgICAgIHByZWRpY3RlZEFic2VuY2VSYXRlOiBNYXRoLnJvdW5kKHByZWRpY3RlZEFic2VuY2VSYXRlKSxcclxuICAgICAgICB0cmVuZDogZHJpdmVyLmFpTWV0cmljcy5wcmVkaWN0ZWRQZXJmb3JtYW5jZVRyZW5kLFxyXG4gICAgICB9O1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gcHJlZGljdCBhYnNlbmNlIHJhdGU6ICR7ZXJyb3IubWVzc2FnZX1gKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqINin2YTYqtmG2KjYpCDYqNin2KrYrNin2Ycg2KfZhNij2K/Yp9ihXHJcbiAgICovXHJcbiAgc3RhdGljIGFzeW5jIHByZWRpY3RQZXJmb3JtYW5jZVRyZW5kKGRyaXZlcklkKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBkcml2ZXIgPSBhd2FpdCBEcml2ZXIuZmluZEJ5SWQoZHJpdmVySWQpO1xyXG4gICAgICBpZiAoIWRyaXZlcikgdGhyb3cgbmV3IEVycm9yKCdEcml2ZXIgbm90IGZvdW5kJyk7XHJcblxyXG4gICAgICAvLyDYp9mE2K3YtdmI2YQg2LnZhNmJINio2YrYp9mG2KfYqiDYp9mE2KPYr9in2KEg2YXZhiDYotiu2LEg2LHYrdmE2KfYqlxyXG4gICAgICBjb25zdCByZWNlbnRUcmlwcyA9IGF3YWl0IFRyaXAuZmluZCh7IGRyaXZlcjogZHJpdmVySWQgfSlcclxuICAgICAgICAuc29ydCh7IGNyZWF0ZWRBdDogLTEgfSlcclxuICAgICAgICAubGltaXQoMTApO1xyXG5cclxuICAgICAgaWYgKHJlY2VudFRyaXBzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIHJldHVybiB7IHRyZW5kOiAnbm9fZGF0YScgfTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8g2K3Ys9in2Kgg2YXYqtmI2LPYtyDYp9mE2KrZgtmK2YrZitmF2KfYqlxyXG4gICAgICBsZXQgdG90YWxSYXRpbmcgPSAwO1xyXG4gICAgICBsZXQgcmF0aW5nQ291bnQgPSAwO1xyXG5cclxuICAgICAgcmVjZW50VHJpcHMuZm9yRWFjaCgodHJpcCkgPT4ge1xyXG4gICAgICAgIHRyaXAucGFzc2VuZ2Vycy5saXN0LmZvckVhY2goKHBhc3NlbmdlcikgPT4ge1xyXG4gICAgICAgICAgaWYgKHBhc3Nlbmdlci5yYXRpbmcgJiYgcGFzc2VuZ2VyLnJhdGluZyA+IDApIHtcclxuICAgICAgICAgICAgdG90YWxSYXRpbmcgKz0gcGFzc2VuZ2VyLnJhdGluZztcclxuICAgICAgICAgICAgcmF0aW5nQ291bnQrKztcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCBhdmVyYWdlUmF0aW5nID0gcmF0aW5nQ291bnQgPiAwID8gdG90YWxSYXRpbmcgLyByYXRpbmdDb3VudCA6IDA7XHJcblxyXG4gICAgICAvLyDZhdmC2KfYsdmG2Kkg2YXYuSDYp9mE2KPYr9in2KEg2KfZhNiz2KfYqNmCXHJcbiAgICAgIGNvbnN0IHByZXZpb3VzUmF0aW5nID0gZHJpdmVyLnN0YXRpc3RpY3MuYXZlcmFnZVBhc3NlbmdlclJhdGluZyB8fCAwO1xyXG4gICAgICBjb25zdCByYXRpbmdDaGFuZ2UgPSBhdmVyYWdlUmF0aW5nIC0gcHJldmlvdXNSYXRpbmc7XHJcblxyXG4gICAgICBsZXQgdHJlbmQgPSAnc3RhYmxlJztcclxuICAgICAgaWYgKHJhdGluZ0NoYW5nZSA+IDAuNSkge1xyXG4gICAgICAgIHRyZW5kID0gJ2ltcHJvdmluZyc7XHJcbiAgICAgIH0gZWxzZSBpZiAocmF0aW5nQ2hhbmdlIDwgLTAuNSkge1xyXG4gICAgICAgIHRyZW5kID0gJ2RlY2xpbmluZyc7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGRyaXZlci5haU1ldHJpY3MucHJlZGljdGVkUGVyZm9ybWFuY2VUcmVuZCA9IHRyZW5kO1xyXG5cclxuICAgICAgLy8g2KfZhNiq2YjYtdmK2KfYqiDYqNmG2KfYodmLINi52YTZiSDYp9mE2KfYqtis2KfZh1xyXG4gICAgICBpZiAodHJlbmQgPT09ICdkZWNsaW5pbmcnKSB7XHJcbiAgICAgICAgZHJpdmVyLmFpTWV0cmljcy50cmFpbmluZ1JlY29tbWVuZGF0aW9ucyA9IFtcclxuICAgICAgICAgICfYqtiv2LHZitioINi52YTZiSDYrtiv2YXYqSDYp9mE2LnZhdmE2KfYoScsXHJcbiAgICAgICAgICAn2YXYsdin2KzYudipINmC2YjYp9i52K8g2KfZhNiz2YTYp9mF2KknLFxyXG4gICAgICAgICAgJ9in2KzYqtmF2KfYuSDZhdi5INin2YTZhdiv2YrYsScsXHJcbiAgICAgICAgXTtcclxuICAgICAgICBkcml2ZXIuYWlNZXRyaWNzLnJpc2tGYWN0b3JzID0gWyfYp9mG2K7Zgdin2LYg2KfZhNiq2YLZitmK2YXYp9iqJywgJ9iq2K/Zh9mI2LEg2KfZhNij2K/Yp9ihJ107XHJcbiAgICAgIH0gZWxzZSBpZiAodHJlbmQgPT09ICdpbXByb3ZpbmcnKSB7XHJcbiAgICAgICAgZHJpdmVyLmFpTWV0cmljcy5zdHJlbmd0aHMgPSBbJ9iq2K3Ys9mGINin2YTYo9iv2KfYoScsICfYp9ix2KrZgdin2Lkg2KfZhNiq2YLZitmK2YXYp9iqJ107XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGF3YWl0IGRyaXZlci5zYXZlKCk7XHJcblxyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIGRyaXZlcklkOiBkcml2ZXIuX2lkLFxyXG4gICAgICAgIHRyZW5kLFxyXG4gICAgICAgIGF2ZXJhZ2VSYXRpbmcsXHJcbiAgICAgICAgcmF0aW5nQ2hhbmdlLFxyXG4gICAgICAgIHJlY29tbWVuZGF0aW9uczogZHJpdmVyLmFpTWV0cmljcy50cmFpbmluZ1JlY29tbWVuZGF0aW9ucyxcclxuICAgICAgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIHByZWRpY3QgcGVyZm9ybWFuY2UgdHJlbmQ6ICR7ZXJyb3IubWVzc2FnZX1gKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqINil2YbYtNin2KEg2KrZgtix2YrYsSDYtNin2YXZhCDZhNmE2LPYp9im2YJcclxuICAgKi9cclxuICBzdGF0aWMgYXN5bmMgZ2VuZXJhdGVDb21wcmVoZW5zaXZlUmVwb3J0KGRyaXZlcklkKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBkcml2ZXIgPSBhd2FpdCBEcml2ZXIuZmluZEJ5SWQoZHJpdmVySWQpLnBvcHVsYXRlKCd1c2VySWQnLCAnbmFtZSBlbWFpbCBwaG9uZScpO1xyXG5cclxuICAgICAgaWYgKCFkcml2ZXIpIHRocm93IG5ldyBFcnJvcignRHJpdmVyIG5vdCBmb3VuZCcpO1xyXG5cclxuICAgICAgLy8g2KrYrdiv2YrYqyDYrNmF2YrYuSDYp9mE2K/Ysdis2KfYqlxyXG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZUFsbFBlcmZvcm1hbmNlU2NvcmVzKGRyaXZlcklkKTtcclxuXHJcbiAgICAgIC8vINin2YTYqtmG2KjYpNin2KpcclxuICAgICAgY29uc3QgYWJzZW5jZVByZWRpY3Rpb24gPSBhd2FpdCB0aGlzLnByZWRpY3RBYnNlbmNlUmF0ZShkcml2ZXJJZCk7XHJcbiAgICAgIGNvbnN0IHBlcmZvcm1hbmNlVHJlbmQgPSBhd2FpdCB0aGlzLnByZWRpY3RQZXJmb3JtYW5jZVRyZW5kKGRyaXZlcklkKTtcclxuXHJcbiAgICAgIC8vINis2YXYuSDYp9mE2KjZitin2YbYp9iqXHJcbiAgICAgIGNvbnN0IHJlcG9ydCA9IHtcclxuICAgICAgICBkcml2ZXJJZDogZHJpdmVyLl9pZCxcclxuICAgICAgICBkcml2ZXJOYW1lOiBkcml2ZXIuZnVsbE5hbWUsXHJcbiAgICAgICAgZW1haWw6IGRyaXZlci5lbWFpbCxcclxuICAgICAgICBwZXJzb25hbFBob25lOiBkcml2ZXIucGVyc29uYWxQaG9uZSxcclxuICAgICAgICBzdGF0dXM6IGRyaXZlci5zdGF0dXMsXHJcbiAgICAgICAgaGlyZURhdGU6IGRyaXZlci5oaXJlRGF0ZSxcclxuICAgICAgICBleHBlcmllbmNlSW5ZZWFyczogZHJpdmVyLmV4cGVyaWVuY2VJblllYXJzLFxyXG5cclxuICAgICAgICAvLyDYr9ix2KzYp9iqINin2YTYo9iv2KfYoVxyXG4gICAgICAgIHBlcmZvcm1hbmNlOiB7XHJcbiAgICAgICAgICBvdmVyYWxsUmF0aW5nOiBkcml2ZXIucGVyZm9ybWFuY2Uub3ZlcmFsbFJhdGluZyxcclxuICAgICAgICAgIHNhZmV0eVNjb3JlOiBkcml2ZXIucGVyZm9ybWFuY2Uuc2FmZXR5U2NvcmUsXHJcbiAgICAgICAgICByZWxpYWJpbGl0eVNjb3JlOiBkcml2ZXIucGVyZm9ybWFuY2UucmVsaWFiaWxpdHlTY29yZSxcclxuICAgICAgICAgIGN1c3RvbWVyU2VydmljZVNjb3JlOiBkcml2ZXIucGVyZm9ybWFuY2UuY3VzdG9tZXJTZXJ2aWNlU2NvcmUsXHJcbiAgICAgICAgICBmdWVsRWZmaWNpZW5jeVNjb3JlOiBkcml2ZXIucGVyZm9ybWFuY2UuZnVlbEVmZmljaWVuY3lTY29yZSxcclxuICAgICAgICAgIG1haW50ZW5hbmNlU2NvcmU6IGRyaXZlci5wZXJmb3JtYW5jZS5tYWludGVuYW5jZVNjb3JlLFxyXG4gICAgICAgICAgYXR0ZW5kYW5jZVNjb3JlOiBkcml2ZXIucGVyZm9ybWFuY2UuYXR0ZW5kYW5jZVNjb3JlLFxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIC8vINin2YTYpdit2LXYp9im2YrYp9iqXHJcbiAgICAgICAgc3RhdGlzdGljczoge1xyXG4gICAgICAgICAgdG90YWxUcmlwczogZHJpdmVyLnN0YXRpc3RpY3MudG90YWxUcmlwcyxcclxuICAgICAgICAgIGNvbXBsZXRlZFRyaXBzOiBkcml2ZXIuc3RhdGlzdGljcy5jb21wbGV0ZWRUcmlwcyxcclxuICAgICAgICAgIGNhbmNlbGxlZFRyaXBzOiBkcml2ZXIuc3RhdGlzdGljcy5jYW5jZWxsZWRUcmlwcyxcclxuICAgICAgICAgIHRvdGFsSG91cnNXb3JrZWQ6IGRyaXZlci5zdGF0aXN0aWNzLnRvdGFsSG91cnNXb3JrZWQsXHJcbiAgICAgICAgICB0b3RhbEtpbG9tZXRlcnNEcml2ZW46IGRyaXZlci5zdGF0aXN0aWNzLnRvdGFsS2lsb21ldGVyc0RyaXZlbixcclxuICAgICAgICAgIGF2ZXJhZ2VQYXNzZW5nZXJSYXRpbmc6IGRyaXZlci5zdGF0aXN0aWNzLmF2ZXJhZ2VQYXNzZW5nZXJSYXRpbmcsXHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgLy8g2KfZhNin2YbYqtmH2KfZg9in2KpcclxuICAgICAgICB2aW9sYXRpb25zOiB7XHJcbiAgICAgICAgICB0b3RhbDogZHJpdmVyLnZpb2xhdGlvbnMudG90YWxWaW9sYXRpb25zLFxyXG4gICAgICAgICAgc3BlZWRpbmc6IGRyaXZlci52aW9sYXRpb25zLnNwZWVkaW5nSW5jaWRlbnRzLFxyXG4gICAgICAgICAgYWNjaWRlbnRzOiBkcml2ZXIudmlvbGF0aW9ucy5hY2NpZGVudHMsXHJcbiAgICAgICAgICBvdGhlcjogZHJpdmVyLnZpb2xhdGlvbnMudG90YWxWaW9sYXRpb25zIC0gZHJpdmVyLnZpb2xhdGlvbnMuc3BlZWRpbmdJbmNpZGVudHMgLSBkcml2ZXIudmlvbGF0aW9ucy5hY2NpZGVudHMsXHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgLy8g2KfZhNiq2YbYqNik2KfYqiDZiNin2YTYqtmI2LXZitin2KpcclxuICAgICAgICBwcmVkaWN0aW9uczoge1xyXG4gICAgICAgICAgYWJzZW5jZVJhdGU6IGFic2VuY2VQcmVkaWN0aW9uLnByZWRpY3RlZEFic2VuY2VSYXRlLFxyXG4gICAgICAgICAgcGVyZm9ybWFuY2VUcmVuZDogcGVyZm9ybWFuY2VUcmVuZC50cmVuZCxcclxuICAgICAgICAgIHRyYWluaW5nUmVjb21tZW5kYXRpb25zOiBkcml2ZXIuYWlNZXRyaWNzLnRyYWluaW5nUmVjb21tZW5kYXRpb25zLFxyXG4gICAgICAgICAgcmlza0ZhY3RvcnM6IGRyaXZlci5haU1ldHJpY3Mucmlza0ZhY3RvcnMsXHJcbiAgICAgICAgICBzdHJlbmd0aHM6IGRyaXZlci5haU1ldHJpY3Muc3RyZW5ndGhzLFxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIC8vINmF2LnZhNmI2YXYp9iqINin2YTYsdiu2LXYqVxyXG4gICAgICAgIGxpY2Vuc2U6IHtcclxuICAgICAgICAgIG51bWJlcjogZHJpdmVyLmxpY2Vuc2VEZXRhaWxzLmxpY2Vuc2VOdW1iZXIsXHJcbiAgICAgICAgICB0eXBlOiBkcml2ZXIubGljZW5zZURldGFpbHMubGljZW5zZVR5cGUsXHJcbiAgICAgICAgICBleHBpcnlEYXRlOiBkcml2ZXIubGljZW5zZURldGFpbHMuZXhwaXJ5RGF0ZSxcclxuICAgICAgICAgIGRheXNVbnRpbEV4cGlyeTogZHJpdmVyLmRheXNVbnRpbExpY2Vuc2VFeHBpcnksXHJcbiAgICAgICAgICBpc1ZhbGlkOiBkcml2ZXIuaXNMaWNlbnNlVmFsaWQoKSxcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICAvLyDYp9mE2LTZh9in2K/Yp9iqINin2YTZhti02LfYqVxyXG4gICAgICAgIGFjdGl2ZUNlcnRpZmljYXRpb25zOiBkcml2ZXIuZ2V0QWN0aXZlQ2VydGlmaWNhdGlvbnMoKSxcclxuXHJcbiAgICAgICAgZ2VuZXJhdGVkQXQ6IG5ldyBEYXRlKCksXHJcbiAgICAgIH07XHJcblxyXG4gICAgICByZXR1cm4gcmVwb3J0O1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gZ2VuZXJhdGUgY29tcHJlaGVuc2l2ZSByZXBvcnQ6ICR7ZXJyb3IubWVzc2FnZX1gKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqINin2YTYrdi12YjZhCDYudmE2Ykg2YLYp9im2YXYqSDYp9mE2LPYp9im2YLZitmGINin2YTYsNmK2YYg2YrYrdiq2KfYrNmI2YYg2KrYr9ix2YrYqNin2YtcclxuICAgKi9cclxuICBzdGF0aWMgYXN5bmMgZ2V0RHJpdmVyc05lZWRpbmdUcmFpbmluZygpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IGRyaXZlcnMgPSBhd2FpdCBEcml2ZXIuZmluZCh7XHJcbiAgICAgICAgaXNBY3RpdmU6IHRydWUsXHJcbiAgICAgICAgJG9yOiBbXHJcbiAgICAgICAgICB7ICdwZXJmb3JtYW5jZS5zYWZldHlTY29yZSc6IHsgJGx0OiA3MCB9IH0sXHJcbiAgICAgICAgICB7ICdwZXJmb3JtYW5jZS5jdXN0b21lclNlcnZpY2VTY29yZSc6IHsgJGx0OiA3MCB9IH0sXHJcbiAgICAgICAgICB7ICd0cmFpbmluZy50cmFpbmluZ0R1ZURhdGUnOiB7ICRsdGU6IG5ldyBEYXRlKCkgfSB9LFxyXG4gICAgICAgIF0sXHJcbiAgICAgIH0pLnNvcnQoeyAncGVyZm9ybWFuY2Uuc2FmZXR5U2NvcmUnOiAxIH0pO1xyXG5cclxuICAgICAgcmV0dXJuIGRyaXZlcnMubWFwKChkcml2ZXIpID0+ICh7XHJcbiAgICAgICAgZHJpdmVySWQ6IGRyaXZlci5faWQsXHJcbiAgICAgICAgZHJpdmVyTmFtZTogZHJpdmVyLmZ1bGxOYW1lLFxyXG4gICAgICAgIHNhZmV0eVNjb3JlOiBkcml2ZXIucGVyZm9ybWFuY2Uuc2FmZXR5U2NvcmUsXHJcbiAgICAgICAgY3VzdG9tZXJTZXJ2aWNlU2NvcmU6IGRyaXZlci5wZXJmb3JtYW5jZS5jdXN0b21lclNlcnZpY2VTY29yZSxcclxuICAgICAgICB0cmFpbmluZ0R1ZURhdGU6IGRyaXZlci50cmFpbmluZy50cmFpbmluZ0R1ZURhdGUsXHJcbiAgICAgICAgcmVjb21tZW5kYXRpb25zOiBkcml2ZXIuYWlNZXRyaWNzLnRyYWluaW5nUmVjb21tZW5kYXRpb25zLFxyXG4gICAgICB9KSk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBnZXQgZHJpdmVycyBuZWVkaW5nIHRyYWluaW5nOiAke2Vycm9yLm1lc3NhZ2V9YCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDYp9mE2K3YtdmI2YQg2LnZhNmJINij2YHYttmEINin2YTYs9in2KbZgtmK2YZcclxuICAgKi9cclxuICBzdGF0aWMgYXN5bmMgZ2V0VG9wUGVyZm9ybWVycyhsaW1pdCA9IDEwKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBkcml2ZXJzID0gYXdhaXQgRHJpdmVyLmZpbmQoeyBpc0FjdGl2ZTogdHJ1ZSB9KVxyXG4gICAgICAgIC5zb3J0KHsgJ3BlcmZvcm1hbmNlLm92ZXJhbGxSYXRpbmcnOiAtMSB9KVxyXG4gICAgICAgIC5saW1pdChsaW1pdClcclxuICAgICAgICAuc2VsZWN0KCdmaXJzdE5hbWUgbGFzdE5hbWUgcGVyZm9ybWFuY2Ugc3RhdGlzdGljcyBhaU1ldHJpY3MnKTtcclxuXHJcbiAgICAgIHJldHVybiBkcml2ZXJzO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gZ2V0IHRvcCBwZXJmb3JtZXJzOiAke2Vycm9yLm1lc3NhZ2V9YCk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IERyaXZlck1hbmFnZW1lbnRTZXJ2aWNlO1xyXG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE1BQU1BLE1BQU0sR0FBR0MsT0FBTyxDQUFDLGtCQUFrQixDQUFDO0FBQzFDLE1BQU1DLElBQUksR0FBR0QsT0FBTyxDQUFDLGdCQUFnQixDQUFDO0FBQ3RDLE1BQU1FLElBQUksR0FBR0YsT0FBTyxDQUFDLGdCQUFnQixDQUFDO0FBQ3RDLE1BQU1HLE9BQU8sR0FBR0gsT0FBTyxDQUFDLG1CQUFtQixDQUFDO0FBRTVDLE1BQU1JLHVCQUF1QixDQUFDO0VBQzVCO0FBQ0Y7QUFDQTtFQUNFLGFBQWFDLG9CQUFvQkEsQ0FBQ0MsUUFBUSxFQUFFO0lBQzFDLElBQUk7TUFDRixNQUFNQyxNQUFNLEdBQUcsTUFBTVIsTUFBTSxDQUFDUyxRQUFRLENBQUNGLFFBQVEsQ0FBQztNQUM5QyxJQUFJLENBQUNDLE1BQU0sRUFBRSxNQUFNLElBQUlFLEtBQUssQ0FBQyxrQkFBa0IsQ0FBQztNQUVoRCxNQUFNQyxVQUFVLEdBQUdILE1BQU0sQ0FBQ0csVUFBVTtNQUNwQyxNQUFNQyxlQUFlLEdBQUdELFVBQVUsQ0FBQ0MsZUFBZSxJQUFJLENBQUM7O01BRXZEO01BQ0EsSUFBSUMsV0FBVyxHQUFHLEdBQUc7O01BRXJCO01BQ0FBLFdBQVcs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