e116575cbc19e0c208565f0e0eae2da0
// API Documentation Routes
const express = require('express');
const router = express.Router();
const {
  ApiResponse
} = require('../utils/apiResponse');

// Main API documentation
router.get('/', (_req, res) => {
  const documentation = {
    title: 'ERP System API',
    version: '1.0.0',
    description: 'Comprehensive Enterprise Resource Planning System API',
    baseURL: `http://localhost:${process.env.PORT}/api`,
    environment: process.env.NODE_ENV,
    endpoints: {
      authentication: {
        path: '/api/auth',
        methods: {
          POST: ['/register', '/login', '/logout', '/verify-email', '/forgot-password', '/reset-password'],
          GET: ['/verify-token', '/me', '/sessions'],
          PATCH: ['/change-password', '/update-profile', '/enable-2fa']
        }
      },
      users: {
        path: '/api/users',
        methods: {
          GET: ['/', '/:userId', '/stats/overview', '/search'],
          POST: ['/', '/import/csv', '/:userId/reset-password'],
          PUT: ['/:userId'],
          PATCH: ['/:userId/status', '/:userId/role'],
          DELETE: ['/:userId']
        }
      },
      rbac: {
        path: '/api/rbac',
        methods: {
          GET: ['/roles', '/roles/:roleId', '/permissions', '/stats/overview', '/audit/log', '/export/config'],
          POST: ['/roles', '/check-permission', '/check-access', '/roles/:roleId/permissions', '/import/config'],
          PUT: ['/roles/:roleId'],
          DELETE: ['/roles/:roleId', '/roles/:roleId/permissions/:permission']
        }
      },
      analytics: {
        path: '/api/analytics',
        methods: {
          GET: ['/user-behavior/:userId', '/performance-metrics', '/dashboard/:userId', '/trends/:metric', '/recommendations']
        }
      },
      cms: {
        path: '/api/cms',
        methods: {
          GET: ['/pages', '/pages/:slug', '/posts', '/categories', '/media', '/stats', '/pages/:pageId/autosaves'],
          POST: ['/pages', '/posts', '/categories', '/media/upload', '/schedule', '/pages/:pageId/restore/:versionId'],
          PUT: ['/pages/:pageId'],
          DELETE: ['/pages/:pageId', '/media/:mediaId', '/comments/:commentId']
        }
      },
      integrations: {
        path: '/api/integrations',
        methods: {
          GET: ['/status', '/available', '/rate-limit/:apiKey'],
          POST: ['/payments/process', '/email/send', '/sms/send', '/storage/upload', '/crm/sync', '/analytics/track', '/webhooks/handle']
        }
      },
      monitoring: {
        path: '/api/monitoring',
        methods: {
          GET: ['/health', '/metrics', '/endpoints', '/alerts', '/database', '/realtime']
        }
      },
      notifications: {
        path: '/api/notifications',
        methods: {
          GET: ['/user/:userId'],
          POST: ['/send', '/schedule'],
          PUT: ['/:id/read'],
          DELETE: ['/:id', '/user/:userId/all']
        }
      },
      performance: {
        path: '/api/performance',
        methods: {
          GET: ['/analysis', '/caching/recommendations', '/database/optimization', '/code/optimization', '/benchmarks', '/history']
        }
      },
      predictions: {
        path: '/api/predictions',
        methods: {
          POST: ['/sales', '/performance', '/attendance', '/churn', '/inventory']
        }
      },
      reports: {
        path: '/api/reports',
        methods: {
          GET: ['/all'],
          POST: ['/generate', '/export/csv', '/export/json', '/export/excel'],
          DELETE: ['/:id']
        }
      },
      support: {
        path: '/api/support',
        methods: {
          GET: ['/tickets', '/statistics', '/faq', '/team/status', '/kb/search'],
          POST: ['/tickets/create', '/tickets/:id/comments'],
          PUT: ['/tickets/:id/status']
        }
      }
    },
    headers: {
      authorization: 'Bearer <jwt_token>',
      'content-type': 'application/json'
    },
    statusCodes: {
      200: 'OK',
      201: 'Created',
      400: 'Bad Request',
      401: 'Unauthorized',
      403: 'Forbidden',
      404: 'Not Found',
      500: 'Internal Server Error'
    },
    examples: {
      login: {
        method: 'POST',
        url: '/api/auth/login',
        body: {
          email: 'user@example.com',
          password: 'password123'
        }
      },
      registerUser: {
        method: 'POST',
        url: '/api/users',
        body: {
          name: 'John Doe',
          email: 'john@example.com',
          password: 'secure_password_123',
          role: 'user'
        }
      },
      getUsers: {
        method: 'GET',
        url: '/api/users?role=user&status=active',
        headers: {
          authorization: 'Bearer <jwt_token>'
        }
      }
    }
  };
  return res.json(new ApiResponse(200, documentation, 'API Documentation'));
});

// Endpoint list
router.get('/endpoints', (req, res) => {
  const endpoints = [{
    path: '/api/auth',
    description: 'Authentication endpoints'
  }, {
    path: '/api/users',
    description: 'User management'
  }, {
    path: '/api/rbac',
    description: 'Role-based access control'
  }, {
    path: '/api/analytics',
    description: 'Advanced analytics'
  }, {
    path: '/api/cms',
    description: 'Content management system'
  }, {
    path: '/api/integrations',
    description: 'Third-party integrations'
  }, {
    path: '/api/monitoring',
    description: 'System monitoring'
  }, {
    path: '/api/notifications',
    description: 'Notifications system'
  }, {
    path: '/api/performance',
    description: 'Performance optimization'
  }, {
    path: '/api/predictions',
    description: 'AI predictions'
  }, {
    path: '/api/reports',
    description: 'Report generation'
  }, {
    path: '/api/support',
    description: 'Support tickets'
  }];
  return res.json(new ApiResponse(200, endpoints, 'API Endpoints'));
});

// Health status
router.get('/status', (req, res) => {
  const status = {
    api: 'operational',
    database: process.env.USE_MOCK_DB === 'true' ? 'mock' : 'connected',
    cache: process.env.USE_MOCK_CACHE === 'true' ? 'mock' : 'configured',
    environment: process.env.NODE_ENV,
    timestamp: new Date().toISOString(),
    uptime: Math.floor(process.uptime())
  };
  return res.json(new ApiResponse(200, status, 'System status'));
});
module.exports = router;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsInJvdXRlciIsIlJvdXRlciIsIkFwaVJlc3BvbnNlIiwiZ2V0IiwiX3JlcSIsInJlcyIsImRvY3VtZW50YXRpb24iLCJ0aXRsZSIsInZlcnNpb24iLCJkZXNjcmlwdGlvbiIsImJhc2VVUkwiLCJwcm9jZXNzIiwiZW52IiwiUE9SVCIsImVudmlyb25tZW50IiwiTk9ERV9FTlYiLCJlbmRwb2ludHMiLCJhdXRoZW50aWNhdGlvbiIsInBhdGgiLCJtZXRob2RzIiwiUE9TVCIsIkdFVCIsIlBBVENIIiwidXNlcnMiLCJQVVQiLCJERUxFVEUiLCJyYmFjIiwiYW5hbHl0aWNzIiwiY21zIiwiaW50ZWdyYXRpb25zIiwibW9uaXRvcmluZyIsIm5vdGlmaWNhdGlvbnMiLCJwZXJmb3JtYW5jZSIsInByZWRpY3Rpb25zIiwicmVwb3J0cyIsInN1cHBvcnQiLCJoZWFkZXJzIiwiYXV0aG9yaXphdGlvbiIsInN0YXR1c0NvZGVzIiwiZXhhbXBsZXMiLCJsb2dpbiIsIm1ldGhvZCIsInVybCIsImJvZHkiLCJlbWFpbCIsInBhc3N3b3JkIiwicmVnaXN0ZXJVc2VyIiwibmFtZSIsInJvbGUiLCJnZXRVc2VycyIsImpzb24iLCJyZXEiLCJzdGF0dXMiLCJhcGkiLCJkYXRhYmFzZSIsIlVTRV9NT0NLX0RCIiwiY2FjaGUiLCJVU0VfTU9DS19DQUNIRSIsInRpbWVzdGFtcCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsInVwdGltZSIsIk1hdGgiLCJmbG9vciIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlcyI6WyJkb2NzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIEFQSSBEb2N1bWVudGF0aW9uIFJvdXRlc1xyXG5jb25zdCBleHByZXNzID0gcmVxdWlyZSgnZXhwcmVzcycpO1xyXG5jb25zdCByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xyXG5jb25zdCB7IEFwaVJlc3BvbnNlIH0gPSByZXF1aXJlKCcuLi91dGlscy9hcGlSZXNwb25zZScpO1xyXG5cclxuLy8gTWFpbiBBUEkgZG9jdW1lbnRhdGlvblxyXG5yb3V0ZXIuZ2V0KCcvJywgKF9yZXEsIHJlcykgPT4ge1xyXG4gIGNvbnN0IGRvY3VtZW50YXRpb24gPSB7XHJcbiAgICB0aXRsZTogJ0VSUCBTeXN0ZW0gQVBJJyxcclxuICAgIHZlcnNpb246ICcxLjAuMCcsXHJcbiAgICBkZXNjcmlwdGlvbjogJ0NvbXByZWhlbnNpdmUgRW50ZXJwcmlzZSBSZXNvdXJjZSBQbGFubmluZyBTeXN0ZW0gQVBJJyxcclxuICAgIGJhc2VVUkw6IGBodHRwOi8vbG9jYWxob3N0OiR7cHJvY2Vzcy5lbnYuUE9SVH0vYXBpYCxcclxuICAgIGVudmlyb25tZW50OiBwcm9jZXNzLmVudi5OT0RFX0VOVixcclxuICAgIGVuZHBvaW50czoge1xyXG4gICAgICBhdXRoZW50aWNhdGlvbjoge1xyXG4gICAgICAgIHBhdGg6ICcvYXBpL2F1dGgnLFxyXG4gICAgICAgIG1ldGhvZHM6IHtcclxuICAgICAgICAgIFBPU1Q6IFtcclxuICAgICAgICAgICAgJy9yZWdpc3RlcicsXHJcbiAgICAgICAgICAgICcvbG9naW4nLFxyXG4gICAgICAgICAgICAnL2xvZ291dCcsXHJcbiAgICAgICAgICAgICcvdmVyaWZ5LWVtYWlsJyxcclxuICAgICAgICAgICAgJy9mb3Jnb3QtcGFzc3dvcmQnLFxyXG4gICAgICAgICAgICAnL3Jlc2V0LXBhc3N3b3JkJyxcclxuICAgICAgICAgIF0sXHJcbiAgICAgICAgICBHRVQ6IFsnL3ZlcmlmeS10b2tlbicsICcvbWUnLCAnL3Nlc3Npb25zJ10sXHJcbiAgICAgICAgICBQQVRDSDogWycvY2hhbmdlLXBhc3N3b3JkJywgJy91cGRhdGUtcHJvZmlsZScsICcvZW5hYmxlLTJmYSddLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0sXHJcbiAgICAgIHVzZXJzOiB7XHJcbiAgICAgICAgcGF0aDogJy9hcGkvdXNlcnMnLFxyXG4gICAgICAgIG1ldGhvZHM6IHtcclxuICAgICAgICAgIEdFVDogWycvJywgJy86dXNlcklkJywgJy9zdGF0cy9vdmVydmlldycsICcvc2VhcmNoJ10sXHJcbiAgICAgICAgICBQT1NUOiBbJy8nLCAnL2ltcG9ydC9jc3YnLCAnLzp1c2VySWQvcmVzZXQtcGFzc3dvcmQnXSxcclxuICAgICAgICAgIFBVVDogWycvOnVzZXJJZCddLFxyXG4gICAgICAgICAgUEFUQ0g6IFsnLzp1c2VySWQvc3RhdHVzJywgJy86dXNlcklkL3JvbGUnXSxcclxuICAgICAgICAgIERFTEVURTogWycvOnVzZXJJZCddLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0sXHJcbiAgICAgIHJiYWM6IHtcclxuICAgICAgICBwYXRoOiAnL2FwaS9yYmFjJyxcclxuICAgICAgICBtZXRob2RzOiB7XHJcbiAgICAgICAgICBHRVQ6IFtcclxuICAgICAgICAgICAgJy9yb2xlcycsXHJcbiAgICAgICAgICAgICcvcm9sZXMvOnJvbGVJZCcsXHJcbiAgICAgICAgICAgICcvcGVybWlzc2lvbnMnLFxyXG4gICAgICAgICAgICAnL3N0YXRzL292ZXJ2aWV3JyxcclxuICAgICAgICAgICAgJy9hdWRpdC9sb2cnLFxyXG4gICAgICAgICAgICAnL2V4cG9ydC9jb25maWcnLFxyXG4gICAgICAgICAgXSxcclxuICAgICAgICAgIFBPU1Q6IFtcclxuICAgICAgICAgICAgJy9yb2xlcycsXHJcbiAgICAgICAgICAgICcvY2hlY2stcGVybWlzc2lvbicsXHJcbiAgICAgICAgICAgICcvY2hlY2stYWNjZXNzJyxcclxuICAgICAgICAgICAgJy9yb2xlcy86cm9sZUlkL3Blcm1pc3Npb25zJyxcclxuICAgICAgICAgICAgJy9pbXBvcnQvY29uZmlnJyxcclxuICAgICAgICAgIF0sXHJcbiAgICAgICAgICBQVVQ6IFsnL3JvbGVzLzpyb2xlSWQnXSxcclxuICAgICAgICAgIERFTEVURTogWycvcm9sZXMvOnJvbGVJZCcsICcvcm9sZXMvOnJvbGVJZC9wZXJtaXNzaW9ucy86cGVybWlzc2lvbiddLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0sXHJcbiAgICAgIGFuYWx5dGljczoge1xyXG4gICAgICAgIHBhdGg6ICcvYXBpL2FuYWx5dGljcycsXHJcbiAgICAgICAgbWV0aG9kczoge1xyXG4gICAgICAgICAgR0VUOiBbXHJcbiAgICAgICAgICAgICcvdXNlci1iZWhhdmlvci86dXNlcklkJyxcclxuICAgICAgICAgICAgJy9wZXJmb3JtYW5jZS1tZXRyaWNzJyxcclxuICAgICAgICAgICAgJy9kYXNoYm9hcmQvOnVzZXJJZCcsXHJcbiAgICAgICAgICAgICcvdHJlbmRzLzptZXRyaWMnLFxyXG4gICAgICAgICAgICAnL3JlY29tbWVuZGF0aW9ucycsXHJcbiAgICAgICAgICBdLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0sXHJcbiAgICAgIGNtczoge1xyXG4gICAgICAgIHBhdGg6ICcvYXBpL2NtcycsXHJcbiAgICAgICAgbWV0aG9kczoge1xyXG4gICAgICAgICAgR0VUOiBbXHJcbiAgICAgICAgICAgICcvcGFnZXMnLFxyXG4gICAgICAgICAgICAnL3BhZ2VzLzpzbHVnJyxcclxuICAgICAgICAgICAgJy9wb3N0cycsXHJcbiAgICAgICAgICAgICcvY2F0ZWdvcmllcycsXHJcbiAgICAgICAgICAgICcvbWVkaWEnLFxyXG4gICAgICAgICAgICAnL3N0YXRzJyxcclxuICAgICAgICAgICAgJy9wYWdlcy86cGFnZUlkL2F1dG9zYXZlcycsXHJcbiAgICAgICAgICBdLFxyXG4gICAgICAgICAgUE9TVDogW1xyXG4gICAgICAgICAgICAnL3BhZ2VzJyxcclxuICAgICAgICAgICAgJy9wb3N0cycsXHJcbiAgICAgICAgICAgICcvY2F0ZWdvcmllcycsXHJcbiAgICAgICAgICAgICcvbWVkaWEvdXBsb2FkJyxcclxuICAgICAgICAgICAgJy9zY2hlZHVsZScsXHJcbiAgICAgICAgICAgICcvcGFnZXMvOnBhZ2VJZC9yZXN0b3JlLzp2ZXJzaW9uSWQnLFxyXG4gICAgICAgICAgXSxcclxuICAgICAgICAgIFBVVDogWycvcGFnZXMvOnBhZ2VJZCddLFxyXG4gICAgICAgICAgREVMRVRFOiBbJy9wYWdlcy86cGFnZUlkJywgJy9tZWRpYS86bWVkaWFJZCcsICcvY29tbWVudHMvOmNvbW1lbnRJZCddLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0sXHJcbiAgICAgIGludGVncmF0aW9uczoge1xyXG4gICAgICAgIHBhdGg6ICcvYXBpL2ludGVncmF0aW9ucycsXHJcbiAgICAgICAgbWV0aG9kczoge1xyXG4gICAgICAgICAgR0VUOiBbJy9zdGF0dXMnLCAnL2F2YWlsYWJsZScsICcvcmF0ZS1saW1pdC86YXBpS2V5J10sXHJcbiAgICAgICAgICBQT1NUOiBbXHJcbiAgICAgICAgICAgICcvcGF5bWVudHMvcHJvY2VzcycsXHJcbiAgICAgICAgICAgICcvZW1haWwvc2VuZCcsXHJcbiAgICAgICAgICAgICcvc21zL3NlbmQnLFxyXG4gICAgICAgICAgICAnL3N0b3JhZ2UvdXBsb2FkJyxcclxuICAgICAgICAgICAgJy9jcm0vc3luYycsXHJcbiAgICAgICAgICAgICcvYW5hbHl0aWNzL3RyYWNrJyxcclxuICAgICAgICAgICAgJy93ZWJob29rcy9oYW5kbGUnLFxyXG4gICAgICAgICAgXSxcclxuICAgICAgICB9LFxyXG4gICAgICB9LFxyXG4gICAgICBtb25pdG9yaW5nOiB7XHJcbiAgICAgICAgcGF0aDogJy9hcGkvbW9uaXRvcmluZycsXHJcbiAgICAgICAgbWV0aG9kczoge1xyXG4gICAgICAgICAgR0VUOiBbJy9oZWFsdGgnLCAnL21ldHJpY3MnLCAnL2VuZHBvaW50cycsICcvYWxlcnRzJywgJy9kYXRhYmFzZScsICcvcmVhbHRpbWUnXSxcclxuICAgICAgICB9LFxyXG4gICAgICB9LFxyXG4gICAgICBub3RpZmljYXRpb25zOiB7XHJcbiAgICAgICAgcGF0aDogJy9hcGkvbm90aWZpY2F0aW9ucycsXHJcbiAgICAgICAgbWV0aG9kczoge1xyXG4gICAgICAgICAgR0VUOiBbJy91c2VyLzp1c2VySWQnXSxcclxuICAgICAgICAgIFBPU1Q6IFsnL3NlbmQnLCAnL3NjaGVkdWxlJ10sXHJcbiAgICAgICAgICBQVVQ6IFsnLzppZC9yZWFkJ10sXHJcbiAgICAgICAgICBERUxFVEU6IFsnLzppZCcsICcvdXNlci86dXNlcklkL2FsbCddLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0sXHJcbiAgICAgIHBlcmZvcm1hbmNlOiB7XHJcbiAgICAgICAgcGF0aDogJy9hcGkvcGVyZm9ybWFuY2UnLFxyXG4gICAgICAgIG1ldGhvZHM6IHtcclxuICAgICAgICAgIEdFVDogW1xyXG4gICAgICAgICAgICAnL2FuYWx5c2lzJyxcclxuICAgICAgICAgICAgJy9jYWNoaW5nL3JlY29tbWVuZGF0aW9ucycsXHJcbiAgICAgICAgICAgICcvZGF0YWJhc2Uvb3B0aW1pemF0aW9uJyxcclxuICAgICAgICAgICAgJy9jb2RlL29wdGltaXphdGlvbicsXHJcbiAgICAgICAgICAgICcvYmVuY2htYXJrcycsXHJcbiAgICAgICAgICAgICcvaGlzdG9yeScsXHJcbiAgICAgICAgICBdLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0sXHJcbiAgICAgIHByZWRpY3Rpb25zOiB7XHJcbiAgICAgICAgcGF0aDogJy9hcGkvcHJlZGljdGlvbnMnLFxyXG4gICAgICAgIG1ldGhvZHM6IHtcclxuICAgICAgICAgIFBPU1Q6IFsnL3NhbGVzJywgJy9wZXJmb3JtYW5jZScsICcvYXR0ZW5kYW5jZScsICcvY2h1cm4nLCAnL2ludmVudG9yeSddLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0sXHJcbiAgICAgIHJlcG9ydHM6IHtcclxuICAgICAgICBwYXRoOiAnL2FwaS9yZXBvcnRzJyxcclxuICAgICAgICBtZXRob2RzOiB7XHJcbiAgICAgICAgICBHRVQ6IFsnL2FsbCddLFxyXG4gICAgICAgICAgUE9TVDogWycvZ2VuZXJhdGUnLCAnL2V4cG9ydC9jc3YnLCAnL2V4cG9ydC9qc29uJywgJy9leHBvcnQvZXhjZWwnXSxcclxuICAgICAgICAgIERFTEVURTogWycvOmlkJ10sXHJcbiAgICAgICAgfSxcclxuICAgICAgfSxcclxuICAgICAgc3VwcG9ydDoge1xyXG4gICAgICAgIHBhdGg6ICcvYXBpL3N1cHBvcnQnLFxyXG4gICAgICAgIG1ldGhvZHM6IHtcclxuICAgICAgICAgIEdFVDogWycvdGlja2V0cycsICcvc3RhdGlzdGljcycsICcvZmFxJywgJy90ZWFtL3N0YXR1cycsICcva2Ivc2VhcmNoJ10sXHJcbiAgICAgICAgICBQT1NUOiBbJy90aWNrZXRzL2NyZWF0ZScsICcvdGlja2V0cy86aWQvY29tbWVudHMnXSxcclxuICAgICAgICAgIFBVVDogWycvdGlja2V0cy86aWQvc3RhdHVzJ10sXHJcbiAgICAgICAgfSxcclxuICAgICAgfSxcclxuICAgIH0sXHJcbiAgICBoZWFkZXJzOiB7XHJcbiAgICAgIGF1dGhvcml6YXRpb246ICdCZWFyZXIgPGp3dF90b2tlbj4nLFxyXG4gICAgICAnY29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgfSxcclxuICAgIHN0YXR1c0NvZGVzOiB7XHJcbiAgICAgIDIwMDogJ09LJyxcclxuICAgICAgMjAxOiAnQ3JlYXRlZCcsXHJcbiAgICAgIDQwMDogJ0JhZCBSZXF1ZXN0JyxcclxuICAgICAgNDAxOiAnVW5hdXRob3JpemVkJyxcclxuICAgICAgNDAzOiAnRm9yYmlkZGVuJyxcclxuICAgICAgNDA0OiAnTm90IEZvdW5kJyxcclxuICAgICAgNTAwOiAnSW50ZXJuYWwgU2VydmVyIEVycm9yJyxcclxuICAgIH0sXHJcbiAgICBleGFtcGxlczoge1xyXG4gICAgICBsb2dpbjoge1xyXG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgIHVybDogJy9hcGkvYXV0aC9sb2dpbicsXHJcbiAgICAgICAgYm9keToge1xyXG4gICAgICAgICAgZW1haWw6ICd1c2VyQGV4YW1wbGUuY29tJyxcclxuICAgICAgICAgIHBhc3N3b3JkOiAncGFzc3dvcmQxMjMnLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0sXHJcbiAgICAgIHJlZ2lzdGVyVXNlcjoge1xyXG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgIHVybDogJy9hcGkvdXNlcnMnLFxyXG4gICAgICAgIGJvZHk6IHtcclxuICAgICAgICAgIG5hbWU6ICdKb2huIERvZScsXHJcbiAgICAgICAgICBlbWFpbDogJ2pvaG5AZXhhbXBsZS5jb20nLFxyXG4gICAgICAgICAgcGFzc3dvcmQ6ICdzZWN1cmVfcGFzc3dvcmRfMTIzJyxcclxuICAgICAgICAgIHJvbGU6ICd1c2VyJyxcclxuICAgICAgICB9LFxyXG4gICAgICB9LFxyXG4gICAgICBnZXRVc2Vyczoge1xyXG4gICAgICAgIG1ldGhvZDogJ0dFVCcsXHJcbiAgICAgICAgdXJsOiAnL2FwaS91c2Vycz9yb2xlPXVzZXImc3RhdHVzPWFjdGl2ZScsXHJcbiAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgYXV0aG9yaXphdGlvbjogJ0JlYXJlciA8and0X3Rva2VuPicsXHJcbiAgICAgICAgfSxcclxuICAgICAgfSxcclxuICAgIH0sXHJcbiAgfTtcclxuXHJcbiAgcmV0dXJuIHJlcy5qc29uKG5ldyBBcGlSZXNwb25zZSgyMDAsIGRvY3VtZW50YXRpb24sICdBUEkgRG9jdW1lbnRhdGlvbicpKTtcclxufSk7XHJcblxyXG4vLyBFbmRwb2ludCBsaXN0XHJcbnJvdXRlci5nZXQoJy9lbmRwb2ludHMnLCAocmVxLCByZXMpID0+IHtcclxuICBjb25zdCBlbmRwb2ludHMgPSBbXHJcbiAgICB7IHBhdGg6ICcvYXBpL2F1dGgnLCBkZXNjcmlwdGlvbjogJ0F1dGhlbnRpY2F0aW9uIGVuZHBvaW50cycgfSxcclxuICAgIHsgcGF0aDogJy9hcGkvdXNlcnMnLCBkZXNjcmlwdGlvbjogJ1VzZXIgbWFuYWdlbWVudCcgfSxcclxuICAgIHsgcGF0aDogJy9hcGkvcmJhYycsIGRlc2NyaXB0aW9uOiAnUm9sZS1iYXNlZCBhY2Nlc3MgY29udHJvbCcgfSxcclxuICAgIHsgcGF0aDogJy9hcGkvYW5hbHl0aWNzJywgZGVzY3JpcHRpb246ICdBZHZhbmNlZCBhbmFseXRpY3MnIH0sXHJcbiAgICB7IHBhdGg6ICcvYXBpL2NtcycsIGRlc2NyaXB0aW9uOiAnQ29udGVudCBtYW5hZ2VtZW50IHN5c3RlbScgfSxcclxuICAgIHsgcGF0aDogJy9hcGkvaW50ZWdyYXRpb25zJywgZGVzY3JpcHRpb246ICdUaGlyZC1wYXJ0eSBpbnRlZ3JhdGlvbnMnIH0sXHJcbiAgICB7IHBhdGg6ICcvYXBpL21vbml0b3JpbmcnLCBkZXNjcmlwdGlvbjogJ1N5c3RlbSBtb25pdG9yaW5nJyB9LFxyXG4gICAgeyBwYXRoOiAnL2FwaS9ub3RpZmljYXRpb25zJywgZGVzY3JpcHRpb246ICdOb3RpZmljYXRpb25zIHN5c3RlbScgfSxcclxuICAgIHsgcGF0aDogJy9hcGkvcGVyZm9ybWFuY2UnLCBkZXNjcmlwdGlvbjogJ1BlcmZvcm1hbmNlIG9wdGltaXphdGlvbicgfSxcclxuICAgIHsgcGF0aDogJy9hcGkvcHJlZGljdGlvbnMnLCBkZXNjcmlwdGlvbjogJ0FJIHByZWRpY3Rpb25zJyB9LFxyXG4gICAgeyBwYXRoOiAnL2FwaS9yZXBvcnRzJywgZGVzY3JpcHRpb246ICdSZXBvcnQgZ2VuZXJhdGlvbicgfSxcclxuICAgIHsgcGF0aDogJy9hcGkvc3VwcG9ydCcsIGRlc2NyaXB0aW9uOiAnU3VwcG9ydCB0aWNrZXRzJyB9LFxyXG4gIF07XHJcblxyXG4gIHJldHVybiByZXMuanNvbihuZXcgQXBpUmVzcG9uc2UoMjAwLCBlbmRwb2ludHMsICdBUEkgRW5kcG9pbnRzJykpO1xyXG59KTtcclxuXHJcbi8vIEhlYWx0aCBzdGF0dXNcclxucm91dGVyLmdldCgnL3N0YXR1cycsIChyZXEsIHJlcykgPT4ge1xyXG4gIGNvbnN0IHN0YXR1cyA9IHtcclxuICAgIGFwaTogJ29wZXJhdGlvbmFsJyxcclxuICAgIGRhdGFiYXNlOiBwcm9jZXNzLmVudi5VU0VfTU9DS19EQiA9PT0gJ3RydWUnID8gJ21vY2snIDogJ2Nvbm5lY3RlZCcsXHJcbiAgICBjYWNoZTogcHJvY2Vzcy5lbnYuVVNFX01PQ0tfQ0FDSEUgPT09ICd0cnVlJyA/ICdtb2NrJyA6ICdjb25maWd1cmVkJyxcclxuICAgIGVudmlyb25tZW50OiBwcm9jZXNzLmVudi5OT0RFX0VOVixcclxuICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgdXB0aW1lOiBNYXRoLmZsb29yKHByb2Nlc3MudXB0aW1lKCkpLFxyXG4gIH07XHJcblxyXG4gIHJldHVybiByZXMuanNvbihuZXcgQXBpUmVzcG9uc2UoMjAwLCBzdGF0dXMsICdTeXN0ZW0gc3RhdHVzJykpO1xyXG59KTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gcm91dGVyO1xyXG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0EsTUFBTUEsT0FBTyxHQUFHQyxPQUFPLENBQUMsU0FBUyxDQUFDO0FBQ2xDLE1BQU1DLE1BQU0sR0FBR0YsT0FBTyxDQUFDRyxNQUFNLENBQUMsQ0FBQztBQUMvQixNQUFNO0VBQUVDO0FBQVksQ0FBQyxHQUFHSCxPQUFPLENBQUMsc0JBQXNCLENBQUM7O0FBRXZEO0FBQ0FDLE1BQU0sQ0FBQ0csR0FBRyxDQUFDLEdBQUcsRUFBRSxDQUFDQyxJQUFJLEVBQUVDLEdBQUcsS0FBSztFQUM3QixNQUFNQyxhQUFhLEdBQUc7SUFDcEJDLEtBQUssRUFBRSxnQkFBZ0I7SUFDdkJDLE9BQU8sRUFBRSxPQUFPO0lBQ2hCQyxXQUFXLEVBQUUsdURBQXVEO0lBQ3BFQyxPQUFPLEVBQUUsb0JBQW9CQyxPQUFPLENBQUNDLEdBQUcsQ0FBQ0MsSUFBSSxNQUFNO0lBQ25EQyxXQUFXLEVBQUVILE9BQU8sQ0FBQ0MsR0FBRyxDQUFDRyxRQUFRO0lBQ2pDQyxTQUFTLEVBQUU7TUFDVEMsY0FBYyxFQUFFO1FBQ2RDLElBQUksRUFBRSxXQUFXO1FBQ2pCQyxPQUFPLEVBQUU7VUFDUEMsSUFBSSxFQUFFLENBQ0osV0FBVyxFQUNYLFFBQVEsRUFDUixTQUFTLEVBQ1QsZUFB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