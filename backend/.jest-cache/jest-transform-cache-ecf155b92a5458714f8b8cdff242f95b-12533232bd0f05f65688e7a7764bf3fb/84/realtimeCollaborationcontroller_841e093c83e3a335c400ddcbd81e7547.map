{"version":3,"names":["RealtimeCollaborationService","require","Logger","RealtimeCollaborationController","createSession","req","res","documentId","title","maxParticipants","settings","body","userId","user","id","status","json","success","message","en","session","createCollaborationSession","permissions","allowComments","allowTracking","info","data","error","joinSession","sessionId","params","color","addUserToSession","activeUsers","getActiveUsers","includes","applyChange","operation","position","content","change","parseInt","timestamp","Date","updatePresence","cursor","selection","presence","updateUserPresence","line","ch","updateTypingStatus","isTyping","setUserTypingStatus","addComment","comment","replyToComment","commentId","reply","undo","redo","getDocumentSnapshot","query","snapshot","changesCount","length","changes","count","users","leaveSession","removeUserFromSession","getSessionStats","stats","exportChangeHistory","history","module","exports"],"sources":["realtimeCollaboration.controller.js"],"sourcesContent":["/**\r\n * متحكم التعاون في الوقت الفعلي\r\n * Real-Time Collaboration Controller\r\n */\r\n\r\nconst RealtimeCollaborationService = require('../services/realTimeCollaboration.service');\r\nconst Logger = require('../utils/logger');\r\n\r\nclass RealtimeCollaborationController {\r\n  /**\r\n   * إنشاء جلسة تعاون جديدة\r\n   * POST /api/collaboration/sessions\r\n   */\r\n  static async createSession(req, res) {\r\n    try {\r\n      const { documentId, title, maxParticipants, settings } = req.body;\r\n      const userId = req.user.id;\r\n\r\n      if (!documentId) {\r\n        return res.status(400).json({\r\n          success: false,\r\n          message: 'معرف المستند مطلوب',\r\n          en: 'Document ID is required',\r\n        });\r\n      }\r\n\r\n      const session = RealtimeCollaborationService.createCollaborationSession({\r\n        documentId,\r\n        userId,\r\n        title: title || `Document ${documentId}`,\r\n        maxParticipants: maxParticipants || 50,\r\n        permissions: settings?.permissions || {},\r\n        allowComments: settings?.allowComments !== false,\r\n        allowTracking: settings?.allowTracking !== false,\r\n      });\r\n\r\n      Logger.info(`Collaboration session created: ${session.id} by ${userId}`);\r\n\r\n      res.status(201).json({\r\n        success: true,\r\n        message: 'تم إنشاء جلسة التعاون بنجاح',\r\n        en: 'Collaboration session created successfully',\r\n        data: session,\r\n      });\r\n    } catch (error) {\r\n      Logger.error(`Create session error: ${error.message}`);\r\n      res.status(500).json({\r\n        success: false,\r\n        message: 'فشل إنشاء جلسة التعاون',\r\n        en: 'Failed to create collaboration session',\r\n        error: error.message,\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * الانضمام إلى جلسة تعاون\r\n   * POST /api/collaboration/sessions/:sessionId/join\r\n   */\r\n  static async joinSession(req, res) {\r\n    try {\r\n      const { sessionId } = req.params;\r\n      const userId = req.user.id;\r\n      const { color } = req.body;\r\n\r\n      const session = RealtimeCollaborationService.addUserToSession(\r\n        sessionId,\r\n        userId,\r\n        { color }\r\n      );\r\n\r\n      Logger.info(`User ${userId} joined session ${sessionId}`);\r\n\r\n      res.json({\r\n        success: true,\r\n        message: 'تم الانضمام إلى الجلسة بنجاح',\r\n        en: 'Successfully joined session',\r\n        data: {\r\n          session,\r\n          activeUsers: RealtimeCollaborationService.getActiveUsers(sessionId),\r\n        },\r\n      });\r\n    } catch (error) {\r\n      Logger.error(`Join session error: ${error.message}`);\r\n      res.status(error.message.includes('full') ? 400 : 500).json({\r\n        success: false,\r\n        message: error.message,\r\n        en: error.message,\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * تطبيق تغيير على المستند\r\n   * POST /api/collaboration/sessions/:sessionId/changes\r\n   */\r\n  static async applyChange(req, res) {\r\n    try {\r\n      const { sessionId } = req.params;\r\n      const userId = req.user.id;\r\n      const { operation, position, content } = req.body;\r\n\r\n      if (!['insert', 'delete'].includes(operation)) {\r\n        return res.status(400).json({\r\n          success: false,\r\n          message: 'نوع العملية غير صحيح',\r\n          en: 'Invalid operation type',\r\n        });\r\n      }\r\n\r\n      const change = RealtimeCollaborationService.applyChange({\r\n        sessionId,\r\n        userId,\r\n        documentId: req.body.documentId,\r\n        operation,\r\n        position: parseInt(position) || 0,\r\n        content: content || '',\r\n        timestamp: new Date(),\r\n      });\r\n\r\n      res.json({\r\n        success: true,\r\n        message: 'تم تطبيق التغيير بنجاح',\r\n        en: 'Change applied successfully',\r\n        data: change,\r\n      });\r\n    } catch (error) {\r\n      Logger.error(`Apply change error: ${error.message}`);\r\n      res.status(500).json({\r\n        success: false,\r\n        message: 'فشل تطبيق التغيير',\r\n        en: 'Failed to apply change',\r\n        error: error.message,\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * تحديث موضع المؤشر والتحديد\r\n   * PATCH /api/collaboration/sessions/:sessionId/presence\r\n   */\r\n  static async updatePresence(req, res) {\r\n    try {\r\n      const { sessionId } = req.params;\r\n      const userId = req.user.id;\r\n      const { cursor, selection } = req.body;\r\n\r\n      const presence = RealtimeCollaborationService.updateUserPresence(\r\n        sessionId,\r\n        userId,\r\n        {\r\n          cursor: cursor || { line: 0, ch: 0 },\r\n          selection: selection || null,\r\n        }\r\n      );\r\n\r\n      res.json({\r\n        success: true,\r\n        message: 'تم تحديث موضع المؤشر',\r\n        en: 'Presence updated',\r\n        data: presence,\r\n      });\r\n    } catch (error) {\r\n      Logger.error(`Update presence error: ${error.message}`);\r\n      res.status(500).json({\r\n        success: false,\r\n        message: 'فشل تحديث الموضع',\r\n        en: 'Failed to update presence',\r\n        error: error.message,\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * تحديث حالة الكتابة\r\n   * PATCH /api/collaboration/sessions/:sessionId/typing\r\n   */\r\n  static async updateTypingStatus(req, res) {\r\n    try {\r\n      const { sessionId } = req.params;\r\n      const userId = req.user.id;\r\n      const { isTyping } = req.body;\r\n\r\n      RealtimeCollaborationService.setUserTypingStatus(\r\n        sessionId,\r\n        userId,\r\n        isTyping === true\r\n      );\r\n\r\n      res.json({\r\n        success: true,\r\n        message: 'تم تحديث حالة الكتابة',\r\n        en: 'Typing status updated',\r\n      });\r\n    } catch (error) {\r\n      Logger.error(`Update typing status error: ${error.message}`);\r\n      res.status(500).json({\r\n        success: false,\r\n        message: 'فشل تحديث الحالة',\r\n        en: 'Failed to update typing status',\r\n        error: error.message,\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * إضافة تعليق\r\n   * POST /api/collaboration/sessions/:sessionId/comments\r\n   */\r\n  static async addComment(req, res) {\r\n    try {\r\n      const { sessionId } = req.params;\r\n      const userId = req.user.id;\r\n      const { documentId, position, content } = req.body;\r\n\r\n      const comment = RealtimeCollaborationService.addComment({\r\n        sessionId,\r\n        documentId,\r\n        userId,\r\n        position,\r\n        content,\r\n      });\r\n\r\n      Logger.info(`Comment added by ${userId} in session ${sessionId}`);\r\n\r\n      res.status(201).json({\r\n        success: true,\r\n        message: 'تم إضافة التعليق بنجاح',\r\n        en: 'Comment added successfully',\r\n        data: comment,\r\n      });\r\n    } catch (error) {\r\n      Logger.error(`Add comment error: ${error.message}`);\r\n      res.status(error.message.includes('not allowed') ? 400 : 500).json({\r\n        success: false,\r\n        message: error.message,\r\n        en: error.message,\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * الرد على تعليق\r\n   * POST /api/collaboration/comments/:commentId/replies\r\n   */\r\n  static async replyToComment(req, res) {\r\n    try {\r\n      const { commentId } = req.params;\r\n      const userId = req.user.id;\r\n      const { content } = req.body;\r\n\r\n      const reply = RealtimeCollaborationService.replyToComment(commentId, {\r\n        userId,\r\n        content,\r\n      });\r\n\r\n      res.status(201).json({\r\n        success: true,\r\n        message: 'تم إضافة الرد بنجاح',\r\n        en: 'Reply added successfully',\r\n        data: reply,\r\n      });\r\n    } catch (error) {\r\n      Logger.error(`Reply to comment error: ${error.message}`);\r\n      res.status(500).json({\r\n        success: false,\r\n        message: 'فشل إضافة الرد',\r\n        en: 'Failed to add reply',\r\n        error: error.message,\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * التراجع عن التغيير الأخير\r\n   * POST /api/collaboration/sessions/:sessionId/undo\r\n   */\r\n  static async undo(req, res) {\r\n    try {\r\n      const { sessionId } = req.params;\r\n      const userId = req.user.id;\r\n\r\n      const change = RealtimeCollaborationService.undo(sessionId, userId);\r\n\r\n      Logger.info(`Change undone by ${userId} in session ${sessionId}`);\r\n\r\n      res.json({\r\n        success: true,\r\n        message: 'تم التراجع عن التغيير',\r\n        en: 'Change undone',\r\n        data: change,\r\n      });\r\n    } catch (error) {\r\n      Logger.error(`Undo error: ${error.message}`);\r\n      res.status(400).json({\r\n        success: false,\r\n        message: error.message,\r\n        en: error.message,\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * إعادة التغيير المتراجع عنه\r\n   * POST /api/collaboration/sessions/:sessionId/redo\r\n   */\r\n  static async redo(req, res) {\r\n    try {\r\n      const { sessionId } = req.params;\r\n      const userId = req.user.id;\r\n\r\n      const change = RealtimeCollaborationService.redo(sessionId, userId);\r\n\r\n      Logger.info(`Change redone by ${userId} in session ${sessionId}`);\r\n\r\n      res.json({\r\n        success: true,\r\n        message: 'تم إعادة التغيير',\r\n        en: 'Change redone',\r\n        data: change,\r\n      });\r\n    } catch (error) {\r\n      Logger.error(`Redo error: ${error.message}`);\r\n      res.status(400).json({\r\n        success: false,\r\n        message: error.message,\r\n        en: error.message,\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * الحصول على نسخة المستند عند نقطة زمنية معينة\r\n   * GET /api/collaboration/sessions/:sessionId/snapshot\r\n   */\r\n  static async getDocumentSnapshot(req, res) {\r\n    try {\r\n      const { sessionId } = req.params;\r\n      const { timestamp } = req.query;\r\n\r\n      const snapshot = RealtimeCollaborationService.getDocumentSnapshot(\r\n        sessionId,\r\n        timestamp ? new Date(timestamp) : new Date()\r\n      );\r\n\r\n      res.json({\r\n        success: true,\r\n        message: 'تم جلب النسخة بنجاح',\r\n        en: 'Snapshot retrieved successfully',\r\n        data: {\r\n          sessionId,\r\n          changesCount: snapshot.length,\r\n          changes: snapshot,\r\n        },\r\n      });\r\n    } catch (error) {\r\n      Logger.error(`Get snapshot error: ${error.message}`);\r\n      res.status(500).json({\r\n        success: false,\r\n        message: 'فشل جلب النسخة',\r\n        en: 'Failed to get snapshot',\r\n        error: error.message,\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * الحصول على جميع المستخدمين النشطين\r\n   * GET /api/collaboration/sessions/:sessionId/users\r\n   */\r\n  static async getActiveUsers(req, res) {\r\n    try {\r\n      const { sessionId } = req.params;\r\n\r\n      const activeUsers = RealtimeCollaborationService.getActiveUsers(sessionId);\r\n\r\n      res.json({\r\n        success: true,\r\n        message: 'تم جلب المستخدمين',\r\n        en: 'Users retrieved',\r\n        data: {\r\n          sessionId,\r\n          count: activeUsers.length,\r\n          users: activeUsers,\r\n        },\r\n      });\r\n    } catch (error) {\r\n      Logger.error(`Get active users error: ${error.message}`);\r\n      res.status(500).json({\r\n        success: false,\r\n        message: 'فشل جلب المستخدمين',\r\n        en: 'Failed to get users',\r\n        error: error.message,\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * مغادرة الجلسة\r\n   * POST /api/collaboration/sessions/:sessionId/leave\r\n   */\r\n  static async leaveSession(req, res) {\r\n    try {\r\n      const { sessionId } = req.params;\r\n      const userId = req.user.id;\r\n\r\n      RealtimeCollaborationService.removeUserFromSession(sessionId, userId);\r\n\r\n      Logger.info(`User ${userId} left session ${sessionId}`);\r\n\r\n      res.json({\r\n        success: true,\r\n        message: 'تم مغادرة الجلسة بنجاح',\r\n        en: 'Successfully left session',\r\n      });\r\n    } catch (error) {\r\n      Logger.error(`Leave session error: ${error.message}`);\r\n      res.status(500).json({\r\n        success: false,\r\n        message: 'فشل مغادرة الجلسة',\r\n        en: 'Failed to leave session',\r\n        error: error.message,\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * الحصول على إحصائيات الجلسة\r\n   * GET /api/collaboration/sessions/:sessionId/stats\r\n   */\r\n  static async getSessionStats(req, res) {\r\n    try {\r\n      const { sessionId } = req.params;\r\n\r\n      const stats = RealtimeCollaborationService.getSessionStats(sessionId);\r\n\r\n      if (!stats) {\r\n        return res.status(404).json({\r\n          success: false,\r\n          message: 'الجلسة غير موجودة',\r\n          en: 'Session not found',\r\n        });\r\n      }\r\n\r\n      res.json({\r\n        success: true,\r\n        message: 'تم جلب الإحصائيات',\r\n        en: 'Statistics retrieved',\r\n        data: stats,\r\n      });\r\n    } catch (error) {\r\n      Logger.error(`Get stats error: ${error.message}`);\r\n      res.status(500).json({\r\n        success: false,\r\n        message: 'فشل جلب الإحصائيات',\r\n        en: 'Failed to get statistics',\r\n        error: error.message,\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * تصدير سجل التغييرات\r\n   * GET /api/collaboration/sessions/:sessionId/export\r\n   */\r\n  static async exportChangeHistory(req, res) {\r\n    try {\r\n      const { sessionId } = req.params;\r\n      const { userId } = req.query;\r\n\r\n      const history = RealtimeCollaborationService.exportChangeHistory(\r\n        sessionId,\r\n        { userId }\r\n      );\r\n\r\n      if (!history) {\r\n        return res.status(404).json({\r\n          success: false,\r\n          message: 'الجلسة غير موجودة',\r\n          en: 'Session not found',\r\n        });\r\n      }\r\n\r\n      res.json({\r\n        success: true,\r\n        message: 'تم تصدير السجل بنجاح',\r\n        en: 'History exported successfully',\r\n        data: history,\r\n      });\r\n    } catch (error) {\r\n      Logger.error(`Export history error: ${error.message}`);\r\n      res.status(500).json({\r\n        success: false,\r\n        message: 'فشل تصدير السجل',\r\n        en: 'Failed to export history',\r\n        error: error.message,\r\n      });\r\n    }\r\n  }\r\n}\r\n\r\nmodule.exports = RealtimeCollaborationController;\r\n"],"mappings":"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","ignoreList":[]}