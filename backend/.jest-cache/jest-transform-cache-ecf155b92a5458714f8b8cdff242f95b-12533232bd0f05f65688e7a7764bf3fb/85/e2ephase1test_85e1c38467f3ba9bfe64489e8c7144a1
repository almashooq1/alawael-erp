92d6aa527e79a586eeadcb161b933e9b
/**
 * Task #8 E2E Test Suite - Phase 1: Integration Testing
 * Tests all Supply Chain API endpoints with real-like scenarios
 */

const http = require('http');
const assert = require('assert');
const BASE_URL = 'http://localhost:3009';
let testsPassed = 0;
let testsFailed = 0;
let testResults = [];

// HTTP Helper
function httpRequest(method, path, body = null) {
  return new Promise((resolve, reject) => {
    const url = new URL(path, BASE_URL);
    const options = {
      hostname: url.hostname,
      port: url.port,
      path: url.pathname + url.search,
      method,
      headers: {
        'Content-Type': 'application/json'
      },
      timeout: 5000
    };
    const req = http.request(options, res => {
      let data = '';
      res.on('data', chunk => data += chunk);
      res.on('end', () => {
        try {
          const json = data ? JSON.parse(data) : {};
          resolve({
            status: res.statusCode,
            data: json
          });
        } catch (e) {
          resolve({
            status: res.statusCode,
            data
          });
        }
      });
    });
    req.on('error', reject);
    req.on('timeout', () => {
      req.destroy();
      reject(new Error('Request timeout'));
    });
    if (body) req.write(JSON.stringify(body));
    req.end();
  });
}

// Test wrapper
async function test(name, fn) {
  try {
    await fn();
    testsPassed++;
    testResults.push({
      name,
      status: '‚úÖ PASS'
    });
    console.log(`  ‚úÖ ${name}`);
  } catch (error) {
    testsFailed++;
    testResults.push({
      name,
      status: `‚ùå FAIL: ${error.message}`
    });
    console.log(`  ‚ùå ${name}`);
    console.log(`     Error: ${error.message}`);
  }
}

// Phase 1: Integration Tests
async function runPhase1() {
  console.log('\n‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó');
  console.log('‚ïë PHASE 1: INTEGRATION TESTING                 ‚ïë');
  console.log('‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù\n');

  // 1. System Status
  console.log('üìä System Status Checks:');
  await test('GET /api/supply-chain/status returns 200', async () => {
    const res = await httpRequest('GET', '/api/supply-chain/status');
    assert.strictEqual(res.status, 200, `Expected 200 but got ${res.status}`);
    assert.ok(res.data.success, 'Response should have success=true');
  });

  // 2. Suppliers CRUD
  console.log('\nüë• Supplier Endpoints:');
  let supplierId;
  await test('GET /api/supply-chain/suppliers returns list', async () => {
    const res = await httpRequest('GET', '/api/supply-chain/suppliers');
    assert.strictEqual(res.status, 200);
    // Handle both array and object with .suppliers property
    const suppliers = Array.isArray(res.data.data) ? res.data.data : res.data.data?.suppliers;
    assert.ok(suppliers || Array.isArray(res.data.data), 'Should return suppliers data');
  });
  await test('POST /api/supply-chain/suppliers creates supplier', async () => {
    const res = await httpRequest('POST', '/api/supply-chain/suppliers', {
      name: 'Test Supplier',
      email: 'test@supplier.com',
      phone: '+966501234567',
      address: 'Riyadh, Saudi Arabia',
      category: 'Equipment',
      rating: 4.5,
      status: 'active'
    });
    // In mock mode, this will return mock data
    if (res.status === 201 || res.status === 200) {
      supplierId = res.data.data?._id || '1';
    }
  });
  if (supplierId) {
    await test('GET /api/supply-chain/suppliers/:id returns supplier', async () => {
      const res = await httpRequest('GET', `/api/supply-chain/suppliers/${supplierId}`);
      assert.strictEqual(res.status, 200);
      assert.strictEqual(res.data.data.name, 'Test Supplier');
    });
    await test('PUT /api/supply-chain/suppliers/:id updates supplier', async () => {
      const res = await httpRequest('PUT', `/api/supply-chain/suppliers/${supplierId}`, {
        name: 'Updated Supplier'
      });
      assert.strictEqual(res.status, 200);
    });
  }

  // 3. Inventory
  console.log('\nüì¶ Inventory Endpoints:');
  let inventoryId;
  await test('GET /api/supply-chain/inventory returns items', async () => {
    const res = await httpRequest('GET', '/api/supply-chain/inventory');
    assert.strictEqual(res.status, 200);
  });
  await test('POST /api/supply-chain/inventory creates item', async () => {
    const res = await httpRequest('POST', '/api/supply-chain/inventory', {
      sku: `SKU-${Date.now()}`,
      name: 'Test Item',
      category: 'Electronics',
      price: 100,
      quantity: 100,
      supplierId: '1',
      warehouseLocation: 'A-01'
    });
    // Accept both 200 and 201 for mock mode
    if ([200, 201].includes(res.status)) {
      inventoryId = res.data.data?._id || 'test-item';
    }
  });

  // 4. Purchase Orders
  console.log('\nüìã Purchase Order Endpoints:');
  let orderId;
  await test('GET /api/supply-chain/orders returns orders', async () => {
    const res = await httpRequest('GET', '/api/supply-chain/orders');
    assert.strictEqual(res.status, 200);
  });
  await test('POST /api/supply-chain/orders creates order', async () => {
    const res = await httpRequest('POST', '/api/supply-chain/orders', {
      supplierId: '1',
      items: [{
        itemId: 'test-item',
        quantity: 50
      }],
      totalAmount: 5000
    });
    // 201 for created or 200 for success
    assert.ok([200, 201].includes(res.status), `Expected 200 or 201 but got ${res.status}`);
    orderId = res.data.data?._id;
  });

  // 5. Shipments
  console.log('\nüöö Shipment Endpoints:');
  await test('GET /api/supply-chain/shipments returns shipments', async () => {
    const res = await httpRequest('GET', '/api/supply-chain/shipments');
    assert.strictEqual(res.status, 200);
  });

  // 6. Analytics
  console.log('\nüìà Analytics Endpoints:');
  await test('GET /api/supply-chain/analytics returns stats', async () => {
    const res = await httpRequest('GET', '/api/supply-chain/analytics');
    assert.strictEqual(res.status, 200);
    // Analytics data structure check - either direct properties or nested in data.data
    const analyticsData = res.data.data || res.data;
    assert.ok(analyticsData.totalOrders !== undefined || analyticsData.supplierCount !== undefined, 'Should contain analytics data');
  });
  console.log('\n' + '‚ïê'.repeat(50));
}

// Summary Report
function printSummary() {
  console.log('\n‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó');
  console.log('‚ïë              TEST SUMMARY REPORT               ‚ïë');
  console.log('‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù\n');
  const total = testsPassed + testsFailed;
  const percentage = total > 0 ? Math.round(testsPassed / total * 100) : 0;
  console.log(`Total Tests: ${total}`);
  console.log(`‚úÖ Passed: ${testsPassed}`);
  console.log(`‚ùå Failed: ${testsFailed}`);
  console.log(`Score: ${percentage}%\n`);
  if (testsFailed === 0) {
    console.log('üéâ ALL TESTS PASSED! Ready for production\n');
  } else {
    console.log('‚ö†Ô∏è  Some tests failed. Review output above.\n');
  }
}

// Main
async function main() {
  console.log('üöÄ Starting E2E Test Suite...\n');
  console.log('‚è≥ Waiting for server on port 3009...');

  // Wait for server
  let ready = false;
  for (let i = 0; i < 10; i++) {
    try {
      await httpRequest('GET', '/api/supply-chain/status');
      ready = true;
      console.log('‚úÖ Server ready\n');
      break;
    } catch (e) {
      if (i < 9) {
        await new Promise(resolve => setTimeout(resolve, 500));
      }
    }
  }
  if (!ready) {
    console.error('‚ùå Server not responding. Start server first: node test-minimal-server.js');
    process.exit(1);
  }

  // Run tests
  await runPhase1();
  printSummary();
  process.exit(testsFailed > 0 ? 1 : 0);
}
main().catch(e => {
  console.error('Fatal error:', e);
  process.exit(1);
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJodHRwIiwicmVxdWlyZSIsImFzc2VydCIsIkJBU0VfVVJMIiwidGVzdHNQYXNzZWQiLCJ0ZXN0c0ZhaWxlZCIsInRlc3RSZXN1bHRzIiwiaHR0cFJlcXVlc3QiLCJtZXRob2QiLCJwYXRoIiwiYm9keSIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwidXJsIiwiVVJMIiwib3B0aW9ucyIsImhvc3RuYW1lIiwicG9ydCIsInBhdGhuYW1lIiwic2VhcmNoIiwiaGVhZGVycyIsInRpbWVvdXQiLCJyZXEiLCJyZXF1ZXN0IiwicmVzIiwiZGF0YSIsIm9uIiwiY2h1bmsiLCJqc29uIiwiSlNPTiIsInBhcnNlIiwic3RhdHVzIiwic3RhdHVzQ29kZSIsImUiLCJkZXN0cm95IiwiRXJyb3IiLCJ3cml0ZSIsInN0cmluZ2lmeSIsImVuZCIsInRlc3QiLCJuYW1lIiwiZm4iLCJwdXNoIiwiY29uc29sZSIsImxvZyIsImVycm9yIiwibWVzc2FnZSIsInJ1blBoYXNlMSIsInN0cmljdEVxdWFsIiwib2siLCJzdWNjZXNzIiwic3VwcGxpZXJJZCIsInN1cHBsaWVycyIsIkFycmF5IiwiaXNBcnJheSIsImVtYWlsIiwicGhvbmUiLCJhZGRyZXNzIiwiY2F0ZWdvcnkiLCJyYXRpbmciLCJfaWQiLCJpbnZlbnRvcnlJZCIsInNrdSIsIkRhdGUiLCJub3ciLCJwcmljZSIsInF1YW50aXR5Iiwid2FyZWhvdXNlTG9jYXRpb24iLCJpbmNsdWRlcyIsIm9yZGVySWQiLCJpdGVtcyIsIml0ZW1JZCIsInRvdGFsQW1vdW50IiwiYW5hbHl0aWNzRGF0YSIsInRvdGFsT3JkZXJzIiwidW5kZWZpbmVkIiwic3VwcGxpZXJDb3VudCIsInJlcGVhdCIsInByaW50U3VtbWFyeSIsInRvdGFsIiwicGVyY2VudGFnZSIsIk1hdGgiLCJyb3VuZCIsIm1haW4iLCJyZWFkeSIsImkiLCJzZXRUaW1lb3V0IiwicHJvY2VzcyIsImV4aXQiLCJjYXRjaCJdLCJzb3VyY2VzIjpbImUyZS1waGFzZTEudGVzdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcclxuLyoqXHJcbiAqIFRhc2sgIzggRTJFIFRlc3QgU3VpdGUgLSBQaGFzZSAxOiBJbnRlZ3JhdGlvbiBUZXN0aW5nXHJcbiAqIFRlc3RzIGFsbCBTdXBwbHkgQ2hhaW4gQVBJIGVuZHBvaW50cyB3aXRoIHJlYWwtbGlrZSBzY2VuYXJpb3NcclxuICovXHJcblxyXG5jb25zdCBodHRwID0gcmVxdWlyZSgnaHR0cCcpO1xyXG5jb25zdCBhc3NlcnQgPSByZXF1aXJlKCdhc3NlcnQnKTtcclxuXHJcbmNvbnN0IEJBU0VfVVJMID0gJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwOSc7XHJcbmxldCB0ZXN0c1Bhc3NlZCA9IDA7XHJcbmxldCB0ZXN0c0ZhaWxlZCA9IDA7XHJcbmxldCB0ZXN0UmVzdWx0cyA9IFtdO1xyXG5cclxuLy8gSFRUUCBIZWxwZXJcclxuZnVuY3Rpb24gaHR0cFJlcXVlc3QobWV0aG9kLCBwYXRoLCBib2R5ID0gbnVsbCkge1xyXG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICBjb25zdCB1cmwgPSBuZXcgVVJMKHBhdGgsIEJBU0VfVVJMKTtcclxuICAgIGNvbnN0IG9wdGlvbnMgPSB7XHJcbiAgICAgIGhvc3RuYW1lOiB1cmwuaG9zdG5hbWUsXHJcbiAgICAgIHBvcnQ6IHVybC5wb3J0LFxyXG4gICAgICBwYXRoOiB1cmwucGF0aG5hbWUgKyB1cmwuc2VhcmNoLFxyXG4gICAgICBtZXRob2QsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICB9LFxyXG4gICAgICB0aW1lb3V0OiA1MDAwLFxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCByZXEgPSBodHRwLnJlcXVlc3Qob3B0aW9ucywgKHJlcykgPT4ge1xyXG4gICAgICBsZXQgZGF0YSA9ICcnO1xyXG4gICAgICByZXMub24oJ2RhdGEnLCBjaHVuayA9PiBkYXRhICs9IGNodW5rKTtcclxuICAgICAgcmVzLm9uKCdlbmQnLCAoKSA9PiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIGNvbnN0IGpzb24gPSBkYXRhID8gSlNPTi5wYXJzZShkYXRhKSA6IHt9O1xyXG4gICAgICAgICAgcmVzb2x2ZSh7IHN0YXR1czogcmVzLnN0YXR1c0NvZGUsIGRhdGE6IGpzb24gfSk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgcmVzb2x2ZSh7IHN0YXR1czogcmVzLnN0YXR1c0NvZGUsIGRhdGEgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIHJlcS5vbignZXJyb3InLCByZWplY3QpO1xyXG4gICAgcmVxLm9uKCd0aW1lb3V0JywgKCkgPT4ge1xyXG4gICAgICByZXEuZGVzdHJveSgpO1xyXG4gICAgICByZWplY3QobmV3IEVycm9yKCdSZXF1ZXN0IHRpbWVvdXQnKSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAoYm9keSkgcmVxLndyaXRlKEpTT04uc3RyaW5naWZ5KGJvZHkpKTtcclxuICAgIHJlcS5lbmQoKTtcclxuICB9KTtcclxufVxyXG5cclxuLy8gVGVzdCB3cmFwcGVyXHJcbmFzeW5jIGZ1bmN0aW9uIHRlc3QobmFtZSwgZm4pIHtcclxuICB0cnkge1xyXG4gICAgYXdhaXQgZm4oKTtcclxuICAgIHRlc3RzUGFzc2VkKys7XHJcbiAgICB0ZXN0UmVzdWx0cy5wdXNoKHsgbmFtZSwgc3RhdHVzOiAn4pyFIFBBU1MnIH0pO1xyXG4gICAgY29uc29sZS5sb2coYCAg4pyFICR7bmFtZX1gKTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgdGVzdHNGYWlsZWQrKztcclxuICAgIHRlc3RSZXN1bHRzLnB1c2goeyBuYW1lLCBzdGF0dXM6IGDinYwgRkFJTDogJHtlcnJvci5tZXNzYWdlfWAgfSk7XHJcbiAgICBjb25zb2xlLmxvZyhgICDinYwgJHtuYW1lfWApO1xyXG4gICAgY29uc29sZS5sb2coYCAgICAgRXJyb3I6ICR7ZXJyb3IubWVzc2FnZX1gKTtcclxuICB9XHJcbn1cclxuXHJcbi8vIFBoYXNlIDE6IEludGVncmF0aW9uIFRlc3RzXHJcbmFzeW5jIGZ1bmN0aW9uIHJ1blBoYXNlMSgpIHtcclxuICBjb25zb2xlLmxvZygnXFxu4pWU4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWXJyk7XHJcbiAgY29uc29sZS5sb2coJ+KVkSBQSEFTRSAxOiBJTlRFR1JBVElPTiBURVNUSU5HICAgICAgICAgICAgICAgICDilZEnKTtcclxuICBjb25zb2xlLmxvZygn4pWa4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWdXFxuJyk7XHJcblxyXG4gIC8vIDEuIFN5c3RlbSBTdGF0dXNcclxuICBjb25zb2xlLmxvZygn8J+TiiBTeXN0ZW0gU3RhdHVzIENoZWNrczonKTtcclxuICBhd2FpdCB0ZXN0KCdHRVQgL2FwaS9zdXBwbHktY2hhaW4vc3RhdHVzIHJldHVybnMgMjAwJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgY29uc3QgcmVzID0gYXdhaXQgaHR0cFJlcXVlc3QoJ0dFVCcsICcvYXBpL3N1cHBseS1jaGFpbi9zdGF0dXMnKTtcclxuICAgIGFzc2VydC5zdHJpY3RFcXVhbChyZXMuc3RhdHVzLCAyMDAsIGBFeHBlY3RlZCAyMDAgYnV0IGdvdCAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgICBhc3NlcnQub2socmVzLmRhdGEuc3VjY2VzcywgJ1Jlc3BvbnNlIHNob3VsZCBoYXZlIHN1Y2Nlc3M9dHJ1ZScpO1xyXG4gIH0pO1xyXG5cclxuICAvLyAyLiBTdXBwbGllcnMgQ1JVRFxyXG4gIGNvbnNvbGUubG9nKCdcXG7wn5GlIFN1cHBsaWVyIEVuZHBvaW50czonKTtcclxuICBsZXQgc3VwcGxpZXJJZDtcclxuXHJcbiAgYXdhaXQgdGVzdCgnR0VUIC9hcGkvc3VwcGx5LWNoYWluL3N1cHBsaWVycyByZXR1cm5zIGxpc3QnLCBhc3luYyAoKSA9PiB7XHJcbiAgICBjb25zdCByZXMgPSBhd2FpdCBodHRwUmVxdWVzdCgnR0VUJywgJy9hcGkvc3VwcGx5LWNoYWluL3N1cHBsaWVycycpO1xyXG4gICAgYXNzZXJ0LnN0cmljdEVxdWFsKHJlcy5zdGF0dXMsIDIwMCk7XHJcbiAgICAvLyBIYW5kbGUgYm90aCBhcnJheSBhbmQgb2JqZWN0IHdpdGggLnN1cHBsaWVycyBwcm9wZXJ0eVxyXG4gICAgY29uc3Qgc3VwcGxpZXJzID0gQXJyYXkuaXNBcnJheShyZXMuZGF0YS5kYXRhKSA/IHJlcy5kYXRhLmRhdGEgOiByZXMuZGF0YS5kYXRhPy5zdXBwbGllcnM7XHJcbiAgICBhc3NlcnQub2soc3VwcGxpZXJzIHx8IEFycmF5LmlzQXJyYXkocmVzLmRhdGEuZGF0YSksICdTaG91bGQgcmV0dXJuIHN1cHBsaWVycyBkYXRhJyk7XHJcbiAgfSk7XHJcblxyXG4gIGF3YWl0IHRlc3QoJ1BPU1QgL2FwaS9zdXBwbHktY2hhaW4vc3VwcGxpZXJzIGNyZWF0ZXMgc3VwcGxpZXInLCBhc3luYyAoKSA9PiB7XHJcbiAgICBjb25zdCByZXMgPSBhd2FpdCBodHRwUmVxdWVzdCgnUE9TVCcsICcvYXBpL3N1cHBseS1jaGFpbi9zdXBwbGllcnMnLCB7XHJcbiAgICAgIG5hbWU6ICdUZXN0IFN1cHBsaWVyJyxcclxuICAgICAgZW1haWw6ICd0ZXN0QHN1cHBsaWVyLmNvbScsXHJcbiAgICAgIHBob25lOiAnKzk2NjUwMTIzNDU2NycsXHJcbiAgICAgIGFkZHJlc3M6ICdSaXlhZGgsIFNhdWRpIEFyYWJpYScsXHJcbiAgICAgIGNhdGVnb3J5OiAnRXF1aXBtZW50JyxcclxuICAgICAgcmF0aW5nOiA0LjUsXHJcbiAgICAgIHN0YXR1czogJ2FjdGl2ZScsXHJcbiAgICB9KTtcclxuICAgIC8vIEluIG1vY2sgbW9kZSwgdGhpcyB3aWxsIHJldHVybiBtb2NrIGRhdGFcclxuICAgIGlmIChyZXMuc3RhdHVzID09PSAyMDEgfHwgcmVzLnN0YXR1cyA9PT0gMjAwKSB7XHJcbiAgICAgIHN1cHBsaWVySWQgPSByZXMuZGF0YS5kYXRhPy5faWQgfHwgJzEnO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICBpZiAoc3VwcGxpZXJJZCkge1xyXG4gICAgYXdhaXQgdGVzdCgnR0VUIC9hcGkvc3VwcGx5LWNoYWluL3N1cHBsaWVycy86aWQgcmV0dXJucyBzdXBwbGllcicsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgcmVzID0gYXdhaXQgaHR0cFJlcXVlc3QoJ0dFVCcsIGAvYXBpL3N1cHBseS1jaGFpbi9zdXBwbGllcnMvJHtzdXBwbGllcklkfWApO1xyXG4gICAgICBhc3NlcnQuc3RyaWN0RXF1YWwocmVzLnN0YXR1cywgMjAwKTtcclxuICAgICAgYXNzZXJ0LnN0cmljdEVxdWFsKHJlcy5kYXRhLmRhdGEubmFtZSwgJ1Rlc3QgU3VwcGxpZXInKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGF3YWl0IHRlc3QoJ1BVVCAvYXBpL3N1cHBseS1jaGFpbi9zdXBwbGllcnMvOmlkIHVwZGF0ZXMgc3VwcGxpZXInLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGh0dHBSZXF1ZXN0KCdQVVQnLCBgL2FwaS9zdXBwbHktY2hhaW4vc3VwcGxpZXJzLyR7c3VwcGxpZXJJZH1gLCB7XHJcbiAgICAgICAgbmFtZTogJ1VwZGF0ZWQgU3VwcGxpZXInLFxyXG4gICAgICB9KTtcclxuICAgICAgYXNzZXJ0LnN0cmljdEVxdWFsKHJlcy5zdGF0dXMsIDIwMCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8vIDMuIEludmVudG9yeVxyXG4gIGNvbnNvbGUubG9nKCdcXG7wn5OmIEludmVudG9yeSBFbmRwb2ludHM6Jyk7XHJcbiAgbGV0IGludmVudG9yeUlkO1xyXG5cclxuICBhd2FpdCB0ZXN0KCdHRVQgL2FwaS9zdXBwbHktY2hhaW4vaW52ZW50b3J5IHJldHVybnMgaXRlbXMnLCBhc3luYyAoKSA9PiB7XHJcbiAgICBjb25zdCByZXMgPSBhd2FpdCBodHRwUmVxdWVzdCgnR0VUJywgJy9hcGkvc3VwcGx5LWNoYWluL2ludmVudG9yeScpO1xyXG4gICAgYXNzZXJ0LnN0cmljdEVxdWFsKHJlcy5zdGF0dXMsIDIwMCk7XHJcbiAgfSk7XHJcblxyXG4gIGF3YWl0IHRlc3QoJ1BPU1QgL2FwaS9zdXBwbHktY2hhaW4vaW52ZW50b3J5IGNyZWF0ZXMgaXRlbScsIGFzeW5jICgpID0+IHtcclxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGh0dHBSZXF1ZXN0KCdQT1NUJywgJy9hcGkvc3VwcGx5LWNoYWluL2ludmVudG9yeScsIHtcclxuICAgICAgc2t1OiBgU0tVLSR7RGF0ZS5ub3coKX1gLFxyXG4gICAgICBuYW1lOiAnVGVzdCBJdGVtJyxcclxuICAgICAgY2F0ZWdvcnk6ICdFbGVjdHJvbmljcycsXHJcbiAgICAgIHByaWNlOiAxMDAsXHJcbiAgICAgIHF1YW50aXR5OiAxMDAsXHJcbiAgICAgIHN1cHBsaWVySWQ6ICcxJyxcclxuICAgICAgd2FyZWhvdXNlTG9jYXRpb246ICdBLTAxJyxcclxuICAgIH0pO1xyXG4gICAgLy8gQWNjZXB0IGJvdGggMjAwIGFuZCAyMDEgZm9yIG1vY2sgbW9kZVxyXG4gICAgaWYgKFsyMDAsIDIwMV0uaW5jbHVkZXMocmVzLnN0YXR1cykpIHtcclxuICAgICAgaW52ZW50b3J5SWQgPSByZXMuZGF0YS5kYXRhPy5faWQgfHwgJ3Rlc3QtaXRlbSc7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIC8vIDQuIFB1cmNoYXNlIE9yZGVyc1xyXG4gIGNvbnNvbGUubG9nKCdcXG7wn5OLIFB1cmNoYXNlIE9yZGVyIEVuZHBvaW50czonKTtcclxuICBsZXQgb3JkZXJJZDtcclxuXHJcbiAgYXdhaXQgdGVzdCgnR0VUIC9hcGkvc3VwcGx5LWNoYWluL29yZGVycyByZXR1cm5zIG9yZGVycycsIGFzeW5jICgpID0+IHtcclxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGh0dHBSZXF1ZXN0KCdHRVQnLCAnL2FwaS9zdXBwbHktY2hhaW4vb3JkZXJzJyk7XHJcbiAgICBhc3NlcnQuc3RyaWN0RXF1YWwocmVzLnN0YXR1cywgMjAwKTtcclxuICB9KTtcclxuXHJcbiAgYXdhaXQgdGVzdCgnUE9TVCAvYXBpL3N1cHBseS1jaGFpbi9vcmRlcnMgY3JlYXRlcyBvcmRlcicsIGFzeW5jICgpID0+IHtcclxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGh0dHBSZXF1ZXN0KCdQT1NUJywgJy9hcGkvc3VwcGx5LWNoYWluL29yZGVycycsIHtcclxuICAgICAgc3VwcGxpZXJJZDogJzEnLFxyXG4gICAgICBpdGVtczogW3sgaXRlbUlkOiAndGVzdC1pdGVtJywgcXVhbnRpdHk6IDUwIH1dLFxyXG4gICAgICB0b3RhbEFtb3VudDogNTAwMCxcclxuICAgIH0pO1xyXG4gICAgLy8gMjAxIGZvciBjcmVhdGVkIG9yIDIwMCBmb3Igc3VjY2Vzc1xyXG4gICAgYXNzZXJ0Lm9rKFsyMDAsIDIwMV0uaW5jbHVkZXMocmVzLnN0YXR1cyksIGBFeHBlY3RlZCAyMDAgb3IgMjAxIGJ1dCBnb3QgJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgb3JkZXJJZCA9IHJlcy5kYXRhLmRhdGE/Ll9pZDtcclxuICB9KTtcclxuXHJcbiAgLy8gNS4gU2hpcG1lbnRzXHJcbiAgY29uc29sZS5sb2coJ1xcbvCfmpogU2hpcG1lbnQgRW5kcG9pbnRzOicpO1xyXG5cclxuICBhd2FpdCB0ZXN0KCdHRVQgL2FwaS9zdXBwbHktY2hhaW4vc2hpcG1lbnRzIHJldHVybnMgc2hpcG1lbnRzJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgY29uc3QgcmVzID0gYXdhaXQgaHR0cFJlcXVlc3QoJ0dFVCcsICcvYXBpL3N1cHBseS1jaGFpbi9zaGlwbWVudHMnKTtcclxuICAgIGFzc2VydC5zdHJpY3RFcXVhbChyZXMuc3RhdHVzLCAyMDApO1xyXG4gIH0pO1xyXG5cclxuICAvLyA2LiBBbmFseXRpY3NcclxuICBjb25zb2xlLmxvZygnXFxu8J+TiCBBbmFseXRpY3MgRW5kcG9pbnRzOicpO1xyXG5cclxuICBhd2FpdCB0ZXN0KCdHRVQgL2FwaS9zdXBwbHktY2hhaW4vYW5hbHl0aWNzIHJldHVybnMgc3RhdHMnLCBhc3luYyAoKSA9PiB7XHJcbiAgICBjb25zdCByZXMgPSBhd2FpdCBodHRwUmVxdWVzdCgnR0VUJywgJy9hcGkvc3VwcGx5LWNoYWluL2FuYWx5dGljcycpO1xyXG4gICAgYXNzZXJ0LnN0cmljdEVxdWFsKHJlcy5zdGF0dXMsIDIwMCk7XHJcbiAgICAvLyBBbmFseXRpY3MgZGF0YSBzdHJ1Y3R1cmUgY2hlY2sgLSBlaXRoZXIgZGlyZWN0IHByb3BlcnRpZXMgb3IgbmVzdGVkIGluIGRhdGEuZGF0YVxyXG4gICAgY29uc3QgYW5hbHl0aWNzRGF0YSA9IHJlcy5kYXRhLmRhdGEgfHwgcmVzLmRhdGE7XHJcbiAgICBhc3NlcnQub2soYW5hbHl0aWNzRGF0YS50b3RhbE9yZGVycyAhPT0gdW5kZWZpbmVkIHx8IGFuYWx5dGljc0RhdGEuc3VwcGxpZXJDb3VudCAhPT0gdW5kZWZpbmVkLCAnU2hvdWxkIGNvbnRhaW4gYW5hbHl0aWNzIGRhdGEnKTtcclxuICB9KTtcclxuXHJcbiAgY29uc29sZS5sb2coJ1xcbicgKyAn4pWQJy5yZXBlYXQoNTApKTtcclxufVxyXG5cclxuLy8gU3VtbWFyeSBSZXBvcnRcclxuZnVuY3Rpb24gcHJpbnRTdW1tYXJ5KCkge1xyXG4gIGNvbnNvbGUubG9nKCdcXG7ilZTilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZcnKTtcclxuICBjb25zb2xlLmxvZygn4pWRICAgICAgICAgICAgICBURVNUIFNVTU1BUlkgUkVQT1JUICAgICAgICAgICAgICAg4pWRJyk7XHJcbiAgY29uc29sZS5sb2coJ+KVmuKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVnVxcbicpO1xyXG5cclxuICBjb25zdCB0b3RhbCA9IHRlc3RzUGFzc2VkICsgdGVzdHNGYWlsZWQ7XHJcbiAgY29uc3QgcGVyY2VudGFnZSA9IHRvdGFsID4gMCA/IE1hdGgucm91bmQoKHRlc3RzUGFzc2VkIC8gdG90YWwpICogMTAwKSA6IDA7XHJcblxyXG4gIGNvbnNvbGUubG9nKGBUb3RhbCBUZXN0czogJHt0b3RhbH1gKTtcclxuICBjb25zb2xlLmxvZyhg4pyFIFBhc3NlZDogJHt0ZXN0c1Bhc3NlZH1gKTtcclxuICBjb25zb2xlLmxvZyhg4p2MIEZhaWxlZDogJHt0ZXN0c0ZhaWxlZH1gKTtcclxuICBjb25zb2xlLmxvZyhgU2NvcmU6ICR7cGVyY2VudGFnZX0lXFxuYCk7XHJcblxyXG4gIGlmICh0ZXN0c0ZhaWxlZCA9PT0gMCkge1xyXG4gICAgY29uc29sZS5sb2coJ/CfjokgQUxMIFRFU1RTIFBBU1NFRCEgUmVhZHkgZm9yIHByb2R1Y3Rpb25cXG4nKTtcclxuICB9IGVsc2Uge1xyXG4gICAgY29uc29sZS5sb2coJ+KaoO+4jyAgU29tZSB0ZXN0cyBmYWlsZWQuIFJldmlldyBvdXRwdXQgYWJvdmUuXFxuJyk7XHJcbiAgfVxyXG59XHJcblxyXG4vLyBNYWluXHJcbmFzeW5jIGZ1bmN0aW9uIG1haW4oKSB7XHJcbiAgY29uc29sZS5sb2coJ/CfmoAgU3RhcnRpbmcgRTJFIFRlc3QgU3VpdGUuLi5cXG4nKTtcclxuICBjb25zb2xlLmxvZygn4o+zIFdhaXRpbmcgZm9yIHNlcnZlciBvbiBwb3J0IDMwMDkuLi4nKTtcclxuXHJcbiAgLy8gV2FpdCBmb3Igc2VydmVyXHJcbiAgbGV0IHJlYWR5ID0gZmFsc2U7XHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMDsgaSsrKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBhd2FpdCBodHRwUmVxdWVzdCgnR0VUJywgJy9hcGkvc3VwcGx5LWNoYWluL3N0YXR1cycpO1xyXG4gICAgICByZWFkeSA9IHRydWU7XHJcbiAgICAgIGNvbnNvbGUubG9nKCfinIUgU2VydmVyIHJlYWR5XFxuJyk7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICBpZiAoaSA8IDkpIHtcclxuICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgNTAwKSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIGlmICghcmVhZHkpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBTZXJ2ZXIgbm90IHJlc3BvbmRpbmcuIFN0YXJ0IHNlcnZlciBmaXJzdDogbm9kZSB0ZXN0LW1pbmltYWwtc2VydmVyLmpzJyk7XHJcbiAgICBwcm9jZXNzLmV4aXQoMSk7XHJcbiAgfVxyXG5cclxuICAvLyBSdW4gdGVzdHNcclxuICBhd2FpdCBydW5QaGFzZTEoKTtcclxuICBwcmludFN1bW1hcnkoKTtcclxuICBcclxuICBwcm9jZXNzLmV4aXQodGVzdHNGYWlsZWQgPiAwID8gMSA6IDApO1xyXG59XHJcblxyXG5tYWluKCkuY2F0Y2goZSA9PiB7XHJcbiAgY29uc29sZS5lcnJvcignRmF0YWwgZXJyb3I6JywgZSk7XHJcbiAgcHJvY2Vzcy5leGl0KDEpO1xyXG59KTtcclxuIl0sIm1hcHBpbmdzIjoiQUFDQTtBQUNB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