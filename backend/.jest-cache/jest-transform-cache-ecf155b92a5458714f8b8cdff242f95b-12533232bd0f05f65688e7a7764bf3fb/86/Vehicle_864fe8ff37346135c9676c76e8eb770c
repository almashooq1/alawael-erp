01ac5c3dce7050941b519c290de56928
const mongoose = require('mongoose');
const vehicleSchema = new mongoose.Schema({
  // معلومات أساسية
  vehicleNumber: {
    type: String,
    required: true,
    unique: true
  },
  plateNumber: {
    type: String,
    required: true,
    unique: true
  },
  type: {
    type: String,
    enum: ['bus', 'van', 'car', 'truck'],
    required: true
  },
  brand: String,
  model: String,
  year: Number,
  color: String,
  capacity: {
    type: Number,
    required: true,
    min: 1
  },
  // مستوى الوقود (للتوافق مع الاختبارات)
  fuelLevel: {
    type: Number,
    default: 100
  },
  // حالة المركبة
  status: {
    type: String,
    enum: ['active', 'maintenance', 'inactive', 'emergency'],
    default: 'active'
  },
  // معلومات GPS والموقع
  gpsDevice: {
    deviceId: String,
    lastUpdate: Date,
    currentLocation: {
      type: {
        type: String,
        enum: ['Point'],
        default: 'Point'
      },
      coordinates: {
        type: [Number] // [longitude, latitude]
      },
      address: String,
      speed: Number,
      // km/h
      heading: Number // اتجاه الحركة (0-360)
    }
  },
  // السائق الحالي
  currentDriver: {
    type: mongoose.Schema.Types.ObjectId,
    ref: 'User'
  },
  // حقل مستعار للسائق (للتوافق مع الاختبارات)
  driver: {
    type: mongoose.Schema.Types.ObjectId,
    ref: 'User'
  },
  // المسار الحالي
  currentRoute: {
    type: mongoose.Schema.Types.ObjectId,
    ref: 'TransportRoute'
  },
  // مسافة المركبة
  mileage: {
    type: Number,
    default: 0
  },
  // استهلاك الوقود
  fuelConsumption: {
    fuelType: {
      type: String,
      enum: ['petrol', 'diesel', 'electric', 'hybrid']
    },
    tankCapacity: Number,
    // لتر
    currentFuelLevel: Number,
    // لتر
    averageConsumption: Number,
    // لتر/100كم
    lastRefill: {
      date: Date,
      amount: Number,
      cost: Number,
      station: String
    }
  },
  // صيانة المركبة
  maintenance: {
    lastMaintenanceDate: Date,
    nextMaintenanceDate: Date,
    nextMaintenanceKm: Number,
    currentOdometer: Number // كم
  },
  // سجل الصيانة (للتوافق مع الاختبارات)
  maintenanceHistory: {
    type: [{
      date: {
        type: Date,
        default: Date.now
      },
      type: {
        type: String
      },
      description: String,
      cost: Number,
      workshop: String
    }],
    default: []
  },
  // تأمين المركبة
  insurance: {
    company: String,
    policyNumber: String,
    startDate: Date,
    expiryDate: Date,
    coverageAmount: Number,
    annualCost: Number
  },
  // مراقبة السلامة
  safety: {
    lastInspectionDate: Date,
    nextInspectionDate: Date,
    emergencyAlerts: [{
      timestamp: Date,
      type: {
        type: String,
        enum: ['accident', 'breakdown', 'speeding', 'harsh_braking', 'deviation']
      },
      location: {
        type: {
          type: String,
          default: 'Point'
        },
        coordinates: [Number]
      },
      severity: {
        type: String,
        enum: ['low', 'medium', 'high', 'critical']
      },
      resolved: {
        type: Boolean,
        default: false
      },
      resolvedAt: Date
    }],
    speedingIncidents: {
      type: Number,
      default: 0
    },
    harshBrakingIncidents: {
      type: Number,
      default: 0
    }
  },
  // الركاب المعينين
  assignedPassengers: [{
    type: mongoose.Schema.Types.ObjectId,
    ref: 'User'
  }],
  // إحصائيات
  statistics: {
    totalDistanceCovered: {
      type: Number,
      default: 0
    },
    // كم
    totalFuelConsumed: {
      type: Number,
      default: 0
    },
    // لتر
    totalMaintenanceCost: {
      type: Number,
      default: 0
    },
    // ريال
    averageSpeed: Number,
    // km/h
    tripCount: {
      type: Number,
      default: 0
    }
  },
  // معلومات إضافية
  notes: String,
  documents: [{
    name: String,
    type: String,
    url: String,
    uploadDate: Date
  }],
  isActive: {
    type: Boolean,
    default: true
  }
}, {
  timestamps: true
});

// Indexes للبحث والأداء
vehicleSchema.index({
  status: 1,
  isActive: 1
});
vehicleSchema.index({
  currentDriver: 1
});
vehicleSchema.index({
  'gpsDevice.currentLocation.coordinates': '2dsphere'
});

// Virtual للحصول على حالة الوقود
vehicleSchema.virtual('fuelStatus').get(function () {
  if (!this.fuelConsumption.currentFuelLevel || !this.fuelConsumption.tankCapacity) {
    return 'unknown';
  }
  const percentage = this.fuelConsumption.currentFuelLevel / this.fuelConsumption.tankCapacity * 100;
  if (percentage < 20) return 'critical';
  if (percentage < 40) return 'low';
  if (percentage < 70) return 'medium';
  return 'good';
});

// Virtual للحصول على حالة الصيانة
vehicleSchema.virtual('maintenanceStatus').get(function () {
  if (!this.maintenance.nextMaintenanceDate) return 'unknown';
  const daysUntilMaintenance = Math.ceil((this.maintenance.nextMaintenanceDate - new Date()) / (1000 * 60 * 60 * 24));
  if (daysUntilMaintenance < 0) return 'overdue';
  if (daysUntilMaintenance <= 7) return 'urgent';
  if (daysUntilMaintenance <= 30) return 'soon';
  return 'good';
});

// Method لتحديث موقع GPS
vehicleSchema.methods.updateGPSLocation = function (location, speed, heading) {
  this.gpsDevice.currentLocation = {
    type: 'Point',
    coordinates: location.coordinates || [location.longitude, location.latitude]
  };
  if (speed !== undefined) this.currentSpeed = speed;
  if (heading !== undefined) this.gpsDevice.heading = heading;
  this.gpsDevice.lastUpdate = new Date();
  return this.save();
};

// Method لإضافة تنبيه طوارئ
vehicleSchema.methods.addEmergencyAlert = function (alert) {
  this.safety.emergencyAlerts.push({
    timestamp: new Date(),
    type: alert.type,
    location: alert.location,
    severity: alert.severity
  });

  // تحديث حالة المركبة للطوارئ الحرجة
  if (alert.severity === 'critical') {
    this.status = 'emergency';
  }
  return this.save();
};

// Method لتحديث استهلاك الوقود
vehicleSchema.methods.updateFuelConsumption = function (distance) {
  if (this.fuelConsumption.averageConsumption) {
    const consumed = distance / 100 * this.fuelConsumption.averageConsumption;
    this.fuelConsumption.currentFuelLevel -= consumed;
    this.statistics.totalFuelConsumed += consumed;
    this.statistics.totalDistanceCovered += distance;
  }
  return this.save();
};

// Static method للبحث عن مركبات قريبة
vehicleSchema.statics.findNearby = function (longitude, latitude, maxDistance = 5000) {
  return this.find({
    'gpsDevice.currentLocation.coordinates': {
      $near: {
        $geometry: {
          type: 'Point',
          coordinates: [longitude, latitude]
        },
        $maxDistance: maxDistance
      }
    },
    status: 'active',
    isActive: true
  });
};

// Static method للحصول على المركبات المتاحة
vehicleSchema.statics.findAvailable = function (capacity) {
  return this.find({
    status: 'active',
    isActive: true,
    capacity: {
      $gte: capacity
    },
    currentDriver: {
      $exists: true
    }
  });
};
module.exports = mongoose.model('Vehicle', vehicleSchema);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJ2ZWhpY2xlU2NoZW1hIiwiU2NoZW1hIiwidmVoaWNsZU51bWJlciIsInR5cGUiLCJTdHJpbmciLCJyZXF1aXJlZCIsInVuaXF1ZSIsInBsYXRlTnVtYmVyIiwiZW51bSIsImJyYW5kIiwibW9kZWwiLCJ5ZWFyIiwiTnVtYmVyIiwiY29sb3IiLCJjYXBhY2l0eSIsIm1pbiIsImZ1ZWxMZXZlbCIsImRlZmF1bHQiLCJzdGF0dXMiLCJncHNEZXZpY2UiLCJkZXZpY2VJZCIsImxhc3RVcGRhdGUiLCJEYXRlIiwiY3VycmVudExvY2F0aW9uIiwiY29vcmRpbmF0ZXMiLCJhZGRyZXNzIiwic3BlZWQiLCJoZWFkaW5nIiwiY3VycmVudERyaXZlciIsIlR5cGVzIiwiT2JqZWN0SWQiLCJyZWYiLCJkcml2ZXIiLCJjdXJyZW50Um91dGUiLCJtaWxlYWdlIiwiZnVlbENvbnN1bXB0aW9uIiwiZnVlbFR5cGUiLCJ0YW5rQ2FwYWNpdHkiLCJjdXJyZW50RnVlbExldmVsIiwiYXZlcmFnZUNvbnN1bXB0aW9uIiwibGFzdFJlZmlsbCIsImRhdGUiLCJhbW91bnQiLCJjb3N0Iiwic3RhdGlvbiIsIm1haW50ZW5hbmNlIiwibGFzdE1haW50ZW5hbmNlRGF0ZSIsIm5leHRNYWludGVuYW5jZURhdGUiLCJuZXh0TWFpbnRlbmFuY2VLbSIsImN1cnJlbnRPZG9tZXRlciIsIm1haW50ZW5hbmNlSGlzdG9yeSIsIm5vdyIsImRlc2NyaXB0aW9uIiwid29ya3Nob3AiLCJpbnN1cmFuY2UiLCJjb21wYW55IiwicG9saWN5TnVtYmVyIiwic3RhcnREYXRlIiwiZXhwaXJ5RGF0ZSIsImNvdmVyYWdlQW1vdW50IiwiYW5udWFsQ29zdCIsInNhZmV0eSIsImxhc3RJbnNwZWN0aW9uRGF0ZSIsIm5leHRJbnNwZWN0aW9uRGF0ZSIsImVtZXJnZW5jeUFsZXJ0cyIsInRpbWVzdGFtcCIsImxvY2F0aW9uIiwic2V2ZXJpdHkiLCJyZXNvbHZlZCIsIkJvb2xlYW4iLCJyZXNvbHZlZEF0Iiwic3BlZWRpbmdJbmNpZGVudHMiLCJoYXJzaEJyYWtpbmdJbmNpZGVudHMiLCJhc3NpZ25lZFBhc3NlbmdlcnMiLCJzdGF0aXN0aWNzIiwidG90YWxEaXN0YW5jZUNvdmVyZWQiLCJ0b3RhbEZ1ZWxDb25zdW1lZCIsInRvdGFsTWFpbnRlbmFuY2VDb3N0IiwiYXZlcmFnZVNwZWVkIiwidHJpcENvdW50Iiwibm90ZXMiLCJkb2N1bWVudHMiLCJuYW1lIiwidXJsIiwidXBsb2FkRGF0ZSIsImlzQWN0aXZlIiwidGltZXN0YW1wcyIsImluZGV4IiwidmlydHVhbCIsImdldCIsInBlcmNlbnRhZ2UiLCJkYXlzVW50aWxNYWludGVuYW5jZSIsIk1hdGgiLCJjZWlsIiwibWV0aG9kcyIsInVwZGF0ZUdQU0xvY2F0aW9uIiwibG9uZ2l0dWRlIiwibGF0aXR1ZGUiLCJ1bmRlZmluZWQiLCJjdXJyZW50U3BlZWQiLCJzYXZlIiwiYWRkRW1lcmdlbmN5QWxlcnQiLCJhbGVydCIsInB1c2giLCJ1cGRhdGVGdWVsQ29uc3VtcHRpb24iLCJkaXN0YW5jZSIsImNvbnN1bWVkIiwic3RhdGljcyIsImZpbmROZWFyYnkiLCJtYXhEaXN0YW5jZSIsImZpbmQiLCIkbmVhciIsIiRnZW9tZXRyeSIsIiRtYXhEaXN0YW5jZSIsImZpbmRBdmFpbGFibGUiLCIkZ3RlIiwiJGV4aXN0cyIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlcyI6WyJWZWhpY2xlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IG1vbmdvb3NlID0gcmVxdWlyZSgnbW9uZ29vc2UnKTtcblxuY29uc3QgdmVoaWNsZVNjaGVtYSA9IG5ldyBtb25nb29zZS5TY2hlbWEoXG4gIHtcbiAgICAvLyDZhdi52YTZiNmF2KfYqiDYo9iz2KfYs9mK2KlcbiAgICB2ZWhpY2xlTnVtYmVyOiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgIHVuaXF1ZTogdHJ1ZVxuICAgIH0sXG4gICAgcGxhdGVOdW1iZXI6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgdW5pcXVlOiB0cnVlLFxuICAgIH0sXG4gICAgdHlwZToge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgZW51bTogWydidXMnLCAndmFuJywgJ2NhcicsICd0cnVjayddLFxuICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgfSxcbiAgICBicmFuZDogU3RyaW5nLFxuICAgIG1vZGVsOiBTdHJpbmcsXG4gICAgeWVhcjogTnVtYmVyLFxuICAgIGNvbG9yOiBTdHJpbmcsXG4gICAgY2FwYWNpdHk6IHtcbiAgICAgIHR5cGU6IE51bWJlcixcbiAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgbWluOiAxLFxuICAgIH0sXG5cbiAgICAvLyDZhdiz2KrZiNmJINin2YTZiNmC2YjYryAo2YTZhNiq2YjYp9mB2YIg2YXYuSDYp9mE2KfYrtiq2KjYp9ix2KfYqilcbiAgICBmdWVsTGV2ZWw6IHtcbiAgICAgIHR5cGU6IE51bWJlcixcbiAgICAgIGRlZmF1bHQ6IDEwMCxcbiAgICB9LFxuXG4gICAgLy8g2K3Yp9mE2Kkg2KfZhNmF2LHZg9io2KlcbiAgICBzdGF0dXM6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIGVudW06IFsnYWN0aXZlJywgJ21haW50ZW5hbmNlJywgJ2luYWN0aXZlJywgJ2VtZXJnZW5jeSddLFxuICAgICAgZGVmYXVsdDogJ2FjdGl2ZScsXG4gICAgfSxcblxuICAgIC8vINmF2LnZhNmI2YXYp9iqIEdQUyDZiNin2YTZhdmI2YLYuVxuICAgIGdwc0RldmljZToge1xuICAgICAgZGV2aWNlSWQ6IFN0cmluZyxcbiAgICAgIGxhc3RVcGRhdGU6IERhdGUsXG4gICAgICBjdXJyZW50TG9jYXRpb246IHtcbiAgICAgICAgdHlwZToge1xuICAgICAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgICAgICBlbnVtOiBbJ1BvaW50J10sXG4gICAgICAgICAgZGVmYXVsdDogJ1BvaW50JyxcbiAgICAgICAgfSxcbiAgICAgICAgY29vcmRpbmF0ZXM6IHtcbiAgICAgICAgICB0eXBlOiBbTnVtYmVyXSwgLy8gW2xvbmdpdHVkZSwgbGF0aXR1ZGVdXG4gICAgICAgIH0sXG4gICAgICAgIGFkZHJlc3M6IFN0cmluZyxcbiAgICAgICAgc3BlZWQ6IE51bWJlciwgLy8ga20vaFxuICAgICAgICBoZWFkaW5nOiBOdW1iZXIsIC8vINin2KrYrNin2Ycg2KfZhNit2LHZg9ipICgwLTM2MClcbiAgICAgIH0sXG4gICAgfSxcblxuICAgIC8vINin2YTYs9in2KbZgiDYp9mE2K3Yp9mE2YpcbiAgICBjdXJyZW50RHJpdmVyOiB7XG4gICAgICB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsXG4gICAgICByZWY6ICdVc2VyJyxcbiAgICB9LFxuXG4gICAgLy8g2K3ZgtmEINmF2LPYqti52KfYsSDZhNmE2LPYp9im2YIgKNmE2YTYqtmI2KfZgdmCINmF2Lkg2KfZhNin2K7Yqtio2KfYsdin2KopXG4gICAgZHJpdmVyOiB7XG4gICAgICB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsXG4gICAgICByZWY6ICdVc2VyJyxcbiAgICB9LFxuXG4gICAgLy8g2KfZhNmF2LPYp9ixINin2YTYrdin2YTZilxuICAgIGN1cnJlbnRSb3V0ZToge1xuICAgICAgdHlwZTogbW9uZ29vc2UuU2NoZW1hLlR5cGVzLk9iamVjdElkLFxuICAgICAgcmVmOiAnVHJhbnNwb3J0Um91dGUnLFxuICAgIH0sXG5cbiAgICAvLyDZhdiz2KfZgdipINin2YTZhdix2YPYqNipXG4gICAgbWlsZWFnZToge1xuICAgICAgdHlwZTogTnVtYmVyLFxuICAgICAgZGVmYXVsdDogMCxcbiAgICB9LFxuXG4gICAgLy8g2KfYs9iq2YfZhNin2YMg2KfZhNmI2YLZiNivXG4gICAgZnVlbENvbnN1bXB0aW9uOiB7XG4gICAgICBmdWVsVHlwZToge1xuICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgIGVudW06IFsncGV0cm9sJywgJ2RpZXNlbCcsICdlbGVjdHJpYycsICdoeWJyaWQnXSxcbiAgICAgIH0sXG4gICAgICB0YW5rQ2FwYWNpdHk6IE51bWJlciwgLy8g2YTYqtixXG4gICAgICBjdXJyZW50RnVlbExldmVsOiBOdW1iZXIsIC8vINmE2KrYsVxuICAgICAgYXZlcmFnZUNvbnN1bXB0aW9uOiBOdW1iZXIsIC8vINmE2KrYsS8xMDDZg9mFXG4gICAgICBsYXN0UmVmaWxsOiB7XG4gICAgICAgIGRhdGU6IERhdGUsXG4gICAgICAgIGFtb3VudDogTnVtYmVyLFxuICAgICAgICBjb3N0OiBOdW1iZXIsXG4gICAgICAgIHN0YXRpb246IFN0cmluZyxcbiAgICAgIH0sXG4gICAgfSxcblxuICAgIC8vINi12YrYp9mG2Kkg2KfZhNmF2LHZg9io2KlcbiAgICBtYWludGVuYW5jZToge1xuICAgICAgbGFzdE1haW50ZW5hbmNlRGF0ZTogRGF0ZSxcbiAgICAgIG5leHRNYWludGVuYW5jZURhdGU6IERhdGUsXG4gICAgICBuZXh0TWFpbnRlbmFuY2VLbTogTnVtYmVyLFxuICAgICAgY3VycmVudE9kb21ldGVyOiBOdW1iZXIsIC8vINmD2YVcbiAgICB9LFxuXG4gICAgLy8g2LPYrNmEINin2YTYtdmK2KfZhtipICjZhNmE2KrZiNin2YHZgiDZhdi5INin2YTYp9iu2KrYqNin2LHYp9iqKVxuICAgIG1haW50ZW5hbmNlSGlzdG9yeToge1xuICAgICAgdHlwZTogW3tcbiAgICAgICAgZGF0ZTogeyB0eXBlOiBEYXRlLCBkZWZhdWx0OiBEYXRlLm5vdyB9LFxuICAgICAgICB0eXBlOiB7IHR5cGU6IFN0cmluZyB9LFxuICAgICAgICBkZXNjcmlwdGlvbjogU3RyaW5nLFxuICAgICAgICBjb3N0OiBOdW1iZXIsXG4gICAgICAgIHdvcmtzaG9wOiBTdHJpbmcsXG4gICAgICB9XSxcbiAgICAgIGRlZmF1bHQ6IFtdLFxuICAgIH0sXG5cbiAgICAvLyDYqtij2YXZitmGINin2YTZhdix2YPYqNipXG4gICAgaW5zdXJhbmNlOiB7XG4gICAgICBjb21wYW55OiBTdHJpbmcsXG4gICAgICBwb2xpY3lOdW1iZXI6IFN0cmluZyxcbiAgICAgIHN0YXJ0RGF0ZTogRGF0ZSxcbiAgICAgIGV4cGlyeURhdGU6IERhdGUsXG4gICAgICBjb3ZlcmFnZUFtb3VudDogTnVtYmVyLFxuICAgICAgYW5udWFsQ29zdDogTnVtYmVyLFxuICAgIH0sXG5cbiAgICAvLyDZhdix2KfZgtio2Kkg2KfZhNiz2YTYp9mF2KlcbiAgICBzYWZldHk6IHtcbiAgICAgIGxhc3RJbnNwZWN0aW9uRGF0ZTogRGF0ZSxcbiAgICAgIG5leHRJbnNwZWN0aW9uRGF0ZTogRGF0ZSxcbiAgICAgIGVtZXJnZW5jeUFsZXJ0czogW1xuICAgICAgICB7XG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLFxuICAgICAgICAgIHR5cGU6IHtcbiAgICAgICAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgICAgICAgIGVudW06IFsnYWNjaWRlbnQnLCAnYnJlYWtkb3duJywgJ3NwZWVkaW5nJywgJ2hhcnNoX2JyYWtpbmcnLCAnZGV2aWF0aW9uJ10sXG4gICAgICAgICAgfSxcbiAgICAgICAgICBsb2NhdGlvbjoge1xuICAgICAgICAgICAgdHlwZToge1xuICAgICAgICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgICAgICAgIGRlZmF1bHQ6ICdQb2ludCcsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY29vcmRpbmF0ZXM6IFtOdW1iZXJdLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgc2V2ZXJpdHk6IHtcbiAgICAgICAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgICAgICAgIGVudW06IFsnbG93JywgJ21lZGl1bScsICdoaWdoJywgJ2NyaXRpY2FsJ10sXG4gICAgICAgICAgfSxcbiAgICAgICAgICByZXNvbHZlZDoge1xuICAgICAgICAgICAgdHlwZTogQm9vbGVhbixcbiAgICAgICAgICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgcmVzb2x2ZWRBdDogRGF0ZSxcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgICBzcGVlZGluZ0luY2lkZW50czoge1xuICAgICAgICB0eXBlOiBOdW1iZXIsXG4gICAgICAgIGRlZmF1bHQ6IDAsXG4gICAgICB9LFxuICAgICAgaGFyc2hCcmFraW5nSW5jaWRlbnRzOiB7XG4gICAgICAgIHR5cGU6IE51bWJlcixcbiAgICAgICAgZGVmYXVsdDogMCxcbiAgICAgIH0sXG4gICAgfSxcblxuICAgIC8vINin2YTYsdmD2KfYqCDYp9mE2YXYudmK2YbZitmGXG4gICAgYXNzaWduZWRQYXNzZW5nZXJzOiBbXG4gICAgICB7XG4gICAgICAgIHR5cGU6IG1vbmdvb3NlLlNjaGVtYS5UeXBlcy5PYmplY3RJZCxcbiAgICAgICAgcmVmOiAnVXNlcicsXG4gICAgICB9LFxuICAgIF0sXG5cbiAgICAvLyDYpdit2LXYp9im2YrYp9iqXG4gICAgc3RhdGlzdGljczoge1xuICAgICAgdG90YWxEaXN0YW5jZUNvdmVyZWQ6IHtcbiAgICAgICAgdHlwZTogTnVtYmVyLFxuICAgICAgICBkZWZhdWx0OiAwLFxuICAgICAgfSwgLy8g2YPZhVxuICAgICAgdG90YWxGdWVsQ29uc3VtZWQ6IHtcbiAgICAgICAgdHlwZTogTnVtYmVyLFxuICAgICAgICBkZWZhdWx0OiAwLFxuICAgICAgfSwgLy8g2YTYqtixXG4gICAgICB0b3RhbE1haW50ZW5hbmNlQ29zdDoge1xuICAgICAgICB0eXBlOiBOdW1iZXIsXG4gICAgICAgIGRlZmF1bHQ6IDAsXG4gICAgICB9LCAvLyDYsdmK2KfZhFxuICAgICAgYXZlcmFnZVNwZWVkOiBOdW1iZXIsIC8vIGttL2hcbiAgICAgIHRyaXBDb3VudDoge1xuICAgICAgICB0eXBlOiBOdW1iZXIsXG4gICAgICAgIGRlZmF1bHQ6IDAsXG4gICAgICB9LFxuICAgIH0sXG5cbiAgICAvLyDZhdi52YTZiNmF2KfYqiDYpdi22KfZgdmK2KlcbiAgICBub3RlczogU3RyaW5nLFxuICAgIGRvY3VtZW50czogW1xuICAgICAge1xuICAgICAgICBuYW1lOiBTdHJpbmcsXG4gICAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgICAgdXJsOiBTdHJpbmcsXG4gICAgICAgIHVwbG9hZERhdGU6IERhdGUsXG4gICAgICB9LFxuICAgIF0sXG5cbiAgICBpc0FjdGl2ZToge1xuICAgICAgdHlwZTogQm9vbGVhbixcbiAgICAgIGRlZmF1bHQ6IHRydWUsXG4gICAgfSxcbiAgfSxcbiAge1xuICAgIHRpbWVzdGFtcHM6IHRydWUsXG4gIH1cbik7XG5cbi8vIEluZGV4ZXMg2YTZhNio2K3YqyDZiNin2YTYo9iv2KfYoVxudmVoaWNsZVNjaGVtYS5pbmRleCh7IHN0YXR1czogMSwgaXNBY3RpdmU6IDEgfSk7XG52ZWhpY2xlU2NoZW1hLmluZGV4KHsgY3VycmVudERyaXZlcjogMSB9KTtcbnZlaGljbGVTY2hlbWEuaW5kZXgoeyAnZ3BzRGV2aWNlLmN1cnJlbnRMb2NhdGlvbi5jb29yZGluYXRlcyc6ICcyZHNwaGVyZScgfSk7XG5cbi8vIFZpcnR1YWwg2YTZhNit2LXZiNmEINi52YTZiSDYrdin2YTYqSDYp9mE2YjZgtmI2K9cbnZlaGljbGVTY2hlbWEudmlydHVhbCgnZnVlbFN0YXR1cycpLmdldChmdW5jdGlvbiAoKSB7XG4gIGlmICghdGhpcy5mdWVsQ29uc3VtcHRpb24uY3VycmVudEZ1ZWxMZXZlbCB8fCAhdGhpcy5mdWVsQ29uc3VtcHRpb24udGFua0NhcGFjaXR5KSB7XG4gICAgcmV0dXJuICd1bmtub3duJztcbiAgfVxuICBjb25zdCBwZXJjZW50YWdlID1cbiAgICAodGhpcy5mdWVsQ29uc3VtcHRpb24uY3VycmVudEZ1ZWxMZXZlbCAvIHRoaXMuZnVlbENvbnN1bXB0aW9uLnRhbmtDYXBhY2l0eSkgKiAxMDA7XG4gIGlmIChwZXJjZW50YWdlIDwgMjApIHJldHVybiAnY3JpdGljYWwnO1xuICBpZiAocGVyY2VudGFnZSA8IDQwKSByZXR1cm4gJ2xvdyc7XG4gIGlmIChwZXJjZW50YWdlIDwgNzApIHJldHVybiAnbWVkaXVtJztcbiAgcmV0dXJuICdnb29kJztcbn0pO1xuXG4vLyBWaXJ0dWFsINmE2YTYrdi12YjZhCDYudmE2Ykg2K3Yp9mE2Kkg2KfZhNi12YrYp9mG2KlcbnZlaGljbGVTY2hlbWEudmlydHVhbCgnbWFpbnRlbmFuY2VTdGF0dXMnKS5nZXQoZnVuY3Rpb24gKCkge1xuICBpZiAoIXRoaXMubWFpbnRlbmFuY2UubmV4dE1haW50ZW5hbmNlRGF0ZSkgcmV0dXJuICd1bmtub3duJztcbiAgY29uc3QgZGF5c1VudGlsTWFpbnRlbmFuY2UgPSBNYXRoLmNlaWwoXG4gICAgKHRoaXMubWFpbnRlbmFuY2UubmV4dE1haW50ZW5hbmNlRGF0ZSAtIG5ldyBEYXRlKCkpIC8gKDEwMDAgKiA2MCAqIDYwICogMjQpXG4gICk7XG4gIGlmIChkYXlzVW50aWxNYWludGVuYW5jZSA8IDApIHJldHVybiAnb3ZlcmR1ZSc7XG4gIGlmIChkYXlzVW50aWxNYWludGVuYW5jZSA8PSA3KSByZXR1cm4gJ3VyZ2VudCc7XG4gIGlmIChkYXlzVW50aWxNYWludGVuYW5jZSA8PSAzMCkgcmV0dXJuICdzb29uJztcbiAgcmV0dXJuICdnb29kJztcbn0pO1xuXG4vLyBNZXRob2Qg2YTYqtit2K/ZitirINmF2YjZgti5IEdQU1xudmVoaWNsZVNjaGVtYS5tZXRob2RzLnVwZGF0ZUdQU0xvY2F0aW9uID0gZnVuY3Rpb24gKGxvY2F0aW9uLCBzcGVlZCwgaGVhZGluZykge1xuICB0aGlzLmdwc0RldmljZS5jdXJyZW50TG9jYXRpb24gPSB7XG4gICAgdHlwZTogJ1BvaW50JyxcbiAgICBjb29yZGluYXRlczogbG9jYXRpb24uY29vcmRpbmF0ZXMgfHwgW2xvY2F0aW9uLmxvbmdpdHVkZSwgbG9jYXRpb24ubGF0aXR1ZGVdLFxuICB9O1xuICBpZiAoc3BlZWQgIT09IHVuZGVmaW5lZCkgdGhpcy5jdXJyZW50U3BlZWQgPSBzcGVlZDtcbiAgaWYgKGhlYWRpbmcgIT09IHVuZGVmaW5lZCkgdGhpcy5ncHNEZXZpY2UuaGVhZGluZyA9IGhlYWRpbmc7XG4gIHRoaXMuZ3BzRGV2aWNlLmxhc3RVcGRhdGUgPSBuZXcgRGF0ZSgpO1xuICByZXR1cm4gdGhpcy5zYXZlKCk7XG59O1xuXG4vLyBNZXRob2Qg2YTYpdi22KfZgdipINiq2YbYqNmK2Ycg2LfZiNin2LHYplxudmVoaWNsZVNjaGVtYS5tZXRob2RzLmFkZEVtZXJnZW5jeUFsZXJ0ID0gZnVuY3Rpb24gKGFsZXJ0KSB7XG4gIHRoaXMuc2FmZXR5LmVtZXJnZW5jeUFsZXJ0cy5wdXNoKHtcbiAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXG4gICAgdHlwZTogYWxlcnQudHlwZSxcbiAgICBsb2NhdGlvbjogYWxlcnQubG9jYXRpb24sXG4gICAgc2V2ZXJpdHk6IGFsZXJ0LnNldmVyaXR5LFxuICB9KTtcblxuICAvLyDYqtit2K/ZitirINit2KfZhNipINin2YTZhdix2YPYqNipINmE2YTYt9mI2KfYsdimINin2YTYrdix2KzYqVxuICBpZiAoYWxlcnQuc2V2ZXJpdHkgPT09ICdjcml0aWNhbCcpIHtcbiAgICB0aGlzLnN0YXR1cyA9ICdlbWVyZ2VuY3knO1xuICB9XG5cbiAgcmV0dXJuIHRoaXMuc2F2ZSgpO1xufTtcblxuLy8gTWV0aG9kINmE2KrYrdiv2YrYqyDYp9iz2KrZh9mE2KfZgyDYp9mE2YjZgtmI2K9cbnZlaGljbGVTY2hlbWEubWV0aG9kcy51cGRhdGVGdWVsQ29uc3VtcHRpb24gPSBmdW5jdGlvbiAoZGlzdGFuY2UpIHtcbiAgaWYgKHRoaXMuZnVlbENvbnN1bXB0aW9uLmF2ZXJhZ2VDb25zdW1wdGlvbikge1xuICAgIGNvbnN0IGNvbnN1bWVkID0gKGRpc3RhbmNlIC8gMTAwKSAqIHRoaXMuZnVlbENvbnN1bXB0aW9uLmF2ZXJhZ2VDb25zdW1wdGlvbjtcbiAgICB0aGlzLmZ1ZWxDb25zdW1wdGlvbi5jdXJyZW50RnVlbExldmVsIC09IGNvbnN1bWVkO1xuICAgIHRoaXMuc3RhdGlzdGljcy50b3RhbEZ1ZWxDb25zdW1lZCArPSBjb25zdW1lZDtcbiAgICB0aGlzLnN0YXRpc3RpY3MudG90YWxEaXN0YW5jZUNvdmVyZWQgKz0gZGlzdGFuY2U7XG4gIH1cbiAgcmV0dXJuIHRoaXMuc2F2ZSgpO1xufTtcblxuLy8gU3RhdGljIG1ldGhvZCDZhNmE2KjYrdirINi52YYg2YXYsdmD2KjYp9iqINmC2LHZitio2KlcbnZlaGljbGVTY2hlbWEuc3RhdGljcy5maW5kTmVhcmJ5ID0gZnVuY3Rpb24gKGxvbmdpdHVkZSwgbGF0aXR1ZGUsIG1heERpc3RhbmNlID0gNTAwMCkge1xuICByZXR1cm4gdGhpcy5maW5kKHtcbiAgICAnZ3BzRGV2aWNlLmN1cnJlbnRMb2NhdGlvbi5jb29yZGluYXRlcyc6IHtcbiAgICAgICRuZWFyOiB7XG4gICAgICAgICRnZW9tZXRyeToge1xuICAgICAgICAgIHR5cGU6ICdQb2ludCcsXG4gICAgICAgICAgY29vcmRpbmF0ZXM6IFtsb25naXR1ZGUsIGxhdGl0dWRlXSxcbiAgICAgICAgfSxcbiAgICAgICAgJG1heERpc3RhbmNlOiBtYXhEaXN0YW5jZSxcbiAgICAgIH0sXG4gICAgfSxcbiAgICBzdGF0dXM6ICdhY3RpdmUnLFxuICAgIGlzQWN0aXZlOiB0cnVlLFxuICB9KTtcbn07XG5cbi8vIFN0YXRpYyBtZXRob2Qg2YTZhNit2LXZiNmEINi52YTZiSDYp9mE2YXYsdmD2KjYp9iqINin2YTZhdiq2KfYrdipXG52ZWhpY2xlU2NoZW1hLnN0YXRpY3MuZmluZEF2YWlsYWJsZSA9IGZ1bmN0aW9uIChjYXBhY2l0eSkge1xuICByZXR1cm4gdGhpcy5maW5kKHtcbiAgICBzdGF0dXM6ICdhY3RpdmUnLFxuICAgIGlzQWN0aXZlOiB0cnVlLFxuICAgIGNhcGFjaXR5OiB7ICRndGU6IGNhcGFjaXR5IH0sXG4gICAgY3VycmVudERyaXZlcjogeyAkZXhpc3RzOiB0cnVlIH0sXG4gIH0pO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBtb25nb29zZS5tb2RlbCgnVmVoaWNsZScsIHZlaGljbGVTY2hlbWEpO1xuIl0sIm1hcHBpbmdzIjoiQUFB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