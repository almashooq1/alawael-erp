4392ecec7fcd9350e19ec3e10f09ea75
/**
 * Dashboard Routes
 * System monitoring, health checks, and metrics
 * Phase 11: System Integration
 */

const express = require('express');
const router = express.Router();
const systemDashboard = require('../services/systemDashboard');
const responseFormatter = require('../services/responseFormatter');
const {
  requireAdmin,
  optionalAuth
} = require('../middleware/auth');

/**
 * GET /api/dashboard/health
 * System health check
 */
router.get('/health', optionalAuth, (req, res) => {
  try {
    const health = systemDashboard.getSystemHealth();
    res.json(responseFormatter.success(health, 'System health status'));
  } catch (error) {
    res.status(500).json(responseFormatter.serverError('Health check failed', error));
  }
});

/**
 * GET /api/dashboard/summary
 * Dashboard summary
 */
router.get('/summary', optionalAuth, (req, res) => {
  try {
    const summary = systemDashboard.getDashboardSummary();
    res.json(responseFormatter.success(summary, 'Dashboard summary'));
  } catch (error) {
    res.status(500).json(responseFormatter.serverError('Summary retrieval failed', error));
  }
});

/**
 * GET /api/dashboard/services
 * List all services status
 */
router.get('/services', optionalAuth, (req, res) => {
  try {
    const health = systemDashboard.getSystemHealth();
    res.json(responseFormatter.list(health.services, 'Services status'));
  } catch (error) {
    res.status(500).json(responseFormatter.serverError('Services retrieval failed', error));
  }
});

/**
 * GET /api/dashboard/services/:name
 * Get specific service status
 */
router.get('/services/:name', optionalAuth, (req, res) => {
  try {
    const {
      name
    } = req.params;
    const status = systemDashboard.checkServiceStatus(name);
    if (status.status === 'unknown') {
      return res.status(404).json(responseFormatter.notFound(`Service ${name}`));
    }
    res.json(responseFormatter.success(status, `Service ${name} status`));
  } catch (error) {
    res.status(500).json(responseFormatter.serverError('Service check failed', error));
  }
});

/**
 * GET /api/dashboard/integrations
 * List all integrations status
 */
router.get('/integrations', optionalAuth, (req, res) => {
  try {
    const health = systemDashboard.getSystemHealth();
    res.json(responseFormatter.success(health.integrations, 'Integrations status'));
  } catch (error) {
    res.status(500).json(responseFormatter.serverError('Integrations retrieval failed', error));
  }
});

/**
 * GET /api/dashboard/performance
 * Performance metrics
 */
router.get('/performance', optionalAuth, (req, res) => {
  try {
    const health = systemDashboard.getSystemHealth();
    res.json(responseFormatter.analytics(health.performance, 'current', 'Performance metrics'));
  } catch (error) {
    res.status(500).json(responseFormatter.serverError('Performance metrics failed', error));
  }
});

/**
 * GET /api/dashboard/alerts
 * System alerts
 */
router.get('/alerts', requireAdmin, (req, res) => {
  try {
    const summary = systemDashboard.getDashboardSummary();
    res.json(responseFormatter.list(summary.recentAlerts, 'Recent alerts'));
  } catch (error) {
    res.status(500).json(responseFormatter.serverError('Alerts retrieval failed', error));
  }
});

/**
 * GET /api/dashboard/events
 * System events log
 */
router.get('/events', requireAdmin, (req, res) => {
  try {
    const summary = systemDashboard.getDashboardSummary();
    res.json(responseFormatter.list(summary.recentEvents, 'Recent events'));
  } catch (error) {
    res.status(500).json(responseFormatter.serverError('Events retrieval failed', error));
  }
});

/**
 * POST /api/dashboard/alert
 * Add custom alert
 */
router.post('/alert', requireAdmin, (req, res) => {
  try {
    const {
      severity,
      message,
      details
    } = req.body;
    if (!severity || !message) {
      return res.status(400).json(responseFormatter.validationError(['severity and message are required']));
    }
    const alert = systemDashboard.addAlert(severity, message, details);
    res.status(201).json(responseFormatter.created(alert, 'Alert created'));
  } catch (error) {
    res.status(500).json(responseFormatter.serverError('Alert creation failed', error));
  }
});

/**
 * GET /api/dashboard/export
 * Export all metrics
 */
router.get('/export', requireAdmin, (req, res) => {
  try {
    const metrics = systemDashboard.exportMetrics();
    res.setHeader('Content-Type', 'application/json');
    res.setHeader('Content-Disposition', 'attachment; filename=metrics.json');
    res.json(metrics);
  } catch (error) {
    res.status(500).json(responseFormatter.serverError('Export failed', error));
  }
});

/**
 * GET /api/dashboard/config
 * Get system configuration (admin only)
 */
router.get('/config', requireAdmin, (req, res) => {
  try {
    const config = require('../config/production').getConfig();
    const sanitized = {
      server: config.server,
      features: config.features,
      deployment: config.deployment,
      version: config.deployment.version
    };
    res.json(responseFormatter.success(sanitized, 'System configuration'));
  } catch (error) {
    res.status(500).json(responseFormatter.serverError('Config retrieval failed', error));
  }
});
module.exports = router;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsInJvdXRlciIsIlJvdXRlciIsInN5c3RlbURhc2hib2FyZCIsInJlc3BvbnNlRm9ybWF0dGVyIiwicmVxdWlyZUFkbWluIiwib3B0aW9uYWxBdXRoIiwiZ2V0IiwicmVxIiwicmVzIiwiaGVhbHRoIiwiZ2V0U3lzdGVtSGVhbHRoIiwianNvbiIsInN1Y2Nlc3MiLCJlcnJvciIsInN0YXR1cyIsInNlcnZlckVycm9yIiwic3VtbWFyeSIsImdldERhc2hib2FyZFN1bW1hcnkiLCJsaXN0Iiwic2VydmljZXMiLCJuYW1lIiwicGFyYW1zIiwiY2hlY2tTZXJ2aWNlU3RhdHVzIiwibm90Rm91bmQiLCJpbnRlZ3JhdGlvbnMiLCJhbmFseXRpY3MiLCJwZXJmb3JtYW5jZSIsInJlY2VudEFsZXJ0cyIsInJlY2VudEV2ZW50cyIsInBvc3QiLCJzZXZlcml0eSIsIm1lc3NhZ2UiLCJkZXRhaWxzIiwiYm9keSIsInZhbGlkYXRpb25FcnJvciIsImFsZXJ0IiwiYWRkQWxlcnQiLCJjcmVhdGVkIiwibWV0cmljcyIsImV4cG9ydE1ldHJpY3MiLCJzZXRIZWFkZXIiLCJjb25maWciLCJnZXRDb25maWciLCJzYW5pdGl6ZWQiLCJzZXJ2ZXIiLCJmZWF0dXJlcyIsImRlcGxveW1lbnQiLCJ2ZXJzaW9uIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbImRhc2hib2FyZC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIERhc2hib2FyZCBSb3V0ZXNcbiAqIFN5c3RlbSBtb25pdG9yaW5nLCBoZWFsdGggY2hlY2tzLCBhbmQgbWV0cmljc1xuICogUGhhc2UgMTE6IFN5c3RlbSBJbnRlZ3JhdGlvblxuICovXG5cbmNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7XG5jb25zdCByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xuY29uc3Qgc3lzdGVtRGFzaGJvYXJkID0gcmVxdWlyZSgnLi4vc2VydmljZXMvc3lzdGVtRGFzaGJvYXJkJyk7XG5jb25zdCByZXNwb25zZUZvcm1hdHRlciA9IHJlcXVpcmUoJy4uL3NlcnZpY2VzL3Jlc3BvbnNlRm9ybWF0dGVyJyk7XG5jb25zdCB7IHJlcXVpcmVBZG1pbiwgb3B0aW9uYWxBdXRoIH0gPSByZXF1aXJlKCcuLi9taWRkbGV3YXJlL2F1dGgnKTtcblxuLyoqXG4gKiBHRVQgL2FwaS9kYXNoYm9hcmQvaGVhbHRoXG4gKiBTeXN0ZW0gaGVhbHRoIGNoZWNrXG4gKi9cbnJvdXRlci5nZXQoJy9oZWFsdGgnLCBvcHRpb25hbEF1dGgsIChyZXEsIHJlcykgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IGhlYWx0aCA9IHN5c3RlbURhc2hib2FyZC5nZXRTeXN0ZW1IZWFsdGgoKTtcbiAgICByZXMuanNvbihyZXNwb25zZUZvcm1hdHRlci5zdWNjZXNzKGhlYWx0aCwgJ1N5c3RlbSBoZWFsdGggc3RhdHVzJykpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHJlc3BvbnNlRm9ybWF0dGVyLnNlcnZlckVycm9yKCdIZWFsdGggY2hlY2sgZmFpbGVkJywgZXJyb3IpKTtcbiAgfVxufSk7XG5cbi8qKlxuICogR0VUIC9hcGkvZGFzaGJvYXJkL3N1bW1hcnlcbiAqIERhc2hib2FyZCBzdW1tYXJ5XG4gKi9cbnJvdXRlci5nZXQoJy9zdW1tYXJ5Jywgb3B0aW9uYWxBdXRoLCAocmVxLCByZXMpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBzdW1tYXJ5ID0gc3lzdGVtRGFzaGJvYXJkLmdldERhc2hib2FyZFN1bW1hcnkoKTtcbiAgICByZXMuanNvbihyZXNwb25zZUZvcm1hdHRlci5zdWNjZXNzKHN1bW1hcnksICdEYXNoYm9hcmQgc3VtbWFyeScpKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbihyZXNwb25zZUZvcm1hdHRlci5zZXJ2ZXJFcnJvcignU3VtbWFyeSByZXRyaWV2YWwgZmFpbGVkJywgZXJyb3IpKTtcbiAgfVxufSk7XG5cbi8qKlxuICogR0VUIC9hcGkvZGFzaGJvYXJkL3NlcnZpY2VzXG4gKiBMaXN0IGFsbCBzZXJ2aWNlcyBzdGF0dXNcbiAqL1xucm91dGVyLmdldCgnL3NlcnZpY2VzJywgb3B0aW9uYWxBdXRoLCAocmVxLCByZXMpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBoZWFsdGggPSBzeXN0ZW1EYXNoYm9hcmQuZ2V0U3lzdGVtSGVhbHRoKCk7XG4gICAgcmVzLmpzb24ocmVzcG9uc2VGb3JtYXR0ZXIubGlzdChoZWFsdGguc2VydmljZXMsICdTZXJ2aWNlcyBzdGF0dXMnKSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24ocmVzcG9uc2VGb3JtYXR0ZXIuc2VydmVyRXJyb3IoJ1NlcnZpY2VzIHJldHJpZXZhbCBmYWlsZWQnLCBlcnJvcikpO1xuICB9XG59KTtcblxuLyoqXG4gKiBHRVQgL2FwaS9kYXNoYm9hcmQvc2VydmljZXMvOm5hbWVcbiAqIEdldCBzcGVjaWZpYyBzZXJ2aWNlIHN0YXR1c1xuICovXG5yb3V0ZXIuZ2V0KCcvc2VydmljZXMvOm5hbWUnLCBvcHRpb25hbEF1dGgsIChyZXEsIHJlcykgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHsgbmFtZSB9ID0gcmVxLnBhcmFtcztcbiAgICBjb25zdCBzdGF0dXMgPSBzeXN0ZW1EYXNoYm9hcmQuY2hlY2tTZXJ2aWNlU3RhdHVzKG5hbWUpO1xuXG4gICAgaWYgKHN0YXR1cy5zdGF0dXMgPT09ICd1bmtub3duJykge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHJlc3BvbnNlRm9ybWF0dGVyLm5vdEZvdW5kKGBTZXJ2aWNlICR7bmFtZX1gKSk7XG4gICAgfVxuXG4gICAgcmVzLmpzb24ocmVzcG9uc2VGb3JtYXR0ZXIuc3VjY2VzcyhzdGF0dXMsIGBTZXJ2aWNlICR7bmFtZX0gc3RhdHVzYCkpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHJlc3BvbnNlRm9ybWF0dGVyLnNlcnZlckVycm9yKCdTZXJ2aWNlIGNoZWNrIGZhaWxlZCcsIGVycm9yKSk7XG4gIH1cbn0pO1xuXG4vKipcbiAqIEdFVCAvYXBpL2Rhc2hib2FyZC9pbnRlZ3JhdGlvbnNcbiAqIExpc3QgYWxsIGludGVncmF0aW9ucyBzdGF0dXNcbiAqL1xucm91dGVyLmdldCgnL2ludGVncmF0aW9ucycsIG9wdGlvbmFsQXV0aCwgKHJlcSwgcmVzKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgaGVhbHRoID0gc3lzdGVtRGFzaGJvYXJkLmdldFN5c3RlbUhlYWx0aCgpO1xuICAgIHJlcy5qc29uKHJlc3BvbnNlRm9ybWF0dGVyLnN1Y2Nlc3MoaGVhbHRoLmludGVncmF0aW9ucywgJ0ludGVncmF0aW9ucyBzdGF0dXMnKSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24ocmVzcG9uc2VGb3JtYXR0ZXIuc2VydmVyRXJyb3IoJ0ludGVncmF0aW9ucyByZXRyaWV2YWwgZmFpbGVkJywgZXJyb3IpKTtcbiAgfVxufSk7XG5cbi8qKlxuICogR0VUIC9hcGkvZGFzaGJvYXJkL3BlcmZvcm1hbmNlXG4gKiBQZXJmb3JtYW5jZSBtZXRyaWNzXG4gKi9cbnJvdXRlci5nZXQoJy9wZXJmb3JtYW5jZScsIG9wdGlvbmFsQXV0aCwgKHJlcSwgcmVzKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgaGVhbHRoID0gc3lzdGVtRGFzaGJvYXJkLmdldFN5c3RlbUhlYWx0aCgpO1xuICAgIHJlcy5qc29uKHJlc3BvbnNlRm9ybWF0dGVyLmFuYWx5dGljcyhoZWFsdGgucGVyZm9ybWFuY2UsICdjdXJyZW50JywgJ1BlcmZvcm1hbmNlIG1ldHJpY3MnKSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24ocmVzcG9uc2VGb3JtYXR0ZXIuc2VydmVyRXJyb3IoJ1BlcmZvcm1hbmNlIG1ldHJpY3MgZmFpbGVkJywgZXJyb3IpKTtcbiAgfVxufSk7XG5cbi8qKlxuICogR0VUIC9hcGkvZGFzaGJvYXJkL2FsZXJ0c1xuICogU3lzdGVtIGFsZXJ0c1xuICovXG5yb3V0ZXIuZ2V0KCcvYWxlcnRzJywgcmVxdWlyZUFkbWluLCAocmVxLCByZXMpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBzdW1tYXJ5ID0gc3lzdGVtRGFzaGJvYXJkLmdldERhc2hib2FyZFN1bW1hcnkoKTtcbiAgICByZXMuanNvbihyZXNwb25zZUZvcm1hdHRlci5saXN0KHN1bW1hcnkucmVjZW50QWxlcnRzLCAnUmVjZW50IGFsZXJ0cycpKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbihyZXNwb25zZUZvcm1hdHRlci5zZXJ2ZXJFcnJvcignQWxlcnRzIHJldHJpZXZhbCBmYWlsZWQnLCBlcnJvcikpO1xuICB9XG59KTtcblxuLyoqXG4gKiBHRVQgL2FwaS9kYXNoYm9hcmQvZXZlbnRzXG4gKiBTeXN0ZW0gZXZlbnRzIGxvZ1xuICovXG5yb3V0ZXIuZ2V0KCcvZXZlbnRzJywgcmVxdWlyZUFkbWluLCAocmVxLCByZXMpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBzdW1tYXJ5ID0gc3lzdGVtRGFzaGJvYXJkLmdldERhc2hib2FyZFN1bW1hcnkoKTtcbiAgICByZXMuanNvbihyZXNwb25zZUZvcm1hdHRlci5saXN0KHN1bW1hcnkucmVjZW50RXZlbnRzLCAnUmVjZW50IGV2ZW50cycpKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbihyZXNwb25zZUZvcm1hdHRlci5zZXJ2ZXJFcnJvcignRXZlbnRzIHJldHJpZXZhbCBmYWlsZWQnLCBlcnJvcikpO1xuICB9XG59KTtcblxuLyoqXG4gKiBQT1NUIC9hcGkvZGFzaGJvYXJkL2FsZXJ0XG4gKiBBZGQgY3VzdG9tIGFsZXJ0XG4gKi9cbnJvdXRlci5wb3N0KCcvYWxlcnQnLCByZXF1aXJlQWRtaW4sIChyZXEsIHJlcykgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHsgc2V2ZXJpdHksIG1lc3NhZ2UsIGRldGFpbHMgfSA9IHJlcS5ib2R5O1xuXG4gICAgaWYgKCFzZXZlcml0eSB8fCAhbWVzc2FnZSkge1xuICAgICAgcmV0dXJuIHJlc1xuICAgICAgICAuc3RhdHVzKDQwMClcbiAgICAgICAgLmpzb24ocmVzcG9uc2VGb3JtYXR0ZXIudmFsaWRhdGlvbkVycm9yKFsnc2V2ZXJpdHkgYW5kIG1lc3NhZ2UgYXJlIHJlcXVpcmVkJ10pKTtcbiAgICB9XG5cbiAgICBjb25zdCBhbGVydCA9IHN5c3RlbURhc2hib2FyZC5hZGRBbGVydChzZXZlcml0eSwgbWVzc2FnZSwgZGV0YWlscyk7XG4gICAgcmVzLnN0YXR1cygyMDEpLmpzb24ocmVzcG9uc2VGb3JtYXR0ZXIuY3JlYXRlZChhbGVydCwgJ0FsZXJ0IGNyZWF0ZWQnKSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24ocmVzcG9uc2VGb3JtYXR0ZXIuc2VydmVyRXJyb3IoJ0FsZXJ0IGNyZWF0aW9uIGZhaWxlZCcsIGVycm9yKSk7XG4gIH1cbn0pO1xuXG4vKipcbiAqIEdFVCAvYXBpL2Rhc2hib2FyZC9leHBvcnRcbiAqIEV4cG9ydCBhbGwgbWV0cmljc1xuICovXG5yb3V0ZXIuZ2V0KCcvZXhwb3J0JywgcmVxdWlyZUFkbWluLCAocmVxLCByZXMpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBtZXRyaWNzID0gc3lzdGVtRGFzaGJvYXJkLmV4cG9ydE1ldHJpY3MoKTtcbiAgICByZXMuc2V0SGVhZGVyKCdDb250ZW50LVR5cGUnLCAnYXBwbGljYXRpb24vanNvbicpO1xuICAgIHJlcy5zZXRIZWFkZXIoJ0NvbnRlbnQtRGlzcG9zaXRpb24nLCAnYXR0YWNobWVudDsgZmlsZW5hbWU9bWV0cmljcy5qc29uJyk7XG4gICAgcmVzLmpzb24obWV0cmljcyk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24ocmVzcG9uc2VGb3JtYXR0ZXIuc2VydmVyRXJyb3IoJ0V4cG9ydCBmYWlsZWQnLCBlcnJvcikpO1xuICB9XG59KTtcblxuLyoqXG4gKiBHRVQgL2FwaS9kYXNoYm9hcmQvY29uZmlnXG4gKiBHZXQgc3lzdGVtIGNvbmZpZ3VyYXRpb24gKGFkbWluIG9ubHkpXG4gKi9cbnJvdXRlci5nZXQoJy9jb25maWcnLCByZXF1aXJlQWRtaW4sIChyZXEsIHJlcykgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IGNvbmZpZyA9IHJlcXVpcmUoJy4uL2NvbmZpZy9wcm9kdWN0aW9uJykuZ2V0Q29uZmlnKCk7XG4gICAgY29uc3Qgc2FuaXRpemVkID0ge1xuICAgICAgc2VydmVyOiBjb25maWcuc2VydmVyLFxuICAgICAgZmVhdHVyZXM6IGNvbmZpZy5mZWF0dXJlcyxcbiAgICAgIGRlcGxveW1lbnQ6IGNvbmZpZy5kZXBsb3ltZW50LFxuICAgICAgdmVyc2lvbjogY29uZmlnLmRlcGxveW1lbnQudmVyc2lvbixcbiAgICB9O1xuICAgIHJlcy5qc29uKHJlc3BvbnNlRm9ybWF0dGVyLnN1Y2Nlc3Moc2FuaXRpemVkLCAnU3lzdGVtIGNvbmZpZ3VyYXRpb24nKSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24ocmVzcG9uc2VGb3JtYXR0ZXIuc2VydmVyRXJyb3IoJ0NvbmZpZyByZXRyaWV2YWwgZmFpbGVkJywgZXJyb3IpKTtcbiAgfVxufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gcm91dGVyO1xuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE1BQU1BLE9BQU8sR0FBR0MsT0FBTyxDQUFDLFNBQVMsQ0FBQztBQUNsQyxNQUFNQyxNQUFNLEdBQUdGLE9BQU8sQ0FBQ0csTUFBTSxDQUFDLENBQUM7QUFDL0IsTUFBTUMsZUFBZSxHQUFHSCxPQUFPLENBQUMsNkJBQTZCLENBQUM7QUFDOUQsTUFBTUksaUJBQWlCLEdBQUdKLE9BQU8sQ0FBQywr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