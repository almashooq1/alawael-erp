{"version":3,"names":["express","require","router","Router","executiveAnalyticsService","aiInsightsService","realtimeDashboardService","responseFormatter","requireAuth","requireAdmin","initialize","get","req","res","dashboard","getExecutiveDashboard","aggregatedData","getAggregatedDashboardData","json","success","executive","realtime","timestamp","Date","error","status","serverError","filters","category","query","owner","frequency","kpis","getAllKPIs","list","total","length","onTrack","filter","k","atRisk","critical","kpiId","params","kpiData","getKPIDetails","notFound","post","name","name_ar","target","current","unit","description","body","validation","now","kpi","id","trend","changePercent","createdAt","updatedAt","history","value","alerts","insights","set","created","formatKPIResponse","put","result","updateKPIValue","parseFloat","Array","from","values","aiSummary","generateAISummary","briefing","generateExecutiveBriefing","generateInsights","analyzeTrend","recommendations","generateRecommendations","anomalies","detectAnomalies","forecast","predictFutureValue","departments","getDepartmentComparison","period","report","generateExecutiveReport","realtimeData","metrics","getDataQualityMetrics","stats","getConnectionStats","results","refreshAllData","isDefault","isPublic","refreshInterval","createCustomDashboard","user","email","dashboardId","getCustomDashboard","widget","addWidgetToDashboard","module","exports"],"sources":["executive-dashboard.js"],"sourcesContent":["/**\r\n * Executive Dashboard Routes\r\n * Advanced KPI monitoring, analytics, and AI insights\r\n * Phase: Executive Intelligence\r\n */\r\n\r\nconst express = require('express');\r\nconst router = express.Router();\r\nconst executiveAnalyticsService = require('../services/executiveAnalyticsService');\r\nconst aiInsightsService = require('../services/aiInsightsService');\r\nconst realtimeDashboardService = require('../services/realtimeDashboardService');\r\nconst responseFormatter = require('../services/responseFormatter');\r\nconst { requireAuth, requireAdmin } = require('../middleware/auth');\r\n\r\n/**\r\n * Initialize services on startup\r\n */\r\n(async () => {\r\n  await executiveAnalyticsService.initialize();\r\n  await realtimeDashboardService.initialize();\r\n})();\r\n\r\n/**\r\n * GET /api/executive-dashboard\r\n * Get executive dashboard overview\r\n */\r\nrouter.get('/', requireAuth, (req, res) => {\r\n  try {\r\n    const dashboard = executiveAnalyticsService.getExecutiveDashboard();\r\n    const aggregatedData = realtimeDashboardService.getAggregatedDashboardData();\r\n\r\n    res.json(responseFormatter.success({\r\n      executive: dashboard,\r\n      realtime: aggregatedData,\r\n      timestamp: new Date(),\r\n    }, 'Executive dashboard data'));\r\n  } catch (error) {\r\n    res.status(500).json(responseFormatter.serverError('Failed to fetch executive dashboard', error));\r\n  }\r\n});\r\n\r\n/**\r\n * GET /api/executive-dashboard/kpis\r\n * Get all KPIs\r\n */\r\nrouter.get('/kpis', requireAuth, (req, res) => {\r\n  try {\r\n    const filters = {\r\n      category: req.query.category,\r\n      owner: req.query.owner,\r\n      frequency: req.query.frequency,\r\n    };\r\n\r\n    const kpis = executiveAnalyticsService.getAllKPIs(filters);\r\n    \r\n    res.json(responseFormatter.list(kpis, 'KPIs', {\r\n      total: kpis.length,\r\n      onTrack: kpis.filter(k => k.status === 'on_track').length,\r\n      atRisk: kpis.filter(k => k.status === 'at_risk').length,\r\n      critical: kpis.filter(k => k.status === 'critical').length,\r\n    }));\r\n  } catch (error) {\r\n    res.status(500).json(responseFormatter.serverError('Failed to fetch KPIs', error));\r\n  }\r\n});\r\n\r\n/**\r\n * GET /api/executive-dashboard/kpis/:kpiId\r\n * Get KPI details with analytics\r\n */\r\nrouter.get('/kpis/:kpiId', requireAuth, (req, res) => {\r\n  try {\r\n    const { kpiId } = req.params;\r\n    const kpiData = executiveAnalyticsService.getKPIDetails(kpiId);\r\n\r\n    if (!kpiData) {\r\n      return res.status(404).json(responseFormatter.notFound(`KPI ${kpiId}`));\r\n    }\r\n\r\n    res.json(responseFormatter.success(kpiData, `KPI ${kpiId} details`));\r\n  } catch (error) {\r\n    res.status(500).json(responseFormatter.serverError('Failed to fetch KPI details', error));\r\n  }\r\n});\r\n\r\n/**\r\n * POST /api/executive-dashboard/kpis\r\n * Create new KPI\r\n */\r\nrouter.post('/kpis', requireAdmin, (req, res) => {\r\n  try {\r\n    const {\r\n      name,\r\n      name_ar,\r\n      category,\r\n      target,\r\n      current,\r\n      unit,\r\n      frequency,\r\n      owner,\r\n      description,\r\n    } = req.body;\r\n\r\n    // Validation\r\n    if (!name || !category || !target || !unit) {\r\n      return res.status(400).json(responseFormatter.validation('Missing required KPI fields'));\r\n    }\r\n\r\n    const kpiId = `kpi_${Date.now()}`;\r\n    const kpi = {\r\n      id: kpiId,\r\n      name,\r\n      name_ar,\r\n      category,\r\n      target,\r\n      current: current || 0,\r\n      unit,\r\n      frequency: frequency || 'monthly',\r\n      owner: owner || 'Admin',\r\n      description,\r\n      trend: 'stable',\r\n      changePercent: 0,\r\n      createdAt: new Date(),\r\n      updatedAt: new Date(),\r\n      history: [{\r\n        timestamp: new Date(),\r\n        value: current || 0,\r\n        target,\r\n      }],\r\n      alerts: [],\r\n      insights: [],\r\n    };\r\n\r\n    executiveAnalyticsService.kpis.set(kpiId, kpi);\r\n\r\n    res.status(201).json(responseFormatter.created(\r\n      executiveAnalyticsService.formatKPIResponse(kpi),\r\n      'KPI created successfully'\r\n    ));\r\n  } catch (error) {\r\n    res.status(500).json(responseFormatter.serverError('Failed to create KPI', error));\r\n  }\r\n});\r\n\r\n/**\r\n * PUT /api/executive-dashboard/kpis/:kpiId\r\n * Update KPI value\r\n */\r\nrouter.put('/kpis/:kpiId', requireAuth, (req, res) => {\r\n  try {\r\n    const { kpiId } = req.params;\r\n    const { value, timestamp } = req.body;\r\n\r\n    if (!value && value !== 0) {\r\n      return res.status(400).json(responseFormatter.validation('Value is required'));\r\n    }\r\n\r\n    const result = executiveAnalyticsService.updateKPIValue(\r\n      kpiId,\r\n      parseFloat(value),\r\n      timestamp ? new Date(timestamp) : new Date()\r\n    );\r\n\r\n    if (!result.success) {\r\n      return res.status(404).json(responseFormatter.notFound(`KPI ${kpiId}`));\r\n    }\r\n\r\n    res.json(responseFormatter.success(result.kpi, 'KPI updated successfully'));\r\n  } catch (error) {\r\n    res.status(500).json(responseFormatter.serverError('Failed to update KPI', error));\r\n  }\r\n});\r\n\r\n/**\r\n * GET /api/executive-dashboard/ai-insights\r\n * Get AI-powered insights for all KPIs\r\n */\r\nrouter.get('/ai-insights', requireAuth, (req, res) => {\r\n  try {\r\n    const kpis = Array.from(executiveAnalyticsService.kpis.values());\r\n    const aiSummary = aiInsightsService.generateAISummary(kpis);\r\n\r\n    res.json(responseFormatter.success(aiSummary, 'AI insights generated'));\r\n  } catch (error) {\r\n    res.status(500).json(responseFormatter.serverError('Failed to generate AI insights', error));\r\n  }\r\n});\r\n\r\n/**\r\n * GET /api/executive-dashboard/ai-briefing\r\n * Get AI-generated executive briefing\r\n */\r\nrouter.get('/ai-briefing', requireAuth, (req, res) => {\r\n  try {\r\n    const kpis = Array.from(executiveAnalyticsService.kpis.values());\r\n    const briefing = aiInsightsService.generateExecutiveBriefing(kpis);\r\n\r\n    res.json(responseFormatter.success(briefing, 'Executive briefing generated'));\r\n  } catch (error) {\r\n    res.status(500).json(responseFormatter.serverError('Failed to generate briefing', error));\r\n  }\r\n});\r\n\r\n/**\r\n * GET /api/executive-dashboard/kpis/:kpiId/insights\r\n * Get AI insights for specific KPI\r\n */\r\nrouter.get('/kpis/:kpiId/insights', requireAuth, (req, res) => {\r\n  try {\r\n    const { kpiId } = req.params;\r\n    const kpi = executiveAnalyticsService.kpis.get(kpiId);\r\n\r\n    if (!kpi) {\r\n      return res.status(404).json(responseFormatter.notFound(`KPI ${kpiId}`));\r\n    }\r\n\r\n    const insights = aiInsightsService.generateInsights(kpiId, kpi, kpi.history || []);\r\n    const trend = aiInsightsService.analyzeTrend(kpi.history || []);\r\n    const recommendations = aiInsightsService.generateRecommendations(kpi, insights, trend);\r\n\r\n    res.json(responseFormatter.success({\r\n      kpi: executiveAnalyticsService.formatKPIResponse(kpi),\r\n      insights,\r\n      trend,\r\n      recommendations,\r\n      anomalies: aiInsightsService.detectAnomalies(kpi, kpi.history || []),\r\n      forecast: aiInsightsService.predictFutureValue(kpi.history),\r\n    }, 'AI insights for KPI'));\r\n  } catch (error) {\r\n    res.status(500).json(responseFormatter.serverError('Failed to generate insights', error));\r\n  }\r\n});\r\n\r\n/**\r\n * GET /api/executive-dashboard/departments\r\n * Get department comparison\r\n */\r\nrouter.get('/departments', requireAuth, (req, res) => {\r\n  try {\r\n    const departments = executiveAnalyticsService.getDepartmentComparison();\r\n\r\n    res.json(responseFormatter.list(departments, 'Department performance'));\r\n  } catch (error) {\r\n    res.status(500).json(responseFormatter.serverError('Failed to fetch department comparison', error));\r\n  }\r\n});\r\n\r\n/**\r\n * GET /api/executive-dashboard/report\r\n * Generate executive report\r\n */\r\nrouter.get('/report', requireAuth, (req, res) => {\r\n  try {\r\n    const { period } = req.query;\r\n    const report = executiveAnalyticsService.generateExecutiveReport(period || 'monthly');\r\n\r\n    res.json(responseFormatter.success(report, 'Executive report generated'));\r\n  } catch (error) {\r\n    res.status(500).json(responseFormatter.serverError('Failed to generate report', error));\r\n  }\r\n});\r\n\r\n/**\r\n * GET /api/executive-dashboard/realtime\r\n * Get real-time aggregated data\r\n */\r\nrouter.get('/realtime', requireAuth, (req, res) => {\r\n  try {\r\n    const realtimeData = realtimeDashboardService.getAggregatedDashboardData();\r\n\r\n    res.json(responseFormatter.success(realtimeData, 'Real-time dashboard data'));\r\n  } catch (error) {\r\n    res.status(500).json(responseFormatter.serverError('Failed to fetch real-time data', error));\r\n  }\r\n});\r\n\r\n/**\r\n * GET /api/executive-dashboard/data-quality\r\n * Get data quality metrics\r\n */\r\nrouter.get('/data-quality', requireAuth, (req, res) => {\r\n  try {\r\n    const metrics = realtimeDashboardService.getDataQualityMetrics();\r\n\r\n    res.json(responseFormatter.success(metrics, 'Data quality metrics'));\r\n  } catch (error) {\r\n    res.status(500).json(responseFormatter.serverError('Failed to fetch data quality metrics', error));\r\n  }\r\n});\r\n\r\n/**\r\n * GET /api/executive-dashboard/connection-stats\r\n * Get connection statistics\r\n */\r\nrouter.get('/connection-stats', requireAuth, (req, res) => {\r\n  try {\r\n    const stats = realtimeDashboardService.getConnectionStats();\r\n\r\n    res.json(responseFormatter.success(stats, 'Connection statistics'));\r\n  } catch (error) {\r\n    res.status(500).json(responseFormatter.serverError('Failed to fetch connection stats', error));\r\n  }\r\n});\r\n\r\n/**\r\n * POST /api/executive-dashboard/refresh\r\n * Force refresh all data\r\n */\r\nrouter.post('/refresh', requireAuth, async (req, res) => {\r\n  try {\r\n    const results = await realtimeDashboardService.refreshAllData();\r\n\r\n    res.json(responseFormatter.success(results, 'Data refresh completed'));\r\n  } catch (error) {\r\n    res.status(500).json(responseFormatter.serverError('Failed to refresh data', error));\r\n  }\r\n});\r\n\r\n/**\r\n * POST /api/executive-dashboard/dashboards\r\n * Create custom dashboard\r\n */\r\nrouter.post('/dashboards', requireAuth, (req, res) => {\r\n  try {\r\n    const { name, name_ar, description, isDefault, isPublic, refreshInterval } = req.body;\r\n\r\n    if (!name) {\r\n      return res.status(400).json(responseFormatter.validation('Dashboard name is required'));\r\n    }\r\n\r\n    const dashboard = executiveAnalyticsService.createCustomDashboard({\r\n      name,\r\n      name_ar,\r\n      description,\r\n      owner: req.user?.email || 'system',\r\n      isDefault: isDefault || false,\r\n      isPublic: isPublic || false,\r\n      refreshInterval: refreshInterval || 300000,\r\n    });\r\n\r\n    res.status(201).json(responseFormatter.created(dashboard, 'Dashboard created successfully'));\r\n  } catch (error) {\r\n    res.status(500).json(responseFormatter.serverError('Failed to create dashboard', error));\r\n  }\r\n});\r\n\r\n/**\r\n * GET /api/executive-dashboard/dashboards/:dashboardId\r\n * Get custom dashboard\r\n */\r\nrouter.get('/dashboards/:dashboardId', requireAuth, (req, res) => {\r\n  try {\r\n    const { dashboardId } = req.params;\r\n    const dashboard = executiveAnalyticsService.getCustomDashboard(dashboardId);\r\n\r\n    if (!dashboard) {\r\n      return res.status(404).json(responseFormatter.notFound(`Dashboard ${dashboardId}`));\r\n    }\r\n\r\n    res.json(responseFormatter.success(dashboard, 'Dashboard data'));\r\n  } catch (error) {\r\n    res.status(500).json(responseFormatter.serverError('Failed to fetch dashboard', error));\r\n  }\r\n});\r\n\r\n/**\r\n * POST /api/executive-dashboard/dashboards/:dashboardId/widgets\r\n * Add widget to dashboard\r\n */\r\nrouter.post('/dashboards/:dashboardId/widgets', requireAuth, (req, res) => {\r\n  try {\r\n    const { dashboardId } = req.params;\r\n    const widget = req.body;\r\n\r\n    const result = executiveAnalyticsService.addWidgetToDashboard(dashboardId, widget);\r\n\r\n    if (!result.success) {\r\n      return res.status(404).json(responseFormatter.notFound(`Dashboard ${dashboardId}`));\r\n    }\r\n\r\n    res.status(201).json(responseFormatter.created(result.widget, 'Widget added successfully'));\r\n  } catch (error) {\r\n    res.status(500).json(responseFormatter.serverError('Failed to add widget', error));\r\n  }\r\n});\r\n\r\nmodule.exports = router;\r\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;;AAEA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAS,CAAC;AAClC,MAAMC,MAAM,GAAGF,OAAO,CAACG,MAAM,CAAC,CAAC;AAC/B,MAAMC,yBAAyB,GAAGH,OAAO,CAAC,uCAAuC,CAAC;AAClF,MAAMI,iBAAiB,GAAGJ,OAAO,CAAC,+BAA+B,CAAC;AAClE,MAAMK,wBAAwB,GAAGL,OAAO,CAAC,sCAAsC,CAAC;AAChF,MAAMM,iBAAiB,GAAGN,OAAO,CAAC,+BAA+B,CAAC;AAClE,MAAM;EAAEO,WAAW;EAAEC;AAAa,CAAC,GAAGR,OAAO,CAAC,oBAAoB,CAAC;;AAEnE;AACA;AACA;AACA,CAAC,YAAY;EACX,MAAMG,yBAAyB,CAACM,UAAU,CAAC,CAAC;EAC5C,MAAMJ,wBAAwB,CAACI,UAAU,CAAC,CAAC;AAC7C,CAAC,EAAE,CAAC;;AAEJ;AACA;AACA;AACA;AACAR,MAAM,CAACS,GAAG,CAAC,GAAG,EAAEH,WAAW,EAAE,CAACI,GAAG,EAAEC,GAAG,KAAK;EACzC,IAAI;IACF,MAAMC,SAAS,GAAGV,yBAAyB,CAACW,qBAAqB,CAAC,CAAC;IACnE,MAAMC,cAAc,GAAGV,wBAAwB,CAACW,0BAA0B,CAAC,CAAC;IAE5EJ,GAAG,CAACK,IAAI,CAACX,iBAAiB,CAACY,OAAO,CAAC;MACjCC,SAAS,EAAEN,SAAS;MACpBO,QAAQ,EAAEL,cAAc;MACxBM,SAAS,EAAE,IAAIC,IAAI,CAAC;IACtB,CAAC,EAAE,0BAA0B,CAAC,CAAC;EACjC,CAAC,CAAC,OAAOC,KAAK,EAAE;IACdX,GAAG,CAACY,MAAM,CAAC,GAAG,CAAC,CAACP,IAAI,CAACX,iBAAiB,CAACmB,WAAW,CAAC,qCAAqC,EAAEF,KAAK,CAAC,CAAC;EACnG;AACF,CAAC,CAAC;;AAEF;AACA;AACA;AACA;AACAtB,MAAM,CAACS,GAAG,CAAC,OAAO,EAAEH,WAAW,EAAE,CAACI,GAAG,EAAEC,GAAG,KAAK;EAC7C,IAAI;IACF,MAAMc,OAAO,GAAG;MACdC,QAAQ,EAAEhB,GAAG,CAACiB,KAAK,CAACD,QAAQ;MAC5BE,KAAK,EAAElB,GAAG,CAACiB,KAAK,CAACC,KAAK;MACtBC,SAAS,EAAEnB,GAAG,CAACiB,KAAK,CAACE;IACvB,CAAC;IAED,MAAMC,IAAI,GAAG5B,yBAAyB,CAAC6B,UAAU,CAACN,OAAO,CAAC;IAE1Dd,GAAG,CAACK,IAAI,CAACX,iBAAiB,CAAC2B,IAAI,CAACF,IAAI,EAAE,MAAM,EAAE;MAC5CG,KAAK,EAAEH,IAAI,CAACI,MAAM;MAClBC,OAAO,EAAEL,IAAI,CAACM,MAAM,CAACC,CAAC,IAAIA,CAAC,CAACd,MAAM,KAAK,UAAU,CAAC,CAACW,MAAM;MACzDI,MAAM,EAAER,IAAI,CAACM,MAAM,CAACC,CAAC,IAAIA,CAAC,CAACd,MAAM,KAAK,SAAS,CAAC,CAACW,MAAM;MACvDK,QAAQ,EAAET,IAAI,CAACM,MAAM,CAACC,CAAC,IAAIA,CAAC,CAACd,MAAM,KAAK,UAAU,CAAC,CAACW;IACtD,CAAC,CAAC,CAAC;EACL,CAAC,CAAC,OAAOZ,KAAK,EAAE;IACdX,GAAG,CAACY,MAAM,CAAC,GAAG,CAAC,CAACP,IAAI,CAACX,iBAAiB,CAACmB,WAAW,CAAC,sBAAsB,EAAEF,KAAK,CAAC,CAAC;EACpF;AACF,CAAC,CAAC;;AAEF;AACA;AACA;AACA;AACAtB,MAAM,CAACS,GAAG,CAAC,cAAc,EAAEH,WAAW,EAAE,CAACI,GAAG,EAAEC,GAAG,KAAK;EACpD,IAAI;IACF,MAAM;MAAE6B;IAAM,CAAC,GAAG9B,GAAG,CAAC+B,MAAM;IAC5B,MAAMC,OAAO,GAAGxC,yBAAyB,CAACyC,aAAa,CAACH,KAAK,CAAC;IAE9D,IAAI,CAACE,OAAO,EAAE;MACZ,OAAO/B,GAAG,CAACY,MAAM,CAAC,GAAG,CAAC,CAACP,IAAI,CAACX,iBAAiB,CAACuC,QAAQ,CAAC,OAAOJ,KAAK,EAAE,CAAC,CAAC;IACzE;IAEA7B,GAAG,CAACK,IAAI,CAACX,iBAAiB,CAACY,OAAO,CAACyB,OAAO,EAAE,OAAOF,KAAK,UAAU,CAAC,CAAC;EACtE,CAAC,CAAC,OAAOlB,KAAK,EAAE;IACdX,GAAG,CAACY,MAAM,CAAC,GAAG,CAAC,CAACP,IAAI,CAACX,iBAAiB,CAACmB,WAAW,CAAC,6BAA6B,EAAEF,KAAK,CAAC,CAAC;EAC3F;AACF,CAAC,CAAC;;AAEF;AACA;AACA;AACA;AACAtB,MAAM,CAAC6C,IAAI,CAAC,OAAO,EAAEtC,YAAY,EAAE,CAACG,GAAG,EAAEC,GAAG,KAAK;EAC/C,IAAI;IACF,MAAM;MACJmC,IAAI;MACJC,OAAO;MACPrB,QAAQ;MACRsB,MAAM;MACNC,OAAO;MACPC,IAAI;MACJrB,SAAS;MACTD,KAAK;MACLuB;IACF,CAAC,GAAGzC,GAAG,CAAC0C,IAAI;;IAEZ;IACA,IAAI,CAACN,IAAI,IAAI,CAACpB,QAAQ,IAAI,CAACsB,MAAM,IAAI,CAACE,IAAI,EAAE;MAC1C,OAAOvC,GAAG,CAACY,MAAM,CAAC,GAAG,CAAC,CAACP,IAAI,CAACX,iBAAiB,CAACgD,UAAU,CAAC,6BAA6B,CAAC,CAAC;IAC1F;IAEA,MAAMb,KAAK,GAAG,OAAOnB,IAAI,CAACiC,GAAG,CAAC,CAAC,EAAE;IACjC,MAAMC,GAAG,GAAG;MACVC,EAAE,EAAEhB,KAAK;MACTM,IAAI;MACJC,OAAO;MACPrB,QAAQ;MACRsB,MAAM;MACNC,OAAO,EAAEA,OAAO,IAAI,CAAC;MACrBC,IAAI;MACJrB,SAAS,EAAEA,SAAS,IAAI,SAAS;MACjCD,KAAK,EAAEA,KAAK,IAAI,OAAO;MACvBuB,WAAW;MACXM,KAAK,EAAE,QAAQ;MACfC,aAAa,EAAE,CAAC;MAChBC,SAAS,EAAE,IAAItC,IAAI,CAAC,CAAC;MACrBuC,SAAS,EAAE,IAAIvC,IAAI,CAAC,CAAC;MACrBwC,OAAO,EAAE,CAAC;QACRzC,SAAS,EAAE,IAAIC,IAAI,CAAC,CAAC;QACrByC,KAAK,EAAEb,OAAO,IAAI,CAAC;QACnBD;MACF,CAAC,CAAC;MACFe,MAAM,EAAE,EAAE;MACVC,QAAQ,EAAE;IACZ,CAAC;IAED9D,yBAAyB,CAAC4B,IAAI,CAACmC,GAAG,CAACzB,KAAK,EAAEe,GAAG,CAAC;IAE9C5C,GAAG,CAACY,MAAM,CAAC,GAAG,CAAC,CAACP,IAAI,CAACX,iBAAiB,CAAC6D,OAAO,CAC5ChE,yBAAyB,CAACiE,iBAAiB,CAACZ,GAAG,CAAC,EAChD,0BACF,CAAC,CAAC;EACJ,CAAC,CAAC,OAAOjC,KAAK,EAAE;IACdX,GAAG,CAACY,MAAM,CAAC,GAAG,CAAC,CAACP,IAAI,CAACX,iBAAiB,CAACmB,WAAW,CAAC,sBAAsB,EAAEF,KAAK,CAAC,CAAC;EACpF;AACF,CAAC,CAAC;;AAEF;AACA;AACA;AACA;AACAtB,MAAM,CAACoE,GAAG,CAAC,cAAc,EAAE9D,WAAW,EAAE,CAACI,GAAG,EAAEC,GAAG,KAAK;EACpD,IAAI;IACF,MAAM;MAAE6B;IAAM,CAAC,GAAG9B,GAAG,CAAC+B,MAAM;IAC5B,MAAM;MAAEqB,KAAK;MAAE1C;IAAU,CAAC,GAAGV,GAAG,CAAC0C,IAAI;IAErC,IAAI,CAACU,KAAK,IAAIA,KAAK,KAAK,CAAC,EAAE;MACzB,OAAOnD,GAAG,CAACY,MAAM,CAAC,GAAG,CAAC,CAACP,IAAI,CAACX,iBAAiB,CAACgD,UAAU,CAAC,mBAAmB,CAAC,CAAC;IAChF;IAEA,MAAMgB,MAAM,GAAGnE,yBAAyB,CAACoE,cAAc,CACrD9B,KAAK,EACL+B,UAAU,CAACT,KAAK,CAAC,EACjB1C,SAAS,GAAG,IAAIC,IAAI,CAACD,SAAS,CAAC,GAAG,IAAIC,IAAI,CAAC,CAC7C,CAAC;IAED,IAAI,CAACgD,MAAM,CAACpD,OAAO,EAAE;MACnB,OAAON,GAAG,CAACY,MAAM,CAAC,GAAG,CAAC,CAACP,IAAI,CAACX,iBAAiB,CAACuC,QAAQ,CAAC,OAAOJ,KAAK,EAAE,CAAC,CAAC;IACzE;IAEA7B,GAAG,CAACK,IAAI,CAACX,iBAAiB,CAACY,OAAO,CAACoD,MAAM,CAACd,GAAG,EAAE,0BAA0B,CAAC,CAAC;EAC7E,CAAC,CAAC,OAAOjC,KAAK,EAAE;IACdX,GAAG,CAACY,MAAM,CAAC,GAAG,CAAC,CAACP,IAAI,CAACX,iBAAiB,CAACmB,WAAW,CAAC,sBAAsB,EAAEF,KAAK,CAAC,CAAC;EACpF;AACF,CAAC,CAAC;;AAEF;AACA;AACA;AACA;AACAtB,MAAM,CAACS,GAAG,CAAC,cAAc,EAAEH,WAAW,EAAE,CAACI,GAAG,EAAEC,GAAG,KAAK;EACpD,IAAI;IACF,MAAMmB,IAAI,GAAG0C,KAAK,CAACC,IAAI,CAACvE,yBAAyB,CAAC4B,IAAI,CAAC4C,MAAM,CAAC,CAAC,CAAC;IAChE,MAAMC,SAAS,GAAGxE,iBAAiB,CAACyE,iBAAiB,CAAC9C,IAAI,CAAC;IAE3DnB,GAAG,CAACK,IAAI,CAACX,iBAAiB,CAACY,OAAO,CAAC0D,SAAS,EAAE,uBAAuB,CAAC,CAAC;EACzE,CAAC,CAAC,OAAOrD,KAAK,EAAE;IACdX,GAAG,CAACY,MAAM,CAAC,GAAG,CAAC,CAACP,IAAI,CAACX,iBAAiB,CAACmB,WAAW,CAAC,gCAAgC,EAAEF,KAAK,CAAC,CAAC;EAC9F;AACF,CAAC,CAAC;;AAEF;AACA;AACA;AACA;AACAtB,MAAM,CAACS,GAAG,CAAC,cAAc,EAAEH,WAAW,EAAE,CAACI,GAAG,EAAEC,GAAG,KAAK;EACpD,IAAI;IACF,MAAMmB,IAAI,GAAG0C,KAAK,CAACC,IAAI,CAACvE,yBAAyB,CAAC4B,IAAI,CAAC4C,MAAM,CAAC,CAAC,CAAC;IAChE,MAAMG,QAAQ,GAAG1E,iBAAiB,CAAC2E,yBAAyB,CAAChD,IAAI,CAAC;IAElEnB,GAAG,CAACK,IAAI,CAACX,iBAAiB,CAACY,OAAO,CAAC4D,QAAQ,EAAE,8BAA8B,CAAC,CAAC;EAC/E,CAAC,CAAC,OAAOvD,KAAK,EAAE;IACdX,GAAG,CAACY,MAAM,CAAC,GAAG,CAAC,CAACP,IAAI,CAACX,iBAAiB,CAACmB,WAAW,CAAC,6BAA6B,EAAEF,KAAK,CAAC,CAAC;EAC3F;AACF,CAAC,CAAC;;AAEF;AACA;AACA;AACA;AACAtB,MAAM,CAACS,GAAG,CAAC,uBAAuB,EAAEH,WAAW,EAAE,CAACI,GAAG,EAAEC,GAAG,KAAK;EAC7D,IAAI;IACF,MAAM;MAAE6B;IAAM,CAAC,GAAG9B,GAAG,CAAC+B,MAAM;IAC5B,MAAMc,GAAG,GAAGrD,yBAAyB,CAAC4B,IAAI,CAACrB,GAAG,CAAC+B,KAAK,CAAC;IAErD,IAAI,CAACe,GAAG,EAAE;MACR,OAAO5C,GAAG,CAACY,MAAM,CAAC,GAAG,CAAC,CAACP,IAAI,CAACX,iBAAiB,CAACuC,QAAQ,CAAC,OAAOJ,KAAK,EAAE,CAAC,CAAC;IACzE;IAEA,MAAMwB,QAAQ,GAAG7D,iBAAiB,CAAC4E,gBAAgB,CAACvC,KAAK,EAAEe,GAAG,EAAEA,GAAG,CAACM,OAAO,IAAI,EAAE,CAAC;IAClF,MAAMJ,KAAK,GAAGtD,iBAAiB,CAAC6E,YAAY,CAACzB,GAAG,CAACM,OAAO,IAAI,EAAE,CAAC;IAC/D,MAAMoB,eAAe,GAAG9E,iBAAiB,CAAC+E,uBAAuB,CAAC3B,GAAG,EAAES,QAAQ,EAAEP,KAAK,CAAC;IAEvF9C,GAAG,CAACK,IAAI,CAACX,iBAAiB,CAACY,OAAO,CAAC;MACjCsC,GAAG,EAAErD,yBAAyB,CAACiE,iBAAiB,CAACZ,GAAG,CAAC;MACrDS,QAAQ;MACRP,KAAK;MACLwB,eAAe;MACfE,SAAS,EAAEhF,iBAAiB,CAACiF,eAAe,CAAC7B,GAAG,EAAEA,GAAG,CAACM,OAAO,IAAI,EAAE,CAAC;MACpEwB,QAAQ,EAAElF,iBAAiB,CAACmF,kBAAkB,CAAC/B,GAAG,CAACM,OAAO;IAC5D,CAAC,EAAE,qBAAqB,CAAC,CAAC;EAC5B,CAAC,CAAC,OAAOvC,KAAK,EAAE;IACdX,GAAG,CAACY,MAAM,CAAC,GAAG,CAAC,CAACP,IAAI,CAACX,iBAAiB,CAACmB,WAAW,CAAC,6BAA6B,EAAEF,KAAK,CAAC,CAAC;EAC3F;AACF,CAAC,CAAC;;AAEF;AACA;AACA;AACA;AACAtB,MAAM,CAACS,GAAG,CAAC,cAAc,EAAEH,WAAW,EAAE,CAACI,GAAG,EAAEC,GAAG,KAAK;EACpD,IAAI;IACF,MAAM4E,WAAW,GAAGrF,yBAAyB,CAACsF,uBAAuB,CAAC,CAAC;IAEvE7E,GAAG,CAACK,IAAI,CAACX,iBAAiB,CAAC2B,IAAI,CAACuD,WAAW,EAAE,wBAAwB,CAAC,CAAC;EACzE,CAAC,CAAC,OAAOjE,KAAK,EAAE;IACdX,GAAG,CAACY,MAAM,CAAC,GAAG,CAAC,CAACP,IAAI,CAACX,iBAAiB,CAACmB,WAAW,CAAC,uCAAuC,EAAEF,KAAK,CAAC,CAAC;EACrG;AACF,CAAC,CAAC;;AAEF;AACA;AACA;AACA;AACAtB,MAAM,CAACS,GAAG,CAAC,SAAS,EAAEH,WAAW,EAAE,CAACI,GAAG,EAAEC,GAAG,KAAK;EAC/C,IAAI;IACF,MAAM;MAAE8E;IAAO,CAAC,GAAG/E,GAAG,CAACiB,KAAK;IAC5B,MAAM+D,MAAM,GAAGxF,yBAAyB,CAACyF,uBAAuB,CAACF,MAAM,IAAI,SAAS,CAAC;IAErF9E,GAAG,CAACK,IAAI,CAACX,iBAAiB,CAACY,OAAO,CAACyE,MAAM,EAAE,4BAA4B,CAAC,CAAC;EAC3E,CAAC,CAAC,OAAOpE,KAAK,EAAE;IACdX,GAAG,CAACY,MAAM,CAAC,GAAG,CAAC,CAACP,IAAI,CAACX,iBAAiB,CAACmB,WAAW,CAAC,2BAA2B,EAAEF,KAAK,CAAC,CAAC;EACzF;AACF,CAAC,CAAC;;AAEF;AACA;AACA;AACA;AACAtB,MAAM,CAACS,GAAG,CAAC,WAAW,EAAEH,WAAW,EAAE,CAACI,GAAG,EAAEC,GAAG,KAAK;EACjD,IAAI;IACF,MAAMiF,YAAY,GAAGxF,wBAAwB,CAACW,0BAA0B,CAAC,CAAC;IAE1EJ,GAAG,CAACK,IAAI,CAACX,iBAAiB,CAACY,OAAO,CAAC2E,YAAY,EAAE,0BAA0B,CAAC,CAAC;EAC/E,CAAC,CAAC,OAAOtE,KAAK,EAAE;IACdX,GAAG,CAACY,MAAM,CAAC,GAAG,CAAC,CAACP,IAAI,CAACX,iBAAiB,CAACmB,WAAW,CAAC,gCAAgC,EAAEF,KAAK,CAAC,CAAC;EAC9F;AACF,CAAC,CAAC;;AAEF;AACA;AACA;AACA;AACAtB,MAAM,CAACS,GAAG,CAAC,eAAe,EAAEH,WAAW,EAAE,CAACI,GAAG,EAAEC,GAAG,KAAK;EACrD,IAAI;IACF,MAAMkF,OAAO,GAAGzF,wBAAwB,CAAC0F,qBAAqB,CAAC,CAAC;IAEhEnF,GAAG,CAACK,IAAI,CAACX,iBAAiB,CAACY,OAAO,CAAC4E,OAAO,EAAE,sBAAsB,CAAC,CAAC;EACtE,CAAC,CAAC,OAAOvE,KAAK,EAAE;IACdX,GAAG,CAACY,MAAM,CAAC,GAAG,CAAC,CAACP,IAAI,CAACX,iBAAiB,CAACmB,WAAW,CAAC,sCAAsC,EAAEF,KAAK,CAAC,CAAC;EACpG;AACF,CAAC,CAAC;;AAEF;AACA;AACA;AACA;AACAtB,MAAM,CAACS,GAAG,CAAC,mBAAmB,EAAEH,WAAW,EAAE,CAACI,GAAG,EAAEC,GAAG,KAAK;EACzD,IAAI;IACF,MAAMoF,KAAK,GAAG3F,wBAAwB,CAAC4F,kBAAkB,CAAC,CAAC;IAE3DrF,GAAG,CAACK,IAAI,CAACX,iBAAiB,CAACY,OAAO,CAAC8E,KAAK,EAAE,uBAAuB,CAAC,CAAC;EACrE,CAAC,CAAC,OAAOzE,KAAK,EAAE;IACdX,GAAG,CAACY,MAAM,CAAC,GAAG,CAAC,CAACP,IAAI,CAACX,iBAAiB,CAACmB,WAAW,CAAC,kCAAkC,EAAEF,KAAK,CAAC,CAAC;EAChG;AACF,CAAC,CAAC;;AAEF;AACA;AACA;AACA;AACAtB,MAAM,CAAC6C,IAAI,CAAC,UAAU,EAAEvC,WAAW,EAAE,OAAOI,GAAG,EAAEC,GAAG,KAAK;EACvD,IAAI;IACF,MAAMsF,OAAO,GAAG,MAAM7F,wBAAwB,CAAC8F,cAAc,CAAC,CAAC;IAE/DvF,GAAG,CAACK,IAAI,CAACX,iBAAiB,CAACY,OAAO,CAACgF,OAAO,EAAE,wBAAwB,CAAC,CAAC;EACxE,CAAC,CAAC,OAAO3E,KAAK,EAAE;IACdX,GAAG,CAACY,MAAM,CAAC,GAAG,CAAC,CAACP,IAAI,CAACX,iBAAiB,CAACmB,WAAW,CAAC,wBAAwB,EAAEF,KAAK,CAAC,CAAC;EACtF;AACF,CAAC,CAAC;;AAEF;AACA;AACA;AACA;AACAtB,MAAM,CAAC6C,IAAI,CAAC,aAAa,EAAEvC,WAAW,EAAE,CAACI,GAAG,EAAEC,GAAG,KAAK;EACpD,IAAI;IACF,MAAM;MAAEmC,IAAI;MAAEC,OAAO;MAAEI,WAAW;MAAEgD,SAAS;MAAEC,QAAQ;MAAEC;IAAgB,CAAC,GAAG3F,GAAG,CAAC0C,IAAI;IAErF,IAAI,CAACN,IAAI,EAAE;MACT,OAAOnC,GAAG,CAACY,MAAM,CAAC,GAAG,CAAC,CAACP,IAAI,CAACX,iBAAiB,CAACgD,UAAU,CAAC,4BAA4B,CAAC,CAAC;IACzF;IAEA,MAAMzC,SAAS,GAAGV,yBAAyB,CAACoG,qBAAqB,CAAC;MAChExD,IAAI;MACJC,OAAO;MACPI,WAAW;MACXvB,KAAK,EAAElB,GAAG,CAAC6F,IAAI,EAAEC,KAAK,IAAI,QAAQ;MAClCL,SAAS,EAAEA,SAAS,IAAI,KAAK;MAC7BC,QAAQ,EAAEA,QAAQ,IAAI,KAAK;MAC3BC,eAAe,EAAEA,eAAe,IAAI;IACtC,CAAC,CAAC;IAEF1F,GAAG,CAACY,MAAM,CAAC,GAAG,CAAC,CAACP,IAAI,CAACX,iBAAiB,CAAC6D,OAAO,CAACtD,SAAS,EAAE,gCAAgC,CAAC,CAAC;EAC9F,CAAC,CAAC,OAAOU,KAAK,EAAE;IACdX,GAAG,CAACY,MAAM,CAAC,GAAG,CAAC,CAACP,IAAI,CAACX,iBAAiB,CAACmB,WAAW,CAAC,4BAA4B,EAAEF,KAAK,CAAC,CAAC;EAC1F;AACF,CAAC,CAAC;;AAEF;AACA;AACA;AACA;AACAtB,MAAM,CAACS,GAAG,CAAC,0BAA0B,EAAEH,WAAW,EAAE,CAACI,GAAG,EAAEC,GAAG,KAAK;EAChE,IAAI;IACF,MAAM;MAAE8F;IAAY,CAAC,GAAG/F,GAAG,CAAC+B,MAAM;IAClC,MAAM7B,SAAS,GAAGV,yBAAyB,CAACwG,kBAAkB,CAACD,WAAW,CAAC;IAE3E,IAAI,CAAC7F,SAAS,EAAE;MACd,OAAOD,GAAG,CAACY,MAAM,CAAC,GAAG,CAAC,CAACP,IAAI,CAACX,iBAAiB,CAACuC,QAAQ,CAAC,aAAa6D,WAAW,EAAE,CAAC,CAAC;IACrF;IAEA9F,GAAG,CAACK,IAAI,CAACX,iBAAiB,CAACY,OAAO,CAACL,SAAS,EAAE,gBAAgB,CAAC,CAAC;EAClE,CAAC,CAAC,OAAOU,KAAK,EAAE;IACdX,GAAG,CAACY,MAAM,CAAC,GAAG,CAAC,CAACP,IAAI,CAACX,iBAAiB,CAACmB,WAAW,CAAC,2BAA2B,EAAEF,KAAK,CAAC,CAAC;EACzF;AACF,CAAC,CAAC;;AAEF;AACA;AACA;AACA;AACAtB,MAAM,CAAC6C,IAAI,CAAC,kCAAkC,EAAEvC,WAAW,EAAE,CAACI,GAAG,EAAEC,GAAG,KAAK;EACzE,IAAI;IACF,MAAM;MAAE8F;IAAY,CAAC,GAAG/F,GAAG,CAAC+B,MAAM;IAClC,MAAMkE,MAAM,GAAGjG,GAAG,CAAC0C,IAAI;IAEvB,MAAMiB,MAAM,GAAGnE,yBAAyB,CAAC0G,oBAAoB,CAACH,WAAW,EAAEE,MAAM,CAAC;IAElF,IAAI,CAACtC,MAAM,CAACpD,OAAO,EAAE;MACnB,OAAON,GAAG,CAACY,MAAM,CAAC,GAAG,CAAC,CAACP,IAAI,CAACX,iBAAiB,CAACuC,QAAQ,CAAC,aAAa6D,WAAW,EAAE,CAAC,CAAC;IACrF;IAEA9F,GAAG,CAACY,MAAM,CAAC,GAAG,CAAC,CAACP,IAAI,CAACX,iBAAiB,CAAC6D,OAAO,CAACG,MAAM,CAACsC,MAAM,EAAE,2BAA2B,CAAC,CAAC;EAC7F,CAAC,CAAC,OAAOrF,KAAK,EAAE;IACdX,GAAG,CAACY,MAAM,CAAC,GAAG,CAAC,CAACP,IAAI,CAACX,iBAAiB,CAACmB,WAAW,CAAC,sBAAsB,EAAEF,KAAK,CAAC,CAAC;EACpF;AACF,CAAC,CAAC;AAEFuF,MAAM,CAACC,OAAO,GAAG9G,MAAM","ignoreList":[]}