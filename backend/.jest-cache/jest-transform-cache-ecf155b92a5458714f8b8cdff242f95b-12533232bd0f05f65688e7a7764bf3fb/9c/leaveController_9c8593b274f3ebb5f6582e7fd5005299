fd6b487dc044893f270e068675b948c1
// HR Leave Controller
const Leave = require('../../models/HR/Leave');

// Create new leave
exports.createLeave = async (req, res) => {
  try {
    const leave = new Leave(req.body);
    await leave.save();
    res.status(201).json(leave);
  } catch (err) {
    res.status(400).json({
      error: err.message
    });
  }
};

// Get all leaves
exports.getLeaves = async (req, res) => {
  try {
    const leaves = await Leave.find();
    res.json(leaves);
  } catch (err) {
    res.status(500).json({
      error: err.message
    });
  }
};

// Get leave by ID
exports.getLeaveById = async (req, res) => {
  try {
    const leave = await Leave.findById(req.params.id);
    if (!leave) return res.status(404).json({
      error: 'Not found'
    });
    res.json(leave);
  } catch (err) {
    res.status(500).json({
      error: err.message
    });
  }
};

// Update leave
exports.updateLeave = async (req, res) => {
  try {
    const leave = await Leave.findByIdAndUpdate(req.params.id, req.body, {
      new: true
    });
    if (!leave) return res.status(404).json({
      error: 'Not found'
    });
    res.json(leave);
  } catch (err) {
    res.status(400).json({
      error: err.message
    });
  }
};

// Delete leave
exports.deleteLeave = async (req, res) => {
  try {
    const leave = await Leave.findByIdAndDelete(req.params.id);
    if (!leave) return res.status(404).json({
      error: 'Not found'
    });
    res.json({
      message: 'Deleted'
    });
  } catch (err) {
    res.status(500).json({
      error: err.message
    });
  }
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJMZWF2ZSIsInJlcXVpcmUiLCJleHBvcnRzIiwiY3JlYXRlTGVhdmUiLCJyZXEiLCJyZXMiLCJsZWF2ZSIsImJvZHkiLCJzYXZlIiwic3RhdHVzIiwianNvbiIsImVyciIsImVycm9yIiwibWVzc2FnZSIsImdldExlYXZlcyIsImxlYXZlcyIsImZpbmQiLCJnZXRMZWF2ZUJ5SWQiLCJmaW5kQnlJZCIsInBhcmFtcyIsImlkIiwidXBkYXRlTGVhdmUiLCJmaW5kQnlJZEFuZFVwZGF0ZSIsIm5ldyIsImRlbGV0ZUxlYXZlIiwiZmluZEJ5SWRBbmREZWxldGUiXSwic291cmNlcyI6WyJsZWF2ZUNvbnRyb2xsZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gSFIgTGVhdmUgQ29udHJvbGxlclxyXG5jb25zdCBMZWF2ZSA9IHJlcXVpcmUoJy4uLy4uL21vZGVscy9IUi9MZWF2ZScpO1xyXG5cclxuLy8gQ3JlYXRlIG5ldyBsZWF2ZVxyXG5leHBvcnRzLmNyZWF0ZUxlYXZlID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGxlYXZlID0gbmV3IExlYXZlKHJlcS5ib2R5KTtcclxuICAgIGF3YWl0IGxlYXZlLnNhdmUoKTtcclxuICAgIHJlcy5zdGF0dXMoMjAxKS5qc29uKGxlYXZlKTtcclxuICB9IGNhdGNoIChlcnIpIHtcclxuICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IGVyci5tZXNzYWdlIH0pO1xyXG4gIH1cclxufTtcclxuXHJcbi8vIEdldCBhbGwgbGVhdmVzXHJcbmV4cG9ydHMuZ2V0TGVhdmVzID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGxlYXZlcyA9IGF3YWl0IExlYXZlLmZpbmQoKTtcclxuICAgIHJlcy5qc29uKGxlYXZlcyk7XHJcbiAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiBlcnIubWVzc2FnZSB9KTtcclxuICB9XHJcbn07XHJcblxyXG4vLyBHZXQgbGVhdmUgYnkgSURcclxuZXhwb3J0cy5nZXRMZWF2ZUJ5SWQgPSBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgbGVhdmUgPSBhd2FpdCBMZWF2ZS5maW5kQnlJZChyZXEucGFyYW1zLmlkKTtcclxuICAgIGlmICghbGVhdmUpIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm9yOiAnTm90IGZvdW5kJyB9KTtcclxuICAgIHJlcy5qc29uKGxlYXZlKTtcclxuICB9IGNhdGNoIChlcnIpIHtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6IGVyci5tZXNzYWdlIH0pO1xyXG4gIH1cclxufTtcclxuXHJcbi8vIFVwZGF0ZSBsZWF2ZVxyXG5leHBvcnRzLnVwZGF0ZUxlYXZlID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGxlYXZlID0gYXdhaXQgTGVhdmUuZmluZEJ5SWRBbmRVcGRhdGUocmVxLnBhcmFtcy5pZCwgcmVxLmJvZHksIHsgbmV3OiB0cnVlIH0pO1xyXG4gICAgaWYgKCFsZWF2ZSkgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyb3I6ICdOb3QgZm91bmQnIH0pO1xyXG4gICAgcmVzLmpzb24obGVhdmUpO1xyXG4gIH0gY2F0Y2ggKGVycikge1xyXG4gICAgcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogZXJyLm1lc3NhZ2UgfSk7XHJcbiAgfVxyXG59O1xyXG5cclxuLy8gRGVsZXRlIGxlYXZlXHJcbmV4cG9ydHMuZGVsZXRlTGVhdmUgPSBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgbGVhdmUgPSBhd2FpdCBMZWF2ZS5maW5kQnlJZEFuZERlbGV0ZShyZXEucGFyYW1zLmlkKTtcclxuICAgIGlmICghbGVhdmUpIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm9yOiAnTm90IGZvdW5kJyB9KTtcclxuICAgIHJlcy5qc29uKHsgbWVzc2FnZTogJ0RlbGV0ZWQnIH0pO1xyXG4gIH0gY2F0Y2ggKGVycikge1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogZXJyLm1lc3NhZ2UgfSk7XHJcbiAgfVxyXG59O1xyXG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0EsTUFBTUEsS0FBSyxHQUFHQyxPQUFPLENBQUMsdUJBQXVCLENBQUM7O0FBRTlDO0FBQ0FDLE9BQU8sQ0FBQ0MsV0FBVyxHQUFHLE9BQU9DLEdBQUcsRUFBRUMsR0FBRyxLQUFLO0VBQ3hDLElBQUk7SUFDRixNQUFNQyxLQUFLLEdBQUcsSUFBSU4sS0FBSyxDQUFDSSxHQUFHLENBQUNHLElBQUksQ0FBQztJQUNqQyxNQUFNRCxLQUFLLENBQUNFLElBQUksQ0FBQyxDQUFDO0lBQ2xCSCxHQUFHLENBQUNJLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDSixLQUFLLENBQUM7RUFDN0IsQ0FBQyxDQUFDLE9BQU9LLEdBQUcsRUFBRTtJQUNaTixHQUFHLENBQUNJLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO01BQUVFLEtBQUssRUFBRUQsR0FBRyxDQUFDRTtJQUFRLENBQUMsQ0FBQztFQUM5QztBQUNGLENBQUM7O0FBRUQ7QUFDQVgsT0FBTyxDQUFDWSxTQUFTLEdBQUcsT0FBT1YsR0FBRyxFQUFFQyxHQUFHLEtBQUs7RUFDdEMsSUFBSTtJQUNGLE1BQU1VLE1BQU0sR0FBRyxNQUFNZixLQUFLLENBQUNnQixJQUFJLENBQUMsQ0FBQztJQUNqQ1gsR0FBRyxDQUFDSyxJQUFJLENBQUNLLE1BQU0sQ0FBQztFQUNsQixDQUFDLENBQUMsT0FBT0osR0FBRyxFQUFFO0lBQ1pOLEdBQUcsQ0FBQ0ksTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7TUFBRUUsS0FBSyxFQUFFRCxHQUFHLENBQUNFO0lBQVEsQ0FBQyxDQUFDO0VBQzlDO0FBQ0YsQ0FBQzs7QUFFRDtBQUNBWCxPQUFPLENBQUNlLFlBQVksR0FBRyxPQUFPYixHQUFHLEVBQUVDLEdBQUcsS0FBSztFQUN6QyxJQUFJO0lBQ0YsTUFBTUMsS0FBSyxHQUFHLE1BQU1OLEtBQUssQ0FBQ2tCLFFBQVEsQ0FBQ2QsR0FBRyxDQUFDZSxNQUFNLENBQUNDLEVBQUUsQ0FBQztJQUNqRCxJQUFJLENBQUNkLEtBQUssRUFBRSxPQUFPRCxHQUFHLENBQUNJLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO01BQUVFLEtBQUssRUFBRTtJQUFZLENBQUMsQ0FBQztJQUMvRFAsR0FBRyxDQUFDSyxJQUFJLENBQUNKLEtBQUssQ0FBQztFQUNqQixDQUFDLENBQUMsT0FBT0ssR0FBRyxFQUFFO0lBQ1pOLEdBQUcsQ0FBQ0ksTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7TUFBRUUsS0FBSyxFQUFFRCxHQUFHLENBQUNFO0lBQVEsQ0FBQyxDQUFDO0VBQzlDO0FBQ0YsQ0FBQzs7QUFFRDtBQUNBWCxPQUFPLENBQUNtQixXQUFXLEdBQUcsT0FBT2pCLEdBQUcsRUFBRUMsR0FBRyxLQUFLO0VBQ3hDLElBQUk7SUFDRixNQUFNQyxLQUFLLEdBQUcsTUFBTU4sS0FBSyxDQUFDc0IsaUJBQWlCLENBQUNsQixHQUFHLENBQUNlLE1BQU0sQ0FBQ0MsRUFBRSxFQUFFaEIsR0FBRyxDQUFDRyxJQUFJLEVBQUU7TUFBRWdCLEdBQUcsRUFBRTtJQUFLLENBQUMsQ0FBQztJQUNuRixJQUFJLENBQUNqQixLQUFLLEVBQUUsT0FBT0QsR0FBRyxDQUFDSSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztNQUFFRSxLQUFLLEVBQUU7SUFBWSxDQUFDLENBQUM7SUFDL0RQLEdBQUcsQ0FBQ0ssSUFBSSxDQUFDSixLQUFLLENBQUM7RUFDakIsQ0FBQyxDQUFDLE9BQU9LLEdBQUcsRUFBRTtJQUNaTixHQUFHLENBQUNJLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO01BQUVFLEtBQUssRUFBRUQsR0FBRyxDQUFDRTtJQUFRLENBQUMsQ0FBQztFQUM5QztBQUNGLENBQUM7O0FBRUQ7QUFDQVgsT0FBTyxDQUFDc0IsV0FBVyxHQUFHLE9BQU9wQixHQUFHLEVBQUVDLEdBQUcsS0FBSztFQUN4QyxJQUFJO0lBQ0YsTUFBTUMsS0FBSyxHQUFHLE1BQU1OLEtBQUssQ0FBQ3lCLGlCQUFpQixDQUFDckIsR0FBRyxDQUFDZSxNQUFNLENBQUNDLEVBQUUsQ0FBQztJQUMxRCxJQUFJLENBQUNkLEtBQUssRUFBRSxPQUFPRCxHQUFHLENBQUNJLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO01BQUVFLEtBQUssRUFBRTtJQUFZLENBQUMsQ0FBQztJQUMvRFAsR0FBRyxDQUFDSyxJQUFJLENBQUM7TUFBRUcsT0FBTyxFQUFFO0lBQVUsQ0FBQyxDQUFDO0VBQ2xDLENBQUMsQ0FBQyxPQUFPRixHQUFHLEVBQUU7SUFDWk4sR0FBRyxDQUFDSSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztNQUFFRSxLQUFLLEVBQUVELEdBQUcsQ0FBQ0U7SUFBUSxDQUFDLENBQUM7RUFDOUM7QUFDRixDQUFDIiwiaWdub3JlTGlzdCI6W119