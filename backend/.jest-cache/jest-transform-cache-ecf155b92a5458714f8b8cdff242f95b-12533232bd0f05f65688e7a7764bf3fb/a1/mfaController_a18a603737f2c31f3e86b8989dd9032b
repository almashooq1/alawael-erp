30accb87638a6585e9a47a1fff043427
/**
 * MFA Controller
 * تحكم المصادقة متعددة العوامل
 */

const crypto = require('crypto');
const mfaService = require('../services/mfaService');
const emailService = require('../services/emailService');
const smsService = require('../services/smsService');
const {
  MFASettings,
  MFASession,
  OTPLog,
  MFAAuditLog,
  TrustedDevice
} = require('../models/mfa.models');
const {
  User
} = require('../models/schemas');

// ============ SETUP ENDPOINTS ============

/**
 * Get MFA Setup Guide
 * الحصول على دليل إعداد MFA
 */
exports.getMFASetupGuide = async (req, res) => {
  try {
    const guide = mfaService.getMFASetupGuide();
    res.status(200).json({
      success: true,
      data: guide
    });
  } catch (error) {
    res.status(500).json({
      success: false,
      message: error.message
    });
  }
};

/**
 * Initialize TOTP Setup
 * بدء إعداد TOTP
 */
exports.initiateTOTPSetup = async (req, res) => {
  try {
    const userId = req.user._id;

    // Generate TOTP secret and QR code
    const totpData = await mfaService.generateTOTPSecret(req.user.email);

    // Create MFA settings if doesn't exist
    let mfaSettings = await MFASettings.findOne({
      userId
    });
    if (!mfaSettings) {
      mfaSettings = await MFASettings.create({
        userId
      });
    }

    // Log the setup initiation
    await MFAAuditLog.create({
      userId,
      action: 'mfa_setup',
      status: 'success',
      method: 'totp',
      details: {
        reason: 'User initiated TOTP setup'
      },
      ipAddress: req.ip,
      userAgent: req.get('user-agent')
    });
    res.status(200).json({
      success: true,
      message: 'TOTP setup initiated',
      data: {
        qrCode: totpData.qrCode,
        manualEntryKey: totpData.manualEntryKey,
        secret: totpData.secret,
        setupInstructions: {
          step1: 'Download an authenticator app',
          step2: 'Scan the QR code or enter the manual key',
          step3: 'Enter the 6-digit code to verify',
          step4: 'Save your backup codes in a safe place'
        }
      }
    });
  } catch (error) {
    await MFAAuditLog.create({
      userId: req.user._id,
      action: 'mfa_setup',
      status: 'failed',
      method: 'totp',
      error: error.message,
      ipAddress: req.ip,
      userAgent: req.get('user-agent')
    });
    res.status(500).json({
      success: false,
      message: error.message
    });
  }
};

/**
 * Verify TOTP and Enable
 * التحقق من TOTP وتفعيله
 */
exports.verifyAndEnableTOTP = async (req, res) => {
  try {
    const userId = req.user._id;
    const {
      token,
      secret
    } = req.body;
    if (!token || !secret) {
      return res.status(400).json({
        success: false,
        message: 'Token and secret are required'
      });
    }

    // Verify TOTP token
    const isValid = mfaService.verifyTOTP(token, secret);
    if (!isValid) {
      await MFAAuditLog.create({
        userId,
        action: 'verification_failed',
        status: 'failed',
        method: 'totp',
        error: 'Invalid TOTP token',
        ipAddress: req.ip,
        userAgent: req.get('user-agent')
      });
      return res.status(400).json({
        success: false,
        message: 'Invalid TOTP token'
      });
    }

    // Generate backup codes
    const backupCodes = mfaService.generateBackupCodes();
    const hashedBackupCodes = backupCodes.map(code => ({
      code: mfaService.hashBackupCode(code),
      used: false
    }));

    // Update MFA settings
    let mfaSettings = await MFASettings.findOneAndUpdate({
      userId
    }, {
      $set: {
        totp: {
          enabled: true,
          secret,
          verifiedAt: new Date(),
          backupCodesGenerated: true
        },
        primaryMethod: 'totp'
      },
      $push: {
        backupCodes: {
          $each: hashedBackupCodes
        }
      }
    }, {
      new: true,
      upsert: true
    });

    // Update user
    await User.findByIdAndUpdate(userId, {
      twoFactorEnabled: true,
      twoFactorSecret: secret
    });

    // Log success
    await MFAAuditLog.create({
      userId,
      action: 'mfa_enable',
      status: 'success',
      method: 'totp',
      details: {
        reason: 'User enabled TOTP authentication'
      },
      ipAddress: req.ip,
      userAgent: req.get('user-agent')
    });
    res.status(200).json({
      success: true,
      message: 'TOTP enabled successfully',
      data: {
        backupCodes,
        message: 'Save these backup codes in a safe place. You can use them to regain access if you lose your authenticator.'
      }
    });
  } catch (error) {
    res.status(500).json({
      success: false,
      message: error.message
    });
  }
};

/**
 * Start Email OTP Verification
 * بدء التحقق من OTP عبر البريد الإلكتروني
 */
exports.initiateEmailOTP = async (req, res) => {
  try {
    const userId = req.user._id;
    const user = await User.findById(userId);

    // Generate OTP
    const otpData = mfaService.generateEmailOTP();

    // Hash OTP for storage
    const otpHash = crypto.createHash('sha256').update(otpData.code).digest('hex');

    // Create MFA settings if doesn't exist
    let mfaSettings = await MFASettings.findOne({
      userId
    });
    if (!mfaSettings) {
      mfaSettings = await MFASettings.create({
        userId
      });
    }

    // Log OTP
    await OTPLog.create({
      userId,
      method: 'email',
      recipient: user.email,
      otpHash,
      expiresAt: otpData.expiresAt,
      ipAddress: req.ip,
      userAgent: req.get('user-agent'),
      reason: 'mfa_setup'
    });

    // Send OTP email
    await emailService.sendOTPEmail(user.email, otpData.code, {
      name: user.name,
      purpose: 'Multi-Factor Authentication Setup'
    });
    res.status(200).json({
      success: true,
      message: 'OTP sent to your email',
      data: {
        expiresIn: otpData.expiresIn,
        recipient: `${user.email.substring(0, 5)}***`
      }
    });
  } catch (error) {
    res.status(500).json({
      success: false,
      message: error.message
    });
  }
};

/**
 * Verify Email OTP and Enable
 * التحقق من OTP البريدي وتفعيله
 */
exports.verifyAndEnableEmailOTP = async (req, res) => {
  try {
    const userId = req.user._id;
    const {
      code
    } = req.body;
    if (!code) {
      return res.status(400).json({
        success: false,
        message: 'OTP code is required'
      });
    }

    // Find the most recent OTP log
    const otpLog = await OTPLog.findOne({
      userId,
      method: 'email'
    }).sort({
      createdAt: -1
    });
    if (!otpLog) {
      return res.status(400).json({
        success: false,
        message: 'No OTP request found'
      });
    }

    // Verify OTP
    const codeHash = crypto.createHash('sha256').update(code).digest('hex');
    const verification = mfaService.verifyOTP(code, otpLog.otpHash, otpLog.expiresAt);
    if (!verification.isValid) {
      otpLog.verificationAttempts += 1;
      await otpLog.save();
      await MFAAuditLog.create({
        userId,
        action: 'verification_failed',
        status: 'failed',
        method: 'email',
        error: verification.message,
        ipAddress: req.ip,
        userAgent: req.get('user-agent')
      });
      return res.status(400).json({
        success: false,
        message: verification.message
      });
    }

    // Update OTP log
    otpLog.status = 'verified';
    otpLog.verifiedAt = new Date();
    await otpLog.save();

    // Update MFA settings
    let mfaSettings = await MFASettings.findOneAndUpdate({
      userId
    }, {
      $set: {
        emailOTP: {
          enabled: true,
          verifiedAt: new Date()
        },
        primaryMethod: 'email'
      }
    }, {
      new: true,
      upsert: true
    });

    // Log success
    await MFAAuditLog.create({
      userId,
      action: 'mfa_enable',
      status: 'success',
      method: 'email',
      details: {
        reason: 'User enabled Email OTP authentication'
      },
      ipAddress: req.ip,
      userAgent: req.get('user-agent')
    });
    res.status(200).json({
      success: true,
      message: 'Email OTP enabled successfully'
    });
  } catch (error) {
    res.status(500).json({
      success: false,
      message: error.message
    });
  }
};

/**
 * Initiate SMS OTP Verification
 * بدء التحقق من OTP عبر الرسائل النصية
 */
exports.initiateSMSOTP = async (req, res) => {
  try {
    const userId = req.user._id;
    const {
      phoneNumber,
      countryCode
    } = req.body;
    if (!phoneNumber || !countryCode) {
      return res.status(400).json({
        success: false,
        message: 'Phone number and country code are required'
      });
    }
    const user = await User.findById(userId);

    // Generate OTP
    const otpData = mfaService.generateSMSOTP();
    const otpHash = crypto.createHash('sha256').update(otpData.code).digest('hex');

    // Create MFA settings if doesn't exist
    let mfaSettings = await MFASettings.findOne({
      userId
    });
    if (!mfaSettings) {
      mfaSettings = await MFASettings.create({
        userId
      });
    }

    // Log OTP
    await OTPLog.create({
      userId,
      method: 'sms',
      recipient: phoneNumber,
      otpHash,
      expiresAt: otpData.expiresAt,
      ipAddress: req.ip,
      userAgent: req.get('user-agent'),
      reason: 'mfa_setup'
    });

    // Send OTP SMS
    const fullPhoneNumber = `${countryCode}${phoneNumber}`;
    await smsService.sendOTP(fullPhoneNumber, otpData.code, {
      name: user.name,
      purpose: 'Multi-Factor Authentication'
    });
    res.status(200).json({
      success: true,
      message: 'OTP sent to your phone',
      data: {
        expiresIn: otpData.expiresIn,
        recipient: `${phoneNumber.substring(0, 3)}***`
      }
    });
  } catch (error) {
    res.status(500).json({
      success: false,
      message: error.message
    });
  }
};

/**
 * Verify SMS OTP and Enable
 * التحقق من OTP الرسائل النصية وتفعيله
 */
exports.verifyAndEnableSMSOTP = async (req, res) => {
  try {
    const userId = req.user._id;
    const {
      code,
      phoneNumber,
      countryCode
    } = req.body;
    if (!code || !phoneNumber || !countryCode) {
      return res.status(400).json({
        success: false,
        message: 'Code, phone number, and country code are required'
      });
    }

    // Find the most recent OTP log
    const otpLog = await OTPLog.findOne({
      userId,
      method: 'sms'
    }).sort({
      createdAt: -1
    });
    if (!otpLog) {
      return res.status(400).json({
        success: false,
        message: 'No OTP request found'
      });
    }

    // Verify OTP
    const verification = mfaService.verifyOTP(code, otpLog.otpHash, otpLog.expiresAt);
    if (!verification.isValid) {
      otpLog.verificationAttempts += 1;
      await otpLog.save();
      return res.status(400).json({
        success: false,
        message: verification.message
      });
    }

    // Update OTP log
    otpLog.status = 'verified';
    otpLog.verifiedAt = new Date();
    await otpLog.save();

    // Update MFA settings
    const mfaSettings = await MFASettings.findOneAndUpdate({
      userId
    }, {
      $set: {
        smsOTP: {
          enabled: true,
          phoneNumber,
          countryCode,
          verifiedAt: new Date()
        },
        primaryMethod: 'sms'
      }
    }, {
      new: true,
      upsert: true
    });

    // Log success
    await MFAAuditLog.create({
      userId,
      action: 'mfa_enable',
      status: 'success',
      method: 'sms',
      details: {
        reason: 'User enabled SMS OTP authentication',
        phoneNumber
      },
      ipAddress: req.ip,
      userAgent: req.get('user-agent')
    });
    res.status(200).json({
      success: true,
      message: 'SMS OTP enabled successfully'
    });
  } catch (error) {
    res.status(500).json({
      success: false,
      message: error.message
    });
  }
};

// ============ VERIFICATION ENDPOINTS ============

/**
 * Verify MFA During Login
 * التحقق من MFA أثناء تسجيل الدخول
 */
exports.verifyMFALogin = async (req, res) => {
  try {
    const {
      sessionId,
      token,
      method
    } = req.body;
    if (!sessionId || !token || !method) {
      return res.status(400).json({
        success: false,
        message: 'Session ID, token, and method are required'
      });
    }

    // Find MFA session
    const mfaSession = await MFASession.findOne({
      sessionId
    });
    if (!mfaSession) {
      return res.status(400).json({
        success: false,
        message: 'Invalid MFA session'
      });
    }

    // Validate session
    const validation = mfaService.validateMFASession(mfaSession);
    if (!validation.isValid) {
      return res.status(400).json({
        success: false,
        message: validation.message
      });
    }

    // Get user and MFA settings
    const user = await User.findById(mfaSession.userId).select('+twoFactorSecret');
    const mfaSettings = await MFASettings.findOne({
      userId: mfaSession.userId
    });
    let isValid = false;

    // Verify based on method
    if (method === 'totp') {
      isValid = mfaService.verifyTOTP(token, user.twoFactorSecret);
    } else if (method === 'backup') {
      // Verify backup code
      const backupCode = mfaSettings.backupCodes.find(bc => !bc.used && mfaService.verifyBackupCode(token, bc.code));
      if (backupCode) {
        backupCode.used = true;
        backupCode.usedAt = new Date();
        await mfaSettings.save();
        isValid = true;

        // Log backup code usage
        await MFAAuditLog.create({
          userId: mfaSession.userId,
          action: 'backup_code_used',
          status: 'success',
          ipAddress: req.ip,
          userAgent: req.get('user-agent')
        });
      }
    }
    if (!isValid) {
      mfaSession.attempts += 1;
      await mfaSession.save();
      await MFAAuditLog.create({
        userId: mfaSession.userId,
        action: 'verification_failed',
        status: 'failed',
        method,
        error: 'Invalid MFA token',
        ipAddress: req.ip,
        userAgent: req.get('user-agent')
      });
      return res.status(400).json({
        success: false,
        message: 'Invalid MFA token',
        attemptsRemaining: validation.attemptsRemaining - 1
      });
    }

    // MFA verified
    mfaSession.status = 'verified';
    mfaSession.verifiedAt = new Date();
    await mfaSession.save();

    // Log success
    await MFAAuditLog.create({
      userId: mfaSession.userId,
      action: 'verification_success',
      status: 'success',
      method,
      ipAddress: req.ip,
      userAgent: req.get('user-agent')
    });
    res.status(200).json({
      success: true,
      message: 'MFA verification successful',
      data: {
        sessionId,
        userId: mfaSession.userId,
        verified: true
      }
    });
  } catch (error) {
    res.status(500).json({
      success: false,
      message: error.message
    });
  }
};

// ============ SETTINGS ENDPOINTS ============

/**
 * Get MFA Settings
 * الحصول على إعدادات MFA
 */
exports.getMFASettings = async (req, res) => {
  try {
    const userId = req.user._id;
    let mfaSettings = await MFASettings.findOne({
      userId
    });
    if (!mfaSettings) {
      mfaSettings = await MFASettings.create({
        userId
      });
    }

    // Remove sensitive data
    const secureSettings = mfaSettings.toObject();
    if (secureSettings.totp) delete secureSettings.totp.secret;
    if (secureSettings.recovery) delete secureSettings.recovery.recoveryKey;
    secureSettings.backupCodes = secureSettings.backupCodes.map(({
      used,
      usedAt
    }) => ({
      used,
      usedAt
    }));
    res.status(200).json({
      success: true,
      data: secureSettings
    });
  } catch (error) {
    res.status(500).json({
      success: false,
      message: error.message
    });
  }
};

/**
 * Disable MFA Method
 * تعطيل طريقة MFA
 */
exports.disableMFAMethod = async (req, res) => {
  try {
    const userId = req.user._id;
    const {
      method
    } = req.body;
    if (!['totp', 'email', 'sms'].includes(method)) {
      return res.status(400).json({
        success: false,
        message: 'Invalid MFA method'
      });
    }
    const mfaSettings = await MFASettings.findOne({
      userId
    });

    // Cannot disable all methods
    const enabledMethods = [mfaSettings?.totp?.enabled, mfaSettings?.emailOTP?.enabled, mfaSettings?.smsOTP?.enabled].filter(Boolean);
    if (enabledMethods.length <= 1) {
      return res.status(400).json({
        success: false,
        message: 'At least one MFA method must remain enabled'
      });
    }

    // Disable method
    const methodField = method === 'totp' ? 'totp' : method === 'email' ? 'emailOTP' : 'smsOTP';
    const updateData = {};
    updateData[`${methodField}.enabled`] = false;
    const updated = await MFASettings.findOneAndUpdate({
      userId
    }, {
      $set: updateData
    }, {
      new: true
    });

    // Log action
    await MFAAuditLog.create({
      userId,
      action: 'mfa_disable',
      status: 'success',
      method,
      details: {
        reason: `User disabled ${method} authentication`
      },
      ipAddress: req.ip,
      userAgent: req.get('user-agent')
    });
    res.status(200).json({
      success: true,
      message: `${method} MFA method disabled successfully`
    });
  } catch (error) {
    res.status(500).json({
      success: false,
      message: error.message
    });
  }
};

// ============ TRUSTED DEVICE ENDPOINTS ============

/**
 * Trust Current Device
 * وضع علامة على الجهاز الحالي كموثوق
 */
exports.trustDevice = async (req, res) => {
  try {
    const userId = req.user._id;
    const {
      deviceName,
      deviceFingerprint
    } = req.body;
    if (!deviceFingerprint) {
      return res.status(400).json({
        success: false,
        message: 'Device fingerprint is required'
      });
    }

    // Generate device token
    const deviceToken = mfaService.generateTrustedDeviceToken(userId, deviceFingerprint);
    const trustedDevice = await TrustedDevice.create({
      userId,
      deviceId: crypto.randomBytes(12).toString('hex'),
      deviceName: deviceName || 'Unknown Device',
      fingerprint: deviceFingerprint,
      token: deviceToken.token,
      ipAddress: req.ip,
      userAgent: req.get('user-agent'),
      expiresAt: deviceToken.expiresAt
    });

    // Log action
    await MFAAuditLog.create({
      userId,
      action: 'device_trusted',
      status: 'success',
      details: {
        deviceName: deviceName || 'Unknown Device'
      },
      ipAddress: req.ip,
      userAgent: req.get('user-agent')
    });
    res.status(200).json({
      success: true,
      message: 'Device trusted successfully',
      data: {
        deviceToken: deviceToken.token,
        expiresAt: deviceToken.expiresAt
      }
    });
  } catch (error) {
    res.status(500).json({
      success: false,
      message: error.message
    });
  }
};

/**
 * Get Trusted Devices
 * الحصول على قائمة الأجهزة الموثوقة
 */
exports.getTrustedDevices = async (req, res) => {
  try {
    const userId = req.user._id;
    const devices = await TrustedDevice.find({
      userId,
      isActive: true,
      expiresAt: {
        $gt: new Date()
      }
    }).select('-token');
    res.status(200).json({
      success: true,
      data: devices
    });
  } catch (error) {
    res.status(500).json({
      success: false,
      message: error.message
    });
  }
};

/**
 * Revoke Trusted Device
 * إلغاء وضع العلامة على جهاز
 */
exports.revokeTrustedDevice = async (req, res) => {
  try {
    const userId = req.user._id;
    const {
      deviceId
    } = req.params;
    const device = await TrustedDevice.findOneAndUpdate({
      _id: deviceId,
      userId
    }, {
      isActive: false,
      revokedAt: new Date(),
      revokeReason: 'User revoked trust'
    }, {
      new: true
    });
    if (!device) {
      return res.status(404).json({
        success: false,
        message: 'Device not found'
      });
    }

    // Log action
    await MFAAuditLog.create({
      userId,
      action: 'device_revoked',
      status: 'success',
      details: {
        deviceName: device.deviceName
      },
      ipAddress: req.ip,
      userAgent: req.get('user-agent')
    });
    res.status(200).json({
      success: true,
      message: 'Device revoked successfully'
    });
  } catch (error) {
    res.status(500).json({
      success: false,
      message: error.message
    });
  }
};
module.exports = exports;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjcnlwdG8iLCJyZXF1aXJlIiwibWZhU2VydmljZSIsImVtYWlsU2VydmljZSIsInNtc1NlcnZpY2UiLCJNRkFTZXR0aW5ncyIsIk1GQVNlc3Npb24iLCJPVFBMb2ciLCJNRkFBdWRpdExvZyIsIlRydXN0ZWREZXZpY2UiLCJVc2VyIiwiZXhwb3J0cyIsImdldE1GQVNldHVwR3VpZGUiLCJyZXEiLCJyZXMiLCJndWlkZSIsInN0YXR1cyIsImpzb24iLCJzdWNjZXNzIiwiZGF0YSIsImVycm9yIiwibWVzc2FnZSIsImluaXRpYXRlVE9UUFNldHVwIiwidXNlcklkIiwidXNlciIsIl9pZCIsInRvdHBEYXRhIiwiZ2VuZXJhdGVUT1RQU2VjcmV0IiwiZW1haWwiLCJtZmFTZXR0aW5ncyIsImZpbmRPbmUiLCJjcmVhdGUiLCJhY3Rpb24iLCJtZXRob2QiLCJkZXRhaWxzIiwicmVhc29uIiwiaXBBZGRyZXNzIiwiaXAiLCJ1c2VyQWdlbnQiLCJnZXQiLCJxckNvZGUiLCJtYW51YWxFbnRyeUtleSIsInNlY3JldCIsInNldHVwSW5zdHJ1Y3Rpb25zIiwic3RlcDEiLCJzdGVwMiIsInN0ZXAzIiwic3RlcDQiLCJ2ZXJpZnlBbmRFbmFibGVUT1RQIiwidG9rZW4iLCJib2R5IiwiaXNWYWxpZCIsInZlcmlmeVRPVFAiLCJiYWNrdXBDb2RlcyIsImdlbmVyYXRlQmFja3VwQ29kZXMiLCJoYXNoZWRCYWNrdXBDb2RlcyIsIm1hcCIsImNvZGUiLCJoYXNoQmFja3VwQ29kZSIsInVzZWQiLCJmaW5kT25lQW5kVXBkYXRlIiwiJHNldCIsInRvdHAiLCJlbmFibGVkIiwidmVyaWZpZWRBdCIsIkRhdGUiLCJiYWNrdXBDb2Rlc0dlbmVyYXRlZCIsInByaW1hcnlNZXRob2QiLCIkcHVzaCIsIiRlYWNoIiwibmV3IiwidXBzZXJ0IiwiZmluZEJ5SWRBbmRVcGRhdGUiLCJ0d29GYWN0b3JFbmFibGVkIiwidHdvRmFjdG9yU2VjcmV0IiwiaW5pdGlhdGVFbWFpbE9UUCIsImZpbmRCeUlkIiwib3RwRGF0YSIsImdlbmVyYXRlRW1haWxPVFAiLCJvdHBIYXNoIiwiY3JlYXRlSGFzaCIsInVwZGF0ZSIsImRpZ2VzdCIsInJlY2lwaWVudCIsImV4cGlyZXNBdCIsInNlbmRPVFBFbWFpbCIsIm5hbWUiLCJwdXJwb3NlIiwiZXhwaXJlc0luIiwic3Vic3RyaW5nIiwidmVyaWZ5QW5kRW5hYmxlRW1haWxPVFAiLCJvdHBMb2ciLCJzb3J0IiwiY3JlYXRlZEF0IiwiY29kZUhhc2giLCJ2ZXJpZmljYXRpb24iLCJ2ZXJpZnlPVFAiLCJ2ZXJpZmljYXRpb25BdHRlbXB0cyIsInNhdmUiLCJlbWFpbE9UUCIsImluaXRpYXRlU01TT1RQIiwicGhvbmVOdW1iZXIiLCJjb3VudHJ5Q29kZSIsImdlbmVyYXRlU01TT1RQIiwiZnVsbFBob25lTnVtYmVyIiwic2VuZE9UUCIsInZlcmlmeUFuZEVuYWJsZVNNU09UUCIsInNtc09UUCIsInZlcmlmeU1GQUxvZ2luIiwic2Vzc2lvbklkIiwibWZhU2Vzc2lvbiIsInZhbGlkYXRpb24iLCJ2YWxpZGF0ZU1GQVNlc3Npb24iLCJzZWxlY3QiLCJiYWNrdXBDb2RlIiwiZmluZCIsImJjIiwidmVyaWZ5QmFja3VwQ29kZSIsInVzZWRBdCIsImF0dGVtcHRzIiwiYXR0ZW1wdHNSZW1haW5pbmciLCJ2ZXJpZmllZCIsImdldE1GQVNldHRpbmdzIiwic2VjdXJlU2V0dGluZ3MiLCJ0b09iamVjdCIsInJlY292ZXJ5IiwicmVjb3ZlcnlLZXkiLCJkaXNhYmxlTUZBTWV0aG9kIiwiaW5jbHVkZXMiLCJlbmFibGVkTWV0aG9kcyIsImZpbHRlciIsIkJvb2xlYW4iLCJsZW5ndGgiLCJtZXRob2RGaWVsZCIsInVwZGF0ZURhdGEiLCJ1cGRhdGVkIiwidHJ1c3REZXZpY2UiLCJkZXZpY2VOYW1lIiwiZGV2aWNlRmluZ2VycHJpbnQiLCJkZXZpY2VUb2tlbiIsImdlbmVyYXRlVHJ1c3RlZERldmljZVRva2VuIiwidHJ1c3RlZERldmljZSIsImRldmljZUlkIiwicmFuZG9tQnl0ZXMiLCJ0b1N0cmluZyIsImZpbmdlcnByaW50IiwiZ2V0VHJ1c3RlZERldmljZXMiLCJkZXZpY2VzIiwiaXNBY3RpdmUiLCIkZ3QiLCJyZXZva2VUcnVzdGVkRGV2aWNlIiwicGFyYW1zIiwiZGV2aWNlIiwicmV2b2tlZEF0IiwicmV2b2tlUmVhc29uIiwibW9kdWxlIl0sInNvdXJjZXMiOlsibWZhQ29udHJvbGxlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogTUZBIENvbnRyb2xsZXJcclxuICog2KrYrdmD2YUg2KfZhNmF2LXYp9iv2YLYqSDZhdiq2LnYr9iv2Kkg2KfZhNi52YjYp9mF2YRcclxuICovXHJcblxyXG5jb25zdCBjcnlwdG8gPSByZXF1aXJlKCdjcnlwdG8nKTtcclxuY29uc3QgbWZhU2VydmljZSA9IHJlcXVpcmUoJy4uL3NlcnZpY2VzL21mYVNlcnZpY2UnKTtcclxuY29uc3QgZW1haWxTZXJ2aWNlID0gcmVxdWlyZSgnLi4vc2VydmljZXMvZW1haWxTZXJ2aWNlJyk7XHJcbmNvbnN0IHNtc1NlcnZpY2UgPSByZXF1aXJlKCcuLi9zZXJ2aWNlcy9zbXNTZXJ2aWNlJyk7XHJcbmNvbnN0IHtcclxuICBNRkFTZXR0aW5ncyxcclxuICBNRkFTZXNzaW9uLFxyXG4gIE9UUExvZyxcclxuICBNRkFBdWRpdExvZyxcclxuICBUcnVzdGVkRGV2aWNlLFxyXG59ID0gcmVxdWlyZSgnLi4vbW9kZWxzL21mYS5tb2RlbHMnKTtcclxuY29uc3QgeyBVc2VyIH0gPSByZXF1aXJlKCcuLi9tb2RlbHMvc2NoZW1hcycpO1xyXG5cclxuLy8gPT09PT09PT09PT09IFNFVFVQIEVORFBPSU5UUyA9PT09PT09PT09PT1cclxuXHJcbi8qKlxyXG4gKiBHZXQgTUZBIFNldHVwIEd1aWRlXHJcbiAqINin2YTYrdi12YjZhCDYudmE2Ykg2K/ZhNmK2YQg2KXYudiv2KfYryBNRkFcclxuICovXHJcbmV4cG9ydHMuZ2V0TUZBU2V0dXBHdWlkZSA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBndWlkZSA9IG1mYVNlcnZpY2UuZ2V0TUZBU2V0dXBHdWlkZSgpO1xyXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24oe1xyXG4gICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICBkYXRhOiBndWlkZSxcclxuICAgIH0pO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XHJcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxyXG4gICAgfSk7XHJcbiAgfVxyXG59O1xyXG5cclxuLyoqXHJcbiAqIEluaXRpYWxpemUgVE9UUCBTZXR1cFxyXG4gKiDYqNiv2KEg2KXYudiv2KfYryBUT1RQXHJcbiAqL1xyXG5leHBvcnRzLmluaXRpYXRlVE9UUFNldHVwID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHVzZXJJZCA9IHJlcS51c2VyLl9pZDtcclxuXHJcbiAgICAvLyBHZW5lcmF0ZSBUT1RQIHNlY3JldCBhbmQgUVIgY29kZVxyXG4gICAgY29uc3QgdG90cERhdGEgPSBhd2FpdCBtZmFTZXJ2aWNlLmdlbmVyYXRlVE9UUFNlY3JldChyZXEudXNlci5lbWFpbCk7XHJcblxyXG4gICAgLy8gQ3JlYXRlIE1GQSBzZXR0aW5ncyBpZiBkb2Vzbid0IGV4aXN0XHJcbiAgICBsZXQgbWZhU2V0dGluZ3MgPSBhd2FpdCBNRkFTZXR0aW5ncy5maW5kT25lKHsgdXNlcklkIH0pO1xyXG4gICAgaWYgKCFtZmFTZXR0aW5ncykge1xyXG4gICAgICBtZmFTZXR0aW5ncyA9IGF3YWl0IE1GQVNldHRpbmdzLmNyZWF0ZSh7IHVzZXJJZCB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBMb2cgdGhlIHNldHVwIGluaXRpYXRpb25cclxuICAgIGF3YWl0IE1GQUF1ZGl0TG9nLmNyZWF0ZSh7XHJcbiAgICAgIHVzZXJJZCxcclxuICAgICAgYWN0aW9uOiAnbWZhX3NldHVwJyxcclxuICAgICAgc3RhdHVzOiAnc3VjY2VzcycsXHJcbiAgICAgIG1ldGhvZDogJ3RvdHAnLFxyXG4gICAgICBkZXRhaWxzOiB7XHJcbiAgICAgICAgcmVhc29uOiAnVXNlciBpbml0aWF0ZWQgVE9UUCBzZXR1cCcsXHJcbiAgICAgIH0sXHJcbiAgICAgIGlwQWRkcmVzczogcmVxLmlwLFxyXG4gICAgICB1c2VyQWdlbnQ6IHJlcS5nZXQoJ3VzZXItYWdlbnQnKSxcclxuICAgIH0pO1xyXG5cclxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcclxuICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgbWVzc2FnZTogJ1RPVFAgc2V0dXAgaW5pdGlhdGVkJyxcclxuICAgICAgZGF0YToge1xyXG4gICAgICAgIHFyQ29kZTogdG90cERhdGEucXJDb2RlLFxyXG4gICAgICAgIG1hbnVhbEVudHJ5S2V5OiB0b3RwRGF0YS5tYW51YWxFbnRyeUtleSxcclxuICAgICAgICBzZWNyZXQ6IHRvdHBEYXRhLnNlY3JldCxcclxuICAgICAgICBzZXR1cEluc3RydWN0aW9uczoge1xyXG4gICAgICAgICAgc3RlcDE6ICdEb3dubG9hZCBhbiBhdXRoZW50aWNhdG9yIGFwcCcsXHJcbiAgICAgICAgICBzdGVwMjogJ1NjYW4gdGhlIFFSIGNvZGUgb3IgZW50ZXIgdGhlIG1hbnVhbCBrZXknLFxyXG4gICAgICAgICAgc3RlcDM6ICdFbnRlciB0aGUgNi1kaWdpdCBjb2RlIHRvIHZlcmlmeScsXHJcbiAgICAgICAgICBzdGVwNDogJ1NhdmUgeW91ciBiYWNrdXAgY29kZXMgaW4gYSBzYWZlIHBsYWNlJyxcclxuICAgICAgICB9LFxyXG4gICAgICB9LFxyXG4gICAgfSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGF3YWl0IE1GQUF1ZGl0TG9nLmNyZWF0ZSh7XHJcbiAgICAgIHVzZXJJZDogcmVxLnVzZXIuX2lkLFxyXG4gICAgICBhY3Rpb246ICdtZmFfc2V0dXAnLFxyXG4gICAgICBzdGF0dXM6ICdmYWlsZWQnLFxyXG4gICAgICBtZXRob2Q6ICd0b3RwJyxcclxuICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2UsXHJcbiAgICAgIGlwQWRkcmVzczogcmVxLmlwLFxyXG4gICAgICB1c2VyQWdlbnQ6IHJlcS5nZXQoJ3VzZXItYWdlbnQnKSxcclxuICAgIH0pO1xyXG5cclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXHJcbiAgICB9KTtcclxuICB9XHJcbn07XHJcblxyXG4vKipcclxuICogVmVyaWZ5IFRPVFAgYW5kIEVuYWJsZVxyXG4gKiDYp9mE2KrYrdmC2YIg2YXZhiBUT1RQINmI2KrZgdi52YrZhNmHXHJcbiAqL1xyXG5leHBvcnRzLnZlcmlmeUFuZEVuYWJsZVRPVFAgPSBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgdXNlcklkID0gcmVxLnVzZXIuX2lkO1xyXG4gICAgY29uc3QgeyB0b2tlbiwgc2VjcmV0IH0gPSByZXEuYm9keTtcclxuXHJcbiAgICBpZiAoIXRva2VuIHx8ICFzZWNyZXQpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBtZXNzYWdlOiAnVG9rZW4gYW5kIHNlY3JldCBhcmUgcmVxdWlyZWQnLFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBWZXJpZnkgVE9UUCB0b2tlblxyXG4gICAgY29uc3QgaXNWYWxpZCA9IG1mYVNlcnZpY2UudmVyaWZ5VE9UUCh0b2tlbiwgc2VjcmV0KTtcclxuICAgIGlmICghaXNWYWxpZCkge1xyXG4gICAgICBhd2FpdCBNRkFBdWRpdExvZy5jcmVhdGUoe1xyXG4gICAgICAgIHVzZXJJZCxcclxuICAgICAgICBhY3Rpb246ICd2ZXJpZmljYXRpb25fZmFpbGVkJyxcclxuICAgICAgICBzdGF0dXM6ICdmYWlsZWQnLFxyXG4gICAgICAgIG1ldGhvZDogJ3RvdHAnLFxyXG4gICAgICAgIGVycm9yOiAnSW52YWxpZCBUT1RQIHRva2VuJyxcclxuICAgICAgICBpcEFkZHJlc3M6IHJlcS5pcCxcclxuICAgICAgICB1c2VyQWdlbnQ6IHJlcS5nZXQoJ3VzZXItYWdlbnQnKSxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIG1lc3NhZ2U6ICdJbnZhbGlkIFRPVFAgdG9rZW4nLFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBHZW5lcmF0ZSBiYWNrdXAgY29kZXNcclxuICAgIGNvbnN0IGJhY2t1cENvZGVzID0gbWZhU2VydmljZS5nZW5lcmF0ZUJhY2t1cENvZGVzKCk7XHJcbiAgICBjb25zdCBoYXNoZWRCYWNrdXBDb2RlcyA9IGJhY2t1cENvZGVzLm1hcCgoY29kZSkgPT4gKHtcclxuICAgICAgY29kZTogbWZhU2VydmljZS5oYXNoQmFja3VwQ29kZShjb2RlKSxcclxuICAgICAgdXNlZDogZmFsc2UsXHJcbiAgICB9KSk7XHJcblxyXG4gICAgLy8gVXBkYXRlIE1GQSBzZXR0aW5nc1xyXG4gICAgbGV0IG1mYVNldHRpbmdzID0gYXdhaXQgTUZBU2V0dGluZ3MuZmluZE9uZUFuZFVwZGF0ZShcclxuICAgICAgeyB1c2VySWQgfSxcclxuICAgICAge1xyXG4gICAgICAgICRzZXQ6IHtcclxuICAgICAgICAgIHRvdHA6IHtcclxuICAgICAgICAgICAgZW5hYmxlZDogdHJ1ZSxcclxuICAgICAgICAgICAgc2VjcmV0LFxyXG4gICAgICAgICAgICB2ZXJpZmllZEF0OiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgICAgICBiYWNrdXBDb2Rlc0dlbmVyYXRlZDogdHJ1ZSxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBwcmltYXJ5TWV0aG9kOiAndG90cCcsXHJcbiAgICAgICAgfSxcclxuICAgICAgICAkcHVzaDoge1xyXG4gICAgICAgICAgYmFja3VwQ29kZXM6IHsgJGVhY2g6IGhhc2hlZEJhY2t1cENvZGVzIH0sXHJcbiAgICAgICAgfSxcclxuICAgICAgfSxcclxuICAgICAgeyBuZXc6IHRydWUsIHVwc2VydDogdHJ1ZSB9XHJcbiAgICApO1xyXG5cclxuICAgIC8vIFVwZGF0ZSB1c2VyXHJcbiAgICBhd2FpdCBVc2VyLmZpbmRCeUlkQW5kVXBkYXRlKHVzZXJJZCwge1xyXG4gICAgICB0d29GYWN0b3JFbmFibGVkOiB0cnVlLFxyXG4gICAgICB0d29GYWN0b3JTZWNyZXQ6IHNlY3JldCxcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIExvZyBzdWNjZXNzXHJcbiAgICBhd2FpdCBNRkFBdWRpdExvZy5jcmVhdGUoe1xyXG4gICAgICB1c2VySWQsXHJcbiAgICAgIGFjdGlvbjogJ21mYV9lbmFibGUnLFxyXG4gICAgICBzdGF0dXM6ICdzdWNjZXNzJyxcclxuICAgICAgbWV0aG9kOiAndG90cCcsXHJcbiAgICAgIGRldGFpbHM6IHtcclxuICAgICAgICByZWFzb246ICdVc2VyIGVuYWJsZWQgVE9UUCBhdXRoZW50aWNhdGlvbicsXHJcbiAgICAgIH0sXHJcbiAgICAgIGlwQWRkcmVzczogcmVxLmlwLFxyXG4gICAgICB1c2VyQWdlbnQ6IHJlcS5nZXQoJ3VzZXItYWdlbnQnKSxcclxuICAgIH0pO1xyXG5cclxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcclxuICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgbWVzc2FnZTogJ1RPVFAgZW5hYmxlZCBzdWNjZXNzZnVsbHknLFxyXG4gICAgICBkYXRhOiB7XHJcbiAgICAgICAgYmFja3VwQ29kZXMsXHJcbiAgICAgICAgbWVzc2FnZTogJ1NhdmUgdGhlc2UgYmFja3VwIGNvZGVzIGluIGEgc2FmZSBwbGFjZS4gWW91IGNhbiB1c2UgdGhlbSB0byByZWdhaW4gYWNjZXNzIGlmIHlvdSBsb3NlIHlvdXIgYXV0aGVudGljYXRvci4nLFxyXG4gICAgICB9LFxyXG4gICAgfSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXHJcbiAgICB9KTtcclxuICB9XHJcbn07XHJcblxyXG4vKipcclxuICogU3RhcnQgRW1haWwgT1RQIFZlcmlmaWNhdGlvblxyXG4gKiDYqNiv2KEg2KfZhNiq2K3ZgtmCINmF2YYgT1RQINi52KjYsSDYp9mE2KjYsdmK2K8g2KfZhNil2YTZg9iq2LHZiNmG2YpcclxuICovXHJcbmV4cG9ydHMuaW5pdGlhdGVFbWFpbE9UUCA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB1c2VySWQgPSByZXEudXNlci5faWQ7XHJcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5maW5kQnlJZCh1c2VySWQpO1xyXG5cclxuICAgIC8vIEdlbmVyYXRlIE9UUFxyXG4gICAgY29uc3Qgb3RwRGF0YSA9IG1mYVNlcnZpY2UuZ2VuZXJhdGVFbWFpbE9UUCgpO1xyXG5cclxuICAgIC8vIEhhc2ggT1RQIGZvciBzdG9yYWdlXHJcbiAgICBjb25zdCBvdHBIYXNoID0gY3J5cHRvLmNyZWF0ZUhhc2goJ3NoYTI1NicpLnVwZGF0ZShvdHBEYXRhLmNvZGUpLmRpZ2VzdCgnaGV4Jyk7XHJcblxyXG4gICAgLy8gQ3JlYXRlIE1GQSBzZXR0aW5ncyBpZiBkb2Vzbid0IGV4aXN0XHJcbiAgICBsZXQgbWZhU2V0dGluZ3MgPSBhd2FpdCBNRkFTZXR0aW5ncy5maW5kT25lKHsgdXNlcklkIH0pO1xyXG4gICAgaWYgKCFtZmFTZXR0aW5ncykge1xyXG4gICAgICBtZmFTZXR0aW5ncyA9IGF3YWl0IE1GQVNldHRpbmdzLmNyZWF0ZSh7IHVzZXJJZCB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBMb2cgT1RQXHJcbiAgICBhd2FpdCBPVFBMb2cuY3JlYXRlKHtcclxuICAgICAgdXNlcklkLFxyXG4gICAgICBtZXRob2Q6ICdlbWFpbCcsXHJcbiAgICAgIHJlY2lwaWVudDogdXNlci5lbWFpbCxcclxuICAgICAgb3RwSGFzaCxcclxuICAgICAgZXhwaXJlc0F0OiBvdHBEYXRhLmV4cGlyZXNBdCxcclxuICAgICAgaXBBZGRyZXNzOiByZXEuaXAsXHJcbiAgICAgIHVzZXJBZ2VudDogcmVxLmdldCgndXNlci1hZ2VudCcpLFxyXG4gICAgICByZWFzb246ICdtZmFfc2V0dXAnLFxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gU2VuZCBPVFAgZW1haWxcclxuICAgIGF3YWl0IGVtYWlsU2VydmljZS5zZW5kT1RQRW1haWwodXNlci5lbWFpbCwgb3RwRGF0YS5jb2RlLCB7XHJcbiAgICAgIG5hbWU6IHVzZXIubmFtZSxcclxuICAgICAgcHVycG9zZTogJ011bHRpLUZhY3RvciBBdXRoZW50aWNhdGlvbiBTZXR1cCcsXHJcbiAgICB9KTtcclxuXHJcbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7XHJcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgIG1lc3NhZ2U6ICdPVFAgc2VudCB0byB5b3VyIGVtYWlsJyxcclxuICAgICAgZGF0YToge1xyXG4gICAgICAgIGV4cGlyZXNJbjogb3RwRGF0YS5leHBpcmVzSW4sXHJcbiAgICAgICAgcmVjaXBpZW50OiBgJHt1c2VyLmVtYWlsLnN1YnN0cmluZygwLCA1KX0qKipgLFxyXG4gICAgICB9LFxyXG4gICAgfSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXHJcbiAgICB9KTtcclxuICB9XHJcbn07XHJcblxyXG4vKipcclxuICogVmVyaWZ5IEVtYWlsIE9UUCBhbmQgRW5hYmxlXHJcbiAqINin2YTYqtit2YLZgiDZhdmGIE9UUCDYp9mE2KjYsdmK2K/ZiiDZiNiq2YHYudmK2YTZh1xyXG4gKi9cclxuZXhwb3J0cy52ZXJpZnlBbmRFbmFibGVFbWFpbE9UUCA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB1c2VySWQgPSByZXEudXNlci5faWQ7XHJcbiAgICBjb25zdCB7IGNvZGUgfSA9IHJlcS5ib2R5O1xyXG5cclxuICAgIGlmICghY29kZSkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIG1lc3NhZ2U6ICdPVFAgY29kZSBpcyByZXF1aXJlZCcsXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEZpbmQgdGhlIG1vc3QgcmVjZW50IE9UUCBsb2dcclxuICAgIGNvbnN0IG90cExvZyA9IGF3YWl0IE9UUExvZy5maW5kT25lKHsgdXNlcklkLCBtZXRob2Q6ICdlbWFpbCcgfSlcclxuICAgICAgLnNvcnQoeyBjcmVhdGVkQXQ6IC0xIH0pO1xyXG5cclxuICAgIGlmICghb3RwTG9nKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XHJcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgbWVzc2FnZTogJ05vIE9UUCByZXF1ZXN0IGZvdW5kJyxcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVmVyaWZ5IE9UUFxyXG4gICAgY29uc3QgY29kZUhhc2ggPSBjcnlwdG8uY3JlYXRlSGFzaCgnc2hhMjU2JykudXBkYXRlKGNvZGUpLmRpZ2VzdCgnaGV4Jyk7XHJcbiAgICBjb25zdCB2ZXJpZmljYXRpb24gPSBtZmFTZXJ2aWNlLnZlcmlmeU9UUChjb2RlLCBvdHBMb2cub3RwSGFzaCwgb3RwTG9nLmV4cGlyZXNBdCk7XHJcblxyXG4gICAgaWYgKCF2ZXJpZmljYXRpb24uaXNWYWxpZCkge1xyXG4gICAgICBvdHBMb2cudmVyaWZpY2F0aW9uQXR0ZW1wdHMgKz0gMTtcclxuICAgICAgYXdhaXQgb3RwTG9nLnNhdmUoKTtcclxuXHJcbiAgICAgIGF3YWl0IE1GQUF1ZGl0TG9nLmNyZWF0ZSh7XHJcbiAgICAgICAgdXNlcklkLFxyXG4gICAgICAgIGFjdGlvbjogJ3ZlcmlmaWNhdGlvbl9mYWlsZWQnLFxyXG4gICAgICAgIHN0YXR1czogJ2ZhaWxlZCcsXHJcbiAgICAgICAgbWV0aG9kOiAnZW1haWwnLFxyXG4gICAgICAgIGVycm9yOiB2ZXJpZmljYXRpb24ubWVzc2FnZSxcclxuICAgICAgICBpcEFkZHJlc3M6IHJlcS5pcCxcclxuICAgICAgICB1c2VyQWdlbnQ6IHJlcS5nZXQoJ3VzZXItYWdlbnQnKSxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIG1lc3NhZ2U6IHZlcmlmaWNhdGlvbi5tZXNzYWdlLFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBVcGRhdGUgT1RQIGxvZ1xyXG4gICAgb3RwTG9nLnN0YXR1cyA9ICd2ZXJpZmllZCc7XHJcbiAgICBvdHBMb2cudmVyaWZpZWRBdCA9IG5ldyBEYXRlKCk7XHJcbiAgICBhd2FpdCBvdHBMb2cuc2F2ZSgpO1xyXG5cclxuICAgIC8vIFVwZGF0ZSBNRkEgc2V0dGluZ3NcclxuICAgIGxldCBtZmFTZXR0aW5ncyA9IGF3YWl0IE1GQVNldHRpbmdzLmZpbmRPbmVBbmRVcGRhdGUoXHJcbiAgICAgIHsgdXNlcklkIH0sXHJcbiAgICAgIHtcclxuICAgICAgICAkc2V0OiB7XHJcbiAgICAgICAgICBlbWFpbE9UUDoge1xyXG4gICAgICAgICAgICBlbmFibGVkOiB0cnVlLFxyXG4gICAgICAgICAgICB2ZXJpZmllZEF0OiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIHByaW1hcnlNZXRob2Q6ICdlbWFpbCcsXHJcbiAgICAgICAgfSxcclxuICAgICAgfSxcclxuICAgICAgeyBuZXc6IHRydWUsIHVwc2VydDogdHJ1ZSB9XHJcbiAgICApO1xyXG5cclxuICAgIC8vIExvZyBzdWNjZXNzXHJcbiAgICBhd2FpdCBNRkFBdWRpdExvZy5jcmVhdGUoe1xyXG4gICAgICB1c2VySWQsXHJcbiAgICAgIGFjdGlvbjogJ21mYV9lbmFibGUnLFxyXG4gICAgICBzdGF0dXM6ICdzdWNjZXNzJyxcclxuICAgICAgbWV0aG9kOiAnZW1haWwnLFxyXG4gICAgICBkZXRhaWxzOiB7XHJcbiAgICAgICAgcmVhc29uOiAnVXNlciBlbmFibGVkIEVtYWlsIE9UUCBhdXRoZW50aWNhdGlvbicsXHJcbiAgICAgIH0sXHJcbiAgICAgIGlwQWRkcmVzczogcmVxLmlwLFxyXG4gICAgICB1c2VyQWdlbnQ6IHJlcS5nZXQoJ3VzZXItYWdlbnQnKSxcclxuICAgIH0pO1xyXG5cclxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcclxuICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgbWVzc2FnZTogJ0VtYWlsIE9UUCBlbmFibGVkIHN1Y2Nlc3NmdWxseScsXHJcbiAgICB9KTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xyXG4gICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcclxuICAgIH0pO1xyXG4gIH1cclxufTtcclxuXHJcbi8qKlxyXG4gKiBJbml0aWF0ZSBTTVMgT1RQIFZlcmlmaWNhdGlvblxyXG4gKiDYqNiv2KEg2KfZhNiq2K3ZgtmCINmF2YYgT1RQINi52KjYsSDYp9mE2LHYs9in2KbZhCDYp9mE2YbYtdmK2KlcclxuICovXHJcbmV4cG9ydHMuaW5pdGlhdGVTTVNPVFAgPSBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgdXNlcklkID0gcmVxLnVzZXIuX2lkO1xyXG4gICAgY29uc3QgeyBwaG9uZU51bWJlciwgY291bnRyeUNvZGUgfSA9IHJlcS5ib2R5O1xyXG5cclxuICAgIGlmICghcGhvbmVOdW1iZXIgfHwgIWNvdW50cnlDb2RlKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XHJcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgbWVzc2FnZTogJ1Bob25lIG51bWJlciBhbmQgY291bnRyeSBjb2RlIGFyZSByZXF1aXJlZCcsXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRCeUlkKHVzZXJJZCk7XHJcblxyXG4gICAgLy8gR2VuZXJhdGUgT1RQXHJcbiAgICBjb25zdCBvdHBEYXRhID0gbWZhU2VydmljZS5nZW5lcmF0ZVNNU09UUCgpO1xyXG4gICAgY29uc3Qgb3RwSGFzaCA9IGNyeXB0by5jcmVhdGVIYXNoKCdzaGEyNTYnKS51cGRhdGUob3RwRGF0YS5jb2RlKS5kaWdlc3QoJ2hleCcpO1xyXG5cclxuICAgIC8vIENyZWF0ZSBNRkEgc2V0dGluZ3MgaWYgZG9lc24ndCBleGlzdFxyXG4gICAgbGV0IG1mYVNldHRpbmdzID0gYXdhaXQgTUZBU2V0dGluZ3MuZmluZE9uZSh7IHVzZXJJZCB9KTtcclxuICAgIGlmICghbWZhU2V0dGluZ3MpIHtcclxuICAgICAgbWZhU2V0dGluZ3MgPSBhd2FpdCBNRkFTZXR0aW5ncy5jcmVhdGUoeyB1c2VySWQgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gTG9nIE9UUFxyXG4gICAgYXdhaXQgT1RQTG9nLmNyZWF0ZSh7XHJcbiAgICAgIHVzZXJJZCxcclxuICAgICAgbWV0aG9kOiAnc21zJyxcclxuICAgICAgcmVjaXBpZW50OiBwaG9uZU51bWJlcixcclxuICAgICAgb3RwSGFzaCxcclxuICAgICAgZXhwaXJlc0F0OiBvdHBEYXRhLmV4cGlyZXNBdCxcclxuICAgICAgaXBBZGRyZXNzOiByZXEuaXAsXHJcbiAgICAgIHVzZXJBZ2VudDogcmVxLmdldCgndXNlci1hZ2VudCcpLFxyXG4gICAgICByZWFzb246ICdtZmFfc2V0dXAnLFxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gU2VuZCBPVFAgU01TXHJcbiAgICBjb25zdCBmdWxsUGhvbmVOdW1iZXIgPSBgJHtjb3VudHJ5Q29kZX0ke3Bob25lTnVtYmVyfWA7XHJcbiAgICBhd2FpdCBzbXNTZXJ2aWNlLnNlbmRPVFAoZnVsbFBob25lTnVtYmVyLCBvdHBEYXRhLmNvZGUsIHtcclxuICAgICAgbmFtZTogdXNlci5uYW1lLFxyXG4gICAgICBwdXJwb3NlOiAnTXVsdGktRmFjdG9yIEF1dGhlbnRpY2F0aW9uJyxcclxuICAgIH0pO1xyXG5cclxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcclxuICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgbWVzc2FnZTogJ09UUCBzZW50IHRvIHlvdXIgcGhvbmUnLFxyXG4gICAgICBkYXRhOiB7XHJcbiAgICAgICAgZXhwaXJlc0luOiBvdHBEYXRhLmV4cGlyZXNJbixcclxuICAgICAgICByZWNpcGllbnQ6IGAke3Bob25lTnVtYmVyLnN1YnN0cmluZygwLCAzKX0qKipgLFxyXG4gICAgICB9LFxyXG4gICAgfSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXHJcbiAgICB9KTtcclxuICB9XHJcbn07XHJcblxyXG4vKipcclxuICogVmVyaWZ5IFNNUyBPVFAgYW5kIEVuYWJsZVxyXG4gKiDYp9mE2KrYrdmC2YIg2YXZhiBPVFAg2KfZhNix2LPYp9im2YQg2KfZhNmG2LXZitipINmI2KrZgdi52YrZhNmHXHJcbiAqL1xyXG5leHBvcnRzLnZlcmlmeUFuZEVuYWJsZVNNU09UUCA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB1c2VySWQgPSByZXEudXNlci5faWQ7XHJcbiAgICBjb25zdCB7IGNvZGUsIHBob25lTnVtYmVyLCBjb3VudHJ5Q29kZSB9ID0gcmVxLmJvZHk7XHJcblxyXG4gICAgaWYgKCFjb2RlIHx8ICFwaG9uZU51bWJlciB8fCAhY291bnRyeUNvZGUpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBtZXNzYWdlOiAnQ29kZSwgcGhvbmUgbnVtYmVyLCBhbmQgY291bnRyeSBjb2RlIGFyZSByZXF1aXJlZCcsXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEZpbmQgdGhlIG1vc3QgcmVjZW50IE9UUCBsb2dcclxuICAgIGNvbnN0IG90cExvZyA9IGF3YWl0IE9UUExvZy5maW5kT25lKHsgdXNlcklkLCBtZXRob2Q6ICdzbXMnIH0pXHJcbiAgICAgIC5zb3J0KHsgY3JlYXRlZEF0OiAtMSB9KTtcclxuXHJcbiAgICBpZiAoIW90cExvZykge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIG1lc3NhZ2U6ICdObyBPVFAgcmVxdWVzdCBmb3VuZCcsXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFZlcmlmeSBPVFBcclxuICAgIGNvbnN0IHZlcmlmaWNhdGlvbiA9IG1mYVNlcnZpY2UudmVyaWZ5T1RQKGNvZGUsIG90cExvZy5vdHBIYXNoLCBvdHBMb2cuZXhwaXJlc0F0KTtcclxuXHJcbiAgICBpZiAoIXZlcmlmaWNhdGlvbi5pc1ZhbGlkKSB7XHJcbiAgICAgIG90cExvZy52ZXJpZmljYXRpb25BdHRlbXB0cyArPSAxO1xyXG4gICAgICBhd2FpdCBvdHBMb2cuc2F2ZSgpO1xyXG5cclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBtZXNzYWdlOiB2ZXJpZmljYXRpb24ubWVzc2FnZSxcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVXBkYXRlIE9UUCBsb2dcclxuICAgIG90cExvZy5zdGF0dXMgPSAndmVyaWZpZWQnO1xyXG4gICAgb3RwTG9nLnZlcmlmaWVkQXQgPSBuZXcgRGF0ZSgpO1xyXG4gICAgYXdhaXQgb3RwTG9nLnNhdmUoKTtcclxuXHJcbiAgICAvLyBVcGRhdGUgTUZBIHNldHRpbmdzXHJcbiAgICBjb25zdCBtZmFTZXR0aW5ncyA9IGF3YWl0IE1GQVNldHRpbmdzLmZpbmRPbmVBbmRVcGRhdGUoXHJcbiAgICAgIHsgdXNlcklkIH0sXHJcbiAgICAgIHtcclxuICAgICAgICAkc2V0OiB7XHJcbiAgICAgICAgICBzbXNPVFA6IHtcclxuICAgICAgICAgICAgZW5hYmxlZDogdHJ1ZSxcclxuICAgICAgICAgICAgcGhvbmVOdW1iZXIsXHJcbiAgICAgICAgICAgIGNvdW50cnlDb2RlLFxyXG4gICAgICAgICAgICB2ZXJpZmllZEF0OiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIHByaW1hcnlNZXRob2Q6ICdzbXMnLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0sXHJcbiAgICAgIHsgbmV3OiB0cnVlLCB1cHNlcnQ6IHRydWUgfVxyXG4gICAgKTtcclxuXHJcbiAgICAvLyBMb2cgc3VjY2Vzc1xyXG4gICAgYXdhaXQgTUZBQXVkaXRMb2cuY3JlYXRlKHtcclxuICAgICAgdXNlcklkLFxyXG4gICAgICBhY3Rpb246ICdtZmFfZW5hYmxlJyxcclxuICAgICAgc3RhdHVzOiAnc3VjY2VzcycsXHJcbiAgICAgIG1ldGhvZDogJ3NtcycsXHJcbiAgICAgIGRldGFpbHM6IHtcclxuICAgICAgICByZWFzb246ICdVc2VyIGVuYWJsZWQgU01TIE9UUCBhdXRoZW50aWNhdGlvbicsXHJcbiAgICAgICAgcGhvbmVOdW1iZXIsXHJcbiAgICAgIH0sXHJcbiAgICAgIGlwQWRkcmVzczogcmVxLmlwLFxyXG4gICAgICB1c2VyQWdlbnQ6IHJlcS5nZXQoJ3VzZXItYWdlbnQnKSxcclxuICAgIH0pO1xyXG5cclxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcclxuICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgbWVzc2FnZTogJ1NNUyBPVFAgZW5hYmxlZCBzdWNjZXNzZnVsbHknLFxyXG4gICAgfSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXHJcbiAgICB9KTtcclxuICB9XHJcbn07XHJcblxyXG4vLyA9PT09PT09PT09PT0gVkVSSUZJQ0FUSU9OIEVORFBPSU5UUyA9PT09PT09PT09PT1cclxuXHJcbi8qKlxyXG4gKiBWZXJpZnkgTUZBIER1cmluZyBMb2dpblxyXG4gKiDYp9mE2KrYrdmC2YIg2YXZhiBNRkEg2KPYq9mG2KfYoSDYqtiz2KzZitmEINin2YTYr9iu2YjZhFxyXG4gKi9cclxuZXhwb3J0cy52ZXJpZnlNRkFMb2dpbiA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IHNlc3Npb25JZCwgdG9rZW4sIG1ldGhvZCB9ID0gcmVxLmJvZHk7XHJcblxyXG4gICAgaWYgKCFzZXNzaW9uSWQgfHwgIXRva2VuIHx8ICFtZXRob2QpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBtZXNzYWdlOiAnU2Vzc2lvbiBJRCwgdG9rZW4sIGFuZCBtZXRob2QgYXJlIHJlcXVpcmVkJyxcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRmluZCBNRkEgc2Vzc2lvblxyXG4gICAgY29uc3QgbWZhU2Vzc2lvbiA9IGF3YWl0IE1GQVNlc3Npb24uZmluZE9uZSh7IHNlc3Npb25JZCB9KTtcclxuICAgIGlmICghbWZhU2Vzc2lvbikge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIG1lc3NhZ2U6ICdJbnZhbGlkIE1GQSBzZXNzaW9uJyxcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVmFsaWRhdGUgc2Vzc2lvblxyXG4gICAgY29uc3QgdmFsaWRhdGlvbiA9IG1mYVNlcnZpY2UudmFsaWRhdGVNRkFTZXNzaW9uKG1mYVNlc3Npb24pO1xyXG4gICAgaWYgKCF2YWxpZGF0aW9uLmlzVmFsaWQpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBtZXNzYWdlOiB2YWxpZGF0aW9uLm1lc3NhZ2UsXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEdldCB1c2VyIGFuZCBNRkEgc2V0dGluZ3NcclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRCeUlkKG1mYVNlc3Npb24udXNlcklkKS5zZWxlY3QoJyt0d29GYWN0b3JTZWNyZXQnKTtcclxuICAgIGNvbnN0IG1mYVNldHRpbmdzID0gYXdhaXQgTUZBU2V0dGluZ3MuZmluZE9uZSh7IHVzZXJJZDogbWZhU2Vzc2lvbi51c2VySWQgfSk7XHJcblxyXG4gICAgbGV0IGlzVmFsaWQgPSBmYWxzZTtcclxuXHJcbiAgICAvLyBWZXJpZnkgYmFzZWQgb24gbWV0aG9kXHJcbiAgICBpZiAobWV0aG9kID09PSAndG90cCcpIHtcclxuICAgICAgaXNWYWxpZCA9IG1mYVNlcnZpY2UudmVyaWZ5VE9UUCh0b2tlbiwgdXNlci50d29GYWN0b3JTZWNyZXQpO1xyXG4gICAgfSBlbHNlIGlmIChtZXRob2QgPT09ICdiYWNrdXAnKSB7XHJcbiAgICAgIC8vIFZlcmlmeSBiYWNrdXAgY29kZVxyXG4gICAgICBjb25zdCBiYWNrdXBDb2RlID0gbWZhU2V0dGluZ3MuYmFja3VwQ29kZXMuZmluZChcclxuICAgICAgICAoYmMpID0+ICFiYy51c2VkICYmIG1mYVNlcnZpY2UudmVyaWZ5QmFja3VwQ29kZSh0b2tlbiwgYmMuY29kZSlcclxuICAgICAgKTtcclxuICAgICAgaWYgKGJhY2t1cENvZGUpIHtcclxuICAgICAgICBiYWNrdXBDb2RlLnVzZWQgPSB0cnVlO1xyXG4gICAgICAgIGJhY2t1cENvZGUudXNlZEF0ID0gbmV3IERhdGUoKTtcclxuICAgICAgICBhd2FpdCBtZmFTZXR0aW5ncy5zYXZlKCk7XHJcbiAgICAgICAgaXNWYWxpZCA9IHRydWU7XHJcblxyXG4gICAgICAgIC8vIExvZyBiYWNrdXAgY29kZSB1c2FnZVxyXG4gICAgICAgIGF3YWl0IE1GQUF1ZGl0TG9nLmNyZWF0ZSh7XHJcbiAgICAgICAgICB1c2VySWQ6IG1mYVNlc3Npb24udXNlcklkLFxyXG4gICAgICAgICAgYWN0aW9uOiAnYmFja3VwX2NvZGVfdXNlZCcsXHJcbiAgICAgICAgICBzdGF0dXM6ICdzdWNjZXNzJyxcclxuICAgICAgICAgIGlwQWRkcmVzczogcmVxLmlwLFxyXG4gICAgICAgICAgdXNlckFnZW50OiByZXEuZ2V0KCd1c2VyLWFnZW50JyksXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAoIWlzVmFsaWQpIHtcclxuICAgICAgbWZhU2Vzc2lvbi5hdHRlbXB0cyArPSAxO1xyXG4gICAgICBhd2FpdCBtZmFTZXNzaW9uLnNhdmUoKTtcclxuXHJcbiAgICAgIGF3YWl0IE1GQUF1ZGl0TG9nLmNyZWF0ZSh7XHJcbiAgICAgICAgdXNlcklkOiBtZmFTZXNzaW9uLnVzZXJJZCxcclxuICAgICAgICBhY3Rpb246ICd2ZXJpZmljYXRpb25fZmFpbGVkJyxcclxuICAgICAgICBzdGF0dXM6ICdmYWlsZWQnLFxyXG4gICAgICAgIG1ldGhvZCxcclxuICAgICAgICBlcnJvcjogJ0ludmFsaWQgTUZBIHRva2VuJyxcclxuICAgICAgICBpcEFkZHJlc3M6IHJlcS5pcCxcclxuICAgICAgICB1c2VyQWdlbnQ6IHJlcS5nZXQoJ3VzZXItYWdlbnQnKSxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIG1lc3NhZ2U6ICdJbnZhbGlkIE1GQSB0b2tlbicsXHJcbiAgICAgICAgYXR0ZW1wdHNSZW1haW5pbmc6IHZhbGlkYXRpb24uYXR0ZW1wdHNSZW1haW5pbmcgLSAxLFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBNRkEgdmVyaWZpZWRcclxuICAgIG1mYVNlc3Npb24uc3RhdHVzID0gJ3ZlcmlmaWVkJztcclxuICAgIG1mYVNlc3Npb24udmVyaWZpZWRBdCA9IG5ldyBEYXRlKCk7XHJcbiAgICBhd2FpdCBtZmFTZXNzaW9uLnNhdmUoKTtcclxuXHJcbiAgICAvLyBMb2cgc3VjY2Vzc1xyXG4gICAgYXdhaXQgTUZBQXVkaXRMb2cuY3JlYXRlKHtcclxuICAgICAgdXNlcklkOiBtZmFTZXNzaW9uLnVzZXJJZCxcclxuICAgICAgYWN0aW9uOiAndmVyaWZpY2F0aW9uX3N1Y2Nlc3MnLFxyXG4gICAgICBzdGF0dXM6ICdzdWNjZXNzJyxcclxuICAgICAgbWV0aG9kLFxyXG4gICAgICBpcEFkZHJlc3M6IHJlcS5pcCxcclxuICAgICAgdXNlckFnZW50OiByZXEuZ2V0KCd1c2VyLWFnZW50JyksXHJcbiAgICB9KTtcclxuXHJcbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7XHJcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgIG1lc3NhZ2U6ICdNRkEgdmVyaWZpY2F0aW9uIHN1Y2Nlc3NmdWwnLFxyXG4gICAgICBkYXRhOiB7XHJcbiAgICAgICAgc2Vzc2lvbklkLFxyXG4gICAgICAgIHVzZXJJZDogbWZhU2Vzc2lvbi51c2VySWQsXHJcbiAgICAgICAgdmVyaWZpZWQ6IHRydWUsXHJcbiAgICAgIH0sXHJcbiAgICB9KTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xyXG4gICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcclxuICAgIH0pO1xyXG4gIH1cclxufTtcclxuXHJcbi8vID09PT09PT09PT09PSBTRVRUSU5HUyBFTkRQT0lOVFMgPT09PT09PT09PT09XHJcblxyXG4vKipcclxuICogR2V0IE1GQSBTZXR0aW5nc1xyXG4gKiDYp9mE2K3YtdmI2YQg2LnZhNmJINil2LnYr9in2K/Yp9iqIE1GQVxyXG4gKi9cclxuZXhwb3J0cy5nZXRNRkFTZXR0aW5ncyA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB1c2VySWQgPSByZXEudXNlci5faWQ7XHJcblxyXG4gICAgbGV0IG1mYVNldHRpbmdzID0gYXdhaXQgTUZBU2V0dGluZ3MuZmluZE9uZSh7IHVzZXJJZCB9KTtcclxuICAgIGlmICghbWZhU2V0dGluZ3MpIHtcclxuICAgICAgbWZhU2V0dGluZ3MgPSBhd2FpdCBNRkFTZXR0aW5ncy5jcmVhdGUoeyB1c2VySWQgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUmVtb3ZlIHNlbnNpdGl2ZSBkYXRhXHJcbiAgICBjb25zdCBzZWN1cmVTZXR0aW5ncyA9IG1mYVNldHRpbmdzLnRvT2JqZWN0KCk7XHJcbiAgICBpZiAoc2VjdXJlU2V0dGluZ3MudG90cCkgZGVsZXRlIHNlY3VyZVNldHRpbmdzLnRvdHAuc2VjcmV0O1xyXG4gICAgaWYgKHNlY3VyZVNldHRpbmdzLnJlY292ZXJ5KSBkZWxldGUgc2VjdXJlU2V0dGluZ3MucmVjb3ZlcnkucmVjb3ZlcnlLZXk7XHJcbiAgICBzZWN1cmVTZXR0aW5ncy5iYWNrdXBDb2RlcyA9IHNlY3VyZVNldHRpbmdzLmJhY2t1cENvZGVzLm1hcCgoeyB1c2VkLCB1c2VkQXQgfSkgPT4gKHtcclxuICAgICAgdXNlZCxcclxuICAgICAgdXNlZEF0LFxyXG4gICAgfSkpO1xyXG5cclxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcclxuICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgZGF0YTogc2VjdXJlU2V0dGluZ3MsXHJcbiAgICB9KTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xyXG4gICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcclxuICAgIH0pO1xyXG4gIH1cclxufTtcclxuXHJcbi8qKlxyXG4gKiBEaXNhYmxlIE1GQSBNZXRob2RcclxuICog2KrYudi32YrZhCDYt9ix2YrZgtipIE1GQVxyXG4gKi9cclxuZXhwb3J0cy5kaXNhYmxlTUZBTWV0aG9kID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHVzZXJJZCA9IHJlcS51c2VyLl9pZDtcclxuICAgIGNvbnN0IHsgbWV0aG9kIH0gPSByZXEuYm9keTtcclxuXHJcbiAgICBpZiAoIVsndG90cCcsICdlbWFpbCcsICdzbXMnXS5pbmNsdWRlcyhtZXRob2QpKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XHJcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgbWVzc2FnZTogJ0ludmFsaWQgTUZBIG1ldGhvZCcsXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IG1mYVNldHRpbmdzID0gYXdhaXQgTUZBU2V0dGluZ3MuZmluZE9uZSh7IHVzZXJJZCB9KTtcclxuXHJcbiAgICAvLyBDYW5ub3QgZGlzYWJsZSBhbGwgbWV0aG9kc1xyXG4gICAgY29uc3QgZW5hYmxlZE1ldGhvZHMgPSBbXHJcbiAgICAgIG1mYVNldHRpbmdzPy50b3RwPy5lbmFibGVkLFxyXG4gICAgICBtZmFTZXR0aW5ncz8uZW1haWxPVFA/LmVuYWJsZWQsXHJcbiAgICAgIG1mYVNldHRpbmdzPy5zbXNPVFA/LmVuYWJsZWQsXHJcbiAgICBdLmZpbHRlcihCb29sZWFuKTtcclxuXHJcbiAgICBpZiAoZW5hYmxlZE1ldGhvZHMubGVuZ3RoIDw9IDEpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBtZXNzYWdlOiAnQXQgbGVhc3Qgb25lIE1GQSBtZXRob2QgbXVzdCByZW1haW4gZW5hYmxlZCcsXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIERpc2FibGUgbWV0aG9kXHJcbiAgICBjb25zdCBtZXRob2RGaWVsZCA9IG1ldGhvZCA9PT0gJ3RvdHAnID8gJ3RvdHAnIDogbWV0aG9kID09PSAnZW1haWwnID8gJ2VtYWlsT1RQJyA6ICdzbXNPVFAnO1xyXG4gICAgY29uc3QgdXBkYXRlRGF0YSA9IHt9O1xyXG4gICAgdXBkYXRlRGF0YVtgJHttZXRob2RGaWVsZH0uZW5hYmxlZGBdID0gZmFsc2U7XHJcblxyXG4gICAgY29uc3QgdXBkYXRlZCA9IGF3YWl0IE1GQVNldHRpbmdzLmZpbmRPbmVBbmRVcGRhdGUoXHJcbiAgICAgIHsgdXNlcklkIH0sXHJcbiAgICAgIHsgJHNldDogdXBkYXRlRGF0YSB9LFxyXG4gICAgICB7IG5ldzogdHJ1ZSB9XHJcbiAgICApO1xyXG5cclxuICAgIC8vIExvZyBhY3Rpb25cclxuICAgIGF3YWl0IE1GQUF1ZGl0TG9nLmNyZWF0ZSh7XHJcbiAgICAgIHVzZXJJZCxcclxuICAgICAgYWN0aW9uOiAnbWZhX2Rpc2FibGUnLFxyXG4gICAgICBzdGF0dXM6ICdzdWNjZXNzJyxcclxuICAgICAgbWV0aG9kLFxyXG4gICAgICBkZXRhaWxzOiB7XHJcbiAgICAgICAgcmVhc29uOiBgVXNlciBkaXNhYmxlZCAke21ldGhvZH0gYXV0aGVudGljYXRpb25gLFxyXG4gICAgICB9LFxyXG4gICAgICBpcEFkZHJlc3M6IHJlcS5pcCxcclxuICAgICAgdXNlckFnZW50OiByZXEuZ2V0KCd1c2VyLWFnZW50JyksXHJcbiAgICB9KTtcclxuXHJcbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7XHJcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgIG1lc3NhZ2U6IGAke21ldGhvZH0gTUZBIG1ldGhvZCBkaXNhYmxlZCBzdWNjZXNzZnVsbHlgLFxyXG4gICAgfSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXHJcbiAgICB9KTtcclxuICB9XHJcbn07XHJcblxyXG4vLyA9PT09PT09PT09PT0gVFJVU1RFRCBERVZJQ0UgRU5EUE9JTlRTID09PT09PT09PT09PVxyXG5cclxuLyoqXHJcbiAqIFRydXN0IEN1cnJlbnQgRGV2aWNlXHJcbiAqINmI2LbYuSDYudmE2KfZhdipINi52YTZiSDYp9mE2KzZh9in2LIg2KfZhNit2KfZhNmKINmD2YXZiNir2YjZglxyXG4gKi9cclxuZXhwb3J0cy50cnVzdERldmljZSA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB1c2VySWQgPSByZXEudXNlci5faWQ7XHJcbiAgICBjb25zdCB7IGRldmljZU5hbWUsIGRldmljZUZpbmdlcnByaW50IH0gPSByZXEuYm9keTtcclxuXHJcbiAgICBpZiAoIWRldmljZUZpbmdlcnByaW50KSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XHJcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgbWVzc2FnZTogJ0RldmljZSBmaW5nZXJwcmludCBpcyByZXF1aXJlZCcsXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEdlbmVyYXRlIGRldmljZSB0b2tlblxyXG4gICAgY29uc3QgZGV2aWNlVG9rZW4gPSBtZmFTZXJ2aWNlLmdlbmVyYXRlVHJ1c3RlZERldmljZVRva2VuKHVzZXJJZCwgZGV2aWNlRmluZ2VycHJpbnQpO1xyXG5cclxuICAgIGNvbnN0IHRydXN0ZWREZXZpY2UgPSBhd2FpdCBUcnVzdGVkRGV2aWNlLmNyZWF0ZSh7XHJcbiAgICAgIHVzZXJJZCxcclxuICAgICAgZGV2aWNlSWQ6IGNyeXB0by5yYW5kb21CeXRlcygxMikudG9TdHJpbmcoJ2hleCcpLFxyXG4gICAgICBkZXZpY2VOYW1lOiBkZXZpY2VOYW1lIHx8ICdVbmtub3duIERldmljZScsXHJcbiAgICAgIGZpbmdlcnByaW50OiBkZXZpY2VGaW5nZXJwcmludCxcclxuICAgICAgdG9rZW46IGRldmljZVRva2VuLnRva2VuLFxyXG4gICAgICBpcEFkZHJlc3M6IHJlcS5pcCxcclxuICAgICAgdXNlckFnZW50OiByZXEuZ2V0KCd1c2VyLWFnZW50JyksXHJcbiAgICAgIGV4cGlyZXNBdDogZGV2aWNlVG9rZW4uZXhwaXJlc0F0LFxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gTG9nIGFjdGlvblxyXG4gICAgYXdhaXQgTUZBQXVkaXRMb2cuY3JlYXRlKHtcclxuICAgICAgdXNlcklkLFxyXG4gICAgICBhY3Rpb246ICdkZXZpY2VfdHJ1c3RlZCcsXHJcbiAgICAgIHN0YXR1czogJ3N1Y2Nlc3MnLFxyXG4gICAgICBkZXRhaWxzOiB7XHJcbiAgICAgICAgZGV2aWNlTmFtZTogZGV2aWNlTmFtZSB8fCAnVW5rbm93biBEZXZpY2UnLFxyXG4gICAgICB9LFxyXG4gICAgICBpcEFkZHJlc3M6IHJlcS5pcCxcclxuICAgICAgdXNlckFnZW50OiByZXEuZ2V0KCd1c2VyLWFnZW50JyksXHJcbiAgICB9KTtcclxuXHJcbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7XHJcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgIG1lc3NhZ2U6ICdEZXZpY2UgdHJ1c3RlZCBzdWNjZXNzZnVsbHknLFxyXG4gICAgICBkYXRhOiB7XHJcbiAgICAgICAgZGV2aWNlVG9rZW46IGRldmljZVRva2VuLnRva2VuLFxyXG4gICAgICAgIGV4cGlyZXNBdDogZGV2aWNlVG9rZW4uZXhwaXJlc0F0LFxyXG4gICAgICB9LFxyXG4gICAgfSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXHJcbiAgICB9KTtcclxuICB9XHJcbn07XHJcblxyXG4vKipcclxuICogR2V0IFRydXN0ZWQgRGV2aWNlc1xyXG4gKiDYp9mE2K3YtdmI2YQg2LnZhNmJINmC2KfYptmF2Kkg2KfZhNij2KzZh9iy2Kkg2KfZhNmF2YjYq9mI2YLYqVxyXG4gKi9cclxuZXhwb3J0cy5nZXRUcnVzdGVkRGV2aWNlcyA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB1c2VySWQgPSByZXEudXNlci5faWQ7XHJcblxyXG4gICAgY29uc3QgZGV2aWNlcyA9IGF3YWl0IFRydXN0ZWREZXZpY2UuZmluZCh7XHJcbiAgICAgIHVzZXJJZCxcclxuICAgICAgaXNBY3RpdmU6IHRydWUsXHJcbiAgICAgIGV4cGlyZXNBdDogeyAkZ3Q6IG5ldyBEYXRlKCkgfSxcclxuICAgIH0pLnNlbGVjdCgnLXRva2VuJyk7XHJcblxyXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24oe1xyXG4gICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICBkYXRhOiBkZXZpY2VzLFxyXG4gICAgfSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXHJcbiAgICB9KTtcclxuICB9XHJcbn07XHJcblxyXG4vKipcclxuICogUmV2b2tlIFRydXN0ZWQgRGV2aWNlXHJcbiAqINil2YTYutin2KEg2YjYtti5INin2YTYudmE2KfZhdipINi52YTZiSDYrNmH2KfYslxyXG4gKi9cclxuZXhwb3J0cy5yZXZva2VUcnVzdGVkRGV2aWNlID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHVzZXJJZCA9IHJlcS51c2VyLl9pZDtcclxuICAgIGNvbnN0IHsgZGV2aWNlSWQgfSA9IHJlcS5wYXJhbXM7XHJcblxyXG4gICAgY29uc3QgZGV2aWNlID0gYXdhaXQgVHJ1c3RlZERldmljZS5maW5kT25lQW5kVXBkYXRlKFxyXG4gICAgICB7IF9pZDogZGV2aWNlSWQsIHVzZXJJZCB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgaXNBY3RpdmU6IGZhbHNlLFxyXG4gICAgICAgIHJldm9rZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgICByZXZva2VSZWFzb246ICdVc2VyIHJldm9rZWQgdHJ1c3QnLFxyXG4gICAgICB9LFxyXG4gICAgICB7IG5ldzogdHJ1ZSB9XHJcbiAgICApO1xyXG5cclxuICAgIGlmICghZGV2aWNlKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7XHJcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgbWVzc2FnZTogJ0RldmljZSBub3QgZm91bmQnLFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBMb2cgYWN0aW9uXHJcbiAgICBhd2FpdCBNRkFBdWRpdExvZy5jcmVhdGUoe1xyXG4gICAgICB1c2VySWQsXHJcbiAgICAgIGFjdGlvbjogJ2RldmljZV9yZXZva2VkJyxcclxuICAgICAgc3RhdHVzOiAnc3VjY2VzcycsXHJcbiAgICAgIGRldGFpbHM6IHtcclxuICAgICAgICBkZXZpY2VOYW1lOiBkZXZpY2UuZGV2aWNlTmFtZSxcclxuICAgICAgfSxcclxuICAgICAgaXBBZGRyZXNzOiByZXEuaXAsXHJcbiAgICAgIHVzZXJBZ2VudDogcmVxLmdldCgndXNlci1hZ2VudCcpLFxyXG4gICAgfSk7XHJcblxyXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24oe1xyXG4gICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICBtZXNzYWdlOiAnRGV2aWNlIHJldm9rZWQgc3VjY2Vzc2Z1bGx5JyxcclxuICAgIH0pO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XHJcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxyXG4gICAgfSk7XHJcbiAgfVxyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzO1xyXG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE1BQU1BLE1BQU0sR0FBR0MsT0FBTyxDQUFDLFFBQVEsQ0FBQztBQUNoQyxNQUFNQyxVQUFVLEdBQUdELE9BQU8sQ0FBQyx3QkFBd0IsQ0FBQztBQUNwRCxNQUFNRSxZQUFZLEdBQUdGLE9BQU8sQ0FBQywwQkFBMEIsQ0FBQztBQUN4RCxNQUFNRyxVQUFVLEdBQUdILE9BQU8sQ0FBQyx3QkFBd0IsQ0FBQztBQUNwRCxNQUFNO0VBQ0pJLFdBQVc7RUFDWEMsVUFBVTtFQUNWQyxNQUFNO0VBQ05DLFdBQVc7RUFDWEM7QUFDRixDQUFDLEdBQUdSLE9BQU8sQ0FBQyxzQkFBc0IsQ0FBQztBQUNuQyxNQUFNO0VBQUVTO0FBQUssQ0FBQyxHQUFHVCxPQUFPLENBQUMsbUJBQW1CLENBQUM7O0FBRTdDOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0FVLE9BQU8sQ0FBQ0MsZ0JBQWdCLEdBQUcsT0FBT0MsR0FBRyxFQUFFQyxHQUFHLEtBQUs7RUFDN0MsSUFBSTtJQUNGLE1BQU1DLEtBQUssR0FBR2IsVUFBVSxDQUFDVSxnQkFBZ0IsQ0FBQyxDQUFDO0lBQzNDRSxHQUFHLENBQUNFLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO01BQ25CQyxPQUFPLEVBQUUsSUFBSTtNQUNiQyxJQUFJLEVBQUVKO0lBQ1IsQ0FBQyxDQUFDO0VBQ0osQ0FB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