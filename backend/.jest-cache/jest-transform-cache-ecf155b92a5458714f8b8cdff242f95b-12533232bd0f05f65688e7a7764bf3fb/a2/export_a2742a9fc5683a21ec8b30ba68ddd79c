edb382dc614cf97d1e858cceeab17273
/**
 * Export Routes
 * Data Export API Endpoints (PDF, Excel, CSV)
 *
 * Routes:
 * - POST /api/export/pdf       - Export data as PDF
 * - POST /api/export/excel     - Export data as Excel
 * - POST /api/export/csv       - Export data as CSV
 * - GET  /api/export/status/:id - Get export status
 */

const express = require('express');
const router = express.Router();
const PDFDocument = require('pdfkit');
const {
  stringify
} = require('csv-stringify/sync');
const exceljs = require('exceljs');
const {
  authenticate
} = require('../middleware/auth');
const fs = require('fs');
const path = require('path');

// Ensure exports directory exists
const exportsDir = path.join(__dirname, '../exports');
if (!fs.existsSync(exportsDir)) {
  fs.mkdirSync(exportsDir, {
    recursive: true
  });
}

/**
 * @route   POST /api/export/pdf
 * @access  Private
 * @body    {Object} data - Data to export
 * @body    {String} title - Report title
 * @body    {String} format - Layout format (portrait/landscape)
 * @returns {Object} Export status with file info
 */
router.post('/pdf', authenticate, (req, res) => {
  try {
    const {
      data,
      title = 'Report',
      format = 'portrait'
    } = req.body;
    if (!data) {
      return res.status(400).json({
        success: false,
        message: 'Data is required for PDF export'
      });
    }
    const exportId = 'export_' + Date.now();
    const filename = `${exportId}.pdf`;
    const filepath = path.join(exportsDir, filename);

    // Create PDF document
    const doc = new PDFDocument({
      orientation: format === 'landscape' ? 'landscape' : 'portrait'
    });

    // Pipe to file
    const stream = fs.createWriteStream(filepath);
    doc.pipe(stream);

    // Add content
    doc.fontSize(18).text(title, {
      align: 'center'
    });
    doc.fontSize(10).text(`Generated: ${new Date().toISOString()}`, {
      align: 'right'
    });
    doc.moveDown();

    // Add data as JSON
    if (typeof data === 'object') {
      doc.fontSize(10);
      doc.text(JSON.stringify(data, null, 2));
    } else {
      doc.text(data);
    }
    doc.end();
    stream.on('finish', () => {
      res.status(201).json({
        success: true,
        message: 'PDF exported successfully',
        data: {
          exportId,
          filename,
          format: 'pdf',
          size: fs.statSync(filepath).size,
          url: `/api/export/${exportId}/download`,
          expiresAt: new Date(Date.now() + 24 * 60 * 60 * 1000).toISOString(),
          status: 'completed',
          timestamp: new Date().toISOString()
        }
      });
    });
    stream.on('error', err => {
      res.status(500).json({
        success: false,
        message: 'Error creating PDF',
        error: err.message
      });
    });
  } catch (error) {
    res.status(500).json({
      success: false,
      message: 'Error exporting to PDF',
      error: error.message
    });
  }
});

/**
 * @route   POST /api/export/excel
 * @access  Private
 * @body    {Array} data - Array of objects to export
 * @body    {String} sheetName - Worksheet name
 * @returns {Object} Export status with file info
 */
router.post('/excel', authenticate, (req, res) => {
  try {
    const {
      data,
      sheetName = 'Sheet1'
    } = req.body;
    if (!Array.isArray(data)) {
      return res.status(400).json({
        success: false,
        message: 'Data must be an array for Excel export'
      });
    }
    const exportId = 'export_' + Date.now();
    const filename = `${exportId}.xlsx`;
    const filepath = path.join(exportsDir, filename);

    // Create workbook
    const workbook = new exceljs.Workbook();
    const worksheet = workbook.addWorksheet(sheetName);
    if (data.length > 0) {
      // Add headers from first object
      const headers = Object.keys(data[0]);
      worksheet.columns = headers.map(h => ({
        header: h,
        key: h,
        width: 20
      }));

      // Add data
      data.forEach(row => {
        worksheet.addRow(row);
      });
    }

    // Save and send response
    workbook.xlsx.writeFile(filepath).then(() => {
      res.status(201).json({
        success: true,
        message: 'Excel exported successfully',
        data: {
          exportId,
          filename,
          format: 'xlsx',
          size: fs.statSync(filepath).size,
          rows: data.length,
          url: `/api/export/${exportId}/download`,
          expiresAt: new Date(Date.now() + 24 * 60 * 60 * 1000).toISOString(),
          status: 'completed',
          timestamp: new Date().toISOString()
        }
      });
    }).catch(err => {
      res.status(500).json({
        success: false,
        message: 'Error creating Excel',
        error: err.message
      });
    });
  } catch (error) {
    res.status(500).json({
      success: false,
      message: 'Error exporting to Excel',
      error: error.message
    });
  }
});

/**
 * @route   POST /api/export/csv
 * @access  Private
 * @body    {Array} data - Array of objects to export
 * @returns {Object} Export status with file info
 */
router.post('/csv', authenticate, (req, res) => {
  try {
    const {
      data
    } = req.body;
    if (!Array.isArray(data)) {
      return res.status(400).json({
        success: false,
        message: 'Data must be an array for CSV export'
      });
    }
    const exportId = 'export_' + Date.now();
    const filename = `${exportId}.csv`;
    const filepath = path.join(exportsDir, filename);

    // Create CSV
    const csv = stringify(data, {
      header: true
    });

    // Write to file
    fs.writeFileSync(filepath, csv);
    res.status(201).json({
      success: true,
      message: 'CSV exported successfully',
      data: {
        exportId,
        filename,
        format: 'csv',
        size: fs.statSync(filepath).size,
        rows: data.length,
        url: `/api/export/${exportId}/download`,
        expiresAt: new Date(Date.now() + 24 * 60 * 60 * 1000).toISOString(),
        status: 'completed',
        timestamp: new Date().toISOString()
      }
    });
  } catch (error) {
    res.status(500).json({
      success: false,
      message: 'Error exporting to CSV',
      error: error.message
    });
  }
});

/**
 * @route   GET /api/export/status/:id
 * @access  Private
 * @param   {String} id - Export ID
 * @returns {Object} Export status information
 */
router.get('/status/:id', authenticate, (req, res) => {
  try {
    const {
      id
    } = req.params;
    if (!id) {
      return res.status(400).json({
        success: false,
        message: 'Export ID is required'
      });
    }

    // TODO: Implement export status tracking
    res.json({
      success: true,
      message: 'Export status retrieved',
      data: {
        exportId: id,
        status: 'completed',
        progress: 100,
        filename: `${id}.pdf`,
        format: 'pdf',
        size: 102400,
        createdAt: new Date().toISOString(),
        expiresAt: new Date(Date.now() + 24 * 60 * 60 * 1000).toISOString(),
        downloadUrl: `/api/export/${id}/download`
      }
    });
  } catch (error) {
    res.status(500).json({
      success: false,
      message: 'Error retrieving export status',
      error: error.message
    });
  }
});
module.exports = router;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsInJvdXRlciIsIlJvdXRlciIsIlBERkRvY3VtZW50Iiwic3RyaW5naWZ5IiwiZXhjZWxqcyIsImF1dGhlbnRpY2F0ZSIsImZzIiwicGF0aCIsImV4cG9ydHNEaXIiLCJqb2luIiwiX19kaXJuYW1lIiwiZXhpc3RzU3luYyIsIm1rZGlyU3luYyIsInJlY3Vyc2l2ZSIsInBvc3QiLCJyZXEiLCJyZXMiLCJkYXRhIiwidGl0bGUiLCJmb3JtYXQiLCJib2R5Iiwic3RhdHVzIiwianNvbiIsInN1Y2Nlc3MiLCJtZXNzYWdlIiwiZXhwb3J0SWQiLCJEYXRlIiwibm93IiwiZmlsZW5hbWUiLCJmaWxlcGF0aCIsImRvYyIsIm9yaWVudGF0aW9uIiwic3RyZWFtIiwiY3JlYXRlV3JpdGVTdHJlYW0iLCJwaXBlIiwiZm9udFNpemUiLCJ0ZXh0IiwiYWxpZ24iLCJ0b0lTT1N0cmluZyIsIm1vdmVEb3duIiwiSlNPTiIsImVuZCIsIm9uIiwic2l6ZSIsInN0YXRTeW5jIiwidXJsIiwiZXhwaXJlc0F0IiwidGltZXN0YW1wIiwiZXJyIiwiZXJyb3IiLCJzaGVldE5hbWUiLCJBcnJheSIsImlzQXJyYXkiLCJ3b3JrYm9vayIsIldvcmtib29rIiwid29ya3NoZWV0IiwiYWRkV29ya3NoZWV0IiwibGVuZ3RoIiwiaGVhZGVycyIsIk9iamVjdCIsImtleXMiLCJjb2x1bW5zIiwibWFwIiwiaCIsImhlYWRlciIsImtleSIsIndpZHRoIiwiZm9yRWFjaCIsInJvdyIsImFkZFJvdyIsInhsc3giLCJ3cml0ZUZpbGUiLCJ0aGVuIiwicm93cyIsImNhdGNoIiwiY3N2Iiwid3JpdGVGaWxlU3luYyIsImdldCIsImlkIiwicGFyYW1zIiwicHJvZ3Jlc3MiLCJjcmVhdGVkQXQiLCJkb3dubG9hZFVybCIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlcyI6WyJleHBvcnQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBFeHBvcnQgUm91dGVzXG4gKiBEYXRhIEV4cG9ydCBBUEkgRW5kcG9pbnRzIChQREYsIEV4Y2VsLCBDU1YpXG4gKlxuICogUm91dGVzOlxuICogLSBQT1NUIC9hcGkvZXhwb3J0L3BkZiAgICAgICAtIEV4cG9ydCBkYXRhIGFzIFBERlxuICogLSBQT1NUIC9hcGkvZXhwb3J0L2V4Y2VsICAgICAtIEV4cG9ydCBkYXRhIGFzIEV4Y2VsXG4gKiAtIFBPU1QgL2FwaS9leHBvcnQvY3N2ICAgICAgIC0gRXhwb3J0IGRhdGEgYXMgQ1NWXG4gKiAtIEdFVCAgL2FwaS9leHBvcnQvc3RhdHVzLzppZCAtIEdldCBleHBvcnQgc3RhdHVzXG4gKi9cblxuY29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKTtcbmNvbnN0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XG5jb25zdCBQREZEb2N1bWVudCA9IHJlcXVpcmUoJ3BkZmtpdCcpO1xuY29uc3QgeyBzdHJpbmdpZnkgfSA9IHJlcXVpcmUoJ2Nzdi1zdHJpbmdpZnkvc3luYycpO1xuY29uc3QgZXhjZWxqcyA9IHJlcXVpcmUoJ2V4Y2VsanMnKTtcbmNvbnN0IHsgYXV0aGVudGljYXRlIH0gPSByZXF1aXJlKCcuLi9taWRkbGV3YXJlL2F1dGgnKTtcbmNvbnN0IGZzID0gcmVxdWlyZSgnZnMnKTtcbmNvbnN0IHBhdGggPSByZXF1aXJlKCdwYXRoJyk7XG5cbi8vIEVuc3VyZSBleHBvcnRzIGRpcmVjdG9yeSBleGlzdHNcbmNvbnN0IGV4cG9ydHNEaXIgPSBwYXRoLmpvaW4oX19kaXJuYW1lLCAnLi4vZXhwb3J0cycpO1xuaWYgKCFmcy5leGlzdHNTeW5jKGV4cG9ydHNEaXIpKSB7XG4gIGZzLm1rZGlyU3luYyhleHBvcnRzRGlyLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KTtcbn1cblxuLyoqXG4gKiBAcm91dGUgICBQT1NUIC9hcGkvZXhwb3J0L3BkZlxuICogQGFjY2VzcyAgUHJpdmF0ZVxuICogQGJvZHkgICAge09iamVjdH0gZGF0YSAtIERhdGEgdG8gZXhwb3J0XG4gKiBAYm9keSAgICB7U3RyaW5nfSB0aXRsZSAtIFJlcG9ydCB0aXRsZVxuICogQGJvZHkgICAge1N0cmluZ30gZm9ybWF0IC0gTGF5b3V0IGZvcm1hdCAocG9ydHJhaXQvbGFuZHNjYXBlKVxuICogQHJldHVybnMge09iamVjdH0gRXhwb3J0IHN0YXR1cyB3aXRoIGZpbGUgaW5mb1xuICovXG5yb3V0ZXIucG9zdCgnL3BkZicsIGF1dGhlbnRpY2F0ZSwgKHJlcSwgcmVzKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBkYXRhLCB0aXRsZSA9ICdSZXBvcnQnLCBmb3JtYXQgPSAncG9ydHJhaXQnIH0gPSByZXEuYm9keTtcblxuICAgIGlmICghZGF0YSkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIG1lc3NhZ2U6ICdEYXRhIGlzIHJlcXVpcmVkIGZvciBQREYgZXhwb3J0J1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgZXhwb3J0SWQgPSAnZXhwb3J0XycgKyBEYXRlLm5vdygpO1xuICAgIGNvbnN0IGZpbGVuYW1lID0gYCR7ZXhwb3J0SWR9LnBkZmA7XG4gICAgY29uc3QgZmlsZXBhdGggPSBwYXRoLmpvaW4oZXhwb3J0c0RpciwgZmlsZW5hbWUpO1xuXG4gICAgLy8gQ3JlYXRlIFBERiBkb2N1bWVudFxuICAgIGNvbnN0IGRvYyA9IG5ldyBQREZEb2N1bWVudCh7XG4gICAgICBvcmllbnRhdGlvbjogZm9ybWF0ID09PSAnbGFuZHNjYXBlJyA/ICdsYW5kc2NhcGUnIDogJ3BvcnRyYWl0J1xuICAgIH0pO1xuXG4gICAgLy8gUGlwZSB0byBmaWxlXG4gICAgY29uc3Qgc3RyZWFtID0gZnMuY3JlYXRlV3JpdGVTdHJlYW0oZmlsZXBhdGgpO1xuICAgIGRvYy5waXBlKHN0cmVhbSk7XG5cbiAgICAvLyBBZGQgY29udGVudFxuICAgIGRvYy5mb250U2l6ZSgxOCkudGV4dCh0aXRsZSwgeyBhbGlnbjogJ2NlbnRlcicgfSk7XG4gICAgZG9jLmZvbnRTaXplKDEwKS50ZXh0KGBHZW5lcmF0ZWQ6ICR7bmV3IERhdGUoKS50b0lTT1N0cmluZygpfWAsIHsgYWxpZ246ICdyaWdodCcgfSk7XG4gICAgZG9jLm1vdmVEb3duKCk7XG5cbiAgICAvLyBBZGQgZGF0YSBhcyBKU09OXG4gICAgaWYgKHR5cGVvZiBkYXRhID09PSAnb2JqZWN0Jykge1xuICAgICAgZG9jLmZvbnRTaXplKDEwKTtcbiAgICAgIGRvYy50ZXh0KEpTT04uc3RyaW5naWZ5KGRhdGEsIG51bGwsIDIpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZG9jLnRleHQoZGF0YSk7XG4gICAgfVxuXG4gICAgZG9jLmVuZCgpO1xuXG4gICAgc3RyZWFtLm9uKCdmaW5pc2gnLCAoKSA9PiB7XG4gICAgICByZXMuc3RhdHVzKDIwMSkuanNvbih7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIG1lc3NhZ2U6ICdQREYgZXhwb3J0ZWQgc3VjY2Vzc2Z1bGx5JyxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIGV4cG9ydElkLFxuICAgICAgICAgIGZpbGVuYW1lLFxuICAgICAgICAgIGZvcm1hdDogJ3BkZicsXG4gICAgICAgICAgc2l6ZTogZnMuc3RhdFN5bmMoZmlsZXBhdGgpLnNpemUsXG4gICAgICAgICAgdXJsOiBgL2FwaS9leHBvcnQvJHtleHBvcnRJZH0vZG93bmxvYWRgLFxuICAgICAgICAgIGV4cGlyZXNBdDogbmV3IERhdGUoRGF0ZS5ub3coKSArIDI0ICogNjAgKiA2MCAqIDEwMDApLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgc3RhdHVzOiAnY29tcGxldGVkJyxcbiAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHN0cmVhbS5vbignZXJyb3InLCAoZXJyKSA9PiB7XG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBtZXNzYWdlOiAnRXJyb3IgY3JlYXRpbmcgUERGJyxcbiAgICAgICAgZXJyb3I6IGVyci5tZXNzYWdlXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIG1lc3NhZ2U6ICdFcnJvciBleHBvcnRpbmcgdG8gUERGJyxcbiAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlXG4gICAgfSk7XG4gIH1cbn0pO1xuXG4vKipcbiAqIEByb3V0ZSAgIFBPU1QgL2FwaS9leHBvcnQvZXhjZWxcbiAqIEBhY2Nlc3MgIFByaXZhdGVcbiAqIEBib2R5ICAgIHtBcnJheX0gZGF0YSAtIEFycmF5IG9mIG9iamVjdHMgdG8gZXhwb3J0XG4gKiBAYm9keSAgICB7U3RyaW5nfSBzaGVldE5hbWUgLSBXb3Jrc2hlZXQgbmFtZVxuICogQHJldHVybnMge09iamVjdH0gRXhwb3J0IHN0YXR1cyB3aXRoIGZpbGUgaW5mb1xuICovXG5yb3V0ZXIucG9zdCgnL2V4Y2VsJywgYXV0aGVudGljYXRlLCAocmVxLCByZXMpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IGRhdGEsIHNoZWV0TmFtZSA9ICdTaGVldDEnIH0gPSByZXEuYm9keTtcblxuICAgIGlmICghQXJyYXkuaXNBcnJheShkYXRhKSkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIG1lc3NhZ2U6ICdEYXRhIG11c3QgYmUgYW4gYXJyYXkgZm9yIEV4Y2VsIGV4cG9ydCdcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IGV4cG9ydElkID0gJ2V4cG9ydF8nICsgRGF0ZS5ub3coKTtcbiAgICBjb25zdCBmaWxlbmFtZSA9IGAke2V4cG9ydElkfS54bHN4YDtcbiAgICBjb25zdCBmaWxlcGF0aCA9IHBhdGguam9pbihleHBvcnRzRGlyLCBmaWxlbmFtZSk7XG5cbiAgICAvLyBDcmVhdGUgd29ya2Jvb2tcbiAgICBjb25zdCB3b3JrYm9vayA9IG5ldyBleGNlbGpzLldvcmtib29rKCk7XG4gICAgY29uc3Qgd29ya3NoZWV0ID0gd29ya2Jvb2suYWRkV29ya3NoZWV0KHNoZWV0TmFtZSk7XG5cbiAgICBpZiAoZGF0YS5sZW5ndGggPiAwKSB7XG4gICAgICAvLyBBZGQgaGVhZGVycyBmcm9tIGZpcnN0IG9iamVjdFxuICAgICAgY29uc3QgaGVhZGVycyA9IE9iamVjdC5rZXlzKGRhdGFbMF0pO1xuICAgICAgd29ya3NoZWV0LmNvbHVtbnMgPSBoZWFkZXJzLm1hcChoID0+ICh7IGhlYWRlcjogaCwga2V5OiBoLCB3aWR0aDogMjAgfSkpO1xuXG4gICAgICAvLyBBZGQgZGF0YVxuICAgICAgZGF0YS5mb3JFYWNoKHJvdyA9PiB7XG4gICAgICAgIHdvcmtzaGVldC5hZGRSb3cocm93KTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFNhdmUgYW5kIHNlbmQgcmVzcG9uc2VcbiAgICB3b3JrYm9vay54bHN4LndyaXRlRmlsZShmaWxlcGF0aCkudGhlbigoKSA9PiB7XG4gICAgICByZXMuc3RhdHVzKDIwMSkuanNvbih7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIG1lc3NhZ2U6ICdFeGNlbCBleHBvcnRlZCBzdWNjZXNzZnVsbHknLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgZXhwb3J0SWQsXG4gICAgICAgICAgZmlsZW5hbWUsXG4gICAgICAgICAgZm9ybWF0OiAneGxzeCcsXG4gICAgICAgICAgc2l6ZTogZnMuc3RhdFN5bmMoZmlsZXBhdGgpLnNpemUsXG4gICAgICAgICAgcm93czogZGF0YS5sZW5ndGgsXG4gICAgICAgICAgdXJsOiBgL2FwaS9leHBvcnQvJHtleHBvcnRJZH0vZG93bmxvYWRgLFxuICAgICAgICAgIGV4cGlyZXNBdDogbmV3IERhdGUoRGF0ZS5ub3coKSArIDI0ICogNjAgKiA2MCAqIDEwMDApLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgc3RhdHVzOiAnY29tcGxldGVkJyxcbiAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KS5jYXRjaChlcnIgPT4ge1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgbWVzc2FnZTogJ0Vycm9yIGNyZWF0aW5nIEV4Y2VsJyxcbiAgICAgICAgZXJyb3I6IGVyci5tZXNzYWdlXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIG1lc3NhZ2U6ICdFcnJvciBleHBvcnRpbmcgdG8gRXhjZWwnLFxuICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2VcbiAgICB9KTtcbiAgfVxufSk7XG5cbi8qKlxuICogQHJvdXRlICAgUE9TVCAvYXBpL2V4cG9ydC9jc3ZcbiAqIEBhY2Nlc3MgIFByaXZhdGVcbiAqIEBib2R5ICAgIHtBcnJheX0gZGF0YSAtIEFycmF5IG9mIG9iamVjdHMgdG8gZXhwb3J0XG4gKiBAcmV0dXJucyB7T2JqZWN0fSBFeHBvcnQgc3RhdHVzIHdpdGggZmlsZSBpbmZvXG4gKi9cbnJvdXRlci5wb3N0KCcvY3N2JywgYXV0aGVudGljYXRlLCAocmVxLCByZXMpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IGRhdGEgfSA9IHJlcS5ib2R5O1xuXG4gICAgaWYgKCFBcnJheS5pc0FycmF5KGRhdGEpKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgbWVzc2FnZTogJ0RhdGEgbXVzdCBiZSBhbiBhcnJheSBmb3IgQ1NWIGV4cG9ydCdcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IGV4cG9ydElkID0gJ2V4cG9ydF8nICsgRGF0ZS5ub3coKTtcbiAgICBjb25zdCBmaWxlbmFtZSA9IGAke2V4cG9ydElkfS5jc3ZgO1xuICAgIGNvbnN0IGZpbGVwYXRoID0gcGF0aC5qb2luKGV4cG9ydHNEaXIsIGZpbGVuYW1lKTtcblxuICAgIC8vIENyZWF0ZSBDU1ZcbiAgICBjb25zdCBjc3YgPSBzdHJpbmdpZnkoZGF0YSwgeyBoZWFkZXI6IHRydWUgfSk7XG5cbiAgICAvLyBXcml0ZSB0byBmaWxlXG4gICAgZnMud3JpdGVGaWxlU3luYyhmaWxlcGF0aCwgY3N2KTtcblxuICAgIHJlcy5zdGF0dXMoMjAxKS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBtZXNzYWdlOiAnQ1NWIGV4cG9ydGVkIHN1Y2Nlc3NmdWxseScsXG4gICAgICBkYXRhOiB7XG4gICAgICAgIGV4cG9ydElkLFxuICAgICAgICBmaWxlbmFtZSxcbiAgICAgICAgZm9ybWF0OiAnY3N2JyxcbiAgICAgICAgc2l6ZTogZnMuc3RhdFN5bmMoZmlsZXBhdGgpLnNpemUsXG4gICAgICAgIHJvd3M6IGRhdGEubGVuZ3RoLFxuICAgICAgICB1cmw6IGAvYXBpL2V4cG9ydC8ke2V4cG9ydElkfS9kb3dubG9hZGAsXG4gICAgICAgIGV4cGlyZXNBdDogbmV3IERhdGUoRGF0ZS5ub3coKSArIDI0ICogNjAgKiA2MCAqIDEwMDApLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIHN0YXR1czogJ2NvbXBsZXRlZCcsXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICB9XG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBtZXNzYWdlOiAnRXJyb3IgZXhwb3J0aW5nIHRvIENTVicsXG4gICAgICBlcnJvcjogZXJyb3IubWVzc2FnZVxuICAgIH0pO1xuICB9XG59KTtcblxuLyoqXG4gKiBAcm91dGUgICBHRVQgL2FwaS9leHBvcnQvc3RhdHVzLzppZFxuICogQGFjY2VzcyAgUHJpdmF0ZVxuICogQHBhcmFtICAge1N0cmluZ30gaWQgLSBFeHBvcnQgSURcbiAqIEByZXR1cm5zIHtPYmplY3R9IEV4cG9ydCBzdGF0dXMgaW5mb3JtYXRpb25cbiAqL1xucm91dGVyLmdldCgnL3N0YXR1cy86aWQnLCBhdXRoZW50aWNhdGUsIChyZXEsIHJlcykgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHsgaWQgfSA9IHJlcS5wYXJhbXM7XG5cbiAgICBpZiAoIWlkKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgbWVzc2FnZTogJ0V4cG9ydCBJRCBpcyByZXF1aXJlZCdcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFRPRE86IEltcGxlbWVudCBleHBvcnQgc3RhdHVzIHRyYWNraW5nXG4gICAgcmVzLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIG1lc3NhZ2U6ICdFeHBvcnQgc3RhdHVzIHJldHJpZXZlZCcsXG4gICAgICBkYXRhOiB7XG4gICAgICAgIGV4cG9ydElkOiBpZCxcbiAgICAgICAgc3RhdHVzOiAnY29tcGxldGVkJyxcbiAgICAgICAgcHJvZ3Jlc3M6IDEwMCxcbiAgICAgICAgZmlsZW5hbWU6IGAke2lkfS5wZGZgLFxuICAgICAgICBmb3JtYXQ6ICdwZGYnLFxuICAgICAgICBzaXplOiAxMDI0MDAsXG4gICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICBleHBpcmVzQXQ6IG5ldyBEYXRlKERhdGUubm93KCkgKyAyNCAqIDYwICogNjAgKiAxMDAwKS50b0lTT1N0cmluZygpLFxuICAgICAgICBkb3dubG9hZFVybDogYC9hcGkvZXhwb3J0LyR7aWR9L2Rvd25sb2FkYFxuICAgICAgfVxuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgbWVzc2FnZTogJ0Vycm9yIHJldHJpZXZpbmcgZXhwb3J0IHN0YXR1cycsXG4gICAgICBlcnJvcjogZXJyb3IubWVzc2FnZVxuICAgIH0pO1xuICB9XG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSByb3V0ZXI7XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE1BQU1BLE9BQU8sR0FBR0MsT0FBTyxDQUFDLFNBQVMsQ0FBQztBQUNsQyxNQUFNQyxNQUFNLEdBQUdGLE9BQU8sQ0FBQ0csTUFBTSxDQUFDLENBQUM7QUFDL0IsTUFBTUMsV0FBVyxHQUFHSCxPQUFPLENBQUMsUUFBUSxDQUFDO0FBQ3JDLE1BQU07RUFBRUk7QUFBVSxDQUFDLEdBQUdKLE9BQU8sQ0FBQyxvQkFBb0IsQ0FBQztBQUNuRCxNQUFNSyxPQUFPLEdBQUdMLE9BQU8sQ0FBQyxTQUFTLENBQUM7QUFDbEMsTUFBTTtFQUFFTTtBQUFhLENBQUMsR0FBR04sT0FBTyxDQUFDLG9CQUFvQixDQUFDO0FBQ3RELE1BQU1PLEVBQUUsR0FBR1AsT0FBTyxDQUFDLElBQUksQ0FBQztBQUN4QixNQUFNUSxJQUFJLEdBQUdSLE9BQU8sQ0FBQyxNQUFNLENBQUM7O0FBRTVCO0FBQ0EsTUFBTVMsVUFBVSxHQUFHRCxJQUFJLENBQUNFLElBQUksQ0FBQ0MsU0FBUyxFQUFFLFlBQVksQ0FBQztBQUNyRCxJQUFJLENBQUNKLEVBQUUsQ0FBQ0ssVUFBVSxDQUFDSCxVQUFVLENBQUMsRUFBRTtFQUM5QkYsRUFBRSxDQUFDTSxTQUFTLENBQUNKLFVBQVUsRUFBRTtJQUFFSyxTQUFTLEVBQUU7RUFBSyxDQUFDLENBQUM7QUFDL0M7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBYixNQUFNLENBQUNjLElBQUksQ0FBQyxN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