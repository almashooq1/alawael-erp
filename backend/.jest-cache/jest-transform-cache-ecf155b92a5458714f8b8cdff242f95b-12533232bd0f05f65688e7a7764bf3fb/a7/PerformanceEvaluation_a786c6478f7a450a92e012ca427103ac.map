{"version":3,"names":["mongoose","require","IndividualEvaluationSchema","Schema","evaluatedBy","type","Types","ObjectId","ref","required","evaluationType","String","enum","score","Number","scores","criteriaId","criteriaName","min","max","comment","comments","strengths","areasForImprovement","recommendations","createdAt","Date","default","now","updatedAt","PerformanceEvaluationSchema","employeeId","evaluationPeriod","startDate","endDate","evaluations","managementEvaluation","peerEvaluations","recipientEvaluations","selfEvaluation","summary","weightedScores","management","peers","recipients","self","overallScore","overallRating","executiveSummary","keyAchievements","mainChallenges","promotionRecommended","Boolean","trainingNeeds","careerPathRecommendation","salaryAdjustmentRecommended","salaryAdjustmentPercentage","hrNotes","approvedBy","approvalDate","status","submittedAt","reviewedAt","index","module","exports","model"],"sources":["PerformanceEvaluation.js"],"sourcesContent":["/**\r\n * Performance Evaluation Model (HR)\r\n * Modular, extensible performance evaluation for HR system\r\n */\r\nconst mongoose = require('mongoose');\r\n\r\nconst IndividualEvaluationSchema = new mongoose.Schema({\r\n  evaluatedBy: { type: mongoose.Schema.Types.ObjectId, ref: 'User', required: true },\r\n  evaluationType: {\r\n    type: String,\r\n    enum: ['management', 'peer', 'recipient', 'self'],\r\n    required: true,\r\n  },\r\n  score: Number,\r\n  scores: [\r\n    {\r\n      criteriaId: String,\r\n      criteriaName: String,\r\n      score: { type: Number, min: 1, max: 5 },\r\n      comment: String,\r\n    },\r\n  ],\r\n  comments: String,\r\n  strengths: [String],\r\n  areasForImprovement: [String],\r\n  recommendations: String,\r\n  createdAt: { type: Date, default: Date.now },\r\n  updatedAt: { type: Date, default: Date.now },\r\n});\r\n\r\nconst PerformanceEvaluationSchema = new mongoose.Schema({\r\n  employeeId: { type: mongoose.Schema.Types.ObjectId, ref: 'Employee', required: true },\r\n  evaluationPeriod: {\r\n    startDate: { type: Date, required: true },\r\n    endDate: { type: Date, required: true },\r\n  },\r\n  evaluations: {\r\n    managementEvaluation: IndividualEvaluationSchema,\r\n    peerEvaluations: [IndividualEvaluationSchema],\r\n    recipientEvaluations: [IndividualEvaluationSchema],\r\n    selfEvaluation: IndividualEvaluationSchema,\r\n  },\r\n  summary: {\r\n    weightedScores: {\r\n      management: Number,\r\n      peers: Number,\r\n      recipients: Number,\r\n      self: Number,\r\n    },\r\n    overallScore: Number,\r\n    overallRating: { type: String, enum: ['ممتاز', 'جيد جداً', 'جيد', 'مقبول', 'ضعيف'] },\r\n    executiveSummary: String,\r\n    keyAchievements: [String],\r\n    mainChallenges: [String],\r\n    promotionRecommended: Boolean,\r\n    trainingNeeds: [String],\r\n    careerPathRecommendation: String,\r\n    salaryAdjustmentRecommended: Boolean,\r\n    salaryAdjustmentPercentage: Number,\r\n  },\r\n  hrNotes: String,\r\n  approvedBy: { type: mongoose.Schema.Types.ObjectId, ref: 'User' },\r\n  approvalDate: Date,\r\n  status: {\r\n    type: String,\r\n    enum: ['draft', 'in_progress', 'pending_review', 'approved', 'archived'],\r\n    default: 'draft',\r\n  },\r\n  createdAt: { type: Date, default: Date.now },\r\n  updatedAt: { type: Date, default: Date.now },\r\n  submittedAt: Date,\r\n  reviewedAt: Date,\r\n});\r\n\r\nPerformanceEvaluationSchema.index({ employeeId: 1, 'evaluationPeriod.startDate': -1 });\r\nPerformanceEvaluationSchema.index({ status: 1 });\r\nPerformanceEvaluationSchema.index({ 'summary.overallRating': 1 });\r\n\r\nmodule.exports = mongoose.model('PerformanceEvaluation', PerformanceEvaluationSchema);\r\n"],"mappings":"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","ignoreList":[]}