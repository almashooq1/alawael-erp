{"version":3,"names":["Driver","require","User","DriverManagementService","DriverController","createDriver","req","res","userId","firstName","lastName","email","personalPhone","employeeId","hireDate","licenseNumber","licenseType","licenseExpiryDate","otherData","body","user","findById","status","json","success","message","existingDriver","findOne","driver","licenseDetails","expiryDate","isValid","save","findByIdAndUpdate","role","data","error","getAllDrivers","search","page","limit","sortBy","query","isActive","$or","$regex","$options","drivers","find","populate","skip","sort","count","countDocuments","totalPages","Math","ceil","total","currentPage","parseInt","getDriver","id","params","updateDriver","updates","new","runValidators","deleteDriver","reason","deactivationDate","Date","deactivationReason","getPerformance","report","generateComprehensiveReport","addViolation","violationType","severity","calculateSafetyScore","fullName","totalViolations","violations","getViolations","driverName","addCertification","name","issueDate","certificateNumber","provider","certifications","push","assignVehicle","vehicleId","assignedVehicles","vehicle","assignmentDate","getDriversNeedingTraining","length","getTopPerformers","getExpiringLicenses","licenses","predictExpiringLicenses","getAbsencePrediction","prediction","predictAbsenceRate","getPerformanceTrend","trend","predictPerformanceTrend","getAnalyticsOverview","totalDrivers","activeDrivers","onLeaveDrivers","suspendedDrivers","avgPerformance","aggregate","$group","_id","avgSafety","$avg","avgReliability","avgCustomerService","avgOverall","performance","module","exports"],"sources":["driver.controller.js"],"sourcesContent":["/**\r\n * Driver Controller - متحكم السائقين\r\n * يدير جميع عمليات إدارة السائقين\r\n */\r\n\r\nconst Driver = require('../models/Driver');\r\nconst User = require('../models/User');\r\nconst DriverManagementService = require('../services/driverManagement.service');\r\n\r\nclass DriverController {\r\n  /**\r\n   * إنشاء سائق جديد\r\n   * POST /api/drivers\r\n   */\r\n  static async createDriver(req, res) {\r\n    try {\r\n      const {\r\n        userId,\r\n        firstName,\r\n        lastName,\r\n        email,\r\n        personalPhone,\r\n        employeeId,\r\n        hireDate,\r\n        licenseNumber,\r\n        licenseType,\r\n        licenseExpiryDate,\r\n        ...otherData\r\n      } = req.body;\r\n\r\n      // التحقق من وجود المستخدم\r\n      const user = await User.findById(userId);\r\n      if (!user) {\r\n        return res.status(400).json({\r\n          success: false,\r\n          message: 'المستخدم غير موجود',\r\n        });\r\n      }\r\n\r\n      // التحقق من عدم وجود سائق بنفس رقم الموظف\r\n      const existingDriver = await Driver.findOne({ employeeId });\r\n      if (existingDriver) {\r\n        return res.status(400).json({\r\n          success: false,\r\n          message: 'رقم الموظف موجود بالفعل',\r\n        });\r\n      }\r\n\r\n      // إنشاء السائق\r\n      const driver = new Driver({\r\n        userId,\r\n        firstName,\r\n        lastName,\r\n        email,\r\n        personalPhone,\r\n        employeeId,\r\n        hireDate,\r\n        licenseDetails: {\r\n          licenseNumber,\r\n          licenseType,\r\n          expiryDate: licenseExpiryDate,\r\n          isValid: true,\r\n        },\r\n        ...otherData,\r\n      });\r\n\r\n      await driver.save();\r\n\r\n      // تحديث دور المستخدم\r\n      await User.findByIdAndUpdate(userId, { role: 'driver' });\r\n\r\n      res.status(201).json({\r\n        success: true,\r\n        message: 'تم إنشاء السائق بنجاح',\r\n        data: driver,\r\n      });\r\n    } catch (error) {\r\n      res.status(400).json({\r\n        success: false,\r\n        message: 'فشل إنشاء السائق',\r\n        error: error.message,\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * جلب جميع السائقين\r\n   * GET /api/drivers\r\n   */\r\n  static async getAllDrivers(req, res) {\r\n    try {\r\n      const { status, search, page = 1, limit = 20, sortBy = '-createdAt' } = req.query;\r\n\r\n      const query = { isActive: true };\r\n\r\n      if (status) query.status = status;\r\n\r\n      if (search) {\r\n        query.$or = [\r\n          { firstName: { $regex: search, $options: 'i' } },\r\n          { lastName: { $regex: search, $options: 'i' } },\r\n          { employeeId: { $regex: search, $options: 'i' } },\r\n          { email: { $regex: search, $options: 'i' } },\r\n        ];\r\n      }\r\n\r\n      const drivers = await Driver.find(query)\r\n        .populate('userId', 'name email phone')\r\n        .populate('manager', 'name email')\r\n        .limit(limit * 1)\r\n        .skip((page - 1) * limit)\r\n        .sort(sortBy);\r\n\r\n      const count = await Driver.countDocuments(query);\r\n      const totalPages = Math.ceil(count / limit);\r\n\r\n      res.json({\r\n        success: true,\r\n        data: {\r\n          drivers,\r\n          total: count,\r\n          currentPage: parseInt(page),\r\n          totalPages: totalPages,\r\n        },\r\n      });\r\n    } catch (error) {\r\n      res.status(500).json({\r\n        success: false,\r\n        message: 'فشل جلب السائقين',\r\n        error: error.message,\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * جلب سائق بواسطة ID\r\n   * GET /api/drivers/:id\r\n   */\r\n  static async getDriver(req, res) {\r\n    try {\r\n      const { id } = req.params;\r\n\r\n      const driver = await Driver.findById(id)\r\n        .populate('userId', 'name email phone')\r\n        .populate('manager', 'name email')\r\n        .populate('assignedVehicles.vehicle', 'vehicleNumber plateNumber type');\r\n\r\n      if (!driver) {\r\n        return res.status(404).json({\r\n          success: false,\r\n          message: 'السائق غير موجود',\r\n        });\r\n      }\r\n\r\n      res.json({\r\n        success: true,\r\n        data: driver,\r\n      });\r\n    } catch (error) {\r\n      res.status(500).json({\r\n        success: false,\r\n        message: 'فشل جلب السائق',\r\n        error: error.message,\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * تحديث بيانات السائق\r\n   * PUT /api/drivers/:id\r\n   */\r\n  static async updateDriver(req, res) {\r\n    try {\r\n      const { id } = req.params;\r\n      const updates = req.body;\r\n\r\n      // لا يمكن تحديث المعرف\r\n      delete updates.userId;\r\n      delete updates.employeeId;\r\n\r\n      const driver = await Driver.findByIdAndUpdate(id, updates, {\r\n        new: true,\r\n        runValidators: true,\r\n      })\r\n        .populate('userId', 'name email phone')\r\n        .populate('manager', 'name email');\r\n\r\n      if (!driver) {\r\n        return res.status(404).json({\r\n          success: false,\r\n          message: 'السائق غير موجود',\r\n        });\r\n      }\r\n\r\n      res.json({\r\n        success: true,\r\n        message: 'تم تحديث السائق بنجاح',\r\n        data: driver,\r\n      });\r\n    } catch (error) {\r\n      res.status(400).json({\r\n        success: false,\r\n        message: 'فشل تحديث السائق',\r\n        error: error.message,\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * حذف سائق (إلغاء تفعيل)\r\n   * DELETE /api/drivers/:id\r\n   */\r\n  static async deleteDriver(req, res) {\r\n    try {\r\n      const { id } = req.params;\r\n      const { reason } = req.body;\r\n\r\n      const driver = await Driver.findByIdAndUpdate(\r\n        id,\r\n        {\r\n          isActive: false,\r\n          status: 'inactive',\r\n          deactivationDate: new Date(),\r\n          deactivationReason: reason,\r\n        },\r\n        { new: true }\r\n      );\r\n\r\n      if (!driver) {\r\n        return res.status(404).json({\r\n          success: false,\r\n          message: 'السائق غير موجود',\r\n        });\r\n      }\r\n\r\n      res.json({\r\n        success: true,\r\n        message: 'تم إلغاء تفعيل السائق',\r\n        data: driver,\r\n      });\r\n    } catch (error) {\r\n      res.status(500).json({\r\n        success: false,\r\n        message: 'فشل حذف السائق',\r\n        error: error.message,\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * جلب تقييم أداء السائق الشامل\r\n   * GET /api/drivers/:id/performance\r\n   */\r\n  static async getPerformance(req, res) {\r\n    try {\r\n      const { id } = req.params;\r\n\r\n      // تحديث جميع درجات الأداء\r\n      const report = await DriverManagementService.generateComprehensiveReport(id);\r\n\r\n      res.json({\r\n        success: true,\r\n        data: report,\r\n      });\r\n    } catch (error) {\r\n      res.status(500).json({\r\n        success: false,\r\n        message: 'فشل جلب تقرير الأداء',\r\n        error: error.message,\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * إضافة انتهاك للسائق\r\n   * POST /api/drivers/:id/violations\r\n   */\r\n  static async addViolation(req, res) {\r\n    try {\r\n      const { id } = req.params;\r\n      const { violationType, severity } = req.body;\r\n\r\n      const driver = await Driver.findById(id);\r\n      if (!driver) {\r\n        return res.status(404).json({\r\n          success: false,\r\n          message: 'السائق غير موجود',\r\n        });\r\n      }\r\n\r\n      await driver.addViolation(violationType);\r\n\r\n      // تحديث درجة الأمان\r\n      await DriverManagementService.calculateSafetyScore(id);\r\n\r\n      res.json({\r\n        success: true,\r\n        message: 'تم تسجيل الانتهاك',\r\n        data: {\r\n          driver: driver.fullName,\r\n          violationType,\r\n          severity,\r\n          totalViolations: driver.violations.totalViolations,\r\n        },\r\n      });\r\n    } catch (error) {\r\n      res.status(500).json({\r\n        success: false,\r\n        message: 'فشل تسجيل الانتهاك',\r\n        error: error.message,\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * جلب قائمة الانتهاكات\r\n   * GET /api/drivers/:id/violations\r\n   */\r\n  static async getViolations(req, res) {\r\n    try {\r\n      const { id } = req.params;\r\n\r\n      const driver = await Driver.findById(id);\r\n      if (!driver) {\r\n        return res.status(404).json({\r\n          success: false,\r\n          message: 'السائق غير موجود',\r\n        });\r\n      }\r\n\r\n      res.json({\r\n        success: true,\r\n        data: {\r\n          driverName: driver.fullName,\r\n          violations: driver.violations,\r\n        },\r\n      });\r\n    } catch (error) {\r\n      res.status(500).json({\r\n        success: false,\r\n        message: 'فشل جلب الانتهاكات',\r\n        error: error.message,\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * إضافة شهادة للسائق\r\n   * POST /api/drivers/:id/certifications\r\n   */\r\n  static async addCertification(req, res) {\r\n    try {\r\n      const { id } = req.params;\r\n      const { name, issueDate, expiryDate, certificateNumber, provider } = req.body;\r\n\r\n      const driver = await Driver.findById(id);\r\n      if (!driver) {\r\n        return res.status(404).json({\r\n          success: false,\r\n          message: 'السائق غير موجود',\r\n        });\r\n      }\r\n\r\n      driver.certifications.push({\r\n        name,\r\n        issueDate,\r\n        expiryDate,\r\n        certificateNumber,\r\n        provider,\r\n        isActive: true,\r\n      });\r\n\r\n      await driver.save();\r\n\r\n      res.json({\r\n        success: true,\r\n        message: 'تم إضافة الشهادة بنجاح',\r\n        data: driver.certifications,\r\n      });\r\n    } catch (error) {\r\n      res.status(400).json({\r\n        success: false,\r\n        message: 'فشل إضافة الشهادة',\r\n        error: error.message,\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * تعيين سيارة للسائق\r\n   * POST /api/drivers/:id/assign-vehicle\r\n   */\r\n  static async assignVehicle(req, res) {\r\n    try {\r\n      const { id } = req.params;\r\n      const { vehicleId } = req.body;\r\n\r\n      const driver = await Driver.findById(id);\r\n      if (!driver) {\r\n        return res.status(404).json({\r\n          success: false,\r\n          message: 'السائق غير موجود',\r\n        });\r\n      }\r\n\r\n      // إضافة السيارة إلى قائمة السيارات المخصصة\r\n      driver.assignedVehicles.push({\r\n        vehicle: vehicleId,\r\n        assignmentDate: new Date(),\r\n        status: 'active',\r\n      });\r\n\r\n      await driver.save();\r\n\r\n      res.json({\r\n        success: true,\r\n        message: 'تم تعيين السيارة للسائق',\r\n        data: driver.assignedVehicles,\r\n      });\r\n    } catch (error) {\r\n      res.status(400).json({\r\n        success: false,\r\n        message: 'فشل تعيين السيارة',\r\n        error: error.message,\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * جلب السائقين الذين يحتاجون تدريب\r\n   * GET /api/drivers/training/needs\r\n   */\r\n  static async getDriversNeedingTraining(req, res) {\r\n    try {\r\n      const drivers = await DriverManagementService.getDriversNeedingTraining();\r\n\r\n      res.json({\r\n        success: true,\r\n        data: {\r\n          drivers,\r\n          total: drivers.length,\r\n        },\r\n      });\r\n    } catch (error) {\r\n      res.status(500).json({\r\n        success: false,\r\n        message: 'فشل جلب السائقين الذين يحتاجون تدريب',\r\n        error: error.message,\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * جلب أفضل السائقين\r\n   * GET /api/drivers/top/performers\r\n   */\r\n  static async getTopPerformers(req, res) {\r\n    try {\r\n      const { limit = 10 } = req.query;\r\n\r\n      const drivers = await DriverManagementService.getTopPerformers(parseInt(limit));\r\n\r\n      res.json({\r\n        success: true,\r\n        data: {\r\n          drivers,\r\n          total: drivers.length,\r\n        },\r\n      });\r\n    } catch (error) {\r\n      res.status(500).json({\r\n        success: false,\r\n        message: 'فشل جلب أفضل السائقين',\r\n        error: error.message,\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * التنبؤ برخصات القيادة التي ستنتهي قريباً\r\n   * GET /api/drivers/predictions/expiring-licenses\r\n   */\r\n  static async getExpiringLicenses(req, res) {\r\n    try {\r\n      const licenses = await DriverManagementService.predictExpiringLicenses();\r\n\r\n      res.json({\r\n        success: true,\r\n        data: {\r\n          licenses,\r\n          total: licenses.length,\r\n        },\r\n      });\r\n    } catch (error) {\r\n      res.status(500).json({\r\n        success: false,\r\n        message: 'فشل جلب رخصات القيادة التي ستنتهي',\r\n        error: error.message,\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * جلب التنبؤ بمعدل الغياب\r\n   * GET /api/drivers/:id/predictions/absence\r\n   */\r\n  static async getAbsencePrediction(req, res) {\r\n    try {\r\n      const { id } = req.params;\r\n\r\n      const prediction = await DriverManagementService.predictAbsenceRate(id);\r\n\r\n      res.json({\r\n        success: true,\r\n        data: prediction,\r\n      });\r\n    } catch (error) {\r\n      res.status(500).json({\r\n        success: false,\r\n        message: 'فشل جلب التنبؤ بمعدل الغياب',\r\n        error: error.message,\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * جلب اتجاه الأداء\r\n   * GET /api/drivers/:id/predictions/trend\r\n   */\r\n  static async getPerformanceTrend(req, res) {\r\n    try {\r\n      const { id } = req.params;\r\n\r\n      const trend = await DriverManagementService.predictPerformanceTrend(id);\r\n\r\n      res.json({\r\n        success: true,\r\n        data: trend,\r\n      });\r\n    } catch (error) {\r\n      res.status(500).json({\r\n        success: false,\r\n        message: 'فشل جلب اتجاه الأداء',\r\n        error: error.message,\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * جلب  إحصائيات عامة عن السائقين\r\n   * GET /api/drivers/analytics/overview\r\n   */\r\n  static async getAnalyticsOverview(req, res) {\r\n    try {\r\n      const totalDrivers = await Driver.countDocuments();\r\n      const activeDrivers = await Driver.countDocuments({ isActive: true, status: 'active' });\r\n      const onLeaveDrivers = await Driver.countDocuments({ status: 'on_leave' });\r\n      const suspendedDrivers = await Driver.countDocuments({ status: 'suspended' });\r\n\r\n      // متوسط درجات الأداء\r\n      const avgPerformance = await Driver.aggregate([\r\n        {\r\n          $group: {\r\n            _id: null,\r\n            avgSafety: { $avg: '$performance.safetyScore' },\r\n            avgReliability: { $avg: '$performance.reliabilityScore' },\r\n            avgCustomerService: { $avg: '$performance.customerServiceScore' },\r\n            avgOverall: { $avg: '$performance.overallRating' },\r\n          },\r\n        },\r\n      ]);\r\n\r\n      res.json({\r\n        success: true,\r\n        data: {\r\n          totalDrivers,\r\n          activeDrivers,\r\n          onLeaveDrivers,\r\n          suspendedDrivers,\r\n          performance: avgPerformance[0] || {},\r\n        },\r\n      });\r\n    } catch (error) {\r\n      res.status(500).json({\r\n        success: false,\r\n        message: 'فشل جلب الإحصائيات',\r\n        error: error.message,\r\n      });\r\n    }\r\n  }\r\n}\r\n\r\nmodule.exports = DriverController;\r\n"],"mappings":"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","ignoreList":[]}