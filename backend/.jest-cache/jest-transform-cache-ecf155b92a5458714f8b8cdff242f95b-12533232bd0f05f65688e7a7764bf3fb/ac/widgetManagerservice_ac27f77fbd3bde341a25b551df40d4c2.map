{"version":3,"names":["EventEmitter","require","v4","uuidv4","Logger","WidgetManager","constructor","logger","widgetTypes","name","fields","defaultSize","width","height","icon","category","widgets","Map","subscriptions","updateQueue","updateProcessing","createWidget","widgetData","userId","dashboardId","type","title","config","position","size","refreshInterval","Error","widgetId","widgetTemplate","widget","id","x","y","data","lastUpdated","status","errorCount","warnings","metadata","createdAt","Date","updatedAt","createdBy","version","set","emit","info","error","message","updateWidget","updates","get","allowedFields","forEach","field","updateWidgetData","immediate","updateRecord","timestamp","_processWidgetUpdate","push","_processQueue","length","batch","splice","update","setImmediate","subscribeToWidget","callback","subscriptionId","has","subscribedAt","unsubscribeFromWidget","subs","index","findIndex","s","batchUpdateWidgets","results","Object","entries","success","getWidget","getDashboardWidgets","Array","from","values","filter","w","getWidgetsByType","deleteWidget","delete","reorderWidget","resizeWidget","getWidgetStats","stats","totalWidgets","byType","activeSubscriptions","queuedUpdates","types","keys","getAvailableTypes","key","value","validateWidget","errors","valid","cloneWidget","newData","original","cloned","exportWidgets","map","module","exports"],"sources":["widgetManager.service.js"],"sourcesContent":["/**\r\n * Widget Manager Service\r\n * ÿÆÿØŸÖÿ© ÿ•ÿØÿßÿ±ÿ© ÿßŸÑŸàŸäÿØÿ¨ÿ∑s ÿßŸÑŸÖÿÆÿµÿµÿ© ŸÑŸÑŸàÿ≠ÿ© ÿßŸÑŸÖÿπŸÑŸàŸÖÿßÿ™\r\n * \r\n * ÿßŸÑŸÖÿ≥ÿ§ŸàŸÑŸäÿßÿ™:\r\n * - ÿ•ŸÜÿ¥ÿßÿ° Ÿàÿ™ÿ≠ÿØŸäÿ´ ÿ£ŸÜŸàÿßÿπ ÿßŸÑŸàŸäÿØÿ¨ÿ™ ÿßŸÑŸÖÿÆÿ™ŸÑŸÅÿ©\r\n * - ÿ•ÿØÿßÿ±ÿ© ÿÆÿµÿßÿ¶ÿµ Ÿàÿ•ÿπÿØÿßÿØÿßÿ™ ÿßŸÑŸàŸäÿØÿ¨ÿ™\r\n * - ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÅÿπŸÑŸäÿ© ŸÑŸÑŸàŸäÿØÿ¨ÿ™\r\n * - ÿßŸÑÿ™ÿπÿßŸÖŸÑ ŸÖÿπ ÿ™ÿ≠ÿØŸäÿ´ÿßÿ™ ÿßŸÑŸàŸäÿØÿ¨ÿ™ ÿßŸÑŸÖÿ®ÿßÿ¥ÿ±ÿ©\r\n */\r\n\r\nconst { EventEmitter } = require('events');\r\nconst { v4: uuidv4 } = require('uuid');\r\nconst Logger = require('../utils/logger');\r\n\r\nclass WidgetManager extends EventEmitter {\r\n  constructor() {\r\n    super();\r\n    this.logger = Logger;\r\n    \r\n    // Widget template types\r\n    this.widgetTypes = {\r\n      'KPI': {\r\n        name: 'Key Performance Indicator',\r\n        fields: ['title', 'metric', 'value', 'target', 'trend'],\r\n        defaultSize: { width: 2, height: 1 },\r\n        icon: 'üìä',\r\n        category: 'analytics'\r\n      },\r\n      'CHART': {\r\n        name: 'Chart Widget',\r\n        fields: ['title', 'chartType', 'data', 'labels'],\r\n        defaultSize: { width: 3, height: 2 },\r\n        icon: 'üìà',\r\n        category: 'visualization'\r\n      },\r\n      'TABLE': {\r\n        name: 'Data Table',\r\n        fields: ['title', 'columns', 'data', 'pageSize'],\r\n        defaultSize: { width: 4, height: 3 },\r\n        icon: 'üìã',\r\n        category: 'data'\r\n      },\r\n      'GAUGE': {\r\n        name: 'Gauge Chart',\r\n        fields: ['title', 'value', 'min', 'max', 'unit'],\r\n        defaultSize: { width: 2, height: 2 },\r\n        icon: 'üéØ',\r\n        category: 'visualization'\r\n      },\r\n      'CARD': {\r\n        name: 'Info Card',\r\n        fields: ['title', 'description', 'icon', 'color'],\r\n        defaultSize: { width: 2, height: 1 },\r\n        icon: 'üé¥',\r\n        category: 'display'\r\n      },\r\n      'TIMELINE': {\r\n        name: 'Timeline Widget',\r\n        fields: ['title', 'events', 'startDate', 'endDate'],\r\n        defaultSize: { width: 3, height: 2 },\r\n        icon: '‚è±Ô∏è',\r\n        category: 'tracking'\r\n      },\r\n      'HEATMAP': {\r\n        name: 'Heatmap Widget',\r\n        fields: ['title', 'data', 'colorScheme'],\r\n        defaultSize: { width: 3, height: 2 },\r\n        icon: 'üî•',\r\n        category: 'visualization'\r\n      },\r\n      'CUSTOM': {\r\n        name: 'Custom Widget',\r\n        fields: ['title', 'content', 'html', 'css', 'javascript'],\r\n        defaultSize: { width: 2, height: 2 },\r\n        icon: '‚öôÔ∏è',\r\n        category: 'advanced'\r\n      }\r\n    };\r\n    \r\n    // Active widget instances\r\n    this.widgets = new Map();\r\n    \r\n    // Widget subscriptions for real-time updates\r\n    this.subscriptions = new Map();\r\n    \r\n    // Real-time update queue\r\n    this.updateQueue = [];\r\n    this.updateProcessing = false;\r\n  }\r\n\r\n  /**\r\n   * Create a new widget\r\n   * ÿ•ŸÜÿ¥ÿßÿ° ŸàŸäÿØÿ¨ÿ™ ÿ¨ÿØŸäÿØ\r\n   * \r\n   * @param {Object} widgetData - Widget data\r\n   * @returns {Object} Created widget\r\n   */\r\n  createWidget(widgetData) {\r\n    try {\r\n      const {\r\n        userId,\r\n        dashboardId,\r\n        type,\r\n        title,\r\n        config,\r\n        position,\r\n        size,\r\n        refreshInterval = 5000\r\n      } = widgetData;\r\n\r\n      // Validate widget type\r\n      if (!this.widgetTypes[type]) {\r\n        throw new Error(`Invalid widget type: ${type}`);\r\n      }\r\n\r\n      const widgetId = uuidv4();\r\n      const widgetTemplate = this.widgetTypes[type];\r\n\r\n      const widget = {\r\n        id: widgetId,\r\n        userId,\r\n        dashboardId,\r\n        type,\r\n        title: title || widgetTemplate.name,\r\n        config: {\r\n          ...config,\r\n          icon: widgetTemplate.icon\r\n        },\r\n        position: position || { x: 0, y: 0 },\r\n        size: size || widgetTemplate.defaultSize,\r\n        refreshInterval,\r\n        data: null,\r\n        lastUpdated: null,\r\n        status: 'idle',\r\n        errorCount: 0,\r\n        warnings: [],\r\n        metadata: {\r\n          createdAt: new Date(),\r\n          updatedAt: new Date(),\r\n          createdBy: userId,\r\n          version: 1\r\n        }\r\n      };\r\n\r\n      this.widgets.set(widgetId, widget);\r\n      this.emit('widget:created', { widgetId, widget });\r\n\r\n      this.logger.info(`Widget created: ${widgetId} (Type: ${type})`);\r\n      return widget;\r\n    } catch (error) {\r\n      this.logger.error(`Error creating widget: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Update widget configuration\r\n   * ÿ™ÿ≠ÿØŸäÿ´ ÿ•ÿπÿØÿßÿØÿßÿ™ ÿßŸÑŸàŸäÿØÿ¨ÿ™\r\n   * \r\n   * @param {String} widgetId - Widget ID\r\n   * @param {Object} updates - Update data\r\n   * @returns {Object} Updated widget\r\n   */\r\n  updateWidget(widgetId, updates) {\r\n    try {\r\n      const widget = this.widgets.get(widgetId);\r\n      if (!widget) {\r\n        throw new Error(`Widget not found: ${widgetId}`);\r\n      }\r\n\r\n      // Update allowed fields\r\n      const allowedFields = ['title', 'config', 'position', 'size', 'refreshInterval'];\r\n      \r\n      allowedFields.forEach(field => {\r\n        if (field in updates) {\r\n          if (field === 'config') {\r\n            widget.config = { ...widget.config, ...updates[field] };\r\n          } else {\r\n            widget[field] = updates[field];\r\n          }\r\n        }\r\n      });\r\n\r\n      widget.metadata.updatedAt = new Date();\r\n      widget.metadata.version++;\r\n\r\n      this.emit('widget:updated', { widgetId, updates });\r\n      this.logger.info(`Widget updated: ${widgetId}`);\r\n      return widget;\r\n    } catch (error) {\r\n      this.logger.error(`Error updating widget: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Update widget data in real-time\r\n   * ÿ™ÿ≠ÿØŸäÿ´ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸàŸäÿØÿ¨ÿ™ ÿ®ÿ¥ŸÉŸÑ ŸÅÿπŸÑŸä\r\n   * \r\n   * @param {String} widgetId - Widget ID\r\n   * @param {Object} data - New data\r\n   * @param {Boolean} immediate - Process immediately or queue\r\n   */\r\n  updateWidgetData(widgetId, data, immediate = false) {\r\n    try {\r\n      const widget = this.widgets.get(widgetId);\r\n      if (!widget) {\r\n        throw new Error(`Widget not found: ${widgetId}`);\r\n      }\r\n\r\n      const updateRecord = {\r\n        widgetId,\r\n        data,\r\n        timestamp: new Date(),\r\n        version: widget.metadata.version\r\n      };\r\n\r\n      if (immediate) {\r\n        this._processWidgetUpdate(updateRecord);\r\n      } else {\r\n        this.updateQueue.push(updateRecord);\r\n        this._processQueue();\r\n      }\r\n    } catch (error) {\r\n      this.logger.error(`Error updating widget data: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Process queued widget updates\r\n   * ŸÖÿπÿßŸÑÿ¨ÿ© ÿ™ÿ≠ÿØŸäÿ´ÿßÿ™ ÿßŸÑŸàŸäÿØÿ¨ÿ™ ÿßŸÑŸÖŸÇÿ∑Ÿàÿπÿ©\r\n   * \r\n   * @private\r\n   */\r\n  _processQueue() {\r\n    if (this.updateProcessing || this.updateQueue.length === 0) {\r\n      return;\r\n    }\r\n\r\n    this.updateProcessing = true;\r\n\r\n    // Process in batches of 10\r\n    const batch = this.updateQueue.splice(0, 10);\r\n    batch.forEach(update => this._processWidgetUpdate(update));\r\n\r\n    this.updateProcessing = false;\r\n\r\n    if (this.updateQueue.length > 0) {\r\n      setImmediate(() => this._processQueue());\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Process individual widget update\r\n   * ŸÖÿπÿßŸÑÿ¨ÿ© ÿ™ÿ≠ÿØŸäÿ´ ŸàŸäÿØÿ¨ÿ™ Ÿàÿßÿ≠ÿØ\r\n   * \r\n   * @private\r\n   */\r\n  _processWidgetUpdate(updateRecord) {\r\n    try {\r\n      const { widgetId, data, timestamp } = updateRecord;\r\n      const widget = this.widgets.get(widgetId);\r\n\r\n      if (!widget) return;\r\n\r\n      widget.data = data;\r\n      widget.lastUpdated = timestamp;\r\n      widget.status = 'updated';\r\n      widget.errorCount = 0;\r\n\r\n      this.emit('widget:dataUpdated', {\r\n        widgetId,\r\n        data,\r\n        timestamp\r\n      });\r\n    } catch (error) {\r\n      this.logger.error(`Error processing widget update: ${error.message}`);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Subscribe to widget updates\r\n   * ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ ŸÅŸä ÿ™ÿ≠ÿØŸäÿ´ÿßÿ™ ÿßŸÑŸàŸäÿØÿ¨ÿ™\r\n   * \r\n   * @param {String} widgetId - Widget ID\r\n   * @param {Function} callback - Update callback\r\n   * @returns {String} Subscription ID\r\n   */\r\n  subscribeToWidget(widgetId, callback) {\r\n    try {\r\n      const subscriptionId = uuidv4();\r\n      \r\n      if (!this.subscriptions.has(widgetId)) {\r\n        this.subscriptions.set(widgetId, []);\r\n      }\r\n\r\n      this.subscriptions.get(widgetId).push({\r\n        id: subscriptionId,\r\n        callback,\r\n        subscribedAt: new Date()\r\n      });\r\n\r\n      this.logger.info(`Subscription created: ${subscriptionId} for widget ${widgetId}`);\r\n      return subscriptionId;\r\n    } catch (error) {\r\n      this.logger.error(`Error subscribing to widget: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Unsubscribe from widget updates\r\n   * ÿ•ŸÑÿ∫ÿßÿ° ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ ŸÅŸä ÿ™ÿ≠ÿØŸäÿ´ÿßÿ™ ÿßŸÑŸàŸäÿØÿ¨ÿ™\r\n   * \r\n   * @param {String} widgetId - Widget ID\r\n   * @param {String} subscriptionId - Subscription ID\r\n   */\r\n  unsubscribeFromWidget(widgetId, subscriptionId) {\r\n    try {\r\n      const subs = this.subscriptions.get(widgetId);\r\n      if (!subs) return;\r\n\r\n      const index = subs.findIndex(s => s.id === subscriptionId);\r\n      if (index !== -1) {\r\n        subs.splice(index, 1);\r\n        this.logger.info(`Subscription removed: ${subscriptionId}`);\r\n      }\r\n    } catch (error) {\r\n      this.logger.error(`Error unsubscribing: ${error.message}`);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Batch update widget data\r\n   * ÿ™ÿ≠ÿØŸäÿ´ ÿØŸÅÿπÿ© ŸÖŸÜ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸàŸäÿØÿ¨ÿ™\r\n   * \r\n   * @param {Object} updates - { widgetId: data }\r\n   */\r\n  batchUpdateWidgets(updates) {\r\n    try {\r\n      const results = [];\r\n      \r\n      Object.entries(updates).forEach(([widgetId, data]) => {\r\n        const widget = this.widgets.get(widgetId);\r\n        if (widget) {\r\n          widget.data = data;\r\n          widget.lastUpdated = new Date();\r\n          widget.status = 'updated';\r\n          results.push({ widgetId, success: true });\r\n          this.emit('widget:dataUpdated', { widgetId, data });\r\n        }\r\n      });\r\n\r\n      this.logger.info(`Batch updated ${results.length} widgets`);\r\n      return results;\r\n    } catch (error) {\r\n      this.logger.error(`Error batch updating widgets: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get widget by ID\r\n   * ÿßŸÑÿ≠ÿµŸàŸÑ ÿπŸÑŸâ ŸàŸäÿØÿ¨ÿ™ ÿ®ŸÄ ID\r\n   * \r\n   * @param {String} widgetId - Widget ID\r\n   * @returns {Object} Widget\r\n   */\r\n  getWidget(widgetId) {\r\n    try {\r\n      const widget = this.widgets.get(widgetId);\r\n      if (!widget) {\r\n        throw new Error(`Widget not found: ${widgetId}`);\r\n      }\r\n      return widget;\r\n    } catch (error) {\r\n      this.logger.error(`Error getting widget: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get all widgets for dashboard\r\n   * ÿßŸÑÿ≠ÿµŸàŸÑ ÿπŸÑŸâ ÿ¨ŸÖŸäÿπ ÿßŸÑŸàŸäÿØÿ¨ÿ∑ÿ≥ ŸÑŸÑŸàÿ≠ÿ© ÿßŸÑŸÖÿπŸÑŸàŸÖÿßÿ™\r\n   * \r\n   * @param {String} dashboardId - Dashboard ID\r\n   * @returns {Array} Widgets\r\n   */\r\n  getDashboardWidgets(dashboardId) {\r\n    try {\r\n      const widgets = Array.from(this.widgets.values()).filter(\r\n        w => w.dashboardId === dashboardId\r\n      );\r\n      return widgets;\r\n    } catch (error) {\r\n      this.logger.error(`Error getting dashboard widgets: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get widgets by type\r\n   * ÿßŸÑÿ≠ÿµŸàŸÑ ÿπŸÑŸâ ÿßŸÑŸàŸäÿØÿ¨ÿ∑ÿ≥ ÿ≠ÿ≥ÿ® ÿßŸÑŸÜŸàÿπ\r\n   * \r\n   * @param {String} type - Widget type\r\n   * @returns {Array} Widgets\r\n   */\r\n  getWidgetsByType(type) {\r\n    try {\r\n      const widgets = Array.from(this.widgets.values()).filter(\r\n        w => w.type === type\r\n      );\r\n      return widgets;\r\n    } catch (error) {\r\n      this.logger.error(`Error getting widgets by type: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Delete widget\r\n   * ÿ≠ÿ∞ŸÅ ŸàŸäÿØÿ¨ÿ™\r\n   * \r\n   * @param {String} widgetId - Widget ID\r\n   */\r\n  deleteWidget(widgetId) {\r\n    try {\r\n      const widget = this.widgets.get(widgetId);\r\n      if (!widget) {\r\n        throw new Error(`Widget not found: ${widgetId}`);\r\n      }\r\n\r\n      // Remove subscriptions\r\n      this.subscriptions.delete(widgetId);\r\n\r\n      // Remove widget\r\n      this.widgets.delete(widgetId);\r\n\r\n      this.emit('widget:deleted', { widgetId, widget });\r\n      this.logger.info(`Widget deleted: ${widgetId}`);\r\n    } catch (error) {\r\n      this.logger.error(`Error deleting widget: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Reorder widget position\r\n   * ÿ•ÿπÿßÿØÿ© ÿ™ÿ±ÿ™Ÿäÿ® ŸÖŸàÿ∂ÿπ ÿßŸÑŸàŸäÿØÿ¨ÿ™\r\n   * \r\n   * @param {String} widgetId - Widget ID\r\n   * @param {Object} position - New position { x, y }\r\n   */\r\n  reorderWidget(widgetId, position) {\r\n    try {\r\n      const widget = this.widgets.get(widgetId);\r\n      if (!widget) {\r\n        throw new Error(`Widget not found: ${widgetId}`);\r\n      }\r\n\r\n      widget.position = position;\r\n      widget.metadata.updatedAt = new Date();\r\n\r\n      this.emit('widget:reordered', { widgetId, position });\r\n      this.logger.info(`Widget reordered: ${widgetId}`);\r\n    } catch (error) {\r\n      this.logger.error(`Error reordering widget: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Resize widget\r\n   * ÿ™ÿ∫ŸäŸäÿ± ÿ≠ÿ¨ŸÖ ÿßŸÑŸàŸäÿØÿ¨ÿ™\r\n   * \r\n   * @param {String} widgetId - Widget ID\r\n   * @param {Object} size - New size { width, height }\r\n   */\r\n  resizeWidget(widgetId, size) {\r\n    try {\r\n      const widget = this.widgets.get(widgetId);\r\n      if (!widget) {\r\n        throw new Error(`Widget not found: ${widgetId}`);\r\n      }\r\n\r\n      // Validate minimum size\r\n      if (size.width < 1 || size.height < 1) {\r\n        throw new Error('Minimum widget size is 1x1');\r\n      }\r\n\r\n      widget.size = size;\r\n      widget.metadata.updatedAt = new Date();\r\n\r\n      this.emit('widget:resized', { widgetId, size });\r\n      this.logger.info(`Widget resized: ${widgetId}`);\r\n    } catch (error) {\r\n      this.logger.error(`Error resizing widget: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get widget availability stats\r\n   * ÿßŸÑÿ≠ÿµŸàŸÑ ÿπŸÑŸâ ÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ÿ™ŸàŸÅÿ± ÿßŸÑŸàŸäÿØÿ¨ÿ™\r\n   * \r\n   * @returns {Object} Statistics\r\n   */\r\n  getWidgetStats() {\r\n    try {\r\n      const stats = {\r\n        totalWidgets: this.widgets.size,\r\n        byType: {},\r\n        activeSubscriptions: 0,\r\n        queuedUpdates: this.updateQueue.length,\r\n        types: Object.keys(this.widgetTypes)\r\n      };\r\n\r\n      // Count by type\r\n      this.widgets.forEach(widget => {\r\n        stats.byType[widget.type] = (stats.byType[widget.type] || 0) + 1;\r\n      });\r\n\r\n      // Count subscriptions\r\n      this.subscriptions.forEach(subs => {\r\n        stats.activeSubscriptions += subs.length;\r\n      });\r\n\r\n      return stats;\r\n    } catch (error) {\r\n      this.logger.error(`Error getting widget stats: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get available widget types\r\n   * ÿßŸÑÿ≠ÿµŸàŸÑ ÿπŸÑŸâ ÿ£ŸÜŸàÿßÿπ ÿßŸÑŸàŸäÿØÿ¨ÿ∑ ÿßŸÑŸÖÿ™ÿßÿ≠ÿ©\r\n   * \r\n   * @returns {Object} Widget types\r\n   */\r\n  getAvailableTypes() {\r\n    try {\r\n      const types = {};\r\n      \r\n      Object.entries(this.widgetTypes).forEach(([key, value]) => {\r\n        types[key] = {\r\n          name: value.name,\r\n          icon: value.icon,\r\n          defaultSize: value.defaultSize,\r\n          category: value.category,\r\n          fields: value.fields\r\n        };\r\n      });\r\n\r\n      return types;\r\n    } catch (error) {\r\n      this.logger.error(`Error getting available types: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Validate widget data\r\n   * ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿµÿ≠ÿ© ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸàŸäÿØÿ¨ÿ™\r\n   * \r\n   * @param {Object} widgetData - Widget data\r\n   * @returns {Object} Validation result\r\n   */\r\n  validateWidget(widgetData) {\r\n    try {\r\n      const { type, title, config } = widgetData;\r\n      const errors = [];\r\n      const warnings = [];\r\n\r\n      // Check type\r\n      if (!this.widgetTypes[type]) {\r\n        errors.push(`Invalid widget type: ${type}`);\r\n      }\r\n\r\n      // Check title\r\n      if (!title || title.length === 0) {\r\n        warnings.push('Widget title is empty');\r\n      }\r\n\r\n      if (title && title.length > 100) {\r\n        warnings.push('Widget title is longer than 100 characters');\r\n      }\r\n\r\n      // Check config\r\n      if (!config || typeof config !== 'object') {\r\n        errors.push('Config must be an object');\r\n      }\r\n\r\n      return {\r\n        valid: errors.length === 0,\r\n        errors,\r\n        warnings\r\n      };\r\n    } catch (error) {\r\n      this.logger.error(`Error validating widget: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Clone widget\r\n   * ŸÜÿ≥ÿÆ ŸàŸäÿØÿ¨ÿ™\r\n   * \r\n   * @param {String} widgetId - Widget ID to clone\r\n   * @param {Object} newData - New widget data\r\n   * @returns {Object} New widget\r\n   */\r\n  cloneWidget(widgetId, newData = {}) {\r\n    try {\r\n      const original = this.widgets.get(widgetId);\r\n      if (!original) {\r\n        throw new Error(`Widget not found: ${widgetId}`);\r\n      }\r\n\r\n      const cloned = {\r\n        ...original,\r\n        id: uuidv4(),\r\n        title: newData.title || `${original.title} (Copy)`,\r\n        position: newData.position || { x: original.position.x + 1, y: original.position.y + 1 },\r\n        metadata: {\r\n          ...original.metadata,\r\n          createdAt: new Date(),\r\n          updatedAt: new Date(),\r\n          version: 1\r\n        }\r\n      };\r\n\r\n      this.widgets.set(cloned.id, cloned);\r\n      this.emit('widget:cloned', { original: widgetId, cloned: cloned.id });\r\n\r\n      return cloned;\r\n    } catch (error) {\r\n      this.logger.error(`Error cloning widget: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Export widgets configuration\r\n   * ÿ™ÿµÿØŸäÿ± ÿ•ÿπÿØÿßÿØÿßÿ™ ÿßŸÑŸàŸäÿØÿ¨ÿ∑\r\n   * \r\n   * @param {String} dashboardId - Dashboard ID\r\n   * @returns {Array} Widgets configuration\r\n   */\r\n  exportWidgets(dashboardId) {\r\n    try {\r\n      const widgets = this.getDashboardWidgets(dashboardId);\r\n      return widgets.map(w => ({\r\n        type: w.type,\r\n        title: w.title,\r\n        config: w.config,\r\n        position: w.position,\r\n        size: w.size,\r\n        refreshInterval: w.refreshInterval\r\n      }));\r\n    } catch (error) {\r\n      this.logger.error(`Error exporting widgets: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n}\r\n\r\nmodule.exports = new WidgetManager();\r\n"],"mappings":"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","ignoreList":[]}