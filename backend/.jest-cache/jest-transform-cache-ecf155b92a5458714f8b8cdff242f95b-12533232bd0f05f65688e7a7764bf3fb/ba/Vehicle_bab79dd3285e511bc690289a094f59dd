16b01ae71e20e219771dd3059de1d000
const mongoose = require('mongoose');
const vehicleSchema = new mongoose.Schema({
  // معلومات أساسية
  vehicleNumber: {
    type: String,
    required: true,
    unique: true,
    index: true
  },
  plateNumber: {
    type: String,
    required: true,
    unique: true
  },
  type: {
    type: String,
    enum: ['bus', 'van', 'car', 'truck'],
    required: true
  },
  brand: String,
  model: String,
  year: Number,
  color: String,
  capacity: {
    type: Number,
    required: true,
    min: 1
  },
  // مستوى الوقود (للتوافق مع الاختبارات)
  fuelLevel: {
    type: Number,
    default: 100
  },
  // حالة المركبة
  status: {
    type: String,
    enum: ['active', 'maintenance', 'inactive', 'emergency'],
    default: 'active'
  },
  // معلومات GPS والموقع
  gpsDevice: {
    deviceId: String,
    lastUpdate: Date,
    currentLocation: {
      type: {
        type: String,
        enum: ['Point'],
        default: 'Point'
      },
      coordinates: {
        type: [Number] // [longitude, latitude]
      },
      address: String,
      speed: Number,
      // km/h
      heading: Number // اتجاه الحركة (0-360)
    }
  },
  // السائق الحالي
  currentDriver: {
    type: mongoose.Schema.Types.ObjectId,
    ref: 'User'
  },
  // حقل مستعار للسائق (للتوافق مع الاختبارات)
  driver: {
    type: mongoose.Schema.Types.ObjectId,
    ref: 'User'
  },
  // المسار الحالي
  currentRoute: {
    type: mongoose.Schema.Types.ObjectId,
    ref: 'TransportRoute'
  },
  // مسافة المركبة
  mileage: {
    type: Number,
    default: 0
  },
  // استهلاك الوقود
  fuelConsumption: {
    fuelType: {
      type: String,
      enum: ['petrol', 'diesel', 'electric', 'hybrid']
    },
    tankCapacity: Number,
    // لتر
    currentFuelLevel: Number,
    // لتر
    averageConsumption: Number,
    // لتر/100كم
    lastRefill: {
      date: Date,
      amount: Number,
      cost: Number,
      station: String
    }
  },
  // صيانة المركبة
  maintenance: {
    lastMaintenanceDate: Date,
    nextMaintenanceDate: Date,
    nextMaintenanceKm: Number,
    currentOdometer: Number,
    // كم
    maintenanceHistory: [{
      date: Date,
      type: String,
      description: String,
      cost: Number,
      workshop: String
    }]
  },
  // سجل الصيانة (للتوافق مع الاختبارات)
  maintenanceHistory: [{
    date: Date,
    type: String,
    description: String,
    cost: Number,
    workshop: String
  }],
  // تأمين المركبة
  insurance: {
    company: String,
    policyNumber: String,
    startDate: Date,
    expiryDate: Date,
    coverageAmount: Number,
    annualCost: Number
  },
  // مراقبة السلامة
  safety: {
    lastInspectionDate: Date,
    nextInspectionDate: Date,
    emergencyAlerts: [{
      timestamp: Date,
      type: {
        type: String,
        enum: ['accident', 'breakdown', 'speeding', 'harsh_braking', 'deviation']
      },
      location: {
        type: {
          type: String,
          default: 'Point'
        },
        coordinates: [Number]
      },
      severity: {
        type: String,
        enum: ['low', 'medium', 'high', 'critical']
      },
      resolved: {
        type: Boolean,
        default: false
      },
      resolvedAt: Date
    }],
    speedingIncidents: {
      type: Number,
      default: 0
    },
    harshBrakingIncidents: {
      type: Number,
      default: 0
    }
  },
  // الركاب المعينين
  assignedPassengers: [{
    type: mongoose.Schema.Types.ObjectId,
    ref: 'User'
  }],
  // إحصائيات
  statistics: {
    totalDistanceCovered: {
      type: Number,
      default: 0
    },
    // كم
    totalFuelConsumed: {
      type: Number,
      default: 0
    },
    // لتر
    totalMaintenanceCost: {
      type: Number,
      default: 0
    },
    // ريال
    averageSpeed: Number,
    // km/h
    tripCount: {
      type: Number,
      default: 0
    }
  },
  // معلومات إضافية
  notes: String,
  documents: [{
    name: String,
    type: String,
    url: String,
    uploadDate: Date
  }],
  isActive: {
    type: Boolean,
    default: true
  }
}, {
  timestamps: true
});

// Indexes للبحث والأداء
vehicleSchema.index({
  status: 1,
  isActive: 1
});
vehicleSchema.index({
  currentDriver: 1
});
vehicleSchema.index({
  'gpsDevice.currentLocation.coordinates': '2dsphere'
});

// Virtual للحصول على حالة الوقود
vehicleSchema.virtual('fuelStatus').get(function () {
  if (!this.fuelConsumption.currentFuelLevel || !this.fuelConsumption.tankCapacity) {
    return 'unknown';
  }
  const percentage = this.fuelConsumption.currentFuelLevel / this.fuelConsumption.tankCapacity * 100;
  if (percentage < 20) return 'critical';
  if (percentage < 40) return 'low';
  if (percentage < 70) return 'medium';
  return 'good';
});

// Virtual للحصول على حالة الصيانة
vehicleSchema.virtual('maintenanceStatus').get(function () {
  if (!this.maintenance.nextMaintenanceDate) return 'unknown';
  const daysUntilMaintenance = Math.ceil((this.maintenance.nextMaintenanceDate - new Date()) / (1000 * 60 * 60 * 24));
  if (daysUntilMaintenance < 0) return 'overdue';
  if (daysUntilMaintenance <= 7) return 'urgent';
  if (daysUntilMaintenance <= 30) return 'soon';
  return 'good';
});

// Method لتحديث موقع GPS
vehicleSchema.methods.updateGPSLocation = function (location, speed, heading) {
  this.gpsDevice.currentLocation = {
    type: 'Point',
    coordinates: location.coordinates || [location.longitude, location.latitude]
  };
  if (speed !== undefined) this.currentSpeed = speed;
  if (heading !== undefined) this.gpsDevice.heading = heading;
  this.gpsDevice.lastUpdate = new Date();
  return this.save();
};

// Method لإضافة تنبيه طوارئ
vehicleSchema.methods.addEmergencyAlert = function (alert) {
  this.safety.emergencyAlerts.push({
    timestamp: new Date(),
    type: alert.type,
    location: alert.location,
    severity: alert.severity
  });

  // تحديث حالة المركبة للطوارئ الحرجة
  if (alert.severity === 'critical') {
    this.status = 'emergency';
  }
  return this.save();
};

// Method لتحديث استهلاك الوقود
vehicleSchema.methods.updateFuelConsumption = function (distance) {
  if (this.fuelConsumption.averageConsumption) {
    const consumed = distance / 100 * this.fuelConsumption.averageConsumption;
    this.fuelConsumption.currentFuelLevel -= consumed;
    this.statistics.totalFuelConsumed += consumed;
    this.statistics.totalDistanceCovered += distance;
  }
  return this.save();
};

// Static method للبحث عن مركبات قريبة
vehicleSchema.statics.findNearby = function (longitude, latitude, maxDistance = 5000) {
  return this.find({
    'gpsDevice.currentLocation.coordinates': {
      $near: {
        $geometry: {
          type: 'Point',
          coordinates: [longitude, latitude]
        },
        $maxDistance: maxDistance
      }
    },
    status: 'active',
    isActive: true
  });
};

// Static method للحصول على المركبات المتاحة
vehicleSchema.statics.findAvailable = function (capacity) {
  return this.find({
    status: 'active',
    isActive: true,
    capacity: {
      $gte: capacity
    },
    currentDriver: {
      $exists: true
    }
  });
};
module.exports = mongoose.model('Vehicle', vehicleSchema);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJ2ZWhpY2xlU2NoZW1hIiwiU2NoZW1hIiwidmVoaWNsZU51bWJlciIsInR5cGUiLCJTdHJpbmciLCJyZXF1aXJlZCIsInVuaXF1ZSIsImluZGV4IiwicGxhdGVOdW1iZXIiLCJlbnVtIiwiYnJhbmQiLCJtb2RlbCIsInllYXIiLCJOdW1iZXIiLCJjb2xvciIsImNhcGFjaXR5IiwibWluIiwiZnVlbExldmVsIiwiZGVmYXVsdCIsInN0YXR1cyIsImdwc0RldmljZSIsImRldmljZUlkIiwibGFzdFVwZGF0ZSIsIkRhdGUiLCJjdXJyZW50TG9jYXRpb24iLCJjb29yZGluYXRlcyIsImFkZHJlc3MiLCJzcGVlZCIsImhlYWRpbmciLCJjdXJyZW50RHJpdmVyIiwiVHlwZXMiLCJPYmplY3RJZCIsInJlZiIsImRyaXZlciIsImN1cnJlbnRSb3V0ZSIsIm1pbGVhZ2UiLCJmdWVsQ29uc3VtcHRpb24iLCJmdWVsVHlwZSIsInRhbmtDYXBhY2l0eSIsImN1cnJlbnRGdWVsTGV2ZWwiLCJhdmVyYWdlQ29uc3VtcHRpb24iLCJsYXN0UmVmaWxsIiwiZGF0ZSIsImFtb3VudCIsImNvc3QiLCJzdGF0aW9uIiwibWFpbnRlbmFuY2UiLCJsYXN0TWFpbnRlbmFuY2VEYXRlIiwibmV4dE1haW50ZW5hbmNlRGF0ZSIsIm5leHRNYWludGVuYW5jZUttIiwiY3VycmVudE9kb21ldGVyIiwibWFpbnRlbmFuY2VIaXN0b3J5IiwiZGVzY3JpcHRpb24iLCJ3b3Jrc2hvcCIsImluc3VyYW5jZSIsImNvbXBhbnkiLCJwb2xpY3lOdW1iZXIiLCJzdGFydERhdGUiLCJleHBpcnlEYXRlIiwiY292ZXJhZ2VBbW91bnQiLCJhbm51YWxDb3N0Iiwic2FmZXR5IiwibGFzdEluc3BlY3Rpb25EYXRlIiwibmV4dEluc3BlY3Rpb25EYXRlIiwiZW1lcmdlbmN5QWxlcnRzIiwidGltZXN0YW1wIiwibG9jYXRpb24iLCJzZXZlcml0eSIsInJlc29sdmVkIiwiQm9vbGVhbiIsInJlc29sdmVkQXQiLCJzcGVlZGluZ0luY2lkZW50cyIsImhhcnNoQnJha2luZ0luY2lkZW50cyIsImFzc2lnbmVkUGFzc2VuZ2VycyIsInN0YXRpc3RpY3MiLCJ0b3RhbERpc3RhbmNlQ292ZXJlZCIsInRvdGFsRnVlbENvbnN1bWVkIiwidG90YWxNYWludGVuYW5jZUNvc3QiLCJhdmVyYWdlU3BlZWQiLCJ0cmlwQ291bnQiLCJub3RlcyIsImRvY3VtZW50cyIsIm5hbWUiLCJ1cmwiLCJ1cGxvYWREYXRlIiwiaXNBY3RpdmUiLCJ0aW1lc3RhbXBzIiwidmlydHVhbCIsImdldCIsInBlcmNlbnRhZ2UiLCJkYXlzVW50aWxNYWludGVuYW5jZSIsIk1hdGgiLCJjZWlsIiwibWV0aG9kcyIsInVwZGF0ZUdQU0xvY2F0aW9uIiwibG9uZ2l0dWRlIiwibGF0aXR1ZGUiLCJ1bmRlZmluZWQiLCJjdXJyZW50U3BlZWQiLCJzYXZlIiwiYWRkRW1lcmdlbmN5QWxlcnQiLCJhbGVydCIsInB1c2giLCJ1cGRhdGVGdWVsQ29uc3VtcHRpb24iLCJkaXN0YW5jZSIsImNvbnN1bWVkIiwic3RhdGljcyIsImZpbmROZWFyYnkiLCJtYXhEaXN0YW5jZSIsImZpbmQiLCIkbmVhciIsIiRnZW9tZXRyeSIsIiRtYXhEaXN0YW5jZSIsImZpbmRBdmFpbGFibGUiLCIkZ3RlIiwiJGV4aXN0cyIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlcyI6WyJWZWhpY2xlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IG1vbmdvb3NlID0gcmVxdWlyZSgnbW9uZ29vc2UnKTtcclxuXHJcbmNvbnN0IHZlaGljbGVTY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hKFxyXG4gIHtcclxuICAgIC8vINmF2LnZhNmI2YXYp9iqINij2LPYp9iz2YrYqVxyXG4gICAgdmVoaWNsZU51bWJlcjoge1xyXG4gICAgICB0eXBlOiBTdHJpbmcsXHJcbiAgICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gICAgICB1bmlxdWU6IHRydWUsXHJcbiAgICAgIGluZGV4OiB0cnVlLFxyXG4gICAgfSxcclxuICAgIHBsYXRlTnVtYmVyOiB7XHJcbiAgICAgIHR5cGU6IFN0cmluZyxcclxuICAgICAgcmVxdWlyZWQ6IHRydWUsXHJcbiAgICAgIHVuaXF1ZTogdHJ1ZSxcclxuICAgIH0sXHJcbiAgICB0eXBlOiB7XHJcbiAgICAgIHR5cGU6IFN0cmluZyxcclxuICAgICAgZW51bTogWydidXMnLCAndmFuJywgJ2NhcicsICd0cnVjayddLFxyXG4gICAgICByZXF1aXJlZDogdHJ1ZSxcclxuICAgIH0sXHJcbiAgICBicmFuZDogU3RyaW5nLFxyXG4gICAgbW9kZWw6IFN0cmluZyxcclxuICAgIHllYXI6IE51bWJlcixcclxuICAgIGNvbG9yOiBTdHJpbmcsXHJcbiAgICBjYXBhY2l0eToge1xyXG4gICAgICB0eXBlOiBOdW1iZXIsXHJcbiAgICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gICAgICBtaW46IDEsXHJcbiAgICB9LFxyXG5cclxuICAgIC8vINmF2LPYqtmI2Ykg2KfZhNmI2YLZiNivICjZhNmE2KrZiNin2YHZgiDZhdi5INin2YTYp9iu2KrYqNin2LHYp9iqKVxyXG4gICAgZnVlbExldmVsOiB7XHJcbiAgICAgIHR5cGU6IE51bWJlcixcclxuICAgICAgZGVmYXVsdDogMTAwLFxyXG4gICAgfSxcclxuXHJcbiAgICAvLyDYrdin2YTYqSDYp9mE2YXYsdmD2KjYqVxyXG4gICAgc3RhdHVzOiB7XHJcbiAgICAgIHR5cGU6IFN0cmluZyxcclxuICAgICAgZW51bTogWydhY3RpdmUnLCAnbWFpbnRlbmFuY2UnLCAnaW5hY3RpdmUnLCAnZW1lcmdlbmN5J10sXHJcbiAgICAgIGRlZmF1bHQ6ICdhY3RpdmUnLFxyXG4gICAgfSxcclxuXHJcbiAgICAvLyDZhdi52YTZiNmF2KfYqiBHUFMg2YjYp9mE2YXZiNmC2LlcclxuICAgIGdwc0RldmljZToge1xyXG4gICAgICBkZXZpY2VJZDogU3RyaW5nLFxyXG4gICAgICBsYXN0VXBkYXRlOiBEYXRlLFxyXG4gICAgICBjdXJyZW50TG9jYXRpb246IHtcclxuICAgICAgICB0eXBlOiB7XHJcbiAgICAgICAgICB0eXBlOiBTdHJpbmcsXHJcbiAgICAgICAgICBlbnVtOiBbJ1BvaW50J10sXHJcbiAgICAgICAgICBkZWZhdWx0OiAnUG9pbnQnLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY29vcmRpbmF0ZXM6IHtcclxuICAgICAgICAgIHR5cGU6IFtOdW1iZXJdLCAvLyBbbG9uZ2l0dWRlLCBsYXRpdHVkZV1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGFkZHJlc3M6IFN0cmluZyxcclxuICAgICAgICBzcGVlZDogTnVtYmVyLCAvLyBrbS9oXHJcbiAgICAgICAgaGVhZGluZzogTnVtYmVyLCAvLyDYp9iq2KzYp9mHINin2YTYrdix2YPYqSAoMC0zNjApXHJcbiAgICAgIH0sXHJcbiAgICB9LFxyXG5cclxuICAgIC8vINin2YTYs9in2KbZgiDYp9mE2K3Yp9mE2YpcclxuICAgIGN1cnJlbnREcml2ZXI6IHtcclxuICAgICAgdHlwZTogbW9uZ29vc2UuU2NoZW1hLlR5cGVzLk9iamVjdElkLFxyXG4gICAgICByZWY6ICdVc2VyJyxcclxuICAgIH0sXHJcblxyXG4gICAgLy8g2K3ZgtmEINmF2LPYqti52KfYsSDZhNmE2LPYp9im2YIgKNmE2YTYqtmI2KfZgdmCINmF2Lkg2KfZhNin2K7Yqtio2KfYsdin2KopXHJcbiAgICBkcml2ZXI6IHtcclxuICAgICAgdHlwZTogbW9uZ29vc2UuU2NoZW1hLlR5cGVzLk9iamVjdElkLFxyXG4gICAgICByZWY6ICdVc2VyJyxcclxuICAgIH0sXHJcblxyXG4gICAgLy8g2KfZhNmF2LPYp9ixINin2YTYrdin2YTZilxyXG4gICAgY3VycmVudFJvdXRlOiB7XHJcbiAgICAgIHR5cGU6IG1vbmdvb3NlLlNjaGVtYS5UeXBlcy5PYmplY3RJZCxcclxuICAgICAgcmVmOiAnVHJhbnNwb3J0Um91dGUnLFxyXG4gICAgfSxcclxuXHJcbiAgICAvLyDZhdiz2KfZgdipINin2YTZhdix2YPYqNipXHJcbiAgICBtaWxlYWdlOiB7XHJcbiAgICAgIHR5cGU6IE51bWJlcixcclxuICAgICAgZGVmYXVsdDogMCxcclxuICAgIH0sXHJcblxyXG4gICAgLy8g2KfYs9iq2YfZhNin2YMg2KfZhNmI2YLZiNivXHJcbiAgICBmdWVsQ29uc3VtcHRpb246IHtcclxuICAgICAgZnVlbFR5cGU6IHtcclxuICAgICAgICB0eXBlOiBTdHJpbmcsXHJcbiAgICAgICAgZW51bTogWydwZXRyb2wnLCAnZGllc2VsJywgJ2VsZWN0cmljJywgJ2h5YnJpZCddLFxyXG4gICAgICB9LFxyXG4gICAgICB0YW5rQ2FwYWNpdHk6IE51bWJlciwgLy8g2YTYqtixXHJcbiAgICAgIGN1cnJlbnRGdWVsTGV2ZWw6IE51bWJlciwgLy8g2YTYqtixXHJcbiAgICAgIGF2ZXJhZ2VDb25zdW1wdGlvbjogTnVtYmVyLCAvLyDZhNiq2LEvMTAw2YPZhVxyXG4gICAgICBsYXN0UmVmaWxsOiB7XHJcbiAgICAgICAgZGF0ZTogRGF0ZSxcclxuICAgICAgICBhbW91bnQ6IE51bWJlcixcclxuICAgICAgICBjb3N0OiBOdW1iZXIsXHJcbiAgICAgICAgc3RhdGlvbjogU3RyaW5nLFxyXG4gICAgICB9LFxyXG4gICAgfSxcclxuXHJcbiAgICAvLyDYtdmK2KfZhtipINin2YTZhdix2YPYqNipXHJcbiAgICBtYWludGVuYW5jZToge1xyXG4gICAgICBsYXN0TWFpbnRlbmFuY2VEYXRlOiBEYXRlLFxyXG4gICAgICBuZXh0TWFpbnRlbmFuY2VEYXRlOiBEYXRlLFxyXG4gICAgICBuZXh0TWFpbnRlbmFuY2VLbTogTnVtYmVyLFxyXG4gICAgICBjdXJyZW50T2RvbWV0ZXI6IE51bWJlciwgLy8g2YPZhVxyXG4gICAgICBtYWludGVuYW5jZUhpc3Rvcnk6IFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICBkYXRlOiBEYXRlLFxyXG4gICAgICAgICAgdHlwZTogU3RyaW5nLFxyXG4gICAgICAgICAgZGVzY3JpcHRpb246IFN0cmluZyxcclxuICAgICAgICAgIGNvc3Q6IE51bWJlcixcclxuICAgICAgICAgIHdvcmtzaG9wOiBTdHJpbmcsXHJcbiAgICAgICAgfSxcclxuICAgICAgXSxcclxuICAgIH0sXHJcblxyXG4gICAgLy8g2LPYrNmEINin2YTYtdmK2KfZhtipICjZhNmE2KrZiNin2YHZgiDZhdi5INin2YTYp9iu2KrYqNin2LHYp9iqKVxyXG4gICAgbWFpbnRlbmFuY2VIaXN0b3J5OiBbXHJcbiAgICAgIHtcclxuICAgICAgICBkYXRlOiBEYXRlLFxyXG4gICAgICAgIHR5cGU6IFN0cmluZyxcclxuICAgICAgICBkZXNjcmlwdGlvbjogU3RyaW5nLFxyXG4gICAgICAgIGNvc3Q6IE51bWJlcixcclxuICAgICAgICB3b3Jrc2hvcDogU3RyaW5nLFxyXG4gICAgICB9LFxyXG4gICAgXSxcclxuXHJcbiAgICAvLyDYqtij2YXZitmGINin2YTZhdix2YPYqNipXHJcbiAgICBpbnN1cmFuY2U6IHtcclxuICAgICAgY29tcGFueTogU3RyaW5nLFxyXG4gICAgICBwb2xpY3lOdW1iZXI6IFN0cmluZyxcclxuICAgICAgc3RhcnREYXRlOiBEYXRlLFxyXG4gICAgICBleHBpcnlEYXRlOiBEYXRlLFxyXG4gICAgICBjb3ZlcmFnZUFtb3VudDogTnVtYmVyLFxyXG4gICAgICBhbm51YWxDb3N0OiBOdW1iZXIsXHJcbiAgICB9LFxyXG5cclxuICAgIC8vINmF2LHYp9mC2KjYqSDYp9mE2LPZhNin2YXYqVxyXG4gICAgc2FmZXR5OiB7XHJcbiAgICAgIGxhc3RJbnNwZWN0aW9uRGF0ZTogRGF0ZSxcclxuICAgICAgbmV4dEluc3BlY3Rpb25EYXRlOiBEYXRlLFxyXG4gICAgICBlbWVyZ2VuY3lBbGVydHM6IFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUsXHJcbiAgICAgICAgICB0eXBlOiB7XHJcbiAgICAgICAgICAgIHR5cGU6IFN0cmluZyxcclxuICAgICAgICAgICAgZW51bTogWydhY2NpZGVudCcsICdicmVha2Rvd24nLCAnc3BlZWRpbmcnLCAnaGFyc2hfYnJha2luZycsICdkZXZpYXRpb24nXSxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBsb2NhdGlvbjoge1xyXG4gICAgICAgICAgICB0eXBlOiB7XHJcbiAgICAgICAgICAgICAgdHlwZTogU3RyaW5nLFxyXG4gICAgICAgICAgICAgIGRlZmF1bHQ6ICdQb2ludCcsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGNvb3JkaW5hdGVzOiBbTnVtYmVyXSxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBzZXZlcml0eToge1xyXG4gICAgICAgICAgICB0eXBlOiBTdHJpbmcsXHJcbiAgICAgICAgICAgIGVudW06IFsnbG93JywgJ21lZGl1bScsICdoaWdoJywgJ2NyaXRpY2FsJ10sXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgcmVzb2x2ZWQ6IHtcclxuICAgICAgICAgICAgdHlwZTogQm9vbGVhbixcclxuICAgICAgICAgICAgZGVmYXVsdDogZmFsc2UsXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgcmVzb2x2ZWRBdDogRGF0ZSxcclxuICAgICAgICB9LFxyXG4gICAgICBdLFxyXG4gICAgICBzcGVlZGluZ0luY2lkZW50czoge1xyXG4gICAgICAgIHR5cGU6IE51bWJlcixcclxuICAgICAgICBkZWZhdWx0OiAwLFxyXG4gICAgICB9LFxyXG4gICAgICBoYXJzaEJyYWtpbmdJbmNpZGVudHM6IHtcclxuICAgICAgICB0eXBlOiBOdW1iZXIsXHJcbiAgICAgICAgZGVmYXVsdDogMCxcclxuICAgICAgfSxcclxuICAgIH0sXHJcblxyXG4gICAgLy8g2KfZhNix2YPYp9ioINin2YTZhdi52YrZhtmK2YZcclxuICAgIGFzc2lnbmVkUGFzc2VuZ2VyczogW1xyXG4gICAgICB7XHJcbiAgICAgICAgdHlwZTogbW9uZ29vc2UuU2NoZW1hLlR5cGVzLk9iamVjdElkLFxyXG4gICAgICAgIHJlZjogJ1VzZXInLFxyXG4gICAgICB9LFxyXG4gICAgXSxcclxuXHJcbiAgICAvLyDYpdit2LXYp9im2YrYp9iqXHJcbiAgICBzdGF0aXN0aWNzOiB7XHJcbiAgICAgIHRvdGFsRGlzdGFuY2VDb3ZlcmVkOiB7XHJcbiAgICAgICAgdHlwZTogTnVtYmVyLFxyXG4gICAgICAgIGRlZmF1bHQ6IDAsXHJcbiAgICAgIH0sIC8vINmD2YVcclxuICAgICAgdG90YWxGdWVsQ29uc3VtZWQ6IHtcclxuICAgICAgICB0eXBlOiBOdW1iZXIsXHJcbiAgICAgICAgZGVmYXVsdDogMCxcclxuICAgICAgfSwgLy8g2YTYqtixXHJcbiAgICAgIHRvdGFsTWFpbnRlbmFuY2VDb3N0OiB7XHJcbiAgICAgICAgdHlwZTogTnVtYmVyLFxyXG4gICAgICAgIGRlZmF1bHQ6IDAsXHJcbiAgICAgIH0sIC8vINix2YrYp9mEXHJcbiAgICAgIGF2ZXJhZ2VTcGVlZDogTnVtYmVyLCAvLyBrbS9oXHJcbiAgICAgIHRyaXBDb3VudDoge1xyXG4gICAgICAgIHR5cGU6IE51bWJlcixcclxuICAgICAgICBkZWZhdWx0OiAwLFxyXG4gICAgICB9LFxyXG4gICAgfSxcclxuXHJcbiAgICAvLyDZhdi52YTZiNmF2KfYqiDYpdi22KfZgdmK2KlcclxuICAgIG5vdGVzOiBTdHJpbmcsXHJcbiAgICBkb2N1bWVudHM6IFtcclxuICAgICAge1xyXG4gICAgICAgIG5hbWU6IFN0cmluZyxcclxuICAgICAgICB0eXBlOiBTdHJpbmcsXHJcbiAgICAgICAgdXJsOiBTdHJpbmcsXHJcbiAgICAgICAgdXBsb2FkRGF0ZTogRGF0ZSxcclxuICAgICAgfSxcclxuICAgIF0sXHJcblxyXG4gICAgaXNBY3RpdmU6IHtcclxuICAgICAgdHlwZTogQm9vbGVhbixcclxuICAgICAgZGVmYXVsdDogdHJ1ZSxcclxuICAgIH0sXHJcbiAgfSxcclxuICB7XHJcbiAgICB0aW1lc3RhbXBzOiB0cnVlLFxyXG4gIH1cclxuKTtcclxuXHJcbi8vIEluZGV4ZXMg2YTZhNio2K3YqyDZiNin2YTYo9iv2KfYoVxyXG52ZWhpY2xlU2NoZW1hLmluZGV4KHsgc3RhdHVzOiAxLCBpc0FjdGl2ZTogMSB9KTtcclxudmVoaWNsZVNjaGVtYS5pbmRleCh7IGN1cnJlbnREcml2ZXI6IDEgfSk7XHJcbnZlaGljbGVTY2hlbWEuaW5kZXgoeyAnZ3BzRGV2aWNlLmN1cnJlbnRMb2NhdGlvbi5jb29yZGluYXRlcyc6ICcyZHNwaGVyZScgfSk7XHJcblxyXG4vLyBWaXJ0dWFsINmE2YTYrdi12YjZhCDYudmE2Ykg2K3Yp9mE2Kkg2KfZhNmI2YLZiNivXHJcbnZlaGljbGVTY2hlbWEudmlydHVhbCgnZnVlbFN0YXR1cycpLmdldChmdW5jdGlvbiAoKSB7XHJcbiAgaWYgKCF0aGlzLmZ1ZWxDb25zdW1wdGlvbi5jdXJyZW50RnVlbExldmVsIHx8ICF0aGlzLmZ1ZWxDb25zdW1wdGlvbi50YW5rQ2FwYWNpdHkpIHtcclxuICAgIHJldHVybiAndW5rbm93bic7XHJcbiAgfVxyXG4gIGNvbnN0IHBlcmNlbnRhZ2UgPVxyXG4gICAgKHRoaXMuZnVlbENvbnN1bXB0aW9uLmN1cnJlbnRGdWVsTGV2ZWwgLyB0aGlzLmZ1ZWxDb25zdW1wdGlvbi50YW5rQ2FwYWNpdHkpICogMTAwO1xyXG4gIGlmIChwZXJjZW50YWdlIDwgMjApIHJldHVybiAnY3JpdGljYWwnO1xyXG4gIGlmIChwZXJjZW50YWdlIDwgNDApIHJldHVybiAnbG93JztcclxuICBpZiAocGVyY2VudGFnZSA8IDcwKSByZXR1cm4gJ21lZGl1bSc7XHJcbiAgcmV0dXJuICdnb29kJztcclxufSk7XHJcblxyXG4vLyBWaXJ0dWFsINmE2YTYrdi12YjZhCDYudmE2Ykg2K3Yp9mE2Kkg2KfZhNi12YrYp9mG2KlcclxudmVoaWNsZVNjaGVtYS52aXJ0dWFsKCdtYWludGVuYW5jZVN0YXR1cycpLmdldChmdW5jdGlvbiAoKSB7XHJcbiAgaWYgKCF0aGlzLm1haW50ZW5hbmNlLm5leHRNYWludGVuYW5jZURhdGUpIHJldHVybiAndW5rbm93bic7XHJcbiAgY29uc3QgZGF5c1VudGlsTWFpbnRlbmFuY2UgPSBNYXRoLmNlaWwoXHJcbiAgICAodGhpcy5tYWludGVuYW5jZS5uZXh0TWFpbnRlbmFuY2VEYXRlIC0gbmV3IERhdGUoKSkgLyAoMTAwMCAqIDYwICogNjAgKiAyNClcclxuICApO1xyXG4gIGlmIChkYXlzVW50aWxNYWludGVuYW5jZSA8IDApIHJldHVybiAnb3ZlcmR1ZSc7XHJcbiAgaWYgKGRheXNVbnRpbE1haW50ZW5hbmNlIDw9IDcpIHJldHVybiAndXJnZW50JztcclxuICBpZiAoZGF5c1VudGlsTWFpbnRlbmFuY2UgPD0gMzApIHJldHVybiAnc29vbic7XHJcbiAgcmV0dXJuICdnb29kJztcclxufSk7XHJcblxyXG4vLyBNZXRob2Qg2YTYqtit2K/ZitirINmF2YjZgti5IEdQU1xyXG52ZWhpY2xlU2NoZW1hLm1ldGhvZHMudXBkYXRlR1BTTG9jYXRpb24gPSBmdW5jdGlvbiAobG9jYXRpb24sIHNwZWVkLCBoZWFkaW5nKSB7XHJcbiAgdGhpcy5ncHNEZXZpY2UuY3VycmVudExvY2F0aW9uID0ge1xyXG4gICAgdHlwZTogJ1BvaW50JyxcclxuICAgIGNvb3JkaW5hdGVzOiBsb2NhdGlvbi5jb29yZGluYXRlcyB8fCBbbG9jYXRpb24ubG9uZ2l0dWRlLCBsb2NhdGlvbi5sYXRpdHVkZV0sXHJcbiAgfTtcclxuICBpZiAoc3BlZWQgIT09IHVuZGVmaW5lZCkgdGhpcy5jdXJyZW50U3BlZWQgPSBzcGVlZDtcclxuICBpZiAoaGVhZGluZyAhPT0gdW5kZWZpbmVkKSB0aGlzLmdwc0RldmljZS5oZWFkaW5nID0gaGVhZGluZztcclxuICB0aGlzLmdwc0RldmljZS5sYXN0VXBkYXRlID0gbmV3IERhdGUoKTtcclxuICByZXR1cm4gdGhpcy5zYXZlKCk7XHJcbn07XHJcblxyXG4vLyBNZXRob2Qg2YTYpdi22KfZgdipINiq2YbYqNmK2Ycg2LfZiNin2LHYplxyXG52ZWhpY2xlU2NoZW1hLm1ldGhvZHMuYWRkRW1lcmdlbmN5QWxlcnQgPSBmdW5jdGlvbiAoYWxlcnQpIHtcclxuICB0aGlzLnNhZmV0eS5lbWVyZ2VuY3lBbGVydHMucHVzaCh7XHJcbiAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXHJcbiAgICB0eXBlOiBhbGVydC50eXBlLFxyXG4gICAgbG9jYXRpb246IGFsZXJ0LmxvY2F0aW9uLFxyXG4gICAgc2V2ZXJpdHk6IGFsZXJ0LnNldmVyaXR5LFxyXG4gIH0pO1xyXG5cclxuICAvLyDYqtit2K/ZitirINit2KfZhNipINin2YTZhdix2YPYqNipINmE2YTYt9mI2KfYsdimINin2YTYrdix2KzYqVxyXG4gIGlmIChhbGVydC5zZXZlcml0eSA9PT0gJ2NyaXRpY2FsJykge1xyXG4gICAgdGhpcy5zdGF0dXMgPSAnZW1lcmdlbmN5JztcclxuICB9XHJcblxyXG4gIHJldHVybiB0aGlzLnNhdmUoKTtcclxufTtcclxuXHJcbi8vIE1ldGhvZCDZhNiq2K3Yr9mK2Ksg2KfYs9iq2YfZhNin2YMg2KfZhNmI2YLZiNivXHJcbnZlaGljbGVTY2hlbWEubWV0aG9kcy51cGRhdGVGdWVsQ29uc3VtcHRpb24gPSBmdW5jdGlvbiAoZGlzdGFuY2UpIHtcclxuICBpZiAodGhpcy5mdWVsQ29uc3VtcHRpb24uYXZlcmFnZUNvbnN1bXB0aW9uKSB7XHJcbiAgICBjb25zdCBjb25zdW1lZCA9IChkaXN0YW5jZSAvIDEwMCkgKiB0aGlzLmZ1ZWxDb25zdW1wdGlvbi5hdmVyYWdlQ29uc3VtcHRpb247XHJcbiAgICB0aGlzLmZ1ZWxDb25zdW1wdGlvbi5jdXJyZW50RnVlbExldmVsIC09IGNvbnN1bWVkO1xyXG4gICAgdGhpcy5zdGF0aXN0aWNzLnRvdGFsRnVlbENvbnN1bWVkICs9IGNvbnN1bWVkO1xyXG4gICAgdGhpcy5zdGF0aXN0aWNzLnRvdGFsRGlzdGFuY2VDb3ZlcmVkICs9IGRpc3RhbmNlO1xyXG4gIH1cclxuICByZXR1cm4gdGhpcy5zYXZlKCk7XHJcbn07XHJcblxyXG4vLyBTdGF0aWMgbWV0aG9kINmE2YTYqNit2Ksg2LnZhiDZhdix2YPYqNin2Kog2YLYsdmK2KjYqVxyXG52ZWhpY2xlU2NoZW1hLnN0YXRpY3MuZmluZE5lYXJieSA9IGZ1bmN0aW9uIChsb25naXR1ZGUsIGxhdGl0dWRlLCBtYXhEaXN0YW5jZSA9IDUwMDApIHtcclxuICByZXR1cm4gdGhpcy5maW5kKHtcclxuICAgICdncHNEZXZpY2UuY3VycmVudExvY2F0aW9uLmNvb3JkaW5hdGVzJzoge1xyXG4gICAgICAkbmVhcjoge1xyXG4gICAgICAgICRnZW9tZXRyeToge1xyXG4gICAgICAgICAgdHlwZTogJ1BvaW50JyxcclxuICAgICAgICAgIGNvb3JkaW5hdGVzOiBbbG9uZ2l0dWRlLCBsYXRpdHVkZV0sXHJcbiAgICAgICAgfSxcclxuICAgICAgICAkbWF4RGlzdGFuY2U6IG1heERpc3RhbmNlLFxyXG4gICAgICB9LFxyXG4gICAgfSxcclxuICAgIHN0YXR1czogJ2FjdGl2ZScsXHJcbiAgICBpc0FjdGl2ZTogdHJ1ZSxcclxuICB9KTtcclxufTtcclxuXHJcbi8vIFN0YXRpYyBtZXRob2Qg2YTZhNit2LXZiNmEINi52YTZiSDYp9mE2YXYsdmD2KjYp9iqINin2YTZhdiq2KfYrdipXHJcbnZlaGljbGVTY2hlbWEuc3RhdGljcy5maW5kQXZhaWxhYmxlID0gZnVuY3Rpb24gKGNhcGFjaXR5KSB7XHJcbiAgcmV0dXJuIHRoaXMuZmluZCh7XHJcbiAgICBzdGF0dXM6ICdhY3RpdmUnLFxyXG4gICAgaXNBY3RpdmU6IHRydWUsXHJcbiAgICBjYXBhY2l0eTogeyAkZ3RlOiBjYXBhY2l0eSB9LFxyXG4gICAgY3VycmVudERyaXZlcjogeyAkZXhpc3RzOiB0cnVlIH0sXHJcbiAgfSk7XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IG1vbmdvb3NlLm1vZGVsKCdWZWhpY2xlJywgdmVoaWNsZVNjaGVtYSk7XHJcbiJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsUUFBUSxHQUFHQyxPQUFPLENBQUMsVUFBVSxDQUFDO0FBRXBDLE1BQU1DLGFBQWEsR0FBRyxJQUFJRixRQUFRLENBQUNHLE1BQU0sQ0FDdkM7RUFDRTtFQUNBQyxhQUFhLEVBQUU7SUFDYkMsSUFBSSxFQUFFQyxNQUFNO0lBQ1pDLFFBQVEsRUFBRSxJQUFJO0lBQ2RDLE1BQU0sRUFBRSxJQUFJO0lBQ1pDLEtBQUssRUFBRTtFQUNULENBQUM7RUFDREMsV0FBVyxFQUFFO0lBQ1hMLElBQUksRUFBRUMsTUFBTTtJQUNaQyxRQUFRLEVBQUUsSUFBSTtJQUNkQyxNQUFNLEVBQUU7RUFDVixDQUFDO0VBQ0RILElBQUksRUFBRTtJQUNKQSxJQUFJLEVBQUVDLE1BQU07SUFDWkssSUFBSSxFQUFFLENBQUMsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsT0FBTyxDQUFDO0lBQ3BDSixRQUFRLEVBQUU7RUFDWixDQUFDO0VBQ0RLLEtBQUssRUFBRU4sTUFBTTtFQUNiTyxLQUFLLEVBQUVQLE1BQU07RUFDYlEsSUFBSSxFQUFFQyxNQUFNO0VBQ1pDLEtBQUssRUFBRVYsTUFBTTtFQUNiVyxRQUFRLEVBQUU7SUFDUlosSUFBSSxFQUFFVSxNQUFNO0lBQ1pSLFFBQVEsRUFBRSxJQUFJO0lBQ2RXLEdBQUcsRUFBRTtFQUNQLENBQUM7RUFFRDtFQUNBQyxTQUFTLEVBQUU7SUFDVGQsSUFBSSxFQUFFVSxNQUFNO0lBQ1pLLE9BQU8sRUFBRTtFQUNYLENBQUM7RUFFRDtFQUNBQyxNQUFNLEVBQUU7SUFDTmhCLElBQUksRUFBRUMsTUFBTTtJQUNaSyxJQUFJLEVBQUUsQ0FBQyxRQUFRLEVBQUUsYUFBYSxFQUFFLFVBQVUsRUFBRSxXQUFXLENBQUM7SUFDeERTLE9BQU8sRUFBRTtFQUNYLENBQUM7RUFFRDtFQUNBRSxTQUFTLEVBQUU7SUFDVEMsUUFBUSxFQUFFakIsTUFBTTtJQUNoQmtCLFVBQVUsRUFBRUMsSUFBSTtJQUNoQkMsZUFBZSxFQUFFO01BQ2ZyQixJQUFJLEVBQUU7UUFDSkEsSUFBSSxFQUFFQyxNQUFNO1FBQ1pLLElBQUksRUFBRSxDQUFDLE9BQU8sQ0FBQztRQUNmUyxPQUFPLEVBQUU7TUFDWCxDQUFDO01BQ0RPLFdBQVcsRUFBRTtRQUNYdEIsSUFBSSxFQUFFLENBQUNVLE1BQU0sQ0FBQyxDQUFFO01BQ2xCLENBQUM7TUFDRGEsT0FBTyxFQUFFdEIsTUFBTTtNQUNmdUIsS0FBSyxFQUFFZCxNQUFNO01BQUU7TUFDZmUsT0FBTyxFQUFFZixNQUFNLENBQUU7SUFDbkI7RUFDRixDQUFDO0VBRUQ7RUFDQWdCLGFBQWEsRUFBRTtJQUNiMUIsSUFBSSxFQUFFTCxRQUFRLENBQUNHLE1BQU0sQ0FBQzZCLEtBQUssQ0FBQ0MsUUFBUTtJQUNwQ0MsR0FBRyxFQUFFO0VBQ1AsQ0FBQztFQUVEO0VBQ0FDLE1BQU0sRUFBRTtJQUNOOUIsSUFBSSxFQUFFTCxRQUFRLENBQUNHLE1BQU0sQ0FBQzZCLEtBQUssQ0FBQ0MsUUFBUTtJQUNwQ0MsR0FBRyxFQUFFO0VBQ1AsQ0FBQztFQUVEO0VBQ0FFLFlBQVksRUFBRTtJQUNaL0IsSUFBSSxFQUFFTCxRQUFRLENBQUNHLE1BQU0sQ0FBQzZCLEtBQUssQ0FBQ0MsUUFBUTtJQUNwQ0MsR0FBRyxFQUFFO0VBQ1AsQ0FBQztFQUVEO0VBQ0FHLE9BQU8sRUFBRTtJQUNQaEMsSUFBSSxFQUFFVSxNQUFNO0lBQ1pLLE9BQU8sRUFBRTtFQUNYLENBQUM7RUFFRDtFQUNBa0IsZUFBZSxFQUFFO0lBQ2ZDLFFBQVEsRUFBRTtNQUNSbEMsSUFBSSxFQUFFQyxNQUFNO01BQ1pLLElBQUksRUFBRSxDQUFDLFFBQVEsRUFBRSxRQUFRLEVBQUUsVUFBVSxFQUFFLFFBQVE7SUFDakQsQ0FBQztJQUNENkIsWUFBWSxFQUFFekIsTUFBTTtJQUFFO0lBQ3RCMEIsZ0JBQWdCLEVBQUUxQixNQUFNO0lBQUU7SUFDMUIyQixrQkFBa0IsRUFBRTNCLE1BQU07SUFBRTtJQUM1QjRCLFVBQVUsRUFBRTtNQUNWQyxJQUFJLEVBQUVuQixJQUFJO01BQ1ZvQixNQUFNLEVBQUU5QixNQUFNO01BQ2QrQixJQUFJLEVBQUUvQixNQUFNO01BQ1pnQyxPQUFPLEVBQUV6QztJQUNYO0VBQ0YsQ0FBQztFQUVEO0VBQ0EwQyxXQUFXLEVBQUU7SUFDWEMsbUJBQW1CLEVBQUV4QixJQUFJO0lBQ3pCeUIsbUJBQW1CLEVBQUV6QixJQUFJO0lBQ3pCMEIsaUJBQWlCLEVBQUVwQyxNQUFNO0lBQ3pCcUMsZUFBZSxFQUFFckMsTUFBTTtJQUFFO0lBQ3pCc0Msa0JBQWtCLEVBQUUsQ0FDbEI7TUFDRVQsSUFBSSxFQUFFbkIsSUFBSTtNQUNWcEIsSUFBSSxFQUFFQyxNQUFNO01BQ1pnRCxXQUFXLEVBQUVoRCxNQUFNO01BQ25Cd0MsSUFBSSxFQUFFL0IsTUFBTTtNQUNad0MsUUFBUSxFQUFFakQ7SUFDWixDQUFDO0VBRUwsQ0FBQztFQUVEO0VBQ0ErQyxrQkFBa0IsRUFBRSxDQUNsQjtJQUNFVCxJQUFJLEVBQUVuQixJQUFJO0lBQ1ZwQixJQUFJLEVBQUVDLE1BQU07SUFDWmdELFdBQVcsRUFBRWhELE1BQU07SUFDbkJ3QyxJQUFJLEVBQUUvQixNQUFNO0lBQ1p3QyxRQUFRLEVBQUVqRDtFQUNaLENBQUMsQ0FDRjtFQUVEO0VBQ0FrRCxTQUFTLEVBQUU7SUFDVEMsT0FBTyxFQUFFbkQsTUFBTTtJQUNmb0QsWUFBWSxFQUFFcEQsTUFBTTtJQUNwQnFELFNBQVMsRUFBRWxDLElBQUk7SUFDZm1DLFVBQVUsRUFBRW5DLElBQUk7SUFDaEJvQyxjQUFjLEVBQUU5QyxNQUFNO0lBQ3RCK0MsVUFBVSxFQUFFL0M7RUFDZCxDQUFDO0VBRUQ7RUFDQWdELE1BQU0sRUFBRTtJQUNOQyxrQkFBa0IsRUFBRXZDLElBQUk7SUFDeEJ3QyxrQkFBa0IsRUFBRXhDLElBQUk7SUFDeEJ5QyxlQUFlLEVBQUUsQ0FDZjtNQUNFQyxTQUFTLEVBQUUxQyxJQUFJO01BQ2ZwQixJQUFJLEVBQUU7UUFDSkEsSUFBSSxFQUFFQyxNQUFNO1FBQ1pLLElBQUksRUFBRSxDQUFDLFVBQVUsRUFBRSxXQUFXLEVBQUUsVUFBVSxFQUFFLGVBQWUsRUFBRSxXQUFXO01BQzFFLENBQUM7TUFDRHlELFFBQVEsRUFBRTtRQUNSL0QsSUFBSSxFQUFFO1VBQ0pBLElBQUksRUFBRUMsTUFBTTtVQUNaYyxPQUFPLEVBQUU7UUFDWCxDQUFDO1FBQ0RPLFdBQVcsRUFBRSxDQUFDWixNQUFNO01BQ3RCLENBQUM7TUFDRHNELFFBQVEsRUFBRTtRQUNSaEUsSUFBSSxFQUFFQyxNQUFNO1FBQ1pLLElBQUksRUFBRSxDQUFDLEtBQUssRUFBRSxRQUFRLEVBQUUsTUFBTSxFQUFFLFVBQVU7TUFDNUMsQ0FBQztNQUNEMkQsUUFBUSxFQUFFO1FBQ1JqRSxJQUFJLEVBQUVrRSxPQUFPO1FBQ2JuRCxPQUFPLEVBQUU7TUFDWCxDQUFDO01BQ0RvRCxVQUFVLEVBQUUvQztJQUNkLENBQUMsQ0FDRjtJQUNEZ0QsaUJBQWlCLEVBQUU7TUFDakJwRSxJQUFJLEVBQUVVLE1BQU07TUFDWkssT0FBTyxFQUFFO0lBQ1gsQ0FBQztJQUNEc0QscUJBQXFCLEVBQUU7TUFDckJyRSxJQUFJLEVBQUVVLE1BQU07TUFDWkssT0FBTyxFQUFFO0lBQ1g7RUFDRixDQUFDO0VBRUQ7RUFDQXVELGtCQUFrQixFQUFFLENBQ2xCO0lBQ0V0RSxJQUFJLEVBQUVMLFFBQVEsQ0FBQ0csTUFBTSxDQUFDNkIsS0FBSyxDQUFDQyxRQUFRO0lBQ3BDQyxHQUFHLEVBQUU7RUFDUCxDQUFDLENBQ0Y7RUFFRDtFQUNBMEMsVUFBVSxFQUFFO0lBQ1ZDLG9CQUFvQixFQUFFO01BQ3BCeEUsSUFBSSxFQUFFVSxNQUFNO01BQ1pLLE9BQU8sRUFBRTtJQUNYLENBQUM7SUFBRTtJQUNIMEQsaUJBQWlCLEVBQUU7TUFDakJ6RSxJQUFJLEVBQUVVLE1BQU07TUFDWkssT0FBTyxFQUFFO0lBQ1gsQ0FBQztJQUFFO0lBQ0gyRCxvQkFBb0IsRUFBRTtNQUNwQjFFLElBQUksRUFBRVUsTUFBTTtNQUNaSyxPQUFPLEVBQUU7SUFDWCxDQUFDO0lBQUU7SUFDSDRELFlBQVksRUFBRWpFLE1BQU07SUFBRTtJQUN0QmtFLFNBQVMsRUFBRTtNQUNUNUUsSUFBSSxFQUFFVSxNQUFNO01BQ1pLLE9BQU8sRUFBRTtJQUNYO0VBQ0YsQ0FBQztFQUVEO0VBQ0E4RCxLQUFLLEVBQUU1RSxNQUFNO0VBQ2I2RSxTQUFTLEVBQUUsQ0FDVDtJQUNFQyxJQUFJLEVBQUU5RSxNQUFNO0lBQ1pELElBQUksRUFBRUMsTUFBTTtJQUNaK0UsR0FBRyxFQUFFL0UsTUFBTTtJQUNYZ0YsVUFBVSxFQUFFN0Q7RUFDZCxDQUFDLENBQ0Y7RUFFRDhELFFBQVEsRUFBRTtJQUNSbEYsSUFBSSxFQUFFa0UsT0FBTztJQUNibkQsT0FBTyxFQUFFO0VBQ1g7QUFDRixDQUFDLEVBQ0Q7RUFDRW9FLFVBQVUsRUFBRTtBQUNkLENBQ0YsQ0FBQzs7QUFFRDtBQUNBdEYsYUFBYSxDQUFDTyxLQUFLLENBQUM7RUFBRVksTUFBTSxFQUFFLENBQUM7RUFBRWtFLFFBQVEsRUFBRTtBQUFFLENBQUMsQ0FBQztBQUMvQ3JGLGFBQWEsQ0FBQ08sS0FBSyxDQUFDO0VBQUVzQixhQUFhLEVBQUU7QUFBRSxDQUFDLENBQUM7QUFDekM3QixhQUFhLENBQUNPLEtBQUssQ0FBQztFQUFFLHVDQUF1QyxFQUFFO0FBQVcsQ0FBQyxDQUFDOztBQUU1RTtBQUNBUCxhQUFhLENBQUN1RixPQUFPLENBQUMsWUFBWSxDQUFDLENBQUNDLEdBQUcsQ0FBQyxZQUFZO0VBQ2xELElBQUksQ0FBQyxJQUFJLENBQUNwRCxlQUFlLENBQUNHLGdCQUFnQixJQUFJLENBQUMsSUFBSSxDQUFDSCxlQUFlLENBQUNFLFlBQVksRUFBRTtJQUNoRixPQUFPLFNBQVM7RUFDbEI7RUFDQSxNQUFNbUQsVUFBVSxHQUNiLElBQUksQ0FBQ3JELGVBQWUsQ0FBQ0csZ0JBQWdCLEdBQUcsSUFBSSxDQUFDSCxlQUFlLENBQUNFLFlBQVksR0FBSSxHQUFHO0VBQ25GLElBQUltRCxVQUFVLEdBQUcsRUFBRSxFQUFFLE9BQU8sVUFBVTtFQUN0QyxJQUFJQSxVQUFVLEdBQUcsRUFBRSxFQUFFLE9BQU8sS0FBSztFQUNqQyxJQUFJQSxVQUFVLEdBQUcsRUFBRSxFQUFFLE9BQU8sUUFBUTtFQUNwQyxPQUFPLE1BQU07QUFDZixDQUFDLENBQUM7O0FBRUY7QUFDQXpGLGFBQWEsQ0FBQ3VGLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDQyxHQUFHLENBQUMsWUFBWTtFQUN6RCxJQUFJLENBQUMsSUFBSSxDQUFDMUMsV0FBVyxDQUFDRSxtQkFBbUIsRUFBRSxPQUFPLFNBQVM7RUFDM0QsTUFBTTBDLG9CQUFvQixHQUFHQyxJQUFJLENBQUNDLElBQUksQ0FDcEMsQ0FBQyxJQUFJLENBQUM5QyxXQUFXLENBQUNFLG1CQUFtQixHQUFHLElBQUl6QixJQUFJLENBQUMsQ0FBQyxLQUFLLElBQUksR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsQ0FDNUUsQ0FBQztFQUNELElBQUltRSxvQkFBb0IsR0FBRyxDQUFDLEVBQUUsT0FBTyxTQUFTO0VBQzlDLElBQUlBLG9CQUFvQixJQUFJLENBQUMsRUFBRSxPQUFPLFFBQVE7RUFDOUMsSUFBSUEsb0JBQW9CLElBQUksRUFBRSxFQUFFLE9BQU8sTUFBTTtFQUM3QyxPQUFPLE1BQU07QUFDZixDQUFDLENBQUM7O0FBRUY7QUFDQTFGLGFBQWEsQ0FBQzZGLE9BQU8sQ0FBQ0MsaUJBQWlCLEdBQUcsVUFBVTVCLFFBQVEsRUFBRXZDLEtBQUssRUFBRUMsT0FBTyxFQUFFO0VBQzVFLElBQUksQ0FBQ1IsU0FBUyxDQUFDSSxlQUFlLEdBQUc7SUFDL0JyQixJQUFJLEVBQUUsT0FBTztJQUNic0IsV0FBVyxFQUFFeUMsUUFBUSxDQUFDekMsV0FBVyxJQUFJLENBQUN5QyxRQUFRLENBQUM2QixTQUFTLEVBQUU3QixRQUFRLENBQUM4QixRQUFRO0VBQzdFLENBQUM7RUFDRCxJQUFJckUsS0FBSyxLQUFLc0UsU0FBUyxFQUFFLElBQUksQ0FBQ0MsWUFBWSxHQUFHdkUsS0FBSztFQUNsRCxJQUFJQyxPQUFPLEtBQUtxRSxTQUFTLEVBQUUsSUFBSSxDQUFDN0UsU0FBUyxDQUFDUSxPQUFPLEdBQUdBLE9BQU87RUFDM0QsSUFBSSxDQUFDUixTQUFTLENBQUNFLFVBQVUsR0FBRyxJQUFJQyxJQUFJLENBQUMsQ0FBQztFQUN0QyxPQUFPLElBQUksQ0FBQzRFLElBQUksQ0FBQyxDQUFDO0FBQ3BCLENBQUM7O0FBRUQ7QUFDQW5HLGFBQWEsQ0FBQzZGLE9BQU8sQ0FBQ08saUJBQWlCLEdBQUcsVUFBVUMsS0FBSyxFQUFFO0VBQ3pELElBQUksQ0FBQ3hDLE1BQU0sQ0FBQ0csZUFBZSxDQUFDc0MsSUFBSSxDQUFDO0lBQy9CckMsU0FBUyxFQUFFLElBQUkxQyxJQUFJLENBQUMsQ0FBQztJQUNyQnBCLElBQUksRUFBRWtHLEtBQUssQ0FBQ2xHLElBQUk7SUFDaEIrRCxRQUFRLEVBQUVtQyxLQUFLLENBQUNuQyxRQUFRO0lBQ3hCQyxRQUFRLEVBQUVrQyxLQUFLLENBQUNsQztFQUNsQixDQUFDLENBQUM7O0VBRUY7RUFDQSxJQUFJa0MsS0FBSyxDQUFDbEMsUUFBUSxLQUFLLFVBQVUsRUFBRTtJQUNqQyxJQUFJLENBQUNoRCxNQUFNLEdBQUcsV0FBVztFQUMzQjtFQUVBLE9BQU8sSUFBSSxDQUFDZ0YsSUFBSSxDQUFDLENBQUM7QUFDcEIsQ0FBQzs7QUFFRDtBQUNBbkcsYUFBYSxDQUFDNkYsT0FBTyxDQUFDVSxxQkFBcUIsR0FBRyxVQUFVQyxRQUFRLEVBQUU7RUFDaEUsSUFBSSxJQUFJLENBQUNwRSxlQUFlLENBQUNJLGtCQUFrQixFQUFFO0lBQzNDLE1BQU1pRSxRQUFRLEdBQUlELFFBQVEsR0FBRyxHQUFHLEdBQUksSUFBSSxDQUFDcEUsZUFBZSxDQUFDSSxrQkFBa0I7SUFDM0UsSUFBSSxDQUFDSixlQUFlLENBQUNHLGdCQUFnQixJQUFJa0UsUUFBUTtJQUNqRCxJQUFJLENBQUMvQixVQUFVLENBQUNFLGlCQUFpQixJQUFJNkIsUUFBUTtJQUM3QyxJQUFJLENBQUMvQixVQUFVLENBQUNDLG9CQUFvQixJQUFJNkIsUUFBUTtFQUNsRDtFQUNBLE9BQU8sSUFBSSxDQUFDTCxJQUFJLENBQUMsQ0FBQztBQUNwQixDQUFDOztBQUVEO0FBQ0FuRyxhQUFhLENBQUMwRyxPQUFPLENBQUNDLFVBQVUsR0FBRyxVQUFVWixTQUFTLEVBQUVDLFFBQVEsRUFBRVksV0FBVyxHQUFHLElBQUksRUFBRTtFQUNwRixPQUFPLElBQUksQ0FBQ0MsSUFBSSxDQUFDO0lBQ2YsdUNBQXVDLEVBQUU7TUFDdkNDLEtBQUssRUFBRTtRQUNMQyxTQUFTLEVBQUU7VUFDVDVHLElBQUksRUFBRSxPQUFPO1VBQ2JzQixXQUFXLEVBQUUsQ0FBQ3NFLFNBQVMsRUFBRUMsUUFBUTtRQUNuQyxDQUFDO1FBQ0RnQixZQUFZLEVBQUVKO01BQ2hCO0lBQ0YsQ0FBQztJQUNEekYsTUFBTSxFQUFFLFFBQVE7SUFDaEJrRSxRQUFRLEVBQUU7RUFDWixDQUFDLENBQUM7QUFDSixDQUFDOztBQUVEO0FBQ0FyRixhQUFhLENBQUMwRyxPQUFPLENBQUNPLGFBQWEsR0FBRyxVQUFVbEcsUUFBUSxFQUFFO0VBQ3hELE9BQU8sSUFBSSxDQUFDOEYsSUFBSSxDQUFDO0lBQ2YxRixNQUFNLEVBQUUsUUFBUTtJQUNoQmtFLFFBQVEsRUFBRSxJQUFJO0lBQ2R0RSxRQUFRLEVBQUU7TUFBRW1HLElBQUksRUFBRW5HO0lBQVMsQ0FBQztJQUM1QmMsYUFBYSxFQUFFO01BQUVzRixPQUFPLEVBQUU7SUFBSztFQUNqQyxDQUFDLENBQUM7QUFDSixDQUFDO0FBRURDLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHdkgsUUFBUSxDQUFDYSxLQUFLLENBQUMsU0FBUyxFQUFFWCxhQUFhLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=