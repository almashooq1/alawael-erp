{"version":3,"names":["WebhookEvent","constructor","eventType","data","id","Date","now","Math","random","toString","substring","event","status","retries","signature","timestamp","toISOString","generateSignature","secret","crypto","require","payload","JSON","stringify","createHmac","update","digest","getPayload","WebhookSubscription","url","events","isActive","deliveryCount","failureCount","retryPolicy","maxRetries","initialDelay","maxDelay","backoffMultiplier","createdAt","matches","includes","endsWith","prefix","slice","startsWith","incrementDelivery","success","getRetryDelay","attemptNumber","baseDelay","min","pow","jitter","floor","IntegrationConnector","name","type","config","lastSync","syncStatus","errorLog","mappings","Map","filters","syncCount","errorCount","activate","deactivate","logError","error","push","message","stack","length","addFieldMapping","sourceField","targetField","transformFn","set","target","transform","addFilter","field","operator","value","applyFilters","every","filter","dataValue","recordSync","getFieldMapping","get","getAllFieldMappings","result","source","mapping","getSyncStats","successRate","applyMappings","sourceData","mapped","APIIntegrator","nameOrBaseURL","baseURLOrHeaders","baseURL","headers","timeout","retryAttempts","endpoints","callCount","lastCall","registerEndpoint","method","path","endpoint","call","endpointName","params","Error","_executeCall","key","Object","entries","replace","makeRequest","resultEndpoint","split","pop","getSummary","size","IntegrationService","webhooks","apis","connectors","eventListeners","eventHistory","transformations","registerWebhook","webhook","getWebhook","find","w","getAllWebhooks","updateWebhook","updates","undefined","deleteWebhook","index","findIndex","splice","registerAPI","api","getAllIntegrations","createConnector","connector","getConnector","c","getWebhooks","getAPIs","getConnectors","registerTransformation","applyTransformation","validateWebhookSignature","expectedSignature","getIntegrationHealth","health","total","active","failed","reduce","sum","totalCalls","totalConnectors","totalItems","totalErrors","healthPercentage","getStatistics","successfulSyncs","failedSyncs","totalSyncs","totalEndpoints","totalEvents","on","callback","has","emitEvent","webhookEvent","matchingWebhooks","forEach","listeners","getEventHistory","limit","exportConfiguration","map","Array","from","keys","syncStats","statistics","exportedAt","console","integratePaymentGateway","transactionId","transaction","amount","currency","gateway","reference","sendEmailIntegration","email","to","subject","template","provider","messageId","sendSMSIntegration","sms","deliveryReport","uploadToCloudStorage","file","filename","bucket","accessLevel","syncWithCRM","sync","system","entityType","recordCount","details","created","updated","trackAnalytics","eventName","userId","platform","properties","getIntegrationStatus","integrations","payments","transactionsProcessed","emailsSent","smsSent","storage","filesStored","crm","recordsSynced","analytics","eventsTracked","getAvailableIntegrations","availableIntegrations","category","handleWebhook","checkRateLimit","apiKey","rateLimit","requestsUsed","requestsLimit","remainingRequests","resetTime","limitStatus","module","exports","APIIntegration"],"sources":["integrationService.js"],"sourcesContent":["/**\r\n * WebhookEvent Class\r\n * Represents a webhook event that can be sent to subscribers\r\n */\r\nclass WebhookEvent {\r\n  constructor(eventType, data = {}) {\r\n    this.id = `evt_${Date.now()}_${Math.random().toString(36).substring(7)}`;\r\n    this.event = eventType;\r\n    this.data = data;\r\n    this.status = 'pending';\r\n    this.retries = 0;\r\n    this.signature = null;\r\n    this.timestamp = new Date().toISOString();\r\n  }\r\n\r\n  generateSignature(secret) {\r\n    const crypto = require('crypto');\r\n    const payload = JSON.stringify({\r\n      id: this.id,\r\n      event: this.event,\r\n      data: this.data,\r\n      timestamp: this.timestamp,\r\n    });\r\n    this.signature = crypto\r\n      .createHmac('sha256', secret)\r\n      .update(payload)\r\n      .digest('hex');\r\n    return this.signature;\r\n  }\r\n\r\n  getPayload() {\r\n    return {\r\n      id: this.id,\r\n      event: this.event,\r\n      data: this.data,\r\n      signature: this.signature,\r\n      timestamp: this.timestamp,\r\n    };\r\n  }\r\n}\r\n\r\n/**\r\n * WebhookSubscription Class\r\n * Represents a webhook subscription to specific events\r\n */\r\nclass WebhookSubscription {\r\n  constructor(url, events = []) {\r\n    this.id = `hook_${Date.now()}_${Math.random().toString(36).substring(7)}`;\r\n    this.url = url;\r\n    this.events = events;\r\n    this.isActive = true;\r\n    this.secret = `secret_${Math.random().toString(36).substring(2)}`;\r\n    this.deliveryCount = 0;\r\n    this.failureCount = 0;\r\n    this.retryPolicy = {\r\n      maxRetries: 3,\r\n      initialDelay: 5000, // 5 seconds\r\n      maxDelay: 3600000, // 1 hour\r\n      backoffMultiplier: 2,\r\n    };\r\n    this.createdAt = new Date().toISOString();\r\n  }\r\n\r\n  matches(eventType) {\r\n    // Check for exact match or wildcard\r\n    if (this.events.includes('*') || this.events.includes(eventType)) {\r\n      return true;\r\n    }\r\n    \r\n    // Check for wildcard patterns like 'order.*'\r\n    for (const event of this.events) {\r\n      if (event.endsWith('.*')) {\r\n        const prefix = event.slice(0, -2); // Remove the '.*'\r\n        if (eventType.startsWith(prefix + '.')) {\r\n          return true;\r\n        }\r\n      }\r\n    }\r\n    \r\n    return false;\r\n  }\r\n\r\n  incrementDelivery(success = true) {\r\n    if (success) {\r\n      this.deliveryCount++;\r\n    } else {\r\n      this.failureCount++;\r\n    }\r\n  }\r\n\r\n  getRetryDelay(attemptNumber) {\r\n    const baseDelay = Math.min(\r\n      this.retryPolicy.initialDelay *\r\n        Math.pow(this.retryPolicy.backoffMultiplier, attemptNumber),\r\n      this.retryPolicy.maxDelay\r\n    );\r\n    // Add 10-20% jitter to avoid thundering herd\r\n    const jitter = baseDelay * (0.1 + Math.random() * 0.1);\r\n    return Math.floor(baseDelay + jitter);\r\n  }\r\n}\r\n\r\n/**\r\n * IntegrationConnector Class\r\n * Represents a connection to external services\r\n */\r\nclass IntegrationConnector {\r\n  constructor(name, type, config = {}) {\r\n    this.id = `conn_${Date.now()}_${Math.random().toString(36).substring(7)}`;\r\n    this.name = name;\r\n    this.type = type; // 'api', 'webhook', 'database', etc.\r\n    this.config = config;\r\n    this.isActive = true;\r\n    this.lastSync = null;\r\n    this.syncStatus = 'idle';\r\n    this.errorLog = [];\r\n    this.mappings = new Map(); // Field mappings with transformation functions\r\n    this.filters = [];\r\n    this.syncCount = 0;\r\n    this.errorCount = 0;\r\n    this.createdAt = new Date().toISOString();\r\n  }\r\n\r\n  activate() {\r\n    this.isActive = true;\r\n  }\r\n\r\n  deactivate() {\r\n    this.isActive = false;\r\n  }\r\n\r\n  logError(error) {\r\n    this.errorLog.push({\r\n      timestamp: new Date().toISOString(),\r\n      message: error.message,\r\n      stack: error.stack,\r\n    });\r\n    if (this.errorLog.length > 100) {\r\n      this.errorLog = this.errorLog.slice(-100); // Keep last 100 errors\r\n    }\r\n  }\r\n\r\n  addFieldMapping(sourceField, targetField, transformFn = null) {\r\n    this.mappings.set(sourceField, { target: targetField, transform: transformFn });\r\n    return this;\r\n  }\r\n\r\n  addFilter(field, operator, value) {\r\n    this.filters.push({ field, operator, value });\r\n    return this;\r\n  }\r\n\r\n  applyFilters(data) {\r\n    // Check if all filters pass\r\n    return this.filters.every(filter => {\r\n      const dataValue = data[filter.field];\r\n      switch (filter.operator) {\r\n        case '==':\r\n        case '=':\r\n          return dataValue === filter.value;\r\n        case '>':\r\n          return dataValue > filter.value;\r\n        case '<':\r\n          return dataValue < filter.value;\r\n        case '<=':\r\n          return dataValue <= filter.value;\r\n        case '>=':\r\n          return dataValue >= filter.value;\r\n        default:\r\n          return true;\r\n      }\r\n    });\r\n  }\r\n\r\n  recordSync(success) {\r\n    this.lastSync = new Date().toISOString();\r\n    if (success) {\r\n      this.syncCount++;\r\n    } else {\r\n      this.errorCount++;\r\n    }\r\n  }\r\n\r\n  getFieldMapping(sourceField) {\r\n    return this.mappings.get(sourceField);\r\n  }\r\n\r\n  getAllFieldMappings() {\r\n    const result = {};\r\n    for (const [source, mapping] of this.mappings) {\r\n      result[source] = mapping.target;\r\n    }\r\n    return result;\r\n  }\r\n\r\n  getSyncStats() {\r\n    return {\r\n      syncCount: this.syncCount,\r\n      errorCount: this.errorCount,\r\n      successRate: this.syncCount / (this.syncCount + this.errorCount) || 0,\r\n      lastSync: this.lastSync,\r\n    };\r\n  }\r\n\r\n  applyMappings(sourceData) {\r\n    const mapped = {};\r\n    for (const [sourceField, mapping] of this.mappings) {\r\n      if (sourceField in sourceData) {\r\n        let value = sourceData[sourceField];\r\n        // Apply transformation function if exists\r\n        if (mapping.transform && typeof mapping.transform === 'function') {\r\n          value = mapping.transform(value);\r\n        }\r\n        mapped[mapping.target] = value;\r\n      }\r\n    }\r\n    return mapped;\r\n  }\r\n}\r\n\r\n/**\r\n * APIIntegrator Class\r\n * Handles API integrations\r\n */\r\nclass APIIntegrator {\r\n  constructor(nameOrBaseURL, baseURLOrHeaders = {}, config = {}) {\r\n    // Support both old and new constructor signatures\r\n    if (typeof nameOrBaseURL === 'string') {\r\n      // Check if first argument is a URL (contains http)\r\n      if (nameOrBaseURL.startsWith('http')) {\r\n        // Old signature: (baseURL, headers)\r\n        this.baseURL = nameOrBaseURL;\r\n        this.headers = baseURLOrHeaders || {};\r\n        this.name = 'API';\r\n        this.config = { timeout: 30000, ...config };\r\n      } else {\r\n        // New signature: (name, baseURL, config)\r\n        this.name = nameOrBaseURL;\r\n        this.baseURL = baseURLOrHeaders;\r\n        this.headers = {};\r\n        this.config = {\r\n          timeout: 30000,\r\n          ...config,\r\n        };\r\n      }\r\n    }\r\n\r\n    this.retryAttempts = 3;\r\n    this.endpoints = new Map();\r\n    this.callCount = 0;\r\n    this.lastCall = null;\r\n    this.createdAt = new Date().toISOString();\r\n  }\r\n\r\n  registerEndpoint(name, method, path) {\r\n    const endpoint = {\r\n      name,\r\n      method,\r\n      path,\r\n      url: `${this.baseURL}${path}`,\r\n    };\r\n    this.endpoints.set(name, endpoint);\r\n    return endpoint;\r\n  }\r\n\r\n  call(endpointName, params = {}) {\r\n    // Synchronous validation - throw immediately if endpoint not found\r\n    const endpoint = this.endpoints.get(endpointName);\r\n    if (!endpoint) {\r\n      throw new Error(`Endpoint '${endpointName}' not registered`);\r\n    }\r\n\r\n    // Async execution after validation\r\n    return this._executeCall(endpointName, params);\r\n  }\r\n\r\n  async _executeCall(endpointName, params = {}) {\r\n    const endpoint = this.endpoints.get(endpointName);\r\n\r\n    // Replace path parameters\r\n    let url = endpoint.url;\r\n    for (const [key, value] of Object.entries(params)) {\r\n      url = url.replace(`:${key}`, value);\r\n    }\r\n\r\n    this.callCount++;\r\n    this.lastCall = new Date().toISOString();\r\n\r\n    return await this.makeRequest(endpoint.method, url, params, endpointName);\r\n  }\r\n\r\n  async makeRequest(method, url, data = null, endpointName = null) {\r\n    // Simulated API request\r\n    let resultEndpoint = endpointName || url.split('/').pop();\r\n    return {\r\n      success: true,\r\n      status: 200,\r\n      endpoint: resultEndpoint,\r\n      data: data || {},\r\n      timestamp: new Date().toISOString(),\r\n    };\r\n  }\r\n\r\n  getSummary() {\r\n    return {\r\n      name: this.name,\r\n      baseURL: this.baseURL,\r\n      endpoints: this.endpoints.size,\r\n      callCount: this.callCount,\r\n      lastCall: this.lastCall,\r\n    };\r\n  }\r\n}\r\n\r\n// External Integrations Service\r\n// نظام التكاملات الخارجية\r\n\r\nclass IntegrationService {\r\n  constructor() {\r\n    this.webhooks = [];\r\n    this.apis = [];\r\n    this.connectors = [];\r\n    this.eventListeners = new Map(); // For event-driven architecture\r\n    this.eventHistory = [];\r\n    this.transformations = new Map();\r\n  }\r\n\r\n  // Webhook Management\r\n  registerWebhook(url, events = []) {\r\n    const webhook = new WebhookSubscription(url, events);\r\n    this.webhooks.push(webhook);\r\n    return webhook;\r\n  }\r\n\r\n  getWebhook(id) {\r\n    return this.webhooks.find(w => w.id === id);\r\n  }\r\n\r\n  getAllWebhooks() {\r\n    return this.webhooks;\r\n  }\r\n\r\n  updateWebhook(id, updates) {\r\n    const webhook = this.getWebhook(id);\r\n    if (!webhook) return undefined;\r\n    if (updates.events) webhook.events = updates.events;\r\n    if (updates.url) webhook.url = updates.url;\r\n    if (updates.isActive !== undefined) webhook.isActive = updates.isActive;\r\n    return webhook;\r\n  }\r\n\r\n  deleteWebhook(id) {\r\n    const index = this.webhooks.findIndex(w => w.id === id);\r\n    if (index !== -1) {\r\n      this.webhooks.splice(index, 1);\r\n    }\r\n  }\r\n\r\n  // API Management\r\n  registerAPI(name, baseURL, config = {}) {\r\n    const api = new APIIntegrator(name, baseURL, config);\r\n    this.apis.push(api);\r\n    return api;\r\n  }\r\n\r\n  getAllIntegrations() {\r\n    return this.apis;\r\n  }\r\n\r\n  // Connector Management\r\n  createConnector(name, type, config = {}) {\r\n    const connector = new IntegrationConnector(name, type, config);\r\n    this.connectors.push(connector);\r\n    return connector;\r\n  }\r\n\r\n  // Get connector by name\r\n  getConnector(name) {\r\n    const connector = this.connectors.find(c => c.name === name);\r\n    if (!connector) {\r\n      throw new Error(`Connector '${name}' not found`);\r\n    }\r\n    return connector;\r\n  }\r\n\r\n  // Get all webhooks\r\n  getWebhooks() {\r\n    return this.webhooks;\r\n  }\r\n\r\n  // Get all APIs\r\n  getAPIs() {\r\n    return this.apis;\r\n  }\r\n\r\n  // Get all connectors\r\n  getConnectors() {\r\n    return this.connectors;\r\n  }\r\n\r\n  // Event Transformation/Data Transformation\r\n  registerTransformation(name, transformFn) {\r\n    this.transformations.set(name, transformFn);\r\n    return this;\r\n  }\r\n\r\n  applyTransformation(name, data) {\r\n    const transform = this.transformations.get(name);\r\n    if (!transform) {\r\n      throw new Error(`Transformation '${name}' not found`);\r\n    }\r\n    return transform(data);\r\n  }\r\n\r\n  // Validate Webhook Signature\r\n  validateWebhookSignature(signature, payload, secret) {\r\n    const crypto = require('crypto');\r\n    const expectedSignature = crypto\r\n      .createHmac('sha256', secret)\r\n      .update(payload)\r\n      .digest('hex');\r\n    return signature === expectedSignature;\r\n  }\r\n\r\n  // Integration Health Status\r\n  getIntegrationHealth() {\r\n    const health = {\r\n      webhooks: {\r\n        total: this.webhooks.length,\r\n        active: this.webhooks.filter(w => w.isActive).length,\r\n        failed: this.webhooks.filter(w => w.failureCount > 0).length,\r\n      },\r\n      apis: {\r\n        total: this.apis.length,\r\n        endpoints: this.apis.reduce((sum, api) => sum + (api.endpoints?.size || api.endpoints?.length || 0), 0),\r\n        totalCalls: this.apis.reduce((sum, api) => sum + (api.callCount || 0), 0),\r\n      },\r\n      connectors: {\r\n        total: this.connectors.length,\r\n        active: this.connectors.filter(c => c.isActive).length,\r\n        syncCount: this.connectors.reduce((sum, c) => sum + (c.syncCount || 0), 0),\r\n        errorCount: this.connectors.reduce((sum, c) => sum + (c.errorCount || 0), 0),\r\n      },\r\n      totalConnectors: this.connectors.length,\r\n      status: 'healthy',\r\n      timestamp: new Date().toISOString(),\r\n    };\r\n\r\n    // Calculate health percentage\r\n    const totalItems = health.connectors.total + health.webhooks.total + health.apis.total;\r\n    const totalErrors = health.connectors.errorCount + health.webhooks.failed;\r\n    health.healthPercentage = totalItems > 0 ? ((totalItems - totalErrors) / totalItems * 100) : 100;\r\n\r\n    // Determine overall status\r\n    if (health.connectors.errorCount > 0 || health.webhooks.failed > 0) {\r\n      health.status = 'degraded';\r\n    }\r\n    if (health.webhooks.failed > health.webhooks.active) {\r\n      health.status = 'unhealthy';\r\n    }\r\n\r\n    return health;\r\n  }\r\n\r\n  // Get Statistics\r\n  getStatistics() {\r\n    const successfulSyncs = this.connectors.reduce((sum, c) => sum + (c.syncCount || 0), 0);\r\n    const failedSyncs = this.connectors.reduce((sum, c) => sum + (c.errorCount || 0), 0);\r\n    const totalSyncs = successfulSyncs + failedSyncs;\r\n    \r\n    return {\r\n      webhooks: this.webhooks.length,\r\n      apis: this.apis.length,\r\n      connectors: this.connectors.length,\r\n      totalEndpoints: this.apis.reduce((sum, api) => sum + (api.endpoints?.size || 0), 0),\r\n      totalEvents: this.eventHistory.length,\r\n      successRate: totalSyncs > 0 ? (successfulSyncs / totalSyncs) : 0,\r\n      syncCount: successfulSyncs,\r\n      errorCount: failedSyncs,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Register event listener\r\n   */\r\n  on(eventType, callback) {\r\n    if (!this.eventListeners.has(eventType)) {\r\n      this.eventListeners.set(eventType, []);\r\n    }\r\n    this.eventListeners.get(eventType).push(callback);\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Emit event to registered webhooks and listeners\r\n   */\r\n  emitEvent(eventType, data) {\r\n    // Create webhook event\r\n    const webhookEvent = new WebhookEvent(eventType, data);\r\n    \r\n    // Store in event history\r\n    this.eventHistory.push(webhookEvent);\r\n    \r\n    // Call registered webhooks\r\n    const matchingWebhooks = this.webhooks.filter(w => w.matches(eventType));\r\n    matchingWebhooks.forEach(webhook => {\r\n      try {\r\n        // Simulate webhook delivery\r\n        webhook.incrementDelivery(true);\r\n      } catch (error) {\r\n        webhook.incrementDelivery(false);\r\n        this.logError(`Webhook delivery failed: ${error.message}`);\r\n      }\r\n    });\r\n    \r\n    // Call registered event listeners\r\n    const listeners = this.eventListeners.get(eventType) || [];\r\n    listeners.forEach(callback => {\r\n      try {\r\n        callback(webhookEvent);\r\n      } catch (error) {\r\n        this.logError(`Event listener error: ${error.message}`);\r\n      }\r\n    });\r\n    \r\n    return webhookEvent;\r\n  }\r\n\r\n  /**\r\n   * Get event history\r\n   */\r\n  getEventHistory(limit = 100) {\r\n    return this.eventHistory.slice(-limit);\r\n  }\r\n\r\n  /**\r\n   * Export service configuration\r\n   */\r\n  exportConfiguration() {\r\n    return {\r\n      webhooks: this.webhooks.map(w => ({\r\n        id: w.id,\r\n        url: w.url,\r\n        events: w.events,\r\n        isActive: w.isActive,\r\n      })),\r\n      apis: this.apis.map(api => ({\r\n        name: api.name,\r\n        baseURL: api.baseURL,\r\n        endpoints: Array.from(api.endpoints.keys()),\r\n        callCount: api.callCount,\r\n      })),\r\n      connectors: this.connectors.map(c => ({\r\n        id: c.id,\r\n        name: c.name,\r\n        type: c.type,\r\n        isActive: c.isActive,\r\n        mappings: c.getAllFieldMappings(),\r\n        syncStats: c.getSyncStats(),\r\n      })),\r\n      eventListeners: Array.from(this.eventListeners.keys()),\r\n      statistics: this.getStatistics(),\r\n      exportedAt: new Date().toISOString(),\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Log errors\r\n   */\r\n  logError(message) {\r\n    console.error(`[IntegrationService] ${message}`);\r\n  }\r\n\r\n  // Integrate with Payment Gateway\r\n  static integratePaymentGateway(data) {\r\n    // Simulate payment processing\r\n    const transactionId = `TXN_${Date.now()}`;\r\n\r\n    return {\r\n      success: true,\r\n      transaction: {\r\n        id: transactionId,\r\n        amount: data.amount,\r\n        currency: data.currency || 'USD',\r\n        status: 'completed',\r\n        gateway: 'stripe', // or paypal, square, etc.\r\n        method: data.method || 'card',\r\n        timestamp: new Date().toISOString(),\r\n        reference: `REF_${Math.random().toString(36).substring(7)}`,\r\n      },\r\n      message: 'Payment processed successfully',\r\n    };\r\n  }\r\n\r\n  // Integrate with Email Service\r\n  static sendEmailIntegration(data) {\r\n    return {\r\n      success: true,\r\n      email: {\r\n        id: `EMAIL_${Date.now()}`,\r\n        to: data.to,\r\n        subject: data.subject,\r\n        template: data.template || 'default',\r\n        status: 'sent',\r\n        provider: 'sendgrid', // or mailgun, aws-ses, etc.\r\n        timestamp: new Date().toISOString(),\r\n        messageId: `msg_${Math.random().toString(36).substring(7)}`,\r\n      },\r\n      message: 'Email sent successfully',\r\n    };\r\n  }\r\n\r\n  // Integrate with SMS Service\r\n  static sendSMSIntegration(data) {\r\n    return {\r\n      success: true,\r\n      sms: {\r\n        id: `SMS_${Date.now()}`,\r\n        to: data.to,\r\n        message: data.message,\r\n        status: 'delivered',\r\n        provider: 'twilio', // or nexmo, sns, etc.\r\n        timestamp: new Date().toISOString(),\r\n        deliveryReport: true,\r\n      },\r\n      message: 'SMS sent successfully',\r\n    };\r\n  }\r\n\r\n  // Integrate with Cloud Storage\r\n  static uploadToCloudStorage(data) {\r\n    return {\r\n      success: true,\r\n      file: {\r\n        id: `FILE_${Date.now()}`,\r\n        filename: data.filename,\r\n        size: data.size,\r\n        provider: 'aws-s3', // or google-cloud, azure, etc.\r\n        bucket: 'erp-files',\r\n        path: `/uploads/${data.filename}`,\r\n        url: `https://erp-files.s3.amazonaws.com/uploads/${data.filename}`,\r\n        status: 'uploaded',\r\n        timestamp: new Date().toISOString(),\r\n        accessLevel: 'private',\r\n      },\r\n      message: 'File uploaded successfully',\r\n    };\r\n  }\r\n\r\n  // Integrate with CRM System\r\n  static syncWithCRM(data) {\r\n    return {\r\n      success: true,\r\n      sync: {\r\n        id: `SYNC_${Date.now()}`,\r\n        system: 'salesforce', // or hubspot, pipedrive, etc.\r\n        entityType: data.entityType, // contact, lead, account, etc.\r\n        recordCount: Math.floor(Math.random() * 50 + 10),\r\n        status: 'completed',\r\n        timestamp: new Date().toISOString(),\r\n        details: {\r\n          created: Math.floor(Math.random() * 20 + 5),\r\n          updated: Math.floor(Math.random() * 30 + 10),\r\n          failed: Math.floor(Math.random() * 2),\r\n        },\r\n      },\r\n      message: 'CRM synchronization completed',\r\n    };\r\n  }\r\n\r\n  // Integrate with Analytics Platform\r\n  static trackAnalytics(data) {\r\n    return {\r\n      success: true,\r\n      event: {\r\n        id: `ANALYTICS_${Date.now()}`,\r\n        eventName: data.eventName,\r\n        userId: data.userId,\r\n        platform: 'google-analytics', // or mixpanel, amplitude, etc.\r\n        properties: data.properties || {},\r\n        timestamp: new Date().toISOString(),\r\n        status: 'tracked',\r\n      },\r\n      message: 'Event tracked successfully',\r\n    };\r\n  }\r\n\r\n  // Get Integration Status\r\n  static getIntegrationStatus() {\r\n    return {\r\n      success: true,\r\n      integrations: {\r\n        payments: {\r\n          provider: 'stripe',\r\n          status: 'connected',\r\n          lastSync: new Date(Date.now() - 10 * 60000).toISOString(),\r\n          transactionsProcessed: 1250,\r\n        },\r\n        email: {\r\n          provider: 'sendgrid',\r\n          status: 'connected',\r\n          lastSync: new Date(Date.now() - 5 * 60000).toISOString(),\r\n          emailsSent: 5890,\r\n        },\r\n        sms: {\r\n          provider: 'twilio',\r\n          status: 'connected',\r\n          lastSync: new Date(Date.now() - 15 * 60000).toISOString(),\r\n          smsSent: 2340,\r\n        },\r\n        storage: {\r\n          provider: 'aws-s3',\r\n          status: 'connected',\r\n          lastSync: new Date(Date.now() - 30 * 60000).toISOString(),\r\n          filesStored: 5670,\r\n        },\r\n        crm: {\r\n          provider: 'salesforce',\r\n          status: 'connected',\r\n          lastSync: new Date(Date.now() - 60 * 60000).toISOString(),\r\n          recordsSynced: 15240,\r\n        },\r\n        analytics: {\r\n          provider: 'google-analytics',\r\n          status: 'connected',\r\n          lastSync: new Date(Date.now() - 2 * 60000).toISOString(),\r\n          eventsTracked: 45890,\r\n        },\r\n      },\r\n      timestamp: new Date().toISOString(),\r\n    };\r\n  }\r\n\r\n  // Get Available Integrations\r\n  static getAvailableIntegrations() {\r\n    return {\r\n      success: true,\r\n      availableIntegrations: [\r\n        { id: 'stripe', name: 'Stripe', category: 'payments', status: 'available' },\r\n        { id: 'paypal', name: 'PayPal', category: 'payments', status: 'available' },\r\n        { id: 'sendgrid', name: 'SendGrid', category: 'email', status: 'available' },\r\n        { id: 'twilio', name: 'Twilio', category: 'sms', status: 'available' },\r\n        { id: 'aws-s3', name: 'AWS S3', category: 'storage', status: 'available' },\r\n        {\r\n          id: 'google-cloud',\r\n          name: 'Google Cloud Storage',\r\n          category: 'storage',\r\n          status: 'available',\r\n        },\r\n        { id: 'salesforce', name: 'Salesforce', category: 'crm', status: 'available' },\r\n        { id: 'hubspot', name: 'HubSpot', category: 'crm', status: 'available' },\r\n        {\r\n          id: 'google-analytics',\r\n          name: 'Google Analytics',\r\n          category: 'analytics',\r\n          status: 'available',\r\n        },\r\n        { id: 'mixpanel', name: 'Mixpanel', category: 'analytics', status: 'available' },\r\n      ],\r\n      timestamp: new Date().toISOString(),\r\n    };\r\n  }\r\n\r\n  // Webhook Handler\r\n  static handleWebhook(data) {\r\n    return {\r\n      success: true,\r\n      webhook: {\r\n        id: `WEBHOOK_${Date.now()}`,\r\n        source: data.source,\r\n        event: data.event,\r\n        payload: data.payload,\r\n        status: 'received',\r\n        timestamp: new Date().toISOString(),\r\n      },\r\n      message: 'Webhook processed successfully',\r\n    };\r\n  }\r\n\r\n  // API Rate Limiting\r\n  static checkRateLimit(apiKey) {\r\n    return {\r\n      success: true,\r\n      rateLimit: {\r\n        apiKey: apiKey,\r\n        requestsUsed: Math.floor(Math.random() * 800 + 200),\r\n        requestsLimit: 1000,\r\n        remainingRequests: Math.floor(Math.random() * 800 + 200),\r\n        resetTime: new Date(Date.now() + 60 * 60000).toISOString(),\r\n        limitStatus: 'normal', // warning, critical\r\n      },\r\n      timestamp: new Date().toISOString(),\r\n    };\r\n  }\r\n}\r\n\r\nmodule.exports = IntegrationService;\r\nmodule.exports.WebhookEvent = WebhookEvent;\r\nmodule.exports.WebhookSubscription = WebhookSubscription;\r\nmodule.exports.IntegrationConnector = IntegrationConnector;\r\nmodule.exports.APIIntegrator = APIIntegrator;\r\n// Alias for test compatibility\r\nmodule.exports.APIIntegration = APIIntegrator;\r\n"],"mappings":"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","ignoreList":[]}