7daeb09f3afdf708ee87eadf3a8d418e
/**
 * Logger Utility
 * Simple logging system with color support
 */

const fs = require('fs');
const path = require('path');
const LOG_DIR = path.join(__dirname, '../logs');

// Create logs directory if it doesn't exist
if (!fs.existsSync(LOG_DIR)) {
  fs.mkdirSync(LOG_DIR, {
    recursive: true
  });
}

// Color codes
const colors = {
  reset: '\x1b[0m',
  red: '\x1b[31m',
  green: '\x1b[32m',
  yellow: '\x1b[33m',
  blue: '\x1b[34m',
  cyan: '\x1b[36m'
};
class Logger {
  constructor(namespace = 'App') {
    this.namespace = namespace;
    this.logFile = path.join(LOG_DIR, 'app.log');
  }

  /**
   * Format timestamp
   */
  getTimestamp() {
    return new Date().toISOString();
  }

  /**
   * Write to file
   */
  writeToFile(level, message, meta = '') {
    try {
      const timestamp = this.getTimestamp();
      const logEntry = `[${timestamp}] [${level}] [${this.namespace}] ${message} ${meta}\n`;
      fs.appendFileSync(this.logFile, logEntry);
    } catch (error) {
      console.error('Failed to write to log file:', error);
    }
  }

  /**
   * Info log
   */
  info(message, meta = '') {
    const output = `${colors.cyan}[INFO]${colors.reset} ${this.namespace}: ${message}`;
    console.log(output, meta);
    this.writeToFile('INFO', message, meta);
  }

  /**
   * Warn log
   */
  warn(message, meta = '') {
    const output = `${colors.yellow}[WARN]${colors.reset} ${this.namespace}: ${message}`;
    console.warn(output, meta);
    this.writeToFile('WARN', message, meta);
  }

  /**
   * Error log
   */
  error(message, error = '') {
    const output = `${colors.red}[ERROR]${colors.reset} ${this.namespace}: ${message}`;
    console.error(output, error);
    this.writeToFile('ERROR', message, error?.message || error);
  }

  /**
   * Debug log
   */
  debug(message, meta = '') {
    if (process.env.NODE_ENV === 'development') {
      const output = `${colors.blue}[DEBUG]${colors.reset} ${this.namespace}: ${message}`;
      console.log(output, meta);
    }
    this.writeToFile('DEBUG', message, meta);
  }

  /**
   * Success log
   */
  success(message, meta = '') {
    const output = `${colors.green}[SUCCESS]${colors.reset} ${this.namespace}: ${message}`;
    console.log(output, meta);
    this.writeToFile('SUCCESS', message, meta);
  }
}
module.exports = new Logger();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJmcyIsInJlcXVpcmUiLCJwYXRoIiwiTE9HX0RJUiIsImpvaW4iLCJfX2Rpcm5hbWUiLCJleGlzdHNTeW5jIiwibWtkaXJTeW5jIiwicmVjdXJzaXZlIiwiY29sb3JzIiwicmVzZXQiLCJyZWQiLCJncmVlbiIsInllbGxvdyIsImJsdWUiLCJjeWFuIiwiTG9nZ2VyIiwiY29uc3RydWN0b3IiLCJuYW1lc3BhY2UiLCJsb2dGaWxlIiwiZ2V0VGltZXN0YW1wIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwid3JpdGVUb0ZpbGUiLCJsZXZlbCIsIm1lc3NhZ2UiLCJtZXRhIiwidGltZXN0YW1wIiwibG9nRW50cnkiLCJhcHBlbmRGaWxlU3luYyIsImVycm9yIiwiY29uc29sZSIsImluZm8iLCJvdXRwdXQiLCJsb2ciLCJ3YXJuIiwiZGVidWciLCJwcm9jZXNzIiwiZW52IiwiTk9ERV9FTlYiLCJzdWNjZXNzIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbImxvZ2dlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogTG9nZ2VyIFV0aWxpdHlcclxuICogU2ltcGxlIGxvZ2dpbmcgc3lzdGVtIHdpdGggY29sb3Igc3VwcG9ydFxyXG4gKi9cclxuXHJcbmNvbnN0IGZzID0gcmVxdWlyZSgnZnMnKTtcclxuY29uc3QgcGF0aCA9IHJlcXVpcmUoJ3BhdGgnKTtcclxuXHJcbmNvbnN0IExPR19ESVIgPSBwYXRoLmpvaW4oX19kaXJuYW1lLCAnLi4vbG9ncycpO1xyXG5cclxuLy8gQ3JlYXRlIGxvZ3MgZGlyZWN0b3J5IGlmIGl0IGRvZXNuJ3QgZXhpc3RcclxuaWYgKCFmcy5leGlzdHNTeW5jKExPR19ESVIpKSB7XHJcbiAgZnMubWtkaXJTeW5jKExPR19ESVIsIHsgcmVjdXJzaXZlOiB0cnVlIH0pO1xyXG59XHJcblxyXG4vLyBDb2xvciBjb2Rlc1xyXG5jb25zdCBjb2xvcnMgPSB7XHJcbiAgcmVzZXQ6ICdcXHgxYlswbScsXHJcbiAgcmVkOiAnXFx4MWJbMzFtJyxcclxuICBncmVlbjogJ1xceDFiWzMybScsXHJcbiAgeWVsbG93OiAnXFx4MWJbMzNtJyxcclxuICBibHVlOiAnXFx4MWJbMzRtJyxcclxuICBjeWFuOiAnXFx4MWJbMzZtJyxcclxufTtcclxuXHJcbmNsYXNzIExvZ2dlciB7XHJcbiAgY29uc3RydWN0b3IobmFtZXNwYWNlID0gJ0FwcCcpIHtcclxuICAgIHRoaXMubmFtZXNwYWNlID0gbmFtZXNwYWNlO1xyXG4gICAgdGhpcy5sb2dGaWxlID0gcGF0aC5qb2luKExPR19ESVIsICdhcHAubG9nJyk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBGb3JtYXQgdGltZXN0YW1wXHJcbiAgICovXHJcbiAgZ2V0VGltZXN0YW1wKCkge1xyXG4gICAgcmV0dXJuIG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFdyaXRlIHRvIGZpbGVcclxuICAgKi9cclxuICB3cml0ZVRvRmlsZShsZXZlbCwgbWVzc2FnZSwgbWV0YSA9ICcnKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCB0aW1lc3RhbXAgPSB0aGlzLmdldFRpbWVzdGFtcCgpO1xyXG4gICAgICBjb25zdCBsb2dFbnRyeSA9IGBbJHt0aW1lc3RhbXB9XSBbJHtsZXZlbH1dIFske3RoaXMubmFtZXNwYWNlfV0gJHttZXNzYWdlfSAke21ldGF9XFxuYDtcclxuICAgICAgZnMuYXBwZW5kRmlsZVN5bmModGhpcy5sb2dGaWxlLCBsb2dFbnRyeSk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gd3JpdGUgdG8gbG9nIGZpbGU6JywgZXJyb3IpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogSW5mbyBsb2dcclxuICAgKi9cclxuICBpbmZvKG1lc3NhZ2UsIG1ldGEgPSAnJykge1xyXG4gICAgY29uc3Qgb3V0cHV0ID0gYCR7Y29sb3JzLmN5YW59W0lORk9dJHtjb2xvcnMucmVzZXR9ICR7dGhpcy5uYW1lc3BhY2V9OiAke21lc3NhZ2V9YDtcclxuICAgIGNvbnNvbGUubG9nKG91dHB1dCwgbWV0YSk7XHJcbiAgICB0aGlzLndyaXRlVG9GaWxlKCdJTkZPJywgbWVzc2FnZSwgbWV0YSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBXYXJuIGxvZ1xyXG4gICAqL1xyXG4gIHdhcm4obWVzc2FnZSwgbWV0YSA9ICcnKSB7XHJcbiAgICBjb25zdCBvdXRwdXQgPSBgJHtjb2xvcnMueWVsbG93fVtXQVJOXSR7Y29sb3JzLnJlc2V0fSAke3RoaXMubmFtZXNwYWNlfTogJHttZXNzYWdlfWA7XHJcbiAgICBjb25zb2xlLndhcm4ob3V0cHV0LCBtZXRhKTtcclxuICAgIHRoaXMud3JpdGVUb0ZpbGUoJ1dBUk4nLCBtZXNzYWdlLCBtZXRhKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEVycm9yIGxvZ1xyXG4gICAqL1xyXG4gIGVycm9yKG1lc3NhZ2UsIGVycm9yID0gJycpIHtcclxuICAgIGNvbnN0IG91dHB1dCA9IGAke2NvbG9ycy5yZWR9W0VSUk9SXSR7Y29sb3JzLnJlc2V0fSAke3RoaXMubmFtZXNwYWNlfTogJHttZXNzYWdlfWA7XHJcbiAgICBjb25zb2xlLmVycm9yKG91dHB1dCwgZXJyb3IpO1xyXG4gICAgdGhpcy53cml0ZVRvRmlsZSgnRVJST1InLCBtZXNzYWdlLCBlcnJvcj8ubWVzc2FnZSB8fCBlcnJvcik7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBEZWJ1ZyBsb2dcclxuICAgKi9cclxuICBkZWJ1ZyhtZXNzYWdlLCBtZXRhID0gJycpIHtcclxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50Jykge1xyXG4gICAgICBjb25zdCBvdXRwdXQgPSBgJHtjb2xvcnMuYmx1ZX1bREVCVUddJHtjb2xvcnMucmVzZXR9ICR7dGhpcy5uYW1lc3BhY2V9OiAke21lc3NhZ2V9YDtcclxuICAgICAgY29uc29sZS5sb2cob3V0cHV0LCBtZXRhKTtcclxuICAgIH1cclxuICAgIHRoaXMud3JpdGVUb0ZpbGUoJ0RFQlVHJywgbWVzc2FnZSwgbWV0YSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTdWNjZXNzIGxvZ1xyXG4gICAqL1xyXG4gIHN1Y2Nlc3MobWVzc2FnZSwgbWV0YSA9ICcnKSB7XHJcbiAgICBjb25zdCBvdXRwdXQgPSBgJHtjb2xvcnMuZ3JlZW59W1NVQ0NFU1NdJHtjb2xvcnMucmVzZXR9ICR7dGhpcy5uYW1lc3BhY2V9OiAke21lc3NhZ2V9YDtcclxuICAgIGNvbnNvbGUubG9nKG91dHB1dCwgbWV0YSk7XHJcbiAgICB0aGlzLndyaXRlVG9GaWxlKCdTVUNDRVNTJywgbWVzc2FnZSwgbWV0YSk7XHJcbiAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IG5ldyBMb2dnZXIoKTtcclxuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxNQUFNQSxFQUFFLEdBQUdDLE9BQU8sQ0FBQyxJQUFJLENBQUM7QUFDeEIsTUFBTUMsSUFBSSxHQUFHRCxPQUFPLENBQUMsTUFBTSxDQUFDO0FBRTVCLE1BQU1FLE9BQU8sR0FBR0QsSUFBSSxDQUFDRSxJQUFJLENBQUNDLFNBQVMsRUFBRSxTQUFTLENBQUM7O0FBRS9DO0FBQ0EsSUFBSSxDQUFDTCxFQUFFLENBQUNNLFVBQVUsQ0FBQ0gsT0FBTyxDQUFDLEVBQUU7RUFDM0JILEVBQUUsQ0FBQ08sU0FBUyxDQUFDSixPQUFPLEVBQUU7SUFBRUssU0FBUyxFQUFFO0VBQUssQ0FBQyxDQUFDO0FBQzVDOztBQUVBO0FBQ0EsTUFBTUMsTUFBTSxHQUFHO0VBQ2JDLEtBQUssRUFBRSxTQUFTO0VBQ2hCQyxHQUFHLEVBQUUsVUFBVTtFQUNmQyxLQUFLLEVBQUUsVUFBVTtFQUNqQkMsTUFBTSxFQUFFLFVBQVU7RUFDbEJDLElBQUksRUFBRSxVQUFVO0VBQ2hCQyxJQUFJLEVBQUU7QUFDUixDQUFDO0FBRUQsTUFBTUMsTUFB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