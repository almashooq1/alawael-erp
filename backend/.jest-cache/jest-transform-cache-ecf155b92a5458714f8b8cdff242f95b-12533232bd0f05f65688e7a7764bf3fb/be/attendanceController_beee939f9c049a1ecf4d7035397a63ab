0ae584774a84b6f5c58a28f5b1aa35fa
// HR Attendance Controller
const Attendance = require('../../models/HR/Attendance');

// Create new attendance record
exports.createAttendance = async (req, res) => {
  try {
    const attendance = new Attendance(req.body);
    await attendance.save();
    res.status(201).json(attendance);
  } catch (err) {
    res.status(400).json({
      error: err.message
    });
  }
};

// Get all attendance records
exports.getAttendances = async (req, res) => {
  try {
    const records = await Attendance.find();
    res.json(records);
  } catch (err) {
    res.status(500).json({
      error: err.message
    });
  }
};

// Get attendance by ID
exports.getAttendanceById = async (req, res) => {
  try {
    const record = await Attendance.findById(req.params.id);
    if (!record) return res.status(404).json({
      error: 'Not found'
    });
    res.json(record);
  } catch (err) {
    res.status(500).json({
      error: err.message
    });
  }
};

// Update attendance
exports.updateAttendance = async (req, res) => {
  try {
    const record = await Attendance.findByIdAndUpdate(req.params.id, req.body, {
      new: true
    });
    if (!record) return res.status(404).json({
      error: 'Not found'
    });
    res.json(record);
  } catch (err) {
    res.status(400).json({
      error: err.message
    });
  }
};

// Delete attendance
exports.deleteAttendance = async (req, res) => {
  try {
    const record = await Attendance.findByIdAndDelete(req.params.id);
    if (!record) return res.status(404).json({
      error: 'Not found'
    });
    res.json({
      message: 'Deleted'
    });
  } catch (err) {
    res.status(500).json({
      error: err.message
    });
  }
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJBdHRlbmRhbmNlIiwicmVxdWlyZSIsImV4cG9ydHMiLCJjcmVhdGVBdHRlbmRhbmNlIiwicmVxIiwicmVzIiwiYXR0ZW5kYW5jZSIsImJvZHkiLCJzYXZlIiwic3RhdHVzIiwianNvbiIsImVyciIsImVycm9yIiwibWVzc2FnZSIsImdldEF0dGVuZGFuY2VzIiwicmVjb3JkcyIsImZpbmQiLCJnZXRBdHRlbmRhbmNlQnlJZCIsInJlY29yZCIsImZpbmRCeUlkIiwicGFyYW1zIiwiaWQiLCJ1cGRhdGVBdHRlbmRhbmNlIiwiZmluZEJ5SWRBbmRVcGRhdGUiLCJuZXciLCJkZWxldGVBdHRlbmRhbmNlIiwiZmluZEJ5SWRBbmREZWxldGUiXSwic291cmNlcyI6WyJhdHRlbmRhbmNlQ29udHJvbGxlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBIUiBBdHRlbmRhbmNlIENvbnRyb2xsZXJcclxuY29uc3QgQXR0ZW5kYW5jZSA9IHJlcXVpcmUoJy4uLy4uL21vZGVscy9IUi9BdHRlbmRhbmNlJyk7XHJcblxyXG4vLyBDcmVhdGUgbmV3IGF0dGVuZGFuY2UgcmVjb3JkXHJcbmV4cG9ydHMuY3JlYXRlQXR0ZW5kYW5jZSA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBhdHRlbmRhbmNlID0gbmV3IEF0dGVuZGFuY2UocmVxLmJvZHkpO1xyXG4gICAgYXdhaXQgYXR0ZW5kYW5jZS5zYXZlKCk7XHJcbiAgICByZXMuc3RhdHVzKDIwMSkuanNvbihhdHRlbmRhbmNlKTtcclxuICB9IGNhdGNoIChlcnIpIHtcclxuICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IGVyci5tZXNzYWdlIH0pO1xyXG4gIH1cclxufTtcclxuXHJcbi8vIEdldCBhbGwgYXR0ZW5kYW5jZSByZWNvcmRzXHJcbmV4cG9ydHMuZ2V0QXR0ZW5kYW5jZXMgPSBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgcmVjb3JkcyA9IGF3YWl0IEF0dGVuZGFuY2UuZmluZCgpO1xyXG4gICAgcmVzLmpzb24ocmVjb3Jkcyk7XHJcbiAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiBlcnIubWVzc2FnZSB9KTtcclxuICB9XHJcbn07XHJcblxyXG4vLyBHZXQgYXR0ZW5kYW5jZSBieSBJRFxyXG5leHBvcnRzLmdldEF0dGVuZGFuY2VCeUlkID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHJlY29yZCA9IGF3YWl0IEF0dGVuZGFuY2UuZmluZEJ5SWQocmVxLnBhcmFtcy5pZCk7XHJcbiAgICBpZiAoIXJlY29yZCkgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyb3I6ICdOb3QgZm91bmQnIH0pO1xyXG4gICAgcmVzLmpzb24ocmVjb3JkKTtcclxuICB9IGNhdGNoIChlcnIpIHtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6IGVyci5tZXNzYWdlIH0pO1xyXG4gIH1cclxufTtcclxuXHJcbi8vIFVwZGF0ZSBhdHRlbmRhbmNlXHJcbmV4cG9ydHMudXBkYXRlQXR0ZW5kYW5jZSA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCByZWNvcmQgPSBhd2FpdCBBdHRlbmRhbmNlLmZpbmRCeUlkQW5kVXBkYXRlKHJlcS5wYXJhbXMuaWQsIHJlcS5ib2R5LCB7IG5ldzogdHJ1ZSB9KTtcclxuICAgIGlmICghcmVjb3JkKSByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogJ05vdCBmb3VuZCcgfSk7XHJcbiAgICByZXMuanNvbihyZWNvcmQpO1xyXG4gIH0gY2F0Y2ggKGVycikge1xyXG4gICAgcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogZXJyLm1lc3NhZ2UgfSk7XHJcbiAgfVxyXG59O1xyXG5cclxuLy8gRGVsZXRlIGF0dGVuZGFuY2VcclxuZXhwb3J0cy5kZWxldGVBdHRlbmRhbmNlID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHJlY29yZCA9IGF3YWl0IEF0dGVuZGFuY2UuZmluZEJ5SWRBbmREZWxldGUocmVxLnBhcmFtcy5pZCk7XHJcbiAgICBpZiAoIXJlY29yZCkgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyb3I6ICdOb3QgZm91bmQnIH0pO1xyXG4gICAgcmVzLmpzb24oeyBtZXNzYWdlOiAnRGVsZXRlZCcgfSk7XHJcbiAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiBlcnIubWVzc2FnZSB9KTtcclxuICB9XHJcbn07XHJcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQSxNQUFNQSxVQUFVLEdBQUdDLE9BQU8sQ0FBQyw0QkFBNEIsQ0FBQzs7QUFFeEQ7QUFDQUMsT0FBTyxDQUFDQyxnQkFBZ0IsR0FBRyxPQUFPQyxHQUFHLEVBQUVDLEdBQUcsS0FBSztFQUM3QyxJQUFJO0lBQ0YsTUFBTUMsVUFBVSxHQUFHLElBQUlOLFVBQVUsQ0FBQ0ksR0FBRyxDQUFDRyxJQUFJLENBQUM7SUFDM0MsTUFBTUQsVUFBVSxDQUFDRSxJQUFJLENBQUMsQ0FBQztJQUN2QkgsR0FBRyxDQUFDSSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQ0osVUFBVSxDQUFDO0VBQ2xDLENBQUMsQ0FBQyxPQUFPSyxHQUFHLEVBQUU7SUFDWk4sR0FBRyxDQUFDSSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztNQUFFRSxLQUFLLEVBQUVELEdBQUcsQ0FBQ0U7SUFBUSxDQUFDLENBQUM7RUFDOUM7QUFDRixDQUFDOztBQUVEO0FBQ0FYLE9BQU8sQ0FBQ1ksY0FBYyxHQUFHLE9BQU9WLEdBQUcsRUFBRUMsR0FBRyxLQUFLO0VBQzNDLElBQUk7SUFDRixNQUFNVSxPQUFPLEdBQUcsTUFBTWYsVUFBVSxDQUFDZ0IsSUFBSSxDQUFDLENBQUM7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