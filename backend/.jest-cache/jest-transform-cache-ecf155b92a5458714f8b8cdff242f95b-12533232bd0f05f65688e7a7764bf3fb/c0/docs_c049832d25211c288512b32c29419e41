a58b7ddb1b5d71b8f1c461d23d2926f4
// API Documentation Routes
const express = require('express');
const router = express.Router();
const {
  ApiResponse
} = require('../utils/apiResponse');

// Main API documentation
router.get('/', (req, res) => {
  const documentation = {
    title: 'ERP System API',
    version: '1.0.0',
    description: 'Comprehensive Enterprise Resource Planning System API',
    baseURL: `http://localhost:${process.env.PORT}/api`,
    environment: process.env.NODE_ENV,
    endpoints: {
      authentication: {
        path: '/api/auth',
        methods: {
          POST: ['/register', '/login', '/logout', '/verify-email', '/forgot-password', '/reset-password'],
          GET: ['/verify-token', '/me', '/sessions'],
          PATCH: ['/change-password', '/update-profile', '/enable-2fa']
        }
      },
      users: {
        path: '/api/users',
        methods: {
          GET: ['/', '/:userId', '/stats/overview', '/search'],
          POST: ['/', '/import/csv', '/:userId/reset-password'],
          PUT: ['/:userId'],
          PATCH: ['/:userId/status', '/:userId/role'],
          DELETE: ['/:userId']
        }
      },
      rbac: {
        path: '/api/rbac',
        methods: {
          GET: ['/roles', '/roles/:roleId', '/permissions', '/stats/overview', '/audit/log', '/export/config'],
          POST: ['/roles', '/check-permission', '/check-access', '/roles/:roleId/permissions', '/import/config'],
          PUT: ['/roles/:roleId'],
          DELETE: ['/roles/:roleId', '/roles/:roleId/permissions/:permission']
        }
      },
      analytics: {
        path: '/api/analytics',
        methods: {
          GET: ['/user-behavior/:userId', '/performance-metrics', '/dashboard/:userId', '/trends/:metric', '/recommendations']
        }
      },
      cms: {
        path: '/api/cms',
        methods: {
          GET: ['/pages', '/pages/:slug', '/posts', '/categories', '/media', '/stats', '/pages/:pageId/autosaves'],
          POST: ['/pages', '/posts', '/categories', '/media/upload', '/schedule', '/pages/:pageId/restore/:versionId'],
          PUT: ['/pages/:pageId'],
          DELETE: ['/pages/:pageId', '/media/:mediaId', '/comments/:commentId']
        }
      },
      integrations: {
        path: '/api/integrations',
        methods: {
          GET: ['/status', '/available', '/rate-limit/:apiKey'],
          POST: ['/payments/process', '/email/send', '/sms/send', '/storage/upload', '/crm/sync', '/analytics/track', '/webhooks/handle']
        }
      },
      monitoring: {
        path: '/api/monitoring',
        methods: {
          GET: ['/health', '/metrics', '/endpoints', '/alerts', '/database', '/realtime']
        }
      },
      notifications: {
        path: '/api/notifications',
        methods: {
          GET: ['/user/:userId'],
          POST: ['/send', '/schedule'],
          PUT: ['/:id/read'],
          DELETE: ['/:id', '/user/:userId/all']
        }
      },
      performance: {
        path: '/api/performance',
        methods: {
          GET: ['/analysis', '/caching/recommendations', '/database/optimization', '/code/optimization', '/benchmarks', '/history']
        }
      },
      predictions: {
        path: '/api/predictions',
        methods: {
          POST: ['/sales', '/performance', '/attendance', '/churn', '/inventory']
        }
      },
      reports: {
        path: '/api/reports',
        methods: {
          GET: ['/all'],
          POST: ['/generate', '/export/csv', '/export/json', '/export/excel'],
          DELETE: ['/:id']
        }
      },
      support: {
        path: '/api/support',
        methods: {
          GET: ['/tickets', '/statistics', '/faq', '/team/status', '/kb/search'],
          POST: ['/tickets/create', '/tickets/:id/comments'],
          PUT: ['/tickets/:id/status']
        }
      }
    },
    headers: {
      authorization: 'Bearer <jwt_token>',
      'content-type': 'application/json'
    },
    statusCodes: {
      200: 'OK',
      201: 'Created',
      400: 'Bad Request',
      401: 'Unauthorized',
      403: 'Forbidden',
      404: 'Not Found',
      500: 'Internal Server Error'
    },
    examples: {
      login: {
        method: 'POST',
        url: '/api/auth/login',
        body: {
          email: 'user@example.com',
          password: 'password123'
        }
      },
      registerUser: {
        method: 'POST',
        url: '/api/users',
        body: {
          name: 'John Doe',
          email: 'john@example.com',
          password: 'secure_password_123',
          role: 'user'
        }
      },
      getUsers: {
        method: 'GET',
        url: '/api/users?role=user&status=active',
        headers: {
          authorization: 'Bearer <jwt_token>'
        }
      }
    }
  };
  return res.json(new ApiResponse(200, documentation, 'API Documentation'));
});

// Endpoint list
router.get('/endpoints', (req, res) => {
  const endpoints = [{
    path: '/api/auth',
    description: 'Authentication endpoints'
  }, {
    path: '/api/users',
    description: 'User management'
  }, {
    path: '/api/rbac',
    description: 'Role-based access control'
  }, {
    path: '/api/analytics',
    description: 'Advanced analytics'
  }, {
    path: '/api/cms',
    description: 'Content management system'
  }, {
    path: '/api/integrations',
    description: 'Third-party integrations'
  }, {
    path: '/api/monitoring',
    description: 'System monitoring'
  }, {
    path: '/api/notifications',
    description: 'Notifications system'
  }, {
    path: '/api/performance',
    description: 'Performance optimization'
  }, {
    path: '/api/predictions',
    description: 'AI predictions'
  }, {
    path: '/api/reports',
    description: 'Report generation'
  }, {
    path: '/api/support',
    description: 'Support tickets'
  }];
  return res.json(new ApiResponse(200, endpoints, 'API Endpoints'));
});

// Health status
router.get('/status', (req, res) => {
  const status = {
    api: 'operational',
    database: process.env.USE_MOCK_DB === 'true' ? 'mock' : 'connected',
    cache: process.env.USE_MOCK_CACHE === 'true' ? 'mock' : 'configured',
    environment: process.env.NODE_ENV,
    timestamp: new Date().toISOString(),
    uptime: Math.floor(process.uptime())
  };
  return res.json(new ApiResponse(200, status, 'System status'));
});
module.exports = router;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsInJvdXRlciIsIlJvdXRlciIsIkFwaVJlc3BvbnNlIiwiZ2V0IiwicmVxIiwicmVzIiwiZG9jdW1lbnRhdGlvbiIsInRpdGxlIiwidmVyc2lvbiIsImRlc2NyaXB0aW9uIiwiYmFzZVVSTCIsInByb2Nlc3MiLCJlbnYiLCJQT1JUIiwiZW52aXJvbm1lbnQiLCJOT0RFX0VOViIsImVuZHBvaW50cyIsImF1dGhlbnRpY2F0aW9uIiwicGF0aCIsIm1ldGhvZHMiLCJQT1NUIiwiR0VUIiwiUEFUQ0giLCJ1c2VycyIsIlBVVCIsIkRFTEVURSIsInJiYWMiLCJhbmFseXRpY3MiLCJjbXMiLCJpbnRlZ3JhdGlvbnMiLCJtb25pdG9yaW5nIiwibm90aWZpY2F0aW9ucyIsInBlcmZvcm1hbmNlIiwicHJlZGljdGlvbnMiLCJyZXBvcnRzIiwic3VwcG9ydCIsImhlYWRlcnMiLCJhdXRob3JpemF0aW9uIiwic3RhdHVzQ29kZXMiLCJleGFtcGxlcyIsImxvZ2luIiwibWV0aG9kIiwidXJsIiwiYm9keSIsImVtYWlsIiwicGFzc3dvcmQiLCJyZWdpc3RlclVzZXIiLCJuYW1lIiwicm9sZSIsImdldFVzZXJzIiwianNvbiIsInN0YXR1cyIsImFwaSIsImRhdGFiYXNlIiwiVVNFX01PQ0tfREIiLCJjYWNoZSIsIlVTRV9NT0NLX0NBQ0hFIiwidGltZXN0YW1wIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwidXB0aW1lIiwiTWF0aCIsImZsb29yIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbImRvY3MuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQVBJIERvY3VtZW50YXRpb24gUm91dGVzXHJcbmNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7XHJcbmNvbnN0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XHJcbmNvbnN0IHsgQXBpUmVzcG9uc2UgfSA9IHJlcXVpcmUoJy4uL3V0aWxzL2FwaVJlc3BvbnNlJyk7XHJcblxyXG4vLyBNYWluIEFQSSBkb2N1bWVudGF0aW9uXHJcbnJvdXRlci5nZXQoJy8nLCAocmVxLCByZXMpID0+IHtcclxuICBjb25zdCBkb2N1bWVudGF0aW9uID0ge1xyXG4gICAgdGl0bGU6ICdFUlAgU3lzdGVtIEFQSScsXHJcbiAgICB2ZXJzaW9uOiAnMS4wLjAnLFxyXG4gICAgZGVzY3JpcHRpb246ICdDb21wcmVoZW5zaXZlIEVudGVycHJpc2UgUmVzb3VyY2UgUGxhbm5pbmcgU3lzdGVtIEFQSScsXHJcbiAgICBiYXNlVVJMOiBgaHR0cDovL2xvY2FsaG9zdDoke3Byb2Nlc3MuZW52LlBPUlR9L2FwaWAsXHJcbiAgICBlbnZpcm9ubWVudDogcHJvY2Vzcy5lbnYuTk9ERV9FTlYsXHJcbiAgICBlbmRwb2ludHM6IHtcclxuICAgICAgYXV0aGVudGljYXRpb246IHtcclxuICAgICAgICBwYXRoOiAnL2FwaS9hdXRoJyxcclxuICAgICAgICBtZXRob2RzOiB7XHJcbiAgICAgICAgICBQT1NUOiBbXHJcbiAgICAgICAgICAgICcvcmVnaXN0ZXInLFxyXG4gICAgICAgICAgICAnL2xvZ2luJyxcclxuICAgICAgICAgICAgJy9sb2dvdXQnLFxyXG4gICAgICAgICAgICAnL3ZlcmlmeS1lbWFpbCcsXHJcbiAgICAgICAgICAgICcvZm9yZ290LXBhc3N3b3JkJyxcclxuICAgICAgICAgICAgJy9yZXNldC1wYXNzd29yZCcsXHJcbiAgICAgICAgICBdLFxyXG4gICAgICAgICAgR0VUOiBbJy92ZXJpZnktdG9rZW4nLCAnL21lJywgJy9zZXNzaW9ucyddLFxyXG4gICAgICAgICAgUEFUQ0g6IFsnL2NoYW5nZS1wYXNzd29yZCcsICcvdXBkYXRlLXByb2ZpbGUnLCAnL2VuYWJsZS0yZmEnXSxcclxuICAgICAgICB9LFxyXG4gICAgICB9LFxyXG4gICAgICB1c2Vyczoge1xyXG4gICAgICAgIHBhdGg6ICcvYXBpL3VzZXJzJyxcclxuICAgICAgICBtZXRob2RzOiB7XHJcbiAgICAgICAgICBHRVQ6IFsnLycsICcvOnVzZXJJZCcsICcvc3RhdHMvb3ZlcnZpZXcnLCAnL3NlYXJjaCddLFxyXG4gICAgICAgICAgUE9TVDogWycvJywgJy9pbXBvcnQvY3N2JywgJy86dXNlcklkL3Jlc2V0LXBhc3N3b3JkJ10sXHJcbiAgICAgICAgICBQVVQ6IFsnLzp1c2VySWQnXSxcclxuICAgICAgICAgIFBBVENIOiBbJy86dXNlcklkL3N0YXR1cycsICcvOnVzZXJJZC9yb2xlJ10sXHJcbiAgICAgICAgICBERUxFVEU6IFsnLzp1c2VySWQnXSxcclxuICAgICAgICB9LFxyXG4gICAgICB9LFxyXG4gICAgICByYmFjOiB7XHJcbiAgICAgICAgcGF0aDogJy9hcGkvcmJhYycsXHJcbiAgICAgICAgbWV0aG9kczoge1xyXG4gICAgICAgICAgR0VUOiBbXHJcbiAgICAgICAgICAgICcvcm9sZXMnLFxyXG4gICAgICAgICAgICAnL3JvbGVzLzpyb2xlSWQnLFxyXG4gICAgICAgICAgICAnL3Blcm1pc3Npb25zJyxcclxuICAgICAgICAgICAgJy9zdGF0cy9vdmVydmlldycsXHJcbiAgICAgICAgICAgICcvYXVkaXQvbG9nJyxcclxuICAgICAgICAgICAgJy9leHBvcnQvY29uZmlnJyxcclxuICAgICAgICAgIF0sXHJcbiAgICAgICAgICBQT1NUOiBbXHJcbiAgICAgICAgICAgICcvcm9sZXMnLFxyXG4gICAgICAgICAgICAnL2NoZWNrLXBlcm1pc3Npb24nLFxyXG4gICAgICAgICAgICAnL2NoZWNrLWFjY2VzcycsXHJcbiAgICAgICAgICAgICcvcm9sZXMvOnJvbGVJZC9wZXJtaXNzaW9ucycsXHJcbiAgICAgICAgICAgICcvaW1wb3J0L2NvbmZpZycsXHJcbiAgICAgICAgICBdLFxyXG4gICAgICAgICAgUFVUOiBbJy9yb2xlcy86cm9sZUlkJ10sXHJcbiAgICAgICAgICBERUxFVEU6IFsnL3JvbGVzLzpyb2xlSWQnLCAnL3JvbGVzLzpyb2xlSWQvcGVybWlzc2lvbnMvOnBlcm1pc3Npb24nXSxcclxuICAgICAgICB9LFxyXG4gICAgICB9LFxyXG4gICAgICBhbmFseXRpY3M6IHtcclxuICAgICAgICBwYXRoOiAnL2FwaS9hbmFseXRpY3MnLFxyXG4gICAgICAgIG1ldGhvZHM6IHtcclxuICAgICAgICAgIEdFVDogW1xyXG4gICAgICAgICAgICAnL3VzZXItYmVoYXZpb3IvOnVzZXJJZCcsXHJcbiAgICAgICAgICAgICcvcGVyZm9ybWFuY2UtbWV0cmljcycsXHJcbiAgICAgICAgICAgICcvZGFzaGJvYXJkLzp1c2VySWQnLFxyXG4gICAgICAgICAgICAnL3RyZW5kcy86bWV0cmljJyxcclxuICAgICAgICAgICAgJy9yZWNvbW1lbmRhdGlvbnMnLFxyXG4gICAgICAgICAgXSxcclxuICAgICAgICB9LFxyXG4gICAgICB9LFxyXG4gICAgICBjbXM6IHtcclxuICAgICAgICBwYXRoOiAnL2FwaS9jbXMnLFxyXG4gICAgICAgIG1ldGhvZHM6IHtcclxuICAgICAgICAgIEdFVDogW1xyXG4gICAgICAgICAgICAnL3BhZ2VzJyxcclxuICAgICAgICAgICAgJy9wYWdlcy86c2x1ZycsXHJcbiAgICAgICAgICAgICcvcG9zdHMnLFxyXG4gICAgICAgICAgICAnL2NhdGVnb3JpZXMnLFxyXG4gICAgICAgICAgICAnL21lZGlhJyxcclxuICAgICAgICAgICAgJy9zdGF0cycsXHJcbiAgICAgICAgICAgICcvcGFnZXMvOnBhZ2VJZC9hdXRvc2F2ZXMnLFxyXG4gICAgICAgICAgXSxcclxuICAgICAgICAgIFBPU1Q6IFtcclxuICAgICAgICAgICAgJy9wYWdlcycsXHJcbiAgICAgICAgICAgICcvcG9zdHMnLFxyXG4gICAgICAgICAgICAnL2NhdGVnb3JpZXMnLFxyXG4gICAgICAgICAgICAnL21lZGlhL3VwbG9hZCcsXHJcbiAgICAgICAgICAgICcvc2NoZWR1bGUnLFxyXG4gICAgICAgICAgICAnL3BhZ2VzLzpwYWdlSWQvcmVzdG9yZS86dmVyc2lvbklkJyxcclxuICAgICAgICAgIF0sXHJcbiAgICAgICAgICBQVVQ6IFsnL3BhZ2VzLzpwYWdlSWQnXSxcclxuICAgICAgICAgIERFTEVURTogWycvcGFnZXMvOnBhZ2VJZCcsICcvbWVkaWEvOm1lZGlhSWQnLCAnL2NvbW1lbnRzLzpjb21tZW50SWQnXSxcclxuICAgICAgICB9LFxyXG4gICAgICB9LFxyXG4gICAgICBpbnRlZ3JhdGlvbnM6IHtcclxuICAgICAgICBwYXRoOiAnL2FwaS9pbnRlZ3JhdGlvbnMnLFxyXG4gICAgICAgIG1ldGhvZHM6IHtcclxuICAgICAgICAgIEdFVDogWycvc3RhdHVzJywgJy9hdmFpbGFibGUnLCAnL3JhdGUtbGltaXQvOmFwaUtleSddLFxyXG4gICAgICAgICAgUE9TVDogW1xyXG4gICAgICAgICAgICAnL3BheW1lbnRzL3Byb2Nlc3MnLFxyXG4gICAgICAgICAgICAnL2VtYWlsL3NlbmQnLFxyXG4gICAgICAgICAgICAnL3Ntcy9zZW5kJyxcclxuICAgICAgICAgICAgJy9zdG9yYWdlL3VwbG9hZCcsXHJcbiAgICAgICAgICAgICcvY3JtL3N5bmMnLFxyXG4gICAgICAgICAgICAnL2FuYWx5dGljcy90cmFjaycsXHJcbiAgICAgICAgICAgICcvd2ViaG9va3MvaGFuZGxlJyxcclxuICAgICAgICAgIF0sXHJcbiAgICAgICAgfSxcclxuICAgICAgfSxcclxuICAgICAgbW9uaXRvcmluZzoge1xyXG4gICAgICAgIHBhdGg6ICcvYXBpL21vbml0b3JpbmcnLFxyXG4gICAgICAgIG1ldGhvZHM6IHtcclxuICAgICAgICAgIEdFVDogWycvaGVhbHRoJywgJy9tZXRyaWNzJywgJy9lbmRwb2ludHMnLCAnL2FsZXJ0cycsICcvZGF0YWJhc2UnLCAnL3JlYWx0aW1lJ10sXHJcbiAgICAgICAgfSxcclxuICAgICAgfSxcclxuICAgICAgbm90aWZpY2F0aW9uczoge1xyXG4gICAgICAgIHBhdGg6ICcvYXBpL25vdGlmaWNhdGlvbnMnLFxyXG4gICAgICAgIG1ldGhvZHM6IHtcclxuICAgICAgICAgIEdFVDogWycvdXNlci86dXNlcklkJ10sXHJcbiAgICAgICAgICBQT1NUOiBbJy9zZW5kJywgJy9zY2hlZHVsZSddLFxyXG4gICAgICAgICAgUFVUOiBbJy86aWQvcmVhZCddLFxyXG4gICAgICAgICAgREVMRVRFOiBbJy86aWQnLCAnL3VzZXIvOnVzZXJJZC9hbGwnXSxcclxuICAgICAgICB9LFxyXG4gICAgICB9LFxyXG4gICAgICBwZXJmb3JtYW5jZToge1xyXG4gICAgICAgIHBhdGg6ICcvYXBpL3BlcmZvcm1hbmNlJyxcclxuICAgICAgICBtZXRob2RzOiB7XHJcbiAgICAgICAgICBHRVQ6IFtcclxuICAgICAgICAgICAgJy9hbmFseXNpcycsXHJcbiAgICAgICAgICAgICcvY2FjaGluZy9yZWNvbW1lbmRhdGlvbnMnLFxyXG4gICAgICAgICAgICAnL2RhdGFiYXNlL29wdGltaXphdGlvbicsXHJcbiAgICAgICAgICAgICcvY29kZS9vcHRpbWl6YXRpb24nLFxyXG4gICAgICAgICAgICAnL2JlbmNobWFya3MnLFxyXG4gICAgICAgICAgICAnL2hpc3RvcnknLFxyXG4gICAgICAgICAgXSxcclxuICAgICAgICB9LFxyXG4gICAgICB9LFxyXG4gICAgICBwcmVkaWN0aW9uczoge1xyXG4gICAgICAgIHBhdGg6ICcvYXBpL3ByZWRpY3Rpb25zJyxcclxuICAgICAgICBtZXRob2RzOiB7XHJcbiAgICAgICAgICBQT1NUOiBbJy9zYWxlcycsICcvcGVyZm9ybWFuY2UnLCAnL2F0dGVuZGFuY2UnLCAnL2NodXJuJywgJy9pbnZlbnRvcnknXSxcclxuICAgICAgICB9LFxyXG4gICAgICB9LFxyXG4gICAgICByZXBvcnRzOiB7XHJcbiAgICAgICAgcGF0aDogJy9hcGkvcmVwb3J0cycsXHJcbiAgICAgICAgbWV0aG9kczoge1xyXG4gICAgICAgICAgR0VUOiBbJy9hbGwnXSxcclxuICAgICAgICAgIFBPU1Q6IFsnL2dlbmVyYXRlJywgJy9leHBvcnQvY3N2JywgJy9leHBvcnQvanNvbicsICcvZXhwb3J0L2V4Y2VsJ10sXHJcbiAgICAgICAgICBERUxFVEU6IFsnLzppZCddLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0sXHJcbiAgICAgIHN1cHBvcnQ6IHtcclxuICAgICAgICBwYXRoOiAnL2FwaS9zdXBwb3J0JyxcclxuICAgICAgICBtZXRob2RzOiB7XHJcbiAgICAgICAgICBHRVQ6IFsnL3RpY2tldHMnLCAnL3N0YXRpc3RpY3MnLCAnL2ZhcScsICcvdGVhbS9zdGF0dXMnLCAnL2tiL3NlYXJjaCddLFxyXG4gICAgICAgICAgUE9TVDogWycvdGlja2V0cy9jcmVhdGUnLCAnL3RpY2tldHMvOmlkL2NvbW1lbnRzJ10sXHJcbiAgICAgICAgICBQVVQ6IFsnL3RpY2tldHMvOmlkL3N0YXR1cyddLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0sXHJcbiAgICB9LFxyXG4gICAgaGVhZGVyczoge1xyXG4gICAgICBhdXRob3JpemF0aW9uOiAnQmVhcmVyIDxqd3RfdG9rZW4+JyxcclxuICAgICAgJ2NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgIH0sXHJcbiAgICBzdGF0dXNDb2Rlczoge1xyXG4gICAgICAyMDA6ICdPSycsXHJcbiAgICAgIDIwMTogJ0NyZWF0ZWQnLFxyXG4gICAgICA0MDA6ICdCYWQgUmVxdWVzdCcsXHJcbiAgICAgIDQwMTogJ1VuYXV0aG9yaXplZCcsXHJcbiAgICAgIDQwMzogJ0ZvcmJpZGRlbicsXHJcbiAgICAgIDQwNDogJ05vdCBGb3VuZCcsXHJcbiAgICAgIDUwMDogJ0ludGVybmFsIFNlcnZlciBFcnJvcicsXHJcbiAgICB9LFxyXG4gICAgZXhhbXBsZXM6IHtcclxuICAgICAgbG9naW46IHtcclxuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICB1cmw6ICcvYXBpL2F1dGgvbG9naW4nLFxyXG4gICAgICAgIGJvZHk6IHtcclxuICAgICAgICAgIGVtYWlsOiAndXNlckBleGFtcGxlLmNvbScsXHJcbiAgICAgICAgICBwYXNzd29yZDogJ3Bhc3N3b3JkMTIzJyxcclxuICAgICAgICB9LFxyXG4gICAgICB9LFxyXG4gICAgICByZWdpc3RlclVzZXI6IHtcclxuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICB1cmw6ICcvYXBpL3VzZXJzJyxcclxuICAgICAgICBib2R5OiB7XHJcbiAgICAgICAgICBuYW1lOiAnSm9obiBEb2UnLFxyXG4gICAgICAgICAgZW1haWw6ICdqb2huQGV4YW1wbGUuY29tJyxcclxuICAgICAgICAgIHBhc3N3b3JkOiAnc2VjdXJlX3Bhc3N3b3JkXzEyMycsXHJcbiAgICAgICAgICByb2xlOiAndXNlcicsXHJcbiAgICAgICAgfSxcclxuICAgICAgfSxcclxuICAgICAgZ2V0VXNlcnM6IHtcclxuICAgICAgICBtZXRob2Q6ICdHRVQnLFxyXG4gICAgICAgIHVybDogJy9hcGkvdXNlcnM/cm9sZT11c2VyJnN0YXR1cz1hY3RpdmUnLFxyXG4gICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgIGF1dGhvcml6YXRpb246ICdCZWFyZXIgPGp3dF90b2tlbj4nLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0sXHJcbiAgICB9LFxyXG4gIH07XHJcblxyXG4gIHJldHVybiByZXMuanNvbihuZXcgQXBpUmVzcG9uc2UoMjAwLCBkb2N1bWVudGF0aW9uLCAnQVBJIERvY3VtZW50YXRpb24nKSk7XHJcbn0pO1xyXG5cclxuLy8gRW5kcG9pbnQgbGlzdFxyXG5yb3V0ZXIuZ2V0KCcvZW5kcG9pbnRzJywgKHJlcSwgcmVzKSA9PiB7XHJcbiAgY29uc3QgZW5kcG9pbnRzID0gW1xyXG4gICAgeyBwYXRoOiAnL2FwaS9hdXRoJywgZGVzY3JpcHRpb246ICdBdXRoZW50aWNhdGlvbiBlbmRwb2ludHMnIH0sXHJcbiAgICB7IHBhdGg6ICcvYXBpL3VzZXJzJywgZGVzY3JpcHRpb246ICdVc2VyIG1hbmFnZW1lbnQnIH0sXHJcbiAgICB7IHBhdGg6ICcvYXBpL3JiYWMnLCBkZXNjcmlwdGlvbjogJ1JvbGUtYmFzZWQgYWNjZXNzIGNvbnRyb2wnIH0sXHJcbiAgICB7IHBhdGg6ICcvYXBpL2FuYWx5dGljcycsIGRlc2NyaXB0aW9uOiAnQWR2YW5jZWQgYW5hbHl0aWNzJyB9LFxyXG4gICAgeyBwYXRoOiAnL2FwaS9jbXMnLCBkZXNjcmlwdGlvbjogJ0NvbnRlbnQgbWFuYWdlbWVudCBzeXN0ZW0nIH0sXHJcbiAgICB7IHBhdGg6ICcvYXBpL2ludGVncmF0aW9ucycsIGRlc2NyaXB0aW9uOiAnVGhpcmQtcGFydHkgaW50ZWdyYXRpb25zJyB9LFxyXG4gICAgeyBwYXRoOiAnL2FwaS9tb25pdG9yaW5nJywgZGVzY3JpcHRpb246ICdTeXN0ZW0gbW9uaXRvcmluZycgfSxcclxuICAgIHsgcGF0aDogJy9hcGkvbm90aWZpY2F0aW9ucycsIGRlc2NyaXB0aW9uOiAnTm90aWZpY2F0aW9ucyBzeXN0ZW0nIH0sXHJcbiAgICB7IHBhdGg6ICcvYXBpL3BlcmZvcm1hbmNlJywgZGVzY3JpcHRpb246ICdQZXJmb3JtYW5jZSBvcHRpbWl6YXRpb24nIH0sXHJcbiAgICB7IHBhdGg6ICcvYXBpL3ByZWRpY3Rpb25zJywgZGVzY3JpcHRpb246ICdBSSBwcmVkaWN0aW9ucycgfSxcclxuICAgIHsgcGF0aDogJy9hcGkvcmVwb3J0cycsIGRlc2NyaXB0aW9uOiAnUmVwb3J0IGdlbmVyYXRpb24nIH0sXHJcbiAgICB7IHBhdGg6ICcvYXBpL3N1cHBvcnQnLCBkZXNjcmlwdGlvbjogJ1N1cHBvcnQgdGlja2V0cycgfSxcclxuICBdO1xyXG5cclxuICByZXR1cm4gcmVzLmpzb24obmV3IEFwaVJlc3BvbnNlKDIwMCwgZW5kcG9pbnRzLCAnQVBJIEVuZHBvaW50cycpKTtcclxufSk7XHJcblxyXG4vLyBIZWFsdGggc3RhdHVzXHJcbnJvdXRlci5nZXQoJy9zdGF0dXMnLCAocmVxLCByZXMpID0+IHtcclxuICBjb25zdCBzdGF0dXMgPSB7XHJcbiAgICBhcGk6ICdvcGVyYXRpb25hbCcsXHJcbiAgICBkYXRhYmFzZTogcHJvY2Vzcy5lbnYuVVNFX01PQ0tfREIgPT09ICd0cnVlJyA/ICdtb2NrJyA6ICdjb25uZWN0ZWQnLFxyXG4gICAgY2FjaGU6IHByb2Nlc3MuZW52LlVTRV9NT0NLX0NBQ0hFID09PSAndHJ1ZScgPyAnbW9jaycgOiAnY29uZmlndXJlZCcsXHJcbiAgICBlbnZpcm9ubWVudDogcHJvY2Vzcy5lbnYuTk9ERV9FTlYsXHJcbiAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgIHVwdGltZTogTWF0aC5mbG9vcihwcm9jZXNzLnVwdGltZSgpKSxcclxuICB9O1xyXG5cclxuICByZXR1cm4gcmVzLmpzb24obmV3IEFwaVJlc3BvbnNlKDIwMCwgc3RhdHVzLCAnU3lzdGVtIHN0YXR1cycpKTtcclxufSk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHJvdXRlcjtcclxuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBLE1BQU1BLE9BQU8sR0FBR0MsT0FBTyxDQUFDLFNBQVMsQ0FBQztBQUNsQyxNQUFNQyxNQUFNLEdBQUdGLE9BQU8sQ0FBQ0csTUFBTSxDQUFDLENBQUM7QUFDL0IsTUFBTTtFQUFFQztBQUFZLENBQUMsR0FBR0gsT0FBTyxDQUFDLHNCQUFzQixDQUFDOztBQUV2RDtBQUNBQyxNQUFNLENBQUNHLEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FBQ0MsR0FBRyxFQUFFQyxHQUFHLEtBQUs7RUFDNUIsTUFBTUMsYUFBYSxHQUFHO0lBQ3BCQyxLQUFLLEVBQUUsZ0JBQWdCO0lBQ3ZCQyxPQUFPLEVBQUUsT0FBTztJQUNoQkMsV0FBVyxFQUFFLHVEQUF1RDtJQUNwRUMsT0FBTyxFQUFFLG9CQUFvQkMsT0FBTyxDQUFDQyxHQUFHLENBQUNDLElBQUksTUFBTTtJQUNuREMsV0FBVyxFQUFFSCxPQUFPLENBQUNDLEdBQUcsQ0FBQ0csUUFBUTtJQUNqQ0MsU0FBUyxFQUFFO01BQ1RDLGNBQWMsRUFBRTtRQUNkQyxJQUFJLEVBQUUsV0FBVztRQUNqQkMsT0FBTyxFQUFFO1VBQ1BDLElBQUksRUFBRSxDQUNKLFdBQVcsRUFDWCxRQUFRLEVBQ1IsU0FBUyxFQUNULGVBQWUsRUFDZixrQkFBa0IsRUFDbEIsaUJBQWlCLENBQ2xCO1VBQ0RDLEdBQUcsRUFBRSxDQUFDLGVBQWUsRUFBRSxLQUFLLEVBQUUsV0FBVyxDQUFDO1VBQzFDQyxLQUFLLEVBQUUsQ0FBQyxrQkFBa0IsRUFBRSxpQkFBaUIsRUFBRSxhQUFhO1FBQzlEO01BQ0YsQ0FBQztNQUNEQyxLQUFLLEVBQUU7UUFDTEwsSUFBSSxFQUFFLFlBQVk7UUFDbEJDLE9BQU8sRUFBRTtVQUNQRSxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsVUFBVSxFQUFFLGlCQUFpQixFQUFFLFNBQVMsQ0FBQztVQUNwREQsSUFBSSxFQUFFLENBQUMsR0FBRyxFQUFFLGFBQWEsRUFBRSx5QkFBeUIsQ0FBQztVQUNyREksR0FBRyxFQUFFLENBQUMsVUFBVSxDQUFDO1VBQ2pCRixLQUFLLEVBQUUsQ0FBQyxpQkFBaUIsRUFBRSxlQUFlLENBQUM7VUFDM0NHLE1BQU0sRUFBRSxDQUFDLFVBQVU7UUFDckI7TUFDRixDQUFDO01BQ0RDLElBQUksRUFBRTtRQUNKUixJQUFJLEVBQUUsV0FBVztRQUNqQkMsT0FBTyxFQUFFO1VBQ1BFLEdBQUcsRUFBRSxDQUNILFFBQVEsRUFDUixnQkFBZ0IsRUFDaEIsY0FBYyxFQUNkLGlCQUFpQixFQUNqQixZQUFZLEVBQ1osZ0JBQWdCLENBQ2pCO1VBQ0RELElBQUksRUFBRSxDQUNKLFFBQVEsRUFDUixtQkFBbUIsRUFDbkIsZUFBZSxFQUNmLDRCQUE0QixFQUM1QixnQkFBZ0IsQ0FDakI7VUFDREksR0FBRyxFQUFFLENBQUMsZ0JBQWdCLENBQUM7VUFDdkJDLE1BQU0sRUFBRSxDQUFDLGdCQUFnQixFQUFFLHdDQUF3QztRQUNyRTtNQUNGLENBQUM7TUFDREUsU0FBUyxFQUFFO1FBQ1RULElBQUksRUFBRSxnQkFBZ0I7UUFDdEJDLE9BQU8sRUFBRTtVQUNQRSxHQUFHLEVBQUUsQ0FDSCx3QkFBd0IsRUFDeEIsc0JBQXNCLEVBQ3RCLG9CQUFvQixFQUNwQixpQkFBaUIsRUFDakIsa0JBQWtCO1FBRXRCO01BQ0YsQ0FBQztNQUNETyxHQUFHLEVBQUU7UUFDSFYsSUFBSSxFQUFFLFVBQVU7UUFDaEJDLE9BQU8sRUFBRTtVQUNQRSxHQUFHLEVBQUUsQ0FDSCxRQUFRLEVBQ1IsY0FBYyxFQUNkLFFBQVEsRUFDUixhQUFhLEVBQ2IsUUFBUSxFQUNSLFFBQVEsRUFDUiwwQkFBMEIsQ0FDM0I7VUFDREQsSUFBSSxFQUFFLENBQ0osUUFBUSxFQUNSLFFBQVEsRUFDUixhQUFhLEVBQ2IsZUFBZSxFQUNmLFdBQVcsRUFDWCxtQ0FBbUMsQ0FDcEM7VUFDREksR0FBRyxFQUFFLENBQUMsZ0JBQWdCLENBQUM7VUFDdkJDLE1BQU0sRUFBRSxDQUFDLGdCQUFnQixFQUFFLGlCQUFpQixFQUFFLHNCQUFzQjtRQUN0RTtNQUNGLENBQUM7TUFDREksWUFBWSxFQUFFO1FBQ1pYLElBQUksRUFBRSxtQkFBbUI7UUFDekJDLE9BQU8sRUFBRTtVQUNQRSxHQUFHLEVBQUUsQ0FBQyxTQUFTLEVBQUUsWUFBWSxFQUFFLHFCQUFxQixDQUFDO1VBQ3JERCxJQUFJLEVBQUUsQ0FDSixtQkFBbUIsRUFDbkIsYUFBYSxFQUNiLFdBQVcsRUFDWCxpQkFBaUIsRUFDakIsV0FBVyxFQUNYLGtCQUFrQixFQUNsQixrQkFBa0I7UUFFdEI7TUFDRixDQUFDO01BQ0RVLFVBQVUsRUFBRTtRQUNWWixJQUFJLEVBQUUsaUJBQWlCO1FBQ3ZCQyxPQUFPLEVBQUU7VUFDUEUsR0FBRyxFQUFFLENBQUMsU0FBUyxFQUFFLFVBQVUsRUFBRSxZQUFZLEVBQUUsU0FBUyxFQUFFLFdBQVcsRUFBRSxXQUFXO1FBQ2hGO01BQ0YsQ0FBQztNQUNEVSxhQUFhLEVBQUU7UUFDYmIsSUFBSSxFQUFFLG9CQUFvQjtRQUMxQkMsT0FBTyxFQUFFO1VBQ1BFLEdBQUcsRUFBRSxDQUFDLGVBQWUsQ0FBQztVQUN0QkQsSUFBSSxFQUFFLENBQUMsT0FBTyxFQUFFLFdBQVcsQ0FBQztVQUM1QkksR0FBRyxFQUFFLENBQUMsV0FBVyxDQUFDO1VBQ2xCQyxNQUFNLEVBQUUsQ0FBQyxNQUFNLEVBQUUsbUJBQW1CO1FBQ3RDO01BQ0YsQ0FBQztNQUNETyxXQUFXLEVBQUU7UUFDWGQsSUFBSSxFQUFFLGtCQUFrQjtRQUN4QkMsT0FBTyxFQUFFO1VBQ1BFLEdBQUcsRUFBRSxDQUNILFdBQVcsRUFDWCwwQkFBMEIsRUFDMUIsd0JBQXdCLEVBQ3hCLG9CQUFvQixFQUNwQixhQUFhLEVBQ2IsVUFBVTtRQUVkO01BQ0YsQ0FBQztNQUNEWSxXQUFXLEVBQUU7UUFDWGYsSUFBSSxFQUFFLGtCQUFrQjtRQUN4QkMsT0FBTyxFQUFFO1VBQ1BDLElBQUksRUFBRSxDQUFDLFFBQVEsRUFBRSxjQUFjLEVBQUUsYUFBYSxFQUFFLFFBQVEsRUFBRSxZQUFZO1FBQ3hFO01BQ0YsQ0FBQztNQUNEYyxPQUFPLEVBQUU7UUFDUGhCLElBQUksRUFBRSxjQUFjO1FBQ3BCQyxPQUFPLEVBQUU7VUFDUEUsR0FBRyxFQUFFLENBQUMsTUFBTSxDQUFDO1VBQ2JELElBQUksRUFBRSxDQUFDLFdBQVcsRUFBRSxhQUFhLEVBQUUsY0FBYyxFQUFFLGVBQWUsQ0FBQztVQUNuRUssTUFBTSxFQUFFLENBQUMsTUFBTTtRQUNqQjtNQUNGLENBQUM7TUFDRFUsT0FBTyxFQUFFO1FBQ1BqQixJQUFJLEVBQUUsY0FBYztRQUNwQkMsT0FBTyxFQUFFO1VBQ1BFLEdBQUcsRUFBRSxDQUFDLFVBQVUsRUFBRSxhQUFhLEVBQUUsTUFBTSxFQUFFLGNBQWMsRUFBRSxZQUFZLENBQUM7VUFDdEVELElBQUksRUFBRSxDQUFDLGlCQUFpQixFQUFFLHVCQUF1QixDQUFDO1VBQ2xESSxHQUFHLEVBQUUsQ0FBQyxxQkFBcUI7UUFDN0I7TUFDRjtJQUNGLENBQUM7SUFDRFksT0FBTyxFQUFFO01BQ1BDLGFBQWEsRUFBRSxvQkFBb0I7TUFDbkMsY0FBYyxFQUFFO0lBQ2xCLENBQUM7SUFDREMsV0FBVyxFQUFFO01BQ1gsR0FBRyxFQUFFLElBQUk7TUFDVCxHQUFHLEVBQUUsU0FBUztNQUNkLEdBQUcsRUFBRSxhQUFhO01BQ2xCLEdBQUcsRUFBRSxjQUFjO01BQ25CLEdBQUcsRUFBRSxXQUFXO01BQ2hCLEdBQUcsRUFBRSxXQUFXO01BQ2hCLEdBQUcsRUFBRTtJQUNQLENBQUM7SUFDREMsUUFBUSxFQUFFO01BQ1JDLEtBQUssRUFBRTtRQUNMQyxNQUFNLEVBQUUsTUFBTTtRQUNkQyxHQUFHLEVBQUUsaUJBQWlCO1FBQ3RCQyxJQUFJLEVBQUU7VUFDSkMsS0FBSyxFQUFFLGtCQUFrQjtVQUN6QkMsUUFBUSxFQUFFO1FBQ1o7TUFDRixDQUFDO01BQ0RDLFlBQVksRUFBRTtRQUNaTCxNQUFNLEVBQUUsTUFBTTtRQUNkQyxHQUFHLEVBQUUsWUFBWTtRQUNqQkMsSUFBSSxFQUFFO1VBQ0pJLElBQUksRUFBRSxVQUFVO1VBQ2hCSCxLQUFLLEVBQUUsa0JBQWtCO1VBQ3pCQyxRQUFRLEVBQUUscUJBQXFCO1VBQy9CRyxJQUFJLEVBQUU7UUFDUjtNQUNGLENBQUM7TUFDREMsUUFBUSxFQUFFO1FBQ1JSLE1BQU0sRUFBRSxLQUFLO1FBQ2JDLEdBQUcsRUFBRSxvQ0FBb0M7UUFDekNOLE9BQU8sRUFBRTtVQUNQQyxhQUFhLEVBQUU7UUFDakI7TUFDRjtJQUNGO0VBQ0YsQ0FBQztFQUVELE9BQU9oQyxHQUFHLENBQUM2QyxJQUFJLENBQUMsSUFBSWhELFdBQVcsQ0FBQyxHQUFHLEVBQUVJLGFBQWEsRUFBRSxtQkFBbUIsQ0FBQyxDQUFDO0FBQzNFLENBQUMsQ0FBQzs7QUFFRjtBQUNBTixNQUFNLENBQUNHLEdBQUcsQ0FBQyxZQUFZLEVBQUUsQ0FBQ0MsR0FBRyxFQUFFQyxHQUFHLEtBQUs7RUFDckMsTUFBTVcsU0FBUyxHQUFHLENBQ2hCO0lBQUVFLElBQUksRUFBRSxXQUFXO0lBQUVULFdBQVcsRUFBRTtFQUEyQixDQUFDLEVBQzlEO0lBQUVTLElBQUksRUFBRSxZQUFZO0lBQUVULFdBQVcsRUFBRTtFQUFrQixDQUFDLEVBQ3REO0lBQUVTLElBQUksRUFBRSxXQUFXO0lBQUVULFdBQVcsRUFBRTtFQUE0QixDQUFDLEVBQy9EO0lBQUVTLElBQUksRUFBRSxnQkFBZ0I7SUFBRVQsV0FBVyxFQUFFO0VBQXFCLENBQUMsRUFDN0Q7SUFBRVMsSUFBSSxFQUFFLFVBQVU7SUFBRVQsV0FBVyxFQUFFO0VBQTRCLENBQUMsRUFDOUQ7SUFBRVMsSUFBSSxFQUFFLG1CQUFtQjtJQUFFVCxXQUFXLEVBQUU7RUFBMkIsQ0FBQyxFQUN0RTtJQUFFUyxJQUFJLEVBQUUsaUJBQWlCO0lBQUVULFdBQVcsRUFBRTtFQUFvQixDQUFDLEVBQzdEO0lBQUVTLElBQUksRUFBRSxvQkFBb0I7SUFBRVQsV0FBVyxFQUFFO0VBQXVCLENBQUMsRUFDbkU7SUFBRVMsSUFBSSxFQUFFLGtCQUFrQjtJQUFFVCxXQUFXLEVBQUU7RUFBMkIsQ0FBQyxFQUNyRTtJQUFFUyxJQUFJLEVBQUUsa0JBQWtCO0lBQUVULFdBQVcsRUFBRTtFQUFpQixDQUFDLEVBQzNEO0lBQUVTLElBQUksRUFBRSxjQUFjO0lBQUVULFdBQVcsRUFBRTtFQUFvQixDQUFDLEVBQzFEO0lBQUVTLElBQUksRUFBRSxjQUFjO0lBQUVULFdBQVcsRUFBRTtFQUFrQixDQUFDLENBQ3pEO0VBRUQsT0FBT0osR0FBRyxDQUFDNkMsSUFBSSxDQUFDLElBQUloRCxXQUFXLENBQUMsR0FBRyxFQUFFYyxTQUFTLEVBQUUsZUFBZSxDQUFDLENBQUM7QUFDbkUsQ0FBQyxDQUFDOztBQUVGO0FBQ0FoQixNQUFNLENBQUNHLEdBQUcsQ0FBQyxTQUFTLEVBQUUsQ0FBQ0MsR0FBRyxFQUFFQyxHQUFHLEtBQUs7RUFDbEMsTUFBTThDLE1BQU0sR0FBRztJQUNiQyxHQUFHLEVBQUUsYUFBYTtJQUNsQkMsUUFBUSxFQUFFMUMsT0FBTyxDQUFDQyxHQUFHLENBQUMwQyxXQUFXLEtBQUssTUFBTSxHQUFHLE1BQU0sR0FBRyxXQUFXO0lBQ25FQyxLQUFLLEVBQUU1QyxPQUFPLENBQUNDLEdBQUcsQ0FBQzRDLGNBQWMsS0FBSyxNQUFNLEdBQUcsTUFBTSxHQUFHLFlBQVk7SUFDcEUxQyxXQUFXLEVBQUVILE9BQU8sQ0FBQ0MsR0FBRyxDQUFDRyxRQUFRO0lBQ2pDMEMsU0FBUyxFQUFFLElBQUlDLElBQUksQ0FBQyxDQUFDLENBQUNDLFdBQVcsQ0FBQyxDQUFDO0lBQ25DQyxNQUFNLEVBQUVDLElBQUksQ0FBQ0MsS0FBSyxDQUFDbkQsT0FBTyxDQUFDaUQsTUFBTSxDQUFDLENBQUM7RUFDckMsQ0FBQztFQUVELE9BQU92RCxHQUFHLENBQUM2QyxJQUFJLENBQUMsSUFBSWhELFdBQVcsQ0FBQyxHQUFHLEVBQUVpRCxNQUFNLEVBQUUsZUFBZSxDQUFDLENBQUM7QUFDaEUsQ0FBQyxDQUFDO0FBRUZZLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHaEUsTUFBTSIsImlnbm9yZUxpc3QiOltdfQ==