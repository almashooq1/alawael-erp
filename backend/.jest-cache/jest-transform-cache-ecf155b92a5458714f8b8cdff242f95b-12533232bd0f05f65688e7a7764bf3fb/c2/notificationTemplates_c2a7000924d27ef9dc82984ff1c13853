32f8fa88d30dcb9e2a6e2b586b20f5c0
const notificationTemplateAuditController = require('../controllers/notificationTemplateAuditController');
// سجل تغييرات القالب
router.get('/:templateId/audit', notificationTemplateAuditController.listByTemplate);
// backend/routes/notificationTemplates.js
const express = require('express');
const router = express.Router();
const notificationTemplateController = require('../controllers/notificationTemplateController');
const {
  authenticateToken
} = require('../middleware/auth');
const {
  checkPermission
} = require('../middleware/rbac');

// جميع المسارات تتطلب مصادقة وصلاحية إدارة الإشعارات
router.use(authenticateToken);
router.use(checkPermission('notifications', 'manage'));
router.post('/', notificationTemplateController.create);
router.put('/:id', notificationTemplateController.update);
router.delete('/:id', notificationTemplateController.remove);
router.get('/', notificationTemplateController.list);
router.get('/:id', notificationTemplateController.get);
module.exports = router;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJub3RpZmljYXRpb25UZW1wbGF0ZUF1ZGl0Q29udHJvbGxlciIsInJlcXVpcmUiLCJyb3V0ZXIiLCJnZXQiLCJsaXN0QnlUZW1wbGF0ZSIsImV4cHJlc3MiLCJSb3V0ZXIiLCJub3RpZmljYXRpb25UZW1wbGF0ZUNvbnRyb2xsZXIiLCJhdXRoZW50aWNhdGVUb2tlbiIsImNoZWNrUGVybWlzc2lvbiIsInVzZSIsInBvc3QiLCJjcmVhdGUiLCJwdXQiLCJ1cGRhdGUiLCJkZWxldGUiLCJyZW1vdmUiLCJsaXN0IiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbIm5vdGlmaWNhdGlvblRlbXBsYXRlcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBub3RpZmljYXRpb25UZW1wbGF0ZUF1ZGl0Q29udHJvbGxlciA9IHJlcXVpcmUoJy4uL2NvbnRyb2xsZXJzL25vdGlmaWNhdGlvblRlbXBsYXRlQXVkaXRDb250cm9sbGVyJyk7XHJcbi8vINiz2KzZhCDYqti62YrZitix2KfYqiDYp9mE2YLYp9mE2Khcclxucm91dGVyLmdldCgnLzp0ZW1wbGF0ZUlkL2F1ZGl0Jywgbm90aWZpY2F0aW9uVGVtcGxhdGVBdWRpdENvbnRyb2xsZXIubGlzdEJ5VGVtcGxhdGUpO1xyXG4vLyBiYWNrZW5kL3JvdXRlcy9ub3RpZmljYXRpb25UZW1wbGF0ZXMuanNcclxuY29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKTtcclxuY29uc3Qgcm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcclxuY29uc3Qgbm90aWZpY2F0aW9uVGVtcGxhdGVDb250cm9sbGVyID0gcmVxdWlyZSgnLi4vY29udHJvbGxlcnMvbm90aWZpY2F0aW9uVGVtcGxhdGVDb250cm9sbGVyJyk7XHJcbmNvbnN0IHsgYXV0aGVudGljYXRlVG9rZW4gfSA9IHJlcXVpcmUoJy4uL21pZGRsZXdhcmUvYXV0aCcpO1xyXG5jb25zdCB7IGNoZWNrUGVybWlzc2lvbiB9ID0gcmVxdWlyZSgnLi4vbWlkZGxld2FyZS9yYmFjJyk7XHJcblxyXG4vLyDYrNmF2YrYuSDYp9mE2YXYs9in2LHYp9iqINiq2KrYt9mE2Kgg2YXYtdin2K/ZgtipINmI2LXZhNin2K3ZitipINil2K/Yp9ix2Kkg2KfZhNil2LTYudin2LHYp9iqXHJcbnJvdXRlci51c2UoYXV0aGVudGljYXRlVG9rZW4pO1xyXG5yb3V0ZXIudXNlKGNoZWNrUGVybWlzc2lvbignbm90aWZpY2F0aW9ucycsICdtYW5hZ2UnKSk7XHJcblxyXG5yb3V0ZXIucG9zdCgnLycsIG5vdGlmaWNhdGlvblRlbXBsYXRlQ29udHJvbGxlci5jcmVhdGUpO1xyXG5yb3V0ZXIucHV0KCcvOmlkJywgbm90aWZpY2F0aW9uVGVtcGxhdGVDb250cm9sbGVyLnVwZGF0ZSk7XHJcbnJvdXRlci5kZWxldGUoJy86aWQnLCBub3RpZmljYXRpb25UZW1wbGF0ZUNvbnRyb2xsZXIucmVtb3ZlKTtcclxucm91dGVyLmdldCgnLycsIG5vdGlmaWNhdGlvblRlbXBsYXRlQ29udHJvbGxlci5saXN0KTtcclxucm91dGVyLmdldCgnLzppZCcsIG5vdGlmaWNhdGlvblRlbXBsYXRlQ29udHJvbGxlci5nZXQpO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSByb3V0ZXI7XHJcbiJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsbUNBQW1DLEdBQUdDLE9BQU8sQ0FBQyxvREFBb0QsQ0FBQztBQUN6RztBQUNBQyxNQUFNLENBQUNDLEdBQUcsQ0FBQyxvQkFBb0IsRUFBRUgsbUNBQW1DLENBQUNJLGNBQWMsQ0FBQztBQUNwRjtBQUNBLE1BQU1DLE9BQU8sR0FBR0osT0FBTyxDQUFDLFNBQVMsQ0FBQztBQUNsQyxNQUFNQyxNQUFNLEdBQUdHLE9BQU8sQ0FBQ0MsTUFBTSxDQUFDLENBQUM7QUFDL0IsTUFBTUMsOEJBQThCLEdBQUdOLE9BQU8sQ0FBQywrQ0FBK0MsQ0FBQztBQUMvRixNQUFNO0VBQUVPO0FBQWtCLENBQUMsR0FBR1AsT0FBTyxDQUFDLG9CQUFvQixDQUFDO0FBQzNELE1BQU07RUFBRVE7QUFBZ0IsQ0FBQyxHQUFHUixPQUFPLENBQUMsb0JBQW9CLENBQUM7O0FBRXpEO0FBQ0FDLE1BQU0sQ0FBQ1EsR0FBRyxDQUFDRixpQkFBaUIsQ0FBQztBQUM3Qk4sTUFBTSxDQUFDUSxHQUFHLENBQUNELGVBQWUsQ0FBQyxlQUFlLEVBQUUsUUFBUSxDQUFDLENBQUM7QUFFdERQLE1BQU0sQ0FBQ1MsSUFBSSxDQUFDLEdBQUcsRUFBRUosOEJBQThCLENBQUNLLE1BQU0sQ0FBQztBQUN2RFYsTUFBTSxDQUFDVyxHQUFHLENBQUMsTUFBTSxFQUFFTiw4QkFBOEIsQ0FBQ08sTUFBTSxDQUFDO0FBQ3pEWixNQUFNLENBQUNhLE1BQU0sQ0FBQyxNQUFNLEVBQUVSLDhCQUE4QixDQUFDUyxNQUFNLENBQUM7QUFDNURkLE1BQU0sQ0FBQ0MsR0FBRyxDQUFDLEdBQUcsRUFBRUksOEJBQThCLENBQUNVLElBQUksQ0FBQztBQUNwRGYsTUFBTSxDQUFDQyxHQUFHLENBQUMsTUFBTSxFQUFFSSw4QkFBOEIsQ0FBQ0osR0FBRyxDQUFDO0FBRXREZSxNQUFNLENBQUNDLE9BQU8sR0FBR2pCLE1BQU0iLCJpZ25vcmVMaXN0IjpbXX0=