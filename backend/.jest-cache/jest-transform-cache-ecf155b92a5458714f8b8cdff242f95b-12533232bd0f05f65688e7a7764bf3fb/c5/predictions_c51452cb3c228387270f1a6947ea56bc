8827c7feb10f3785863174c6911994d1
const express = require('express');
const router = express.Router();
const AIService = require('../services/aiService');
const {
  ApiResponse,
  ApiError
} = require('../utils/apiResponse');

// Sales Prediction
router.post('/sales', async (req, res, next) => {
  try {
    const prediction = await AIService.predictSales(req.body.historicalData);
    return res.json(new ApiResponse(200, prediction, 'Sales prediction generated'));
  } catch (err) {
    return next(new ApiError(400, 'Failed to generate sales prediction', [err.message]));
  }
});

// Performance Prediction
router.post('/performance', async (req, res, next) => {
  try {
    const prediction = await AIService.predictPerformance(req.body.metrics);
    return res.json(new ApiResponse(200, prediction, 'Performance prediction generated'));
  } catch (err) {
    return next(new ApiError(400, 'Failed to generate performance prediction', [err.message]));
  }
});

// Attendance Prediction
router.post('/attendance', async (req, res, next) => {
  try {
    const prediction = await AIService.predictAttendance(req.body.dayData);
    return res.json(new ApiResponse(200, prediction, 'Attendance prediction generated'));
  } catch (err) {
    return next(new ApiError(400, 'Failed to generate attendance prediction', [err.message]));
  }
});

// Churn Prediction
router.post('/churn', async (req, res, next) => {
  try {
    const prediction = await AIService.predictChurn(req.body.userData);
    return res.json(new ApiResponse(200, prediction, 'Churn prediction generated'));
  } catch (err) {
    return next(new ApiError(400, 'Failed to generate churn prediction', [err.message]));
  }
});

// Inventory Prediction
router.post('/inventory', async (req, res, next) => {
  try {
    const prediction = await AIService.predictInventory(req.body.itemData);
    return res.json(new ApiResponse(200, prediction, 'Inventory prediction generated'));
  } catch (err) {
    return next(new ApiError(400, 'Failed to generate inventory prediction', [err.message]));
  }
});
module.exports = router;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsInJvdXRlciIsIlJvdXRlciIsIkFJU2VydmljZSIsIkFwaVJlc3BvbnNlIiwiQXBpRXJyb3IiLCJwb3N0IiwicmVxIiwicmVzIiwibmV4dCIsInByZWRpY3Rpb24iLCJwcmVkaWN0U2FsZXMiLCJib2R5IiwiaGlzdG9yaWNhbERhdGEiLCJqc29uIiwiZXJyIiwibWVzc2FnZSIsInByZWRpY3RQZXJmb3JtYW5jZSIsIm1ldHJpY3MiLCJwcmVkaWN0QXR0ZW5kYW5jZSIsImRheURhdGEiLCJwcmVkaWN0Q2h1cm4iLCJ1c2VyRGF0YSIsInByZWRpY3RJbnZlbnRvcnkiLCJpdGVtRGF0YSIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlcyI6WyJwcmVkaWN0aW9ucy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBleHByZXNzID0gcmVxdWlyZSgnZXhwcmVzcycpO1xyXG5jb25zdCByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xyXG5jb25zdCBBSVNlcnZpY2UgPSByZXF1aXJlKCcuLi9zZXJ2aWNlcy9haVNlcnZpY2UnKTtcclxuY29uc3QgeyBBcGlSZXNwb25zZSwgQXBpRXJyb3IgfSA9IHJlcXVpcmUoJy4uL3V0aWxzL2FwaVJlc3BvbnNlJyk7XHJcblxyXG4vLyBTYWxlcyBQcmVkaWN0aW9uXHJcbnJvdXRlci5wb3N0KCcvc2FsZXMnLCBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgcHJlZGljdGlvbiA9IGF3YWl0IEFJU2VydmljZS5wcmVkaWN0U2FsZXMocmVxLmJvZHkuaGlzdG9yaWNhbERhdGEpO1xyXG4gICAgcmV0dXJuIHJlcy5qc29uKG5ldyBBcGlSZXNwb25zZSgyMDAsIHByZWRpY3Rpb24sICdTYWxlcyBwcmVkaWN0aW9uIGdlbmVyYXRlZCcpKTtcclxuICB9IGNhdGNoIChlcnIpIHtcclxuICAgIHJldHVybiBuZXh0KG5ldyBBcGlFcnJvcig0MDAsICdGYWlsZWQgdG8gZ2VuZXJhdGUgc2FsZXMgcHJlZGljdGlvbicsIFtlcnIubWVzc2FnZV0pKTtcclxuICB9XHJcbn0pO1xyXG5cclxuLy8gUGVyZm9ybWFuY2UgUHJlZGljdGlvblxyXG5yb3V0ZXIucG9zdCgnL3BlcmZvcm1hbmNlJywgYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHByZWRpY3Rpb24gPSBhd2FpdCBBSVNlcnZpY2UucHJlZGljdFBlcmZvcm1hbmNlKHJlcS5ib2R5Lm1ldHJpY3MpO1xyXG4gICAgcmV0dXJuIHJlcy5qc29uKG5ldyBBcGlSZXNwb25zZSgyMDAsIHByZWRpY3Rpb24sICdQZXJmb3JtYW5jZSBwcmVkaWN0aW9uIGdlbmVyYXRlZCcpKTtcclxuICB9IGNhdGNoIChlcnIpIHtcclxuICAgIHJldHVybiBuZXh0KG5ldyBBcGlFcnJvcig0MDAsICdGYWlsZWQgdG8gZ2VuZXJhdGUgcGVyZm9ybWFuY2UgcHJlZGljdGlvbicsIFtlcnIubWVzc2FnZV0pKTtcclxuICB9XHJcbn0pO1xyXG5cclxuLy8gQXR0ZW5kYW5jZSBQcmVkaWN0aW9uXHJcbnJvdXRlci5wb3N0KCcvYXR0ZW5kYW5jZScsIGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBwcmVkaWN0aW9uID0gYXdhaXQgQUlTZXJ2aWNlLnByZWRpY3RBdHRlbmRhbmNlKHJlcS5ib2R5LmRheURhdGEpO1xyXG4gICAgcmV0dXJuIHJlcy5qc29uKG5ldyBBcGlSZXNwb25zZSgyMDAsIHByZWRpY3Rpb24sICdBdHRlbmRhbmNlIHByZWRpY3Rpb24gZ2VuZXJhdGVkJykpO1xyXG4gIH0gY2F0Y2ggKGVycikge1xyXG4gICAgcmV0dXJuIG5leHQobmV3IEFwaUVycm9yKDQwMCwgJ0ZhaWxlZCB0byBnZW5lcmF0ZSBhdHRlbmRhbmNlIHByZWRpY3Rpb24nLCBbZXJyLm1lc3NhZ2VdKSk7XHJcbiAgfVxyXG59KTtcclxuXHJcbi8vIENodXJuIFByZWRpY3Rpb25cclxucm91dGVyLnBvc3QoJy9jaHVybicsIGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBwcmVkaWN0aW9uID0gYXdhaXQgQUlTZXJ2aWNlLnByZWRpY3RDaHVybihyZXEuYm9keS51c2VyRGF0YSk7XHJcbiAgICByZXR1cm4gcmVzLmpzb24obmV3IEFwaVJlc3BvbnNlKDIwMCwgcHJlZGljdGlvbiwgJ0NodXJuIHByZWRpY3Rpb24gZ2VuZXJhdGVkJykpO1xyXG4gIH0gY2F0Y2ggKGVycikge1xyXG4gICAgcmV0dXJuIG5leHQobmV3IEFwaUVycm9yKDQwMCwgJ0ZhaWxlZCB0byBnZW5lcmF0ZSBjaHVybiBwcmVkaWN0aW9uJywgW2Vyci5tZXNzYWdlXSkpO1xyXG4gIH1cclxufSk7XHJcblxyXG4vLyBJbnZlbnRvcnkgUHJlZGljdGlvblxyXG5yb3V0ZXIucG9zdCgnL2ludmVudG9yeScsIGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBwcmVkaWN0aW9uID0gYXdhaXQgQUlTZXJ2aWNlLnByZWRpY3RJbnZlbnRvcnkocmVxLmJvZHkuaXRlbURhdGEpO1xyXG4gICAgcmV0dXJuIHJlcy5qc29uKG5ldyBBcGlSZXNwb25zZSgyMDAsIHByZWRpY3Rpb24sICdJbnZlbnRvcnkgcHJlZGljdGlvbiBnZW5lcmF0ZWQnKSk7XHJcbiAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICByZXR1cm4gbmV4dChuZXcgQXBpRXJyb3IoNDAwLCAnRmFpbGVkIHRvIGdlbmVyYXRlIGludmVudG9yeSBwcmVkaWN0aW9uJywgW2Vyci5tZXNzYWdlXSkpO1xyXG4gIH1cclxufSk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHJvdXRlcjtcclxuIl0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxPQUFPLEdBQUdDLE9BQU8sQ0FBQyxTQUFTLENBQUM7QUFDbEMsTUFBTUMsTUFBTSxHQUFHRixPQUFPLENBQUNHLE1BQU0s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