92aed9e5da391936d8b3539a4a48b92e
/**
 * MFA Controller
 * تحكم المصادقة متعددة العوامل
 */

const crypto = require('crypto');
const mfaService = require('../services/mfaService');
const emailService = require('../services/emailService');
const smsService = require('../services/smsService');
const {
  MFASettings,
  MFASession,
  OTPLog,
  MFAAuditLog,
  TrustedDevice,
  MFARecoveryLog
} = require('../models/mfa.models');
const {
  User
} = require('../models/schemas');

// ============ SETUP ENDPOINTS ============

/**
 * Get MFA Setup Guide
 * الحصول على دليل إعداد MFA
 */
exports.getMFASetupGuide = async (req, res) => {
  try {
    const guide = mfaService.getMFASetupGuide();
    res.status(200).json({
      success: true,
      data: guide
    });
  } catch (error) {
    res.status(500).json({
      success: false,
      message: error.message
    });
  }
};

/**
 * Initialize TOTP Setup
 * بدء إعداد TOTP
 */
exports.initiateTOTPSetup = async (req, res) => {
  try {
    const userId = req.user._id;

    // Generate TOTP secret and QR code
    const totpData = await mfaService.generateTOTPSecret(req.user.email);

    // Create MFA settings if doesn't exist
    let mfaSettings = await MFASettings.findOne({
      userId
    });
    if (!mfaSettings) {
      mfaSettings = await MFASettings.create({
        userId
      });
    }

    // Log the setup initiation
    await MFAAuditLog.create({
      userId,
      action: 'mfa_setup',
      status: 'success',
      method: 'totp',
      details: {
        reason: 'User initiated TOTP setup'
      },
      ipAddress: req.ip,
      userAgent: req.get('user-agent')
    });
    res.status(200).json({
      success: true,
      message: 'TOTP setup initiated',
      data: {
        qrCode: totpData.qrCode,
        manualEntryKey: totpData.manualEntryKey,
        secret: totpData.secret,
        setupInstructions: {
          step1: 'Download an authenticator app',
          step2: 'Scan the QR code or enter the manual key',
          step3: 'Enter the 6-digit code to verify',
          step4: 'Save your backup codes in a safe place'
        }
      }
    });
  } catch (error) {
    await MFAAuditLog.create({
      userId: req.user._id,
      action: 'mfa_setup',
      status: 'failed',
      method: 'totp',
      error: error.message,
      ipAddress: req.ip,
      userAgent: req.get('user-agent')
    });
    res.status(500).json({
      success: false,
      message: error.message
    });
  }
};

/**
 * Verify TOTP and Enable
 * التحقق من TOTP وتفعيله
 */
exports.verifyAndEnableTOTP = async (req, res) => {
  try {
    const userId = req.user._id;
    const {
      token,
      secret
    } = req.body;
    if (!token || !secret) {
      return res.status(400).json({
        success: false,
        message: 'Token and secret are required'
      });
    }

    // Verify TOTP token
    const isValid = mfaService.verifyTOTP(token, secret);
    if (!isValid) {
      await MFAAuditLog.create({
        userId,
        action: 'verification_failed',
        status: 'failed',
        method: 'totp',
        error: 'Invalid TOTP token',
        ipAddress: req.ip,
        userAgent: req.get('user-agent')
      });
      return res.status(400).json({
        success: false,
        message: 'Invalid TOTP token'
      });
    }

    // Generate backup codes
    const backupCodes = mfaService.generateBackupCodes();
    const hashedBackupCodes = backupCodes.map(code => ({
      code: mfaService.hashBackupCode(code),
      used: false
    }));

    // Update MFA settings
    let mfaSettings = await MFASettings.findOneAndUpdate({
      userId
    }, {
      $set: {
        totp: {
          enabled: true,
          secret,
          verifiedAt: new Date(),
          backupCodesGenerated: true
        },
        primaryMethod: 'totp'
      },
      $push: {
        backupCodes: {
          $each: hashedBackupCodes
        }
      }
    }, {
      new: true,
      upsert: true
    });

    // Update user
    await User.findByIdAndUpdate(userId, {
      twoFactorEnabled: true,
      twoFactorSecret: secret
    });

    // Log success
    await MFAAuditLog.create({
      userId,
      action: 'mfa_enable',
      status: 'success',
      method: 'totp',
      details: {
        reason: 'User enabled TOTP authentication'
      },
      ipAddress: req.ip,
      userAgent: req.get('user-agent')
    });
    res.status(200).json({
      success: true,
      message: 'TOTP enabled successfully',
      data: {
        backupCodes,
        message: 'Save these backup codes in a safe place. You can use them to regain access if you lose your authenticator.'
      }
    });
  } catch (error) {
    res.status(500).json({
      success: false,
      message: error.message
    });
  }
};

/**
 * Start Email OTP Verification
 * بدء التحقق من OTP عبر البريد الإلكتروني
 */
exports.initiateEmailOTP = async (req, res) => {
  try {
    const userId = req.user._id;
    const user = await User.findById(userId);

    // Generate OTP
    const otpData = mfaService.generateEmailOTP();

    // Hash OTP for storage
    const otpHash = crypto.createHash('sha256').update(otpData.code).digest('hex');

    // Create MFA settings if doesn't exist
    let mfaSettings = await MFASettings.findOne({
      userId
    });
    if (!mfaSettings) {
      mfaSettings = await MFASettings.create({
        userId
      });
    }

    // Log OTP
    await OTPLog.create({
      userId,
      method: 'email',
      recipient: user.email,
      otpHash,
      expiresAt: otpData.expiresAt,
      ipAddress: req.ip,
      userAgent: req.get('user-agent'),
      reason: 'mfa_setup'
    });

    // Send OTP email
    await emailService.sendOTPEmail(user.email, otpData.code, {
      name: user.name,
      purpose: 'Multi-Factor Authentication Setup'
    });
    res.status(200).json({
      success: true,
      message: 'OTP sent to your email',
      data: {
        expiresIn: otpData.expiresIn,
        recipient: `${user.email.substring(0, 5)}***`
      }
    });
  } catch (error) {
    res.status(500).json({
      success: false,
      message: error.message
    });
  }
};

/**
 * Verify Email OTP and Enable
 * التحقق من OTP البريدي وتفعيله
 */
exports.verifyAndEnableEmailOTP = async (req, res) => {
  try {
    const userId = req.user._id;
    const {
      code
    } = req.body;
    if (!code) {
      return res.status(400).json({
        success: false,
        message: 'OTP code is required'
      });
    }

    // Find the most recent OTP log
    const otpLog = await OTPLog.findOne({
      userId,
      method: 'email'
    }).sort({
      createdAt: -1
    });
    if (!otpLog) {
      return res.status(400).json({
        success: false,
        message: 'No OTP request found'
      });
    }

    // Verify OTP
    const codeHash = crypto.createHash('sha256').update(code).digest('hex');
    const verification = mfaService.verifyOTP(code, otpLog.otpHash, otpLog.expiresAt);
    if (!verification.isValid) {
      otpLog.verificationAttempts += 1;
      await otpLog.save();
      await MFAAuditLog.create({
        userId,
        action: 'verification_failed',
        status: 'failed',
        method: 'email',
        error: verification.message,
        ipAddress: req.ip,
        userAgent: req.get('user-agent')
      });
      return res.status(400).json({
        success: false,
        message: verification.message
      });
    }

    // Update OTP log
    otpLog.status = 'verified';
    otpLog.verifiedAt = new Date();
    await otpLog.save();

    // Update MFA settings
    let mfaSettings = await MFASettings.findOneAndUpdate({
      userId
    }, {
      $set: {
        emailOTP: {
          enabled: true,
          verifiedAt: new Date()
        },
        primaryMethod: 'email'
      }
    }, {
      new: true,
      upsert: true
    });

    // Log success
    await MFAAuditLog.create({
      userId,
      action: 'mfa_enable',
      status: 'success',
      method: 'email',
      details: {
        reason: 'User enabled Email OTP authentication'
      },
      ipAddress: req.ip,
      userAgent: req.get('user-agent')
    });
    res.status(200).json({
      success: true,
      message: 'Email OTP enabled successfully'
    });
  } catch (error) {
    res.status(500).json({
      success: false,
      message: error.message
    });
  }
};

/**
 * Initiate SMS OTP Verification
 * بدء التحقق من OTP عبر الرسائل النصية
 */
exports.initiateSMSOTP = async (req, res) => {
  try {
    const userId = req.user._id;
    const {
      phoneNumber,
      countryCode
    } = req.body;
    if (!phoneNumber || !countryCode) {
      return res.status(400).json({
        success: false,
        message: 'Phone number and country code are required'
      });
    }
    const user = await User.findById(userId);

    // Generate OTP
    const otpData = mfaService.generateSMSOTP();
    const otpHash = crypto.createHash('sha256').update(otpData.code).digest('hex');

    // Create MFA settings if doesn't exist
    let mfaSettings = await MFASettings.findOne({
      userId
    });
    if (!mfaSettings) {
      mfaSettings = await MFASettings.create({
        userId
      });
    }

    // Log OTP
    await OTPLog.create({
      userId,
      method: 'sms',
      recipient: phoneNumber,
      otpHash,
      expiresAt: otpData.expiresAt,
      ipAddress: req.ip,
      userAgent: req.get('user-agent'),
      reason: 'mfa_setup'
    });

    // Send OTP SMS
    const fullPhoneNumber = `${countryCode}${phoneNumber}`;
    await smsService.sendOTP(fullPhoneNumber, otpData.code, {
      name: user.name,
      purpose: 'Multi-Factor Authentication'
    });
    res.status(200).json({
      success: true,
      message: 'OTP sent to your phone',
      data: {
        expiresIn: otpData.expiresIn,
        recipient: `${phoneNumber.substring(0, 3)}***`
      }
    });
  } catch (error) {
    res.status(500).json({
      success: false,
      message: error.message
    });
  }
};

/**
 * Verify SMS OTP and Enable
 * التحقق من OTP الرسائل النصية وتفعيله
 */
exports.verifyAndEnableSMSOTP = async (req, res) => {
  try {
    const userId = req.user._id;
    const {
      code,
      phoneNumber,
      countryCode
    } = req.body;
    if (!code || !phoneNumber || !countryCode) {
      return res.status(400).json({
        success: false,
        message: 'Code, phone number, and country code are required'
      });
    }

    // Find the most recent OTP log
    const otpLog = await OTPLog.findOne({
      userId,
      method: 'sms'
    }).sort({
      createdAt: -1
    });
    if (!otpLog) {
      return res.status(400).json({
        success: false,
        message: 'No OTP request found'
      });
    }

    // Verify OTP
    const verification = mfaService.verifyOTP(code, otpLog.otpHash, otpLog.expiresAt);
    if (!verification.isValid) {
      otpLog.verificationAttempts += 1;
      await otpLog.save();
      return res.status(400).json({
        success: false,
        message: verification.message
      });
    }

    // Update OTP log
    otpLog.status = 'verified';
    otpLog.verifiedAt = new Date();
    await otpLog.save();

    // Update MFA settings
    const mfaSettings = await MFASettings.findOneAndUpdate({
      userId
    }, {
      $set: {
        smsOTP: {
          enabled: true,
          phoneNumber,
          countryCode,
          verifiedAt: new Date()
        },
        primaryMethod: 'sms'
      }
    }, {
      new: true,
      upsert: true
    });

    // Log success
    await MFAAuditLog.create({
      userId,
      action: 'mfa_enable',
      status: 'success',
      method: 'sms',
      details: {
        reason: 'User enabled SMS OTP authentication',
        phoneNumber
      },
      ipAddress: req.ip,
      userAgent: req.get('user-agent')
    });
    res.status(200).json({
      success: true,
      message: 'SMS OTP enabled successfully'
    });
  } catch (error) {
    res.status(500).json({
      success: false,
      message: error.message
    });
  }
};

// ============ VERIFICATION ENDPOINTS ============

/**
 * Verify MFA During Login
 * التحقق من MFA أثناء تسجيل الدخول
 */
exports.verifyMFALogin = async (req, res) => {
  try {
    const {
      sessionId,
      token,
      method
    } = req.body;
    if (!sessionId || !token || !method) {
      return res.status(400).json({
        success: false,
        message: 'Session ID, token, and method are required'
      });
    }

    // Find MFA session
    const mfaSession = await MFASession.findOne({
      sessionId
    });
    if (!mfaSession) {
      return res.status(400).json({
        success: false,
        message: 'Invalid MFA session'
      });
    }

    // Validate session
    const validation = mfaService.validateMFASession(mfaSession);
    if (!validation.isValid) {
      return res.status(400).json({
        success: false,
        message: validation.message
      });
    }

    // Get user and MFA settings
    const user = await User.findById(mfaSession.userId).select('+twoFactorSecret');
    const mfaSettings = await MFASettings.findOne({
      userId: mfaSession.userId
    });
    let isValid = false;

    // Verify based on method
    if (method === 'totp') {
      isValid = mfaService.verifyTOTP(token, user.twoFactorSecret);
    } else if (method === 'backup') {
      // Verify backup code
      const backupCode = mfaSettings.backupCodes.find(bc => !bc.used && mfaService.verifyBackupCode(token, bc.code));
      if (backupCode) {
        backupCode.used = true;
        backupCode.usedAt = new Date();
        await mfaSettings.save();
        isValid = true;

        // Log backup code usage
        await MFAAuditLog.create({
          userId: mfaSession.userId,
          action: 'backup_code_used',
          status: 'success',
          ipAddress: req.ip,
          userAgent: req.get('user-agent')
        });
      }
    }
    if (!isValid) {
      mfaSession.attempts += 1;
      await mfaSession.save();
      await MFAAuditLog.create({
        userId: mfaSession.userId,
        action: 'verification_failed',
        status: 'failed',
        method,
        error: 'Invalid MFA token',
        ipAddress: req.ip,
        userAgent: req.get('user-agent')
      });
      return res.status(400).json({
        success: false,
        message: 'Invalid MFA token',
        attemptsRemaining: validation.attemptsRemaining - 1
      });
    }

    // MFA verified
    mfaSession.status = 'verified';
    mfaSession.verifiedAt = new Date();
    await mfaSession.save();

    // Log success
    await MFAAuditLog.create({
      userId: mfaSession.userId,
      action: 'verification_success',
      status: 'success',
      method,
      ipAddress: req.ip,
      userAgent: req.get('user-agent')
    });
    res.status(200).json({
      success: true,
      message: 'MFA verification successful',
      data: {
        sessionId,
        userId: mfaSession.userId,
        verified: true
      }
    });
  } catch (error) {
    res.status(500).json({
      success: false,
      message: error.message
    });
  }
};

// ============ SETTINGS ENDPOINTS ============

/**
 * Get MFA Settings
 * الحصول على إعدادات MFA
 */
exports.getMFASettings = async (req, res) => {
  try {
    const userId = req.user._id;
    let mfaSettings = await MFASettings.findOne({
      userId
    });
    if (!mfaSettings) {
      mfaSettings = await MFASettings.create({
        userId
      });
    }

    // Remove sensitive data
    const secureSettings = mfaSettings.toObject();
    if (secureSettings.totp) delete secureSettings.totp.secret;
    if (secureSettings.recovery) delete secureSettings.recovery.recoveryKey;
    secureSettings.backupCodes = secureSettings.backupCodes.map(({
      used,
      usedAt
    }) => ({
      used,
      usedAt
    }));
    res.status(200).json({
      success: true,
      data: secureSettings
    });
  } catch (error) {
    res.status(500).json({
      success: false,
      message: error.message
    });
  }
};

/**
 * Disable MFA Method
 * تعطيل طريقة MFA
 */
exports.disableMFAMethod = async (req, res) => {
  try {
    const userId = req.user._id;
    const {
      method
    } = req.body;
    if (!['totp', 'email', 'sms'].includes(method)) {
      return res.status(400).json({
        success: false,
        message: 'Invalid MFA method'
      });
    }
    const mfaSettings = await MFASettings.findOne({
      userId
    });

    // Cannot disable all methods
    const enabledMethods = [mfaSettings?.totp?.enabled, mfaSettings?.emailOTP?.enabled, mfaSettings?.smsOTP?.enabled].filter(Boolean);
    if (enabledMethods.length <= 1) {
      return res.status(400).json({
        success: false,
        message: 'At least one MFA method must remain enabled'
      });
    }

    // Disable method
    const methodField = method === 'totp' ? 'totp' : method === 'email' ? 'emailOTP' : 'smsOTP';
    const updateData = {};
    updateData[`${methodField}.enabled`] = false;
    const updated = await MFASettings.findOneAndUpdate({
      userId
    }, {
      $set: updateData
    }, {
      new: true
    });

    // Log action
    await MFAAuditLog.create({
      userId,
      action: 'mfa_disable',
      status: 'success',
      method,
      details: {
        reason: `User disabled ${method} authentication`
      },
      ipAddress: req.ip,
      userAgent: req.get('user-agent')
    });
    res.status(200).json({
      success: true,
      message: `${method} MFA method disabled successfully`
    });
  } catch (error) {
    res.status(500).json({
      success: false,
      message: error.message
    });
  }
};

// ============ TRUSTED DEVICE ENDPOINTS ============

/**
 * Trust Current Device
 * وضع علامة على الجهاز الحالي كموثوق
 */
exports.trustDevice = async (req, res) => {
  try {
    const userId = req.user._id;
    const {
      deviceName,
      deviceFingerprint
    } = req.body;
    if (!deviceFingerprint) {
      return res.status(400).json({
        success: false,
        message: 'Device fingerprint is required'
      });
    }

    // Generate device token
    const deviceToken = mfaService.generateTrustedDeviceToken(userId, deviceFingerprint);
    const trustedDevice = await TrustedDevice.create({
      userId,
      deviceId: crypto.randomBytes(12).toString('hex'),
      deviceName: deviceName || 'Unknown Device',
      fingerprint: deviceFingerprint,
      token: deviceToken.token,
      ipAddress: req.ip,
      userAgent: req.get('user-agent'),
      expiresAt: deviceToken.expiresAt
    });

    // Log action
    await MFAAuditLog.create({
      userId,
      action: 'device_trusted',
      status: 'success',
      details: {
        deviceName: deviceName || 'Unknown Device'
      },
      ipAddress: req.ip,
      userAgent: req.get('user-agent')
    });
    res.status(200).json({
      success: true,
      message: 'Device trusted successfully',
      data: {
        deviceToken: deviceToken.token,
        expiresAt: deviceToken.expiresAt
      }
    });
  } catch (error) {
    res.status(500).json({
      success: false,
      message: error.message
    });
  }
};

/**
 * Get Trusted Devices
 * الحصول على قائمة الأجهزة الموثوقة
 */
exports.getTrustedDevices = async (req, res) => {
  try {
    const userId = req.user._id;
    const devices = await TrustedDevice.find({
      userId,
      isActive: true,
      expiresAt: {
        $gt: new Date()
      }
    }).select('-token');
    res.status(200).json({
      success: true,
      data: devices
    });
  } catch (error) {
    res.status(500).json({
      success: false,
      message: error.message
    });
  }
};

/**
 * Revoke Trusted Device
 * إلغاء وضع العلامة على جهاز
 */
exports.revokeTrustedDevice = async (req, res) => {
  try {
    const userId = req.user._id;
    const {
      deviceId
    } = req.params;
    const device = await TrustedDevice.findOneAndUpdate({
      _id: deviceId,
      userId
    }, {
      isActive: false,
      revokedAt: new Date(),
      revokeReason: 'User revoked trust'
    }, {
      new: true
    });
    if (!device) {
      return res.status(404).json({
        success: false,
        message: 'Device not found'
      });
    }

    // Log action
    await MFAAuditLog.create({
      userId,
      action: 'device_revoked',
      status: 'success',
      details: {
        deviceName: device.deviceName
      },
      ipAddress: req.ip,
      userAgent: req.get('user-agent')
    });
    res.status(200).json({
      success: true,
      message: 'Device revoked successfully'
    });
  } catch (error) {
    res.status(500).json({
      success: false,
      message: error.message
    });
  }
};
module.exports = exports;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjcnlwdG8iLCJyZXF1aXJlIiwibWZhU2VydmljZSIsImVtYWlsU2VydmljZSIsInNtc1NlcnZpY2UiLCJNRkFTZXR0aW5ncyIsIk1GQVNlc3Npb24iLCJPVFBMb2ciLCJNRkFBdWRpdExvZyIsIlRydXN0ZWREZXZpY2UiLCJNRkFSZWNvdmVyeUxvZyIsIlVzZXIiLCJleHBvcnRzIiwiZ2V0TUZBU2V0dXBHdWlkZSIsInJlcSIsInJlcyIsImd1aWRlIiwic3RhdHVzIiwianNvbiIsInN1Y2Nlc3MiLCJkYXRhIiwiZXJyb3IiLCJtZXNzYWdlIiwiaW5pdGlhdGVUT1RQU2V0dXAiLCJ1c2VySWQiLCJ1c2VyIiwiX2lkIiwidG90cERhdGEiLCJnZW5lcmF0ZVRPVFBTZWNyZXQiLCJlbWFpbCIsIm1mYVNldHRpbmdzIiwiZmluZE9uZSIsImNyZWF0ZSIsImFjdGlvbiIsIm1ldGhvZCIsImRldGFpbHMiLCJyZWFzb24iLCJpcEFkZHJlc3MiLCJpcCIsInVzZXJBZ2VudCIsImdldCIsInFyQ29kZSIsIm1hbnVhbEVudHJ5S2V5Iiwic2VjcmV0Iiwic2V0dXBJbnN0cnVjdGlvbnMiLCJzdGVwMSIsInN0ZXAyIiwic3RlcDMiLCJzdGVwNCIsInZlcmlmeUFuZEVuYWJsZVRPVFAiLCJ0b2tlbiIsImJvZHkiLCJpc1ZhbGlkIiwidmVyaWZ5VE9UUCIsImJhY2t1cENvZGVzIiwiZ2VuZXJhdGVCYWNrdXBDb2RlcyIsImhhc2hlZEJhY2t1cENvZGVzIiwibWFwIiwiY29kZSIsImhhc2hCYWNrdXBDb2RlIiwidXNlZCIsImZpbmRPbmVBbmRVcGRhdGUiLCIkc2V0IiwidG90cCIsImVuYWJsZWQiLCJ2ZXJpZmllZEF0IiwiRGF0ZSIsImJhY2t1cENvZGVzR2VuZXJhdGVkIiwicHJpbWFyeU1ldGhvZCIsIiRwdXNoIiwiJGVhY2giLCJuZXciLCJ1cHNlcnQiLCJmaW5kQnlJZEFuZFVwZGF0ZSIsInR3b0ZhY3RvckVuYWJsZWQiLCJ0d29GYWN0b3JTZWNyZXQiLCJpbml0aWF0ZUVtYWlsT1RQIiwiZmluZEJ5SWQiLCJvdHBEYXRhIiwiZ2VuZXJhdGVFbWFpbE9UUCIsIm90cEhhc2giLCJjcmVhdGVIYXNoIiwidXBkYXRlIiwiZGlnZXN0IiwicmVjaXBpZW50IiwiZXhwaXJlc0F0Iiwic2VuZE9UUEVtYWlsIiwibmFtZSIsInB1cnBvc2UiLCJleHBpcmVzSW4iLCJzdWJzdHJpbmciLCJ2ZXJpZnlBbmRFbmFibGVFbWFpbE9UUCIsIm90cExvZyIsInNvcnQiLCJjcmVhdGVkQXQiLCJjb2RlSGFzaCIsInZlcmlmaWNhdGlvbiIsInZlcmlmeU9UUCIsInZlcmlmaWNhdGlvbkF0dGVtcHRzIiwic2F2ZSIsImVtYWlsT1RQIiwiaW5pdGlhdGVTTVNPVFAiLCJwaG9uZU51bWJlciIsImNvdW50cnlDb2RlIiwiZ2VuZXJhdGVTTVNPVFAiLCJmdWxsUGhvbmVOdW1iZXIiLCJzZW5kT1RQIiwidmVyaWZ5QW5kRW5hYmxlU01TT1RQIiwic21zT1RQIiwidmVyaWZ5TUZBTG9naW4iLCJzZXNzaW9uSWQiLCJtZmFTZXNzaW9uIiwidmFsaWRhdGlvbiIsInZhbGlkYXRlTUZBU2Vzc2lvbiIsInNlbGVjdCIsImJhY2t1cENvZGUiLCJmaW5kIiwiYmMiLCJ2ZXJpZnlCYWNrdXBDb2RlIiwidXNlZEF0IiwiYXR0ZW1wdHMiLCJhdHRlbXB0c1JlbWFpbmluZyIsInZlcmlmaWVkIiwiZ2V0TUZBU2V0dGluZ3MiLCJzZWN1cmVTZXR0aW5ncyIsInRvT2JqZWN0IiwicmVjb3ZlcnkiLCJyZWNvdmVyeUtleSIsImRpc2FibGVNRkFNZXRob2QiLCJpbmNsdWRlcyIsImVuYWJsZWRNZXRob2RzIiwiZmlsdGVyIiwiQm9vbGVhbiIsImxlbmd0aCIsIm1ldGhvZEZpZWxkIiwidXBkYXRlRGF0YSIsInVwZGF0ZWQiLCJ0cnVzdERldmljZSIsImRldmljZU5hbWUiLCJkZXZpY2VGaW5nZXJwcmludCIsImRldmljZVRva2VuIiwiZ2VuZXJhdGVUcnVzdGVkRGV2aWNlVG9rZW4iLCJ0cnVzdGVkRGV2aWNlIiwiZGV2aWNlSWQiLCJyYW5kb21CeXRlcyIsInRvU3RyaW5nIiwiZmluZ2VycHJpbnQiLCJnZXRUcnVzdGVkRGV2aWNlcyIsImRldmljZXMiLCJpc0FjdGl2ZSIsIiRndCIsInJldm9rZVRydXN0ZWREZXZpY2UiLCJwYXJhbXMiLCJkZXZpY2UiLCJyZXZva2VkQXQiLCJyZXZva2VSZWFzb24iLCJtb2R1bGUiXSwic291cmNlcyI6WyJtZmFDb250cm9sbGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBNRkEgQ29udHJvbGxlclxyXG4gKiDYqtit2YPZhSDYp9mE2YXYtdin2K/ZgtipINmF2KrYudiv2K/YqSDYp9mE2LnZiNin2YXZhFxyXG4gKi9cclxuXHJcbmNvbnN0IGNyeXB0byA9IHJlcXVpcmUoJ2NyeXB0bycpO1xyXG5jb25zdCBtZmFTZXJ2aWNlID0gcmVxdWlyZSgnLi4vc2VydmljZXMvbWZhU2VydmljZScpO1xyXG5jb25zdCBlbWFpbFNlcnZpY2UgPSByZXF1aXJlKCcuLi9zZXJ2aWNlcy9lbWFpbFNlcnZpY2UnKTtcclxuY29uc3Qgc21zU2VydmljZSA9IHJlcXVpcmUoJy4uL3NlcnZpY2VzL3Ntc1NlcnZpY2UnKTtcclxuY29uc3Qge1xyXG4gIE1GQVNldHRpbmdzLFxyXG4gIE1GQVNlc3Npb24sXHJcbiAgT1RQTG9nLFxyXG4gIE1GQUF1ZGl0TG9nLFxyXG4gIFRydXN0ZWREZXZpY2UsXHJcbiAgTUZBUmVjb3ZlcnlMb2csXHJcbn0gPSByZXF1aXJlKCcuLi9tb2RlbHMvbWZhLm1vZGVscycpO1xyXG5jb25zdCB7IFVzZXIgfSA9IHJlcXVpcmUoJy4uL21vZGVscy9zY2hlbWFzJyk7XHJcblxyXG4vLyA9PT09PT09PT09PT0gU0VUVVAgRU5EUE9JTlRTID09PT09PT09PT09PVxyXG5cclxuLyoqXHJcbiAqIEdldCBNRkEgU2V0dXAgR3VpZGVcclxuICog2KfZhNit2LXZiNmEINi52YTZiSDYr9mE2YrZhCDYpdi52K/Yp9ivIE1GQVxyXG4gKi9cclxuZXhwb3J0cy5nZXRNRkFTZXR1cEd1aWRlID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGd1aWRlID0gbWZhU2VydmljZS5nZXRNRkFTZXR1cEd1aWRlKCk7XHJcbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7XHJcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgIGRhdGE6IGd1aWRlLFxyXG4gICAgfSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXHJcbiAgICB9KTtcclxuICB9XHJcbn07XHJcblxyXG4vKipcclxuICogSW5pdGlhbGl6ZSBUT1RQIFNldHVwXHJcbiAqINio2K/YoSDYpdi52K/Yp9ivIFRPVFBcclxuICovXHJcbmV4cG9ydHMuaW5pdGlhdGVUT1RQU2V0dXAgPSBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgdXNlcklkID0gcmVxLnVzZXIuX2lkO1xyXG5cclxuICAgIC8vIEdlbmVyYXRlIFRPVFAgc2VjcmV0IGFuZCBRUiBjb2RlXHJcbiAgICBjb25zdCB0b3RwRGF0YSA9IGF3YWl0IG1mYVNlcnZpY2UuZ2VuZXJhdGVUT1RQU2VjcmV0KHJlcS51c2VyLmVtYWlsKTtcclxuXHJcbiAgICAvLyBDcmVhdGUgTUZBIHNldHRpbmdzIGlmIGRvZXNuJ3QgZXhpc3RcclxuICAgIGxldCBtZmFTZXR0aW5ncyA9IGF3YWl0IE1GQVNldHRpbmdzLmZpbmRPbmUoeyB1c2VySWQgfSk7XHJcbiAgICBpZiAoIW1mYVNldHRpbmdzKSB7XHJcbiAgICAgIG1mYVNldHRpbmdzID0gYXdhaXQgTUZBU2V0dGluZ3MuY3JlYXRlKHsgdXNlcklkIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIExvZyB0aGUgc2V0dXAgaW5pdGlhdGlvblxyXG4gICAgYXdhaXQgTUZBQXVkaXRMb2cuY3JlYXRlKHtcclxuICAgICAgdXNlcklkLFxyXG4gICAgICBhY3Rpb246ICdtZmFfc2V0dXAnLFxyXG4gICAgICBzdGF0dXM6ICdzdWNjZXNzJyxcclxuICAgICAgbWV0aG9kOiAndG90cCcsXHJcbiAgICAgIGRldGFpbHM6IHtcclxuICAgICAgICByZWFzb246ICdVc2VyIGluaXRpYXRlZCBUT1RQIHNldHVwJyxcclxuICAgICAgfSxcclxuICAgICAgaXBBZGRyZXNzOiByZXEuaXAsXHJcbiAgICAgIHVzZXJBZ2VudDogcmVxLmdldCgndXNlci1hZ2VudCcpLFxyXG4gICAgfSk7XHJcblxyXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24oe1xyXG4gICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICBtZXNzYWdlOiAnVE9UUCBzZXR1cCBpbml0aWF0ZWQnLFxyXG4gICAgICBkYXRhOiB7XHJcbiAgICAgICAgcXJDb2RlOiB0b3RwRGF0YS5xckNvZGUsXHJcbiAgICAgICAgbWFudWFsRW50cnlLZXk6IHRvdHBEYXRhLm1hbnVhbEVudHJ5S2V5LFxyXG4gICAgICAgIHNlY3JldDogdG90cERhdGEuc2VjcmV0LFxyXG4gICAgICAgIHNldHVwSW5zdHJ1Y3Rpb25zOiB7XHJcbiAgICAgICAgICBzdGVwMTogJ0Rvd25sb2FkIGFuIGF1dGhlbnRpY2F0b3IgYXBwJyxcclxuICAgICAgICAgIHN0ZXAyOiAnU2NhbiB0aGUgUVIgY29kZSBvciBlbnRlciB0aGUgbWFudWFsIGtleScsXHJcbiAgICAgICAgICBzdGVwMzogJ0VudGVyIHRoZSA2LWRpZ2l0IGNvZGUgdG8gdmVyaWZ5JyxcclxuICAgICAgICAgIHN0ZXA0OiAnU2F2ZSB5b3VyIGJhY2t1cCBjb2RlcyBpbiBhIHNhZmUgcGxhY2UnLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0sXHJcbiAgICB9KTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgYXdhaXQgTUZBQXVkaXRMb2cuY3JlYXRlKHtcclxuICAgICAgdXNlcklkOiByZXEudXNlci5faWQsXHJcbiAgICAgIGFjdGlvbjogJ21mYV9zZXR1cCcsXHJcbiAgICAgIHN0YXR1czogJ2ZhaWxlZCcsXHJcbiAgICAgIG1ldGhvZDogJ3RvdHAnLFxyXG4gICAgICBlcnJvcjogZXJyb3IubWVzc2FnZSxcclxuICAgICAgaXBBZGRyZXNzOiByZXEuaXAsXHJcbiAgICAgIHVzZXJBZ2VudDogcmVxLmdldCgndXNlci1hZ2VudCcpLFxyXG4gICAgfSk7XHJcblxyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xyXG4gICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcclxuICAgIH0pO1xyXG4gIH1cclxufTtcclxuXHJcbi8qKlxyXG4gKiBWZXJpZnkgVE9UUCBhbmQgRW5hYmxlXHJcbiAqINin2YTYqtit2YLZgiDZhdmGIFRPVFAg2YjYqtmB2LnZitmE2YdcclxuICovXHJcbmV4cG9ydHMudmVyaWZ5QW5kRW5hYmxlVE9UUCA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB1c2VySWQgPSByZXEudXNlci5faWQ7XHJcbiAgICBjb25zdCB7IHRva2VuLCBzZWNyZXQgfSA9IHJlcS5ib2R5O1xyXG5cclxuICAgIGlmICghdG9rZW4gfHwgIXNlY3JldCkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIG1lc3NhZ2U6ICdUb2tlbiBhbmQgc2VjcmV0IGFyZSByZXF1aXJlZCcsXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFZlcmlmeSBUT1RQIHRva2VuXHJcbiAgICBjb25zdCBpc1ZhbGlkID0gbWZhU2VydmljZS52ZXJpZnlUT1RQKHRva2VuLCBzZWNyZXQpO1xyXG4gICAgaWYgKCFpc1ZhbGlkKSB7XHJcbiAgICAgIGF3YWl0IE1GQUF1ZGl0TG9nLmNyZWF0ZSh7XHJcbiAgICAgICAgdXNlcklkLFxyXG4gICAgICAgIGFjdGlvbjogJ3ZlcmlmaWNhdGlvbl9mYWlsZWQnLFxyXG4gICAgICAgIHN0YXR1czogJ2ZhaWxlZCcsXHJcbiAgICAgICAgbWV0aG9kOiAndG90cCcsXHJcbiAgICAgICAgZXJyb3I6ICdJbnZhbGlkIFRPVFAgdG9rZW4nLFxyXG4gICAgICAgIGlwQWRkcmVzczogcmVxLmlwLFxyXG4gICAgICAgIHVzZXJBZ2VudDogcmVxLmdldCgndXNlci1hZ2VudCcpLFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XHJcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgbWVzc2FnZTogJ0ludmFsaWQgVE9UUCB0b2tlbicsXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEdlbmVyYXRlIGJhY2t1cCBjb2Rlc1xyXG4gICAgY29uc3QgYmFja3VwQ29kZXMgPSBtZmFTZXJ2aWNlLmdlbmVyYXRlQmFja3VwQ29kZXMoKTtcclxuICAgIGNvbnN0IGhhc2hlZEJhY2t1cENvZGVzID0gYmFja3VwQ29kZXMubWFwKChjb2RlKSA9PiAoe1xyXG4gICAgICBjb2RlOiBtZmFTZXJ2aWNlLmhhc2hCYWNrdXBDb2RlKGNvZGUpLFxyXG4gICAgICB1c2VkOiBmYWxzZSxcclxuICAgIH0pKTtcclxuXHJcbiAgICAvLyBVcGRhdGUgTUZBIHNldHRpbmdzXHJcbiAgICBsZXQgbWZhU2V0dGluZ3MgPSBhd2FpdCBNRkFTZXR0aW5ncy5maW5kT25lQW5kVXBkYXRlKFxyXG4gICAgICB7IHVzZXJJZCB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgJHNldDoge1xyXG4gICAgICAgICAgdG90cDoge1xyXG4gICAgICAgICAgICBlbmFibGVkOiB0cnVlLFxyXG4gICAgICAgICAgICBzZWNyZXQsXHJcbiAgICAgICAgICAgIHZlcmlmaWVkQXQ6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgICAgIGJhY2t1cENvZGVzR2VuZXJhdGVkOiB0cnVlLFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIHByaW1hcnlNZXRob2Q6ICd0b3RwJyxcclxuICAgICAgICB9LFxyXG4gICAgICAgICRwdXNoOiB7XHJcbiAgICAgICAgICBiYWNrdXBDb2RlczogeyAkZWFjaDogaGFzaGVkQmFja3VwQ29kZXMgfSxcclxuICAgICAgICB9LFxyXG4gICAgICB9LFxyXG4gICAgICB7IG5ldzogdHJ1ZSwgdXBzZXJ0OiB0cnVlIH1cclxuICAgICk7XHJcblxyXG4gICAgLy8gVXBkYXRlIHVzZXJcclxuICAgIGF3YWl0IFVzZXIuZmluZEJ5SWRBbmRVcGRhdGUodXNlcklkLCB7XHJcbiAgICAgIHR3b0ZhY3RvckVuYWJsZWQ6IHRydWUsXHJcbiAgICAgIHR3b0ZhY3RvclNlY3JldDogc2VjcmV0LFxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gTG9nIHN1Y2Nlc3NcclxuICAgIGF3YWl0IE1GQUF1ZGl0TG9nLmNyZWF0ZSh7XHJcbiAgICAgIHVzZXJJZCxcclxuICAgICAgYWN0aW9uOiAnbWZhX2VuYWJsZScsXHJcbiAgICAgIHN0YXR1czogJ3N1Y2Nlc3MnLFxyXG4gICAgICBtZXRob2Q6ICd0b3RwJyxcclxuICAgICAgZGV0YWlsczoge1xyXG4gICAgICAgIHJlYXNvbjogJ1VzZXIgZW5hYmxlZCBUT1RQIGF1dGhlbnRpY2F0aW9uJyxcclxuICAgICAgfSxcclxuICAgICAgaXBBZGRyZXNzOiByZXEuaXAsXHJcbiAgICAgIHVzZXJBZ2VudDogcmVxLmdldCgndXNlci1hZ2VudCcpLFxyXG4gICAgfSk7XHJcblxyXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24oe1xyXG4gICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICBtZXNzYWdlOiAnVE9UUCBlbmFibGVkIHN1Y2Nlc3NmdWxseScsXHJcbiAgICAgIGRhdGE6IHtcclxuICAgICAgICBiYWNrdXBDb2RlcyxcclxuICAgICAgICBtZXNzYWdlOiAnU2F2ZSB0aGVzZSBiYWNrdXAgY29kZXMgaW4gYSBzYWZlIHBsYWNlLiBZb3UgY2FuIHVzZSB0aGVtIHRvIHJlZ2FpbiBhY2Nlc3MgaWYgeW91IGxvc2UgeW91ciBhdXRoZW50aWNhdG9yLicsXHJcbiAgICAgIH0sXHJcbiAgICB9KTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xyXG4gICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcclxuICAgIH0pO1xyXG4gIH1cclxufTtcclxuXHJcbi8qKlxyXG4gKiBTdGFydCBFbWFpbCBPVFAgVmVyaWZpY2F0aW9uXHJcbiAqINio2K/YoSDYp9mE2KrYrdmC2YIg2YXZhiBPVFAg2LnYqNixINin2YTYqNix2YrYryDYp9mE2KXZhNmD2KrYsdmI2YbZilxyXG4gKi9cclxuZXhwb3J0cy5pbml0aWF0ZUVtYWlsT1RQID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHVzZXJJZCA9IHJlcS51c2VyLl9pZDtcclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRCeUlkKHVzZXJJZCk7XHJcblxyXG4gICAgLy8gR2VuZXJhdGUgT1RQXHJcbiAgICBjb25zdCBvdHBEYXRhID0gbWZhU2VydmljZS5nZW5lcmF0ZUVtYWlsT1RQKCk7XHJcblxyXG4gICAgLy8gSGFzaCBPVFAgZm9yIHN0b3JhZ2VcclxuICAgIGNvbnN0IG90cEhhc2ggPSBjcnlwdG8uY3JlYXRlSGFzaCgnc2hhMjU2JykudXBkYXRlKG90cERhdGEuY29kZSkuZGlnZXN0KCdoZXgnKTtcclxuXHJcbiAgICAvLyBDcmVhdGUgTUZBIHNldHRpbmdzIGlmIGRvZXNuJ3QgZXhpc3RcclxuICAgIGxldCBtZmFTZXR0aW5ncyA9IGF3YWl0IE1GQVNldHRpbmdzLmZpbmRPbmUoeyB1c2VySWQgfSk7XHJcbiAgICBpZiAoIW1mYVNldHRpbmdzKSB7XHJcbiAgICAgIG1mYVNldHRpbmdzID0gYXdhaXQgTUZBU2V0dGluZ3MuY3JlYXRlKHsgdXNlcklkIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIExvZyBPVFBcclxuICAgIGF3YWl0IE9UUExvZy5jcmVhdGUoe1xyXG4gICAgICB1c2VySWQsXHJcbiAgICAgIG1ldGhvZDogJ2VtYWlsJyxcclxuICAgICAgcmVjaXBpZW50OiB1c2VyLmVtYWlsLFxyXG4gICAgICBvdHBIYXNoLFxyXG4gICAgICBleHBpcmVzQXQ6IG90cERhdGEuZXhwaXJlc0F0LFxyXG4gICAgICBpcEFkZHJlc3M6IHJlcS5pcCxcclxuICAgICAgdXNlckFnZW50OiByZXEuZ2V0KCd1c2VyLWFnZW50JyksXHJcbiAgICAgIHJlYXNvbjogJ21mYV9zZXR1cCcsXHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBTZW5kIE9UUCBlbWFpbFxyXG4gICAgYXdhaXQgZW1haWxTZXJ2aWNlLnNlbmRPVFBFbWFpbCh1c2VyLmVtYWlsLCBvdHBEYXRhLmNvZGUsIHtcclxuICAgICAgbmFtZTogdXNlci5uYW1lLFxyXG4gICAgICBwdXJwb3NlOiAnTXVsdGktRmFjdG9yIEF1dGhlbnRpY2F0aW9uIFNldHVwJyxcclxuICAgIH0pO1xyXG5cclxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcclxuICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgbWVzc2FnZTogJ09UUCBzZW50IHRvIHlvdXIgZW1haWwnLFxyXG4gICAgICBkYXRhOiB7XHJcbiAgICAgICAgZXhwaXJlc0luOiBvdHBEYXRhLmV4cGlyZXNJbixcclxuICAgICAgICByZWNpcGllbnQ6IGAke3VzZXIuZW1haWwuc3Vic3RyaW5nKDAsIDUpfSoqKmAsXHJcbiAgICAgIH0sXHJcbiAgICB9KTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xyXG4gICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcclxuICAgIH0pO1xyXG4gIH1cclxufTtcclxuXHJcbi8qKlxyXG4gKiBWZXJpZnkgRW1haWwgT1RQIGFuZCBFbmFibGVcclxuICog2KfZhNiq2K3ZgtmCINmF2YYgT1RQINin2YTYqNix2YrYr9mKINmI2KrZgdi52YrZhNmHXHJcbiAqL1xyXG5leHBvcnRzLnZlcmlmeUFuZEVuYWJsZUVtYWlsT1RQID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHVzZXJJZCA9IHJlcS51c2VyLl9pZDtcclxuICAgIGNvbnN0IHsgY29kZSB9ID0gcmVxLmJvZHk7XHJcblxyXG4gICAgaWYgKCFjb2RlKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XHJcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgbWVzc2FnZTogJ09UUCBjb2RlIGlzIHJlcXVpcmVkJyxcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRmluZCB0aGUgbW9zdCByZWNlbnQgT1RQIGxvZ1xyXG4gICAgY29uc3Qgb3RwTG9nID0gYXdhaXQgT1RQTG9nLmZpbmRPbmUoeyB1c2VySWQsIG1ldGhvZDogJ2VtYWlsJyB9KVxyXG4gICAgICAuc29ydCh7IGNyZWF0ZWRBdDogLTEgfSk7XHJcblxyXG4gICAgaWYgKCFvdHBMb2cpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBtZXNzYWdlOiAnTm8gT1RQIHJlcXVlc3QgZm91bmQnLFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBWZXJpZnkgT1RQXHJcbiAgICBjb25zdCBjb2RlSGFzaCA9IGNyeXB0by5jcmVhdGVIYXNoKCdzaGEyNTYnKS51cGRhdGUoY29kZSkuZGlnZXN0KCdoZXgnKTtcclxuICAgIGNvbnN0IHZlcmlmaWNhdGlvbiA9IG1mYVNlcnZpY2UudmVyaWZ5T1RQKGNvZGUsIG90cExvZy5vdHBIYXNoLCBvdHBMb2cuZXhwaXJlc0F0KTtcclxuXHJcbiAgICBpZiAoIXZlcmlmaWNhdGlvbi5pc1ZhbGlkKSB7XHJcbiAgICAgIG90cExvZy52ZXJpZmljYXRpb25BdHRlbXB0cyArPSAxO1xyXG4gICAgICBhd2FpdCBvdHBMb2cuc2F2ZSgpO1xyXG5cclxuICAgICAgYXdhaXQgTUZBQXVkaXRMb2cuY3JlYXRlKHtcclxuICAgICAgICB1c2VySWQsXHJcbiAgICAgICAgYWN0aW9uOiAndmVyaWZpY2F0aW9uX2ZhaWxlZCcsXHJcbiAgICAgICAgc3RhdHVzOiAnZmFpbGVkJyxcclxuICAgICAgICBtZXRob2Q6ICdlbWFpbCcsXHJcbiAgICAgICAgZXJyb3I6IHZlcmlmaWNhdGlvbi5tZXNzYWdlLFxyXG4gICAgICAgIGlwQWRkcmVzczogcmVxLmlwLFxyXG4gICAgICAgIHVzZXJBZ2VudDogcmVxLmdldCgndXNlci1hZ2VudCcpLFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XHJcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgbWVzc2FnZTogdmVyaWZpY2F0aW9uLm1lc3NhZ2UsXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFVwZGF0ZSBPVFAgbG9nXHJcbiAgICBvdHBMb2cuc3RhdHVzID0gJ3ZlcmlmaWVkJztcclxuICAgIG90cExvZy52ZXJpZmllZEF0ID0gbmV3IERhdGUoKTtcclxuICAgIGF3YWl0IG90cExvZy5zYXZlKCk7XHJcblxyXG4gICAgLy8gVXBkYXRlIE1GQSBzZXR0aW5nc1xyXG4gICAgbGV0IG1mYVNldHRpbmdzID0gYXdhaXQgTUZBU2V0dGluZ3MuZmluZE9uZUFuZFVwZGF0ZShcclxuICAgICAgeyB1c2VySWQgfSxcclxuICAgICAge1xyXG4gICAgICAgICRzZXQ6IHtcclxuICAgICAgICAgIGVtYWlsT1RQOiB7XHJcbiAgICAgICAgICAgIGVuYWJsZWQ6IHRydWUsXHJcbiAgICAgICAgICAgIHZlcmlmaWVkQXQ6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgcHJpbWFyeU1ldGhvZDogJ2VtYWlsJyxcclxuICAgICAgICB9LFxyXG4gICAgICB9LFxyXG4gICAgICB7IG5ldzogdHJ1ZSwgdXBzZXJ0OiB0cnVlIH1cclxuICAgICk7XHJcblxyXG4gICAgLy8gTG9nIHN1Y2Nlc3NcclxuICAgIGF3YWl0IE1GQUF1ZGl0TG9nLmNyZWF0ZSh7XHJcbiAgICAgIHVzZXJJZCxcclxuICAgICAgYWN0aW9uOiAnbWZhX2VuYWJsZScsXHJcbiAgICAgIHN0YXR1czogJ3N1Y2Nlc3MnLFxyXG4gICAgICBtZXRob2Q6ICdlbWFpbCcsXHJcbiAgICAgIGRldGFpbHM6IHtcclxuICAgICAgICByZWFzb246ICdVc2VyIGVuYWJsZWQgRW1haWwgT1RQIGF1dGhlbnRpY2F0aW9uJyxcclxuICAgICAgfSxcclxuICAgICAgaXBBZGRyZXNzOiByZXEuaXAsXHJcbiAgICAgIHVzZXJBZ2VudDogcmVxLmdldCgndXNlci1hZ2VudCcpLFxyXG4gICAgfSk7XHJcblxyXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24oe1xyXG4gICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICBtZXNzYWdlOiAnRW1haWwgT1RQIGVuYWJsZWQgc3VjY2Vzc2Z1bGx5JyxcclxuICAgIH0pO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XHJcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxyXG4gICAgfSk7XHJcbiAgfVxyXG59O1xyXG5cclxuLyoqXHJcbiAqIEluaXRpYXRlIFNNUyBPVFAgVmVyaWZpY2F0aW9uXHJcbiAqINio2K/YoSDYp9mE2KrYrdmC2YIg2YXZhiBPVFAg2LnYqNixINin2YTYsdiz2KfYptmEINin2YTZhti12YrYqVxyXG4gKi9cclxuZXhwb3J0cy5pbml0aWF0ZVNNU09UUCA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB1c2VySWQgPSByZXEudXNlci5faWQ7XHJcbiAgICBjb25zdCB7IHBob25lTnVtYmVyLCBjb3VudHJ5Q29kZSB9ID0gcmVxLmJvZHk7XHJcblxyXG4gICAgaWYgKCFwaG9uZU51bWJlciB8fCAhY291bnRyeUNvZGUpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBtZXNzYWdlOiAnUGhvbmUgbnVtYmVyIGFuZCBjb3VudHJ5IGNvZGUgYXJlIHJlcXVpcmVkJyxcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZEJ5SWQodXNlcklkKTtcclxuXHJcbiAgICAvLyBHZW5lcmF0ZSBPVFBcclxuICAgIGNvbnN0IG90cERhdGEgPSBtZmFTZXJ2aWNlLmdlbmVyYXRlU01TT1RQKCk7XHJcbiAgICBjb25zdCBvdHBIYXNoID0gY3J5cHRvLmNyZWF0ZUhhc2goJ3NoYTI1NicpLnVwZGF0ZShvdHBEYXRhLmNvZGUpLmRpZ2VzdCgnaGV4Jyk7XHJcblxyXG4gICAgLy8gQ3JlYXRlIE1GQSBzZXR0aW5ncyBpZiBkb2Vzbid0IGV4aXN0XHJcbiAgICBsZXQgbWZhU2V0dGluZ3MgPSBhd2FpdCBNRkFTZXR0aW5ncy5maW5kT25lKHsgdXNlcklkIH0pO1xyXG4gICAgaWYgKCFtZmFTZXR0aW5ncykge1xyXG4gICAgICBtZmFTZXR0aW5ncyA9IGF3YWl0IE1GQVNldHRpbmdzLmNyZWF0ZSh7IHVzZXJJZCB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBMb2cgT1RQXHJcbiAgICBhd2FpdCBPVFBMb2cuY3JlYXRlKHtcclxuICAgICAgdXNlcklkLFxyXG4gICAgICBtZXRob2Q6ICdzbXMnLFxyXG4gICAgICByZWNpcGllbnQ6IHBob25lTnVtYmVyLFxyXG4gICAgICBvdHBIYXNoLFxyXG4gICAgICBleHBpcmVzQXQ6IG90cERhdGEuZXhwaXJlc0F0LFxyXG4gICAgICBpcEFkZHJlc3M6IHJlcS5pcCxcclxuICAgICAgdXNlckFnZW50OiByZXEuZ2V0KCd1c2VyLWFnZW50JyksXHJcbiAgICAgIHJlYXNvbjogJ21mYV9zZXR1cCcsXHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBTZW5kIE9UUCBTTVNcclxuICAgIGNvbnN0IGZ1bGxQaG9uZU51bWJlciA9IGAke2NvdW50cnlDb2RlfSR7cGhvbmVOdW1iZXJ9YDtcclxuICAgIGF3YWl0IHNtc1NlcnZpY2Uuc2VuZE9UUChmdWxsUGhvbmVOdW1iZXIsIG90cERhdGEuY29kZSwge1xyXG4gICAgICBuYW1lOiB1c2VyLm5hbWUsXHJcbiAgICAgIHB1cnBvc2U6ICdNdWx0aS1GYWN0b3IgQXV0aGVudGljYXRpb24nLFxyXG4gICAgfSk7XHJcblxyXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24oe1xyXG4gICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICBtZXNzYWdlOiAnT1RQIHNlbnQgdG8geW91ciBwaG9uZScsXHJcbiAgICAgIGRhdGE6IHtcclxuICAgICAgICBleHBpcmVzSW46IG90cERhdGEuZXhwaXJlc0luLFxyXG4gICAgICAgIHJlY2lwaWVudDogYCR7cGhvbmVOdW1iZXIuc3Vic3RyaW5nKDAsIDMpfSoqKmAsXHJcbiAgICAgIH0sXHJcbiAgICB9KTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xyXG4gICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcclxuICAgIH0pO1xyXG4gIH1cclxufTtcclxuXHJcbi8qKlxyXG4gKiBWZXJpZnkgU01TIE9UUCBhbmQgRW5hYmxlXHJcbiAqINin2YTYqtit2YLZgiDZhdmGIE9UUCDYp9mE2LHYs9in2KbZhCDYp9mE2YbYtdmK2Kkg2YjYqtmB2LnZitmE2YdcclxuICovXHJcbmV4cG9ydHMudmVyaWZ5QW5kRW5hYmxlU01TT1RQID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHVzZXJJZCA9IHJlcS51c2VyLl9pZDtcclxuICAgIGNvbnN0IHsgY29kZSwgcGhvbmVOdW1iZXIsIGNvdW50cnlDb2RlIH0gPSByZXEuYm9keTtcclxuXHJcbiAgICBpZiAoIWNvZGUgfHwgIXBob25lTnVtYmVyIHx8ICFjb3VudHJ5Q29kZSkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIG1lc3NhZ2U6ICdDb2RlLCBwaG9uZSBudW1iZXIsIGFuZCBjb3VudHJ5IGNvZGUgYXJlIHJlcXVpcmVkJyxcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRmluZCB0aGUgbW9zdCByZWNlbnQgT1RQIGxvZ1xyXG4gICAgY29uc3Qgb3RwTG9nID0gYXdhaXQgT1RQTG9nLmZpbmRPbmUoeyB1c2VySWQsIG1ldGhvZDogJ3NtcycgfSlcclxuICAgICAgLnNvcnQoeyBjcmVhdGVkQXQ6IC0xIH0pO1xyXG5cclxuICAgIGlmICghb3RwTG9nKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XHJcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgbWVzc2FnZTogJ05vIE9UUCByZXF1ZXN0IGZvdW5kJyxcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVmVyaWZ5IE9UUFxyXG4gICAgY29uc3QgdmVyaWZpY2F0aW9uID0gbWZhU2VydmljZS52ZXJpZnlPVFAoY29kZSwgb3RwTG9nLm90cEhhc2gsIG90cExvZy5leHBpcmVzQXQpO1xyXG5cclxuICAgIGlmICghdmVyaWZpY2F0aW9uLmlzVmFsaWQpIHtcclxuICAgICAgb3RwTG9nLnZlcmlmaWNhdGlvbkF0dGVtcHRzICs9IDE7XHJcbiAgICAgIGF3YWl0IG90cExvZy5zYXZlKCk7XHJcblxyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIG1lc3NhZ2U6IHZlcmlmaWNhdGlvbi5tZXNzYWdlLFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBVcGRhdGUgT1RQIGxvZ1xyXG4gICAgb3RwTG9nLnN0YXR1cyA9ICd2ZXJpZmllZCc7XHJcbiAgICBvdHBMb2cudmVyaWZpZWRBdCA9IG5ldyBEYXRlKCk7XHJcbiAgICBhd2FpdCBvdHBMb2cuc2F2ZSgpO1xyXG5cclxuICAgIC8vIFVwZGF0ZSBNRkEgc2V0dGluZ3NcclxuICAgIGNvbnN0IG1mYVNldHRpbmdzID0gYXdhaXQgTUZBU2V0dGluZ3MuZmluZE9uZUFuZFVwZGF0ZShcclxuICAgICAgeyB1c2VySWQgfSxcclxuICAgICAge1xyXG4gICAgICAgICRzZXQ6IHtcclxuICAgICAgICAgIHNtc09UUDoge1xyXG4gICAgICAgICAgICBlbmFibGVkOiB0cnVlLFxyXG4gICAgICAgICAgICBwaG9uZU51bWJlcixcclxuICAgICAgICAgICAgY291bnRyeUNvZGUsXHJcbiAgICAgICAgICAgIHZlcmlmaWVkQXQ6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgcHJpbWFyeU1ldGhvZDogJ3NtcycsXHJcbiAgICAgICAgfSxcclxuICAgICAgfSxcclxuICAgICAgeyBuZXc6IHRydWUsIHVwc2VydDogdHJ1ZSB9XHJcbiAgICApO1xyXG5cclxuICAgIC8vIExvZyBzdWNjZXNzXHJcbiAgICBhd2FpdCBNRkFBdWRpdExvZy5jcmVhdGUoe1xyXG4gICAgICB1c2VySWQsXHJcbiAgICAgIGFjdGlvbjogJ21mYV9lbmFibGUnLFxyXG4gICAgICBzdGF0dXM6ICdzdWNjZXNzJyxcclxuICAgICAgbWV0aG9kOiAnc21zJyxcclxuICAgICAgZGV0YWlsczoge1xyXG4gICAgICAgIHJlYXNvbjogJ1VzZXIgZW5hYmxlZCBTTVMgT1RQIGF1dGhlbnRpY2F0aW9uJyxcclxuICAgICAgICBwaG9uZU51bWJlcixcclxuICAgICAgfSxcclxuICAgICAgaXBBZGRyZXNzOiByZXEuaXAsXHJcbiAgICAgIHVzZXJBZ2VudDogcmVxLmdldCgndXNlci1hZ2VudCcpLFxyXG4gICAgfSk7XHJcblxyXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24oe1xyXG4gICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICBtZXNzYWdlOiAnU01TIE9UUCBlbmFibGVkIHN1Y2Nlc3NmdWxseScsXHJcbiAgICB9KTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xyXG4gICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcclxuICAgIH0pO1xyXG4gIH1cclxufTtcclxuXHJcbi8vID09PT09PT09PT09PSBWRVJJRklDQVRJT04gRU5EUE9JTlRTID09PT09PT09PT09PVxyXG5cclxuLyoqXHJcbiAqIFZlcmlmeSBNRkEgRHVyaW5nIExvZ2luXHJcbiAqINin2YTYqtit2YLZgiDZhdmGIE1GQSDYo9ir2YbYp9ihINiq2LPYrNmK2YQg2KfZhNiv2K7ZiNmEXHJcbiAqL1xyXG5leHBvcnRzLnZlcmlmeU1GQUxvZ2luID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHsgc2Vzc2lvbklkLCB0b2tlbiwgbWV0aG9kIH0gPSByZXEuYm9keTtcclxuXHJcbiAgICBpZiAoIXNlc3Npb25JZCB8fCAhdG9rZW4gfHwgIW1ldGhvZCkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIG1lc3NhZ2U6ICdTZXNzaW9uIElELCB0b2tlbiwgYW5kIG1ldGhvZCBhcmUgcmVxdWlyZWQnLFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBGaW5kIE1GQSBzZXNzaW9uXHJcbiAgICBjb25zdCBtZmFTZXNzaW9uID0gYXdhaXQgTUZBU2Vzc2lvbi5maW5kT25lKHsgc2Vzc2lvbklkIH0pO1xyXG4gICAgaWYgKCFtZmFTZXNzaW9uKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XHJcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgbWVzc2FnZTogJ0ludmFsaWQgTUZBIHNlc3Npb24nLFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBWYWxpZGF0ZSBzZXNzaW9uXHJcbiAgICBjb25zdCB2YWxpZGF0aW9uID0gbWZhU2VydmljZS52YWxpZGF0ZU1GQVNlc3Npb24obWZhU2Vzc2lvbik7XHJcbiAgICBpZiAoIXZhbGlkYXRpb24uaXNWYWxpZCkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIG1lc3NhZ2U6IHZhbGlkYXRpb24ubWVzc2FnZSxcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gR2V0IHVzZXIgYW5kIE1GQSBzZXR0aW5nc1xyXG4gICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZEJ5SWQobWZhU2Vzc2lvbi51c2VySWQpLnNlbGVjdCgnK3R3b0ZhY3RvclNlY3JldCcpO1xyXG4gICAgY29uc3QgbWZhU2V0dGluZ3MgPSBhd2FpdCBNRkFTZXR0aW5ncy5maW5kT25lKHsgdXNlcklkOiBtZmFTZXNzaW9uLnVzZXJJZCB9KTtcclxuXHJcbiAgICBsZXQgaXNWYWxpZCA9IGZhbHNlO1xyXG5cclxuICAgIC8vIFZlcmlmeSBiYXNlZCBvbiBtZXRob2RcclxuICAgIGlmIChtZXRob2QgPT09ICd0b3RwJykge1xyXG4gICAgICBpc1ZhbGlkID0gbWZhU2VydmljZS52ZXJpZnlUT1RQKHRva2VuLCB1c2VyLnR3b0ZhY3RvclNlY3JldCk7XHJcbiAgICB9IGVsc2UgaWYgKG1ldGhvZCA9PT0gJ2JhY2t1cCcpIHtcclxuICAgICAgLy8gVmVyaWZ5IGJhY2t1cCBjb2RlXHJcbiAgICAgIGNvbnN0IGJhY2t1cENvZGUgPSBtZmFTZXR0aW5ncy5iYWNrdXBDb2Rlcy5maW5kKFxyXG4gICAgICAgIChiYykgPT4gIWJjLnVzZWQgJiYgbWZhU2VydmljZS52ZXJpZnlCYWNrdXBDb2RlKHRva2VuLCBiYy5jb2RlKVxyXG4gICAgICApO1xyXG4gICAgICBpZiAoYmFja3VwQ29kZSkge1xyXG4gICAgICAgIGJhY2t1cENvZGUudXNlZCA9IHRydWU7XHJcbiAgICAgICAgYmFja3VwQ29kZS51c2VkQXQgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgIGF3YWl0IG1mYVNldHRpbmdzLnNhdmUoKTtcclxuICAgICAgICBpc1ZhbGlkID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgLy8gTG9nIGJhY2t1cCBjb2RlIHVzYWdlXHJcbiAgICAgICAgYXdhaXQgTUZBQXVkaXRMb2cuY3JlYXRlKHtcclxuICAgICAgICAgIHVzZXJJZDogbWZhU2Vzc2lvbi51c2VySWQsXHJcbiAgICAgICAgICBhY3Rpb246ICdiYWNrdXBfY29kZV91c2VkJyxcclxuICAgICAgICAgIHN0YXR1czogJ3N1Y2Nlc3MnLFxyXG4gICAgICAgICAgaXBBZGRyZXNzOiByZXEuaXAsXHJcbiAgICAgICAgICB1c2VyQWdlbnQ6IHJlcS5nZXQoJ3VzZXItYWdlbnQnKSxcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmICghaXNWYWxpZCkge1xyXG4gICAgICBtZmFTZXNzaW9uLmF0dGVtcHRzICs9IDE7XHJcbiAgICAgIGF3YWl0IG1mYVNlc3Npb24uc2F2ZSgpO1xyXG5cclxuICAgICAgYXdhaXQgTUZBQXVkaXRMb2cuY3JlYXRlKHtcclxuICAgICAgICB1c2VySWQ6IG1mYVNlc3Npb24udXNlcklkLFxyXG4gICAgICAgIGFjdGlvbjogJ3ZlcmlmaWNhdGlvbl9mYWlsZWQnLFxyXG4gICAgICAgIHN0YXR1czogJ2ZhaWxlZCcsXHJcbiAgICAgICAgbWV0aG9kLFxyXG4gICAgICAgIGVycm9yOiAnSW52YWxpZCBNRkEgdG9rZW4nLFxyXG4gICAgICAgIGlwQWRkcmVzczogcmVxLmlwLFxyXG4gICAgICAgIHVzZXJBZ2VudDogcmVxLmdldCgndXNlci1hZ2VudCcpLFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XHJcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgbWVzc2FnZTogJ0ludmFsaWQgTUZBIHRva2VuJyxcclxuICAgICAgICBhdHRlbXB0c1JlbWFpbmluZzogdmFsaWRhdGlvbi5hdHRlbXB0c1JlbWFpbmluZyAtIDEsXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIE1GQSB2ZXJpZmllZFxyXG4gICAgbWZhU2Vzc2lvbi5zdGF0dXMgPSAndmVyaWZpZWQnO1xyXG4gICAgbWZhU2Vzc2lvbi52ZXJpZmllZEF0ID0gbmV3IERhdGUoKTtcclxuICAgIGF3YWl0IG1mYVNlc3Npb24uc2F2ZSgpO1xyXG5cclxuICAgIC8vIExvZyBzdWNjZXNzXHJcbiAgICBhd2FpdCBNRkFBdWRpdExvZy5jcmVhdGUoe1xyXG4gICAgICB1c2VySWQ6IG1mYVNlc3Npb24udXNlcklkLFxyXG4gICAgICBhY3Rpb246ICd2ZXJpZmljYXRpb25fc3VjY2VzcycsXHJcbiAgICAgIHN0YXR1czogJ3N1Y2Nlc3MnLFxyXG4gICAgICBtZXRob2QsXHJcbiAgICAgIGlwQWRkcmVzczogcmVxLmlwLFxyXG4gICAgICB1c2VyQWdlbnQ6IHJlcS5nZXQoJ3VzZXItYWdlbnQnKSxcclxuICAgIH0pO1xyXG5cclxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcclxuICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgbWVzc2FnZTogJ01GQSB2ZXJpZmljYXRpb24gc3VjY2Vzc2Z1bCcsXHJcbiAgICAgIGRhdGE6IHtcclxuICAgICAgICBzZXNzaW9uSWQsXHJcbiAgICAgICAgdXNlcklkOiBtZmFTZXNzaW9uLnVzZXJJZCxcclxuICAgICAgICB2ZXJpZmllZDogdHJ1ZSxcclxuICAgICAgfSxcclxuICAgIH0pO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XHJcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxyXG4gICAgfSk7XHJcbiAgfVxyXG59O1xyXG5cclxuLy8gPT09PT09PT09PT09IFNFVFRJTkdTIEVORFBPSU5UUyA9PT09PT09PT09PT1cclxuXHJcbi8qKlxyXG4gKiBHZXQgTUZBIFNldHRpbmdzXHJcbiAqINin2YTYrdi12YjZhCDYudmE2Ykg2KXYudiv2KfYr9in2KogTUZBXHJcbiAqL1xyXG5leHBvcnRzLmdldE1GQVNldHRpbmdzID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHVzZXJJZCA9IHJlcS51c2VyLl9pZDtcclxuXHJcbiAgICBsZXQgbWZhU2V0dGluZ3MgPSBhd2FpdCBNRkFTZXR0aW5ncy5maW5kT25lKHsgdXNlcklkIH0pO1xyXG4gICAgaWYgKCFtZmFTZXR0aW5ncykge1xyXG4gICAgICBtZmFTZXR0aW5ncyA9IGF3YWl0IE1GQVNldHRpbmdzLmNyZWF0ZSh7IHVzZXJJZCB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBSZW1vdmUgc2Vuc2l0aXZlIGRhdGFcclxuICAgIGNvbnN0IHNlY3VyZVNldHRpbmdzID0gbWZhU2V0dGluZ3MudG9PYmplY3QoKTtcclxuICAgIGlmIChzZWN1cmVTZXR0aW5ncy50b3RwKSBkZWxldGUgc2VjdXJlU2V0dGluZ3MudG90cC5zZWNyZXQ7XHJcbiAgICBpZiAoc2VjdXJlU2V0dGluZ3MucmVjb3ZlcnkpIGRlbGV0ZSBzZWN1cmVTZXR0aW5ncy5yZWNvdmVyeS5yZWNvdmVyeUtleTtcclxuICAgIHNlY3VyZVNldHRpbmdzLmJhY2t1cENvZGVzID0gc2VjdXJlU2V0dGluZ3MuYmFja3VwQ29kZXMubWFwKCh7IHVzZWQsIHVzZWRBdCB9KSA9PiAoe1xyXG4gICAgICB1c2VkLFxyXG4gICAgICB1c2VkQXQsXHJcbiAgICB9KSk7XHJcblxyXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24oe1xyXG4gICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICBkYXRhOiBzZWN1cmVTZXR0aW5ncyxcclxuICAgIH0pO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XHJcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxyXG4gICAgfSk7XHJcbiAgfVxyXG59O1xyXG5cclxuLyoqXHJcbiAqIERpc2FibGUgTUZBIE1ldGhvZFxyXG4gKiDYqti52LfZitmEINi32LHZitmC2KkgTUZBXHJcbiAqL1xyXG5leHBvcnRzLmRpc2FibGVNRkFNZXRob2QgPSBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgdXNlcklkID0gcmVxLnVzZXIuX2lkO1xyXG4gICAgY29uc3QgeyBtZXRob2QgfSA9IHJlcS5ib2R5O1xyXG5cclxuICAgIGlmICghWyd0b3RwJywgJ2VtYWlsJywgJ3NtcyddLmluY2x1ZGVzKG1ldGhvZCkpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBtZXNzYWdlOiAnSW52YWxpZCBNRkEgbWV0aG9kJyxcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgbWZhU2V0dGluZ3MgPSBhd2FpdCBNRkFTZXR0aW5ncy5maW5kT25lKHsgdXNlcklkIH0pO1xyXG5cclxuICAgIC8vIENhbm5vdCBkaXNhYmxlIGFsbCBtZXRob2RzXHJcbiAgICBjb25zdCBlbmFibGVkTWV0aG9kcyA9IFtcclxuICAgICAgbWZhU2V0dGluZ3M/LnRvdHA/LmVuYWJsZWQsXHJcbiAgICAgIG1mYVNldHRpbmdzPy5lbWFpbE9UUD8uZW5hYmxlZCxcclxuICAgICAgbWZhU2V0dGluZ3M/LnNtc09UUD8uZW5hYmxlZCxcclxuICAgIF0uZmlsdGVyKEJvb2xlYW4pO1xyXG5cclxuICAgIGlmIChlbmFibGVkTWV0aG9kcy5sZW5ndGggPD0gMSkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIG1lc3NhZ2U6ICdBdCBsZWFzdCBvbmUgTUZBIG1ldGhvZCBtdXN0IHJlbWFpbiBlbmFibGVkJyxcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRGlzYWJsZSBtZXRob2RcclxuICAgIGNvbnN0IG1ldGhvZEZpZWxkID0gbWV0aG9kID09PSAndG90cCcgPyAndG90cCcgOiBtZXRob2QgPT09ICdlbWFpbCcgPyAnZW1haWxPVFAnIDogJ3Ntc09UUCc7XHJcbiAgICBjb25zdCB1cGRhdGVEYXRhID0ge307XHJcbiAgICB1cGRhdGVEYXRhW2Ake21ldGhvZEZpZWxkfS5lbmFibGVkYF0gPSBmYWxzZTtcclxuXHJcbiAgICBjb25zdCB1cGRhdGVkID0gYXdhaXQgTUZBU2V0dGluZ3MuZmluZE9uZUFuZFVwZGF0ZShcclxuICAgICAgeyB1c2VySWQgfSxcclxuICAgICAgeyAkc2V0OiB1cGRhdGVEYXRhIH0sXHJcbiAgICAgIHsgbmV3OiB0cnVlIH1cclxuICAgICk7XHJcblxyXG4gICAgLy8gTG9nIGFjdGlvblxyXG4gICAgYXdhaXQgTUZBQXVkaXRMb2cuY3JlYXRlKHtcclxuICAgICAgdXNlcklkLFxyXG4gICAgICBhY3Rpb246ICdtZmFfZGlzYWJsZScsXHJcbiAgICAgIHN0YXR1czogJ3N1Y2Nlc3MnLFxyXG4gICAgICBtZXRob2QsXHJcbiAgICAgIGRldGFpbHM6IHtcclxuICAgICAgICByZWFzb246IGBVc2VyIGRpc2FibGVkICR7bWV0aG9kfSBhdXRoZW50aWNhdGlvbmAsXHJcbiAgICAgIH0sXHJcbiAgICAgIGlwQWRkcmVzczogcmVxLmlwLFxyXG4gICAgICB1c2VyQWdlbnQ6IHJlcS5nZXQoJ3VzZXItYWdlbnQnKSxcclxuICAgIH0pO1xyXG5cclxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcclxuICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgbWVzc2FnZTogYCR7bWV0aG9kfSBNRkEgbWV0aG9kIGRpc2FibGVkIHN1Y2Nlc3NmdWxseWAsXHJcbiAgICB9KTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xyXG4gICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcclxuICAgIH0pO1xyXG4gIH1cclxufTtcclxuXHJcbi8vID09PT09PT09PT09PSBUUlVTVEVEIERFVklDRSBFTkRQT0lOVFMgPT09PT09PT09PT09XHJcblxyXG4vKipcclxuICogVHJ1c3QgQ3VycmVudCBEZXZpY2VcclxuICog2YjYtti5INi52YTYp9mF2Kkg2LnZhNmJINin2YTYrNmH2KfYsiDYp9mE2K3Yp9mE2Yog2YPZhdmI2KvZiNmCXHJcbiAqL1xyXG5leHBvcnRzLnRydXN0RGV2aWNlID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHVzZXJJZCA9IHJlcS51c2VyLl9pZDtcclxuICAgIGNvbnN0IHsgZGV2aWNlTmFtZSwgZGV2aWNlRmluZ2VycHJpbnQgfSA9IHJlcS5ib2R5O1xyXG5cclxuICAgIGlmICghZGV2aWNlRmluZ2VycHJpbnQpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBtZXNzYWdlOiAnRGV2aWNlIGZpbmdlcnByaW50IGlzIHJlcXVpcmVkJyxcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gR2VuZXJhdGUgZGV2aWNlIHRva2VuXHJcbiAgICBjb25zdCBkZXZpY2VUb2tlbiA9IG1mYVNlcnZpY2UuZ2VuZXJhdGVUcnVzdGVkRGV2aWNlVG9rZW4odXNlcklkLCBkZXZpY2VGaW5nZXJwcmludCk7XHJcblxyXG4gICAgY29uc3QgdHJ1c3RlZERldmljZSA9IGF3YWl0IFRydXN0ZWREZXZpY2UuY3JlYXRlKHtcclxuICAgICAgdXNlcklkLFxyXG4gICAgICBkZXZpY2VJZDogY3J5cHRvLnJhbmRvbUJ5dGVzKDEyKS50b1N0cmluZygnaGV4JyksXHJcbiAgICAgIGRldmljZU5hbWU6IGRldmljZU5hbWUgfHwgJ1Vua25vd24gRGV2aWNlJyxcclxuICAgICAgZmluZ2VycHJpbnQ6IGRldmljZUZpbmdlcnByaW50LFxyXG4gICAgICB0b2tlbjogZGV2aWNlVG9rZW4udG9rZW4sXHJcbiAgICAgIGlwQWRkcmVzczogcmVxLmlwLFxyXG4gICAgICB1c2VyQWdlbnQ6IHJlcS5nZXQoJ3VzZXItYWdlbnQnKSxcclxuICAgICAgZXhwaXJlc0F0OiBkZXZpY2VUb2tlbi5leHBpcmVzQXQsXHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBMb2cgYWN0aW9uXHJcbiAgICBhd2FpdCBNRkFBdWRpdExvZy5jcmVhdGUoe1xyXG4gICAgICB1c2VySWQsXHJcbiAgICAgIGFjdGlvbjogJ2RldmljZV90cnVzdGVkJyxcclxuICAgICAgc3RhdHVzOiAnc3VjY2VzcycsXHJcbiAgICAgIGRldGFpbHM6IHtcclxuICAgICAgICBkZXZpY2VOYW1lOiBkZXZpY2VOYW1lIHx8ICdVbmtub3duIERldmljZScsXHJcbiAgICAgIH0sXHJcbiAgICAgIGlwQWRkcmVzczogcmVxLmlwLFxyXG4gICAgICB1c2VyQWdlbnQ6IHJlcS5nZXQoJ3VzZXItYWdlbnQnKSxcclxuICAgIH0pO1xyXG5cclxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcclxuICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgbWVzc2FnZTogJ0RldmljZSB0cnVzdGVkIHN1Y2Nlc3NmdWxseScsXHJcbiAgICAgIGRhdGE6IHtcclxuICAgICAgICBkZXZpY2VUb2tlbjogZGV2aWNlVG9rZW4udG9rZW4sXHJcbiAgICAgICAgZXhwaXJlc0F0OiBkZXZpY2VUb2tlbi5leHBpcmVzQXQsXHJcbiAgICAgIH0sXHJcbiAgICB9KTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xyXG4gICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcclxuICAgIH0pO1xyXG4gIH1cclxufTtcclxuXHJcbi8qKlxyXG4gKiBHZXQgVHJ1c3RlZCBEZXZpY2VzXHJcbiAqINin2YTYrdi12YjZhCDYudmE2Ykg2YLYp9im2YXYqSDYp9mE2KPYrNmH2LLYqSDYp9mE2YXZiNir2YjZgtipXHJcbiAqL1xyXG5leHBvcnRzLmdldFRydXN0ZWREZXZpY2VzID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHVzZXJJZCA9IHJlcS51c2VyLl9pZDtcclxuXHJcbiAgICBjb25zdCBkZXZpY2VzID0gYXdhaXQgVHJ1c3RlZERldmljZS5maW5kKHtcclxuICAgICAgdXNlcklkLFxyXG4gICAgICBpc0FjdGl2ZTogdHJ1ZSxcclxuICAgICAgZXhwaXJlc0F0OiB7ICRndDogbmV3IERhdGUoKSB9LFxyXG4gICAgfSkuc2VsZWN0KCctdG9rZW4nKTtcclxuXHJcbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7XHJcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgIGRhdGE6IGRldmljZXMsXHJcbiAgICB9KTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xyXG4gICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcclxuICAgIH0pO1xyXG4gIH1cclxufTtcclxuXHJcbi8qKlxyXG4gKiBSZXZva2UgVHJ1c3RlZCBEZXZpY2VcclxuICog2KXZhNi62KfYoSDZiNi22Lkg2KfZhNi52YTYp9mF2Kkg2LnZhNmJINis2YfYp9iyXHJcbiAqL1xyXG5leHBvcnRzLnJldm9rZVRydXN0ZWREZXZpY2UgPSBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgdXNlcklkID0gcmVxLnVzZXIuX2lkO1xyXG4gICAgY29uc3QgeyBkZXZpY2VJZCB9ID0gcmVxLnBhcmFtcztcclxuXHJcbiAgICBjb25zdCBkZXZpY2UgPSBhd2FpdCBUcnVzdGVkRGV2aWNlLmZpbmRPbmVBbmRVcGRhdGUoXHJcbiAgICAgIHsgX2lkOiBkZXZpY2VJZCwgdXNlcklkIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBpc0FjdGl2ZTogZmFsc2UsXHJcbiAgICAgICAgcmV2b2tlZEF0OiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgIHJldm9rZVJlYXNvbjogJ1VzZXIgcmV2b2tlZCB0cnVzdCcsXHJcbiAgICAgIH0sXHJcbiAgICAgIHsgbmV3OiB0cnVlIH1cclxuICAgICk7XHJcblxyXG4gICAgaWYgKCFkZXZpY2UpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHtcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBtZXNzYWdlOiAnRGV2aWNlIG5vdCBmb3VuZCcsXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIExvZyBhY3Rpb25cclxuICAgIGF3YWl0IE1GQUF1ZGl0TG9nLmNyZWF0ZSh7XHJcbiAgICAgIHVzZXJJZCxcclxuICAgICAgYWN0aW9uOiAnZGV2aWNlX3Jldm9rZWQnLFxyXG4gICAgICBzdGF0dXM6ICdzdWNjZXNzJyxcclxuICAgICAgZGV0YWlsczoge1xyXG4gICAgICAgIGRldmljZU5hbWU6IGRldmljZS5kZXZpY2VOYW1lLFxyXG4gICAgICB9LFxyXG4gICAgICBpcEFkZHJlc3M6IHJlcS5pcCxcclxuICAgICAgdXNlckFnZW50OiByZXEuZ2V0KCd1c2VyLWFnZW50JyksXHJcbiAgICB9KTtcclxuXHJcbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7XHJcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgIG1lc3NhZ2U6ICdEZXZpY2UgcmV2b2tlZCBzdWNjZXNzZnVsbHknLFxyXG4gICAgfSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXHJcbiAgICB9KTtcclxuICB9XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHM7XHJcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsTUFBTUEsTUFBTSxHQUFHQyxPQUFPLENBQUMsUUFBUSxDQUFDO0FBQ2hDLE1BQU1DLFVBQVUsR0FBR0QsT0FBTyxDQUFDLHdCQUF3QixDQUFDO0FBQ3BELE1BQU1FLFlBQVksR0FBR0YsT0FBTyxDQUFDLDBCQUEwQixDQUFDO0FBQ3hELE1BQU1HLFVBQVUsR0FBR0gsT0FBTyxDQUFDLHdCQUF3QixDQUFDO0FBQ3BELE1BQU07RUFDSkksV0FBVztFQUNYQyxVQUFVO0VBQ1ZDLE1BQU07RUFDTkMsV0FBVztFQUNYQyxhQUFhO0VBQ2JDO0FBQ0YsQ0FBQyxHQUFHVCxPQUFPLENBQUMsc0JBQXNCLENBQUM7QUFDbkMsTUFBTTtFQUFFVTtBQUFLLENBQUMsR0FBR1YsT0FBTyxDQUFDLG1CQUFtQixDQUFDOztBQUU3Qzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBVyxPQUFPLENBQUNDLGdCQUFnQixHQUFHLE9BQU9DLEdBQUcsRUFBRUMsR0FBRyxLQUFLO0VBQzdDLElBQUk7SUFDRixNQUFNQyxLQUFLLEdBQUdkLFVBQVUsQ0FBQ1csZ0JBQWdCLENBQUMsQ0FBQztJQUMzQ0UsR0FBRyxDQUFDRSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztNQUNuQkMsT0FBTyxF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