304a21342cf9a34df28c780d43649465
/**
 * Driver GPS Location Tracking Model
 * نموذج تتبع موقع السائق في الوقت الفعلي
 * Phase 30 - GPS Tracking System
 */

const mongoose = require('mongoose');
const GPSLocationSchema = new mongoose.Schema({
  // ===== معلومات السائق والمركبة =====
  driver: {
    type: mongoose.Schema.Types.ObjectId,
    ref: 'Driver',
    required: true
  },
  vehicle: {
    type: mongoose.Schema.Types.ObjectId,
    ref: 'Vehicle',
    required: true
  },
  trip: {
    type: mongoose.Schema.Types.ObjectId,
    ref: 'Trip',
    sparse: true // قد لا تكون هناك رحلة نشطة
  },
  // ===== إحداثيات الموقع =====
  location: {
    type: {
      type: String,
      enum: ['Point'],
      default: 'Point'
    },
    coordinates: {
      type: [Number],
      // [longitude, latitude]
      required: true,
      // الفهرس الجغرافي لعمليات البحث بالقرب من الموقع
      validate: {
        validator: function (arr) {
          return arr.length === 2 && arr[0] >= -180 && arr[0] <= 180 && arr[1] >= -90 && arr[1] <= 90;
        },
        message: 'إحداثيات غير صحيحة'
      }
    }
  },
  // ===== معلومات السرعة والاتجاه =====
  speed: {
    type: Number,
    // بالكيلومتر في الساعة
    default: 0,
    min: 0,
    max: 300
  },
  speedLimitViolation: {
    type: Boolean,
    default: false
  },
  maxSpeedAllowed: {
    type: Number,
    default: 120
  },
  heading: {
    type: Number,
    // الاتجاه بالدرجات (0-360)
    min: 0,
    max: 360
  },
  altitude: Number,
  // الارتفاع بالأمتار

  // ===== جودة الإشارة =====
  accuracy: {
    type: Number,
    // دقة الـ GPS بالأمتار
    default: 0
  },
  satellites: {
    type: Number,
    // عدد الأقمار الصناعية المرئية
    min: 0,
    max: 50
  },
  // ===== حالة المحرك =====
  engineRunning: {
    type: Boolean,
    default: false
  },
  seatbeltStatus: {
    type: String,
    enum: ['fastened', 'unfastened', 'unknown'],
    default: 'unknown'
  },
  doorsLocked: Boolean,
  // ===== البيانات الحسية المتقدمة =====
  acceleration: {
    x: Number,
    // التسارع الجانبي
    y: Number,
    // التسارع الأمامي/الخلفي
    z: Number // التسارع العمودي
  },
  harshAcceleration: Boolean,
  harshBraking: Boolean,
  sharpTurn: Boolean,
  idleTime: Number,
  // وقت التوقف بالثواني

  // ===== حالة الرحلة =====
  drivingStatus: {
    type: String,
    enum: ['stopped', 'idling', 'driving', 'parked'],
    default: 'stopped'
  },
  distanceDriven: {
    type: Number,
    default: 0 // بالكيلومتر
  },
  fuelConsumption: Number,
  // لترات في الساعة

  // ===== التنبيهات والتحذيرات =====
  alerts: [{
    type: {
      type: String,
      enum: ['speeding', 'harsh_acceleration', 'harsh_braking', 'sharp_turn', 'seatbelt_unbuckled', 'drowsy_driving', 'distracted_driving', 'off_route', 'geofence_breach', 'battery_low']
    },
    severity: {
      type: String,
      enum: ['low', 'medium', 'high', 'critical'],
      default: 'medium'
    },
    message: String,
    createdAt: {
      type: Date,
      default: Date.now
    },
    acknowledged: {
      type: Boolean,
      default: false
    },
    acknowledgedAt: Date,
    acknowledgedBy: String
  }],
  // ===== الجيوفنس (الحدود الجغرافية) =====
  geofences: [{
    fenceId: mongoose.Schema.Types.ObjectId,
    status: {
      type: String,
      enum: ['inside', 'outside', 'boundary']
    },
    entryTime: Date,
    exitTime: Date
  }],
  // ===== البيانات التاريخية =====
  previousLocations: [{
    coordinates: [Number],
    timestamp: Date,
    speed: Number
  }],
  // آخر 10 مواقع

  // ===== معالجة البيانات =====
  processed: {
    type: Boolean,
    default: false
  },
  processingNotes: String,
  // ===== البيانات الوصفية =====
  source: {
    type: String,
    enum: ['gps', 'cellular', 'wifi', 'hybrid'],
    default: 'gps'
  },
  deviceModel: String,
  osVersion: String,
  appVersion: String,
  // الوقت
  timestamp: {
    type: Date,
    required: true,
    default: Date.now
  }
}, {
  timestamps: {
    createdAt: 'createdAt',
    updatedAt: 'updatedAt'
  }
});

// ===== INDEXES =====

// فهرس جغرافي لعمليات البحث المكانية
GPSLocationSchema.index({
  'location.coordinates': '2dsphere'
});

// فهرس مركب للسائق والوقت
GPSLocationSchema.index({
  driver: 1,
  timestamp: -1
});

// فهرس للرحلة
GPSLocationSchema.index({
  trip: 1,
  timestamp: -1
});

// فهرس لجودة الإشارة
GPSLocationSchema.index({
  accuracy: 1
});

// ===== VIRTUAL FIELDS =====

/**
 * حساب الموقع بصيغة عددية لسهولة الاستخدام
 */
GPSLocationSchema.virtual('lat').get(function () {
  return this.location?.coordinates?.[1];
});
GPSLocationSchema.virtual('lon').get(function () {
  return this.location?.coordinates?.[0];
});

/**
 * هل الموقع حديث (أقل من دقيقة)
 */
GPSLocationSchema.virtual('isRecent').get(function () {
  const now = Date.now();
  const locTime = this.timestamp?.getTime() || 0;
  return now - locTime < 60000;
});

/**
 * هل هناك انتهاك السرعة
 */
GPSLocationSchema.virtual('isSpeedingViolation').get(function () {
  return this.speed > this.maxSpeedAllowed;
});

// ===== METHODS =====

/**
 * التحقق من وجود تنبيهات نشطة
 */
GPSLocationSchema.methods.hasActiveAlerts = function () {
  return this.alerts.some(alert => !alert.acknowledged);
};

/**
 * الحصول على التنبيهات النشطة
 */
GPSLocationSchema.methods.getActiveAlerts = function () {
  return this.alerts.filter(alert => !alert.acknowledged);
};

/**
 * تأكيد تنبيه
 */
GPSLocationSchema.methods.acknowledgeAlert = async function (alertIndex, acknowledgedBy) {
  if (this.alerts[alertIndex]) {
    this.alerts[alertIndex].acknowledged = true;
    this.alerts[alertIndex].acknowledgedAt = new Date();
    this.alerts[alertIndex].acknowledgedBy = acknowledgedBy;
    await this.save();
  }
};

/**
 * حساب المسافة من موقع آخر (بالكيلومتر)
 */
GPSLocationSchema.methods.getDistanceTo = function (otherLocation) {
  const [lon1, lat1] = this.location.coordinates;
  const [lon2, lat2] = otherLocation.location.coordinates;

  // صيغة Haversine
  const R = 6371; // نصف قطر الأرض بالكيلومتر
  const dLat = (lat2 - lat1) * Math.PI / 180;
  const dLon = (lon2 - lon1) * Math.PI / 180;
  const a = Math.sin(dLat / 2) * Math.sin(dLat / 2) + Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) * Math.sin(dLon / 2) * Math.sin(dLon / 2);
  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
  return R * c;
};

/**
 * إضافة موقع سابق (للتتبع التاريخي)
 */
GPSLocationSchema.methods.addPreviousLocation = function () {
  this.previousLocations.unshift({
    coordinates: this.location.coordinates,
    timestamp: this.timestamp,
    speed: this.speed
  });

  // الاحتفاظ بآخر 10 مواقع فقط
  if (this.previousLocations.length > 10) {
    this.previousLocations.pop();
  }
};

/**
 * حساب الزمن المقضي في الرحلة
 */
GPSLocationSchema.methods.calculateTripDuration = async function () {
  if (!this.trip) return null;
  const Trip = mongoose.model('Trip');
  const tripData = await Trip.findById(this.trip).select('startTime endTime');
  if (tripData && tripData.startTime && tripData.endTime) {
    return (tripData.endTime - tripData.startTime) / (1000 * 60); // بالدقائق
  }
  return null;
};

// ===== STATICS =====

/**
 * الحصول على الموقع الأخير للسائق
 */
GPSLocationSchema.statics.getLatestLocation = async function (driverId) {
  return this.findOne({
    driver: driverId
  }).sort({
    timestamp: -1
  });
};

/**
 * الحصول على جميع المواقع في نطاق زمني
 */
GPSLocationSchema.statics.getLocationsInTimeRange = async function (driverId, startTime, endTime) {
  return this.find({
    driver: driverId,
    timestamp: {
      $gte: new Date(startTime),
      $lte: new Date(endTime)
    }
  }).sort({
    timestamp: -1
  });
};

/**
 * البحث عن سائقين بالقرب من موقع معين
 */
GPSLocationSchema.statics.findNearby = async function (longitude, latitude, maxDistance = 1000) {
  return this.find({
    'location.coordinates': {
      $near: {
        $geometry: {
          type: 'Point',
          coordinates: [longitude, latitude]
        },
        $maxDistance: maxDistance // بالأمتار
      }
    }
  });
};

/**
 * حساب عدد انتهاكات السرعة في فترة
 */
GPSLocationSchema.statics.getSpeedingViolations = async function (driverId, startTime, endTime) {
  return this.countDocuments({
    driver: driverId,
    speedLimitViolation: true,
    timestamp: {
      $gte: new Date(startTime),
      $lte: new Date(endTime)
    }
  });
};

/**
 * الحصول على متوسط السرعة
 */
GPSLocationSchema.statics.getAverageSpeed = async function (driverId, startTime, endTime) {
  const result = await this.aggregate([{
    $match: {
      driver: mongoose.Types.ObjectId.createFromHexString(driverId),
      timestamp: {
        $gte: new Date(startTime),
        $lte: new Date(endTime)
      }
    }
  }, {
    $group: {
      _id: '$driver',
      averageSpeed: {
        $avg: '$speed'
      },
      maxSpeed: {
        $max: '$speed'
      },
      minSpeed: {
        $min: '$speed'
      }
    }
  }]);
  return result[0] || null;
};

// ===== HOOKS =====

// تحديث حالة الرحلة تلقائياً بناءً على السرعة
GPSLocationSchema.pre('save', function (next) {
  if (this.speed === 0) {
    this.drivingStatus = 'stopped';
  } else if (this.speed < 5) {
    this.drivingStatus = 'idling';
  } else {
    this.drivingStatus = 'driving';
  }

  // التحقق من انتهاك السرعة
  if (this.speed > this.maxSpeedAllowed) {
    this.speedLimitViolation = true;
  }
  next();
});
module.exports = mongoose.model('GPSLocation', GPSLocationSchema);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJHUFNMb2NhdGlvblNjaGVtYSIsIlNjaGVtYSIsImRyaXZlciIsInR5cGUiLCJUeXBlcyIsIk9iamVjdElkIiwicmVmIiwicmVxdWlyZWQiLCJ2ZWhpY2xlIiwidHJpcCIsInNwYXJzZSIsImxvY2F0aW9uIiwiU3RyaW5nIiwiZW51bSIsImRlZmF1bHQiLCJjb29yZGluYXRlcyIsIk51bWJlciIsInZhbGlkYXRlIiwidmFsaWRhdG9yIiwiYXJyIiwibGVuZ3RoIiwibWVzc2FnZSIsInNwZWVkIiwibWluIiwibWF4Iiwic3BlZWRMaW1pdFZpb2xhdGlvbiIsIkJvb2xlYW4iLCJtYXhTcGVlZEFsbG93ZWQiLCJoZWFkaW5nIiwiYWx0aXR1ZGUiLCJhY2N1cmFjeSIsInNhdGVsbGl0ZXMiLCJlbmdpbmVSdW5uaW5nIiwic2VhdGJlbHRTdGF0dXMiLCJkb29yc0xvY2tlZCIsImFjY2VsZXJhdGlvbiIsIngiLCJ5IiwieiIsImhhcnNoQWNjZWxlcmF0aW9uIiwiaGFyc2hCcmFraW5nIiwic2hhcnBUdXJuIiwiaWRsZVRpbWUiLCJkcml2aW5nU3RhdHVzIiwiZGlzdGFuY2VEcml2ZW4iLCJmdWVsQ29uc3VtcHRpb24iLCJhbGVydHMiLCJzZXZlcml0eSIsImNyZWF0ZWRBdCIsIkRhdGUiLCJub3ciLCJhY2tub3dsZWRnZWQiLCJhY2tub3dsZWRnZWRBdCIsImFja25vd2xlZGdlZEJ5IiwiZ2VvZmVuY2VzIiwiZmVuY2VJZCIsInN0YXR1cyIsImVudHJ5VGltZSIsImV4aXRUaW1lIiwicHJldmlvdXNMb2NhdGlvbnMiLCJ0aW1lc3RhbXAiLCJwcm9jZXNzZWQiLCJwcm9jZXNzaW5nTm90ZXMiLCJzb3VyY2UiLCJkZXZpY2VNb2RlbCIsIm9zVmVyc2lvbiIsImFwcFZlcnNpb24iLCJ0aW1lc3RhbXBzIiwidXBkYXRlZEF0IiwiaW5kZXgiLCJ2aXJ0dWFsIiwiZ2V0IiwibG9jVGltZSIsImdldFRpbWUiLCJtZXRob2RzIiwiaGFzQWN0aXZlQWxlcnRzIiwic29tZSIsImFsZXJ0IiwiZ2V0QWN0aXZlQWxlcnRzIiwiZmlsdGVyIiwiYWNrbm93bGVkZ2VBbGVydCIsImFsZXJ0SW5kZXgiLCJzYXZlIiwiZ2V0RGlzdGFuY2VUbyIsIm90aGVyTG9jYXRpb24iLCJsb24xIiwibGF0MSIsImxvbjIiLCJsYXQyIiwiUiIsImRMYXQiLCJNYXRoIiwiUEkiLCJkTG9uIiwiYSIsInNpbiIsImNvcyIsImMiLCJhdGFuMiIsInNxcnQiLCJhZGRQcmV2aW91c0xvY2F0aW9uIiwidW5zaGlmdCIsInBvcCIsImNhbGN1bGF0ZVRyaXBEdXJhdGlvbiIsIlRyaXAiLCJtb2RlbCIsInRyaXBEYXRhIiwiZmluZEJ5SWQiLCJzZWxlY3QiLCJzdGFydFRpbWUiLCJlbmRUaW1lIiwic3RhdGljcyIsImdldExhdGVzdExvY2F0aW9uIiwiZHJpdmVySWQiLCJmaW5kT25lIiwic29ydCIsImdldExvY2F0aW9uc0luVGltZVJhbmdlIiwiZmluZCIsIiRndGUiLCIkbHRlIiwiZmluZE5lYXJieSIsImxvbmdpdHVkZSIsImxhdGl0dWRlIiwibWF4RGlzdGFuY2UiLCIkbmVhciIsIiRnZW9tZXRyeSIsIiRtYXhEaXN0YW5jZSIsImdldFNwZWVkaW5nVmlvbGF0aW9ucyIsImNvdW50RG9jdW1lbnRzIiwiZ2V0QXZlcmFnZVNwZWVkIiwicmVzdWx0IiwiYWdncmVnYXRlIiwiJG1hdGNoIiwiY3JlYXRlRnJvbUhleFN0cmluZyIsIiRncm91cCIsIl9pZCIsImF2ZXJhZ2VTcGVlZCIsIiRhdmciLCJtYXhTcGVlZCIsIiRtYXgiLCJtaW5TcGVlZCIsIiRtaW4iLCJwcmUiLCJuZXh0IiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbIkdQU0xvY2F0aW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBEcml2ZXIgR1BTIExvY2F0aW9uIFRyYWNraW5nIE1vZGVsXHJcbiAqINmG2YXZiNiw2Kwg2KrYqtio2Lkg2YXZiNmC2Lkg2KfZhNiz2KfYptmCINmB2Yog2KfZhNmI2YLYqiDYp9mE2YHYudmE2YpcclxuICogUGhhc2UgMzAgLSBHUFMgVHJhY2tpbmcgU3lzdGVtXHJcbiAqL1xyXG5cclxuY29uc3QgbW9uZ29vc2UgPSByZXF1aXJlKCdtb25nb29zZScpO1xyXG5cclxuY29uc3QgR1BTTG9jYXRpb25TY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hKFxyXG4gIHtcclxuICAgIC8vID09PT09INmF2LnZhNmI2YXYp9iqINin2YTYs9in2KbZgiDZiNin2YTZhdix2YPYqNipID09PT09XHJcbiAgICBkcml2ZXI6IHtcclxuICAgICAgdHlwZTogbW9uZ29vc2UuU2NoZW1hLlR5cGVzLk9iamVjdElkLFxyXG4gICAgICByZWY6ICdEcml2ZXInLFxyXG4gICAgICByZXF1aXJlZDogdHJ1ZVxyXG4gICAgfSxcclxuICAgIHZlaGljbGU6IHtcclxuICAgICAgdHlwZTogbW9uZ29vc2UuU2NoZW1hLlR5cGVzLk9iamVjdElkLFxyXG4gICAgICByZWY6ICdWZWhpY2xlJyxcclxuICAgICAgcmVxdWlyZWQ6IHRydWUsXHJcbiAgICB9LFxyXG4gICAgdHJpcDoge1xyXG4gICAgICB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsXHJcbiAgICAgIHJlZjogJ1RyaXAnLFxyXG4gICAgICBzcGFyc2U6IHRydWUsIC8vINmC2K8g2YTYpyDYqtmD2YjZhiDZh9mG2KfZgyDYsdit2YTYqSDZhti02LfYqVxyXG4gICAgfSxcclxuXHJcbiAgICAvLyA9PT09PSDYpdit2K/Yp9ir2YrYp9iqINin2YTZhdmI2YLYuSA9PT09PVxyXG4gICAgbG9jYXRpb246IHtcclxuICAgICAgdHlwZToge1xyXG4gICAgICAgIHR5cGU6IFN0cmluZyxcclxuICAgICAgICBlbnVtOiBbJ1BvaW50J10sXHJcbiAgICAgICAgZGVmYXVsdDogJ1BvaW50JyxcclxuICAgICAgfSxcclxuICAgICAgY29vcmRpbmF0ZXM6IHtcclxuICAgICAgICB0eXBlOiBbTnVtYmVyXSwgLy8gW2xvbmdpdHVkZSwgbGF0aXR1ZGVdXHJcbiAgICAgICAgcmVxdWlyZWQ6IHRydWUsXHJcbiAgICAgICAgLy8g2KfZhNmB2YfYsdizINin2YTYrNi62LHYp9mB2Yog2YTYudmF2YTZitin2Kog2KfZhNio2K3YqyDYqNin2YTZgtix2Kgg2YXZhiDYp9mE2YXZiNmC2LlcclxuICAgICAgICB2YWxpZGF0ZToge1xyXG4gICAgICAgICAgdmFsaWRhdG9yOiBmdW5jdGlvbiAoYXJyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhcnIubGVuZ3RoID09PSAyICYmIGFyclswXSA+PSAtMTgwICYmIGFyclswXSA8PSAxODAgJiYgYXJyWzFdID49IC05MCAmJiBhcnJbMV0gPD0gOTA7XHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgbWVzc2FnZTogJ9il2K3Yr9in2KvZitin2Kog2LrZitixINi12K3Zitit2KknLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0sXHJcbiAgICB9LFxyXG5cclxuICAgIC8vID09PT09INmF2LnZhNmI2YXYp9iqINin2YTYs9ix2LnYqSDZiNin2YTYp9iq2KzYp9mHID09PT09XHJcbiAgICBzcGVlZDoge1xyXG4gICAgICB0eXBlOiBOdW1iZXIsIC8vINio2KfZhNmD2YrZhNmI2YXYqtixINmB2Yog2KfZhNiz2KfYudipXHJcbiAgICAgIGRlZmF1bHQ6IDAsXHJcbiAgICAgIG1pbjogMCxcclxuICAgICAgbWF4OiAzMDAsXHJcbiAgICB9LFxyXG4gICAgc3BlZWRMaW1pdFZpb2xhdGlvbjoge1xyXG4gICAgICB0eXBlOiBCb29sZWFuLFxyXG4gICAgICBkZWZhdWx0OiBmYWxzZSxcclxuICAgIH0sXHJcbiAgICBtYXhTcGVlZEFsbG93ZWQ6IHtcclxuICAgICAgdHlwZTogTnVtYmVyLFxyXG4gICAgICBkZWZhdWx0OiAxMjAsXHJcbiAgICB9LFxyXG4gICAgaGVhZGluZzoge1xyXG4gICAgICB0eXBlOiBOdW1iZXIsIC8vINin2YTYp9iq2KzYp9mHINio2KfZhNiv2LHYrNin2KogKDAtMzYwKVxyXG4gICAgICBtaW46IDAsXHJcbiAgICAgIG1heDogMzYwLFxyXG4gICAgfSxcclxuICAgIGFsdGl0dWRlOiBOdW1iZXIsIC8vINin2YTYp9ix2KrZgdin2Lkg2KjYp9mE2KPZhdiq2KfYsVxyXG5cclxuICAgIC8vID09PT09INis2YjYr9ipINin2YTYpdi02KfYsdipID09PT09XHJcbiAgICBhY2N1cmFjeToge1xyXG4gICAgICB0eXBlOiBOdW1iZXIsIC8vINiv2YLYqSDYp9mE2YAgR1BTINio2KfZhNij2YXYqtin2LFcclxuICAgICAgZGVmYXVsdDogMCxcclxuICAgIH0sXHJcbiAgICBzYXRlbGxpdGVzOiB7XHJcbiAgICAgIHR5cGU6IE51bWJlciwgLy8g2LnYr9ivINin2YTYo9mC2YXYp9ixINin2YTYtdmG2KfYudmK2Kkg2KfZhNmF2LHYptmK2KlcclxuICAgICAgbWluOiAwLFxyXG4gICAgICBtYXg6IDUwLFxyXG4gICAgfSxcclxuXHJcbiAgICAvLyA9PT09PSDYrdin2YTYqSDYp9mE2YXYrdix2YMgPT09PT1cclxuICAgIGVuZ2luZVJ1bm5pbmc6IHtcclxuICAgICAgdHlwZTogQm9vbGVhbixcclxuICAgICAgZGVmYXVsdDogZmFsc2UsXHJcbiAgICB9LFxyXG4gICAgc2VhdGJlbHRTdGF0dXM6IHtcclxuICAgICAgdHlwZTogU3RyaW5nLFxyXG4gICAgICBlbnVtOiBbJ2Zhc3RlbmVkJywgJ3VuZmFzdGVuZWQnLCAndW5rbm93biddLFxyXG4gICAgICBkZWZhdWx0OiAndW5rbm93bicsXHJcbiAgICB9LFxyXG4gICAgZG9vcnNMb2NrZWQ6IEJvb2xlYW4sXHJcblxyXG4gICAgLy8gPT09PT0g2KfZhNio2YrYp9mG2KfYqiDYp9mE2K3Ys9mK2Kkg2KfZhNmF2KrZgtiv2YXYqSA9PT09PVxyXG4gICAgYWNjZWxlcmF0aW9uOiB7XHJcbiAgICAgIHg6IE51bWJlciwgLy8g2KfZhNiq2LPYp9ix2Lkg2KfZhNis2KfZhtio2YpcclxuICAgICAgeTogTnVtYmVyLCAvLyDYp9mE2KrYs9in2LHYuSDYp9mE2KPZhdin2YXZii/Yp9mE2K7ZhNmB2YpcclxuICAgICAgejogTnVtYmVyLCAvLyDYp9mE2KrYs9in2LHYuSDYp9mE2LnZhdmI2K/ZilxyXG4gICAgfSxcclxuICAgIGhhcnNoQWNjZWxlcmF0aW9uOiBCb29sZWFuLFxyXG4gICAgaGFyc2hCcmFraW5nOiBCb29sZWFuLFxyXG4gICAgc2hhcnBUdXJuOiBCb29sZWFuLFxyXG4gICAgaWRsZVRpbWU6IE51bWJlciwgLy8g2YjZgtiqINin2YTYqtmI2YLZgSDYqNin2YTYq9mI2KfZhtmKXHJcblxyXG4gICAgLy8gPT09PT0g2K3Yp9mE2Kkg2KfZhNix2K3ZhNipID09PT09XHJcbiAgICBkcml2aW5nU3RhdHVzOiB7XHJcbiAgICAgIHR5cGU6IFN0cmluZyxcclxuICAgICAgZW51bTogWydzdG9wcGVkJywgJ2lkbGluZycsICdkcml2aW5nJywgJ3BhcmtlZCddLFxyXG4gICAgICBkZWZhdWx0OiAnc3RvcHBlZCcsXHJcbiAgICB9LFxyXG4gICAgZGlzdGFuY2VEcml2ZW46IHtcclxuICAgICAgdHlwZTogTnVtYmVyLFxyXG4gICAgICBkZWZhdWx0OiAwLCAvLyDYqNin2YTZg9mK2YTZiNmF2KrYsVxyXG4gICAgfSxcclxuICAgIGZ1ZWxDb25zdW1wdGlvbjogTnVtYmVyLCAvLyDZhNiq2LHYp9iqINmB2Yog2KfZhNiz2KfYudipXHJcblxyXG4gICAgLy8gPT09PT0g2KfZhNiq2YbYqNmK2YfYp9iqINmI2KfZhNiq2K3YsNmK2LHYp9iqID09PT09XHJcbiAgICBhbGVydHM6IFtcclxuICAgICAge1xyXG4gICAgICAgIHR5cGU6IHtcclxuICAgICAgICAgIHR5cGU6IFN0cmluZyxcclxuICAgICAgICAgIGVudW06IFtcclxuICAgICAgICAgICAgJ3NwZWVkaW5nJyxcclxuICAgICAgICAgICAgJ2hhcnNoX2FjY2VsZXJhdGlvbicsXHJcbiAgICAgICAgICAgICdoYXJzaF9icmFraW5nJyxcclxuICAgICAgICAgICAgJ3NoYXJwX3R1cm4nLFxyXG4gICAgICAgICAgICAnc2VhdGJlbHRfdW5idWNrbGVkJyxcclxuICAgICAgICAgICAgJ2Ryb3dzeV9kcml2aW5nJyxcclxuICAgICAgICAgICAgJ2Rpc3RyYWN0ZWRfZHJpdmluZycsXHJcbiAgICAgICAgICAgICdvZmZfcm91dGUnLFxyXG4gICAgICAgICAgICAnZ2VvZmVuY2VfYnJlYWNoJyxcclxuICAgICAgICAgICAgJ2JhdHRlcnlfbG93JyxcclxuICAgICAgICAgIF0sXHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXZlcml0eToge1xyXG4gICAgICAgICAgdHlwZTogU3RyaW5nLFxyXG4gICAgICAgICAgZW51bTogWydsb3cnLCAnbWVkaXVtJywgJ2hpZ2gnLCAnY3JpdGljYWwnXSxcclxuICAgICAgICAgIGRlZmF1bHQ6ICdtZWRpdW0nLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbWVzc2FnZTogU3RyaW5nLFxyXG4gICAgICAgIGNyZWF0ZWRBdDoge1xyXG4gICAgICAgICAgdHlwZTogRGF0ZSxcclxuICAgICAgICAgIGRlZmF1bHQ6IERhdGUubm93LFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYWNrbm93bGVkZ2VkOiB7XHJcbiAgICAgICAgICB0eXBlOiBCb29sZWFuLFxyXG4gICAgICAgICAgZGVmYXVsdDogZmFsc2UsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBhY2tub3dsZWRnZWRBdDogRGF0ZSxcclxuICAgICAgICBhY2tub3dsZWRnZWRCeTogU3RyaW5nLFxyXG4gICAgICB9LFxyXG4gICAgXSxcclxuXHJcbiAgICAvLyA9PT09PSDYp9mE2KzZitmI2YHZhtizICjYp9mE2K3Yr9mI2K8g2KfZhNis2LrYsdin2YHZitipKSA9PT09PVxyXG4gICAgZ2VvZmVuY2VzOiBbXHJcbiAgICAgIHtcclxuICAgICAgICBmZW5jZUlkOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsXHJcbiAgICAgICAgc3RhdHVzOiB7XHJcbiAgICAgICAgICB0eXBlOiBTdHJpbmcsXHJcbiAgICAgICAgICBlbnVtOiBbJ2luc2lkZScsICdvdXRzaWRlJywgJ2JvdW5kYXJ5J10sXHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnRyeVRpbWU6IERhdGUsXHJcbiAgICAgICAgZXhpdFRpbWU6IERhdGUsXHJcbiAgICAgIH0sXHJcbiAgICBdLFxyXG5cclxuICAgIC8vID09PT09INin2YTYqNmK2KfZhtin2Kog2KfZhNiq2KfYsdmK2K7ZitipID09PT09XHJcbiAgICBwcmV2aW91c0xvY2F0aW9uczogW1xyXG4gICAgICB7XHJcbiAgICAgICAgY29vcmRpbmF0ZXM6IFtOdW1iZXJdLFxyXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZSxcclxuICAgICAgICBzcGVlZDogTnVtYmVyLFxyXG4gICAgICB9LFxyXG4gICAgXSwgLy8g2KLYrtixIDEwINmF2YjYp9mC2LlcclxuXHJcbiAgICAvLyA9PT09PSDZhdi52KfZhNis2Kkg2KfZhNio2YrYp9mG2KfYqiA9PT09PVxyXG4gICAgcHJvY2Vzc2VkOiB7XHJcbiAgICAgIHR5cGU6IEJvb2xlYW4sXHJcbiAgICAgIGRlZmF1bHQ6IGZhbHNlLFxyXG4gICAgfSxcclxuICAgIHByb2Nlc3NpbmdOb3RlczogU3RyaW5nLFxyXG5cclxuICAgIC8vID09PT09INin2YTYqNmK2KfZhtin2Kog2KfZhNmI2LXZgdmK2KkgPT09PT1cclxuICAgIHNvdXJjZToge1xyXG4gICAgICB0eXBlOiBTdHJpbmcsXHJcbiAgICAgIGVudW06IFsnZ3BzJywgJ2NlbGx1bGFyJywgJ3dpZmknLCAnaHlicmlkJ10sXHJcbiAgICAgIGRlZmF1bHQ6ICdncHMnLFxyXG4gICAgfSxcclxuICAgIGRldmljZU1vZGVsOiBTdHJpbmcsXHJcbiAgICBvc1ZlcnNpb246IFN0cmluZyxcclxuICAgIGFwcFZlcnNpb246IFN0cmluZyxcclxuXHJcbiAgICAvLyDYp9mE2YjZgtiqXHJcbiAgICB0aW1lc3RhbXA6IHtcclxuICAgICAgdHlwZTogRGF0ZSxcclxuICAgICAgcmVxdWlyZWQ6IHRydWUsXHJcbiAgICAgIGRlZmF1bHQ6IERhdGUubm93XHJcbiAgICB9LFxyXG4gIH0sXHJcbiAge1xyXG4gICAgdGltZXN0YW1wczoge1xyXG4gICAgICBjcmVhdGVkQXQ6ICdjcmVhdGVkQXQnLFxyXG4gICAgICB1cGRhdGVkQXQ6ICd1cGRhdGVkQXQnLFxyXG4gICAgfSxcclxuICB9XHJcbik7XHJcblxyXG4vLyA9PT09PSBJTkRFWEVTID09PT09XHJcblxyXG4vLyDZgdmH2LHYsyDYrNi62LHYp9mB2Yog2YTYudmF2YTZitin2Kog2KfZhNio2K3YqyDYp9mE2YXZg9in2YbZitipXHJcbkdQU0xvY2F0aW9uU2NoZW1hLmluZGV4KHsgJ2xvY2F0aW9uLmNvb3JkaW5hdGVzJzogJzJkc3BoZXJlJyB9KTtcclxuXHJcbi8vINmB2YfYsdizINmF2LHZg9ioINmE2YTYs9in2KbZgiDZiNin2YTZiNmC2KpcclxuR1BTTG9jYXRpb25TY2hlbWEuaW5kZXgoeyBkcml2ZXI6IDEsIHRpbWVzdGFtcDogLTEgfSk7XHJcblxyXG4vLyDZgdmH2LHYsyDZhNmE2LHYrdmE2KlcclxuR1BTTG9jYXRpb25TY2hlbWEuaW5kZXgoeyB0cmlwOiAxLCB0aW1lc3RhbXA6IC0xIH0pO1xyXG5cclxuLy8g2YHZh9ix2LMg2YTYrNmI2K/YqSDYp9mE2KXYtNin2LHYqVxyXG5HUFNMb2NhdGlvblNjaGVtYS5pbmRleCh7IGFjY3VyYWN5OiAxIH0pO1xyXG5cclxuLy8gPT09PT0gVklSVFVBTCBGSUVMRFMgPT09PT1cclxuXHJcbi8qKlxyXG4gKiDYrdiz2KfYqCDYp9mE2YXZiNmC2Lkg2KjYtdmK2LrYqSDYudiv2K/ZitipINmE2LPZh9mI2YTYqSDYp9mE2KfYs9iq2K7Yr9in2YVcclxuICovXHJcbkdQU0xvY2F0aW9uU2NoZW1hLnZpcnR1YWwoJ2xhdCcpLmdldChmdW5jdGlvbiAoKSB7XHJcbiAgcmV0dXJuIHRoaXMubG9jYXRpb24/LmNvb3JkaW5hdGVzPy5bMV07XHJcbn0pO1xyXG5cclxuR1BTTG9jYXRpb25TY2hlbWEudmlydHVhbCgnbG9uJykuZ2V0KGZ1bmN0aW9uICgpIHtcclxuICByZXR1cm4gdGhpcy5sb2NhdGlvbj8uY29vcmRpbmF0ZXM/LlswXTtcclxufSk7XHJcblxyXG4vKipcclxuICog2YfZhCDYp9mE2YXZiNmC2Lkg2K3Yr9mK2KsgKNij2YLZhCDZhdmGINiv2YLZitmC2KkpXHJcbiAqL1xyXG5HUFNMb2NhdGlvblNjaGVtYS52aXJ0dWFsKCdpc1JlY2VudCcpLmdldChmdW5jdGlvbiAoKSB7XHJcbiAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcclxuICBjb25zdCBsb2NUaW1lID0gdGhpcy50aW1lc3RhbXA/LmdldFRpbWUoKSB8fCAwO1xyXG4gIHJldHVybiBub3cgLSBsb2NUaW1lIDwgNjAwMDA7XHJcbn0pO1xyXG5cclxuLyoqXHJcbiAqINmH2YQg2YfZhtin2YMg2KfZhtiq2YfYp9mDINin2YTYs9ix2LnYqVxyXG4gKi9cclxuR1BTTG9jYXRpb25TY2hlbWEudmlydHVhbCgnaXNTcGVlZGluZ1Zpb2xhdGlvbicpLmdldChmdW5jdGlvbiAoKSB7XHJcbiAgcmV0dXJuIHRoaXMuc3BlZWQgPiB0aGlzLm1heFNwZWVkQWxsb3dlZDtcclxufSk7XHJcblxyXG4vLyA9PT09PSBNRVRIT0RTID09PT09XHJcblxyXG4vKipcclxuICog2KfZhNiq2K3ZgtmCINmF2YYg2YjYrNmI2K8g2KrZhtio2YrZh9in2Kog2YbYtNi32KlcclxuICovXHJcbkdQU0xvY2F0aW9uU2NoZW1hLm1ldGhvZHMuaGFzQWN0aXZlQWxlcnRzID0gZnVuY3Rpb24gKCkge1xyXG4gIHJldHVybiB0aGlzLmFsZXJ0cy5zb21lKChhbGVydCkgPT4gIWFsZXJ0LmFja25vd2xlZGdlZCk7XHJcbn07XHJcblxyXG4vKipcclxuICog2KfZhNit2LXZiNmEINi52YTZiSDYp9mE2KrZhtio2YrZh9in2Kog2KfZhNmG2LTYt9ipXHJcbiAqL1xyXG5HUFNMb2NhdGlvblNjaGVtYS5tZXRob2RzLmdldEFjdGl2ZUFsZXJ0cyA9IGZ1bmN0aW9uICgpIHtcclxuICByZXR1cm4gdGhpcy5hbGVydHMuZmlsdGVyKChhbGVydCkgPT4gIWFsZXJ0LmFja25vd2xlZGdlZCk7XHJcbn07XHJcblxyXG4vKipcclxuICog2KrYo9mD2YrYryDYqtmG2KjZitmHXHJcbiAqL1xyXG5HUFNMb2NhdGlvblNjaGVtYS5tZXRob2RzLmFja25vd2xlZGdlQWxlcnQgPSBhc3luYyBmdW5jdGlvbiAoYWxlcnRJbmRleCwgYWNrbm93bGVkZ2VkQnkpIHtcclxuICBpZiAodGhpcy5hbGVydHNbYWxlcnRJbmRleF0pIHtcclxuICAgIHRoaXMuYWxlcnRzW2FsZXJ0SW5kZXhdLmFja25vd2xlZGdlZCA9IHRydWU7XHJcbiAgICB0aGlzLmFsZXJ0c1thbGVydEluZGV4XS5hY2tub3dsZWRnZWRBdCA9IG5ldyBEYXRlKCk7XHJcbiAgICB0aGlzLmFsZXJ0c1thbGVydEluZGV4XS5hY2tub3dsZWRnZWRCeSA9IGFja25vd2xlZGdlZEJ5O1xyXG4gICAgYXdhaXQgdGhpcy5zYXZlKCk7XHJcbiAgfVxyXG59O1xyXG5cclxuLyoqXHJcbiAqINit2LPYp9ioINin2YTZhdiz2KfZgdipINmF2YYg2YXZiNmC2Lkg2KLYrtixICjYqNin2YTZg9mK2YTZiNmF2KrYsSlcclxuICovXHJcbkdQU0xvY2F0aW9uU2NoZW1hLm1ldGhvZHMuZ2V0RGlzdGFuY2VUbyA9IGZ1bmN0aW9uIChvdGhlckxvY2F0aW9uKSB7XHJcbiAgY29uc3QgW2xvbjEsIGxhdDFdID0gdGhpcy5sb2NhdGlvbi5jb29yZGluYXRlcztcclxuICBjb25zdCBbbG9uMiwgbGF0Ml0gPSBvdGhlckxvY2F0aW9uLmxvY2F0aW9uLmNvb3JkaW5hdGVzO1xyXG5cclxuICAvLyDYtdmK2LrYqSBIYXZlcnNpbmVcclxuICBjb25zdCBSID0gNjM3MTsgLy8g2YbYtdmBINmC2LfYsSDYp9mE2KPYsdi2INio2KfZhNmD2YrZhNmI2YXYqtixXHJcbiAgY29uc3QgZExhdCA9ICgobGF0MiAtIGxhdDEpICogTWF0aC5QSSkgLyAxODA7XHJcbiAgY29uc3QgZExvbiA9ICgobG9uMiAtIGxvbjEpICogTWF0aC5QSSkgLyAxODA7XHJcblxyXG4gIGNvbnN0IGEgPVxyXG4gICAgTWF0aC5zaW4oZExhdCAvIDIpICogTWF0aC5zaW4oZExhdCAvIDIpICtcclxuICAgIE1hdGguY29zKChsYXQxICogTWF0aC5QSSkgLyAxODApICpcclxuICAgIE1hdGguY29zKChsYXQyICogTWF0aC5QSSkgLyAxODApICpcclxuICAgIE1hdGguc2luKGRMb24gLyAyKSAqXHJcbiAgICBNYXRoLnNpbihkTG9uIC8gMik7XHJcblxyXG4gIGNvbnN0IGMgPSAyICogTWF0aC5hdGFuMihNYXRoLnNxcnQoYSksIE1hdGguc3FydCgxIC0gYSkpO1xyXG4gIHJldHVybiBSICogYztcclxufTtcclxuXHJcbi8qKlxyXG4gKiDYpdi22KfZgdipINmF2YjZgti5INiz2KfYqNmCICjZhNmE2KrYqtio2Lkg2KfZhNiq2KfYsdmK2K7ZiilcclxuICovXHJcbkdQU0xvY2F0aW9uU2NoZW1hLm1ldGhvZHMuYWRkUHJldmlvdXNMb2NhdGlvbiA9IGZ1bmN0aW9uICgpIHtcclxuICB0aGlzLnByZXZpb3VzTG9jYXRpb25zLnVuc2hpZnQoe1xyXG4gICAgY29vcmRpbmF0ZXM6IHRoaXMubG9jYXRpb24uY29vcmRpbmF0ZXMsXHJcbiAgICB0aW1lc3RhbXA6IHRoaXMudGltZXN0YW1wLFxyXG4gICAgc3BlZWQ6IHRoaXMuc3BlZWQsXHJcbiAgfSk7XHJcblxyXG4gIC8vINin2YTYp9it2KrZgdin2Lgg2KjYotiu2LEgMTAg2YXZiNin2YLYuSDZgdmC2LdcclxuICBpZiAodGhpcy5wcmV2aW91c0xvY2F0aW9ucy5sZW5ndGggPiAxMCkge1xyXG4gICAgdGhpcy5wcmV2aW91c0xvY2F0aW9ucy5wb3AoKTtcclxuICB9XHJcbn07XHJcblxyXG4vKipcclxuICog2K3Ys9in2Kgg2KfZhNiy2YXZhiDYp9mE2YXZgti22Yog2YHZiiDYp9mE2LHYrdmE2KlcclxuICovXHJcbkdQU0xvY2F0aW9uU2NoZW1hLm1ldGhvZHMuY2FsY3VsYXRlVHJpcER1cmF0aW9uID0gYXN5bmMgZnVuY3Rpb24gKCkge1xyXG4gIGlmICghdGhpcy50cmlwKSByZXR1cm4gbnVsbDtcclxuXHJcbiAgY29uc3QgVHJpcCA9IG1vbmdvb3NlLm1vZGVsKCdUcmlwJyk7XHJcbiAgY29uc3QgdHJpcERhdGEgPSBhd2FpdCBUcmlwLmZpbmRCeUlkKHRoaXMudHJpcCkuc2VsZWN0KCdzdGFydFRpbWUgZW5kVGltZScpO1xyXG5cclxuICBpZiAodHJpcERhdGEgJiYgdHJpcERhdGEuc3RhcnRUaW1lICYmIHRyaXBEYXRhLmVuZFRpbWUpIHtcclxuICAgIHJldHVybiAodHJpcERhdGEuZW5kVGltZSAtIHRyaXBEYXRhLnN0YXJ0VGltZSkgLyAoMTAwMCAqIDYwKTsgLy8g2KjYp9mE2K/Zgtin2KbZglxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIG51bGw7XHJcbn07XHJcblxyXG4vLyA9PT09PSBTVEFUSUNTID09PT09XHJcblxyXG4vKipcclxuICog2KfZhNit2LXZiNmEINi52YTZiSDYp9mE2YXZiNmC2Lkg2KfZhNij2K7ZitixINmE2YTYs9in2KbZglxyXG4gKi9cclxuR1BTTG9jYXRpb25TY2hlbWEuc3RhdGljcy5nZXRMYXRlc3RMb2NhdGlvbiA9IGFzeW5jIGZ1bmN0aW9uIChkcml2ZXJJZCkge1xyXG4gIHJldHVybiB0aGlzLmZpbmRPbmUoeyBkcml2ZXI6IGRyaXZlcklkIH0pLnNvcnQoeyB0aW1lc3RhbXA6IC0xIH0pO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqINin2YTYrdi12YjZhCDYudmE2Ykg2KzZhdmK2Lkg2KfZhNmF2YjYp9mC2Lkg2YHZiiDZhti32KfZgiDYstmF2YbZilxyXG4gKi9cclxuR1BTTG9jYXRpb25TY2hlbWEuc3RhdGljcy5nZXRMb2NhdGlvbnNJblRpbWVSYW5nZSA9IGFzeW5jIGZ1bmN0aW9uIChkcml2ZXJJZCwgc3RhcnRUaW1lLCBlbmRUaW1lKSB7XHJcbiAgcmV0dXJuIHRoaXMuZmluZCh7XHJcbiAgICBkcml2ZXI6IGRyaXZlcklkLFxyXG4gICAgdGltZXN0YW1wOiB7XHJcbiAgICAgICRndGU6IG5ldyBEYXRlKHN0YXJ0VGltZSksXHJcbiAgICAgICRsdGU6IG5ldyBEYXRlKGVuZFRpbWUpLFxyXG4gICAgfSxcclxuICB9KS5zb3J0KHsgdGltZXN0YW1wOiAtMSB9KTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiDYp9mE2KjYrdirINi52YYg2LPYp9im2YLZitmGINio2KfZhNmC2LHYqCDZhdmGINmF2YjZgti5INmF2LnZitmGXHJcbiAqL1xyXG5HUFNMb2NhdGlvblNjaGVtYS5zdGF0aWNzLmZpbmROZWFyYnkgPSBhc3luYyBmdW5jdGlvbiAobG9uZ2l0dWRlLCBsYXRpdHVkZSwgbWF4RGlzdGFuY2UgPSAxMDAwKSB7XHJcbiAgcmV0dXJuIHRoaXMuZmluZCh7XHJcbiAgICAnbG9jYXRpb24uY29vcmRpbmF0ZXMnOiB7XHJcbiAgICAgICRuZWFyOiB7XHJcbiAgICAgICAgJGdlb21ldHJ5OiB7XHJcbiAgICAgICAgICB0eXBlOiAnUG9pbnQnLFxyXG4gICAgICAgICAgY29vcmRpbmF0ZXM6IFtsb25naXR1ZGUsIGxhdGl0dWRlXSxcclxuICAgICAgICB9LFxyXG4gICAgICAgICRtYXhEaXN0YW5jZTogbWF4RGlzdGFuY2UsIC8vINio2KfZhNij2YXYqtin2LFcclxuICAgICAgfSxcclxuICAgIH0sXHJcbiAgfSk7XHJcbn07XHJcblxyXG4vKipcclxuICog2K3Ys9in2Kgg2LnYr9ivINin2YbYqtmH2KfZg9in2Kog2KfZhNiz2LHYudipINmB2Yog2YHYqtix2KlcclxuICovXHJcbkdQU0xvY2F0aW9uU2NoZW1hLnN0YXRpY3MuZ2V0U3BlZWRpbmdWaW9sYXRpb25zID0gYXN5bmMgZnVuY3Rpb24gKGRyaXZlcklkLCBzdGFydFRpbWUsIGVuZFRpbWUpIHtcclxuICByZXR1cm4gdGhpcy5jb3VudERvY3VtZW50cyh7XHJcbiAgICBkcml2ZXI6IGRyaXZlcklkLFxyXG4gICAgc3BlZWRMaW1pdFZpb2xhdGlvbjogdHJ1ZSxcclxuICAgIHRpbWVzdGFtcDoge1xyXG4gICAgICAkZ3RlOiBuZXcgRGF0ZShzdGFydFRpbWUpLFxyXG4gICAgICAkbHRlOiBuZXcgRGF0ZShlbmRUaW1lKSxcclxuICAgIH0sXHJcbiAgfSk7XHJcbn07XHJcblxyXG4vKipcclxuICog2KfZhNit2LXZiNmEINi52YTZiSDZhdiq2YjYs9i3INin2YTYs9ix2LnYqVxyXG4gKi9cclxuR1BTTG9jYXRpb25TY2hlbWEuc3RhdGljcy5nZXRBdmVyYWdlU3BlZWQgPSBhc3luYyBmdW5jdGlvbiAoZHJpdmVySWQsIHN0YXJ0VGltZSwgZW5kVGltZSkge1xyXG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuYWdncmVnYXRlKFtcclxuICAgIHtcclxuICAgICAgJG1hdGNoOiB7XHJcbiAgICAgICAgZHJpdmVyOiBtb25nb29zZS5UeXBlcy5PYmplY3RJZC5jcmVhdGVGcm9tSGV4U3RyaW5nKGRyaXZlcklkKSxcclxuICAgICAgICB0aW1lc3RhbXA6IHtcclxuICAgICAgICAgICRndGU6IG5ldyBEYXRlKHN0YXJ0VGltZSksXHJcbiAgICAgICAgICAkbHRlOiBuZXcgRGF0ZShlbmRUaW1lKSxcclxuICAgICAgICB9LFxyXG4gICAgICB9LFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgJGdyb3VwOiB7XHJcbiAgICAgICAgX2lkOiAnJGRyaXZlcicsXHJcbiAgICAgICAgYXZlcmFnZVNwZWVkOiB7ICRhdmc6ICckc3BlZWQnIH0sXHJcbiAgICAgICAgbWF4U3BlZWQ6IHsgJG1heDogJyRzcGVlZCcgfSxcclxuICAgICAgICBtaW5TcGVlZDogeyAkbWluOiAnJHNwZWVkJyB9LFxyXG4gICAgICB9LFxyXG4gICAgfSxcclxuICBdKTtcclxuXHJcbiAgcmV0dXJuIHJlc3VsdFswXSB8fCBudWxsO1xyXG59O1xyXG5cclxuLy8gPT09PT0gSE9PS1MgPT09PT1cclxuXHJcbi8vINiq2K3Yr9mK2Ksg2K3Yp9mE2Kkg2KfZhNix2K3ZhNipINiq2YTZgtin2KbZitin2Ysg2KjZhtin2KHZiyDYudmE2Ykg2KfZhNiz2LHYudipXHJcbkdQU0xvY2F0aW9uU2NoZW1hLnByZSgnc2F2ZScsIGZ1bmN0aW9uIChuZXh0KSB7XHJcbiAgaWYgKHRoaXMuc3BlZWQgPT09IDApIHtcclxuICAgIHRoaXMuZHJpdmluZ1N0YXR1cyA9ICdzdG9wcGVkJztcclxuICB9IGVsc2UgaWYgKHRoaXMuc3BlZWQgPCA1KSB7XHJcbiAgICB0aGlzLmRyaXZpbmdTdGF0dXMgPSAnaWRsaW5nJztcclxuICB9IGVsc2Uge1xyXG4gICAgdGhpcy5kcml2aW5nU3RhdHVzID0gJ2RyaXZpbmcnO1xyXG4gIH1cclxuXHJcbiAgLy8g2KfZhNiq2K3ZgtmCINmF2YYg2KfZhtiq2YfYp9mDINin2YTYs9ix2LnYqVxyXG4gIGlmICh0aGlzLnNwZWVkID4gdGhpcy5tYXhTcGVlZEFsbG93ZWQpIHtcclxuICAgIHRoaXMuc3BlZWRMaW1pdFZpb2xhdGlvbiA9IHRydWU7XHJcbiAgfVxyXG5cclxuICBuZXh0KCk7XHJcbn0pO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBtb25nb29zZS5tb2RlbCgnR1BTTG9jYXRpb24nLCBHUFNMb2NhdGlvblNjaGVtYSk7XHJcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxNQUFNQSxRQUFRLEdBQUdDLE9BQU8sQ0FBQyxVQUFVLENBQUM7QUFFcEMsTUFBTUMsaUJBQWlCLEdBQUcsSUFBSUYsUUFBUSxDQUFDRyxNQUFNLENBQzNDO0VBQ0U7RUFDQUMsTUFBTSxFQUFFO0lBQ05DLElBQUksRUFBRUwsUUFBUSxDQUFDRyxNQUFNLENBQUNHLEtBQUssQ0FBQ0MsUUFBUTtJQUNwQ0MsR0FBRyxFQUFFLFFBQVE7SUFDYkMsUUFBUSxFQUFFO0VBQ1osQ0FBQztFQUNEQyxPQUFPLEVBQUU7SUFDUEwsSUFBSSxFQUFFTCxRQUFRLENBQUNHLE1BQU0sQ0FBQ0csS0FBSyxDQUFDQyxRQUFRO0lBQ3BDQyxHQUFHLEVBQUUsU0FBUztJQUNk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