{"version":3,"names":["ReportService","reports","generateReport","config","report","id","Date","now","title","type","generatedAt","data","_generateSampleData","charts","_generateCharts","summary","_generateSummary","push","err","Error","message","exportToCSV","headers","Object","keys","rows","forEach","item","map","h","csv","r","join","success","format","content","mimeType","fileName","exportToJSON","JSON","stringify","exportToExcel","status","rowCount","length","getAllReports","limit","slice","deleteReport","reportId","filter","name","department","performance","bonus","color","totalRecords","averagePerformance","topPerformer","totalBonus","toISOString","module","exports"],"sources":["reportService.js"],"sourcesContent":["/**\r\n * Report Service - Generate and Export Reports\r\n */\r\nclass ReportService {\r\n  static reports = [];\r\n\r\n  /**\r\n   * توليد تقرير\r\n   */\r\n  static async generateReport(config) {\r\n    try {\r\n      const report = {\r\n        id: `report_${Date.now()}`,\r\n        title: config.title || 'Report',\r\n        type: config.type || 'general',\r\n        generatedAt: new Date(),\r\n        data: this._generateSampleData(),\r\n        charts: this._generateCharts(),\r\n        summary: this._generateSummary(),\r\n      };\r\n\r\n      this.reports.push(report);\r\n      return report;\r\n    } catch (err) {\r\n      throw new Error(`Report generation failed: ${err.message}`);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * تصدير إلى CSV\r\n   */\r\n  static exportToCSV(report) {\r\n    try {\r\n      const headers = Object.keys(report.data[0] || {});\r\n      const rows = [headers];\r\n\r\n      report.data.forEach(item => {\r\n        rows.push(headers.map(h => item[h]));\r\n      });\r\n\r\n      const csv = rows.map(r => r.join(',')).join('\\n');\r\n\r\n      return {\r\n        success: true,\r\n        format: 'CSV',\r\n        content: csv,\r\n        mimeType: 'text/csv',\r\n        fileName: `${report.title}_${Date.now()}.csv`,\r\n      };\r\n    } catch (err) {\r\n      throw new Error(`CSV export failed: ${err.message}`);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * تصدير إلى JSON\r\n   */\r\n  static exportToJSON(report) {\r\n    try {\r\n      return {\r\n        success: true,\r\n        format: 'JSON',\r\n        content: JSON.stringify(report, null, 2),\r\n        mimeType: 'application/json',\r\n        fileName: `${report.title}_${Date.now()}.json`,\r\n      };\r\n    } catch (err) {\r\n      throw new Error(`JSON export failed: ${err.message}`);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * تصدير إلى Excel (محاكاة)\r\n   */\r\n  static exportToExcel(report) {\r\n    try {\r\n      return {\r\n        success: true,\r\n        format: 'Excel',\r\n        fileName: `${report.title}_${Date.now()}.xlsx`,\r\n        mimeType: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\r\n        status: 'ready_for_download',\r\n        rowCount: report.data.length,\r\n      };\r\n    } catch (err) {\r\n      throw new Error(`Excel export failed: ${err.message}`);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * الحصول على جميع التقارير\r\n   */\r\n  static async getAllReports(limit = 50) {\r\n    return this.reports.slice(-limit);\r\n  }\r\n\r\n  /**\r\n   * حذف تقرير\r\n   */\r\n  static async deleteReport(reportId) {\r\n    this.reports = this.reports.filter(r => r.id !== reportId);\r\n    return { success: true, message: 'Report deleted' };\r\n  }\r\n\r\n  // Helper Methods\r\n  static _generateSampleData() {\r\n    return [\r\n      { name: 'Ali', department: 'Sales', performance: 87, bonus: 5000 },\r\n      { name: 'Sara', department: 'HR', performance: 92, bonus: 6000 },\r\n      { name: 'Omar', department: 'Tech', performance: 78, bonus: 4000 },\r\n      { name: 'Fatima', department: 'Finance', performance: 95, bonus: 7000 },\r\n      { name: 'Ahmed', department: 'Operations', performance: 81, bonus: 4500 },\r\n    ];\r\n  }\r\n\r\n  static _generateCharts() {\r\n    return [\r\n      { type: 'bar', title: 'Performance by Department', color: '#4CAF50' },\r\n      { type: 'line', title: 'Trend Analysis', color: '#2196F3' },\r\n      { type: 'pie', title: 'Budget Distribution', color: '#FF9800' },\r\n    ];\r\n  }\r\n\r\n  static _generateSummary() {\r\n    return {\r\n      totalRecords: 5,\r\n      averagePerformance: 86.6,\r\n      topPerformer: 'Fatima (95%)',\r\n      totalBonus: 26500,\r\n      generatedAt: new Date().toISOString(),\r\n    };\r\n  }\r\n}\r\n\r\nmodule.exports = ReportService;\r\n"],"mappings":"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","ignoreList":[]}