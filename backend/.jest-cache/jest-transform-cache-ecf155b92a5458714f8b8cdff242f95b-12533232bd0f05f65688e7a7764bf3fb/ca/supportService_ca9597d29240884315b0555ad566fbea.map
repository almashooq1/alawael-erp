{"version":3,"names":["SupportService","constructor","tickets","ticketCounter","createTicket","data","ticket","id","Date","now","title","description","priority","category","status","createdBy","userId","createdAt","toISOString","updatedAt","assignedTo","comments","attachments","success","message","getAllTickets","filters","mockTickets","filtered","filter","t","totalCount","length","timestamp","updateTicketStatus","ticketId","newStatus","validStatuses","includes","error","addComment","commentData","comment","author","text","getTicketStats","statistics","totalTickets","openTickets","inProgressTickets","resolvedTickets","closedTickets","averageResolutionTime","averageResponseTime","satisfactionRating","byPriority","critical","high","normal","low","byCategory","technical","feature","performance","general","getFAQ","faq","question","answer","views","getTeamStatus","team","totalAgents","onlineAgents","busyAgents","availableAgents","agents","name","handledTickets","averageWaitTime","totalHandledToday","searchKnowledgeBase","query","articles","content","rating","results","a","toLowerCase","module","exports"],"sources":["supportService.js"],"sourcesContent":["// Technical Support System Service\r\n// نظام الدعم الفني\r\n\r\nclass SupportService {\r\n  constructor() {\r\n    // In-memory storage for tickets\r\n    this.tickets = [];\r\n    this.ticketCounter = 1000;\r\n  }\r\n\r\n  // Create Support Ticket\r\n  static createTicket(data) {\r\n    const ticket = {\r\n      id: `TICKET_${Date.now()}`,\r\n      title: data.title,\r\n      description: data.description,\r\n      priority: data.priority || 'normal', // low, normal, high, critical\r\n      category: data.category || 'general',\r\n      status: 'open',\r\n      createdBy: data.userId || 'user_123',\r\n      createdAt: new Date().toISOString(),\r\n      updatedAt: new Date().toISOString(),\r\n      assignedTo: null,\r\n      comments: [],\r\n      attachments: data.attachments || [],\r\n    };\r\n\r\n    return {\r\n      success: true,\r\n      ticket: ticket,\r\n      message: 'Ticket created successfully',\r\n    };\r\n  }\r\n\r\n  // Get All Tickets\r\n  static getAllTickets(filters = {}) {\r\n    const mockTickets = [\r\n      {\r\n        id: 'TICKET_001',\r\n        title: 'Backend API Error',\r\n        description: 'API returning 500 error',\r\n        priority: 'high',\r\n        category: 'technical',\r\n        status: 'in_progress',\r\n        createdBy: 'user_123',\r\n        createdAt: new Date(Date.now() - 2 * 60000).toISOString(),\r\n        assignedTo: 'support_001',\r\n      },\r\n      {\r\n        id: 'TICKET_002',\r\n        title: 'Feature Request: Export PDF',\r\n        description: 'Add PDF export functionality',\r\n        priority: 'normal',\r\n        category: 'feature',\r\n        status: 'open',\r\n        createdBy: 'user_456',\r\n        createdAt: new Date(Date.now() - 30 * 60000).toISOString(),\r\n        assignedTo: null,\r\n      },\r\n      {\r\n        id: 'TICKET_003',\r\n        title: 'Report Generation Slow',\r\n        description: 'Reports taking too long to generate',\r\n        priority: 'high',\r\n        category: 'performance',\r\n        status: 'resolved',\r\n        createdBy: 'user_789',\r\n        createdAt: new Date(Date.now() - 24 * 60 * 60000).toISOString(),\r\n        assignedTo: 'support_002',\r\n      },\r\n    ];\r\n\r\n    let filtered = mockTickets;\r\n    if (filters.status) {\r\n      filtered = filtered.filter(t => t.status === filters.status);\r\n    }\r\n    if (filters.priority) {\r\n      filtered = filtered.filter(t => t.priority === filters.priority);\r\n    }\r\n\r\n    return {\r\n      success: true,\r\n      tickets: filtered,\r\n      totalCount: filtered.length,\r\n      timestamp: new Date().toISOString(),\r\n    };\r\n  }\r\n\r\n  // Update Ticket Status\r\n  static updateTicketStatus(ticketId, newStatus) {\r\n    const validStatuses = ['open', 'in_progress', 'on_hold', 'resolved', 'closed'];\r\n\r\n    if (!validStatuses.includes(newStatus)) {\r\n      return {\r\n        success: false,\r\n        error: 'Invalid status',\r\n      };\r\n    }\r\n\r\n    return {\r\n      success: true,\r\n      ticket: {\r\n        id: ticketId,\r\n        status: newStatus,\r\n        updatedAt: new Date().toISOString(),\r\n      },\r\n      message: `Ticket status updated to ${newStatus}`,\r\n    };\r\n  }\r\n\r\n  // Add Comment to Ticket\r\n  static addComment(ticketId, commentData) {\r\n    const comment = {\r\n      id: `COMMENT_${Date.now()}`,\r\n      author: commentData.author,\r\n      text: commentData.text,\r\n      createdAt: new Date().toISOString(),\r\n      attachments: commentData.attachments || [],\r\n    };\r\n\r\n    return {\r\n      success: true,\r\n      comment: comment,\r\n      ticketId: ticketId,\r\n      message: 'Comment added successfully',\r\n    };\r\n  }\r\n\r\n  // Get Ticket Statistics\r\n  static getTicketStats() {\r\n    return {\r\n      success: true,\r\n      statistics: {\r\n        totalTickets: 145,\r\n        openTickets: 32,\r\n        inProgressTickets: 18,\r\n        resolvedTickets: 89,\r\n        closedTickets: 6,\r\n        averageResolutionTime: '4.5 hours',\r\n        averageResponseTime: '15 minutes',\r\n        satisfactionRating: 4.6,\r\n        byPriority: {\r\n          critical: 2,\r\n          high: 8,\r\n          normal: 15,\r\n          low: 7,\r\n        },\r\n        byCategory: {\r\n          technical: 28,\r\n          feature: 12,\r\n          performance: 8,\r\n          general: 14,\r\n        },\r\n      },\r\n      timestamp: new Date().toISOString(),\r\n    };\r\n  }\r\n\r\n  // Get FAQ\r\n  static getFAQ() {\r\n    return {\r\n      success: true,\r\n      faq: [\r\n        {\r\n          id: 'faq_001',\r\n          question: 'How do I reset my password?',\r\n          answer:\r\n            'Go to login page and click \"Forgot Password\". Follow the instructions sent to your email.',\r\n          category: 'account',\r\n          views: 234,\r\n        },\r\n        {\r\n          id: 'faq_002',\r\n          question: 'How do I generate a report?',\r\n          answer:\r\n            'Click on Reports tab, select filters, and click \"Generate\". You can export in CSV, JSON, or Excel format.',\r\n          category: 'reports',\r\n          views: 567,\r\n        },\r\n        {\r\n          id: 'faq_003',\r\n          question: 'What is the maximum file size for uploads?',\r\n          answer: 'Maximum file size is 100MB. For larger files, please contact support.',\r\n          category: 'technical',\r\n          views: 123,\r\n        },\r\n        {\r\n          id: 'faq_004',\r\n          question: 'How often are backups performed?',\r\n          answer: 'We perform daily backups at 2:00 AM UTC and weekly full backups on Sundays.',\r\n          category: 'security',\r\n          views: 89,\r\n        },\r\n      ],\r\n      timestamp: new Date().toISOString(),\r\n    };\r\n  }\r\n\r\n  // Get Support Team Status\r\n  static getTeamStatus() {\r\n    return {\r\n      success: true,\r\n      team: {\r\n        totalAgents: 12,\r\n        onlineAgents: 9,\r\n        busyAgents: 5,\r\n        availableAgents: 4,\r\n        agents: [\r\n          { id: 'support_001', name: 'Ahmed', status: 'available', handledTickets: 87 },\r\n          { id: 'support_002', name: 'Fatima', status: 'busy', handledTickets: 156 },\r\n          { id: 'support_003', name: 'Mohammed', status: 'available', handledTickets: 92 },\r\n          { id: 'support_004', name: 'Noor', status: 'break', handledTickets: 45 },\r\n        ],\r\n        averageWaitTime: '3 minutes',\r\n        totalHandledToday: 87,\r\n      },\r\n      timestamp: new Date().toISOString(),\r\n    };\r\n  }\r\n\r\n  // Knowledge Base Search\r\n  static searchKnowledgeBase(query) {\r\n    const articles = [\r\n      {\r\n        id: 'kb_001',\r\n        title: 'Getting Started with ERP System',\r\n        content: 'This guide covers basic setup and configuration...',\r\n        category: 'Getting Started',\r\n        views: 890,\r\n        rating: 4.8,\r\n      },\r\n      {\r\n        id: 'kb_002',\r\n        title: 'API Integration Guide',\r\n        content: 'Complete documentation for API integrations...',\r\n        category: 'Integration',\r\n        views: 456,\r\n        rating: 4.5,\r\n      },\r\n    ];\r\n\r\n    return {\r\n      success: true,\r\n      results: articles.filter(\r\n        a =>\r\n          a.title.toLowerCase().includes(query.toLowerCase()) ||\r\n          a.content.toLowerCase().includes(query.toLowerCase())\r\n      ),\r\n      timestamp: new Date().toISOString(),\r\n    };\r\n  }\r\n}\r\n\r\nmodule.exports = SupportService;\r\n"],"mappings":"AAAA;AACA;;AAEA,MAAMA,cAAc,CAAC;EACnBC,WAAWA,CAAA,EAAG;IACZ;IACA,IAAI,CAACC,OAAO,GAAG,EAAE;IACjB,IAAI,CAACC,aAAa,GAAG,IAAI;EAC3B;;EAEA;EACA,OAAOC,YAAYA,CAACC,IAAI,EAAE;IACxB,MAAMC,MAAM,GAAG;MACbC,EAAE,EAAE,UAAUC,IAAI,CAACC,GAAG,CAAC,CAAC,EAAE;MAC1BC,KAAK,EAAEL,IAAI,CAACK,KAAK;MACjBC,WAAW,EAAEN,IAAI,CAACM,WAAW;MAC7BC,QAAQ,EAAEP,IAAI,CAACO,QAAQ,IAAI,QAAQ;MAAE;MACrCC,QAAQ,EAAER,IAAI,CAACQ,QAAQ,IAAI,SAAS;MACpCC,MAAM,EAAE,MAAM;MACdC,SAAS,EAAEV,IAAI,CAACW,MAAM,IAAI,UAAU;MACpCC,SAAS,EAAE,IAAIT,IAAI,CAAC,CAAC,CAACU,WAAW,CAAC,CAAC;MACnCC,SAAS,EAAE,IAAIX,IAAI,CAAC,CAAC,CAACU,WAAW,CAAC,CAAC;MACnCE,UAAU,EAAE,IAAI;MAChBC,QAAQ,EAAE,EAAE;MACZC,WAAW,EAAEjB,IAAI,CAACiB,WAAW,IAAI;IACnC,CAAC;IAED,OAAO;MACLC,OAAO,EAAE,IAAI;MACbjB,MAAM,EAAEA,MAAM;MACdkB,OAAO,EAAE;IACX,CAAC;EACH;;EAEA;EACA,OAAOC,aAAaA,CAACC,OAAO,GAAG,CAAC,CAAC,EAAE;IACjC,MAAMC,WAAW,GAAG,CAClB;MACEpB,EAAE,EAAE,YAAY;MAChBG,KAAK,EAAE,mBAAmB;MAC1BC,WAAW,EAAE,yBAAyB;MACtCC,QAAQ,EAAE,MAAM;MAChBC,QAAQ,EAAE,WAAW;MACrBC,MAAM,EAAE,aAAa;MACrBC,SAAS,EAAE,UAAU;MACrBE,SAAS,EAAE,IAAIT,IAAI,CAACA,IAAI,CAACC,GAAG,CAAC,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC,CAACS,WAAW,CAAC,CAAC;MACzDE,UAAU,EAAE;IACd,CAAC,EACD;MACEb,EAAE,EAAE,YAAY;MAChBG,KAAK,EAAE,6BAA6B;MACpCC,WAAW,EAAE,8BAA8B;MAC3CC,QAAQ,EAAE,QAAQ;MAClBC,QAAQ,EAAE,SAAS;MACnBC,MAAM,EAAE,MAAM;MACdC,SAAS,EAAE,UAAU;MACrBE,SAAS,EAAE,IAAIT,IAAI,CAACA,IAAI,CAACC,GAAG,CAAC,CAAC,GAAG,EAAE,GAAG,KAAK,CAAC,CAACS,WAAW,CAAC,CAAC;MAC1DE,UAAU,EAAE;IACd,CAAC,EACD;MACEb,EAAE,EAAE,YAAY;MAChBG,KAAK,EAAE,wBAAwB;MAC/BC,WAAW,EAAE,qCAAqC;MAClDC,QAAQ,EAAE,MAAM;MAChBC,QAAQ,EAAE,aAAa;MACvBC,MAAM,EAAE,UAAU;MAClBC,SAAS,EAAE,UAAU;MACrBE,SAAS,EAAE,IAAIT,IAAI,CAACA,IAAI,CAACC,GAAG,CAAC,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,KAAK,CAAC,CAACS,WAAW,CAAC,CAAC;MAC/DE,UAAU,EAAE;IACd,CAAC,CACF;IAED,IAAIQ,QAAQ,GAAGD,WAAW;IAC1B,IAAID,OAAO,CAACZ,MAAM,EAAE;MAClBc,QAAQ,GAAGA,QAAQ,CAACC,MAAM,CAACC,CAAC,IAAIA,CAAC,CAAChB,MAAM,KAAKY,OAAO,CAACZ,MAAM,CAAC;IAC9D;IACA,IAAIY,OAAO,CAACd,QAAQ,EAAE;MACpBgB,QAAQ,GAAGA,QAAQ,CAACC,MAAM,CAACC,CAAC,IAAIA,CAAC,CAAClB,QAAQ,KAAKc,OAAO,CAACd,QAAQ,CAAC;IAClE;IAEA,OAAO;MACLW,OAAO,EAAE,IAAI;MACbrB,OAAO,EAAE0B,QAAQ;MACjBG,UAAU,EAAEH,QAAQ,CAACI,MAAM;MAC3BC,SAAS,EAAE,IAAIzB,IAAI,CAAC,CAAC,CAACU,WAAW,CAAC;IACpC,CAAC;EACH;;EAEA;EACA,OAAOgB,kBAAkBA,CAACC,QAAQ,EAAEC,SAAS,EAAE;IAC7C,MAAMC,aAAa,GAAG,CAAC,MAAM,EAAE,aAAa,EAAE,SAAS,EAAE,UAAU,EAAE,QAAQ,CAAC;IAE9E,IAAI,CAACA,aAAa,CAACC,QAAQ,CAACF,SAAS,CAAC,EAAE;MACtC,OAAO;QACLb,OAAO,EAAE,KAAK;QACdgB,KAAK,EAAE;MACT,CAAC;IACH;IAEA,OAAO;MACLhB,OAAO,EAAE,IAAI;MACbjB,MAAM,EAAE;QACNC,EAAE,EAAE4B,QAAQ;QACZrB,MAAM,EAAEsB,SAAS;QACjBjB,SAAS,EAAE,IAAIX,IAAI,CAAC,CAAC,CAACU,WAAW,CAAC;MACpC,CAAC;MACDM,OAAO,EAAE,4BAA4BY,SAAS;IAChD,CAAC;EACH;;EAEA;EACA,OAAOI,UAAUA,CAACL,QAAQ,EAAEM,WAAW,EAAE;IACvC,MAAMC,OAAO,GAAG;MACdnC,EAAE,EAAE,WAAWC,IAAI,CAACC,GAAG,CAAC,CAAC,EAAE;MAC3BkC,MAAM,EAAEF,WAAW,CAACE,MAAM;MAC1BC,IAAI,EAAEH,WAAW,CAACG,IAAI;MACtB3B,SAAS,EAAE,IAAIT,IAAI,CAAC,CAAC,CAACU,WAAW,CAAC,CAAC;MACnCI,WAAW,EAAEmB,WAAW,CAACnB,WAAW,IAAI;IAC1C,CAAC;IAED,OAAO;MACLC,OAAO,EAAE,IAAI;MACbmB,OAAO,EAAEA,OAAO;MAChBP,QAAQ,EAAEA,QAAQ;MAClBX,OAAO,EAAE;IACX,CAAC;EACH;;EAEA;EACA,OAAOqB,cAAcA,CAAA,EAAG;IACtB,OAAO;MACLtB,OAAO,EAAE,IAAI;MACbuB,UAAU,EAAE;QACVC,YAAY,EAAE,GAAG;QACjBC,WAAW,EAAE,EAAE;QACfC,iBAAiB,EAAE,EAAE;QACrBC,eAAe,EAAE,EAAE;QACnBC,aAAa,EAAE,CAAC;QAChBC,qBAAqB,EAAE,WAAW;QAClCC,mBAAmB,EAAE,YAAY;QACjCC,kBAAkB,EAAE,GAAG;QACvBC,UAAU,EAAE;UACVC,QAAQ,EAAE,CAAC;UACXC,IAAI,EAAE,CAAC;UACPC,MAAM,EAAE,EAAE;UACVC,GAAG,EAAE;QACP,CAAC;QACDC,UAAU,EAAE;UACVC,SAAS,EAAE,EAAE;UACbC,OAAO,EAAE,EAAE;UACXC,WAAW,EAAE,CAAC;UACdC,OAAO,EAAE;QACX;MACF,CAAC;MACD/B,SAAS,EAAE,IAAIzB,IAAI,CAAC,CAAC,CAACU,WAAW,CAAC;IACpC,CAAC;EACH;;EAEA;EACA,OAAO+C,MAAMA,CAAA,EAAG;IACd,OAAO;MACL1C,OAAO,EAAE,IAAI;MACb2C,GAAG,EAAE,CACH;QACE3D,EAAE,EAAE,SAAS;QACb4D,QAAQ,EAAE,6BAA6B;QACvCC,MAAM,EACJ,2FAA2F;QAC7FvD,QAAQ,EAAE,SAAS;QACnBwD,KAAK,EAAE;MACT,CAAC,EACD;QACE9D,EAAE,EAAE,SAAS;QACb4D,QAAQ,EAAE,6BAA6B;QACvCC,MAAM,EACJ,2GAA2G;QAC7GvD,QAAQ,EAAE,SAAS;QACnBwD,KAAK,EAAE;MACT,CAAC,EACD;QACE9D,EAAE,EAAE,SAAS;QACb4D,QAAQ,EAAE,4CAA4C;QACtDC,MAAM,EAAE,uEAAuE;QAC/EvD,QAAQ,EAAE,WAAW;QACrBwD,KAAK,EAAE;MACT,CAAC,EACD;QACE9D,EAAE,EAAE,SAAS;QACb4D,QAAQ,EAAE,kCAAkC;QAC5CC,MAAM,EAAE,6EAA6E;QACrFvD,QAAQ,EAAE,UAAU;QACpBwD,KAAK,EAAE;MACT,CAAC,CACF;MACDpC,SAAS,EAAE,IAAIzB,IAAI,CAAC,CAAC,CAACU,WAAW,CAAC;IACpC,CAAC;EACH;;EAEA;EACA,OAAOoD,aAAaA,CAAA,EAAG;IACrB,OAAO;MACL/C,OAAO,EAAE,IAAI;MACbgD,IAAI,EAAE;QACJC,WAAW,EAAE,EAAE;QACfC,YAAY,EAAE,CAAC;QACfC,UAAU,EAAE,CAAC;QACbC,eAAe,EAAE,CAAC;QAClBC,MAAM,EAAE,CACN;UAAErE,EAAE,EAAE,aAAa;UAAEsE,IAAI,EAAE,OAAO;UAAE/D,MAAM,EAAE,WAAW;UAAEgE,cAAc,EAAE;QAAG,CAAC,EAC7E;UAAEvE,EAAE,EAAE,aAAa;UAAEsE,IAAI,EAAE,QAAQ;UAAE/D,MAAM,EAAE,MAAM;UAAEgE,cAAc,EAAE;QAAI,CAAC,EAC1E;UAAEvE,EAAE,EAAE,aAAa;UAAEsE,IAAI,EAAE,UAAU;UAAE/D,MAAM,EAAE,WAAW;UAAEgE,cAAc,EAAE;QAAG,CAAC,EAChF;UAAEvE,EAAE,EAAE,aAAa;UAAEsE,IAAI,EAAE,MAAM;UAAE/D,MAAM,EAAE,OAAO;UAAEgE,cAAc,EAAE;QAAG,CAAC,CACzE;QACDC,eAAe,EAAE,WAAW;QAC5BC,iBAAiB,EAAE;MACrB,CAAC;MACD/C,SAAS,EAAE,IAAIzB,IAAI,CAAC,CAAC,CAACU,WAAW,CAAC;IACpC,CAAC;EACH;;EAEA;EACA,OAAO+D,mBAAmBA,CAACC,KAAK,EAAE;IAChC,MAAMC,QAAQ,GAAG,CACf;MACE5E,EAAE,EAAE,QAAQ;MACZG,KAAK,EAAE,iCAAiC;MACxC0E,OAAO,EAAE,oDAAoD;MAC7DvE,QAAQ,EAAE,iBAAiB;MAC3BwD,KAAK,EAAE,GAAG;MACVgB,MAAM,EAAE;IACV,CAAC,EACD;MACE9E,EAAE,EAAE,QAAQ;MACZG,KAAK,EAAE,uBAAuB;MAC9B0E,OAAO,EAAE,gDAAgD;MACzDvE,QAAQ,EAAE,aAAa;MACvBwD,KAAK,EAAE,GAAG;MACVgB,MAAM,EAAE;IACV,CAAC,CACF;IAED,OAAO;MACL9D,OAAO,EAAE,IAAI;MACb+D,OAAO,EAAEH,QAAQ,CAACtD,MAAM,CACtB0D,CAAC,IACCA,CAAC,CAAC7E,KAAK,CAAC8E,WAAW,CAAC,CAAC,CAAClD,QAAQ,CAAC4C,KAAK,CAACM,WAAW,CAAC,CAAC,CAAC,IACnDD,CAAC,CAACH,OAAO,CAACI,WAAW,CAAC,CAAC,CAAClD,QAAQ,CAAC4C,KAAK,CAACM,WAAW,CAAC,CAAC,CACxD,CAAC;MACDvD,SAAS,EAAE,IAAIzB,IAAI,CAAC,CAAC,CAACU,WAAW,CAAC;IACpC,CAAC;EACH;AACF;AAEAuE,MAAM,CAACC,OAAO,GAAG1F,cAAc","ignoreList":[]}