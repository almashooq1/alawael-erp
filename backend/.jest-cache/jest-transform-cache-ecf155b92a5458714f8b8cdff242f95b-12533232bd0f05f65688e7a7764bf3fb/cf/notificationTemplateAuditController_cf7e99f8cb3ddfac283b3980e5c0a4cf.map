{"version":3,"names":["NotificationTemplateAudit","require","notificationTemplateAuditController","listByTemplate","req","res","templateId","params","audits","find","template","populate","sort","createdAt","json","success","data","error","status","message","module","exports"],"sources":["notificationTemplateAuditController.js"],"sourcesContent":["// backend/controllers/notificationTemplateAuditController.js\r\nconst NotificationTemplateAudit = require('../models/NotificationTemplateAudit');\r\n\r\nconst notificationTemplateAuditController = {\r\n  // جلب سجل التغييرات لقالب معين\r\n  async listByTemplate(req, res) {\r\n    try {\r\n      const { templateId } = req.params;\r\n      const audits = await NotificationTemplateAudit.find({ template: templateId })\r\n        .populate('performedBy', 'name email')\r\n        .sort({ createdAt: -1 });\r\n      res.json({ success: true, data: audits });\r\n    } catch (error) {\r\n      res.status(500).json({ success: false, message: 'خطأ في جلب سجل التغييرات', error: error.message });\r\n    }\r\n  },\r\n};\r\n\r\nmodule.exports = notificationTemplateAuditController;\r\n"],"mappings":"AAAA;AACA,MAAMA,yBAAyB,GAAGC,OAAO,CAAC,qCAAqC,CAAC;AAEhF,MAAMC,mCAAmC,GAAG;EAC1C;EACA,MAAMC,cAAcA,CAACC,GAAG,EAAEC,GAAG,EAAE;IAC7B,IAAI;MACF,MAAM;QAAEC;MAAW,CAAC,GAAGF,GAAG,CAACG,MAAM;MACjC,MAAMC,MAAM,GAAG,MAAMR,yBAAyB,CAACS,IAAI,CAAC;QAAEC,QAAQ,EAAEJ;MAAW,CAAC,CAAC,CAC1EK,QAAQ,CAAC,aAAa,EAAE,YAAY,CAAC,CACrCC,IAAI,CAAC;QAAEC,SAAS,EAAE,CAAC;MAAE,CAAC,CAAC;MAC1BR,GAAG,CAACS,IAAI,CAAC;QAAEC,OAAO,EAAE,IAAI;QAAEC,IAAI,EAAER;MAAO,CAAC,CAAC;IAC3C,CAAC,CAAC,OAAOS,KAAK,EAAE;MACdZ,GAAG,CAACa,MAAM,CAAC,GAAG,CAAC,CAACJ,IAAI,CAAC;QAAEC,OAAO,EAAE,KAAK;QAAEI,OAAO,EAAE,0BAA0B;QAAEF,KAAK,EAAEA,KAAK,CAACE;MAAQ,CAAC,CAAC;IACrG;EACF;AACF,CAAC;AAEDC,MAAM,CAACC,OAAO,GAAGnB,mCAAmC","ignoreList":[]}