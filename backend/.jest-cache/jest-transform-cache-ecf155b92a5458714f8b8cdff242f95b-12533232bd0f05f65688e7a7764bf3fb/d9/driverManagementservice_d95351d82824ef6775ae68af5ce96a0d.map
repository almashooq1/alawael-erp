{"version":3,"names":["Driver","require","User","Trip","Vehicle","DriverManagementService","calculateSafetyScore","driverId","driver","findById","Error","violations","totalViolations","safetyScore","speedingIncidents","harshBraking","harshAcceleration","distraction","seatbeltViolations","trafficViolations","accidents","Math","max","performance","min","lastAssessmentDate","Date","save","error","message","calculateReliabilityScore","stats","statistics","totalTrips","completionRate","completedTrips","cancellationRate","cancelledTrips","reliabilityScore","attendanceScore","calculateCustomerServiceScore","trips","find","populate","totalRating","ratingCount","forEach","trip","passengers","list","passenger","rating","averageRating","customerServiceScore","averagePassengerRating","calculateFuelEfficiencyScore","length","fuelEfficiencyScore","totalFuelUsed","totalDistance","fuelUsed","distance","fuelEfficiency","calculateMaintenanceScore","vehicles","maintenanceScore","vehicle","maintenanceHistory","lastMaintenanceDate","maintenanceDate","daysSinceLastMaintenance","floor","calculateAttendanceScore","thirtyDaysAgo","setDate","getDate","createdAt","$gte","expectedWorkingDays","schedule","workingDays","daysInMonth","totalExpectedDays","attendanceRate","updateAllPerformanceScores","Promise","all","calculateOverallRating","predictExpiringLicenses","thirtyDaysFromNow","drivers","$lte","map","_id","driverName","fullName","licenseNumber","licenseDetails","expiryDate","daysUntilExpiry","daysUntilLicenseExpiry","predictAbsenceRate","sixtyDaysAgo","absenceDays","absenceRate","predictedAbsenceRate","aiMetrics","round","predictedPerformanceTrend","trainingRecommendations","currentAbsenceRate","trend","predictPerformanceTrend","recentTrips","sort","limit","previousRating","ratingChange","riskFactors","strengths","recommendations","generateComprehensiveReport","absencePrediction","performanceTrend","report","email","personalPhone","status","hireDate","experienceInYears","overallRating","totalHoursWorked","totalKilometersDriven","total","speeding","other","predictions","license","number","type","licenseType","isValid","isLicenseValid","activeCertifications","getActiveCertifications","generatedAt","getDriversNeedingTraining","isActive","$or","$lt","trainingDueDate","training","getTopPerformers","select","module","exports"],"sources":["driverManagement.service.js"],"sourcesContent":["/**\r\n * Driver Management Service - خدمة إدارة السائقين الذكية\r\n * تتضمن التقييم والتنبؤ والتحليل\r\n */\r\n\r\nconst Driver = require('../models/Driver');\r\nconst User = require('../models/User');\r\nconst Trip = require('../models/Trip');\r\nconst Vehicle = require('../models/Vehicle');\r\n\r\nclass DriverManagementService {\r\n  /**\r\n   * حساب درجة الأمان للسائق\r\n   */\r\n  static async calculateSafetyScore(driverId) {\r\n    try {\r\n      const driver = await Driver.findById(driverId);\r\n      if (!driver) throw new Error('Driver not found');\r\n\r\n      const violations = driver.violations;\r\n      const totalViolations = violations.totalViolations || 0;\r\n\r\n      // معادلة حساب درجة الأمان\r\n      let safetyScore = 100;\r\n\r\n      // انخفاض النقاط بناءً على الانتهاكات\r\n      safetyScore -= violations.speedingIncidents * 5;\r\n      safetyScore -= violations.harshBraking * 3;\r\n      safetyScore -= violations.harshAcceleration * 3;\r\n      safetyScore -= violations.distraction * 7;\r\n      safetyScore -= violations.seatbeltViolations * 10;\r\n      safetyScore -= violations.trafficViolations * 6;\r\n      safetyScore -= violations.accidents * 15;\r\n\r\n      // الحد الأدنى 0\r\n      safetyScore = Math.max(0, safetyScore);\r\n\r\n      driver.performance.safetyScore = Math.min(100, safetyScore);\r\n      driver.performance.lastAssessmentDate = new Date();\r\n\r\n      await driver.save();\r\n      return driver.performance.safetyScore;\r\n    } catch (error) {\r\n      throw new Error(`Failed to calculate safety score: ${error.message}`);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * حساب درجة الموثوقية\r\n   */\r\n  static async calculateReliabilityScore(driverId) {\r\n    try {\r\n      const driver = await Driver.findById(driverId);\r\n      if (!driver) throw new Error('Driver not found');\r\n\r\n      const stats = driver.statistics;\r\n      const totalTrips = stats.totalTrips || 1;\r\n\r\n      // نسبة الرحلات المكتملة\r\n      const completionRate = (stats.completedTrips / totalTrips) * 100 || 0;\r\n\r\n      // عدد الرحلات الملغاة\r\n      const cancellationRate = (stats.cancelledTrips / totalTrips) * 100 || 0;\r\n\r\n      // معادلة درجة الموثوقية\r\n      const reliabilityScore =\r\n        completionRate * 0.6 - cancellationRate * 0.4 + (driver.performance.attendanceScore * 0.1 || 0);\r\n\r\n      driver.performance.reliabilityScore = Math.min(100, Math.max(0, reliabilityScore));\r\n\r\n      await driver.save();\r\n      return driver.performance.reliabilityScore;\r\n    } catch (error) {\r\n      throw new Error(`Failed to calculate reliability score: ${error.message}`);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * حساب درجة خدمة العملاء\r\n   */\r\n  static async calculateCustomerServiceScore(driverId) {\r\n    try {\r\n      const driver = await Driver.findById(driverId);\r\n      if (!driver) throw new Error('Driver not found');\r\n\r\n      // الحصول على تقييمات الركاب\r\n      const trips = await Trip.find({ driver: driverId }).populate('passengers.user');\r\n\r\n      let totalRating = 0;\r\n      let ratingCount = 0;\r\n\r\n      trips.forEach((trip) => {\r\n        trip.passengers.list.forEach((passenger) => {\r\n          if (passenger.rating && passenger.rating > 0) {\r\n            totalRating += passenger.rating;\r\n            ratingCount++;\r\n          }\r\n        });\r\n      });\r\n\r\n      const averageRating = ratingCount > 0 ? (totalRating / ratingCount) * 20 : 50;\r\n\r\n      driver.performance.customerServiceScore = Math.min(100, Math.max(0, averageRating));\r\n      driver.statistics.averagePassengerRating = ratingCount > 0 ? totalRating / ratingCount : 0;\r\n\r\n      await driver.save();\r\n      return driver.performance.customerServiceScore;\r\n    } catch (error) {\r\n      throw new Error(`Failed to calculate customer service score: ${error.message}`);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * حساب درجة كفاءة استهلاك الوقود\r\n   */\r\n  static async calculateFuelEfficiencyScore(driverId) {\r\n    try {\r\n      const driver = await Driver.findById(driverId);\r\n      if (!driver) throw new Error('Driver not found');\r\n\r\n      // البيانات المتعلقة باستهلاك الوقود من الرحلات\r\n      const trips = await Trip.find({ driver: driverId });\r\n\r\n      if (trips.length === 0) {\r\n        driver.performance.fuelEfficiencyScore = 100;\r\n        await driver.save();\r\n        return 100;\r\n      }\r\n\r\n      let totalFuelUsed = 0;\r\n      let totalDistance = 0;\r\n\r\n      trips.forEach((trip) => {\r\n        if (trip.fuelUsed) totalFuelUsed += trip.fuelUsed;\r\n        if (trip.distance) totalDistance += trip.distance;\r\n      });\r\n\r\n      const fuelEfficiency = totalDistance > 0 ? (totalDistance / totalFuelUsed) * 5 : 50;\r\n\r\n      driver.performance.fuelEfficiencyScore = Math.min(100, Math.max(0, fuelEfficiency));\r\n\r\n      await driver.save();\r\n      return driver.performance.fuelEfficiencyScore;\r\n    } catch (error) {\r\n      throw new Error(`Failed to calculate fuel efficiency score: ${error.message}`);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * حساب درجة الصيانة\r\n   */\r\n  static async calculateMaintenanceScore(driverId) {\r\n    try {\r\n      const driver = await Driver.findById(driverId);\r\n      if (!driver) throw new Error('Driver not found');\r\n\r\n      const vehicles = await Vehicle.find({ driver: driverId });\r\n\r\n      if (vehicles.length === 0) {\r\n        driver.performance.maintenanceScore = 100;\r\n        await driver.save();\r\n        return 100;\r\n      }\r\n\r\n      let maintenanceScore = 100;\r\n\r\n      vehicles.forEach((vehicle) => {\r\n        if (vehicle.maintenanceHistory && vehicle.maintenanceHistory.length > 0) {\r\n          const lastMaintenanceDate = vehicle.maintenanceHistory[vehicle.maintenanceHistory.length - 1]\r\n            .maintenanceDate;\r\n          const daysSinceLastMaintenance = Math.floor((new Date() - lastMaintenanceDate) / (1000 * 60 * 60 * 24));\r\n\r\n          // إذا مرت أكثر من 90 يوم بدون صيانة، نقلل النقاط\r\n          if (daysSinceLastMaintenance > 90) {\r\n            maintenanceScore -= 10;\r\n          }\r\n        } else {\r\n          // لا توجد سجلات صيانة\r\n          maintenanceScore -= 20;\r\n        }\r\n      });\r\n\r\n      driver.performance.maintenanceScore = Math.min(100, Math.max(0, maintenanceScore));\r\n\r\n      await driver.save();\r\n      return driver.performance.maintenanceScore;\r\n    } catch (error) {\r\n      throw new Error(`Failed to calculate maintenance score: ${error.message}`);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * حساب درجة الحضور\r\n   */\r\n  static async calculateAttendanceScore(driverId) {\r\n    try {\r\n      const driver = await Driver.findById(driverId);\r\n      if (!driver) throw new Error('Driver not found');\r\n\r\n      // آخر 30 يوم\r\n      const thirtyDaysAgo = new Date(new Date().setDate(new Date().getDate() - 30));\r\n\r\n      const trips = await Trip.find({\r\n        driver: driverId,\r\n        createdAt: { $gte: thirtyDaysAgo },\r\n      });\r\n\r\n      // عدد أيام العمل المتوقعة (حسب أيام العمل المجدولة)\r\n      const expectedWorkingDays = driver.schedule?.workingDays?.length || 5;\r\n      const daysInMonth = 30;\r\n      const totalExpectedDays = Math.floor((daysInMonth / 7) * expectedWorkingDays);\r\n\r\n      const attendanceRate = (trips.length / totalExpectedDays) * 100 || 0;\r\n\r\n      driver.performance.attendanceScore = Math.min(100, Math.max(0, attendanceRate));\r\n\r\n      await driver.save();\r\n      return driver.performance.attendanceScore;\r\n    } catch (error) {\r\n      throw new Error(`Failed to calculate attendance score: ${error.message}`);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * تحديث جميع درجات الأداء\r\n   */\r\n  static async updateAllPerformanceScores(driverId) {\r\n    try {\r\n      await Promise.all([\r\n        this.calculateSafetyScore(driverId),\r\n        this.calculateReliabilityScore(driverId),\r\n        this.calculateCustomerServiceScore(driverId),\r\n        this.calculateFuelEfficiencyScore(driverId),\r\n        this.calculateMaintenanceScore(driverId),\r\n        this.calculateAttendanceScore(driverId),\r\n      ]);\r\n\r\n      const driver = await Driver.findById(driverId);\r\n      driver.calculateOverallRating();\r\n      await driver.save();\r\n\r\n      return driver.performance;\r\n    } catch (error) {\r\n      throw new Error(`Failed to update all performance scores: ${error.message}`);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * التنبؤ برخصة القيادة الست تنتهي قريباً\r\n   */\r\n  static async predictExpiringLicenses() {\r\n    try {\r\n      const thirtyDaysFromNow = new Date(new Date().setDate(new Date().getDate() + 30));\r\n\r\n      const drivers = await Driver.find({\r\n        'licenseDetails.expiryDate': {\r\n          $lte: thirtyDaysFromNow,\r\n          $gte: new Date(),\r\n        },\r\n      });\r\n\r\n      return drivers.map((driver) => ({\r\n        driverId: driver._id,\r\n        driverName: driver.fullName,\r\n        licenseNumber: driver.licenseDetails.licenseNumber,\r\n        expiryDate: driver.licenseDetails.expiryDate,\r\n        daysUntilExpiry: driver.daysUntilLicenseExpiry,\r\n      }));\r\n    } catch (error) {\r\n      throw new Error(`Failed to predict expiring licenses: ${error.message}`);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * التنبؤ بمعدل الغياب للسائق\r\n   */\r\n  static async predictAbsenceRate(driverId) {\r\n    try {\r\n      const driver = await Driver.findById(driverId);\r\n      if (!driver) throw new Error('Driver not found');\r\n\r\n      // الحصول على بيانات آخر 60 يوم\r\n      const sixtyDaysAgo = new Date(new Date().setDate(new Date().getDate() - 60));\r\n\r\n      const trips = await Trip.find({\r\n        driver: driverId,\r\n        createdAt: { $gte: sixtyDaysAgo },\r\n      });\r\n\r\n      // عدد أيام العمل المجدولة\r\n      const expectedWorkingDays = Math.floor(60 / 7) * (driver.schedule?.workingDays?.length || 5);\r\n\r\n      // الأيام التي لم يعمل فيها\r\n      const absenceDays = expectedWorkingDays - trips.length;\r\n\r\n      // معدل الغياب\r\n      const absenceRate = (absenceDays / expectedWorkingDays) * 100 || 0;\r\n\r\n      // معادلة التنبؤ (الاتجاه الحالي)\r\n      // إذا كان معدل الغياب أكثر من 20%، فهناك احتمالية عالية للغياب المستقبلي\r\n      const predictedAbsenceRate = Math.min(100, absenceRate * 1.2);\r\n\r\n      driver.aiMetrics.predictedAbsenceRate = Math.round(predictedAbsenceRate);\r\n\r\n      // تحديد الاتجاه\r\n      if (absenceRate > 20) {\r\n        driver.aiMetrics.predictedPerformanceTrend = 'declining';\r\n        driver.aiMetrics.trainingRecommendations = [\r\n          'عقد اجتماع مع السائق لفهم المشاكل',\r\n          'تقديم دعم إضافي',\r\n          'مراقبة الغياب عن كثب',\r\n        ];\r\n      } else {\r\n        driver.aiMetrics.predictedPerformanceTrend = 'stable';\r\n      }\r\n\r\n      await driver.save();\r\n      return {\r\n        driverId: driver._id,\r\n        currentAbsenceRate: absenceRate,\r\n        predictedAbsenceRate: Math.round(predictedAbsenceRate),\r\n        trend: driver.aiMetrics.predictedPerformanceTrend,\r\n      };\r\n    } catch (error) {\r\n      throw new Error(`Failed to predict absence rate: ${error.message}`);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * التنبؤ باتجاه الأداء\r\n   */\r\n  static async predictPerformanceTrend(driverId) {\r\n    try {\r\n      const driver = await Driver.findById(driverId);\r\n      if (!driver) throw new Error('Driver not found');\r\n\r\n      // الحصول على بيانات الأداء من آخر رحلات\r\n      const recentTrips = await Trip.find({ driver: driverId })\r\n        .sort({ createdAt: -1 })\r\n        .limit(10);\r\n\r\n      if (recentTrips.length === 0) {\r\n        return { trend: 'no_data' };\r\n      }\r\n\r\n      // حساب متوسط التقيييمات\r\n      let totalRating = 0;\r\n      let ratingCount = 0;\r\n\r\n      recentTrips.forEach((trip) => {\r\n        trip.passengers.list.forEach((passenger) => {\r\n          if (passenger.rating && passenger.rating > 0) {\r\n            totalRating += passenger.rating;\r\n            ratingCount++;\r\n          }\r\n        });\r\n      });\r\n\r\n      const averageRating = ratingCount > 0 ? totalRating / ratingCount : 0;\r\n\r\n      // مقارنة مع الأداء السابق\r\n      const previousRating = driver.statistics.averagePassengerRating || 0;\r\n      const ratingChange = averageRating - previousRating;\r\n\r\n      let trend = 'stable';\r\n      if (ratingChange > 0.5) {\r\n        trend = 'improving';\r\n      } else if (ratingChange < -0.5) {\r\n        trend = 'declining';\r\n      }\r\n\r\n      driver.aiMetrics.predictedPerformanceTrend = trend;\r\n\r\n      // التوصيات بناءً على الاتجاه\r\n      if (trend === 'declining') {\r\n        driver.aiMetrics.trainingRecommendations = [\r\n          'تدريب على خدمة العملاء',\r\n          'مراجعة قواعد السلامة',\r\n          'اجتماع مع المدير',\r\n        ];\r\n        driver.aiMetrics.riskFactors = ['انخفاض التقييمات', 'تدهور الأداء'];\r\n      } else if (trend === 'improving') {\r\n        driver.aiMetrics.strengths = ['تحسن الأداء', 'ارتفاع التقييمات'];\r\n      }\r\n\r\n      await driver.save();\r\n\r\n      return {\r\n        driverId: driver._id,\r\n        trend,\r\n        averageRating,\r\n        ratingChange,\r\n        recommendations: driver.aiMetrics.trainingRecommendations,\r\n      };\r\n    } catch (error) {\r\n      throw new Error(`Failed to predict performance trend: ${error.message}`);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * إنشاء تقرير شامل للسائق\r\n   */\r\n  static async generateComprehensiveReport(driverId) {\r\n    try {\r\n      const driver = await Driver.findById(driverId).populate('userId', 'name email phone');\r\n\r\n      if (!driver) throw new Error('Driver not found');\r\n\r\n      // تحديث جميع الدرجات\r\n      await this.updateAllPerformanceScores(driverId);\r\n\r\n      // التنبؤات\r\n      const absencePrediction = await this.predictAbsenceRate(driverId);\r\n      const performanceTrend = await this.predictPerformanceTrend(driverId);\r\n\r\n      // جمع البيانات\r\n      const report = {\r\n        driverId: driver._id,\r\n        driverName: driver.fullName,\r\n        email: driver.email,\r\n        personalPhone: driver.personalPhone,\r\n        status: driver.status,\r\n        hireDate: driver.hireDate,\r\n        experienceInYears: driver.experienceInYears,\r\n\r\n        // درجات الأداء\r\n        performance: {\r\n          overallRating: driver.performance.overallRating,\r\n          safetyScore: driver.performance.safetyScore,\r\n          reliabilityScore: driver.performance.reliabilityScore,\r\n          customerServiceScore: driver.performance.customerServiceScore,\r\n          fuelEfficiencyScore: driver.performance.fuelEfficiencyScore,\r\n          maintenanceScore: driver.performance.maintenanceScore,\r\n          attendanceScore: driver.performance.attendanceScore,\r\n        },\r\n\r\n        // الإحصائيات\r\n        statistics: {\r\n          totalTrips: driver.statistics.totalTrips,\r\n          completedTrips: driver.statistics.completedTrips,\r\n          cancelledTrips: driver.statistics.cancelledTrips,\r\n          totalHoursWorked: driver.statistics.totalHoursWorked,\r\n          totalKilometersDriven: driver.statistics.totalKilometersDriven,\r\n          averagePassengerRating: driver.statistics.averagePassengerRating,\r\n        },\r\n\r\n        // الانتهاكات\r\n        violations: {\r\n          total: driver.violations.totalViolations,\r\n          speeding: driver.violations.speedingIncidents,\r\n          accidents: driver.violations.accidents,\r\n          other: driver.violations.totalViolations - driver.violations.speedingIncidents - driver.violations.accidents,\r\n        },\r\n\r\n        // التنبؤات والتوصيات\r\n        predictions: {\r\n          absenceRate: absencePrediction.predictedAbsenceRate,\r\n          performanceTrend: performanceTrend.trend,\r\n          trainingRecommendations: driver.aiMetrics.trainingRecommendations,\r\n          riskFactors: driver.aiMetrics.riskFactors,\r\n          strengths: driver.aiMetrics.strengths,\r\n        },\r\n\r\n        // معلومات الرخصة\r\n        license: {\r\n          number: driver.licenseDetails.licenseNumber,\r\n          type: driver.licenseDetails.licenseType,\r\n          expiryDate: driver.licenseDetails.expiryDate,\r\n          daysUntilExpiry: driver.daysUntilLicenseExpiry,\r\n          isValid: driver.isLicenseValid(),\r\n        },\r\n\r\n        // الشهادات النشطة\r\n        activeCertifications: driver.getActiveCertifications(),\r\n\r\n        generatedAt: new Date(),\r\n      };\r\n\r\n      return report;\r\n    } catch (error) {\r\n      throw new Error(`Failed to generate comprehensive report: ${error.message}`);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * الحصول على قائمة السائقين الذين يحتاجون تدريباً\r\n   */\r\n  static async getDriversNeedingTraining() {\r\n    try {\r\n      const drivers = await Driver.find({\r\n        isActive: true,\r\n        $or: [\r\n          { 'performance.safetyScore': { $lt: 70 } },\r\n          { 'performance.customerServiceScore': { $lt: 70 } },\r\n          { 'training.trainingDueDate': { $lte: new Date() } },\r\n        ],\r\n      }).sort({ 'performance.safetyScore': 1 });\r\n\r\n      return drivers.map((driver) => ({\r\n        driverId: driver._id,\r\n        driverName: driver.fullName,\r\n        safetyScore: driver.performance.safetyScore,\r\n        customerServiceScore: driver.performance.customerServiceScore,\r\n        trainingDueDate: driver.training.trainingDueDate,\r\n        recommendations: driver.aiMetrics.trainingRecommendations,\r\n      }));\r\n    } catch (error) {\r\n      throw new Error(`Failed to get drivers needing training: ${error.message}`);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * الحصول على أفضل السائقين\r\n   */\r\n  static async getTopPerformers(limit = 10) {\r\n    try {\r\n      const drivers = await Driver.find({ isActive: true })\r\n        .sort({ 'performance.overallRating': -1 })\r\n        .limit(limit)\r\n        .select('firstName lastName performance statistics aiMetrics');\r\n\r\n      return drivers;\r\n    } catch (error) {\r\n      throw new Error(`Failed to get top performers: ${error.message}`);\r\n    }\r\n  }\r\n}\r\n\r\nmodule.exports = DriverManagementService;\r\n"],"mappings":"AAAA;AACA;AACA;AACA;;AAEA,MAAMA,MAAM,GAAGC,OAAO,CAAC,kBAAkB,CAAC;AAC1C,MAAMC,IAAI,GAAGD,OAAO,CAAC,gBAAgB,CAAC;AACtC,MAAME,IAAI,GAAGF,OAAO,CAAC,gBAAgB,CAAC;AACtC,MAAMG,OAAO,GAAGH,OAAO,CAAC,mBAAmB,CAAC;AAE5C,MAAMI,uBAAuB,CAAC;EAC5B;AACF;AACA;EACE,aAAaC,oBAAoBA,CAACC,QAAQ,EAAE;IAC1C,IAAI;MACF,MAAMC,MAAM,GAAG,MAAMR,MAAM,CAACS,QAAQ,CAACF,QAAQ,CAAC;MAC9C,IAAI,CAACC,MAAM,EAAE,MAAM,IAAIE,KAAK,CAAC,kBAAkB,CAAC;MAEhD,MAAMC,UAAU,GAAGH,MAAM,CAACG,UAAU;MACpC,MAAMC,eAAe,GAAGD,UAAU,CAACC,eAAe,IAAI,CAAC;;MAEvD;MACA,IAAIC,WAAW,GAAG,GAAG;;MAErB;MACAA,WAAW,IAAIF,UAAU,CAACG,iBAAiB,GAAG,CAAC;MAC/CD,WAAW,IAAIF,UAAU,CAACI,YAAY,GAAG,CAAC;MAC1CF,WAAW,IAAIF,UAAU,CAACK,iBAAiB,GAAG,CAAC;MAC/CH,WAAW,IAAIF,UAAU,CAACM,WAAW,GAAG,CAAC;MACzCJ,WAAW,IAAIF,UAAU,CAACO,kBAAkB,GAAG,EAAE;MACjDL,WAAW,IAAIF,UAAU,CAACQ,iBAAiB,GAAG,CAAC;MAC/CN,WAAW,IAAIF,UAAU,CAACS,SAAS,GAAG,EAAE;;MAExC;MACAP,WAAW,GAAGQ,IAAI,CAACC,GAAG,CAAC,CAAC,EAAET,WAAW,CAAC;MAEtCL,MAAM,CAACe,WAAW,CAACV,WAAW,GAAGQ,IAAI,CAACG,GAAG,CAAC,GAAG,EAAEX,WAAW,CAAC;MAC3DL,MAAM,CAACe,WAAW,CAACE,kBAAkB,GAAG,IAAIC,IAAI,CAAC,CAAC;MAElD,MAAMlB,MAAM,CAACmB,IAAI,CAAC,CAAC;MACnB,OAAOnB,MAAM,CAACe,WAAW,CAACV,WAAW;IACvC,CAAC,CAAC,OAAOe,KAAK,EAAE;MACd,MAAM,IAAIlB,KAAK,CAAC,qCAAqCkB,KAAK,CAACC,OAAO,EAAE,CAAC;IACvE;EACF;;EAEA;AACF;AACA;EACE,aAAaC,yBAAyBA,CAACvB,QAAQ,EAAE;IAC/C,IAAI;MACF,MAAMC,MAAM,GAAG,MAAMR,MAAM,CAACS,QAAQ,CAACF,QAAQ,CAAC;MAC9C,IAAI,CAACC,MAAM,EAAE,MAAM,IAAIE,KAAK,CAAC,kBAAkB,CAAC;MAEhD,MAAMqB,KAAK,GAAGvB,MAAM,CAACwB,UAAU;MAC/B,MAAMC,UAAU,GAAGF,KAAK,CAACE,UAAU,IAAI,CAAC;;MAExC;MACA,MAAMC,cAAc,GAAIH,KAAK,CAACI,cAAc,GAAGF,UAAU,GAAI,GAAG,IAAI,CAAC;;MAErE;MACA,MAAMG,gBAAgB,GAAIL,KAAK,CAACM,cAAc,GAAGJ,UAAU,GAAI,GAAG,IAAI,CAAC;;MAEvE;MACA,MAAMK,gBAAgB,GACpBJ,cAAc,GAAG,GAAG,GAAGE,gBAAgB,GAAG,GAAG,IAAI5B,MAAM,CAACe,WAAW,CAACgB,eAAe,GAAG,GAAG,IAAI,CAAC,CAAC;MAEjG/B,MAAM,CAACe,WAAW,CAACe,gBAAgB,GAAGjB,IAAI,CAACG,GAAG,CAAC,GAAG,EAAEH,IAAI,CAACC,GAAG,CAAC,CAAC,EAAEgB,gBAAgB,CAAC,CAAC;MAElF,MAAM9B,MAAM,CAACmB,IAAI,CAAC,CAAC;MACnB,OAAOnB,MAAM,CAACe,WAAW,CAACe,gBAAgB;IAC5C,CAAC,CAAC,OAAOV,KAAK,EAAE;MACd,MAAM,IAAIlB,KAAK,CAAC,0CAA0CkB,KAAK,CAACC,OAAO,EAAE,CAAC;IAC5E;EACF;;EAEA;AACF;AACA;EACE,aAAaW,6BAA6BA,CAACjC,QAAQ,EAAE;IACnD,IAAI;MACF,MAAMC,MAAM,GAAG,MAAMR,MAAM,CAACS,QAAQ,CAACF,QAAQ,CAAC;MAC9C,IAAI,CAACC,MAAM,EAAE,MAAM,IAAIE,KAAK,CAAC,kBAAkB,CAAC;;MAEhD;MACA,MAAM+B,KAAK,GAAG,MAAMtC,IAAI,CAACuC,IAAI,CAAC;QAAElC,MAAM,EAAED;MAAS,CAAC,CAAC,CAACoC,QAAQ,CAAC,iBAAiB,CAAC;MAE/E,IAAIC,WAAW,GAAG,CAAC;MACnB,IAAIC,WAAW,GAAG,CAAC;MAEnBJ,KAAK,CAACK,OAAO,CAAEC,IAAI,IAAK;QACtBA,IAAI,CAACC,UAAU,CAACC,IAAI,CAACH,OAAO,CAAEI,SAAS,IAAK;UAC1C,IAAIA,SAAS,CAACC,MAAM,IAAID,SAAS,CAACC,MAAM,GAAG,CAAC,EAAE;YAC5CP,WAAW,IAAIM,SAAS,CAACC,MAAM;YAC/BN,WAAW,EAAE;UACf;QACF,CAAC,CAAC;MACJ,CAAC,CAAC;MAEF,MAAMO,aAAa,GAAGP,WAAW,GAAG,CAAC,GAAID,WAAW,GAAGC,WAAW,GAAI,EAAE,GAAG,EAAE;MAE7ErC,MAAM,CAACe,WAAW,CAAC8B,oBAAoB,GAAGhC,IAAI,CAACG,GAAG,CAAC,GAAG,EAAEH,IAAI,CAACC,GAAG,CAAC,CAAC,EAAE8B,aAAa,CAAC,CAAC;MACnF5C,MAAM,CAACwB,UAAU,CAACsB,sBAAsB,GAAGT,WAAW,GAAG,CAAC,GAAGD,WAAW,GAAGC,WAAW,GAAG,CAAC;MAE1F,MAAMrC,MAAM,CAACmB,IAAI,CAAC,CAAC;MACnB,OAAOnB,MAAM,CAACe,WAAW,CAAC8B,oBAAoB;IAChD,CAAC,CAAC,OAAOzB,KAAK,EAAE;MACd,MAAM,IAAIlB,KAAK,CAAC,+CAA+CkB,KAAK,CAACC,OAAO,EAAE,CAAC;IACjF;EACF;;EAEA;AACF;AACA;EACE,aAAa0B,4BAA4BA,CAAChD,QAAQ,EAAE;IAClD,IAAI;MACF,MAAMC,MAAM,GAAG,MAAMR,MAAM,CAACS,QAAQ,CAACF,QAAQ,CAAC;MAC9C,IAAI,CAACC,MAAM,EAAE,MAAM,IAAIE,KAAK,CAAC,kBAAkB,CAAC;;MAEhD;MACA,MAAM+B,KAAK,GAAG,MAAMtC,IAAI,CAACuC,IAAI,CAAC;QAAElC,MAAM,EAAED;MAAS,CAAC,CAAC;MAEnD,IAAIkC,KAAK,CAACe,MAAM,KAAK,CAAC,EAAE;QACtBhD,MAAM,CAACe,WAAW,CAACkC,mBAAmB,GAAG,GAAG;QAC5C,MAAMjD,MAAM,CAACmB,IAAI,CAAC,CAAC;QACnB,OAAO,GAAG;MACZ;MAEA,IAAI+B,aAAa,GAAG,CAAC;MACrB,IAAIC,aAAa,GAAG,CAAC;MAErBlB,KAAK,CAACK,OAAO,CAAEC,IAAI,IAAK;QACtB,IAAIA,IAAI,CAACa,QAAQ,EAAEF,aAAa,IAAIX,IAAI,CAACa,QAAQ;QACjD,IAAIb,IAAI,CAACc,QAAQ,EAAEF,aAAa,IAAIZ,IAAI,CAACc,QAAQ;MACnD,CAAC,CAAC;MAEF,MAAMC,cAAc,GAAGH,aAAa,GAAG,CAAC,GAAIA,aAAa,GAAGD,aAAa,GAAI,CAAC,GAAG,EAAE;MAEnFlD,MAAM,CAACe,WAAW,CAACkC,mBAAmB,GAAGpC,IAAI,CAACG,GAAG,CAAC,GAAG,EAAEH,IAAI,CAACC,GAAG,CAAC,CAAC,EAAEwC,cAAc,CAAC,CAAC;MAEnF,MAAMtD,MAAM,CAACmB,IAAI,CAAC,CAAC;MACnB,OAAOnB,MAAM,CAACe,WAAW,CAACkC,mBAAmB;IAC/C,CAAC,CAAC,OAAO7B,KAAK,EAAE;MACd,MAAM,IAAIlB,KAAK,CAAC,8CAA8CkB,KAAK,CAACC,OAAO,EAAE,CAAC;IAChF;EACF;;EAEA;AACF;AACA;EACE,aAAakC,yBAAyBA,CAACxD,QAAQ,EAAE;IAC/C,IAAI;MACF,MAAMC,MAAM,GAAG,MAAMR,MAAM,CAACS,QAAQ,CAACF,QAAQ,CAAC;MAC9C,IAAI,CAACC,MAAM,EAAE,MAAM,IAAIE,KAAK,CAAC,kBAAkB,CAAC;MAEhD,MAAMsD,QAAQ,GAAG,MAAM5D,OAAO,CAACsC,IAAI,CAAC;QAAElC,MAAM,EAAED;MAAS,CAAC,CAAC;MAEzD,IAAIyD,QAAQ,CAACR,MAAM,KAAK,CAAC,EAAE;QACzBhD,MAAM,CAACe,WAAW,CAAC0C,gBAAgB,GAAG,GAAG;QACzC,MAAMzD,MAAM,CAACmB,IAAI,CAAC,CAAC;QACnB,OAAO,GAAG;MACZ;MAEA,IAAIsC,gBAAgB,GAAG,GAAG;MAE1BD,QAAQ,CAAClB,OAAO,CAAEoB,OAAO,IAAK;QAC5B,IAAIA,OAAO,CAACC,kBAAkB,IAAID,OAAO,CAACC,kBAAkB,CAACX,MAAM,GAAG,CAAC,EAAE;UACvE,MAAMY,mBAAmB,GAAGF,OAAO,CAACC,kBAAkB,CAACD,OAAO,CAACC,kBAAkB,CAACX,MAAM,GAAG,CAAC,CAAC,CAC1Fa,eAAe;UAClB,MAAMC,wBAAwB,GAAGjD,IAAI,CAACkD,KAAK,CAAC,CAAC,IAAI7C,IAAI,CAAC,CAAC,GAAG0C,mBAAmB,KAAK,IAAI,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,CAAC;;UAEvG;UACA,IAAIE,wBAAwB,GAAG,EAAE,EAAE;YACjCL,gBAAgB,IAAI,EAAE;UACxB;QACF,CAAC,MAAM;UACL;UACAA,gBAAgB,IAAI,EAAE;QACxB;MACF,CAAC,CAAC;MAEFzD,MAAM,CAACe,WAAW,CAAC0C,gBAAgB,GAAG5C,IAAI,CAACG,GAAG,CAAC,GAAG,EAAEH,IAAI,CAACC,GAAG,CAAC,CAAC,EAAE2C,gBAAgB,CAAC,CAAC;MAElF,MAAMzD,MAAM,CAACmB,IAAI,CAAC,CAAC;MACnB,OAAOnB,MAAM,CAACe,WAAW,CAAC0C,gBAAgB;IAC5C,CAAC,CAAC,OAAOrC,KAAK,EAAE;MACd,MAAM,IAAIlB,KAAK,CAAC,0CAA0CkB,KAAK,CAACC,OAAO,EAAE,CAAC;IAC5E;EACF;;EAEA;AACF;AACA;EACE,aAAa2C,wBAAwBA,CAACjE,QAAQ,EAAE;IAC9C,IAAI;MACF,MAAMC,MAAM,GAAG,MAAMR,MAAM,CAACS,QAAQ,CAACF,QAAQ,CAAC;MAC9C,IAAI,CAACC,MAAM,EAAE,MAAM,IAAIE,KAAK,CAAC,kBAAkB,CAAC;;MAEhD;MACA,MAAM+D,aAAa,GAAG,IAAI/C,IAAI,CAAC,IAAIA,IAAI,CAAC,CAAC,CAACgD,OAAO,CAAC,IAAIhD,IAAI,CAAC,CAAC,CAACiD,OAAO,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;MAE7E,MAAMlC,KAAK,GAAG,MAAMtC,IAAI,CAACuC,IAAI,CAAC;QAC5BlC,MAAM,EAAED,QAAQ;QAChBqE,SAAS,EAAE;UAAEC,IAAI,EAAEJ;QAAc;MACnC,CAAC,CAAC;;MAEF;MACA,MAAMK,mBAAmB,GAAGtE,MAAM,CAACuE,QAAQ,EAAEC,WAAW,EAAExB,MAAM,IAAI,CAAC;MACrE,MAAMyB,WAAW,GAAG,EAAE;MACtB,MAAMC,iBAAiB,GAAG7D,IAAI,CAACkD,KAAK,CAAEU,WAAW,GAAG,CAAC,GAAIH,mBAAmB,CAAC;MAE7E,MAAMK,cAAc,GAAI1C,KAAK,CAACe,MAAM,GAAG0B,iBAAiB,GAAI,GAAG,IAAI,CAAC;MAEpE1E,MAAM,CAACe,WAAW,CAACgB,eAAe,GAAGlB,IAAI,CAACG,GAAG,CAAC,GAAG,EAAEH,IAAI,CAACC,GAAG,CAAC,CAAC,EAAE6D,cAAc,CAAC,CAAC;MAE/E,MAAM3E,MAAM,CAACmB,IAAI,CAAC,CAAC;MACnB,OAAOnB,MAAM,CAACe,WAAW,CAACgB,eAAe;IAC3C,CAAC,CAAC,OAAOX,KAAK,EAAE;MACd,MAAM,IAAIlB,KAAK,CAAC,yCAAyCkB,KAAK,CAACC,OAAO,EAAE,CAAC;IAC3E;EACF;;EAEA;AACF;AACA;EACE,aAAauD,0BAA0BA,CAAC7E,QAAQ,EAAE;IAChD,IAAI;MACF,MAAM8E,OAAO,CAACC,GAAG,CAAC,CAChB,IAAI,CAAChF,oBAAoB,CAACC,QAAQ,CAAC,EACnC,IAAI,CAACuB,yBAAyB,CAACvB,QAAQ,CAAC,EACxC,IAAI,CAACiC,6BAA6B,CAACjC,QAAQ,CAAC,EAC5C,IAAI,CAACgD,4BAA4B,CAAChD,QAAQ,CAAC,EAC3C,IAAI,CAACwD,yBAAyB,CAACxD,QAAQ,CAAC,EACxC,IAAI,CAACiE,wBAAwB,CAACjE,QAAQ,CAAC,CACxC,CAAC;MAEF,MAAMC,MAAM,GAAG,MAAMR,MAAM,CAACS,QAAQ,CAACF,QAAQ,CAAC;MAC9CC,MAAM,CAAC+E,sBAAsB,CAAC,CAAC;MAC/B,MAAM/E,MAAM,CAACmB,IAAI,CAAC,CAAC;MAEnB,OAAOnB,MAAM,CAACe,WAAW;IAC3B,CAAC,CAAC,OAAOK,KAAK,EAAE;MACd,MAAM,IAAIlB,KAAK,CAAC,4CAA4CkB,KAAK,CAACC,OAAO,EAAE,CAAC;IAC9E;EACF;;EAEA;AACF;AACA;EACE,aAAa2D,uBAAuBA,CAAA,EAAG;IACrC,IAAI;MACF,MAAMC,iBAAiB,GAAG,IAAI/D,IAAI,CAAC,IAAIA,IAAI,CAAC,CAAC,CAACgD,OAAO,CAAC,IAAIhD,IAAI,CAAC,CAAC,CAACiD,OAAO,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;MAEjF,MAAMe,OAAO,GAAG,MAAM1F,MAAM,CAAC0C,IAAI,CAAC;QAChC,2BAA2B,EAAE;UAC3BiD,IAAI,EAAEF,iBAAiB;UACvBZ,IAAI,EAAE,IAAInD,IAAI,CAAC;QACjB;MACF,CAAC,CAAC;MAEF,OAAOgE,OAAO,CAACE,GAAG,CAAEpF,MAAM,KAAM;QAC9BD,QAAQ,EAAEC,MAAM,CAACqF,GAAG;QACpBC,UAAU,EAAEtF,MAAM,CAACuF,QAAQ;QAC3BC,aAAa,EAAExF,MAAM,CAACyF,cAAc,CAACD,aAAa;QAClDE,UAAU,EAAE1F,MAAM,CAACyF,cAAc,CAACC,UAAU;QAC5CC,eAAe,EAAE3F,MAAM,CAAC4F;MAC1B,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,OAAOxE,KAAK,EAAE;MACd,MAAM,IAAIlB,KAAK,CAAC,wCAAwCkB,KAAK,CAACC,OAAO,EAAE,CAAC;IAC1E;EACF;;EAEA;AACF;AACA;EACE,aAAawE,kBAAkBA,CAAC9F,QAAQ,EAAE;IACxC,IAAI;MACF,MAAMC,MAAM,GAAG,MAAMR,MAAM,CAACS,QAAQ,CAACF,QAAQ,CAAC;MAC9C,IAAI,CAACC,MAAM,EAAE,MAAM,IAAIE,KAAK,CAAC,kBAAkB,CAAC;;MAEhD;MACA,MAAM4F,YAAY,GAAG,IAAI5E,IAAI,CAAC,IAAIA,IAAI,CAAC,CAAC,CAACgD,OAAO,CAAC,IAAIhD,IAAI,CAAC,CAAC,CAACiD,OAAO,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;MAE5E,MAAMlC,KAAK,GAAG,MAAMtC,IAAI,CAACuC,IAAI,CAAC;QAC5BlC,MAAM,EAAED,QAAQ;QAChBqE,SAAS,EAAE;UAAEC,IAAI,EAAEyB;QAAa;MAClC,CAAC,CAAC;;MAEF;MACA,MAAMxB,mBAAmB,GAAGzD,IAAI,CAACkD,KAAK,CAAC,EAAE,GAAG,CAAC,CAAC,IAAI/D,MAAM,CAACuE,QAAQ,EAAEC,WAAW,EAAExB,MAAM,IAAI,CAAC,CAAC;;MAE5F;MACA,MAAM+C,WAAW,GAAGzB,mBAAmB,GAAGrC,KAAK,CAACe,MAAM;;MAEtD;MACA,MAAMgD,WAAW,GAAID,WAAW,GAAGzB,mBAAmB,GAAI,GAAG,IAAI,CAAC;;MAElE;MACA;MACA,MAAM2B,oBAAoB,GAAGpF,IAAI,CAACG,GAAG,CAAC,GAAG,EAAEgF,WAAW,GAAG,GAAG,CAAC;MAE7DhG,MAAM,CAACkG,SAAS,CAACD,oBAAoB,GAAGpF,IAAI,CAACsF,KAAK,CAACF,oBAAoB,CAAC;;MAExE;MACA,IAAID,WAAW,GAAG,EAAE,EAAE;QACpBhG,MAAM,CAACkG,SAAS,CAACE,yBAAyB,GAAG,WAAW;QACxDpG,MAAM,CAACkG,SAAS,CAACG,uBAAuB,GAAG,CACzC,mCAAmC,EACnC,iBAAiB,EACjB,sBAAsB,CACvB;MACH,CAAC,MAAM;QACLrG,MAAM,CAACkG,SAAS,CAACE,yBAAyB,GAAG,QAAQ;MACvD;MAEA,MAAMpG,MAAM,CAACmB,IAAI,CAAC,CAAC;MACnB,OAAO;QACLpB,QAAQ,EAAEC,MAAM,CAACqF,GAAG;QACpBiB,kBAAkB,EAAEN,WAAW;QAC/BC,oBAAoB,EAAEpF,IAAI,CAACsF,KAAK,CAACF,oBAAoB,CAAC;QACtDM,KAAK,EAAEvG,MAAM,CAACkG,SAAS,CAACE;MAC1B,CAAC;IACH,CAAC,CAAC,OAAOhF,KAAK,EAAE;MACd,MAAM,IAAIlB,KAAK,CAAC,mCAAmCkB,KAAK,CAACC,OAAO,EAAE,CAAC;IACrE;EACF;;EAEA;AACF;AACA;EACE,aAAamF,uBAAuBA,CAACzG,QAAQ,EAAE;IAC7C,IAAI;MACF,MAAMC,MAAM,GAAG,MAAMR,MAAM,CAACS,QAAQ,CAACF,QAAQ,CAAC;MAC9C,IAAI,CAACC,MAAM,EAAE,MAAM,IAAIE,KAAK,CAAC,kBAAkB,CAAC;;MAEhD;MACA,MAAMuG,WAAW,GAAG,MAAM9G,IAAI,CAACuC,IAAI,CAAC;QAAElC,MAAM,EAAED;MAAS,CAAC,CAAC,CACtD2G,IAAI,CAAC;QAAEtC,SAAS,EAAE,CAAC;MAAE,CAAC,CAAC,CACvBuC,KAAK,CAAC,EAAE,CAAC;MAEZ,IAAIF,WAAW,CAACzD,MAAM,KAAK,CAAC,EAAE;QAC5B,OAAO;UAAEuD,KAAK,EAAE;QAAU,CAAC;MAC7B;;MAEA;MACA,IAAInE,WAAW,GAAG,CAAC;MACnB,IAAIC,WAAW,GAAG,CAAC;MAEnBoE,WAAW,CAACnE,OAAO,CAAEC,IAAI,IAAK;QAC5BA,IAAI,CAACC,UAAU,CAACC,IAAI,CAACH,OAAO,CAAEI,SAAS,IAAK;UAC1C,IAAIA,SAAS,CAACC,MAAM,IAAID,SAAS,CAACC,MAAM,GAAG,CAAC,EAAE;YAC5CP,WAAW,IAAIM,SAAS,CAACC,MAAM;YAC/BN,WAAW,EAAE;UACf;QACF,CAAC,CAAC;MACJ,CAAC,CAAC;MAEF,MAAMO,aAAa,GAAGP,WAAW,GAAG,CAAC,GAAGD,WAAW,GAAGC,WAAW,GAAG,CAAC;;MAErE;MACA,MAAMuE,cAAc,GAAG5G,MAAM,CAACwB,UAAU,CAACsB,sBAAsB,IAAI,CAAC;MACpE,MAAM+D,YAAY,GAAGjE,aAAa,GAAGgE,cAAc;MAEnD,IAAIL,KAAK,GAAG,QAAQ;MACpB,IAAIM,YAAY,GAAG,GAAG,EAAE;QACtBN,KAAK,GAAG,WAAW;MACrB,CAAC,MAAM,IAAIM,YAAY,GAAG,CAAC,GAAG,EAAE;QAC9BN,KAAK,GAAG,WAAW;MACrB;MAEAvG,MAAM,CAACkG,SAAS,CAACE,yBAAyB,GAAGG,KAAK;;MAElD;MACA,IAAIA,KAAK,KAAK,WAAW,EAAE;QACzBvG,MAAM,CAACkG,SAAS,CAACG,uBAAuB,GAAG,CACzC,wBAAwB,EACxB,sBAAsB,EACtB,kBAAkB,CACnB;QACDrG,MAAM,CAACkG,SAAS,CAACY,WAAW,GAAG,CAAC,kBAAkB,EAAE,cAAc,CAAC;MACrE,CAAC,MAAM,IAAIP,KAAK,KAAK,WAAW,EAAE;QAChCvG,MAAM,CAACkG,SAAS,CAACa,SAAS,GAAG,CAAC,aAAa,EAAE,kBAAkB,CAAC;MAClE;MAEA,MAAM/G,MAAM,CAACmB,IAAI,CAAC,CAAC;MAEnB,OAAO;QACLpB,QAAQ,EAAEC,MAAM,CAACqF,GAAG;QACpBkB,KAAK;QACL3D,aAAa;QACbiE,YAAY;QACZG,eAAe,EAAEhH,MAAM,CAACkG,SAAS,CAACG;MACpC,CAAC;IACH,CAAC,CAAC,OAAOjF,KAAK,EAAE;MACd,MAAM,IAAIlB,KAAK,CAAC,wCAAwCkB,KAAK,CAACC,OAAO,EAAE,CAAC;IAC1E;EACF;;EAEA;AACF;AACA;EACE,aAAa4F,2BAA2BA,CAAClH,QAAQ,EAAE;IACjD,IAAI;MACF,MAAMC,MAAM,GAAG,MAAMR,MAAM,CAACS,QAAQ,CAACF,QAAQ,CAAC,CAACoC,QAAQ,CAAC,QAAQ,EAAE,kBAAkB,CAAC;MAErF,IAAI,CAACnC,MAAM,EAAE,MAAM,IAAIE,KAAK,CAAC,kBAAkB,CAAC;;MAEhD;MACA,MAAM,IAAI,CAAC0E,0BAA0B,CAAC7E,QAAQ,CAAC;;MAE/C;MACA,MAAMmH,iBAAiB,GAAG,MAAM,IAAI,CAACrB,kBAAkB,CAAC9F,QAAQ,CAAC;MACjE,MAAMoH,gBAAgB,GAAG,MAAM,IAAI,CAACX,uBAAuB,CAACzG,QAAQ,CAAC;;MAErE;MACA,MAAMqH,MAAM,GAAG;QACbrH,QAAQ,EAAEC,MAAM,CAACqF,GAAG;QACpBC,UAAU,EAAEtF,MAAM,CAACuF,QAAQ;QAC3B8B,KAAK,EAAErH,MAAM,CAACqH,KAAK;QACnBC,aAAa,EAAEtH,MAAM,CAACsH,aAAa;QACnCC,MAAM,EAAEvH,MAAM,CAACuH,MAAM;QACrBC,QAAQ,EAAExH,MAAM,CAACwH,QAAQ;QACzBC,iBAAiB,EAAEzH,MAAM,CAACyH,iBAAiB;QAE3C;QACA1G,WAAW,EAAE;UACX2G,aAAa,EAAE1H,MAAM,CAACe,WAAW,CAAC2G,aAAa;UAC/CrH,WAAW,EAAEL,MAAM,CAACe,WAAW,CAACV,WAAW;UAC3CyB,gBAAgB,EAAE9B,MAAM,CAACe,WAAW,CAACe,gBAAgB;UACrDe,oBAAoB,EAAE7C,MAAM,CAACe,WAAW,CAAC8B,oBAAoB;UAC7DI,mBAAmB,EAAEjD,MAAM,CAACe,WAAW,CAACkC,mBAAmB;UAC3DQ,gBAAgB,EAAEzD,MAAM,CAACe,WAAW,CAAC0C,gBAAgB;UACrD1B,eAAe,EAAE/B,MAAM,CAACe,WAAW,CAACgB;QACtC,CAAC;QAED;QACAP,UAAU,EAAE;UACVC,UAAU,EAAEzB,MAAM,CAACwB,UAAU,CAACC,UAAU;UACxCE,cAAc,EAAE3B,MAAM,CAACwB,UAAU,CAACG,cAAc;UAChDE,cAAc,EAAE7B,MAAM,CAACwB,UAAU,CAACK,cAAc;UAChD8F,gBAAgB,EAAE3H,MAAM,CAACwB,UAAU,CAACmG,gBAAgB;UACpDC,qBAAqB,EAAE5H,MAAM,CAACwB,UAAU,CAACoG,qBAAqB;UAC9D9E,sBAAsB,EAAE9C,MAAM,CAACwB,UAAU,CAACsB;QAC5C,CAAC;QAED;QACA3C,UAAU,EAAE;UACV0H,KAAK,EAAE7H,MAAM,CAACG,UAAU,CAACC,eAAe;UACxC0H,QAAQ,EAAE9H,MAAM,CAACG,UAAU,CAACG,iBAAiB;UAC7CM,SAAS,EAAEZ,MAAM,CAACG,UAAU,CAACS,SAAS;UACtCmH,KAAK,EAAE/H,MAAM,CAACG,UAAU,CAACC,eAAe,GAAGJ,MAAM,CAACG,UAAU,CAACG,iBAAiB,GAAGN,MAAM,CAACG,UAAU,CAACS;QACrG,CAAC;QAED;QACAoH,WAAW,EAAE;UACXhC,WAAW,EAAEkB,iBAAiB,CAACjB,oBAAoB;UACnDkB,gBAAgB,EAAEA,gBAAgB,CAACZ,KAAK;UACxCF,uBAAuB,EAAErG,MAAM,CAACkG,SAAS,CAACG,uBAAuB;UACjES,WAAW,EAAE9G,MAAM,CAACkG,SAAS,CAACY,WAAW;UACzCC,SAAS,EAAE/G,MAAM,CAACkG,SAAS,CAACa;QAC9B,CAAC;QAED;QACAkB,OAAO,EAAE;UACPC,MAAM,EAAElI,MAAM,CAACyF,cAAc,CAACD,aAAa;UAC3C2C,IAAI,EAAEnI,MAAM,CAACyF,cAAc,CAAC2C,WAAW;UACvC1C,UAAU,EAAE1F,MAAM,CAACyF,cAAc,CAACC,UAAU;UAC5CC,eAAe,EAAE3F,MAAM,CAAC4F,sBAAsB;UAC9CyC,OAAO,EAAErI,MAAM,CAACsI,cAAc,CAAC;QACjC,CAAC;QAED;QACAC,oBAAoB,EAAEvI,MAAM,CAACwI,uBAAuB,CAAC,CAAC;QAEtDC,WAAW,EAAE,IAAIvH,IAAI,CAAC;MACxB,CAAC;MAED,OAAOkG,MAAM;IACf,CAAC,CAAC,OAAOhG,KAAK,EAAE;MACd,MAAM,IAAIlB,KAAK,CAAC,4CAA4CkB,KAAK,CAACC,OAAO,EAAE,CAAC;IAC9E;EACF;;EAEA;AACF;AACA;EACE,aAAaqH,yBAAyBA,CAAA,EAAG;IACvC,IAAI;MACF,MAAMxD,OAAO,GAAG,MAAM1F,MAAM,CAAC0C,IAAI,CAAC;QAChCyG,QAAQ,EAAE,IAAI;QACdC,GAAG,EAAE,CACH;UAAE,yBAAyB,EAAE;YAAEC,GAAG,EAAE;UAAG;QAAE,CAAC,EAC1C;UAAE,kCAAkC,EAAE;YAAEA,GAAG,EAAE;UAAG;QAAE,CAAC,EACnD;UAAE,0BAA0B,EAAE;YAAE1D,IAAI,EAAE,IAAIjE,IAAI,CAAC;UAAE;QAAE,CAAC;MAExD,CAAC,CAAC,CAACwF,IAAI,CAAC;QAAE,yBAAyB,EAAE;MAAE,CAAC,CAAC;MAEzC,OAAOxB,OAAO,CAACE,GAAG,CAAEpF,MAAM,KAAM;QAC9BD,QAAQ,EAAEC,MAAM,CAACqF,GAAG;QACpBC,UAAU,EAAEtF,MAAM,CAACuF,QAAQ;QAC3BlF,WAAW,EAAEL,MAAM,CAACe,WAAW,CAACV,WAAW;QAC3CwC,oBAAoB,EAAE7C,MAAM,CAACe,WAAW,CAAC8B,oBAAoB;QAC7DiG,eAAe,EAAE9I,MAAM,CAAC+I,QAAQ,CAACD,eAAe;QAChD9B,eAAe,EAAEhH,MAAM,CAACkG,SAAS,CAACG;MACpC,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,OAAOjF,KAAK,EAAE;MACd,MAAM,IAAIlB,KAAK,CAAC,2CAA2CkB,KAAK,CAACC,OAAO,EAAE,CAAC;IAC7E;EACF;;EAEA;AACF;AACA;EACE,aAAa2H,gBAAgBA,CAACrC,KAAK,GAAG,EAAE,EAAE;IACxC,IAAI;MACF,MAAMzB,OAAO,GAAG,MAAM1F,MAAM,CAAC0C,IAAI,CAAC;QAAEyG,QAAQ,EAAE;MAAK,CAAC,CAAC,CAClDjC,IAAI,CAAC;QAAE,2BAA2B,EAAE,CAAC;MAAE,CAAC,CAAC,CACzCC,KAAK,CAACA,KAAK,CAAC,CACZsC,MAAM,CAAC,qDAAqD,CAAC;MAEhE,OAAO/D,OAAO;IAChB,CAAC,CAAC,OAAO9D,KAAK,EAAE;MACd,MAAM,IAAIlB,KAAK,CAAC,iCAAiCkB,KAAK,CAACC,OAAO,EAAE,CAAC;IACnE;EACF;AACF;AAEA6H,MAAM,CAACC,OAAO,GAAGtJ,uBAAuB","ignoreList":[]}