a53bc8cf730b2271b769ba47fdc6291a
/**
 * API الجدولة الذكية - Smart Scheduler API
 * يدير جدولة الجلسات بشكل ذكي مع تجنب التعارضات
 */

const express = require('express');
const router = express.Router();
const {
  SmartScheduler
} = require('../models/smartScheduler');

/**
 * POST /api/scheduler/create-schedule
 * إنشاء جدولة ذكية جديدة
 */
router.post('/create-schedule', async (req, res) => {
  try {
    const {
      beneficiaryId,
      programId,
      frequency,
      sessionsPerWeek,
      planDuration,
      schedulingCriteria
    } = req.body;
    if (!beneficiaryId || !programId) {
      return res.error('البيانات المطلوبة غير مكتملة', 'Missing required fields', 400);
    }
    const planStartDate = new Date();
    const planEndDate = new Date();
    planEndDate.setDate(planEndDate.getDate() + (planDuration || 90));
    const scheduler = new SmartScheduler.model({
      beneficiaryId,
      programId,
      schedulingCriteria: schedulingCriteria || {},
      schedulingPlan: {
        frequency: frequency || 'weekly',
        sessionsPerWeek: sessionsPerWeek || 2,
        planStartDate,
        planEndDate,
        suggestedSchedule: []
      },
      status: 'draft',
      createdBy: req.user?.id
    });
    await scheduler.save();
    res.success(scheduler, 'تم إنشاء الجدولة الذكية بنجاح', 201);
  } catch (error) {
    res.error(error, 'فشل في إنشاء الجدولة');
  }
});

/**
 * GET /api/scheduler/:id
 * الحصول على تفاصيل جدولة
 */
router.get('/:id', async (req, res) => {
  try {
    const scheduler = await SmartScheduler.model.findById(req.params.id).populate([{
      path: 'beneficiaryId',
      select: 'name email'
    }, {
      path: 'programId',
      select: 'name sessionConfig'
    }]);
    if (!scheduler) {
      return res.error('الجدولة غير موجودة', 'Scheduler not found', 404);
    }
    res.success(scheduler, 'تم جلب تفاصيل الجدولة');
  } catch (error) {
    res.error(error, 'فشل في جلب الجدولة');
  }
});

/**
 * POST /api/scheduler/:id/generate-suggestions
 * توليد مقترحات جدولة ذكية
 */
router.post('/:id/generate-suggestions', async (req, res) => {
  try {
    const scheduler = await SmartScheduler.model.findById(req.params.id);
    if (!scheduler) {
      return res.error('الجدولة غير موجودة', 'Scheduler not found', 404);
    }

    // توليد المقترحات بناءً على المعايير
    const suggestions = generateScheduleSuggestions(scheduler);
    scheduler.schedulingPlan.suggestedSchedule = suggestions;
    scheduler.status = 'pending-review';
    await scheduler.save();
    res.success({
      totalSuggestions: suggestions.length,
      suggestions: suggestions.slice(0, 10),
      // إرسال أول 10 مقترحات
      fullCount: suggestions.length
    }, 'تم توليد المقترحات بنجاح');
  } catch (error) {
    res.error(error, 'فشل في توليد المقترحات');
  }
});

/**
 * POST /api/scheduler/:id/approve-schedule
 * الموافقة على الجدولة
 */
router.post('/:id/approve-schedule', async (req, res) => {
  try {
    const scheduler = await SmartScheduler.model.findById(req.params.id);
    if (!scheduler) {
      return res.error('الجدولة غير موجودة', 'Scheduler not found', 404);
    }
    const {
      approverType = 'specialist'
    } = req.body;
    if (approverType === 'specialist') {
      scheduler.approvals.specialistApproval = {
        approved: true,
        approvedAt: new Date(),
        approvedBy: req.user?.id
      };
    } else if (approverType === 'supervisor') {
      scheduler.approvals.supervisorApproval = {
        approved: true,
        approvedAt: new Date(),
        approvedBy: req.user?.id
      };
    } else if (approverType === 'beneficiary') {
      scheduler.approvals.beneficiaryApproval = {
        approved: true,
        approvedAt: new Date(),
        approvedBy: req.user?.id
      };
    }

    // التحقق من جميع الموافقات
    const allApproved = scheduler.approvals.specialistApproval?.approved && scheduler.approvals.supervisorApproval?.approved && scheduler.approvals.beneficiaryApproval?.approved;
    if (allApproved) {
      scheduler.status = 'approved';
    }
    await scheduler.save();
    res.success(scheduler, 'تم تسجيل الموافقة بنجاح');
  } catch (error) {
    res.error(error, 'فشل في تسجيل الموافقة');
  }
});

/**
 * POST /api/scheduler/:id/activate-schedule
 * تفعيل الجدولة
 */
router.post('/:id/activate-schedule', async (req, res) => {
  try {
    const scheduler = await SmartScheduler.model.findById(req.params.id);
    if (!scheduler) {
      return res.error('الجدولة غير موجودة', 'Scheduler not found', 404);
    }
    if (scheduler.status !== 'approved') {
      return res.error('الجدولة يجب أن تكون موافق عليها', 'Schedule must be approved first', 400);
    }
    scheduler.status = 'active';
    scheduler.updatedAt = new Date();
    await scheduler.save();
    res.success(scheduler, 'تم تفعيل الجدولة بنجاح');
  } catch (error) {
    res.error(error, 'فشل في تفعيل الجدولة');
  }
});

/**
 * GET /api/scheduler/:id/conflicts
 * الحصول على التعارضات المحتملة
 */
router.get('/:id/conflicts', async (req, res) => {
  try {
    const scheduler = await SmartScheduler.model.findById(req.params.id);
    if (!scheduler) {
      return res.error('الجدولة غير موجودة', 'Scheduler not found', 404);
    }

    // تحديد التعارضات
    const conflicts = detectScheduleConflicts(scheduler);
    res.success({
      conflictsFound: conflicts.length > 0,
      conflicts,
      resolutionStrategies: generateResolutionStrategies(conflicts)
    }, 'تم الكشف عن التعارضات');
  } catch (error) {
    res.error(error, 'فشل في الكشف عن التعارضات');
  }
});

/**
 * POST /api/scheduler/:id/customize-duration
 * تخصيص مدة الجلسات
 */
router.post('/:id/customize-duration', async (req, res) => {
  try {
    const scheduler = await SmartScheduler.model.findById(req.params.id);
    if (!scheduler) {
      return res.error('الجدولة غير موجودة', 'Scheduler not found', 404);
    }
    const {
      baseSessionDuration,
      adjustments
    } = req.body;
    if (baseSessionDuration) {
      scheduler.sessionDurationCustomization.baseSessionDuration = baseSessionDuration;
    }
    if (adjustments && Array.isArray(adjustments)) {
      scheduler.sessionDurationCustomization.adjustmentFactors = adjustments;
    }

    // حساب المدة الموصى بها
    const recommendedDuration = calculateRecommendedDuration(scheduler);
    scheduler.sessionDurationCustomization.recommendedDurationAdjustment = recommendedDuration;
    await scheduler.save();
    res.success(scheduler.sessionDurationCustomization, 'تم تخصيص المدة بنجاح');
  } catch (error) {
    res.error(error, 'فشل في تخصيص المدة');
  }
});

/**
 * GET /api/scheduler/:id/analytics
 * الحصول على تحليلات الجدولة
 */
router.get('/:id/analytics', async (req, res) => {
  try {
    const scheduler = await SmartScheduler.model.findById(req.params.id);
    if (!scheduler) {
      return res.error('الجدولة غير موجودة', 'Scheduler not found', 404);
    }
    res.success({
      analytics: scheduler.analytics || {},
      efficiency: calculateScheduleEfficiency(scheduler),
      recommendations: generateScheduleRecommendations(scheduler)
    }, 'تم جلب تحليلات الجدولة');
  } catch (error) {
    res.error(error, 'فشل في جلب التحليلات');
  }
});

// ============ الدوال المساعدة ============

function generateScheduleSuggestions(scheduler) {
  // منطق لتوليد المقترحات الذكية
  const suggestions = [];
  const {
    planStartDate,
    planEndDate,
    _sessionsPerWeek
  } = scheduler.schedulingPlan;
  let currentDate = new Date(planStartDate);
  let sessionCount = 0;
  while (currentDate <= planEndDate && sessionCount < scheduler.schedulingPlan.totalPlannedSessions) {
    const dayOfWeek = currentDate.getDay();

    // تجنب الجمعة والسبت
    if (dayOfWeek !== 5 && dayOfWeek !== 6) {
      suggestions.push({
        scheduledDateTime: new Date(currentDate),
        recommendedSpecialist: {
          name: 'متاح',
          specialistId: null
        },
        confidenceScore: 85,
        explanation: 'موعد متاح ومناسب'
      });
      sessionCount++;
    }
    currentDate.setDate(currentDate.getDate() + 1);
  }
  return suggestions;
}
function detectScheduleConflicts(scheduler) {
  const conflicts = [];
  const {
    _suggestedSchedule
  } = scheduler.schedulingPlan;

  // منطق الكشف عن التعارضات
  // مثال: الجلسات المتتالية دون فترة راحة

  return conflicts;
}
function generateResolutionStrategies(conflicts) {
  return conflicts.map(conflict => ({
    conflict: conflict,
    strategies: ['تأجيل إحدى الجلسات', 'تغيير الأخصائي', 'تغيير الموقع']
  }));
}
function calculateRecommendedDuration(scheduler) {
  return {
    suggestedDuration: 60,
    reason: 'مدة معيارية موصى بها',
    basedOn: ['assessment', 'fatigue-level'],
    confidence: 80
  };
}
function calculateScheduleEfficiency(scheduler) {
  // حساب كفاءة الجدولة
  return {
    overallEfficiency: 85,
    resourceUtilization: 90,
    specialistUtilization: 80
  };
}
function generateScheduleRecommendations(scheduler) {
  return ['زيادة عدد الجلسات الأسبوعية', 'إضافة فترات راحة أطول', 'تنويع الأنشطة'];
}
module.exports = router;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsInJvdXRlciIsIlJvdXRlciIsIlNtYXJ0U2NoZWR1bGVyIiwicG9zdCIsInJlcSIsInJlcyIsImJlbmVmaWNpYXJ5SWQiLCJwcm9ncmFtSWQiLCJmcmVxdWVuY3kiLCJzZXNzaW9uc1BlcldlZWsiLCJwbGFuRHVyYXRpb24iLCJzY2hlZHVsaW5nQ3JpdGVyaWEiLCJib2R5IiwiZXJyb3IiLCJwbGFuU3RhcnREYXRlIiwiRGF0ZSIsInBsYW5FbmREYXRlIiwic2V0RGF0ZSIsImdldERhdGUiLCJzY2hlZHVsZXIiLCJtb2RlbCIsInNjaGVkdWxpbmdQbGFuIiwic3VnZ2VzdGVkU2NoZWR1bGUiLCJzdGF0dXMiLCJjcmVhdGVkQnkiLCJ1c2VyIiwiaWQiLCJzYXZlIiwic3VjY2VzcyIsImdldCIsImZpbmRCeUlkIiwicGFyYW1zIiwicG9wdWxhdGUiLCJwYXRoIiwic2VsZWN0Iiwic3VnZ2VzdGlvbnMiLCJnZW5lcmF0ZVNjaGVkdWxlU3VnZ2VzdGlvbnMiLCJ0b3RhbFN1Z2dlc3Rpb25zIiwibGVuZ3RoIiwic2xpY2UiLCJmdWxsQ291bnQiLCJhcHByb3ZlclR5cGUiLCJhcHByb3ZhbHMiLCJzcGVjaWFsaXN0QXBwcm92YWwiLCJhcHByb3ZlZCIsImFwcHJvdmVkQXQiLCJhcHByb3ZlZEJ5Iiwic3VwZXJ2aXNvckFwcHJvdmFsIiwiYmVuZWZpY2lhcnlBcHByb3ZhbCIsImFsbEFwcHJvdmVkIiwidXBkYXRlZEF0IiwiY29uZmxpY3RzIiwiZGV0ZWN0U2NoZWR1bGVDb25mbGljdHMiLCJjb25mbGljdHNGb3VuZCIsInJlc29sdXRpb25TdHJhdGVnaWVzIiwiZ2VuZXJhdGVSZXNvbHV0aW9uU3RyYXRlZ2llcyIsImJhc2VTZXNzaW9uRHVyYXRpb24iLCJhZGp1c3RtZW50cyIsInNlc3Npb25EdXJhdGlvbkN1c3RvbWl6YXRpb24iLCJBcnJheSIsImlzQXJyYXkiLCJhZGp1c3RtZW50RmFjdG9ycyIsInJlY29tbWVuZGVkRHVyYXRpb24iLCJjYWxjdWxhdGVSZWNvbW1lbmRlZER1cmF0aW9uIiwicmVjb21tZW5kZWREdXJhdGlvbkFkanVzdG1lbnQiLCJhbmFseXRpY3MiLCJlZmZpY2llbmN5IiwiY2FsY3VsYXRlU2NoZWR1bGVFZmZpY2llbmN5IiwicmVjb21tZW5kYXRpb25zIiwiZ2VuZXJhdGVTY2hlZHVsZVJlY29tbWVuZGF0aW9ucyIsIl9zZXNzaW9uc1BlcldlZWsiLCJjdXJyZW50RGF0ZSIsInNlc3Npb25Db3VudCIsInRvdGFsUGxhbm5lZFNlc3Npb25zIiwiZGF5T2ZXZWVrIiwiZ2V0RGF5IiwicHVzaCIsInNjaGVkdWxlZERhdGVUaW1lIiwicmVjb21tZW5kZWRTcGVjaWFsaXN0IiwibmFtZSIsInNwZWNpYWxpc3RJZCIsImNvbmZpZGVuY2VTY29yZSIsImV4cGxhbmF0aW9uIiwiX3N1Z2dlc3RlZFNjaGVkdWxlIiwibWFwIiwiY29uZmxpY3QiLCJzdHJhdGVnaWVzIiwic3VnZ2VzdGVkRHVyYXRpb24iLCJyZWFzb24iLCJiYXNlZE9uIiwiY29uZmlkZW5jZSIsIm92ZXJhbGxFZmZpY2llbmN5IiwicmVzb3VyY2VVdGlsaXphdGlvbiIsInNwZWNpYWxpc3RVdGlsaXphdGlvbiIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlcyI6WyJzbWFydFNjaGVkdWxlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQVBJINin2YTYrNiv2YjZhNipINin2YTYsNmD2YrYqSAtIFNtYXJ0IFNjaGVkdWxlciBBUElcclxuICog2YrYr9mK2LEg2KzYr9mI2YTYqSDYp9mE2KzZhNiz2KfYqiDYqNi02YPZhCDYsNmD2Yog2YXYuSDYqtis2YbYqCDYp9mE2KrYudin2LHYttin2KpcclxuICovXHJcblxyXG5jb25zdCBleHByZXNzID0gcmVxdWlyZSgnZXhwcmVzcycpO1xyXG5jb25zdCByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xyXG5jb25zdCB7IFNtYXJ0U2NoZWR1bGVyIH0gPSByZXF1aXJlKCcuLi9tb2RlbHMvc21hcnRTY2hlZHVsZXInKTtcclxuXHJcbi8qKlxyXG4gKiBQT1NUIC9hcGkvc2NoZWR1bGVyL2NyZWF0ZS1zY2hlZHVsZVxyXG4gKiDYpdmG2LTYp9ihINis2K/ZiNmE2Kkg2LDZg9mK2Kkg2KzYr9mK2K/YqVxyXG4gKi9cclxucm91dGVyLnBvc3QoJy9jcmVhdGUtc2NoZWR1bGUnLCBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3Qge1xyXG4gICAgICBiZW5lZmljaWFyeUlkLFxyXG4gICAgICBwcm9ncmFtSWQsXHJcbiAgICAgIGZyZXF1ZW5jeSxcclxuICAgICAgc2Vzc2lvbnNQZXJXZWVrLFxyXG4gICAgICBwbGFuRHVyYXRpb24sXHJcbiAgICAgIHNjaGVkdWxpbmdDcml0ZXJpYSxcclxuICAgIH0gPSByZXEuYm9keTtcclxuXHJcbiAgICBpZiAoIWJlbmVmaWNpYXJ5SWQgfHwgIXByb2dyYW1JZCkge1xyXG4gICAgICByZXR1cm4gcmVzLmVycm9yKCfYp9mE2KjZitin2YbYp9iqINin2YTZhdi32YTZiNio2Kkg2LrZitixINmF2YPYqtmF2YTYqScsICdNaXNzaW5nIHJlcXVpcmVkIGZpZWxkcycsIDQwMCk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgcGxhblN0YXJ0RGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgICBjb25zdCBwbGFuRW5kRGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgICBwbGFuRW5kRGF0ZS5zZXREYXRlKHBsYW5FbmREYXRlLmdldERhdGUoKSArIChwbGFuRHVyYXRpb24gfHwgOTApKTtcclxuXHJcbiAgICBjb25zdCBzY2hlZHVsZXIgPSBuZXcgU21hcnRTY2hlZHVsZXIubW9kZWwoe1xyXG4gICAgICBiZW5lZmljaWFyeUlkLFxyXG4gICAgICBwcm9ncmFtSWQsXHJcbiAgICAgIHNjaGVkdWxpbmdDcml0ZXJpYTogc2NoZWR1bGluZ0NyaXRlcmlhIHx8IHt9LFxyXG4gICAgICBzY2hlZHVsaW5nUGxhbjoge1xyXG4gICAgICAgIGZyZXF1ZW5jeTogZnJlcXVlbmN5IHx8ICd3ZWVrbHknLFxyXG4gICAgICAgIHNlc3Npb25zUGVyV2Vlazogc2Vzc2lvbnNQZXJXZWVrIHx8IDIsXHJcbiAgICAgICAgcGxhblN0YXJ0RGF0ZSxcclxuICAgICAgICBwbGFuRW5kRGF0ZSxcclxuICAgICAgICBzdWdnZXN0ZWRTY2hlZHVsZTogW10sXHJcbiAgICAgIH0sXHJcbiAgICAgIHN0YXR1czogJ2RyYWZ0JyxcclxuICAgICAgY3JlYXRlZEJ5OiByZXEudXNlcj8uaWQsXHJcbiAgICB9KTtcclxuXHJcbiAgICBhd2FpdCBzY2hlZHVsZXIuc2F2ZSgpO1xyXG5cclxuICAgIHJlcy5zdWNjZXNzKHNjaGVkdWxlciwgJ9iq2YUg2KXZhti02KfYoSDYp9mE2KzYr9mI2YTYqSDYp9mE2LDZg9mK2Kkg2KjZhtis2KfYrScsIDIwMSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIHJlcy5lcnJvcihlcnJvciwgJ9mB2LTZhCDZgdmKINil2YbYtNin2KEg2KfZhNis2K/ZiNmE2KknKTtcclxuICB9XHJcbn0pO1xyXG5cclxuLyoqXHJcbiAqIEdFVCAvYXBpL3NjaGVkdWxlci86aWRcclxuICog2KfZhNit2LXZiNmEINi52YTZiSDYqtmB2KfYtdmK2YQg2KzYr9mI2YTYqVxyXG4gKi9cclxucm91dGVyLmdldCgnLzppZCcsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBzY2hlZHVsZXIgPSBhd2FpdCBTbWFydFNjaGVkdWxlci5tb2RlbC5maW5kQnlJZChyZXEucGFyYW1zLmlkKS5wb3B1bGF0ZShbXHJcbiAgICAgIHsgcGF0aDogJ2JlbmVmaWNpYXJ5SWQnLCBzZWxlY3Q6ICduYW1lIGVtYWlsJyB9LFxyXG4gICAgICB7IHBhdGg6ICdwcm9ncmFtSWQnLCBzZWxlY3Q6ICduYW1lIHNlc3Npb25Db25maWcnIH0sXHJcbiAgICBdKTtcclxuXHJcbiAgICBpZiAoIXNjaGVkdWxlcikge1xyXG4gICAgICByZXR1cm4gcmVzLmVycm9yKCfYp9mE2KzYr9mI2YTYqSDYutmK2LEg2YXZiNis2YjYr9ipJywgJ1NjaGVkdWxlciBub3QgZm91bmQnLCA0MDQpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlcy5zdWNjZXNzKHNjaGVkdWxlciwgJ9iq2YUg2KzZhNioINiq2YHYp9i12YrZhCDYp9mE2KzYr9mI2YTYqScpO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICByZXMuZXJyb3IoZXJyb3IsICfZgdi02YQg2YHZiiDYrNmE2Kgg2KfZhNis2K/ZiNmE2KknKTtcclxuICB9XHJcbn0pO1xyXG5cclxuLyoqXHJcbiAqIFBPU1QgL2FwaS9zY2hlZHVsZXIvOmlkL2dlbmVyYXRlLXN1Z2dlc3Rpb25zXHJcbiAqINiq2YjZhNmK2K8g2YXZgtiq2LHYrdin2Kog2KzYr9mI2YTYqSDYsNmD2YrYqVxyXG4gKi9cclxucm91dGVyLnBvc3QoJy86aWQvZ2VuZXJhdGUtc3VnZ2VzdGlvbnMnLCBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3Qgc2NoZWR1bGVyID0gYXdhaXQgU21hcnRTY2hlZHVsZXIubW9kZWwuZmluZEJ5SWQocmVxLnBhcmFtcy5pZCk7XHJcblxyXG4gICAgaWYgKCFzY2hlZHVsZXIpIHtcclxuICAgICAgcmV0dXJuIHJlcy5lcnJvcign2KfZhNis2K/ZiNmE2Kkg2LrZitixINmF2YjYrNmI2K/YqScsICdTY2hlZHVsZXIgbm90IGZvdW5kJywgNDA0KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyDYqtmI2YTZitivINin2YTZhdmC2KrYsdit2KfYqiDYqNmG2KfYodmLINi52YTZiSDYp9mE2YXYudin2YrZitixXHJcbiAgICBjb25zdCBzdWdnZXN0aW9ucyA9IGdlbmVyYXRlU2NoZWR1bGVTdWdnZXN0aW9ucyhzY2hlZHVsZXIpO1xyXG5cclxuICAgIHNjaGVkdWxlci5zY2hlZHVsaW5nUGxhbi5zdWdnZXN0ZWRTY2hlZHVsZSA9IHN1Z2dlc3Rpb25zO1xyXG4gICAgc2NoZWR1bGVyLnN0YXR1cyA9ICdwZW5kaW5nLXJldmlldyc7XHJcblxyXG4gICAgYXdhaXQgc2NoZWR1bGVyLnNhdmUoKTtcclxuXHJcbiAgICByZXMuc3VjY2VzcyhcclxuICAgICAge1xyXG4gICAgICAgIHRvdGFsU3VnZ2VzdGlvbnM6IHN1Z2dlc3Rpb25zLmxlbmd0aCxcclxuICAgICAgICBzdWdnZXN0aW9uczogc3VnZ2VzdGlvbnMuc2xpY2UoMCwgMTApLCAvLyDYpdix2LPYp9mEINij2YjZhCAxMCDZhdmC2KrYsdit2KfYqlxyXG4gICAgICAgIGZ1bGxDb3VudDogc3VnZ2VzdGlvbnMubGVuZ3RoLFxyXG4gICAgICB9LFxyXG4gICAgICAn2KrZhSDYqtmI2YTZitivINin2YTZhdmC2KrYsdit2KfYqiDYqNmG2KzYp9itJ1xyXG4gICAgKTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgcmVzLmVycm9yKGVycm9yLCAn2YHYtNmEINmB2Yog2KrZiNmE2YrYryDYp9mE2YXZgtiq2LHYrdin2KonKTtcclxuICB9XHJcbn0pO1xyXG5cclxuLyoqXHJcbiAqIFBPU1QgL2FwaS9zY2hlZHVsZXIvOmlkL2FwcHJvdmUtc2NoZWR1bGVcclxuICog2KfZhNmF2YjYp9mB2YLYqSDYudmE2Ykg2KfZhNis2K/ZiNmE2KlcclxuICovXHJcbnJvdXRlci5wb3N0KCcvOmlkL2FwcHJvdmUtc2NoZWR1bGUnLCBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3Qgc2NoZWR1bGVyID0gYXdhaXQgU21hcnRTY2hlZHVsZXIubW9kZWwuZmluZEJ5SWQocmVxLnBhcmFtcy5pZCk7XHJcblxyXG4gICAgaWYgKCFzY2hlZHVsZXIpIHtcclxuICAgICAgcmV0dXJuIHJlcy5lcnJvcign2KfZhNis2K/ZiNmE2Kkg2LrZitixINmF2YjYrNmI2K/YqScsICdTY2hlZHVsZXIgbm90IGZvdW5kJywgNDA0KTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB7IGFwcHJvdmVyVHlwZSA9ICdzcGVjaWFsaXN0JyB9ID0gcmVxLmJvZHk7XHJcblxyXG4gICAgaWYgKGFwcHJvdmVyVHlwZSA9PT0gJ3NwZWNpYWxpc3QnKSB7XHJcbiAgICAgIHNjaGVkdWxlci5hcHByb3ZhbHMuc3BlY2lhbGlzdEFwcHJvdmFsID0ge1xyXG4gICAgICAgIGFwcHJvdmVkOiB0cnVlLFxyXG4gICAgICAgIGFwcHJvdmVkQXQ6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgYXBwcm92ZWRCeTogcmVxLnVzZXI/LmlkLFxyXG4gICAgICB9O1xyXG4gICAgfSBlbHNlIGlmIChhcHByb3ZlclR5cGUgPT09ICdzdXBlcnZpc29yJykge1xyXG4gICAgICBzY2hlZHVsZXIuYXBwcm92YWxzLnN1cGVydmlzb3JBcHByb3ZhbCA9IHtcclxuICAgICAgICBhcHByb3ZlZDogdHJ1ZSxcclxuICAgICAgICBhcHByb3ZlZEF0OiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgIGFwcHJvdmVkQnk6IHJlcS51c2VyPy5pZCxcclxuICAgICAgfTtcclxuICAgIH0gZWxzZSBpZiAoYXBwcm92ZXJUeXBlID09PSAnYmVuZWZpY2lhcnknKSB7XHJcbiAgICAgIHNjaGVkdWxlci5hcHByb3ZhbHMuYmVuZWZpY2lhcnlBcHByb3ZhbCA9IHtcclxuICAgICAgICBhcHByb3ZlZDogdHJ1ZSxcclxuICAgICAgICBhcHByb3ZlZEF0OiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgIGFwcHJvdmVkQnk6IHJlcS51c2VyPy5pZCxcclxuICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyDYp9mE2KrYrdmC2YIg2YXZhiDYrNmF2YrYuSDYp9mE2YXZiNin2YHZgtin2KpcclxuICAgIGNvbnN0IGFsbEFwcHJvdmVkID1cclxuICAgICAgc2NoZWR1bGVyLmFwcHJvdmFscy5zcGVjaWFsaXN0QXBwcm92YWw/LmFwcHJvdmVkICYmXHJcbiAgICAgIHNjaGVkdWxlci5hcHByb3ZhbHMuc3VwZXJ2aXNvckFwcHJvdmFsPy5hcHByb3ZlZCAmJlxyXG4gICAgICBzY2hlZHVsZXIuYXBwcm92YWxzLmJlbmVmaWNpYXJ5QXBwcm92YWw/LmFwcHJvdmVkO1xyXG5cclxuICAgIGlmIChhbGxBcHByb3ZlZCkge1xyXG4gICAgICBzY2hlZHVsZXIuc3RhdHVzID0gJ2FwcHJvdmVkJztcclxuICAgIH1cclxuXHJcbiAgICBhd2FpdCBzY2hlZHVsZXIuc2F2ZSgpO1xyXG5cclxuICAgIHJlcy5zdWNjZXNzKHNjaGVkdWxlciwgJ9iq2YUg2KrYs9is2YrZhCDYp9mE2YXZiNin2YHZgtipINio2YbYrNin2K0nKTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgcmVzLmVycm9yKGVycm9yLCAn2YHYtNmEINmB2Yog2KrYs9is2YrZhCDYp9mE2YXZiNin2YHZgtipJyk7XHJcbiAgfVxyXG59KTtcclxuXHJcbi8qKlxyXG4gKiBQT1NUIC9hcGkvc2NoZWR1bGVyLzppZC9hY3RpdmF0ZS1zY2hlZHVsZVxyXG4gKiDYqtmB2LnZitmEINin2YTYrNiv2YjZhNipXHJcbiAqL1xyXG5yb3V0ZXIucG9zdCgnLzppZC9hY3RpdmF0ZS1zY2hlZHVsZScsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBzY2hlZHVsZXIgPSBhd2FpdCBTbWFydFNjaGVkdWxlci5tb2RlbC5maW5kQnlJZChyZXEucGFyYW1zLmlkKTtcclxuXHJcbiAgICBpZiAoIXNjaGVkdWxlcikge1xyXG4gICAgICByZXR1cm4gcmVzLmVycm9yKCfYp9mE2KzYr9mI2YTYqSDYutmK2LEg2YXZiNis2YjYr9ipJywgJ1NjaGVkdWxlciBub3QgZm91bmQnLCA0MDQpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChzY2hlZHVsZXIuc3RhdHVzICE9PSAnYXBwcm92ZWQnKSB7XHJcbiAgICAgIHJldHVybiByZXMuZXJyb3IoJ9in2YTYrNiv2YjZhNipINmK2KzYqCDYo9mGINiq2YPZiNmGINmF2YjYp9mB2YIg2LnZhNmK2YfYpycsICdTY2hlZHVsZSBtdXN0IGJlIGFwcHJvdmVkIGZpcnN0JywgNDAwKTtcclxuICAgIH1cclxuXHJcbiAgICBzY2hlZHVsZXIuc3RhdHVzID0gJ2FjdGl2ZSc7XHJcbiAgICBzY2hlZHVsZXIudXBkYXRlZEF0ID0gbmV3IERhdGUoKTtcclxuXHJcbiAgICBhd2FpdCBzY2hlZHVsZXIuc2F2ZSgpO1xyXG5cclxuICAgIHJlcy5zdWNjZXNzKHNjaGVkdWxlciwgJ9iq2YUg2KrZgdi52YrZhCDYp9mE2KzYr9mI2YTYqSDYqNmG2KzYp9itJyk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIHJlcy5lcnJvcihlcnJvciwgJ9mB2LTZhCDZgdmKINiq2YHYudmK2YQg2KfZhNis2K/ZiNmE2KknKTtcclxuICB9XHJcbn0pO1xyXG5cclxuLyoqXHJcbiAqIEdFVCAvYXBpL3NjaGVkdWxlci86aWQvY29uZmxpY3RzXHJcbiAqINin2YTYrdi12YjZhCDYudmE2Ykg2KfZhNiq2LnYp9ix2LbYp9iqINin2YTZhdit2KrZhdmE2KlcclxuICovXHJcbnJvdXRlci5nZXQoJy86aWQvY29uZmxpY3RzJywgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHNjaGVkdWxlciA9IGF3YWl0IFNtYXJ0U2NoZWR1bGVyLm1vZGVsLmZpbmRCeUlkKHJlcS5wYXJhbXMuaWQpO1xyXG5cclxuICAgIGlmICghc2NoZWR1bGVyKSB7XHJcbiAgICAgIHJldHVybiByZXMuZXJyb3IoJ9in2YTYrNiv2YjZhNipINi62YrYsSDZhdmI2KzZiNiv2KknLCAnU2NoZWR1bGVyIG5vdCBmb3VuZCcsIDQwNCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g2KrYrdiv2YrYryDYp9mE2KrYudin2LHYttin2KpcclxuICAgIGNvbnN0IGNvbmZsaWN0cyA9IGRldGVjdFNjaGVkdWxlQ29uZmxpY3RzKHNjaGVkdWxlcik7XHJcblxyXG4gICAgcmVzLnN1Y2Nlc3MoXHJcbiAgICAgIHtcclxuICAgICAgICBjb25mbGljdHNGb3VuZDogY29uZmxpY3RzLmxlbmd0aCA+IDAsXHJcbiAgICAgICAgY29uZmxpY3RzLFxyXG4gICAgICAgIHJlc29sdXRpb25TdHJhdGVnaWVzOiBnZW5lcmF0ZVJlc29sdXRpb25TdHJhdGVnaWVzKGNvbmZsaWN0cyksXHJcbiAgICAgIH0sXHJcbiAgICAgICfYqtmFINin2YTZg9i02YEg2LnZhiDYp9mE2KrYudin2LHYttin2KonXHJcbiAgICApO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICByZXMuZXJyb3IoZXJyb3IsICfZgdi02YQg2YHZiiDYp9mE2YPYtNmBINi52YYg2KfZhNiq2LnYp9ix2LbYp9iqJyk7XHJcbiAgfVxyXG59KTtcclxuXHJcbi8qKlxyXG4gKiBQT1NUIC9hcGkvc2NoZWR1bGVyLzppZC9jdXN0b21pemUtZHVyYXRpb25cclxuICog2KrYrti12YrYtSDZhdiv2Kkg2KfZhNis2YTYs9in2KpcclxuICovXHJcbnJvdXRlci5wb3N0KCcvOmlkL2N1c3RvbWl6ZS1kdXJhdGlvbicsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBzY2hlZHVsZXIgPSBhd2FpdCBTbWFydFNjaGVkdWxlci5tb2RlbC5maW5kQnlJZChyZXEucGFyYW1zLmlkKTtcclxuXHJcbiAgICBpZiAoIXNjaGVkdWxlcikge1xyXG4gICAgICByZXR1cm4gcmVzLmVycm9yKCfYp9mE2KzYr9mI2YTYqSDYutmK2LEg2YXZiNis2YjYr9ipJywgJ1NjaGVkdWxlciBub3QgZm91bmQnLCA0MDQpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHsgYmFzZVNlc3Npb25EdXJhdGlvbiwgYWRqdXN0bWVudHMgfSA9IHJlcS5ib2R5O1xyXG5cclxuICAgIGlmIChiYXNlU2Vzc2lvbkR1cmF0aW9uKSB7XHJcbiAgICAgIHNjaGVkdWxlci5zZXNzaW9uRHVyYXRpb25DdXN0b21pemF0aW9uLmJhc2VTZXNzaW9uRHVyYXRpb24gPSBiYXNlU2Vzc2lvbkR1cmF0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChhZGp1c3RtZW50cyAmJiBBcnJheS5pc0FycmF5KGFkanVzdG1lbnRzKSkge1xyXG4gICAgICBzY2hlZHVsZXIuc2Vzc2lvbkR1cmF0aW9uQ3VzdG9taXphdGlvbi5hZGp1c3RtZW50RmFjdG9ycyA9IGFkanVzdG1lbnRzO1xyXG4gICAgfVxyXG5cclxuICAgIC8vINit2LPYp9ioINin2YTZhdiv2Kkg2KfZhNmF2YjYtdmJINio2YfYp1xyXG4gICAgY29uc3QgcmVjb21tZW5kZWREdXJhdGlvbiA9IGNhbGN1bGF0ZVJlY29tbWVuZGVkRHVyYXRpb24oc2NoZWR1bGVyKTtcclxuICAgIHNjaGVkdWxlci5zZXNzaW9uRHVyYXRpb25DdXN0b21pemF0aW9uLnJlY29tbWVuZGVkRHVyYXRpb25BZGp1c3RtZW50ID0gcmVjb21tZW5kZWREdXJhdGlvbjtcclxuXHJcbiAgICBhd2FpdCBzY2hlZHVsZXIuc2F2ZSgpO1xyXG5cclxuICAgIHJlcy5zdWNjZXNzKHNjaGVkdWxlci5zZXNzaW9uRHVyYXRpb25DdXN0b21pemF0aW9uLCAn2KrZhSDYqtiu2LXZiti1INin2YTZhdiv2Kkg2KjZhtis2KfYrScpO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICByZXMuZXJyb3IoZXJyb3IsICfZgdi02YQg2YHZiiDYqtiu2LXZiti1INin2YTZhdiv2KknKTtcclxuICB9XHJcbn0pO1xyXG5cclxuLyoqXHJcbiAqIEdFVCAvYXBpL3NjaGVkdWxlci86aWQvYW5hbHl0aWNzXHJcbiAqINin2YTYrdi12YjZhCDYudmE2Ykg2KrYrdmE2YrZhNin2Kog2KfZhNis2K/ZiNmE2KlcclxuICovXHJcbnJvdXRlci5nZXQoJy86aWQvYW5hbHl0aWNzJywgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHNjaGVkdWxlciA9IGF3YWl0IFNtYXJ0U2NoZWR1bGVyLm1vZGVsLmZpbmRCeUlkKHJlcS5wYXJhbXMuaWQpO1xyXG5cclxuICAgIGlmICghc2NoZWR1bGVyKSB7XHJcbiAgICAgIHJldHVybiByZXMuZXJyb3IoJ9in2YTYrNiv2YjZhNipINi62YrYsSDZhdmI2KzZiNiv2KknLCAnU2NoZWR1bGVyIG5vdCBmb3VuZCcsIDQwNCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVzLnN1Y2Nlc3MoXHJcbiAgICAgIHtcclxuICAgICAgICBhbmFseXRpY3M6IHNjaGVkdWxlci5hbmFseXRpY3MgfHwge30sXHJcbiAgICAgICAgZWZmaWNpZW5jeTogY2FsY3VsYXRlU2NoZWR1bGVFZmZpY2llbmN5KHNjaGVkdWxlciksXHJcbiAgICAgICAgcmVjb21tZW5kYXRpb25zOiBnZW5lcmF0ZVNjaGVkdWxlUmVjb21tZW5kYXRpb25zKHNjaGVkdWxlciksXHJcbiAgICAgIH0sXHJcbiAgICAgICfYqtmFINis2YTYqCDYqtit2YTZitmE2KfYqiDYp9mE2KzYr9mI2YTYqSdcclxuICAgICk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIHJlcy5lcnJvcihlcnJvciwgJ9mB2LTZhCDZgdmKINis2YTYqCDYp9mE2KrYrdmE2YrZhNin2KonKTtcclxuICB9XHJcbn0pO1xyXG5cclxuLy8gPT09PT09PT09PT09INin2YTYr9mI2KfZhCDYp9mE2YXYs9in2LnYr9ipID09PT09PT09PT09PVxyXG5cclxuZnVuY3Rpb24gZ2VuZXJhdGVTY2hlZHVsZVN1Z2dlc3Rpb25zKHNjaGVkdWxlcikge1xyXG4gIC8vINmF2YbYt9mCINmE2KrZiNmE2YrYryDYp9mE2YXZgtiq2LHYrdin2Kog2KfZhNiw2YPZitipXHJcbiAgY29uc3Qgc3VnZ2VzdGlvbnMgPSBbXTtcclxuICBjb25zdCB7IHBsYW5TdGFydERhdGUsIHBsYW5FbmREYXRlLCBfc2Vzc2lvbnNQZXJXZWVrIH0gPSBzY2hlZHVsZXIuc2NoZWR1bGluZ1BsYW47XHJcblxyXG4gIGxldCBjdXJyZW50RGF0ZSA9IG5ldyBEYXRlKHBsYW5TdGFydERhdGUpO1xyXG4gIGxldCBzZXNzaW9uQ291bnQgPSAwO1xyXG5cclxuICB3aGlsZSAoXHJcbiAgICBjdXJyZW50RGF0ZSA8PSBwbGFuRW5kRGF0ZSAmJlxyXG4gICAgc2Vzc2lvbkNvdW50IDwgc2NoZWR1bGVyLnNjaGVkdWxpbmdQbGFuLnRvdGFsUGxhbm5lZFNlc3Npb25zXHJcbiAgKSB7XHJcbiAgICBjb25zdCBkYXlPZldlZWsgPSBjdXJyZW50RGF0ZS5nZXREYXkoKTtcclxuXHJcbiAgICAvLyDYqtis2YbYqCDYp9mE2KzZhdi52Kkg2YjYp9mE2LPYqNiqXHJcbiAgICBpZiAoZGF5T2ZXZWVrICE9PSA1ICYmIGRheU9mV2VlayAhPT0gNikge1xyXG4gICAgICBzdWdnZXN0aW9ucy5wdXNoKHtcclxuICAgICAgICBzY2hlZHVsZWREYXRlVGltZTogbmV3IERhdGUoY3VycmVudERhdGUpLFxyXG4gICAgICAgIHJlY29tbWVuZGVkU3BlY2lhbGlzdDoge1xyXG4gICAgICAgICAgbmFtZTogJ9mF2KrYp9itJyxcclxuICAgICAgICAgIHNwZWNpYWxpc3RJZDogbnVsbCxcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNvbmZpZGVuY2VTY29yZTogODUsXHJcbiAgICAgICAgZXhwbGFuYXRpb246ICfZhdmI2LnYryDZhdiq2KfYrSDZiNmF2YbYp9iz2KgnLFxyXG4gICAgICB9KTtcclxuICAgICAgc2Vzc2lvbkNvdW50Kys7XHJcbiAgICB9XHJcbiAgICBjdXJyZW50RGF0ZS5zZXREYXRlKGN1cnJlbnREYXRlLmdldERhdGUoKSArIDEpO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHN1Z2dlc3Rpb25zO1xyXG59XHJcblxyXG5mdW5jdGlvbiBkZXRlY3RTY2hlZHVsZUNvbmZsaWN0cyhzY2hlZHVsZXIpIHtcclxuICBjb25zdCBjb25mbGljdHMgPSBbXTtcclxuICBjb25zdCB7IF9zdWdnZXN0ZWRTY2hlZHVsZSB9ID0gc2NoZWR1bGVyLnNjaGVkdWxpbmdQbGFuO1xyXG5cclxuICAvLyDZhdmG2LfZgiDYp9mE2YPYtNmBINi52YYg2KfZhNiq2LnYp9ix2LbYp9iqXHJcbiAgLy8g2YXYq9in2YQ6INin2YTYrNmE2LPYp9iqINin2YTZhdiq2KrYp9mE2YrYqSDYr9mI2YYg2YHYqtix2Kkg2LHYp9it2KlcclxuXHJcbiAgcmV0dXJuIGNvbmZsaWN0cztcclxufVxyXG5cclxuZnVuY3Rpb24gZ2VuZXJhdGVSZXNvbHV0aW9uU3RyYXRlZ2llcyhjb25mbGljdHMpIHtcclxuICByZXR1cm4gY29uZmxpY3RzLm1hcChjb25mbGljdCA9PiAoe1xyXG4gICAgY29uZmxpY3Q6IGNvbmZsaWN0LFxyXG4gICAgc3RyYXRlZ2llczogWyfYqtij2KzZitmEINil2K3Yr9mJINin2YTYrNmE2LPYp9iqJywgJ9iq2LrZitmK2LEg2KfZhNij2K7Ytdin2KbZiicsICfYqti62YrZitixINin2YTZhdmI2YLYuSddLFxyXG4gIH0pKTtcclxufVxyXG5cclxuZnVuY3Rpb24gY2FsY3VsYXRlUmVjb21tZW5kZWREdXJhdGlvbihzY2hlZHVsZXIpIHtcclxuICByZXR1cm4ge1xyXG4gICAgc3VnZ2VzdGVkRHVyYXRpb246IDYwLFxyXG4gICAgcmVhc29uOiAn2YXYr9ipINmF2LnZitin2LHZitipINmF2YjYtdmJINio2YfYpycsXHJcbiAgICBiYXNlZE9uOiBbJ2Fzc2Vzc21lbnQnLCAnZmF0aWd1ZS1sZXZlbCddLFxyXG4gICAgY29uZmlkZW5jZTogODAsXHJcbiAgfTtcclxufVxyXG5cclxuZnVuY3Rpb24gY2FsY3VsYXRlU2NoZWR1bGVFZmZpY2llbmN5KHNjaGVkdWxlcikge1xyXG4gIC8vINit2LPYp9ioINmD2YHYp9ih2Kkg2KfZhNis2K/ZiNmE2KlcclxuICByZXR1cm4ge1xyXG4gICAgb3ZlcmFsbEVmZmljaWVuY3k6IDg1LFxyXG4gICAgcmVzb3VyY2VVdGlsaXphdGlvbjogOTAsXHJcbiAgICBzcGVjaWFsaXN0VXRpbGl6YXRpb246IDgwLFxyXG4gIH07XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdlbmVyYXRlU2NoZWR1bGVSZWNvbW1lbmRhdGlvbnMoc2NoZWR1bGVyKSB7XHJcbiAgcmV0dXJuIFsn2LLZitin2K/YqSDYudiv2K8g2KfZhNis2YTYs9in2Kog2KfZhNij2LPYqNmI2LnZitipJywgJ9il2LbYp9mB2Kkg2YHYqtix2KfYqiDYsdin2K3YqSDYo9i32YjZhCcsICfYqtmG2YjZiti5INin2YTYo9mG2LTYt9ipJ107XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gcm91dGVyO1xyXG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE1BQU1BLE9BQU8sR0FBR0MsT0FBTyxDQUFDLFNBQVMsQ0FBQztBQUNsQyxNQUFNQyxNQUFNLEdBQUdGLE9BQU8sQ0FBQ0csTUFBTSxDQUFDLENBQUM7QUFDL0IsTUFBTTtFQUFFQztBQUFlLENBQUMsR0FBR0gsT0FBTyxDQUFDLDBCQUEwQixDQUFDOztBQUU5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBQyxNQUFNLENBQUNHLElBQUksQ0FBQyxrQkFBa0IsRUFBRSxPQUFPQyxHQUFHLEVBQUVDLEdBQUcsS0FBSztFQUNsRCxJQUFJO0lBQ0YsTUFBTTtNQUNKQyxhQUFhO01BQ2JDLFNBQVM7TUFDVEMsU0FBUztNQUNUQyxlQUFlO01BQ2ZDLFlBQVk7TUFDWkM7SUFDRixDQUFDLEdBQUdQLEdBQUcsQ0FBQ1EsSUFBSTtJQUVaLElBQUksQ0FBQ04sYUFBYSxJQUFJLENBQUNDLFNBQVMsRUFBRTtNQUNoQyxPQUFPRixHQUFHLENBQUNRLEtBQUssQ0FBQyw4QkFBOEIsRUFBRSx5QkFBeUIsRUFBRSxHQUFHLENBQUM7SUFDbEY7SUFFQSxNQUFNQyxhQUFhLEdBQUcsSUFBSUMsSUFBSSxDQUFDLENBQUM7SUFDaEMsTUFBTUMsV0FBVyxHQUFHLElBQUlELElBQUksQ0FBQyxDQUFDO0lBQzlCQyxXQUFXLENBQUNDLE9BQU8sQ0FBQ0QsV0FBVyxDQUFDRSxPQUFPLENBQUMsQ0FBQyxJQUFJUixZQUFZLElBQUksRUFBRSxDQUFDLENBQUM7SUFFakUsTUFBTVMsU0FBUyxHQUFHLElBQUlqQixjQUFjLENBQUNrQixLQUFLLENBQUM7TUFDekNkLGFBQWE7TUFDYkMsU0FBUztNQUNUSSxrQkFBa0IsRUFBRUEsa0JBQWtCLElBQUksQ0FBQyxDQUFDO01B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QUFJLENBQUM7UUFDZkMsaUJBQWlCLEVBQUUsSUFBSTlELElBQUksQ0FBQ3dELFdBQVcsQ0FBQztRQUN4Q08scUJBQXFCLEVBQUU7VUFDckJDLElBQUksRUFBRSxNQUFNO1VBQ1pDLFlBQVksRUFBRTtRQUNoQixDQUFDO1FBQ0RDLGVBQWUsRUFBRSxFQUFFO1FBQ25CQyxXQUFXLEVBQUU7TUFDZixDQUFDLENBQUM7TUFDRlYsWUFBWSxFQUFFO0lBQ2hCO0lBQ0FELFdBQVcsQ0FBQ3RELE9BQU8sQ0FBQ3NELFdBQVcsQ0FBQ3JELE9BQU8sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0VBQ2hEO0VBRUEsT0FBT2lCLFdBQVc7QUFDcEI7QUFFQSxTQUFTaUIsdUJBQXVCQSxDQUFDakMsU0FBUyxFQUFFO0VBQzFDLE1BQU1nQyxTQUFTLEdBQUcsRUFBRTtFQUNwQixNQUFNO0lBQUVnQztFQUFtQixDQUFDLEdBQUdoRSxTQUFTLENBQUNFLGNBQWM7O0VBRXZEO0VBQ0E7O0VBRUEsT0FBTzhCLFNBQVM7QUFDbEI7QUFFQSxTQUFTSSw0QkFBNEJBLENBQUNKLFNBQVMsRUFBRTtFQUMvQyxPQUFPQSxTQUFTLENBQUNpQyxHQUFHLENBQUNDLFFBQVEsS0FBSztJQUNoQ0EsUUFBUSxFQUFFQSxRQUFRO0lBQ2xCQyxVQUFVLEVBQUUsQ0FBQyxvQkFBb0IsRUFBRSxnQkFBZ0IsRUFBRSxjQUFjO0VBQ3JFLENBQUMsQ0FBQyxDQUFDO0FBQ0w7QUFFQSxTQUFTdkIsNEJBQTRCQSxDQUFDNUMsU0FBUyxFQUFFO0VBQy9DLE9BQU87SUFDTG9FLGlCQUFpQixFQUFFLEVBQUU7SUFDckJDLE1BQU0sRUFBRSxzQkFBc0I7SUFDOUJDLE9BQU8sRUFBRSxDQUFDLFlBQVksRUFBRSxlQUFlLENBQUM7SUFDeENDLFVBQVUsRUFBRTtFQUNkLENBQUM7QUFDSDtBQUVBLFNBQVN2QiwyQkFBMkJBLENBQUNoRCxTQUFTLEVBQUU7RUFDOUM7RUFDQSxPQUFPO0lBQ0x3RSxpQkFBaUIsRUFBRSxFQUFFO0lBQ3JCQyxtQkFBbUIsRUFBRSxFQUFFO0lBQ3ZCQyxxQkFBcUIsRUFBRTtFQUN6QixDQUFDO0FBQ0g7QUFFQSxTQUFTeEIsK0JBQStCQSxDQUFDbEQsU0FBUyxFQUFFO0VBQ2xELE9BQU8sQ0FBQyw2QkFBNkIsRUFBRSx1QkFBdUIsRUFBRSxlQUFlLENBQUM7QUFDbEY7QUFFQTJFLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHL0YsTUFBTSIsImlnbm9yZUxpc3QiOltdfQ==