{"version":3,"names":["EventEmitter","require","v4","uuidv4","Logger","WidgetPersistenceService","constructor","logger","storage","Map","cache","backups","syncQueue","lastSync","saveWidget","userId","dashboardId","widgetData","widgetId","id","storageKey","persistedWidget","metadata","savedAt","Date","syncStatus","version","set","_updateCache","emit","info","error","message","loadWidget","cached","get","_isCacheValid","debug","widget","Error","loadDashboardWidgets","prefix","widgets","key","entries","startsWith","push","sort","a","b","length","updateWidget","updates","backup","JSON","parse","stringify","_saveBackup","Object","assign","updatedAt","deleteWidget","delete","batchSaveWidgets","saved","saved_widget","count","exportDashboard","config","exportedAt","widgetCount","map","w","type","title","position","size","refreshInterval","importDashboard","Array","isArray","imported","widgetConfig","createBackup","backupId","createdAt","backupKey","oldBackupId","shift","oldBackup","restoreFromBackup","restored","getStorageStats","stats","totalWidgets","cachedWidgets","totalBackups","totalSyncQueue","cacheHitRate","toFixed","estimatedSize","_estimateStorageSize","clearCache","clear","queueOperation","operation","data","queuedOp","timestamp","status","retries","operationId","processSyncQueue","results","successful","failed","pending","filter","op","operations","ttl","age","now","totalSize","module","exports"],"sources":["widgetPersistence.service.js"],"sourcesContent":["/**\r\n * Widget Persistence Service\r\n * خدمة حفظ الويدجط\r\n * \r\n * المسؤوليات:\r\n * - حفظ واستعادة بيانات الويدجط في قاعدة البيانات\r\n * - إدارة التخزين المؤقت للأداء\r\n * - نسخ احتياطية تلقائية\r\n * - استيراد وتصدير الإعدادات\r\n */\r\n\r\nconst { EventEmitter } = require('events');\r\nconst { v4: uuidv4 } = require('uuid');\r\nconst Logger = require('../utils/logger');\r\n\r\nclass WidgetPersistenceService extends EventEmitter {\r\n  constructor() {\r\n    super();\r\n    this.logger = Logger;\r\n\r\n    // Persistent storage (simulated database)\r\n    this.storage = new Map();\r\n\r\n    // In-memory cache\r\n    this.cache = new Map();\r\n\r\n    // Backup history\r\n    this.backups = new Map();\r\n\r\n    // Sync queue for offline support\r\n    this.syncQueue = [];\r\n\r\n    // Last sync timestamp\r\n    this.lastSync = {};\r\n  }\r\n\r\n  /**\r\n   * Save widget to database\r\n   * حفظ الويدجت في قاعدة البيانات\r\n   * \r\n   * @param {String} userId - User ID\r\n   * @param {String} dashboardId - Dashboard ID\r\n   * @param {Object} widgetData - Widget data\r\n   * @returns {Object} Saved widget with ID\r\n   */\r\n  async saveWidget(userId, dashboardId, widgetData) {\r\n    try {\r\n      const widgetId = widgetData.id || uuidv4();\r\n\r\n      const storageKey = `${userId}:${dashboardId}:${widgetId}`;\r\n\r\n      const persistedWidget = {\r\n        id: widgetId,\r\n        userId,\r\n        dashboardId,\r\n        ...widgetData,\r\n        metadata: {\r\n          ...widgetData.metadata,\r\n          savedAt: new Date(),\r\n          syncStatus: 'synced',\r\n          version: (widgetData.metadata?.version || 0) + 1\r\n        }\r\n      };\r\n\r\n      // Save to storage\r\n      this.storage.set(storageKey, persistedWidget);\r\n\r\n      // Update cache\r\n      this._updateCache(storageKey, persistedWidget);\r\n\r\n      // Record sync\r\n      this.lastSync[storageKey] = new Date();\r\n\r\n      this.emit('widget:saved', { widgetId, dashboardId });\r\n      this.logger.info(`Widget saved: ${widgetId}`);\r\n\r\n      return persistedWidget;\r\n    } catch (error) {\r\n      this.logger.error(`Error saving widget: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Load widget from database\r\n   * تحميل الويدجت من قاعدة البيانات\r\n   * \r\n   * @param {String} userId - User ID\r\n   * @param {String} dashboardId - Dashboard ID\r\n   * @param {String} widgetId - Widget ID\r\n   * @returns {Object} Widget data\r\n   */\r\n  async loadWidget(userId, dashboardId, widgetId) {\r\n    try {\r\n      const storageKey = `${userId}:${dashboardId}:${widgetId}`;\r\n\r\n      // Check cache first\r\n      const cached = this.cache.get(storageKey);\r\n      if (cached && this._isCacheValid(storageKey)) {\r\n        this.logger.debug(`Widget loaded from cache: ${widgetId}`);\r\n        return cached;\r\n      }\r\n\r\n      // Load from storage\r\n      const widget = this.storage.get(storageKey);\r\n      if (!widget) {\r\n        throw new Error(`Widget not found: ${widgetId}`);\r\n      }\r\n\r\n      // Update cache\r\n      this._updateCache(storageKey, widget);\r\n\r\n      this.emit('widget:loaded', { widgetId, dashboardId });\r\n      return widget;\r\n    } catch (error) {\r\n      this.logger.error(`Error loading widget: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Load all widgets for dashboard\r\n   * تحميل جميع الويدجطس للوحة المعلومات\r\n   * \r\n   * @param {String} userId - User ID\r\n   * @param {String} dashboardId - Dashboard ID\r\n   * @returns {Array} Widgets\r\n   */\r\n  async loadDashboardWidgets(userId, dashboardId) {\r\n    try {\r\n      const prefix = `${userId}:${dashboardId}:`;\r\n      const widgets = [];\r\n\r\n      for (const [key, widget] of this.storage.entries()) {\r\n        if (key.startsWith(prefix)) {\r\n          widgets.push(widget);\r\n        }\r\n      }\r\n\r\n      // Sort by creation date\r\n      widgets.sort((a, b) => \r\n        new Date(a.metadata.savedAt) - new Date(b.metadata.savedAt)\r\n      );\r\n\r\n      this.logger.info(`Loaded ${widgets.length} widgets for dashboard: ${dashboardId}`);\r\n      return widgets;\r\n    } catch (error) {\r\n      this.logger.error(`Error loading dashboard widgets: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Update widget data\r\n   * تحديث بيانات الويدجت\r\n   * \r\n   * @param {String} userId - User ID\r\n   * @param {String} dashboardId - Dashboard ID\r\n   * @param {String} widgetId - Widget ID\r\n   * @param {Object} updates - Update data\r\n   * @returns {Object} Updated widget\r\n   */\r\n  async updateWidget(userId, dashboardId, widgetId, updates) {\r\n    try {\r\n      const storageKey = `${userId}:${dashboardId}:${widgetId}`;\r\n\r\n      const widget = this.storage.get(storageKey);\r\n      if (!widget) {\r\n        throw new Error(`Widget not found: ${widgetId}`);\r\n      }\r\n\r\n      // Create backup before update\r\n      const backup = JSON.parse(JSON.stringify(widget));\r\n      this._saveBackup(`${widgetId}-backup`, backup);\r\n\r\n      // Apply updates\r\n      Object.assign(widget, updates);\r\n      widget.metadata.updatedAt = new Date();\r\n      widget.metadata.version++;\r\n      widget.metadata.syncStatus = 'synced';\r\n\r\n      // Save updated widget\r\n      this.storage.set(storageKey, widget);\r\n      this._updateCache(storageKey, widget);\r\n      this.lastSync[storageKey] = new Date();\r\n\r\n      this.emit('widget:updated', { widgetId, dashboardId, updates });\r\n      this.logger.info(`Widget updated: ${widgetId}`);\r\n\r\n      return widget;\r\n    } catch (error) {\r\n      this.logger.error(`Error updating widget: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Delete widget\r\n   * حذف الويدجت\r\n   * \r\n   * @param {String} userId - User ID\r\n   * @param {String} dashboardId - Dashboard ID\r\n   * @param {String} widgetId - Widget ID\r\n   */\r\n  async deleteWidget(userId, dashboardId, widgetId) {\r\n    try {\r\n      const storageKey = `${userId}:${dashboardId}:${widgetId}`;\r\n\r\n      // Create backup before deletion\r\n      const widget = this.storage.get(storageKey);\r\n      if (widget) {\r\n        this._saveBackup(`${widgetId}-deleted`, widget);\r\n      }\r\n\r\n      this.storage.delete(storageKey);\r\n      this.cache.delete(storageKey);\r\n\r\n      this.emit('widget:deleted', { widgetId, dashboardId });\r\n      this.logger.info(`Widget deleted: ${widgetId}`);\r\n    } catch (error) {\r\n      this.logger.error(`Error deleting widget: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Batch save widgets\r\n   * حفظ مجموعة من الويدجطس\r\n   * \r\n   * @param {String} userId - User ID\r\n   * @param {String} dashboardId - Dashboard ID\r\n   * @param {Array} widgets - Widgets to save\r\n   * @returns {Array} Saved widgets\r\n   */\r\n  async batchSaveWidgets(userId, dashboardId, widgets) {\r\n    try {\r\n      const saved = [];\r\n\r\n      for (const widget of widgets) {\r\n        const saved_widget = await this.saveWidget(userId, dashboardId, widget);\r\n        saved.push(saved_widget);\r\n      }\r\n\r\n      this.emit('widgets:batchSaved', { dashboardId, count: saved.length });\r\n      this.logger.info(`Batch saved ${saved.length} widgets`);\r\n\r\n      return saved;\r\n    } catch (error) {\r\n      this.logger.error(`Error batch saving widgets: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Export dashboard configuration\r\n   * تصدير إعدادات لوحة المعلومات\r\n   * \r\n   * @param {String} userId - User ID\r\n   * @param {String} dashboardId - Dashboard ID\r\n   * @returns {Object} Exportable configuration\r\n   */\r\n  async exportDashboard(userId, dashboardId) {\r\n    try {\r\n      const widgets = await this.loadDashboardWidgets(userId, dashboardId);\r\n\r\n      const config = {\r\n        version: '1.0',\r\n        exportedAt: new Date(),\r\n        userId,\r\n        dashboardId,\r\n        widgetCount: widgets.length,\r\n        widgets: widgets.map(w => ({\r\n          type: w.type,\r\n          title: w.title,\r\n          config: w.config,\r\n          position: w.position,\r\n          size: w.size,\r\n          refreshInterval: w.refreshInterval\r\n        }))\r\n      };\r\n\r\n      this.emit('dashboard:exported', { dashboardId });\r\n      this.logger.info(`Dashboard exported: ${dashboardId}`);\r\n\r\n      return config;\r\n    } catch (error) {\r\n      this.logger.error(`Error exporting dashboard: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Import dashboard configuration\r\n   * استيراد إعدادات لوحة المعلومات\r\n   * \r\n   * @param {String} userId - User ID\r\n   * @param {String} dashboardId - Dashboard ID\r\n   * @param {Object} config - Configuration to import\r\n   * @returns {Array} Imported widgets\r\n   */\r\n  async importDashboard(userId, dashboardId, config) {\r\n    try {\r\n      const { widgets } = config;\r\n\r\n      if (!widgets || !Array.isArray(widgets)) {\r\n        throw new Error('Invalid configuration format');\r\n      }\r\n\r\n      const imported = [];\r\n\r\n      for (const widgetConfig of widgets) {\r\n        const widget = await this.saveWidget(userId, dashboardId, {\r\n          id: uuidv4(),\r\n          ...widgetConfig\r\n        });\r\n        imported.push(widget);\r\n      }\r\n\r\n      this.emit('dashboard:imported', { dashboardId, count: imported.length });\r\n      this.logger.info(`Dashboard imported: ${dashboardId} with ${imported.length} widgets`);\r\n\r\n      return imported;\r\n    } catch (error) {\r\n      this.logger.error(`Error importing dashboard: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Create automatic backup\r\n   * إنشاء نسخة احتياطية تلقائية\r\n   * \r\n   * @param {String} userId - User ID\r\n   * @param {String} dashboardId - Dashboard ID\r\n   * @returns {String} Backup ID\r\n   */\r\n  async createBackup(userId, dashboardId) {\r\n    try {\r\n      const widgets = await this.loadDashboardWidgets(userId, dashboardId);\r\n      const backupId = `backup-${uuidv4()}`;\r\n\r\n      const backup = {\r\n        id: backupId,\r\n        userId,\r\n        dashboardId,\r\n        widgets,\r\n        createdAt: new Date(),\r\n        size: JSON.stringify(widgets).length\r\n      };\r\n\r\n      this._saveBackup(backupId, backup);\r\n\r\n      // Keep only last 10 backups\r\n      const backupKey = `${userId}:${dashboardId}`;\r\n      const backups = this.backups.get(backupKey) || [];\r\n      backups.push(backupId);\r\n\r\n      if (backups.length > 10) {\r\n        const oldBackupId = backups.shift();\r\n        const oldBackup = this.backups.get(oldBackupId);\r\n        if (oldBackup) {\r\n          this.backups.delete(oldBackupId);\r\n        }\r\n      }\r\n\r\n      this.backups.set(backupKey, backups);\r\n\r\n      this.emit('backup:created', { backupId, dashboardId });\r\n      this.logger.info(`Backup created: ${backupId}`);\r\n\r\n      return backupId;\r\n    } catch (error) {\r\n      this.logger.error(`Error creating backup: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Restore from backup\r\n   * الاستعادة من نسخة احتياطية\r\n   * \r\n   * @param {String} userId - User ID\r\n   * @param {String} dashboardId - Dashboard ID\r\n   * @param {String} backupId - Backup ID\r\n   * @returns {Array} Restored widgets\r\n   */\r\n  async restoreFromBackup(userId, dashboardId, backupId) {\r\n    try {\r\n      const backup = this.backups.get(backupId);\r\n      if (!backup) {\r\n        throw new Error(`Backup not found: ${backupId}`);\r\n      }\r\n\r\n      // Clear existing widgets\r\n      const prefix = `${userId}:${dashboardId}:`;\r\n      for (const [key] of this.storage.entries()) {\r\n        if (key.startsWith(prefix)) {\r\n          this.storage.delete(key);\r\n          this.cache.delete(key);\r\n        }\r\n      }\r\n\r\n      // Restore widgets\r\n      const restored = [];\r\n      for (const widget of backup.widgets) {\r\n        const saved = await this.saveWidget(userId, dashboardId, widget);\r\n        restored.push(saved);\r\n      }\r\n\r\n      this.emit('backup:restored', { backupId, dashboardId });\r\n      this.logger.info(`Backup restored: ${backupId}`);\r\n\r\n      return restored;\r\n    } catch (error) {\r\n      this.logger.error(`Error restoring backup: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get storage statistics\r\n   * الحصول على إحصائيات التخزين\r\n   * \r\n   * @returns {Object} Storage stats\r\n   */\r\n  getStorageStats() {\r\n    try {\r\n      const stats = {\r\n        totalWidgets: this.storage.size,\r\n        cachedWidgets: this.cache.size,\r\n        totalBackups: this.backups.size,\r\n        totalSyncQueue: this.syncQueue.length,\r\n        cacheHitRate: this.cache.size > 0 \r\n          ? ((this.cache.size / (this.cache.size + this.storage.size)) * 100).toFixed(2)\r\n          : 0,\r\n        estimatedSize: this._estimateStorageSize()\r\n      };\r\n\r\n      return stats;\r\n    } catch (error) {\r\n      this.logger.error(`Error getting storage stats: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Clear cache\r\n   * مسح الذاكرة المؤقتة\r\n   * \r\n   * @params {String} storageKey - Optional specific key to clear\r\n   */\r\n  clearCache(storageKey = null) {\r\n    try {\r\n      if (storageKey) {\r\n        this.cache.delete(storageKey);\r\n        this.logger.info(`Cache cleared for: ${storageKey}`);\r\n      } else {\r\n        this.cache.clear();\r\n        this.logger.info('All cache cleared');\r\n      }\r\n\r\n      this.emit('cache:cleared');\r\n    } catch (error) {\r\n      this.logger.error(`Error clearing cache: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Queue operation for offline sync\r\n   * إضافة عملية في قائمة الانتظار للمزامنة بدون اتصال\r\n   * \r\n   * @param {Object} operation - Operation to queue\r\n   */\r\n  queueOperation(operation) {\r\n    try {\r\n      const {\r\n        type,\r\n        userId,\r\n        dashboardId,\r\n        widgetId,\r\n        data\r\n      } = operation;\r\n\r\n      const queuedOp = {\r\n        id: uuidv4(),\r\n        type,\r\n        userId,\r\n        dashboardId,\r\n        widgetId,\r\n        data,\r\n        timestamp: new Date(),\r\n        status: 'pending',\r\n        retries: 0\r\n      };\r\n\r\n      this.syncQueue.push(queuedOp);\r\n\r\n      this.emit('operation:queued', { operationId: queuedOp.id });\r\n      this.logger.info(`Operation queued: ${type}`);\r\n\r\n      return queuedOp.id;\r\n    } catch (error) {\r\n      this.logger.error(`Error queuing operation: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Process sync queue\r\n   * معالجة قائمة الانتظار للمزامنة\r\n   * \r\n   * @returns {Object} Sync result\r\n   */\r\n  async processSyncQueue() {\r\n    try {\r\n      const results = {\r\n        successful: 0,\r\n        failed: 0,\r\n        pending: this.syncQueue.filter(op => op.status === 'pending').length,\r\n        operations: []\r\n      };\r\n\r\n      for (const operation of this.syncQueue) {\r\n        if (operation.status === 'pending') {\r\n          try {\r\n            // Process operation\r\n            operation.status = 'synced';\r\n            results.successful++;\r\n            results.operations.push({ id: operation.id, status: 'synced' });\r\n          } catch (error) {\r\n            operation.retries++;\r\n            if (operation.retries >= 3) {\r\n              operation.status = 'failed';\r\n              results.failed++;\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      // Remove completed operations\r\n      this.syncQueue = this.syncQueue.filter(op => op.status === 'pending');\r\n\r\n      this.emit('syncQueue:processed', results);\r\n      this.logger.info(`Sync queue processed: ${results.successful} successful, ${results.failed} failed`);\r\n\r\n      return results;\r\n    } catch (error) {\r\n      this.logger.error(`Error processing sync queue: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Update cache\r\n   * تحديث الذاكرة المؤقتة\r\n   * \r\n   * @private\r\n   */\r\n  _updateCache(storageKey, widget) {\r\n    this.cache.set(storageKey, {\r\n      data: widget,\r\n      timestamp: new Date(),\r\n      ttl: 5 * 60 * 1000  // 5 minutes\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Check if cache is valid\r\n   * التحقق من صحة الذاكرة المؤقتة\r\n   * \r\n   * @private\r\n   */\r\n  _isCacheValid(storageKey) {\r\n    const cached = this.cache.get(storageKey);\r\n    if (!cached) return false;\r\n\r\n    const age = Date.now() - cached.timestamp;\r\n    return age < cached.ttl;\r\n  }\r\n\r\n  /**\r\n   * Save backup\r\n   * حفظ نسخة احتياطية\r\n   * \r\n   * @private\r\n   */\r\n  _saveBackup(backupId, backup) {\r\n    this.backups.set(backupId, backup);\r\n  }\r\n\r\n  /**\r\n   * Estimate storage size\r\n   * تقدير حجم التخزين\r\n   * \r\n   * @private\r\n   */\r\n  _estimateStorageSize() {\r\n    let totalSize = 0;\r\n\r\n    for (const [, widget] of this.storage.entries()) {\r\n      totalSize += JSON.stringify(widget).length;\r\n    }\r\n\r\n    return `${(totalSize / 1024).toFixed(2)} KB`;\r\n  }\r\n}\r\n\r\nmodule.exports = new WidgetPersistenceService();\r\n"],"mappings":"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","ignoreList":[]}