{"version":3,"names":["CSVProcessor","require","DatabaseMigration","MigrationManager","fs","_path","describe","csvProcessor","testCSVPath","beforeAll","delimiter","encoding","maxRowsPerChunk","testData","writeFileSync","afterAll","existsSync","unlinkSync","test","result","importCSV","columns","expect","success","toBe","recordCount","data","toHaveLength","id","name","email","exportPath","exportToCSV","status","transformRules","val","toLowerCase","mapping","transformed","transformData","validateCSVStructure","valid","toContain","sampleCSV","samples","getCSVInfo","rowCount","columnCount","toEqual","filtered","filterData","row","migration","mockSourceDB","mockTargetDB","query","jest","fn","console","setBatchSize","batchSize","mockResolvedValueOnce","count","mockResolvedValue","migrateTable","recordsMigrated","verifyMigration","match","sourceRecords","targetRecords","discrepancy","migrationLog","table","duration","summary","getMigrationSummary","completedTables","totalRecordsMigrated","totalDuration","manager","sourceDB","targetDB","logger","info","error","warn","plan","createMigrationPlan","preValidation","postValidation","tables","steps","length","toBeGreaterThan","some","s","type","pauseMigration","resumeMigration","executionLog","step","clearLog","getExecutionSummary","completedSteps","overallStatus","options","postCleanup","generateMigrationSteps","Array","from","_","i","_mockDB","emptyPath","rejects","toThrow","mockRejectedValue","Error","largeData","startTime","Date","now","toBeLessThan","stats","module","exports"],"sources":["migration.test.js"],"sourcesContent":["/**\r\n * Migration System Tests\r\n * Comprehensive test suite for migration utilities\r\n */\r\n\r\nconst CSVProcessor = require('../services/migration/CSVProcessor');\r\nconst DatabaseMigration = require('../services/migration/DatabaseMigration');\r\nconst MigrationManager = require('../services/migration/MigrationManager');\r\nconst fs = require('fs');\r\nconst _path = require('path');\r\n\r\n/**\r\n * Test Suite for CSVProcessor\r\n */\r\ndescribe('CSVProcessor', () => {\r\n  let csvProcessor;\r\n  const testCSVPath = './test-data.csv';\r\n\r\n  beforeAll(() => {\r\n    csvProcessor = new CSVProcessor({\r\n      delimiter: ',',\r\n      encoding: 'utf-8',\r\n      maxRowsPerChunk: 10,\r\n    });\r\n\r\n    // Create test CSV\r\n    const testData = 'id,name,email,age\\n1,John,john@example.com,30\\n2,Jane,jane@example.com,25\\n';\r\n    fs.writeFileSync(testCSVPath, testData);\r\n  });\r\n\r\n  afterAll(() => {\r\n    if (fs.existsSync(testCSVPath)) {\r\n      fs.unlinkSync(testCSVPath);\r\n    }\r\n  });\r\n\r\n  test('should import CSV successfully', async () => {\r\n    const result = await csvProcessor.importCSV(testCSVPath, { columns: true });\r\n\r\n    expect(result.success).toBe(true);\r\n    expect(result.recordCount).toBe(2);\r\n    expect(result.data).toHaveLength(2);\r\n  });\r\n\r\n  test('should export CSV successfully', async () => {\r\n    const data = [\r\n      { id: 1, name: 'John', email: 'john@example.com' },\r\n      { id: 2, name: 'Jane', email: 'jane@example.com' },\r\n    ];\r\n\r\n    const exportPath = './test-export.csv';\r\n    const result = await csvProcessor.exportToCSV(data, exportPath);\r\n\r\n    expect(result.success).toBe(true);\r\n    expect(result.recordCount).toBe(2);\r\n    expect(fs.existsSync(exportPath)).toBe(true);\r\n\r\n    // Cleanup\r\n    fs.unlinkSync(exportPath);\r\n  });\r\n\r\n  test('should transform data', () => {\r\n    const data = [\r\n      { email: 'JOHN@EXAMPLE.COM', status: '1' },\r\n      { email: 'JANE@EXAMPLE.COM', status: '0' },\r\n    ];\r\n\r\n    const transformRules = {\r\n      email: (val) => val.toLowerCase(),\r\n      status: { mapping: { '1': 'active', '0': 'inactive' } },\r\n    };\r\n\r\n    const transformed = csvProcessor.transformData(data, transformRules);\r\n\r\n    expect(transformed[0].email).toBe('john@example.com');\r\n    expect(transformed[0].status).toBe('active');\r\n  });\r\n\r\n  test('should validate CSV structure', async () => {\r\n    const result = await csvProcessor.validateCSVStructure(testCSVPath, ['id', 'name', 'email']);\r\n\r\n    expect(result.valid).toBe(true);\r\n    expect(result.columns).toContain('id');\r\n    expect(result.columns).toContain('name');\r\n  });\r\n\r\n  test('should sample CSV', async () => {\r\n    const result = await csvProcessor.sampleCSV(testCSVPath, 1);\r\n\r\n    expect(result.success).toBe(true);\r\n    expect(result.samples).toHaveLength(1);\r\n  });\r\n\r\n  test('should get CSV info', async () => {\r\n    const result = await csvProcessor.getCSVInfo(testCSVPath);\r\n\r\n    expect(result.rowCount).toBe(2);\r\n    expect(result.columnCount).toBe(4);\r\n    expect(result.columns).toEqual(['id', 'name', 'email', 'age']);\r\n  });\r\n\r\n  test('should filter data', () => {\r\n    const data = [\r\n      { id: 1, status: 'active' },\r\n      { id: 2, status: 'inactive' },\r\n      { id: 3, status: 'active' },\r\n    ];\r\n\r\n    const filtered = csvProcessor.filterData(data, (row) => row.status === 'active');\r\n\r\n    expect(filtered).toHaveLength(2);\r\n  });\r\n});\r\n\r\n/**\r\n * Test Suite for DatabaseMigration\r\n */\r\ndescribe('DatabaseMigration', () => {\r\n  let migration;\r\n  let mockSourceDB;\r\n  let mockTargetDB;\r\n\r\n  beforeAll(() => {\r\n    // Mock database connections\r\n    mockSourceDB = {\r\n      query: jest.fn(),\r\n    };\r\n\r\n    mockTargetDB = {\r\n      query: jest.fn(),\r\n    };\r\n\r\n    migration = new DatabaseMigration(mockSourceDB, mockTargetDB, console);\r\n  });\r\n\r\n  test('should set batch size', () => {\r\n    migration.setBatchSize(5000);\r\n    expect(migration.batchSize).toBe(5000);\r\n  });\r\n\r\n  test('should migrate table successfully', async () => {\r\n    mockSourceDB.query\r\n      .mockResolvedValueOnce([{ count: 2 }]) // COUNT query\r\n      .mockResolvedValueOnce([\r\n        { id: 1, name: 'John' },\r\n        { id: 2, name: 'Jane' },\r\n      ]); // SELECT query\r\n\r\n    mockTargetDB.query.mockResolvedValue(true); // INSERT query\r\n\r\n    const result = await migration.migrateTable('users');\r\n\r\n    expect(result.status).toBe('completed');\r\n    expect(result.recordsMigrated).toBe(2);\r\n  });\r\n\r\n  test('should verify migration', async () => {\r\n    mockSourceDB.query.mockResolvedValueOnce([{ count: 100 }]);\r\n    mockTargetDB.query.mockResolvedValueOnce([{ count: 100 }]);\r\n\r\n    const result = await migration.verifyMigration('users');\r\n\r\n    expect(result.match).toBe(true);\r\n    expect(result.sourceRecords).toBe(100);\r\n    expect(result.targetRecords).toBe(100);\r\n  });\r\n\r\n  test('should handle discrepancies in verification', async () => {\r\n    mockSourceDB.query.mockResolvedValueOnce([{ count: 100 }]);\r\n    mockTargetDB.query.mockResolvedValueOnce([{ count: 95 }]);\r\n\r\n    const result = await migration.verifyMigration('users');\r\n\r\n    expect(result.match).toBe(false);\r\n    expect(result.discrepancy).toBe(5);\r\n  });\r\n\r\n  test('should get migration summary', () => {\r\n    migration.migrationLog = [\r\n      {\r\n        table: 'users',\r\n        status: 'completed',\r\n        recordsMigrated: 100,\r\n        duration: 1000,\r\n      },\r\n      {\r\n        table: 'products',\r\n        status: 'completed',\r\n        recordsMigrated: 50,\r\n        duration: 500,\r\n      },\r\n    ];\r\n\r\n    const summary = migration.getMigrationSummary();\r\n\r\n    expect(summary.completedTables).toBe(2);\r\n    expect(summary.totalRecordsMigrated).toBe(150);\r\n    expect(summary.totalDuration).toBe(1500);\r\n  });\r\n});\r\n\r\n/**\r\n * Test Suite for MigrationManager\r\n */\r\ndescribe('MigrationManager', () => {\r\n  let manager;\r\n  let mockSourceDB;\r\n  let mockTargetDB;\r\n\r\n  beforeAll(() => {\r\n    mockSourceDB = {\r\n      query: jest.fn(),\r\n    };\r\n\r\n    mockTargetDB = {\r\n      query: jest.fn(),\r\n    };\r\n\r\n    manager = new MigrationManager({\r\n      sourceDB: mockSourceDB,\r\n      targetDB: mockTargetDB,\r\n      logger: { info: jest.fn(), error: jest.fn(), warn: jest.fn() },\r\n    });\r\n  });\r\n\r\n  test('should create migration plan', () => {\r\n    const plan = manager.createMigrationPlan(['users', 'products'], {\r\n      preValidation: true,\r\n      postValidation: true,\r\n    });\r\n\r\n    expect(plan.tables).toEqual(['users', 'products']);\r\n    expect(plan.steps.length).toBeGreaterThan(0);\r\n    expect(plan.steps.some((s) => s.type === 'validation')).toBe(true);\r\n  });\r\n\r\n  test('should pause migration', () => {\r\n    const result = manager.pauseMigration();\r\n\r\n    expect(result.status).toBe('paused');\r\n  });\r\n\r\n  test('should resume migration', () => {\r\n    const result = manager.resumeMigration();\r\n\r\n    expect(result.status).toBe('resumed');\r\n  });\r\n\r\n  test('should clear execution log', () => {\r\n    manager.executionLog = [{ step: 'test' }];\r\n    manager.clearLog();\r\n\r\n    expect(manager.executionLog).toHaveLength(0);\r\n  });\r\n\r\n  test('should get execution summary', () => {\r\n    manager.executionLog = [\r\n      { step: 'step1', status: 'completed', duration: 1000 },\r\n      { step: 'step2', status: 'completed', duration: 500 },\r\n    ];\r\n\r\n    const summary = manager.getExecutionSummary();\r\n\r\n    expect(summary.summary.completedSteps).toBe(2);\r\n    expect(summary.summary.overallStatus).toBe('success');\r\n  });\r\n\r\n  test('should generate migration steps correctly', () => {\r\n    const tables = ['users', 'products'];\r\n    const options = {\r\n      preValidation: true,\r\n      postValidation: true,\r\n      postCleanup: true,\r\n    };\r\n\r\n    const steps = manager.generateMigrationSteps(tables, options);\r\n\r\n    expect(steps[0].type).toBe('validation'); // pre-validation\r\n    expect(steps[1].type).toBe('backup');\r\n    expect(steps.some((s) => s.table === 'users')).toBe(true);\r\n    expect(steps[steps.length - 1].type).toBe('cleanup'); // post-cleanup\r\n  });\r\n});\r\n\r\n/**\r\n * Integration Tests\r\n */\r\ndescribe('Migration System Integration', () => {\r\n  test('should complete full migration workflow', async () => {\r\n    const mockSourceDB = {\r\n      query: jest.fn()\r\n        .mockResolvedValueOnce([{ count: 10 }]) // COUNT\r\n        .mockResolvedValueOnce(\r\n          Array.from({ length: 10 }, (_, i) => ({\r\n            id: i + 1,\r\n            name: `User ${i + 1}`,\r\n          }))\r\n        ), // SELECT\r\n    };\r\n\r\n    const mockTargetDB = {\r\n      query: jest.fn().mockResolvedValue(true),\r\n    };\r\n\r\n    const manager = new MigrationManager({\r\n      sourceDB: mockSourceDB,\r\n      targetDB: mockTargetDB,\r\n      logger: console,\r\n    });\r\n\r\n    // Create plan\r\n    const plan = manager.createMigrationPlan(['users']);\r\n    expect(plan.tables).toEqual(['users']);\r\n\r\n    // Verify steps were created\r\n    expect(plan.steps.length).toBeGreaterThan(0);\r\n  });\r\n\r\n  test('should handle CSV import and database migration', async () => {\r\n    const csvProcessor = new CSVProcessor();\r\n    const _mockDB = {\r\n      query: jest.fn().mockResolvedValue(true),\r\n    };\r\n\r\n    // Simulate CSV import and transformation\r\n    const data = [\r\n      { id: '1', email: 'JOHN@EXAMPLE.COM', status: '1' },\r\n      { id: '2', email: 'JANE@EXAMPLE.COM', status: '0' },\r\n    ];\r\n\r\n    const transformed = csvProcessor.transformData(data, {\r\n      id: { type: 'integer' },\r\n      email: (val) => val.toLowerCase(),\r\n      status: { mapping: { '1': 'active', '0': 'inactive' } },\r\n    });\r\n\r\n    expect(transformed[0].email).toBe('john@example.com');\r\n    expect(transformed[0].status).toBe('active');\r\n    expect(typeof transformed[0].id).toBe('number');\r\n  });\r\n});\r\n\r\n/**\r\n * Error Handling Tests\r\n */\r\ndescribe('Migration Error Handling', () => {\r\n  test('should handle empty CSV', async () => {\r\n    const csvProcessor = new CSVProcessor();\r\n    const emptyPath = './empty-test.csv';\r\n    fs.writeFileSync(emptyPath, '');\r\n\r\n    try {\r\n      const result = await csvProcessor.getCSVInfo(emptyPath);\r\n      expect(result.rowCount).toBe(0);\r\n    } finally {\r\n      fs.unlinkSync(emptyPath);\r\n    }\r\n  });\r\n\r\n  test('should handle invalid CSV path', async () => {\r\n    const csvProcessor = new CSVProcessor();\r\n\r\n    await expect(csvProcessor.getCSVInfo('./non-existent-file.csv')).rejects.toThrow();\r\n  });\r\n\r\n  test('should handle database errors gracefully', async () => {\r\n    const mockSourceDB = {\r\n      query: jest.fn().mockRejectedValue(new Error('Database error')),\r\n    };\r\n\r\n    const mockTargetDB = {\r\n      query: jest.fn(),\r\n    };\r\n\r\n    const migration = new DatabaseMigration(mockSourceDB, mockTargetDB);\r\n\r\n    await expect(migration.migrateTable('users')).rejects.toThrow('Database error');\r\n  });\r\n});\r\n\r\n/**\r\n * Performance Tests\r\n */\r\ndescribe('Migration Performance', () => {\r\n  test('should handle large batch sizes efficiently', async () => {\r\n    const csvProcessor = new CSVProcessor({\r\n      maxRowsPerChunk: 10000,\r\n    });\r\n\r\n    // Create large test data\r\n    const largeData = Array.from({ length: 50000 }, (_, i) => ({\r\n      id: i + 1,\r\n      name: `User ${i + 1}`,\r\n      email: `user${i + 1}@example.com`,\r\n    }));\r\n\r\n    const startTime = Date.now();\r\n    // Transform would be applied here\r\n    const transformed = csvProcessor.transformData(largeData, {\r\n      email: (val) => val.toLowerCase(),\r\n    });\r\n    const duration = Date.now() - startTime;\r\n\r\n    expect(transformed).toHaveLength(50000);\r\n    expect(duration).toBeLessThan(1000); // Should complete in less than 1 second\r\n  });\r\n\r\n  test('should report accurate timing information', () => {\r\n    const manager = new MigrationManager({\r\n      sourceDB: {},\r\n      targetDB: {},\r\n    });\r\n\r\n    manager.executionLog = [\r\n      { step: 'migration', status: 'completed', duration: 5000 },\r\n    ];\r\n\r\n    const summary = manager.getExecutionSummary();\r\n    expect(summary.stats.totalDuration).toBe(5000);\r\n  });\r\n});\r\n\r\nmodule.exports = {\r\n  // Export test utilities if needed\r\n};\r\n"],"mappings":"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","ignoreList":[]}