{"version":3,"names":["mongoose","require","GPSLocationSchema","Schema","driver","type","Types","ObjectId","ref","required","vehicle","trip","sparse","location","String","enum","default","coordinates","Number","validate","validator","arr","length","message","speed","min","max","speedLimitViolation","Boolean","maxSpeedAllowed","heading","altitude","accuracy","satellites","engineRunning","seatbeltStatus","doorsLocked","acceleration","x","y","z","harshAcceleration","harshBraking","sharpTurn","idleTime","drivingStatus","distanceDriven","fuelConsumption","alerts","severity","createdAt","Date","now","acknowledged","acknowledgedAt","acknowledgedBy","geofences","fenceId","status","entryTime","exitTime","previousLocations","timestamp","processed","processingNotes","source","deviceModel","osVersion","appVersion","timestamps","updatedAt","index","virtual","get","locTime","getTime","methods","hasActiveAlerts","some","alert","getActiveAlerts","filter","acknowledgeAlert","alertIndex","save","getDistanceTo","otherLocation","lon1","lat1","lon2","lat2","R","dLat","Math","PI","dLon","a","sin","cos","c","atan2","sqrt","addPreviousLocation","unshift","pop","calculateTripDuration","Trip","model","tripData","findById","select","startTime","endTime","statics","getLatestLocation","driverId","findOne","sort","getLocationsInTimeRange","find","$gte","$lte","findNearby","longitude","latitude","maxDistance","$near","$geometry","$maxDistance","getSpeedingViolations","countDocuments","getAverageSpeed","result","aggregate","$match","createFromHexString","$group","_id","averageSpeed","$avg","maxSpeed","$max","minSpeed","$min","pre","next","module","exports"],"sources":["GPSLocation.js"],"sourcesContent":["/**\r\n * Driver GPS Location Tracking Model\r\n * نموذج تتبع موقع السائق في الوقت الفعلي\r\n * Phase 30 - GPS Tracking System\r\n */\r\n\r\nconst mongoose = require('mongoose');\r\n\r\nconst GPSLocationSchema = new mongoose.Schema(\r\n  {\r\n    // ===== معلومات السائق والمركبة =====\r\n    driver: {\r\n      type: mongoose.Schema.Types.ObjectId,\r\n      ref: 'Driver',\r\n      required: true\r\n    },\r\n    vehicle: {\r\n      type: mongoose.Schema.Types.ObjectId,\r\n      ref: 'Vehicle',\r\n      required: true,\r\n    },\r\n    trip: {\r\n      type: mongoose.Schema.Types.ObjectId,\r\n      ref: 'Trip',\r\n      sparse: true, // قد لا تكون هناك رحلة نشطة\r\n    },\r\n\r\n    // ===== إحداثيات الموقع =====\r\n    location: {\r\n      type: {\r\n        type: String,\r\n        enum: ['Point'],\r\n        default: 'Point',\r\n      },\r\n      coordinates: {\r\n        type: [Number], // [longitude, latitude]\r\n        required: true,\r\n        // الفهرس الجغرافي لعمليات البحث بالقرب من الموقع\r\n        validate: {\r\n          validator: function (arr) {\r\n            return arr.length === 2 && arr[0] >= -180 && arr[0] <= 180 && arr[1] >= -90 && arr[1] <= 90;\r\n          },\r\n          message: 'إحداثيات غير صحيحة',\r\n        },\r\n      },\r\n    },\r\n\r\n    // ===== معلومات السرعة والاتجاه =====\r\n    speed: {\r\n      type: Number, // بالكيلومتر في الساعة\r\n      default: 0,\r\n      min: 0,\r\n      max: 300,\r\n    },\r\n    speedLimitViolation: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    maxSpeedAllowed: {\r\n      type: Number,\r\n      default: 120,\r\n    },\r\n    heading: {\r\n      type: Number, // الاتجاه بالدرجات (0-360)\r\n      min: 0,\r\n      max: 360,\r\n    },\r\n    altitude: Number, // الارتفاع بالأمتار\r\n\r\n    // ===== جودة الإشارة =====\r\n    accuracy: {\r\n      type: Number, // دقة الـ GPS بالأمتار\r\n      default: 0,\r\n    },\r\n    satellites: {\r\n      type: Number, // عدد الأقمار الصناعية المرئية\r\n      min: 0,\r\n      max: 50,\r\n    },\r\n\r\n    // ===== حالة المحرك =====\r\n    engineRunning: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    seatbeltStatus: {\r\n      type: String,\r\n      enum: ['fastened', 'unfastened', 'unknown'],\r\n      default: 'unknown',\r\n    },\r\n    doorsLocked: Boolean,\r\n\r\n    // ===== البيانات الحسية المتقدمة =====\r\n    acceleration: {\r\n      x: Number, // التسارع الجانبي\r\n      y: Number, // التسارع الأمامي/الخلفي\r\n      z: Number, // التسارع العمودي\r\n    },\r\n    harshAcceleration: Boolean,\r\n    harshBraking: Boolean,\r\n    sharpTurn: Boolean,\r\n    idleTime: Number, // وقت التوقف بالثواني\r\n\r\n    // ===== حالة الرحلة =====\r\n    drivingStatus: {\r\n      type: String,\r\n      enum: ['stopped', 'idling', 'driving', 'parked'],\r\n      default: 'stopped',\r\n    },\r\n    distanceDriven: {\r\n      type: Number,\r\n      default: 0, // بالكيلومتر\r\n    },\r\n    fuelConsumption: Number, // لترات في الساعة\r\n\r\n    // ===== التنبيهات والتحذيرات =====\r\n    alerts: [\r\n      {\r\n        type: {\r\n          type: String,\r\n          enum: [\r\n            'speeding',\r\n            'harsh_acceleration',\r\n            'harsh_braking',\r\n            'sharp_turn',\r\n            'seatbelt_unbuckled',\r\n            'drowsy_driving',\r\n            'distracted_driving',\r\n            'off_route',\r\n            'geofence_breach',\r\n            'battery_low',\r\n          ],\r\n        },\r\n        severity: {\r\n          type: String,\r\n          enum: ['low', 'medium', 'high', 'critical'],\r\n          default: 'medium',\r\n        },\r\n        message: String,\r\n        createdAt: {\r\n          type: Date,\r\n          default: Date.now,\r\n        },\r\n        acknowledged: {\r\n          type: Boolean,\r\n          default: false,\r\n        },\r\n        acknowledgedAt: Date,\r\n        acknowledgedBy: String,\r\n      },\r\n    ],\r\n\r\n    // ===== الجيوفنس (الحدود الجغرافية) =====\r\n    geofences: [\r\n      {\r\n        fenceId: mongoose.Schema.Types.ObjectId,\r\n        status: {\r\n          type: String,\r\n          enum: ['inside', 'outside', 'boundary'],\r\n        },\r\n        entryTime: Date,\r\n        exitTime: Date,\r\n      },\r\n    ],\r\n\r\n    // ===== البيانات التاريخية =====\r\n    previousLocations: [\r\n      {\r\n        coordinates: [Number],\r\n        timestamp: Date,\r\n        speed: Number,\r\n      },\r\n    ], // آخر 10 مواقع\r\n\r\n    // ===== معالجة البيانات =====\r\n    processed: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    processingNotes: String,\r\n\r\n    // ===== البيانات الوصفية =====\r\n    source: {\r\n      type: String,\r\n      enum: ['gps', 'cellular', 'wifi', 'hybrid'],\r\n      default: 'gps',\r\n    },\r\n    deviceModel: String,\r\n    osVersion: String,\r\n    appVersion: String,\r\n\r\n    // الوقت\r\n    timestamp: {\r\n      type: Date,\r\n      required: true,\r\n      default: Date.now\r\n    },\r\n  },\r\n  {\r\n    timestamps: {\r\n      createdAt: 'createdAt',\r\n      updatedAt: 'updatedAt',\r\n    },\r\n  }\r\n);\r\n\r\n// ===== INDEXES =====\r\n\r\n// فهرس جغرافي لعمليات البحث المكانية\r\nGPSLocationSchema.index({ 'location.coordinates': '2dsphere' });\r\n\r\n// فهرس مركب للسائق والوقت\r\nGPSLocationSchema.index({ driver: 1, timestamp: -1 });\r\n\r\n// فهرس للرحلة\r\nGPSLocationSchema.index({ trip: 1, timestamp: -1 });\r\n\r\n// فهرس لجودة الإشارة\r\nGPSLocationSchema.index({ accuracy: 1 });\r\n\r\n// ===== VIRTUAL FIELDS =====\r\n\r\n/**\r\n * حساب الموقع بصيغة عددية لسهولة الاستخدام\r\n */\r\nGPSLocationSchema.virtual('lat').get(function () {\r\n  return this.location?.coordinates?.[1];\r\n});\r\n\r\nGPSLocationSchema.virtual('lon').get(function () {\r\n  return this.location?.coordinates?.[0];\r\n});\r\n\r\n/**\r\n * هل الموقع حديث (أقل من دقيقة)\r\n */\r\nGPSLocationSchema.virtual('isRecent').get(function () {\r\n  const now = Date.now();\r\n  const locTime = this.timestamp?.getTime() || 0;\r\n  return now - locTime < 60000;\r\n});\r\n\r\n/**\r\n * هل هناك انتهاك السرعة\r\n */\r\nGPSLocationSchema.virtual('isSpeedingViolation').get(function () {\r\n  return this.speed > this.maxSpeedAllowed;\r\n});\r\n\r\n// ===== METHODS =====\r\n\r\n/**\r\n * التحقق من وجود تنبيهات نشطة\r\n */\r\nGPSLocationSchema.methods.hasActiveAlerts = function () {\r\n  return this.alerts.some((alert) => !alert.acknowledged);\r\n};\r\n\r\n/**\r\n * الحصول على التنبيهات النشطة\r\n */\r\nGPSLocationSchema.methods.getActiveAlerts = function () {\r\n  return this.alerts.filter((alert) => !alert.acknowledged);\r\n};\r\n\r\n/**\r\n * تأكيد تنبيه\r\n */\r\nGPSLocationSchema.methods.acknowledgeAlert = async function (alertIndex, acknowledgedBy) {\r\n  if (this.alerts[alertIndex]) {\r\n    this.alerts[alertIndex].acknowledged = true;\r\n    this.alerts[alertIndex].acknowledgedAt = new Date();\r\n    this.alerts[alertIndex].acknowledgedBy = acknowledgedBy;\r\n    await this.save();\r\n  }\r\n};\r\n\r\n/**\r\n * حساب المسافة من موقع آخر (بالكيلومتر)\r\n */\r\nGPSLocationSchema.methods.getDistanceTo = function (otherLocation) {\r\n  const [lon1, lat1] = this.location.coordinates;\r\n  const [lon2, lat2] = otherLocation.location.coordinates;\r\n\r\n  // صيغة Haversine\r\n  const R = 6371; // نصف قطر الأرض بالكيلومتر\r\n  const dLat = ((lat2 - lat1) * Math.PI) / 180;\r\n  const dLon = ((lon2 - lon1) * Math.PI) / 180;\r\n\r\n  const a =\r\n    Math.sin(dLat / 2) * Math.sin(dLat / 2) +\r\n    Math.cos((lat1 * Math.PI) / 180) *\r\n    Math.cos((lat2 * Math.PI) / 180) *\r\n    Math.sin(dLon / 2) *\r\n    Math.sin(dLon / 2);\r\n\r\n  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\r\n  return R * c;\r\n};\r\n\r\n/**\r\n * إضافة موقع سابق (للتتبع التاريخي)\r\n */\r\nGPSLocationSchema.methods.addPreviousLocation = function () {\r\n  this.previousLocations.unshift({\r\n    coordinates: this.location.coordinates,\r\n    timestamp: this.timestamp,\r\n    speed: this.speed,\r\n  });\r\n\r\n  // الاحتفاظ بآخر 10 مواقع فقط\r\n  if (this.previousLocations.length > 10) {\r\n    this.previousLocations.pop();\r\n  }\r\n};\r\n\r\n/**\r\n * حساب الزمن المقضي في الرحلة\r\n */\r\nGPSLocationSchema.methods.calculateTripDuration = async function () {\r\n  if (!this.trip) return null;\r\n\r\n  const Trip = mongoose.model('Trip');\r\n  const tripData = await Trip.findById(this.trip).select('startTime endTime');\r\n\r\n  if (tripData && tripData.startTime && tripData.endTime) {\r\n    return (tripData.endTime - tripData.startTime) / (1000 * 60); // بالدقائق\r\n  }\r\n\r\n  return null;\r\n};\r\n\r\n// ===== STATICS =====\r\n\r\n/**\r\n * الحصول على الموقع الأخير للسائق\r\n */\r\nGPSLocationSchema.statics.getLatestLocation = async function (driverId) {\r\n  return this.findOne({ driver: driverId }).sort({ timestamp: -1 });\r\n};\r\n\r\n/**\r\n * الحصول على جميع المواقع في نطاق زمني\r\n */\r\nGPSLocationSchema.statics.getLocationsInTimeRange = async function (driverId, startTime, endTime) {\r\n  return this.find({\r\n    driver: driverId,\r\n    timestamp: {\r\n      $gte: new Date(startTime),\r\n      $lte: new Date(endTime),\r\n    },\r\n  }).sort({ timestamp: -1 });\r\n};\r\n\r\n/**\r\n * البحث عن سائقين بالقرب من موقع معين\r\n */\r\nGPSLocationSchema.statics.findNearby = async function (longitude, latitude, maxDistance = 1000) {\r\n  return this.find({\r\n    'location.coordinates': {\r\n      $near: {\r\n        $geometry: {\r\n          type: 'Point',\r\n          coordinates: [longitude, latitude],\r\n        },\r\n        $maxDistance: maxDistance, // بالأمتار\r\n      },\r\n    },\r\n  });\r\n};\r\n\r\n/**\r\n * حساب عدد انتهاكات السرعة في فترة\r\n */\r\nGPSLocationSchema.statics.getSpeedingViolations = async function (driverId, startTime, endTime) {\r\n  return this.countDocuments({\r\n    driver: driverId,\r\n    speedLimitViolation: true,\r\n    timestamp: {\r\n      $gte: new Date(startTime),\r\n      $lte: new Date(endTime),\r\n    },\r\n  });\r\n};\r\n\r\n/**\r\n * الحصول على متوسط السرعة\r\n */\r\nGPSLocationSchema.statics.getAverageSpeed = async function (driverId, startTime, endTime) {\r\n  const result = await this.aggregate([\r\n    {\r\n      $match: {\r\n        driver: mongoose.Types.ObjectId.createFromHexString(driverId),\r\n        timestamp: {\r\n          $gte: new Date(startTime),\r\n          $lte: new Date(endTime),\r\n        },\r\n      },\r\n    },\r\n    {\r\n      $group: {\r\n        _id: '$driver',\r\n        averageSpeed: { $avg: '$speed' },\r\n        maxSpeed: { $max: '$speed' },\r\n        minSpeed: { $min: '$speed' },\r\n      },\r\n    },\r\n  ]);\r\n\r\n  return result[0] || null;\r\n};\r\n\r\n// ===== HOOKS =====\r\n\r\n// تحديث حالة الرحلة تلقائياً بناءً على السرعة\r\nGPSLocationSchema.pre('save', function (next) {\r\n  if (this.speed === 0) {\r\n    this.drivingStatus = 'stopped';\r\n  } else if (this.speed < 5) {\r\n    this.drivingStatus = 'idling';\r\n  } else {\r\n    this.drivingStatus = 'driving';\r\n  }\r\n\r\n  // التحقق من انتهاك السرعة\r\n  if (this.speed > this.maxSpeedAllowed) {\r\n    this.speedLimitViolation = true;\r\n  }\r\n\r\n  next();\r\n});\r\n\r\nmodule.exports = mongoose.model('GPSLocation', GPSLocationSchema);\r\n"],"mappings":"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","ignoreList":[]}