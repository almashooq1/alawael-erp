0b6d573fd5d989fcb264585704509516
const mongoose = require('mongoose');
const scheduledNotificationSchema = new mongoose.Schema({
  userId: {
    type: mongoose.Schema.Types.ObjectId,
    ref: 'User',
    required: true
  },
  title: {
    type: String,
    required: true
  },
  message: {
    type: String,
    required: true
  },
  channels: {
    type: [String],
    enum: ['in-app', 'email', 'sms', 'whatsapp', 'push'],
    default: ['in-app']
  },
  scheduleTime: {
    type: Date,
    required: true
  },
  sent: {
    type: Boolean,
    default: false
  },
  sentAt: {
    type: Date
  },
  createdBy: {
    type: mongoose.Schema.Types.ObjectId,
    ref: 'User',
    required: true
  },
  metadata: {
    type: mongoose.Schema.Types.Mixed,
    default: {}
  }
}, {
  timestamps: true
});
scheduledNotificationSchema.index({
  sent: 1,
  scheduleTime: 1
});
const ScheduledNotification = mongoose.model('ScheduledNotification', scheduledNotificationSchema);
module.exports = ScheduledNotification;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJzY2hlZHVsZWROb3RpZmljYXRpb25TY2hlbWEiLCJTY2hlbWEiLCJ1c2VySWQiLCJ0eXBlIiwiVHlwZXMiLCJPYmplY3RJZCIsInJlZiIsInJlcXVpcmVkIiwidGl0bGUiLCJTdHJpbmciLCJtZXNzYWdlIiwiY2hhbm5lbHMiLCJlbnVtIiwiZGVmYXVsdCIsInNjaGVkdWxlVGltZSIsIkRhdGUiLCJzZW50IiwiQm9vbGVhbiIsInNlbnRBdCIsImNyZWF0ZWRCeSIsIm1ldGFkYXRhIiwiTWl4ZWQiLCJ0aW1lc3RhbXBzIiwiaW5kZXgiLCJTY2hlZHVsZWROb3RpZmljYXRpb24iLCJtb2RlbCIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlcyI6WyJTY2hlZHVsZWROb3RpZmljYXRpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgbW9uZ29vc2UgPSByZXF1aXJlKCdtb25nb29zZScpO1xyXG5cclxuY29uc3Qgc2NoZWR1bGVkTm90aWZpY2F0aW9uU2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYShcclxuICB7XHJcbiAgICB1c2VySWQ6IHtcclxuICAgICAgdHlwZTogbW9uZ29vc2UuU2NoZW1hLlR5cGVzLk9iamVjdElkLFxyXG4gICAgICByZWY6ICdVc2VyJyxcclxuICAgICAgcmVxdWlyZWQ6IHRydWVcclxuICAgIH0sXHJcbiAgICB0aXRsZToge1xyXG4gICAgICB0eXBlOiBTdHJpbmcsXHJcbiAgICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gICAgfSxcclxuICAgIG1lc3NhZ2U6IHtcclxuICAgICAgdHlwZTogU3RyaW5nLFxyXG4gICAgICByZXF1aXJlZDogdHJ1ZSxcclxuICAgIH0sXHJcbiAgICBjaGFubmVsczoge1xyXG4gICAgICB0eXBlOiBbU3RyaW5nXSxcclxuICAgICAgZW51bTogWydpbi1hcHAnLCAnZW1haWwnLCAnc21zJywgJ3doYXRzYXBwJywgJ3B1c2gnXSxcclxuICAgICAgZGVmYXVsdDogWydpbi1hcHAnXSxcclxuICAgIH0sXHJcbiAgICBzY2hlZHVsZVRpbWU6IHtcclxuICAgICAgdHlwZTogRGF0ZSxcclxuICAgICAgcmVxdWlyZWQ6IHRydWVcclxuICAgIH0sXHJcbiAgICBzZW50OiB7XHJcbiAgICAgIHR5cGU6IEJvb2xlYW4sXHJcbiAgICAgIGRlZmF1bHQ6IGZhbHNlLFxyXG4gICAgfSxcclxuICAgIHNlbnRBdDoge1xyXG4gICAgICB0eXBlOiBEYXRlLFxyXG4gICAgfSxcclxuICAgIGNyZWF0ZWRCeToge1xyXG4gICAgICB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsXHJcbiAgICAgIHJlZjogJ1VzZXInLFxyXG4gICAgICByZXF1aXJlZDogdHJ1ZSxcclxuICAgIH0sXHJcbiAgICBtZXRhZGF0YToge1xyXG4gICAgICB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuTWl4ZWQsXHJcbiAgICAgIGRlZmF1bHQ6IHt9LFxyXG4gICAgfSxcclxuICB9LFxyXG4gIHtcclxuICAgIHRpbWVzdGFtcHM6IHRydWUsXHJcbiAgfVxyXG4pO1xyXG5cclxuc2NoZWR1bGVkTm90aWZpY2F0aW9uU2NoZW1hLmluZGV4KHsgc2VudDogMSwgc2NoZWR1bGVUaW1lOiAxIH0pO1xyXG5cclxuY29uc3QgU2NoZWR1bGVkTm90aWZpY2F0aW9uID0gbW9uZ29vc2UubW9kZWwoJ1NjaGVkdWxlZE5vdGlmaWNhdGlvbicsIHNjaGVkdWxlZE5vdGlmaWNhdGlvblNjaGVtYSk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFNjaGVkdWxlZE5vdGlmaWNhdGlvbjtcclxuIl0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxRQUFRLEdBQUdDLE9BQU8sQ0FBQyxVQUFVLENBQUM7QUFFcEMsTUFBTUMsMkJBQTJCLEdBQUcsSUFBSUYsUUFBUSxDQUFDRyxNQUFNLENBQ3JEO0VBQ0VDLE1BQU0sRUFBRTtJQUNOQyxJQUFJLEVBQUVMLFFBQVEsQ0FBQ0csTUFBTSxDQUFDRyxLQUFLLENBQUNDLFFBQVE7SUFDcENDLEdBQUcsRUFBRSxNQUFNO0lBQ1hDLFFBQVEsRUFBRTtFQUNaLENBQUM7RUFDREMsS0FBSyxFQUFFO0lBQ0xMLElBQUksRUFBRU0sTUFBTTtJQUNaRixRQUFRLEVBQUU7RUFDWixDQUFDO0VBQ0RHLE9BQU8sRUFBRTtJQUNQUCxJQUFJLEVBQUVNLE1BQU07SUFDWkYsUUFBUSxFQUFFO0VBQ1osQ0FBQztFQUNESSxRQUFRLEVBQUU7SUFDUlIsSUFBSSxFQUFFLENBQUNNLE1BQU0sQ0FBQztJQUNkRyxJQUFJLEVBQUUsQ0FBQyxRQUFRLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBRSxVQUFVLEVBQUUsTUFBTSxDQUFDO0lBQ3BEQyxPQUFPLEVBQUUsQ0FBQyxRQUFRO0VBQ3BCLENBQUM7RUFDREMsWUFBWSxFQUFFO0lBQ1pYLElBQUksRUFBRVksSUFBSTtJQUNWUixRQUFRLEVBQUU7RUFDWixDQUFDO0VBQ0RTLElBQUksRUFBRTtJQUNKYixJQUFJLEVBQUVjLE9BQU87SUFDYkosT0FBTyxFQUFFO0VBQ1gsQ0FBQztFQUNESyxNQUFNLEVBQUU7SUFDTmYsSUFBSSxFQUFFWTtFQUNSLENBQUM7RUFDREksU0FBUyxFQUFFO0lBQ1RoQixJQUFJLEVBQUVMLFFBQVEsQ0FBQ0csTUFBTSxDQUFDRyxLQUFLLENBQUNDLFFBQVE7SUFDcENDLEdBQUcsRUFBRSxNQUFNO0lBQ1hDLFFBQVEsRUFBRTtFQUNaLENBQUM7RUFDRGEsUUFBUSxFQUFFO0lBQ1JqQixJQUFJLEVBQUVMLFFBQVEsQ0FBQ0csTUFBTSxDQUFDRyxLQUFLLENBQUNpQixLQUFLO0lBQ2pDUixPQUFPLEVBQUUsQ0FBQztFQUNaO0FBQ0YsQ0FBQyxFQUNEO0VBQ0VTLFVBQVUsRUFBRTtBQUNkLENBQ0YsQ0FBQztBQUVEdEIsMkJBQTJCLENBQUN1QixLQUFLLENBQUM7RUFBRVAsSUFBSSxFQUFFLENBQUM7RUFBRUYsWUFBWSxFQUFFO0FBQUUsQ0FBQyxDQUFDO0FBRS9ELE1BQU1VLHFCQUFxQixHQUFHMUIsUUFBUSxDQUFDMkIsS0FBSyxDQUFDLHVCQUF1QixFQUFFekIsMkJBQTJCLENBQUM7QUFFbEcwQixNQUFNLENBQUNDLE9BQU8sR0FBR0gscUJBQXFCIiwiaWdub3JlTGlzdCI6W119