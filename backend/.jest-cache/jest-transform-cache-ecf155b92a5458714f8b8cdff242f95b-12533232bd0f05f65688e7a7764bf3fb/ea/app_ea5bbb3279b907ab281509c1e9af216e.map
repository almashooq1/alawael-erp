{"version":3,"names":["express","require","cors","config","app","console","log","safeRequire","filePath","supplyChainRouter","branchIntegrationRoutes","notificationRoutes","requestLogger","errorHandler","cache","limiters","analytics","performanceMonitor","systemDashboard","use","json","req","res","next","method","path","get","status","timestamp","Date","toISOString","uptime","process","environment","env","NODE_ENV","port","PORT","mongodb","USE_MOCK_DB","success","Math","floor","services","api","database","USE_MOCK_CACHE","moiHealthHandler","service","version","routeStack","_router","stack","moiRoute","find","r","route","e","message","hrEmployeeRouter","hrAttendanceRouter","hrLeaveRouter","hrPayrollRouter","hrPerformanceEvaluationRouter","docsRouter","predictionsRouter","reportsRouter","notificationsRouter","monitoringRouter","supportRouter","integrationsRouter","performanceRouter","authRouter","usersRouter","rbacRouter","rbacAdvancedRouter","mfaRouter","analyticsRouter","cmsRouter","uploadRouter","exportRouter","searchRouter","validateRouter","dashboardRouter","executiveDashboardRouter","beneficiaryPortalRouter","communityRouter","specializedProgramsRouter","advancedSessionsRouter","smartSchedulerRouter","disabilityRehabilitationRouter","equipmentRouter","qualityRouter","internalAuditRouter","vehiclesRouter","transportRoutesRouter","tripsRouter","realtimeCollaborationRouter","smartNotificationsRouter","advancedAnalyticsRouter","mobileAppRouter","dashboardWidgetRouter","tenantRouter","aiRecommendationsRouter","integrationHubRouter","qiwaRouter","measurementsRouter","moiPassportRouter","migrationRouter","initialize","then","driversRouter","gpsRouter","trafficAccidentsRouter","trafficAccidentAnalyticsRouter","MigrationService","CSVProcessor","migrationManager","post","sourceDB","targetDB","body","error","csvProcessor","logger","plan","getCurrentPlan","summary","getSummary","clear","stats","getStatus","err","router","module","exports"],"sources":["app.js"],"sourcesContent":["const express = require('express');\nconst cors = require('cors');\nrequire('dotenv').config();\n\nconst app = express();\n\nconsole.log('[APP-INIT] Express app created');\n\n// Safe require function\nconst safeRequire = (filePath) => {\n  try {\n    return require(filePath);\n  } catch {\n    console.log(`âš ï¸  Router not found: ${filePath}`);\n    return null;\n  }\n};\n\n// Load all routers safely\nconst supplyChainRouter = safeRequire('./routes/supplyChain.routes');\nconst branchIntegrationRoutes = safeRequire('./routes/branch-integration.routes');\nconst notificationRoutes = safeRequire('./routes/notificationRoutes'); // ðŸŽ¯ Advanced Notification System\n\n// Custom middleware\nconst requestLogger = require('./middleware/requestLogger');\nconst errorHandler = require('./middleware/errorHandler');\nconst { cache } = require('./config/redis');\nconst { limiters } = require('./middleware/rateLimit');\nconst analytics = require('./middleware/analytics');\nconst performanceMonitor = require('./middleware/performanceMonitor');\nconst systemDashboard = require('./services/systemDashboard');\n\n// Middleware\napp.use(cors());\napp.use(express.json());\n\n// TEMPORARILY DISABLED - Testing if these cause 404 issue\n/*\n// Register SSO Routes FIRST (before any logging middleware)\nif (ssoRouter) {\n  app.use('/api/sso', ssoRouter);\n  console.log('âœ… SSO Routes loaded and registered on /api/sso');\n} else {\n  console.log('âš ï¸  SSO Router not loaded');\n  // Fallback SSO status endpoint if router failed\n  app.get('/api/sso/status', (req, res) => {\n    console.log('[FALLBACK] /api/sso/status called');\n    res.json({\n      success: true,\n      status: 'operational (fallback)',\n      message: 'SSO system is operational'\n    });\n  });\n  console.log('âœ… Fallback SSO status endpoint registered');\n}\n\n// Test direct route - should work and prove Express is functioning\napp.get('/api/test/sso', (req, res) => {\n  console.log('[DIRECT] /api/test/sso endpoint hit');\n  res.json({\n    test: 'direct endpoint in app.js',\n    status: 200\n  });\n});\nconsole.log('âœ… Test endpoint /api/test/sso registered');\n\n// Debug middleware to see what's happening with requests\napp.use((req, res, next) => {\n  if (req.path.includes('/sso')) {\n    console.log(`[DEBUG] Request to ${req.method} ${req.originalUrl}, path: ${req.path}, baseUrl: ${req.baseUrl}`);\n  }\n  next();\n});\n\n// Then apply middleware\napp.use(requestLogger);\napp.use(performanceMonitor.middleware());\n\n// Rate limiting (Skip for SSO)\napp.use('/api/', (req, res, next) => {\n  // Bypass rate limiting for SSO and health check routes\n  if (req.path.startsWith('/sso') || req.path === '/health' || req.path === '/api/health') {\n    return next();\n  }\n  // Skip rate limiting for now - test if it's the source of 404\n  // TODO: Fix async middleware issue\n  next();\n});\napp.use('/api/auth/login', limiters.login.middleware);\napp.use('/api/auth/register', limiters.login.middleware);\n\n// Analytics middleware\napp.use((req, res, next) => {\n  const startTime = Date.now();\n\n  res.on('finish', () => {\n    const duration = Date.now() - startTime;\n    analytics.trackRequest(req, res, duration);\n  });\n\n  next();\n});\nif (performanceEvaluationsRouter) app.use('/api/performance-evaluations', performanceEvaluationsRouter);\nif (aiNotificationsRouter) app.use('/api/ai-notifications', aiNotificationsRouter);\nif (approvalRequestsRouter) app.use('/api/approval-requests', approvalRequestsRouter);\nif (montessoriAuthRouter) app.use('/api/montessori-auth', montessoriAuthRouter);\nif (montessoriRouter) app.use('/api/montessori', montessoriRouter);\nif (notificationTemplatesRouter) app.use('/api/notification-templates', notificationTemplatesRouter);\nif (fcmRouter) app.use('/api/fcm', fcmRouter);\nif (templatesRouter) {\n  app.use('/api/templates', templatesRouter);\n  app.use('/api/templates/attachments', express.static(path.join(__dirname, 'uploads')));\n}\nif (orgBrandingRouter) app.use('/api/org-branding', orgBrandingRouter);\nif (aiRouter) app.use('/api/ai', aiRouter);\n*/\n\n// Supply chain ONLY - for testing\nif (supplyChainRouter) {\n  // Debug: Log all supply-chain requests\n  app.use('/api/supply-chain', (req, res, next) => {\n    console.log(`[SUPPLY-CHAIN] ${req.method} ${req.path} - Routing to handler...`);\n    next();\n  });\n  app.use('/api/supply-chain', supplyChainRouter);\n  console.log('âœ… Supply Chain Management Routes loaded');\n}\n\n// Health Check\napp.get('/health', (req, res) => {\n  res.json({\n    status: 'healthy',\n    timestamp: new Date().toISOString(),\n    uptime: process.uptime(),\n    environment: process.env.NODE_ENV,\n    port: process.env.PORT,\n    mongodb: process.env.USE_MOCK_DB === 'true' ? 'mock' : 'connected',\n  });\n});\n\n// Enhanced health check\napp.get('/api/health', (req, res) => {\n  res.json({\n    success: true,\n    status: 'healthy',\n    timestamp: new Date().toISOString(),\n    uptime: Math.floor(process.uptime()),\n    environment: process.env.NODE_ENV || 'development',\n    services: {\n      api: 'operational',\n      database: process.env.USE_MOCK_DB === 'true' ? 'mock' : 'checking',\n      cache: process.env.USE_MOCK_CACHE === 'true' ? 'mock' : 'configured',\n    },\n  });\n});\n\n// Log middleware\napp.use((req, res, next) => {\n  console.log(`${new Date().toISOString()} - ${req.method} ${req.path}`);\n  next();\n});\n\n// ðŸ‡¸ðŸ‡¦ Direct MOI Passport Route Registration (Placed Early)\nconsole.log('[APP-INIT] === Starting MOI route registration ===');\n\nconst moiHealthHandler = (req, res) => {\n  console.log('[MOI-ENDPOINT] /api/moi/health called');\n  res.json({\n    success: true,\n    status: 'healthy',\n    service: 'MOI Passport Integration Service',\n    version: '3.0.0',\n    timestamp: new Date().toISOString(),\n  });\n};\n\napp.get('/api/moi/health', moiHealthHandler);\nconsole.log('[APP-INIT] MOI health route registered using app.get()');\n\n// Verify route was added\ntry {\n  const routeStack = app._router.stack;\n  const moiRoute = routeStack.find(r => r.route && r.route.path === '/api/moi/health');\n  console.log('[APP-INIT] MOI route in stack:', moiRoute ? 'YES' : 'NO');\n} catch (e) {\n  console.log('[APP-INIT] Could not verify route:', e.message);\n}\n\nconsole.log('[APP-INIT] === MOI route registration complete ===');\n\n// API Routes\ntry {\n  // HR Routers\n  const hrEmployeeRouter = safeRequire('./routes/hr/employee');\n  const hrAttendanceRouter = safeRequire('./routes/hr/attendance');\n  const hrLeaveRouter = safeRequire('./routes/hr/leave');\n  const hrPayrollRouter = safeRequire('./routes/hr/payroll');\n  const hrPerformanceEvaluationRouter = safeRequire('./routes/hr/performanceEvaluation');\n\n  // Documentation\n  const docsRouter = safeRequire('./routes/docs');\n\n  // Original Systems\n  const predictionsRouter = safeRequire('./routes/predictions');\n  const reportsRouter = safeRequire('./routes/reports');\n  const notificationsRouter = safeRequire('./routes/notifications');\n\n  // Advanced Systems (Phase 3)\n  const monitoringRouter = safeRequire('./routes/monitoring');\n  const supportRouter = safeRequire('./routes/support');\n  const integrationsRouter = safeRequire('./routes/integrations');\n  const performanceRouter = safeRequire('./routes/performance');\n\n  // Authentication & User Management (Phase 4)\n  const authRouter = safeRequire('./routes/auth');\n  const usersRouter = safeRequire('./routes/users');\n  console.log('[DEBUG] usersRouter loaded:', usersRouter ? 'SUCCESS' : 'FAILED');\n  const rbacRouter = safeRequire('./routes/rbac');\n  const rbacAdvancedRouter = safeRequire('./routes/rbac-advanced.routes');\n  const mfaRouter = safeRequire('./routes/mfa');\n\n  // Analytics & CMS (Phase 4)\n  const analyticsRouter = safeRequire('./routes/analytics');\n  const cmsRouter = safeRequire('./routes/cms');\n\n  // Phase 8: Advanced Features\n  const uploadRouter = safeRequire('./routes/upload');\n  const exportRouter = safeRequire('./routes/export');\n\n  // Phase 10: Advanced Features (Search, Validation, Response)\n  const searchRouter = safeRequire('./routes/search');\n  const validateRouter = safeRequire('./routes/validate');\n\n  // Phase 11: System Integration\n  const dashboardRouter = safeRequire('./routes/dashboard');\n\n  // Executive Intelligence Dashboard\n  const executiveDashboardRouter = safeRequire('./routes/executive-dashboard');\n\n  // Beneficiary Portal (Communication & Awareness)\n  const beneficiaryPortalRouter = safeRequire('./routes/beneficiaryPortal');\n\n  // Community Awareness System\n  const communityRouter = safeRequire('./routes/community');\n\n  // Phase 13: Specialized Programs & Sessions\n  const specializedProgramsRouter = safeRequire('./routes/specializedPrograms');\n  const advancedSessionsRouter = safeRequire('./routes/advancedSessions');\n  const smartSchedulerRouter = safeRequire('./routes/smartScheduler');\n  const disabilityRehabilitationRouter = safeRequire('./routes/disability-rehabilitation.routes');\n\n  // Phase 14: Equipment Management System\n  const equipmentRouter = safeRequire('./routes/equipment');\n\n  // Phase 15: Quality Management & Accreditations\n  const qualityRouter = safeRequire('./routes/quality');\n\n  // Phase 16: Internal Audit Management System\n  const internalAuditRouter = safeRequire('./routes/internalAudit');\n\n  // Phase 17: Vehicle & Transport Management System\n  const vehiclesRouter = safeRequire('./routes/vehicles');\n  const transportRoutesRouter = safeRequire('./routes/transportRoutes');\n  const tripsRouter = safeRequire('./routes/trips');\n\n  // Phase 18: Real-Time Collaboration System\n  const realtimeCollaborationRouter = safeRequire('./routes/realtimeCollaboration');\n\n  // Phase 19: Smart Notifications System\n  const smartNotificationsRouter = safeRequire('./routes/smartNotifications');\n\n  // Phase 20: Advanced Analytics & Reporting\n  const advancedAnalyticsRouter = safeRequire('./routes/advancedAnalytics');\n\n  // Phase 21: Mobile App Backend Support\n  const mobileAppRouter = safeRequire('./routes/mobileApp');\n\n  // Phase 22: Custom Dashboard Widget Builder\n  const dashboardWidgetRouter = safeRequire('./routes/dashboardWidget');\n\n  // Phase 24: Multi-Tenant Support\n  const tenantRouter = safeRequire('./routes/tenant.routes');\n\n  // Phase 25: AI Recommendations Engine\n  const aiRecommendationsRouter = safeRequire('./routes/ai.recommendations.routes');\n\n  // Phase 26: Advanced Integrations Hub\n  const integrationHubRouter = safeRequire('./routes/integrationHub.routes');\n\n  // Phase 27: Qiwa (Ministry of Labor) Integration\n  const qiwaRouter = safeRequire('./routes/qiwa.routes');\n\n  // Phase 28: Measurement & Rehabilitation Program System\n  const measurementsRouter = safeRequire('./routes/measurements.routes');\n\n  // ðŸ‡¸ï¿½ MOI Passport Integration System\n  console.log('[MOI-DEBUG] Attempting to load MOI Passport routes...');\n  const moiPassportRouter = safeRequire('./routes/moi-passport.routes');\n  console.log('[MOI-DEBUG] moiPassportRouter loaded:', typeof moiPassportRouter, moiPassportRouter ? 'SUCCESS' : 'FAILED');\n\n  // Data Migration System\n  const migrationRouter = safeRequire('./routes/migrations');\n  systemDashboard.initialize().then(success => {\n    if (success) {\n      console.log('âœ… System Dashboard Initialized');\n    }\n  });\n\n  // Register available routes\n  // HR API endpoints\n  if (hrEmployeeRouter) app.use('/api/hr/employees', hrEmployeeRouter);\n  if (hrAttendanceRouter) app.use('/api/hr/attendance', hrAttendanceRouter);\n  if (hrLeaveRouter) app.use('/api/hr/leaves', hrLeaveRouter);\n  if (hrPayrollRouter) app.use('/api/hr/payroll', hrPayrollRouter);\n  if (hrPerformanceEvaluationRouter)\n    app.use('/api/hr/performance-evaluations', hrPerformanceEvaluationRouter);\n  if (predictionsRouter) app.use('/api/predictions', predictionsRouter);\n  if (reportsRouter) app.use('/api/reports', reportsRouter);\n  if (notificationsRouter) app.use('/api/notifications', notificationsRouter);\n  // ðŸŽ¯ Advanced Notification System (WhatsApp, Templates, Analytics, Rules)\n  if (notificationRoutes) {\n    app.use('/api/notifications/advanced', notificationRoutes);\n    console.log('âœ… Advanced Notification System Routes loaded on /api/notifications/advanced');\n  } else {\n    console.log('âš ï¸  Advanced Notification System routes not loaded');\n  }\n  if (monitoringRouter) app.use('/api/monitoring', monitoringRouter);\n  if (supportRouter) app.use('/api/support', supportRouter);\n  if (integrationsRouter) app.use('/api/integrations', integrationsRouter);\n  if (performanceRouter) app.use('/api/performance', performanceRouter);\n  if (authRouter) app.use('/api/auth', authRouter);\n  if (usersRouter) {\n    app.use('/api/users', usersRouter);\n    console.log('âœ… Users Routes loaded on /api/users');\n  } else {\n    console.log('âš ï¸  Users router failed to load');\n  }\n  if (rbacRouter) app.use('/api/rbac', rbacRouter);\n  if (mfaRouter) {\n    app.use('/api/mfa', mfaRouter);\n    console.log('âœ… MFA Routes loaded');\n  }\n  if (rbacAdvancedRouter) {\n    app.use('/api/rbac-advanced', rbacAdvancedRouter);\n    console.log('âœ… Advanced RBAC Routes loaded');\n  }\n  if (analyticsRouter) app.use('/api/analytics', analyticsRouter);\n  if (cmsRouter) app.use('/api/cms', cmsRouter);\n  if (uploadRouter) app.use('/api/upload', uploadRouter);\n  if (exportRouter) app.use('/api/export', exportRouter);\n  if (searchRouter) app.use('/api/search', searchRouter);\n  if (validateRouter) app.use('/api/validate', validateRouter);\n  if (dashboardRouter) app.use('/api/dashboard', dashboardRouter);\n  if (executiveDashboardRouter) app.use('/api/executive-dashboard', executiveDashboardRouter);\n  if (beneficiaryPortalRouter) app.use('/api/beneficiary', beneficiaryPortalRouter);\n  if (communityRouter) app.use('/api/community', communityRouter);\n  if (specializedProgramsRouter) app.use('/api/programs', specializedProgramsRouter);\n  if (advancedSessionsRouter) app.use('/api/sessions', advancedSessionsRouter);\n  if (smartSchedulerRouter) app.use('/api/scheduler', smartSchedulerRouter);\n  if (disabilityRehabilitationRouter) app.use('/api/disability-rehabilitation', disabilityRehabilitationRouter);\n\n  // Equipment routes - all in one file\n  if (equipmentRouter) {\n    app.use('/api/equipment', equipmentRouter);\n    app.use('/api/maintenance-schedules', equipmentRouter);\n    app.use('/api/lending', equipmentRouter);\n    app.use('/api/faults', equipmentRouter);\n    app.use('/api/calibration', equipmentRouter);\n    app.use('/api/alerts', equipmentRouter);\n  }\n\n  // Quality Management routes\n  if (qualityRouter) {\n    app.use('/api/quality/standards', qualityRouter);\n    app.use('/api/quality/accreditations', qualityRouter);\n    app.use('/api/quality/audits', qualityRouter);\n    app.use('/api/quality/compliance', qualityRouter);\n    app.use('/api/quality/indicators', qualityRouter);\n    app.use('/api/quality/dashboard', qualityRouter);\n    app.use('/api/quality/reports', qualityRouter);\n  }\n\n  // Internal Audit Management routes\n  if (internalAuditRouter) {\n    app.use('/api/internal-audits', internalAuditRouter);\n  }\n\n  // Vehicle & Transport Management routes (Phase 17)\n  if (vehiclesRouter) app.use('/api/vehicles', vehiclesRouter);\n  else console.log('âš ï¸  Router not found: ./routes/vehicles');\n\n  if (transportRoutesRouter) app.use('/api/transport-routes', transportRoutesRouter);\n  else console.log('âš ï¸  Router not found: ./routes/transportRoutes');\n\n  if (tripsRouter) app.use('/api/trips', tripsRouter);\n  else console.log('âš ï¸  Router not found: ./routes/trips');\n\n  // Driver Management routes (Phase 29 - AI-Powered Driver Management)\n  const driversRouter = safeRequire('./routes/drivers');\n  if (driversRouter) app.use('/api/drivers', driversRouter);\n  else console.log('âš ï¸  Router not found: ./routes/drivers');\n\n  // GPS Tracking routes (Phase 30 - Real-time Tracking)\n  const gpsRouter = safeRequire('./routes/gps');\n  if (gpsRouter) app.use('/api/gps', gpsRouter);\n  else console.log('âš ï¸  Router not found: ./routes/gps');\n\n  // Traffic Accident Reporting System (Phase 31 - Comprehensive Accident Management)\n  const trafficAccidentsRouter = safeRequire('./routes/trafficAccidents');\n  const trafficAccidentAnalyticsRouter = safeRequire('./routes/trafficAccidentAnalytics');\n  if (trafficAccidentsRouter) app.use('/api/traffic-accidents', trafficAccidentsRouter);\n  else console.log('âš ï¸  Router not found: ./routes/trafficAccidents');\n  if (trafficAccidentAnalyticsRouter) app.use('/api/traffic-accidents/analytics', trafficAccidentAnalyticsRouter);\n  else console.log('âš ï¸  Router not found: ./routes/trafficAccidentAnalytics');\n\n  // ðŸ‡¸ï¿½ MOI Passport Integration (Phase: Government Integration)\n  console.log(`[APP-ROUTES] MOI router value: ${moiPassportRouter ? 'READY' : 'NULL'}`);\n  if (moiPassportRouter) {\n    console.log('[APP-ROUTES] Registering MOI routes at /api/moi');\n    app.use('/api/moi', moiPassportRouter);\n    console.log('âœ… MOI Passport Integration routes loaded on /api/moi');\n  } else {\n    console.log('âš ï¸  MOI Passport Router not found: ./routes/moi-passport.routes');\n  }\n\n  if (uploadRouter) app.use('/api/upload', uploadRouter);\n  else console.log('âš ï¸  Router not found: ./routes/upload');\n\n  if (exportRouter) app.use('/api/export', exportRouter);\n  else console.log('âš ï¸  Router not found: ./routes/export');\n\n  if (docsRouter) app.use('/api-docs', docsRouter);\n  if (docsRouter) app.use('/docs', docsRouter);\n\n  // Real-Time Collaboration routes (Phase 18)\n  if (realtimeCollaborationRouter) app.use('/api/collaboration', realtimeCollaborationRouter);\n  else console.log('âš ï¸  Router not found: ./routes/realtimeCollaboration');\n\n  // Smart Notifications routes (Phase 19)\n  if (smartNotificationsRouter) app.use('/api/notifications/smart', smartNotificationsRouter);\n  else console.log('âš ï¸  Router not found: ./routes/smartNotifications');\n\n  // Advanced Analytics routes (Phase 20)\n  if (advancedAnalyticsRouter) app.use('/api/analytics', advancedAnalyticsRouter);\n  else console.log('âš ï¸  Router not found: ./routes/advancedAnalytics');\n\n  // Mobile App Backend routes (Phase 21)\n  if (mobileAppRouter) app.use('/api/mobile', mobileAppRouter);\n  else console.log('âš ï¸  Router not found: ./routes/mobileApp');\n\n  // Dashboard Widget Builder routes (Phase 22)\n  if (dashboardWidgetRouter) app.use('/api/dashboard', dashboardWidgetRouter);\n  else console.log('âš ï¸  Router not found: ./routes/dashboardWidget');\n\n  // Multi-Tenant Support routes (Phase 24)\n  if (tenantRouter) app.use('/api/tenants', tenantRouter);\n  else console.log('âš ï¸  Router not found: ./routes/tenant.routes');\n\n  // AI Recommendations Engine routes (Phase 25)\n  if (aiRecommendationsRouter) app.use('/api/ai', aiRecommendationsRouter);\n  else console.log('âš ï¸  Router not found: ./routes/ai.recommendations.routes');\n\n  // Advanced Integrations Hub routes (Phase 26)\n  if (integrationHubRouter) app.use('/api/integrations-hub', integrationHubRouter);\n  else console.log('âš ï¸  Router not found: ./routes/integrationHub.routes');\n\n  // Qiwa (Ministry of Labor) Integration routes (Phase 27)\n  if (qiwaRouter) app.use('/api/qiwa', qiwaRouter);\n  else console.log('âš ï¸  Router not found: ./routes/qiwa.routes');\n\n  // Measurement & Rehabilitation Program System routes (Phase 28)\n  if (measurementsRouter) app.use('/api/measurements', measurementsRouter);\n  else console.log('âš ï¸  Router not found: ./routes/measurements.routes');\n\n  // Data Migration System routes\n  console.log('[MIGRATION-DEBUG] About to register migrations router...');\n  console.log('[MIGRATION-DEBUG] migrationRouter type:', typeof migrationRouter);\n  console.log('[MIGRATION-DEBUG] migrationRouter.stack exists:', migrationRouter && migrationRouter.stack ? 'YES' : 'NO');\n  if (migrationRouter) {\n    console.log('[MIGRATION-DEBUG] Calling app.use for /api/migrations');\n    app.use('/api/migrations', migrationRouter);\n    console.log('âœ… Migration Routes loaded successfully on /api/migrations');\n    console.log('[MIGRATION-DEBUG] Registered successfully');\n  } else {\n    console.log('âš ï¸  Router not found: ./routes/migrations');\n  }\n  console.log('[MIGRATION-DEBUG] Migration router registration complete');\n\n  console.log('âœ… Routes loaded successfully');\n\n  // === DIRECT MIGRATION ENDPOINTS (Workaround for Router Issue) ===\n  // These are added directly to app as a workaround for router mounting issues\n  const MigrationService = require('./services/migration/MigrationManager');\n  const CSVProcessor = require('./services/migration/CSVProcessor');\n  \n  let migrationManager = null;\n  \n  // Direct endpoint: Initialize\n  app.post('/api/migrations/initialize', (req, res) => {\n    try {\n      const { sourceDB, targetDB } = req.body;\n      if (!sourceDB || !targetDB) {\n        return res.status(400).json({\n          success: false,\n          error: 'Source and target databases are required',\n        });\n      }\n      migrationManager = new MigrationService({\n        sourceDB,\n        targetDB,\n        csvProcessor: new CSVProcessor(),\n        logger: console,\n      });\n      console.log('[MIGRATION] Manager initialized');\n      res.json({\n        success: true,\n        message: 'Migration manager initialized',\n      });\n    } catch (error) {\n      res.status(500).json({\n        success: false,\n        error: error.message,\n      });\n    }\n  });\n  \n  // Direct endpoint: Get/Create Plan\n  app.get('/api/migrations/plan', (req, res) => {\n    try {\n      if (!migrationManager) {\n        return res.status(400).json({\n          success: false,\n          error: 'No migration plan created'\n        });\n      }\n      res.json({\n        success: true,\n        plan: migrationManager.getCurrentPlan ? migrationManager.getCurrentPlan() : null\n      });\n    } catch (error) {\n      res.status(500).json({\n        success: false,\n        error: error.message,\n      });\n    }\n  });\n  \n  console.log('âœ… Direct Migration Endpoints Registered (Workaround)');\n\n  // Phase 10: Analytics & Optimization endpoints\n  app.get('/api/admin/analytics', (req, res) => {\n    try {\n      const summary = analytics.getSummary();\n      res.json(summary);\n    } catch (error) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // Cache management endpoint\n  app.post('/api/admin/cache/clear', async (req, res) => {\n    try {\n      await cache.clear();\n      res.json({ message: 'Cache cleared successfully' });\n    } catch (error) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // Cache status endpoint\n  app.get('/api/admin/cache/stats', async (req, res) => {\n    try {\n      const stats = await cache.stats();\n      res.json({ stats });\n    } catch (error) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // Rate limit status endpoint\n  app.get('/api/admin/ratelimit/status', async (req, res) => {\n    try {\n      const status = await limiters.api.getStatus(req);\n      res.json(status);\n    } catch (error) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n  console.log('   - Enterprise: auth, users, rbac, analytics, cms');\n  console.log('   - Phase 8: upload, export');\n  console.log('   - Phase 13: programs, sessions, scheduler');\n  console.log('   - Phase 29-31: drivers, gps, traffic-accidents');\n} catch (err) {\n  console.error('âŒ Error loading routes:', err.message);\n}\n\n// Branch-ERP Integration routes (Advanced Branch Management)\n// Registered outside try block to ensure it always loads\nconsole.log('[INTEGRATION-DEBUG] Starting integration routes registration...');\nconsole.log('[INTEGRATION-DEBUG] branchIntegrationRoutes type:', typeof branchIntegrationRoutes);\nif (branchIntegrationRoutes) {\n  console.log('[INTEGRATION-DEBUG] branchIntegrationRoutes.router type:', typeof branchIntegrationRoutes.router);\n}\n\nif (branchIntegrationRoutes && branchIntegrationRoutes.router) {\n  console.log('[INTEGRATION-DEBUG] Registering integration routes...');\n  app.use('/api/integration', branchIntegrationRoutes.router);\n  console.log('âœ… Branch-ERP Integration routes loaded on /api/integration');\n} else {\n  console.log('âš ï¸  Branch-ERP Integration router failed to load');\n}\n\n// Test direct integration route\napp.get('/api/integration-test', (req, res) => {\n  res.json({ message: 'Direct integration test route works' });\n});\n\n// 404 handler\napp.use((req, res) => {\n  console.log(`[404-DEBUG] Unmatched route: ${req.method} ${req.path}`);\n  res.status(404).json({\n    error: 'Not Found',\n    path: req.path,\n    method: req.method,\n  });\n});\n\n// Error Handler\napp.use(errorHandler);\n\n// Start scheduled notifications job\ntry {\n  require('./services/scheduledNotificationsJob')();\n  console.log('Scheduled notifications job started.');\n} catch (err) {\n  console.error('Failed to start scheduled notifications job:', err);\n}\n\nmodule.exports = app;\n"],"mappings":"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","ignoreList":[]}