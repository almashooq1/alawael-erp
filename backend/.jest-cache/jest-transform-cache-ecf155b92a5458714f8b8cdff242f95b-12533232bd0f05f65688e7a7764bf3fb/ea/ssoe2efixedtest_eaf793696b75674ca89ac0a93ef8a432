cc7f3275179a5ca233033fe0e260173e
const http = require('http');
const assert = require('assert');
const BASE_URL = 'http://localhost:3002';
const SSO_BASE = `${BASE_URL}/api/sso`;

// Test data
const testUser = {
  email: 'test@example.com',
  password: 'Test@123456',
  name: 'Test User'
};
let authToken = '';
let refreshToken = '';
let sessionId = '';
let userId = '';

// Helper function to make HTTP requests
function makeRequest(method, path, body = null, fullPath = false) {
  return new Promise((resolve, reject) => {
    let fullUrl;
    if (fullPath || path.startsWith('http')) {
      fullUrl = path;
    } else {
      fullUrl = `${SSO_BASE}${path}`;
    }
    const url = new URL(fullUrl);
    const options = {
      hostname: url.hostname,
      port: url.port || 3002,
      path: url.pathname + url.search,
      method: method,
      headers: {
        'Content-Type': 'application/json',
        ...(authToken && {
          'Authorization': `Bearer ${authToken}`
        })
      }
    };
    const req = http.request(options, res => {
      let data = '';
      res.on('data', chunk => data += chunk);
      res.on('end', () => {
        try {
          const parsed = JSON.parse(data);
          resolve({
            status: res.statusCode,
            body: parsed
          });
        } catch (e) {
          resolve({
            status: res.statusCode,
            body: data
          });
        }
      });
    });
    req.on('error', reject);
    if (body) req.write(JSON.stringify(body));
    req.end();
  });
}

// Test cases
const tests = {
  // Health & Status Tests
  'Health Check': async () => {
    const res = await makeRequest('GET', `${BASE_URL}/health`);
    console.log(`   Health Check: GET /health -> ${res.status}`);
    assert.strictEqual(res.status, 200, 'Health check should return 200');
    console.log('   âœ… PASS');
  },
  'Status Endpoint': async () => {
    const res = await makeRequest('GET', '/status');
    console.log(`   Status Endpoint: GET /api/sso/status -> ${res.status}`);
    assert.strictEqual(res.status, 200, `Status should be 200, got ${res.status}`);
    console.log('   âœ… PASS');
  },
  // Authentication Tests
  'Login - Valid Credentials': async () => {
    const res = await makeRequest('POST', '/login', {
      email: testUser.email,
      password: testUser.password
    });
    console.log(`   Login: POST /api/sso/login -> ${res.status}`);
    assert(res.status === 200 || res.status === 201, `Expected 200/201, got ${res.status}`);
    if (res.body.token) {
      authToken = res.body.token;
      console.log('   âœ… PASS - Token received');
    } else if (res.body.accessToken) {
      authToken = res.body.accessToken;
      console.log('   âœ… PASS - AccessToken received');
    } else {
      console.log('   âœ… PASS - Login accepted (mock mode)');
    }
    if (res.body.refreshToken) refreshToken = res.body.refreshToken;
    if (res.body.user?.id) userId = res.body.user.id;
    if (res.body.session?.id) sessionId = res.body.session.id;
  },
  'Login - Missing Email': async () => {
    const res = await makeRequest('POST', '/login', {
      password: testUser.password
    });
    console.log(`   Missing Email: POST /api/sso/login -> ${res.status}`);
    assert(res.status >= 400, `Should reject, got ${res.status}`);
    console.log('   âœ… PASS');
  },
  'Login - Missing Password': async () => {
    const res = await makeRequest('POST', '/login', {
      email: testUser.email
    });
    console.log(`   Missing Password: POST /api/sso/login -> ${res.status}`);
    assert(res.status >= 400, `Should reject, got ${res.status}`);
    console.log('   âœ… PASS');
  },
  // Token Operations
  'Verify Token': async () => {
    if (!authToken) {
      console.log('   Verify Token: SKIPPED (no auth token)');
      return;
    }
    const res = await makeRequest('POST', '/verify-token', {
      token: authToken
    });
    console.log(`   Verify Token: POST /api/sso/verify-token -> ${res.status}`);
    assert(res.status === 200 || res.status === 401, `Got ${res.status}`);
    console.log('   âœ… PASS');
  },
  'Refresh Token': async () => {
    if (!refreshToken && !authToken) {
      console.log('   Refresh Token: SKIPPED (no tokens)');
      return;
    }
    const res = await makeRequest('POST', '/refresh-token', {
      refreshToken: refreshToken || authToken
    });
    console.log(`   Refresh Token: POST /api/sso/refresh-token -> ${res.status}`);
    assert(res.status === 200 || res.status === 401, `Got ${res.status}`);
    console.log('   âœ… PASS');
  },
  'Introspect Token': async () => {
    if (!authToken) {
      console.log('   Introspect Token: SKIPPED (no auth token)');
      return;
    }
    const res = await makeRequest('POST', '/introspect', {
      token: authToken
    });
    console.log(`   Introspect Token: POST /api/sso/introspect -> ${res.status}`);
    assert(res.status === 200 || res.status === 401, `Got ${res.status}`);
    console.log('   âœ… PASS');
  },
  // Session Tests
  'List Sessions': async () => {
    const res = await makeRequest('GET', '/sessions');
    console.log(`   List Sessions: GET /api/sso/sessions -> ${res.status}`);
    assert(res.status === 200 || res.status === 401, `Expected 200/401, got ${res.status}`);
    console.log('   âœ… PASS');
  },
  'Get User Info': async () => {
    if (!authToken) {
      console.log('   Get User Info: SKIPPED (no auth token)');
      return;
    }
    const res = await makeRequest('GET', '/userinfo');
    console.log(`   Get User Info: GET /api/sso/userinfo -> ${res.status}`);
    assert(res.status === 200 || res.status === 401, `Got ${res.status}`);
    console.log('   âœ… PASS');
  },
  // OAuth Tests
  'OAuth Authorize': async () => {
    const res = await makeRequest('GET', '/oauth2/authorize?client_id=test&redirect_uri=http://localhost:3000/callback');
    console.log(`   OAuth Authorize: GET /api/sso/oauth2/authorize -> ${res.status}`);
    assert(res.status === 200 || res.status === 301 || res.status === 302 || res.status === 400, `Got ${res.status}`);
    console.log('   âœ… PASS');
  },
  'OAuth Token': async () => {
    const res = await makeRequest('POST', '/oauth2/token', {
      grant_type: 'authorization_code',
      code: 'test_code',
      client_id: 'test'
    });
    console.log(`   OAuth Token: POST /api/sso/oauth2/token -> ${res.status}`);
    assert(res.status === 200 || res.status === 400, `Got ${res.status}`);
    console.log('   âœ… PASS');
  },
  // Logout Tests
  'Logout': async () => {
    const res = await makeRequest('POST', '/logout');
    console.log(`   Logout: POST /api/sso/logout -> ${res.status}`);
    assert(res.status === 200 || res.status === 401, `Expected 200/401, got ${res.status}`);
    console.log('   âœ… PASS');
  },
  'Logout All': async () => {
    const res = await makeRequest('POST', '/logout-all');
    console.log(`   Logout All: POST /api/sso/logout-all -> ${res.status}`);
    assert(res.status === 200 || res.status === 401, `Expected 200/401, got ${res.status}`);
    console.log('   âœ… PASS');
  }
};

// Run tests
async function runTests() {
  console.log('\nðŸ§ª SSO E2E Test Suite');
  console.log('â•'.repeat(50));
  let passed = 0;
  let failed = 0;
  const results = [];
  for (const [testName, testFn] of Object.entries(tests)) {
    try {
      console.log(`\nðŸ“‹ ${testName}`);
      await testFn();
      passed++;
      results.push({
        name: testName,
        status: 'PASS'
      });
    } catch (err) {
      console.log(`   âŒ FAIL: ${err.message}`);
      failed++;
      results.push({
        name: testName,
        status: 'FAIL',
        error: err.message
      });
    }
  }

  // Summary
  console.log('\n' + 'â•'.repeat(50));
  console.log('\nðŸ“Š Test Results Summary');
  console.log(`âœ… Passed: ${passed}`);
  console.log(`âŒ Failed: ${failed}`);
  console.log(`ðŸ“ˆ Total: ${passed + failed}`);
  console.log(`ðŸ“Š Success Rate: ${(passed / (passed + failed) * 100).toFixed(1)}%\n`);

  // Detailed results
  console.log('Detailed Results:');
  results.forEach(r => {
    const icon = r.status === 'PASS' ? 'âœ…' : 'âŒ';
    console.log(`  ${icon} ${r.name}: ${r.status}${r.error ? ` - ${r.error}` : ''}`);
  });
  process.exit(failed > 0 ? 1 : 0);
}

// Run tests after short delay to ensure server is ready
setTimeout(runTests, 1000);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJodHRwIiwicmVxdWlyZSIsImFzc2VydCIsIkJBU0VfVVJMIiwiU1NPX0JBU0UiLCJ0ZXN0VXNlciIsImVtYWlsIiwicGFzc3dvcmQiLCJuYW1lIiwiYXV0aFRva2VuIiwicmVmcmVzaFRva2VuIiwic2Vzc2lvbklkIiwidXNlcklkIiwibWFrZVJlcXVlc3QiLCJtZXRob2QiLCJwYXRoIiwiYm9keSIsImZ1bGxQYXRoIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJmdWxsVXJsIiwic3RhcnRzV2l0aCIsInVybCIsIlVSTCIsIm9wdGlvbnMiLCJob3N0bmFtZSIsInBvcnQiLCJwYXRobmFtZSIsInNlYXJjaCIsImhlYWRlcnMiLCJyZXEiLCJyZXF1ZXN0IiwicmVzIiwiZGF0YSIsIm9uIiwiY2h1bmsiLCJwYXJzZWQiLCJKU09OIiwicGFyc2UiLCJzdGF0dXMiLCJzdGF0dXNDb2RlIiwiZSIsIndyaXRlIiwic3RyaW5naWZ5IiwiZW5kIiwidGVzdHMiLCJIZWFsdGggQ2hlY2siLCJjb25zb2xlIiwibG9nIiwic3RyaWN0RXF1YWwiLCJTdGF0dXMgRW5kcG9pbnQiLCJMb2dpbiAtIFZhbGlkIENyZWRlbnRpYWxzIiwidG9rZW4iLCJhY2Nlc3NUb2tlbiIsInVzZXIiLCJpZCIsInNlc3Npb24iLCJMb2dpbiAtIE1pc3NpbmcgRW1haWwiLCJMb2dpbiAtIE1pc3NpbmcgUGFzc3dvcmQiLCJWZXJpZnkgVG9rZW4iLCJSZWZyZXNoIFRva2VuIiwiSW50cm9zcGVjdCBUb2tlbiIsIkxpc3QgU2Vzc2lvbnMiLCJHZXQgVXNlciBJbmZvIiwiT0F1dGggQXV0aG9yaXplIiwiT0F1dGggVG9rZW4iLCJncmFudF90eXBlIiwiY29kZSIsImNsaWVudF9pZCIsIkxvZ291dCIsIkxvZ291dCBBbGwiLCJydW5UZXN0cyIsInJlcGVhdCIsInBhc3NlZCIsImZhaWxlZCIsInJlc3VsdHMiLCJ0ZXN0TmFtZSIsInRlc3RGbiIsIk9iamVjdCIsImVudHJpZXMiLCJwdXNoIiwiZXJyIiwibWVzc2FnZSIsImVycm9yIiwidG9GaXhlZCIsImZvckVhY2giLCJyIiwiaWNvbiIsInByb2Nlc3MiLCJleGl0Iiwic2V0VGltZW91dCJdLCJzb3VyY2VzIjpbInNzby1lMmUtZml4ZWQudGVzdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcclxuXHJcbmNvbnN0IGh0dHAgPSByZXF1aXJlKCdodHRwJyk7XHJcbmNvbnN0IGFzc2VydCA9IHJlcXVpcmUoJ2Fzc2VydCcpO1xyXG5cclxuY29uc3QgQkFTRV9VUkwgPSAnaHR0cDovL2xvY2FsaG9zdDozMDAyJztcclxuY29uc3QgU1NPX0JBU0UgPSBgJHtCQVNFX1VSTH0vYXBpL3Nzb2A7XHJcblxyXG4vLyBUZXN0IGRhdGFcclxuY29uc3QgdGVzdFVzZXIgPSB7XHJcbiAgZW1haWw6ICd0ZXN0QGV4YW1wbGUuY29tJyxcclxuICBwYXNzd29yZDogJ1Rlc3RAMTIzNDU2JyxcclxuICBuYW1lOiAnVGVzdCBVc2VyJ1xyXG59O1xyXG5cclxubGV0IGF1dGhUb2tlbiA9ICcnO1xyXG5sZXQgcmVmcmVzaFRva2VuID0gJyc7XHJcbmxldCBzZXNzaW9uSWQgPSAnJztcclxubGV0IHVzZXJJZCA9ICcnO1xyXG5cclxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIG1ha2UgSFRUUCByZXF1ZXN0c1xyXG5mdW5jdGlvbiBtYWtlUmVxdWVzdChtZXRob2QsIHBhdGgsIGJvZHkgPSBudWxsLCBmdWxsUGF0aCA9IGZhbHNlKSB7XHJcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgIGxldCBmdWxsVXJsO1xyXG4gICAgaWYgKGZ1bGxQYXRoIHx8IHBhdGguc3RhcnRzV2l0aCgnaHR0cCcpKSB7XHJcbiAgICAgIGZ1bGxVcmwgPSBwYXRoO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZnVsbFVybCA9IGAke1NTT19CQVNFfSR7cGF0aH1gO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBjb25zdCB1cmwgPSBuZXcgVVJMKGZ1bGxVcmwpO1xyXG4gICAgXHJcbiAgICBjb25zdCBvcHRpb25zID0ge1xyXG4gICAgICBob3N0bmFtZTogdXJsLmhvc3RuYW1lLFxyXG4gICAgICBwb3J0OiB1cmwucG9ydCB8fCAzMDAyLFxyXG4gICAgICBwYXRoOiB1cmwucGF0aG5hbWUgKyB1cmwuc2VhcmNoLFxyXG4gICAgICBtZXRob2Q6IG1ldGhvZCxcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgLi4uKGF1dGhUb2tlbiAmJiB7ICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke2F1dGhUb2tlbn1gIH0pXHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgY29uc3QgcmVxID0gaHR0cC5yZXF1ZXN0KG9wdGlvbnMsIChyZXMpID0+IHtcclxuICAgICAgbGV0IGRhdGEgPSAnJztcclxuICAgICAgcmVzLm9uKCdkYXRhJywgY2h1bmsgPT4gZGF0YSArPSBjaHVuayk7XHJcbiAgICAgIHJlcy5vbignZW5kJywgKCkgPT4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBjb25zdCBwYXJzZWQgPSBKU09OLnBhcnNlKGRhdGEpO1xyXG4gICAgICAgICAgcmVzb2x2ZSh7IHN0YXR1czogcmVzLnN0YXR1c0NvZGUsIGJvZHk6IHBhcnNlZCB9KTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICByZXNvbHZlKHsgc3RhdHVzOiByZXMuc3RhdHVzQ29kZSwgYm9keTogZGF0YSB9KTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmVxLm9uKCdlcnJvcicsIHJlamVjdCk7XHJcbiAgICBpZiAoYm9keSkgcmVxLndyaXRlKEpTT04uc3RyaW5naWZ5KGJvZHkpKTtcclxuICAgIHJlcS5lbmQoKTtcclxuICB9KTtcclxufVxyXG5cclxuLy8gVGVzdCBjYXNlc1xyXG5jb25zdCB0ZXN0cyA9IHtcclxuICAvLyBIZWFsdGggJiBTdGF0dXMgVGVzdHNcclxuICAnSGVhbHRoIENoZWNrJzogYXN5bmMgKCkgPT4ge1xyXG4gICAgY29uc3QgcmVzID0gYXdhaXQgbWFrZVJlcXVlc3QoJ0dFVCcsIGAke0JBU0VfVVJMfS9oZWFsdGhgKTtcclxuICAgIGNvbnNvbGUubG9nKGAgICBIZWFsdGggQ2hlY2s6IEdFVCAvaGVhbHRoIC0+ICR7cmVzLnN0YXR1c31gKTtcclxuICAgIGFzc2VydC5zdHJpY3RFcXVhbChyZXMuc3RhdHVzLCAyMDAsICdIZWFsdGggY2hlY2sgc2hvdWxkIHJldHVybiAyMDAnKTtcclxuICAgIGNvbnNvbGUubG9nKCcgICDinIUgUEFTUycpO1xyXG4gIH0sXHJcblxyXG4gICdTdGF0dXMgRW5kcG9pbnQnOiBhc3luYyAoKSA9PiB7XHJcbiAgICBjb25zdCByZXMgPSBhd2FpdCBtYWtlUmVxdWVzdCgnR0VUJywgJy9zdGF0dXMnKTtcclxuICAgIGNvbnNvbGUubG9nKGAgICBTdGF0dXMgRW5kcG9pbnQ6IEdFVCAvYXBpL3Nzby9zdGF0dXMgLT4gJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgYXNzZXJ0LnN0cmljdEVxdWFsKHJlcy5zdGF0dXMsIDIwMCwgYFN0YXR1cyBzaG91bGQgYmUgMjAwLCBnb3QgJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgY29uc29sZS5sb2coJyAgIOKchSBQQVNTJyk7XHJcbiAgfSxcclxuXHJcbiAgLy8gQXV0aGVudGljYXRpb24gVGVzdHNcclxuICAnTG9naW4gLSBWYWxpZCBDcmVkZW50aWFscyc6IGFzeW5jICgpID0+IHtcclxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IG1ha2VSZXF1ZXN0KCdQT1NUJywgJy9sb2dpbicsIHtcclxuICAgICAgZW1haWw6IHRlc3RVc2VyLmVtYWlsLFxyXG4gICAgICBwYXNzd29yZDogdGVzdFVzZXIucGFzc3dvcmRcclxuICAgIH0pO1xyXG4gICAgY29uc29sZS5sb2coYCAgIExvZ2luOiBQT1NUIC9hcGkvc3NvL2xvZ2luIC0+ICR7cmVzLnN0YXR1c31gKTtcclxuICAgIGFzc2VydChyZXMuc3RhdHVzID09PSAyMDAgfHwgcmVzLnN0YXR1cyA9PT0gMjAxLCBgRXhwZWN0ZWQgMjAwLzIwMSwgZ290ICR7cmVzLnN0YXR1c31gKTtcclxuICAgIFxyXG4gICAgaWYgKHJlcy5ib2R5LnRva2VuKSB7XHJcbiAgICAgIGF1dGhUb2tlbiA9IHJlcy5ib2R5LnRva2VuO1xyXG4gICAgICBjb25zb2xlLmxvZygnICAg4pyFIFBBU1MgLSBUb2tlbiByZWNlaXZlZCcpO1xyXG4gICAgfSBlbHNlIGlmIChyZXMuYm9keS5hY2Nlc3NUb2tlbikge1xyXG4gICAgICBhdXRoVG9rZW4gPSByZXMuYm9keS5hY2Nlc3NUb2tlbjtcclxuICAgICAgY29uc29sZS5sb2coJyAgIOKchSBQQVNTIC0gQWNjZXNzVG9rZW4gcmVjZWl2ZWQnKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCcgICDinIUgUEFTUyAtIExvZ2luIGFjY2VwdGVkIChtb2NrIG1vZGUpJyk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGlmIChyZXMuYm9keS5yZWZyZXNoVG9rZW4pIHJlZnJlc2hUb2tlbiA9IHJlcy5ib2R5LnJlZnJlc2hUb2tlbjtcclxuICAgIGlmIChyZXMuYm9keS51c2VyPy5pZCkgdXNlcklkID0gcmVzLmJvZHkudXNlci5pZDtcclxuICAgIGlmIChyZXMuYm9keS5zZXNzaW9uPy5pZCkgc2Vzc2lvbklkID0gcmVzLmJvZHkuc2Vzc2lvbi5pZDtcclxuICB9LFxyXG5cclxuICAnTG9naW4gLSBNaXNzaW5nIEVtYWlsJzogYXN5bmMgKCkgPT4ge1xyXG4gICAgY29uc3QgcmVzID0gYXdhaXQgbWFrZVJlcXVlc3QoJ1BPU1QnLCAnL2xvZ2luJywge1xyXG4gICAgICBwYXNzd29yZDogdGVzdFVzZXIucGFzc3dvcmRcclxuICAgIH0pO1xyXG4gICAgY29uc29sZS5sb2coYCAgIE1pc3NpbmcgRW1haWw6IFBPU1QgL2FwaS9zc28vbG9naW4gLT4gJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgYXNzZXJ0KHJlcy5zdGF0dXMgPj0gNDAwLCBgU2hvdWxkIHJlamVjdCwgZ290ICR7cmVzLnN0YXR1c31gKTtcclxuICAgIGNvbnNvbGUubG9nKCcgICDinIUgUEFTUycpO1xyXG4gIH0sXHJcblxyXG4gICdMb2dpbiAtIE1pc3NpbmcgUGFzc3dvcmQnOiBhc3luYyAoKSA9PiB7XHJcbiAgICBjb25zdCByZXMgPSBhd2FpdCBtYWtlUmVxdWVzdCgnUE9TVCcsICcvbG9naW4nLCB7XHJcbiAgICAgIGVtYWlsOiB0ZXN0VXNlci5lbWFpbFxyXG4gICAgfSk7XHJcbiAgICBjb25zb2xlLmxvZyhgICAgTWlzc2luZyBQYXNzd29yZDogUE9TVCAvYXBpL3Nzby9sb2dpbiAtPiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgICBhc3NlcnQocmVzLnN0YXR1cyA+PSA0MDAsIGBTaG91bGQgcmVqZWN0LCBnb3QgJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgY29uc29sZS5sb2coJyAgIOKchSBQQVNTJyk7XHJcbiAgfSxcclxuXHJcbiAgLy8gVG9rZW4gT3BlcmF0aW9uc1xyXG4gICdWZXJpZnkgVG9rZW4nOiBhc3luYyAoKSA9PiB7XHJcbiAgICBpZiAoIWF1dGhUb2tlbikge1xyXG4gICAgICBjb25zb2xlLmxvZygnICAgVmVyaWZ5IFRva2VuOiBTS0lQUEVEIChubyBhdXRoIHRva2VuKScpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBjb25zdCByZXMgPSBhd2FpdCBtYWtlUmVxdWVzdCgnUE9TVCcsICcvdmVyaWZ5LXRva2VuJywge1xyXG4gICAgICB0b2tlbjogYXV0aFRva2VuXHJcbiAgICB9KTtcclxuICAgIGNvbnNvbGUubG9nKGAgICBWZXJpZnkgVG9rZW46IFBPU1QgL2FwaS9zc28vdmVyaWZ5LXRva2VuIC0+ICR7cmVzLnN0YXR1c31gKTtcclxuICAgIGFzc2VydChyZXMuc3RhdHVzID09PSAyMDAgfHwgcmVzLnN0YXR1cyA9PT0gNDAxLCBgR290ICR7cmVzLnN0YXR1c31gKTtcclxuICAgIGNvbnNvbGUubG9nKCcgICDinIUgUEFTUycpO1xyXG4gIH0sXHJcblxyXG4gICdSZWZyZXNoIFRva2VuJzogYXN5bmMgKCkgPT4ge1xyXG4gICAgaWYgKCFyZWZyZXNoVG9rZW4gJiYgIWF1dGhUb2tlbikge1xyXG4gICAgICBjb25zb2xlLmxvZygnICAgUmVmcmVzaCBUb2tlbjogU0tJUFBFRCAobm8gdG9rZW5zKScpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBjb25zdCByZXMgPSBhd2FpdCBtYWtlUmVxdWVzdCgnUE9TVCcsICcvcmVmcmVzaC10b2tlbicsIHtcclxuICAgICAgcmVmcmVzaFRva2VuOiByZWZyZXNoVG9rZW4gfHwgYXV0aFRva2VuXHJcbiAgICB9KTtcclxuICAgIGNvbnNvbGUubG9nKGAgICBSZWZyZXNoIFRva2VuOiBQT1NUIC9hcGkvc3NvL3JlZnJlc2gtdG9rZW4gLT4gJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgYXNzZXJ0KHJlcy5zdGF0dXMgPT09IDIwMCB8fCByZXMuc3RhdHVzID09PSA0MDEsIGBHb3QgJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgY29uc29sZS5sb2coJyAgIOKchSBQQVNTJyk7XHJcbiAgfSxcclxuXHJcbiAgJ0ludHJvc3BlY3QgVG9rZW4nOiBhc3luYyAoKSA9PiB7XHJcbiAgICBpZiAoIWF1dGhUb2tlbikge1xyXG4gICAgICBjb25zb2xlLmxvZygnICAgSW50cm9zcGVjdCBUb2tlbjogU0tJUFBFRCAobm8gYXV0aCB0b2tlbiknKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY29uc3QgcmVzID0gYXdhaXQgbWFrZVJlcXVlc3QoJ1BPU1QnLCAnL2ludHJvc3BlY3QnLCB7XHJcbiAgICAgIHRva2VuOiBhdXRoVG9rZW5cclxuICAgIH0pO1xyXG4gICAgY29uc29sZS5sb2coYCAgIEludHJvc3BlY3QgVG9rZW46IFBPU1QgL2FwaS9zc28vaW50cm9zcGVjdCAtPiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgICBhc3NlcnQocmVzLnN0YXR1cyA9PT0gMjAwIHx8IHJlcy5zdGF0dXMgPT09IDQwMSwgYEdvdCAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgICBjb25zb2xlLmxvZygnICAg4pyFIFBBU1MnKTtcclxuICB9LFxyXG5cclxuICAvLyBTZXNzaW9uIFRlc3RzXHJcbiAgJ0xpc3QgU2Vzc2lvbnMnOiBhc3luYyAoKSA9PiB7XHJcbiAgICBjb25zdCByZXMgPSBhd2FpdCBtYWtlUmVxdWVzdCgnR0VUJywgJy9zZXNzaW9ucycpO1xyXG4gICAgY29uc29sZS5sb2coYCAgIExpc3QgU2Vzc2lvbnM6IEdFVCAvYXBpL3Nzby9zZXNzaW9ucyAtPiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgICBhc3NlcnQocmVzLnN0YXR1cyA9PT0gMjAwIHx8IHJlcy5zdGF0dXMgPT09IDQwMSwgYEV4cGVjdGVkIDIwMC80MDEsIGdvdCAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgICBjb25zb2xlLmxvZygnICAg4pyFIFBBU1MnKTtcclxuICB9LFxyXG5cclxuICAnR2V0IFVzZXIgSW5mbyc6IGFzeW5jICgpID0+IHtcclxuICAgIGlmICghYXV0aFRva2VuKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCcgICBHZXQgVXNlciBJbmZvOiBTS0lQUEVEIChubyBhdXRoIHRva2VuKScpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBjb25zdCByZXMgPSBhd2FpdCBtYWtlUmVxdWVzdCgnR0VUJywgJy91c2VyaW5mbycpO1xyXG4gICAgY29uc29sZS5sb2coYCAgIEdldCBVc2VyIEluZm86IEdFVCAvYXBpL3Nzby91c2VyaW5mbyAtPiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgICBhc3NlcnQocmVzLnN0YXR1cyA9PT0gMjAwIHx8IHJlcy5zdGF0dXMgPT09IDQwMSwgYEdvdCAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgICBjb25zb2xlLmxvZygnICAg4pyFIFBBU1MnKTtcclxuICB9LFxyXG5cclxuICAvLyBPQXV0aCBUZXN0c1xyXG4gICdPQXV0aCBBdXRob3JpemUnOiBhc3luYyAoKSA9PiB7XHJcbiAgICBjb25zdCByZXMgPSBhd2FpdCBtYWtlUmVxdWVzdCgnR0VUJywgJy9vYXV0aDIvYXV0aG9yaXplP2NsaWVudF9pZD10ZXN0JnJlZGlyZWN0X3VyaT1odHRwOi8vbG9jYWxob3N0OjMwMDAvY2FsbGJhY2snKTtcclxuICAgIGNvbnNvbGUubG9nKGAgICBPQXV0aCBBdXRob3JpemU6IEdFVCAvYXBpL3Nzby9vYXV0aDIvYXV0aG9yaXplIC0+ICR7cmVzLnN0YXR1c31gKTtcclxuICAgIGFzc2VydChyZXMuc3RhdHVzID09PSAyMDAgfHwgcmVzLnN0YXR1cyA9PT0gMzAxIHx8IHJlcy5zdGF0dXMgPT09IDMwMiB8fCByZXMuc3RhdHVzID09PSA0MDAsIGBHb3QgJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgY29uc29sZS5sb2coJyAgIOKchSBQQVNTJyk7XHJcbiAgfSxcclxuXHJcbiAgJ09BdXRoIFRva2VuJzogYXN5bmMgKCkgPT4ge1xyXG4gICAgY29uc3QgcmVzID0gYXdhaXQgbWFrZVJlcXVlc3QoJ1BPU1QnLCAnL29hdXRoMi90b2tlbicsIHtcclxuICAgICAgZ3JhbnRfdHlwZTogJ2F1dGhvcml6YXRpb25fY29kZScsXHJcbiAgICAgIGNvZGU6ICd0ZXN0X2NvZGUnLFxyXG4gICAgICBjbGllbnRfaWQ6ICd0ZXN0J1xyXG4gICAgfSk7XHJcbiAgICBjb25zb2xlLmxvZyhgICAgT0F1dGggVG9rZW46IFBPU1QgL2FwaS9zc28vb2F1dGgyL3Rva2VuIC0+ICR7cmVzLnN0YXR1c31gKTtcclxuICAgIGFzc2VydChyZXMuc3RhdHVzID09PSAyMDAgfHwgcmVzLnN0YXR1cyA9PT0gNDAwLCBgR290ICR7cmVzLnN0YXR1c31gKTtcclxuICAgIGNvbnNvbGUubG9nKCcgICDinIUgUEFTUycpO1xyXG4gIH0sXHJcblxyXG4gIC8vIExvZ291dCBUZXN0c1xyXG4gICdMb2dvdXQnOiBhc3luYyAoKSA9PiB7XHJcbiAgICBjb25zdCByZXMgPSBhd2FpdCBtYWtlUmVxdWVzdCgnUE9TVCcsICcvbG9nb3V0Jyk7XHJcbiAgICBjb25zb2xlLmxvZyhgICAgTG9nb3V0OiBQT1NUIC9hcGkvc3NvL2xvZ291dCAtPiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgICBhc3NlcnQocmVzLnN0YXR1cyA9PT0gMjAwIHx8IHJlcy5zdGF0dXMgPT09IDQwMSwgYEV4cGVjdGVkIDIwMC80MDEsIGdvdCAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgICBjb25zb2xlLmxvZygnICAg4pyFIFBBU1MnKTtcclxuICB9LFxyXG5cclxuICAnTG9nb3V0IEFsbCc6IGFzeW5jICgpID0+IHtcclxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IG1ha2VSZXF1ZXN0KCdQT1NUJywgJy9sb2dvdXQtYWxsJyk7XHJcbiAgICBjb25zb2xlLmxvZyhgICAgTG9nb3V0IEFsbDogUE9TVCAvYXBpL3Nzby9sb2dvdXQtYWxsIC0+ICR7cmVzLnN0YXR1c31gKTtcclxuICAgIGFzc2VydChyZXMuc3RhdHVzID09PSAyMDAgfHwgcmVzLnN0YXR1cyA9PT0gNDAxLCBgRXhwZWN0ZWQgMjAwLzQwMSwgZ290ICR7cmVzLnN0YXR1c31gKTtcclxuICAgIGNvbnNvbGUubG9nKCcgICDinIUgUEFTUycpO1xyXG4gIH1cclxufTtcclxuXHJcbi8vIFJ1biB0ZXN0c1xyXG5hc3luYyBmdW5jdGlvbiBydW5UZXN0cygpIHtcclxuICBjb25zb2xlLmxvZygnXFxu8J+nqiBTU08gRTJFIFRlc3QgU3VpdGUnKTtcclxuICBjb25zb2xlLmxvZygn4pWQJy5yZXBlYXQoNTApKTtcclxuICBcclxuICBsZXQgcGFzc2VkID0gMDtcclxuICBsZXQgZmFpbGVkID0gMDtcclxuICBjb25zdCByZXN1bHRzID0gW107XHJcblxyXG4gIGZvciAoY29uc3QgW3Rlc3ROYW1lLCB0ZXN0Rm5dIG9mIE9iamVjdC5lbnRyaWVzKHRlc3RzKSkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc29sZS5sb2coYFxcbvCfk4sgJHt0ZXN0TmFtZX1gKTtcclxuICAgICAgYXdhaXQgdGVzdEZuKCk7XHJcbiAgICAgIHBhc3NlZCsrO1xyXG4gICAgICByZXN1bHRzLnB1c2goeyBuYW1lOiB0ZXN0TmFtZSwgc3RhdHVzOiAnUEFTUycgfSk7XHJcbiAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgY29uc29sZS5sb2coYCAgIOKdjCBGQUlMOiAke2Vyci5tZXNzYWdlfWApO1xyXG4gICAgICBmYWlsZWQrKztcclxuICAgICAgcmVzdWx0cy5wdXNoKHsgbmFtZTogdGVzdE5hbWUsIHN0YXR1czogJ0ZBSUwnLCBlcnJvcjogZXJyLm1lc3NhZ2UgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBTdW1tYXJ5XHJcbiAgY29uc29sZS5sb2coJ1xcbicgKyAn4pWQJy5yZXBlYXQoNTApKTtcclxuICBjb25zb2xlLmxvZygnXFxu8J+TiiBUZXN0IFJlc3VsdHMgU3VtbWFyeScpO1xyXG4gIGNvbnNvbGUubG9nKGDinIUgUGFzc2VkOiAke3Bhc3NlZH1gKTtcclxuICBjb25zb2xlLmxvZyhg4p2MIEZhaWxlZDogJHtmYWlsZWR9YCk7XHJcbiAgY29uc29sZS5sb2coYPCfk4ggVG90YWw6ICR7cGFzc2VkICsgZmFpbGVkfWApO1xyXG4gIGNvbnNvbGUubG9nKGDwn5OKIFN1Y2Nlc3MgUmF0ZTogJHsoKHBhc3NlZCAvIChwYXNzZWQgKyBmYWlsZWQpKSAqIDEwMCkudG9GaXhlZCgxKX0lXFxuYCk7XHJcblxyXG4gIC8vIERldGFpbGVkIHJlc3VsdHNcclxuICBjb25zb2xlLmxvZygnRGV0YWlsZWQgUmVzdWx0czonKTtcclxuICByZXN1bHRzLmZvckVhY2gociA9PiB7XHJcbiAgICBjb25zdCBpY29uID0gci5zdGF0dXMgPT09ICdQQVNTJyA/ICfinIUnIDogJ+KdjCc7XHJcbiAgICBjb25zb2xlLmxvZyhgICAke2ljb259ICR7ci5uYW1lfTogJHtyLnN0YXR1c30ke3IuZXJyb3IgPyBgIC0gJHtyLmVycm9yfWAgOiAnJ31gKTtcclxuICB9KTtcclxuXHJcbiAgcHJvY2Vzcy5leGl0KGZhaWxlZCA+IDAgPyAxIDogMCk7XHJcbn1cclxuXHJcbi8vIFJ1biB0ZXN0cyBhZnRlciBzaG9ydCBkZWxheSB0byBlbnN1cmUgc2VydmVyIGlzIHJlYWR5XHJcbnNldFRpbWVvdXQocnVuVGVzdHMsIDEwMDApO1xyXG4iXSwibWFwcGluZ3MiOiJBQUVBLE1BQU1BLElBQUksR0FBR0MsT0FBTyxDQUFDLE1BQU0sQ0FBQztBQUM1QixNQUFNQyxNQUFNLEdBQUdELE9BQU8sQ0FBQyxRQUFRLENBQUM7QUFFaEMsTUFBTUUsUUFBUSxHQUFHLHVCQUF1QjtBQUN4QyxNQUFNQyxRQUFRLEdBQUcsR0FBR0QsUUFBUSxVQUFVOztBQUV0QztBQUNBLE1BQU1FLFFBQVEsR0FBRztFQUNmQyxLQUFLLEVBQUUsa0JBQWtCO0VBQ3pCQyxRQUFRLEVBQUUsYUFBYTtFQUN2QkMsSUFBSSxFQUFFO0FBQ1IsQ0FBQztBQUVELElBQUlDLFNBQVMsR0FBRyxFQUFFO0FBQ2xCLElBQUlDLFlBQVksR0FBRyxFQUFFO0FBQ3JCLElBQUlDLFNBQVMsR0FBRyxFQUFFO0FBQ2xCLElBQUlDLE1BQU0sR0FBRyxFQUFFOztBQUVmO0FBQ0EsU0FBU0MsV0FBV0EsQ0FBQ0MsTUFBTSxFQUFFQyxJQUFJLEVBQUVDLElBQUksR0FBRyxJQUFJLEVBQUVDLFFBQVEsR0FBRyxLQUFLLEVBQUU7RUFDaEUsT0FBTyxJQUFJQyxPQUFPLENBQUMsQ0FBQ0MsT0FBTyxFQUFFQyxNQUFNLEtBQUs7SUFDdEMsSUFBSUMsT0FBTztJQUNYLElBQUlKLFFBQVEsSUFBSUYsSUFBSSxDQUFDTyxVQUFVLENBQUMsTUFBTSxDQUFDLEVBQUU7TUFDdkNELE9BQU8sR0FBR04sSUFBSTtJQUNoQixDQUFDLE1BQU07TUFDTE0sT0FBTyxHQUFHLEdBQUdqQixRQUFRLEdBQUdXLElBQUksRUFBRTtJQUNoQztJQUVBLE1BQU1RLEdBQUcsR0FBRyxJQUFJQyxHQUFHLENBQUNILE9BQU8sQ0FBQztJ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