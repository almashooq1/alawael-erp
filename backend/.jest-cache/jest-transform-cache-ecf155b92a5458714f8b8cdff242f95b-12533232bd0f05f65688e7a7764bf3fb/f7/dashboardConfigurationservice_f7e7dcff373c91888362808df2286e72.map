{"version":3,"names":["EventEmitter","require","v4","uuidv4","Logger","DashboardConfigurationService","constructor","logger","dashboards","Map","history","snapshots","themes","_initializeThemes","name","colors","primary","secondary","success","danger","warning","info","background","text","fonts","createDashboard","configData","userId","description","theme","gridSize","widgets","isPublic","Error","dashboardId","dashboard","id","layout","refreshInterval","autoRefresh","locked","metadata","createdAt","Date","updatedAt","viewCount","lastViewedBy","collaborators","permissions","canEdit","canView","canShare","set","version","timestamp","changes","snapshot","JSON","parse","stringify","emit","error","message","updateDashboard","updates","get","backup","allowedFields","forEach","field","_addToHistory","Object","keys","previousValues","addWidget","widgetData","push","action","widget","removeWidget","widgetId","index","findIndex","w","removed","splice","reorderWidgets","newOrder","getDashboard","viewDuration","getUserDashboards","Array","from","values","filter","d","includes","sort","a","b","deleteDashboard","has","delete","applyTheme","themeName","getAvailableThemes","entries","map","key","value","createSnapshot","snapshotId","toLocaleString","data","snaps","length","shift","restoreSnapshot","find","s","assign","getSnapshots","record","dashboardHistory","lastVersion","getHistory","limit","slice","h","undo","previousVersion","pop","setLockStatus","getDashboardStats","total","public","private","totalWidgets","reduce","sum","averageWidgetsPerDashboard","toFixed","module","exports"],"sources":["dashboardConfiguration.service.js"],"sourcesContent":["/**\r\n * Dashboard Configuration Service\r\n * خدمة إعدادات لوحة المعلومات\r\n * \r\n * المسؤوليات:\r\n * - إدارة إعدادات لوحات المعلومات\r\n * - حفظ واستعادة تكوينات الوحات\r\n * - نسخ احتياطية وإصدارات الإعدادات\r\n * - Undo/Redo للتغييرات\r\n */\r\n\r\nconst { EventEmitter } = require('events');\r\nconst { v4: uuidv4 } = require('uuid');\r\nconst Logger = require('../utils/logger');\r\n\r\nclass DashboardConfigurationService extends EventEmitter {\r\n  constructor() {\r\n    super();\r\n    this.logger = Logger;\r\n\r\n    // Dashboard configurations\r\n    this.dashboards = new Map();\r\n\r\n    // Configuration history for undo/redo\r\n    this.history = new Map();\r\n\r\n    // Snapshots for quick restore\r\n    this.snapshots = new Map();\r\n\r\n    // Theme configurations\r\n    this.themes = this._initializeThemes();\r\n  }\r\n\r\n  /**\r\n   * Initialize theme templates\r\n   * تهيئة قوالب المواضيع\r\n   * \r\n   * @private\r\n   */\r\n  _initializeThemes() {\r\n    return {\r\n      'light': {\r\n        name: 'Light Theme',\r\n        colors: {\r\n          primary: '#007bff',\r\n          secondary: '#6c757d',\r\n          success: '#28a745',\r\n          danger: '#dc3545',\r\n          warning: '#ffc107',\r\n          info: '#17a2b8',\r\n          background: '#ffffff',\r\n          text: '#000000'\r\n        },\r\n        fonts: {\r\n          primary: 'Segoe UI',\r\n          secondary: 'Arial'\r\n        }\r\n      },\r\n      'dark': {\r\n        name: 'Dark Theme',\r\n        colors: {\r\n          primary: '#4a9eff',\r\n          secondary: '#b0b0b0',\r\n          success: '#2ecc71',\r\n          danger: '#e74c3c',\r\n          warning: '#f39c12',\r\n          info: '#3498db',\r\n          background: '#1a1a1a',\r\n          text: '#ffffff'\r\n        },\r\n        fonts: {\r\n          primary: 'Segoe UI',\r\n          secondary: 'Arial'\r\n        }\r\n      },\r\n      'professional': {\r\n        name: 'Professional Theme',\r\n        colors: {\r\n          primary: '#1f4788',\r\n          secondary: '#4a5568',\r\n          success: '#3d7e2a',\r\n          danger: '#c53030',\r\n          warning: '#b7860b',\r\n          info: '#2c5aa0',\r\n          background: '#f5f7fa',\r\n          text: '#2d3748'\r\n        },\r\n        fonts: {\r\n          primary: 'Inter',\r\n          secondary: 'Roboto'\r\n        }\r\n      }\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Create new dashboard configuration\r\n   * إنشاء تكوين لوحة معلومات جديد\r\n   * \r\n   * @param {Object} configData - Configuration data\r\n   * @returns {Object} Created dashboard\r\n   */\r\n  createDashboard(configData) {\r\n    try {\r\n      const {\r\n        userId,\r\n        name,\r\n        description,\r\n        theme = 'light',\r\n        gridSize = 12,\r\n        widgets = [],\r\n        isPublic = false\r\n      } = configData;\r\n\r\n      // Validate required fields\r\n      if (!name) throw new Error('Dashboard name is required');\r\n\r\n      const dashboardId = uuidv4();\r\n\r\n      const dashboard = {\r\n        id: dashboardId,\r\n        userId,\r\n        name,\r\n        description: description || '',\r\n        theme,\r\n        gridSize,\r\n        widgets,\r\n        layout: 'grid',\r\n        refreshInterval: 30000, // 30 seconds default\r\n        autoRefresh: true,\r\n        isPublic,\r\n        locked: false,\r\n        metadata: {\r\n          createdAt: new Date(),\r\n          updatedAt: new Date(),\r\n          viewCount: 0,\r\n          lastViewedBy: [],\r\n          collaborators: [userId]\r\n        },\r\n        permissions: {\r\n          canEdit: [userId],\r\n          canView: [userId],\r\n          canShare: [userId]\r\n        }\r\n      };\r\n\r\n      this.dashboards.set(dashboardId, dashboard);\r\n\r\n      // Initialize history for this dashboard\r\n      this.history.set(dashboardId, [{\r\n        version: 1,\r\n        timestamp: new Date(),\r\n        changes: [],\r\n        snapshot: JSON.parse(JSON.stringify(dashboard))\r\n      }]);\r\n\r\n      this.emit('dashboard:created', { dashboardId, dashboard });\r\n      this.logger.info(`Dashboard created: ${dashboardId}`);\r\n      return dashboard;\r\n    } catch (error) {\r\n      this.logger.error(`Error creating dashboard: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Update dashboard configuration\r\n   * تحديث إعدادات لوحة المعلومات\r\n   * \r\n   * @param {String} dashboardId - Dashboard ID\r\n   * @param {Object} updates - Update data\r\n   * @returns {Object} Updated dashboard\r\n   */\r\n  updateDashboard(dashboardId, updates) {\r\n    try {\r\n      const dashboard = this.dashboards.get(dashboardId);\r\n      if (!dashboard) {\r\n        throw new Error(`Dashboard not found: ${dashboardId}`);\r\n      }\r\n\r\n      // Create backup before update\r\n      const backup = JSON.parse(JSON.stringify(dashboard));\r\n\r\n      // Update allowed fields\r\n      const allowedFields = ['name', 'description', 'theme', 'gridSize', 'refreshInterval', 'autoRefresh', 'layout', 'isPublic'];\r\n\r\n      allowedFields.forEach(field => {\r\n        if (field in updates) {\r\n          dashboard[field] = updates[field];\r\n        }\r\n      });\r\n\r\n      dashboard.metadata.updatedAt = new Date();\r\n\r\n      // Record in history\r\n      this._addToHistory(dashboardId, {\r\n        changes: Object.keys(updates),\r\n        previousValues: backup\r\n      });\r\n\r\n      this.emit('dashboard:updated', { dashboardId, updates });\r\n      this.logger.info(`Dashboard updated: ${dashboardId}`);\r\n      return dashboard;\r\n    } catch (error) {\r\n      this.logger.error(`Error updating dashboard: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Add widget to dashboard\r\n   * إضافة ويدجت إلى لوحة المعلومات\r\n   * \r\n   * @param {String} dashboardId - Dashboard ID\r\n   * @param {Object} widgetData - Widget data\r\n   * @returns {Object} Updated dashboard\r\n   */\r\n  addWidget(dashboardId, widgetData) {\r\n    try {\r\n      const dashboard = this.dashboards.get(dashboardId);\r\n      if (!dashboard) {\r\n        throw new Error(`Dashboard not found: ${dashboardId}`);\r\n      }\r\n\r\n      dashboard.widgets.push(widgetData);\r\n      dashboard.metadata.updatedAt = new Date();\r\n\r\n      this._addToHistory(dashboardId, {\r\n        changes: ['widgets'],\r\n        action: 'widget:added',\r\n        widgetData\r\n      });\r\n\r\n      this.emit('dashboard:widgetAdded', { dashboardId, widget: widgetData });\r\n      this.logger.info(`Widget added to dashboard: ${dashboardId}`);\r\n      return dashboard;\r\n    } catch (error) {\r\n      this.logger.error(`Error adding widget: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Remove widget from dashboard\r\n   * إزالة ويدجت من لوحة المعلومات\r\n   * \r\n   * @param {String} dashboardId - Dashboard ID\r\n   * @param {String} widgetId - Widget ID\r\n   * @returns {Object} Updated dashboard\r\n   */\r\n  removeWidget(dashboardId, widgetId) {\r\n    try {\r\n      const dashboard = this.dashboards.get(dashboardId);\r\n      if (!dashboard) {\r\n        throw new Error(`Dashboard not found: ${dashboardId}`);\r\n      }\r\n\r\n      const index = dashboard.widgets.findIndex(w => w.id === widgetId);\r\n      if (index === -1) {\r\n        throw new Error(`Widget not found: ${widgetId}`);\r\n      }\r\n\r\n      const removed = dashboard.widgets.splice(index, 1)[0];\r\n      dashboard.metadata.updatedAt = new Date();\r\n\r\n      this._addToHistory(dashboardId, {\r\n        changes: ['widgets'],\r\n        action: 'widget:removed',\r\n        widgetId\r\n      });\r\n\r\n      this.emit('dashboard:widgetRemoved', { dashboardId, widgetId });\r\n      this.logger.info(`Widget removed from dashboard: ${dashboardId}`);\r\n      return dashboard;\r\n    } catch (error) {\r\n      this.logger.error(`Error removing widget: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Reorder widgets on dashboard\r\n   * إعادة ترتيب الويدجطس على لوحة المعلومات\r\n   * \r\n   * @param {String} dashboardId - Dashboard ID\r\n   * @param {Array} newOrder - New widget order\r\n   * @returns {Object} Updated dashboard\r\n   */\r\n  reorderWidgets(dashboardId, newOrder) {\r\n    try {\r\n      const dashboard = this.dashboards.get(dashboardId);\r\n      if (!dashboard) {\r\n        throw new Error(`Dashboard not found: ${dashboardId}`);\r\n      }\r\n\r\n      dashboard.widgets = newOrder;\r\n      dashboard.metadata.updatedAt = new Date();\r\n\r\n      this._addToHistory(dashboardId, {\r\n        changes: ['widgets'],\r\n        action: 'widgets:reordered'\r\n      });\r\n\r\n      this.emit('dashboard:reordered', { dashboardId });\r\n      this.logger.info(`Dashboard reordered: ${dashboardId}`);\r\n      return dashboard;\r\n    } catch (error) {\r\n      this.logger.error(`Error reordering widgets: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get dashboard by ID\r\n   * الحصول على لوحة المعلومات بـ ID\r\n   * \r\n   * @param {String} dashboardId - Dashboard ID\r\n   * @returns {Object} Dashboard\r\n   */\r\n  getDashboard(dashboardId) {\r\n    try {\r\n      const dashboard = this.dashboards.get(dashboardId);\r\n      if (!dashboard) {\r\n        throw new Error(`Dashboard not found: ${dashboardId}`);\r\n      }\r\n\r\n      // Track view\r\n      dashboard.metadata.viewCount++;\r\n      dashboard.metadata.lastViewedBy.push({\r\n        timestamp: new Date(),\r\n        viewDuration: 0\r\n      });\r\n\r\n      return dashboard;\r\n    } catch (error) {\r\n      this.logger.error(`Error getting dashboard: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get user's dashboards\r\n   * الحصول على لوحات المستخدم\r\n   * \r\n   * @param {String} userId - User ID\r\n   * @returns {Array} Dashboards\r\n   */\r\n  getUserDashboards(userId) {\r\n    try {\r\n      const dashboards = Array.from(this.dashboards.values()).filter(\r\n        d => d.userId === userId || d.permissions.canView.includes(userId)\r\n      );\r\n\r\n      return dashboards.sort((a, b) => \r\n        b.metadata.updatedAt - a.metadata.updatedAt\r\n      );\r\n    } catch (error) {\r\n      this.logger.error(`Error getting user dashboards: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Delete dashboard\r\n   * حذف لوحة المعلومات\r\n   * \r\n   * @param {String} dashboardId - Dashboard ID\r\n   */\r\n  deleteDashboard(dashboardId) {\r\n    try {\r\n      if (!this.dashboards.has(dashboardId)) {\r\n        throw new Error(`Dashboard not found: ${dashboardId}`);\r\n      }\r\n\r\n      this.dashboards.delete(dashboardId);\r\n      this.history.delete(dashboardId);\r\n      this.snapshots.delete(dashboardId);\r\n\r\n      this.emit('dashboard:deleted', { dashboardId });\r\n      this.logger.info(`Dashboard deleted: ${dashboardId}`);\r\n    } catch (error) {\r\n      this.logger.error(`Error deleting dashboard: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Apply theme to dashboard\r\n   * تطبيق موضوع على لوحة المعلومات\r\n   * \r\n   * @param {String} dashboardId - Dashboard ID\r\n   * @param {String} themeName - Theme name\r\n   * @returns {Object} Updated dashboard\r\n   */\r\n  applyTheme(dashboardId, themeName) {\r\n    try {\r\n      const dashboard = this.dashboards.get(dashboardId);\r\n      if (!dashboard) {\r\n        throw new Error(`Dashboard not found: ${dashboardId}`);\r\n      }\r\n\r\n      if (!this.themes[themeName]) {\r\n        throw new Error(`Theme not found: ${themeName}`);\r\n      }\r\n\r\n      dashboard.theme = themeName;\r\n      dashboard.metadata.updatedAt = new Date();\r\n\r\n      this._addToHistory(dashboardId, {\r\n        changes: ['theme'],\r\n        action: 'theme:applied',\r\n        theme: themeName\r\n      });\r\n\r\n      this.emit('dashboard:themeApplied', { dashboardId, theme: themeName });\r\n      this.logger.info(`Theme applied to dashboard: ${dashboardId}`);\r\n      return dashboard;\r\n    } catch (error) {\r\n      this.logger.error(`Error applying theme: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get available themes\r\n   * الحصول على المواضيع المتاحة\r\n   * \r\n   * @returns {Object} Themes\r\n   */\r\n  getAvailableThemes() {\r\n    try {\r\n      return Object.entries(this.themes).map(([key, value]) => ({\r\n        id: key,\r\n        name: value.name,\r\n        colors: value.colors\r\n      }));\r\n    } catch (error) {\r\n      this.logger.error(`Error getting themes: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Create snapshot of dashboard\r\n   * إنشاء صورة حفظ للوحة المعلومات\r\n   * \r\n   * @param {String} dashboardId - Dashboard ID\r\n   * @param {String} name - Snapshot name\r\n   * @returns {String} Snapshot ID\r\n   */\r\n  createSnapshot(dashboardId, name = '') {\r\n    try {\r\n      const dashboard = this.dashboards.get(dashboardId);\r\n      if (!dashboard) {\r\n        throw new Error(`Dashboard not found: ${dashboardId}`);\r\n      }\r\n\r\n      const snapshotId = uuidv4();\r\n\r\n      const snapshot = {\r\n        id: snapshotId,\r\n        dashboardId,\r\n        name: name || `Snapshot ${new Date().toLocaleString()}`,\r\n        data: JSON.parse(JSON.stringify(dashboard)),\r\n        createdAt: new Date()\r\n      };\r\n\r\n      if (!this.snapshots.has(dashboardId)) {\r\n        this.snapshots.set(dashboardId, []);\r\n      }\r\n\r\n      this.snapshots.get(dashboardId).push(snapshot);\r\n\r\n      // Keep only last 20 snapshots\r\n      const snaps = this.snapshots.get(dashboardId);\r\n      if (snaps.length > 20) {\r\n        snaps.shift();\r\n      }\r\n\r\n      this.emit('snapshot:created', { dashboardId, snapshotId });\r\n      this.logger.info(`Snapshot created: ${snapshotId}`);\r\n      return snapshotId;\r\n    } catch (error) {\r\n      this.logger.error(`Error creating snapshot: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Restore dashboard from snapshot\r\n   * استعادة لوحة المعلومات من صورة حفظ\r\n   * \r\n   * @param {String} dashboardId - Dashboard ID\r\n   * @param {String} snapshotId - Snapshot ID\r\n   * @returns {Object} Restored dashboard\r\n   */\r\n  restoreSnapshot(dashboardId, snapshotId) {\r\n    try {\r\n      const snapshots = this.snapshots.get(dashboardId);\r\n      if (!snapshots) {\r\n        throw new Error('No snapshots found for dashboard');\r\n      }\r\n\r\n      const snapshot = snapshots.find(s => s.id === snapshotId);\r\n      if (!snapshot) {\r\n        throw new Error(`Snapshot not found: ${snapshotId}`);\r\n      }\r\n\r\n      const dashboard = this.dashboards.get(dashboardId);\r\n      const backup = JSON.parse(JSON.stringify(dashboard));\r\n\r\n      // Copy snapshot data\r\n      Object.assign(dashboard, JSON.parse(JSON.stringify(snapshot.data)));\r\n      dashboard.metadata.updatedAt = new Date();\r\n\r\n      this._addToHistory(dashboardId, {\r\n        changes: ['all'],\r\n        action: 'snapshot:restored',\r\n        snapshotId\r\n      });\r\n\r\n      this.emit('snapshot:restored', { dashboardId, snapshotId });\r\n      this.logger.info(`Snapshot restored: ${snapshotId}`);\r\n      return dashboard;\r\n    } catch (error) {\r\n      this.logger.error(`Error restoring snapshot: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get snapshots for dashboard\r\n   * الحصول على صور الحفظ للوحة المعلومات\r\n   * \r\n   * @param {String} dashboardId - Dashboard ID\r\n   * @returns {Array} Snapshots\r\n   */\r\n  getSnapshots(dashboardId) {\r\n    try {\r\n      const snapshots = this.snapshots.get(dashboardId) || [];\r\n      return snapshots.map(s => ({\r\n        id: s.id,\r\n        name: s.name,\r\n        createdAt: s.createdAt\r\n      }));\r\n    } catch (error) {\r\n      this.logger.error(`Error getting snapshots: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Add to history\r\n   * إضافة إلى السجل\r\n   * \r\n   * @private\r\n   */\r\n  _addToHistory(dashboardId, record) {\r\n    try {\r\n      const dashboardHistory = this.history.get(dashboardId) || [];\r\n      const lastVersion = dashboardHistory[dashboardHistory.length - 1]?.version || 0;\r\n\r\n      dashboardHistory.push({\r\n        version: lastVersion + 1,\r\n        timestamp: new Date(),\r\n        ...record,\r\n        snapshot: JSON.parse(JSON.stringify(this.dashboards.get(dashboardId)))\r\n      });\r\n\r\n      // Keep only last 50 versions\r\n      if (dashboardHistory.length > 50) {\r\n        dashboardHistory.shift();\r\n      }\r\n\r\n      this.history.set(dashboardId, dashboardHistory);\r\n    } catch (error) {\r\n      this.logger.error(`Error adding to history: ${error.message}`);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get history for dashboard\r\n   * الحصول على السجل للوحة المعلومات\r\n   * \r\n   * @param {String} dashboardId - Dashboard ID\r\n   * @param {Number} limit - Result limit\r\n   * @returns {Array} History\r\n   */\r\n  getHistory(dashboardId, limit = 10) {\r\n    try {\r\n      const history = this.history.get(dashboardId) || [];\r\n      return history.slice(-limit).map(h => ({\r\n        version: h.version,\r\n        timestamp: h.timestamp,\r\n        changes: h.changes,\r\n        action: h.action\r\n      }));\r\n    } catch (error) {\r\n      this.logger.error(`Error getting history: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Undo last change\r\n   * التراجع عن آخر تغيير\r\n   * \r\n   * @param {String} dashboardId - Dashboard ID\r\n   * @returns {Object} Restored dashboard\r\n   */\r\n  undo(dashboardId) {\r\n    try {\r\n      const history = this.history.get(dashboardId) || [];\r\n      if (history.length < 2) {\r\n        throw new Error('No undo history available');\r\n      }\r\n\r\n      // Go back to previous version\r\n      const previousVersion = history[history.length - 2];\r\n      const dashboard = this.dashboards.get(dashboardId);\r\n\r\n      Object.assign(dashboard, JSON.parse(JSON.stringify(previousVersion.snapshot)));\r\n      dashboard.metadata.updatedAt = new Date();\r\n\r\n      // Remove last history entry\r\n      history.pop();\r\n\r\n      this.emit('dashboard:undone', { dashboardId });\r\n      this.logger.info(`Change undone for dashboard: ${dashboardId}`);\r\n      return dashboard;\r\n    } catch (error) {\r\n      this.logger.error(`Error undoing: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Lock/unlock dashboard\r\n   * قفل/فتح لوحة المعلومات\r\n   * \r\n   * @param {String} dashboardId - Dashboard ID\r\n   * @param {Boolean} locked - Lock status\r\n   * @returns {Object} Updated dashboard\r\n   */\r\n  setLockStatus(dashboardId, locked) {\r\n    try {\r\n      const dashboard = this.dashboards.get(dashboardId);\r\n      if (!dashboard) {\r\n        throw new Error(`Dashboard not found: ${dashboardId}`);\r\n      }\r\n\r\n      dashboard.locked = locked;\r\n      dashboard.metadata.updatedAt = new Date();\r\n\r\n      this.emit('dashboard:lockStatusChanged', { dashboardId, locked });\r\n      this.logger.info(`Dashboard lock status changed: ${dashboardId} -> ${locked}`);\r\n      return dashboard;\r\n    } catch (error) {\r\n      this.logger.error(`Error changing lock status: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get dashboard stats\r\n   * الحصول على إحصائيات لوحة المعلومات\r\n   * \r\n   * @returns {Object} Statistics\r\n   */\r\n  getDashboardStats() {\r\n    try {\r\n      const dashboards = Array.from(this.dashboards.values());\r\n\r\n      return {\r\n        total: dashboards.length,\r\n        public: dashboards.filter(d => d.isPublic).length,\r\n        private: dashboards.filter(d => !d.isPublic).length,\r\n        locked: dashboards.filter(d => d.locked).length,\r\n        totalWidgets: dashboards.reduce((sum, d) => sum + d.widgets.length, 0),\r\n        averageWidgetsPerDashboard: dashboards.length > 0 \r\n          ? (dashboards.reduce((sum, d) => sum + d.widgets.length, 0) / dashboards.length).toFixed(2)\r\n          : 0\r\n      };\r\n    } catch (error) {\r\n      this.logger.error(`Error getting dashboard stats: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n}\r\n\r\nmodule.exports = new DashboardConfigurationService();\r\n"],"mappings":"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","ignoreList":[]}