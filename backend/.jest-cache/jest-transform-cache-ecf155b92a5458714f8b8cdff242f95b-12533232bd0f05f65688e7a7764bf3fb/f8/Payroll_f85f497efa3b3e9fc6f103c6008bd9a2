d358d8ef834d54e89e574e1721cbe7ff
/**
 * Payroll Model (HR)
 * Modular, extensible payroll record for HR system
 */
const mongoose = require('mongoose');
const PayrollSchema = new mongoose.Schema({
  employeeId: {
    type: mongoose.Schema.Types.ObjectId,
    ref: 'Employee',
    required: true
  },
  month: {
    type: String,
    required: true
  },
  // YYYY-MM
  year: {
    type: Number,
    required: true
  },
  baseSalary: Number,
  allowances: [{
    name: String,
    amount: Number,
    type: String
  }],
  deductions: [{
    name: String,
    amount: Number,
    type: String
  }],
  totalGross: Number,
  totalDeductions: Number,
  totalNet: Number,
  attendance: {
    presentDays: Number,
    absentDays: Number,
    leaveDays: Number,
    workingDays: Number,
    overtime: Number
  },
  bonuses: [{
    name: String,
    amount: Number,
    reason: String
  }],
  penalties: [{
    name: String,
    amount: Number,
    reason: String
  }],
  paymentStatus: {
    type: String,
    enum: ['pending', 'processed', 'transferred', 'paid'],
    default: 'pending'
  },
  paymentDate: Date,
  paymentMethod: String,
  taxes: {
    incomeTax: Number,
    socialSecurity: Number,
    healthInsurance: Number
  },
  notes: String,
  approvedBy: String,
  approvalDate: Date,
  createdAt: {
    type: Date,
    default: Date.now
  },
  updatedAt: {
    type: Date,
    default: Date.now
  }
}, {
  timestamps: true,
  collection: 'payrolls'
});
PayrollSchema.index({
  employeeId: 1,
  month: 1
}, {
  unique: true
});
PayrollSchema.index({
  month: 1,
  paymentStatus: 1
});
module.exports = mongoose.model('Payroll', PayrollSchema);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJQYXlyb2xsU2NoZW1hIiwiU2NoZW1hIiwiZW1wbG95ZWVJZCIsInR5cGUiLCJUeXBlcyIsIk9iamVjdElkIiwicmVmIiwicmVxdWlyZWQiLCJtb250aCIsIlN0cmluZyIsInllYXIiLCJOdW1iZXIiLCJiYXNlU2FsYXJ5IiwiYWxsb3dhbmNlcyIsIm5hbWUiLCJhbW91bnQiLCJkZWR1Y3Rpb25zIiwidG90YWxHcm9zcyIsInRvdGFsRGVkdWN0aW9ucyIsInRvdGFsTmV0IiwiYXR0ZW5kYW5jZSIsInByZXNlbnREYXlzIiwiYWJzZW50RGF5cyIsImxlYXZlRGF5cyIsIndvcmtpbmdEYXlzIiwib3ZlcnRpbWUiLCJib251c2VzIiwicmVhc29uIiwicGVuYWx0aWVzIiwicGF5bWVudFN0YXR1cyIsImVudW0iLCJkZWZhdWx0IiwicGF5bWVudERhdGUiLCJEYXRlIiwicGF5bWVudE1ldGhvZCIsInRheGVzIiwiaW5jb21lVGF4Iiwic29jaWFsU2VjdXJpdHkiLCJoZWFsdGhJbnN1cmFuY2UiLCJub3RlcyIsImFwcHJvdmVkQnkiLCJhcHByb3ZhbERhdGUiLCJjcmVhdGVkQXQiLCJub3ciLCJ1cGRhdGVkQXQiLCJ0aW1lc3RhbXBzIiwiY29sbGVjdGlvbiIsImluZGV4IiwidW5pcXVlIiwibW9kdWxlIiwiZXhwb3J0cyIsIm1vZGVsIl0sInNvdXJjZXMiOlsiUGF5cm9sbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogUGF5cm9sbCBNb2RlbCAoSFIpXHJcbiAqIE1vZHVsYXIsIGV4dGVuc2libGUgcGF5cm9sbCByZWNvcmQgZm9yIEhSIHN5c3RlbVxyXG4gKi9cclxuY29uc3QgbW9uZ29vc2UgPSByZXF1aXJlKCdtb25nb29zZScpO1xyXG5cclxuY29uc3QgUGF5cm9sbFNjaGVtYSA9IG5ldyBtb25nb29zZS5TY2hlbWEoXHJcbiAge1xyXG4gICAgZW1wbG95ZWVJZDoge1xyXG4gICAgICB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsXHJcbiAgICAgIHJlZjogJ0VtcGxveWVlJyxcclxuICAgICAgcmVxdWlyZWQ6IHRydWUsXHJcbiAgICB9LFxyXG4gICAgbW9udGg6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSB9LCAvLyBZWVlZLU1NXHJcbiAgICB5ZWFyOiB7IHR5cGU6IE51bWJlciwgcmVxdWlyZWQ6IHRydWUgfSxcclxuICAgIGJhc2VTYWxhcnk6IE51bWJlcixcclxuICAgIGFsbG93YW5jZXM6IFtcclxuICAgICAge1xyXG4gICAgICAgIG5hbWU6IFN0cmluZyxcclxuICAgICAgICBhbW91bnQ6IE51bWJlcixcclxuICAgICAgICB0eXBlOiBTdHJpbmcsXHJcbiAgICAgIH0sXHJcbiAgICBdLFxyXG4gICAgZGVkdWN0aW9uczogW1xyXG4gICAgICB7XHJcbiAgICAgICAgbmFtZTogU3RyaW5nLFxyXG4gICAgICAgIGFtb3VudDogTnVtYmVyLFxyXG4gICAgICAgIHR5cGU6IFN0cmluZyxcclxuICAgICAgfSxcclxuICAgIF0sXHJcbiAgICB0b3RhbEdyb3NzOiBOdW1iZXIsXHJcbiAgICB0b3RhbERlZHVjdGlvbnM6IE51bWJlcixcclxuICAgIHRvdGFsTmV0OiBOdW1iZXIsXHJcbiAgICBhdHRlbmRhbmNlOiB7XHJcbiAgICAgIHByZXNlbnREYXlzOiBOdW1iZXIsXHJcbiAgICAgIGFic2VudERheXM6IE51bWJlcixcclxuICAgICAgbGVhdmVEYXlzOiBOdW1iZXIsXHJcbiAgICAgIHdvcmtpbmdEYXlzOiBOdW1iZXIsXHJcbiAgICAgIG92ZXJ0aW1lOiBOdW1iZXIsXHJcbiAgICB9LFxyXG4gICAgYm9udXNlczogW1xyXG4gICAgICB7XHJcbiAgICAgICAgbmFtZTogU3RyaW5nLFxyXG4gICAgICAgIGFtb3VudDogTnVtYmVyLFxyXG4gICAgICAgIHJlYXNvbjogU3RyaW5nLFxyXG4gICAgICB9LFxyXG4gICAgXSxcclxuICAgIHBlbmFsdGllczogW1xyXG4gICAgICB7XHJcbiAgICAgICAgbmFtZTogU3RyaW5nLFxyXG4gICAgICAgIGFtb3VudDogTnVtYmVyLFxyXG4gICAgICAgIHJlYXNvbjogU3RyaW5nLFxyXG4gICAgICB9LFxyXG4gICAgXSxcclxuICAgIHBheW1lbnRTdGF0dXM6IHtcclxuICAgICAgdHlwZTogU3RyaW5nLFxyXG4gICAgICBlbnVtOiBbJ3BlbmRpbmcnLCAncHJvY2Vzc2VkJywgJ3RyYW5zZmVycmVkJywgJ3BhaWQnXSxcclxuICAgICAgZGVmYXVsdDogJ3BlbmRpbmcnLFxyXG4gICAgfSxcclxuICAgIHBheW1lbnREYXRlOiBEYXRlLFxyXG4gICAgcGF5bWVudE1ldGhvZDogU3RyaW5nLFxyXG4gICAgdGF4ZXM6IHtcclxuICAgICAgaW5jb21lVGF4OiBOdW1iZXIsXHJcbiAgICAgIHNvY2lhbFNlY3VyaXR5OiBOdW1iZXIsXHJcbiAgICAgIGhlYWx0aEluc3VyYW5jZTogTnVtYmVyLFxyXG4gICAgfSxcclxuICAgIG5vdGVzOiBTdHJpbmcsXHJcbiAgICBhcHByb3ZlZEJ5OiBTdHJpbmcsXHJcbiAgICBhcHByb3ZhbERhdGU6IERhdGUsXHJcbiAgICBjcmVhdGVkQXQ6IHsgdHlwZTogRGF0ZSwgZGVmYXVsdDogRGF0ZS5ub3cgfSxcclxuICAgIHVwZGF0ZWRBdDogeyB0eXBlOiBEYXRlLCBkZWZhdWx0OiBEYXRlLm5vdyB9LFxyXG4gIH0sXHJcbiAge1xyXG4gICAgdGltZXN0YW1wczogdHJ1ZSxcclxuICAgIGNvbGxlY3Rpb246ICdwYXlyb2xscycsXHJcbiAgfVxyXG4pO1xyXG5cclxuUGF5cm9sbFNjaGVtYS5pbmRleCh7IGVtcGxveWVlSWQ6IDEsIG1vbnRoOiAxIH0sIHsgdW5pcXVlOiB0cnVlIH0pO1xyXG5QYXlyb2xsU2NoZW1hLmluZGV4KHsgbW9udGg6IDEsIHBheW1lbnRTdGF0dXM6IDEgfSk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IG1vbmdvb3NlLm1vZGVsKCdQYXlyb2xsJywgUGF5cm9sbFNjaGVtYSk7XHJcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNQSxRQUFRLEdBQUdDLE9BQU8sQ0FBQyxVQUFVLENBQUM7QUFFcEMsTUFBTUMsYUFBYSxHQUFHLElBQUlGLFFBQVEsQ0FBQ0csTUFBTSxDQUN2QztFQUNFQyxVQUFVLEVBQUU7SUFDVkMsSUFBSSxFQUFFTCxRQUFRLENBQUNHLE1BQU0sQ0FBQ0csS0FBSyxDQUFDQyxRQUFRO0lBQ3BDQyxHQUFHLEVBQUUsVUFBVTtJQUNmQyxRQUFRLEVBQUU7RUFDWixDQUFDO0VBQ0RDLEtBQUssRUFBRTtJQUFFTCxJQUFJLEVBQUVNLE1BQU07SUFBRUYsUUFBUSxFQUFFO0VBQUssQ0FBQztFQUFFO0VBQ3pDRyxJQUFJLEVBQUU7SUFBRVAsSUFBSSxFQUFFUSxNQUFNO0lBQUVKLFFBQVEsRUFBRTtFQUFLLENBQUM7RUFDdENLLFVBQVUsRUFBRUQsTUFBTTtFQUNsQkUsVUFBVSxFQUFFLENBQ1Y7SUFDRUMsSUFBSSxFQUFFTCxNQUFNO0lBQ1pNLE1BQU0sRUFBRUosTUFBTTtJQUNkUixJQUFJLEVBQUVNO0VBQ1IsQ0FBQyxDQUNGO0VBQ0RPLFVBQVUsRUFBRSxDQUNWO0lBQ0VGLElBQUksRUFBRUwsTUFBTTtJQUNaTSxNQUFNLEVBQUVKLE1BQU07SUFDZFIsSUFBSSxFQUFFTTtFQUNSLENBQUMsQ0FDRjtFQUNEUSxVQUFVLEVBQUVOLE1BQU07RUFDbEJPLGVBQWUsRUFBRVAsTUFBTTtFQUN2QlEsUUFBUSxFQUFFUixNQUFNO0VBQ2hCUyxVQUFVLEVBQUU7SUFDVkMsV0FBVyxFQUFFVixNQUFNO0lBQ25CVyxVQUFVLEVBQUVYLE1BQU07SUFDbEJZLFNBQVMsRUFBRVosTUFBTTtJQUNqQmEsV0FBVyxFQUFFYixNQUFNO0lBQ25CYyxRQUFRLEVBQUVkO0VBQ1osQ0FBQztFQUNEZSxPQUFPLEVBQUUsQ0FDUDtJQUNFWixJQUFJLEVBQUVMLE1BQU07SUFDWk0sTUFBTSxFQUFFSixNQUFNO0lBQ2RnQixNQUFNLEVBQUVsQjtFQUNWLENBQUMsQ0FDRjtFQUNEbUIsU0FBUyxFQUFFLENBQ1Q7SUFDRWQsSUFBSSxFQUFFTCxNQUFNO0lBQ1pNLE1BQU0sRUFBRUosTUFBTTtJQUNkZ0IsTUFBTSxFQUFFbEI7RUFDVixDQUFDLENBQ0Y7RUFDRG9CLGFBQWEsRUFBRTtJQUNiMUIsSUFBSSxFQUFFTSxNQUFNO0lBQ1pxQixJQUFJLEVBQUUsQ0FBQyxTQUFTLEVBQUUsV0FBVyxFQUFFLGFBQWEsRUFBRSxNQUFNLENBQUM7SUFDckRDLE9BQU8sRUFBRTtFQUNYLENBQUM7RUFDREMsV0FBVyxFQUFFQyxJQUFJO0VBQ2pCQyxhQUFhLEVBQUV6QixNQUFNO0VBQ3JCMEIsS0FBSyxFQUFFO0lBQ0xDLFNBQVMsRUFBRXpCLE1BQU07SUFDakIwQixjQUFjLEVBQUUxQixNQUFNO0lBQ3RCMkIsZUFBZSxFQUFFM0I7RUFDbkIsQ0FBQztFQUNENEIsS0FBSyxFQUFFOUIsTUFBTTtFQUNiK0IsVUFBVSxFQUFFL0IsTUFBTTtFQUNsQmdDLFlBQVksRUFBRVIsSUFBSTtFQUNsQlMsU0FBUyxFQUFFO0lBQUV2QyxJQUFJLEVBQUU4QixJQUFJO0lBQUVGLE9BQU8sRUFBRUUsSUFBSSxDQUFDVTtFQUFJLENBQUM7RUFDNUNDLFNBQVMsRUFBRTtJQUFFekMsSUFBSSxFQUFFOEIsSUFBSTtJQUFFRixPQUFPLEVBQUVFLElBQUksQ0FBQ1U7RUFBSTtBQUM3QyxDQUFDLEVBQ0Q7RUFDRUUsVUFBVSxFQUFFLElBQUk7RUFDaEJDLFVBQVUsRUFBRTtBQUNkLENBQ0YsQ0FBQztBQUVEOUMsYUFBYSxDQUFDK0MsS0FBSyxDQUFDO0VBQUU3QyxVQUFVLEVBQUUsQ0FBQztFQUFFTSxLQUFLLEVBQUU7QUFBRSxDQUFDLEVBQUU7RUFBRXdDLE1BQU0sRUFBRTtBQUFLLENBQUMsQ0FBQztBQUNsRWhELGFBQWEsQ0FBQytDLEtBQUssQ0FBQztFQUFFdkMsS0FBSyxFQUFFLENBQUM7RUFBRXFCLGFBQWEsRUFBRTtBQUFFLENBQUMsQ0FBQztBQUVuRG9CLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHcEQsUUFBUSxDQUFDcUQsS0FBSyxDQUFDLFNBQVMsRUFBRW5ELGFBQWEsQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==