0c89ddf0cfad784ec384a7d0e0bd49a7
// Advanced Analytics Routes
// نقاط التحليلات المتقدمة

const express = require('express');
const router = express.Router();
const AnalyticsService = require('../services/analyticsService');
const {
  ApiResponse,
  ApiError
} = require('../utils/apiResponse');

// تتبع سلوك المستخدم
router.get('/user-behavior/:userId', (req, res, next) => {
  try {
    const {
      userId
    } = req.params;
    const result = AnalyticsService.trackUserBehavior(userId);
    return res.status(200).json(new ApiResponse(200, result, 'User behavior tracked'));
  } catch (_error) {
    return next(new ApiError(500, 'Failed to track user behavior', [_error.message]));
  }
});

// الحصول على مقاييس الأداء
router.get('/performance-metrics', (req, res, next) => {
  try {
    const {
      timeRange
    } = req.query;
    const result = AnalyticsService.getPerformanceMetrics(timeRange || '24h');
    return res.status(200).json(new ApiResponse(200, result, 'Performance metrics fetched'));
  } catch (_error) {
    return next(new ApiError(500, 'Failed to fetch performance metrics', [_error.message]));
  }
});

// عرض لوحة تحكم مخصصة
router.get('/dashboard/:userId', (req, res, next) => {
  try {
    const {
      userId
    } = req.params;
    const result = AnalyticsService.getCustomDashboard(userId);
    return res.status(200).json(new ApiResponse(200, result, 'Dashboard fetched'));
  } catch (error) {
    return next(new ApiError(500, 'Failed to fetch dashboard', [error.message]));
  }
});

// تحليل الاتجاهات
router.get('/trends/:metric', (req, res, next) => {
  try {
    const {
      metric
    } = req.params;
    const {
      period
    } = req.query;
    const result = AnalyticsService.analyzeTrends(metric, period || '30d');
    return res.status(200).json(new ApiResponse(200, result, 'Trends analyzed'));
  } catch (_error) {
    return next(new ApiError(500, 'Failed to analyze trends', [_error.message]));
  }
});

// الحصول على التوصيات
router.get('/recommendations', (req, res, next) => {
  try {
    const result = AnalyticsService.getRecommendations();
    return res.status(200).json(new ApiResponse(200, result, 'Recommendations fetched'));
  } catch (_error) {
    return next(new ApiError(500, 'Failed to fetch recommendations', [_error.message]));
  }
});

// مقارنة المقاييس
router.post('/compare-metrics', (req, res) => {
  try {
    const {
      metric1,
      metric2,
      period
    } = req.body;
    if (!metric1 || !metric2) {
      return res.status(400).json({
        success: false,
        message: 'Metrics required'
      });
    }
    const result = AnalyticsService.compareMetrics(metric1, metric2, period || '30d');
    res.status(200).json(result);
  } catch (_error) {
    res.status(500).json({
      success: false,
      message: 'Failed to compare metrics',
      error: _error.message
    });
  }
});

// توليد تقرير تحليلي
router.post('/generate-report', (req, res) => {
  try {
    const {
      reportType
    } = req.body;
    const result = AnalyticsService.generateAnalysisReport(reportType || 'executive');
    res.status(200).json(result);
  } catch (_error) {
    res.status(500).json({
      success: false,
      message: 'Failed to generate report',
      error: _error.message
    });
  }
});

// تتبع التحويل
router.post('/track-conversion', (req, res) => {
  try {
    const {
      userId,
      event
    } = req.body;
    if (!userId || !event) {
      return res.status(400).json({
        success: false,
        message: 'User ID and event required'
      });
    }
    const result = AnalyticsService.trackConversion(userId, event);
    res.status(200).json(result);
  } catch (_error) {
    res.status(500).json({
      success: false,
      message: 'Failed to track conversion',
      error: _error.message
    });
  }
});

// التحليلات في الوقت الفعلي
router.get('/real-time', (req, res) => {
  try {
    const result = AnalyticsService.getRealTimeAnalytics();
    res.status(200).json(result);
  } catch (_error) {
    res.status(500).json({
      success: false,
      message: 'Failed to fetch real-time analytics',
      error: _error.message
    });
  }
});

// التنبؤات التحليلية
router.get('/predictions', (req, res) => {
  try {
    const result = AnalyticsService.getPredictiveAnalytics();
    res.status(200).json(result);
  } catch (_error) {
    res.status(500).json({
      success: false,
      message: 'Failed to fetch predictions',
      error: _error.message
    });
  }
});

// تصدير التقرير
router.get('/export/:format', (req, res) => {
  try {
    const {
      format
    } = req.params;
    if (!['pdf', 'xlsx', 'csv'].includes(format)) {
      return res.status(400).json({
        success: false,
        message: 'Invalid format. Supported: pdf, xlsx, csv'
      });
    }
    const result = AnalyticsService.exportAnalyticsReport(format);
    res.status(200).json(result);
  } catch (_error) {
    res.status(500).json({
      success: false,
      message: 'Failed to export report',
      error: _error.message
    });
  }
});

// اختبار A/B
router.get('/ab-test/:testId', (req, res) => {
  try {
    const {
      testId
    } = req.params;
    const result = AnalyticsService.getABTestResults(testId);
    res.status(200).json(result);
  } catch (error) {
    res.status(500).json({
      success: false,
      message: 'Failed to fetch A/B test results',
      error: error.message
    });
  }
});

// مقاييس التسويق
router.get('/marketing/:campaign', (req, res) => {
  try {
    const {
      campaign
    } = req.params;
    const result = AnalyticsService.getMarketingMetrics(campaign);
    res.status(200).json(result);
  } catch (_error) {
    res.status(500).json({
      success: false,
      message: 'Failed to fetch cohort metrics',
      error: _error.message
    });
  }
});

/**
 * ======================
 * NEW ADVANCED ANALYTICS ENDPOINTS
 * مسارات التحليلات المتقدمة الجديدة
 * ======================
 */

const {
  authenticate,
  authorize
} = require('../middleware/auth');
const {
  KPI,
  ReportTemplate,
  GeneratedReport,
  Dashboard,
  Prediction
} = require('../models/analytics');

/**
 * KPI ENDPOINTS
 */

// Get all KPIs
router.get('/kpis', authenticate, async (req, res) => {
  try {
    const {
      category,
      isActive
    } = req.query;
    const filter = {};
    if (category) filter.category = category;
    if (isActive !== undefined) filter.isActive = isActive === 'true';
    const kpis = await KPI.find(filter).sort({
      category: 1,
      code: 1
    });
    res.json({
      success: true,
      count: kpis.length,
      data: kpis
    });
  } catch (_error) {
    res.status(500).json({
      success: false,
      error: 'خطأ في جلب المؤشرات'
    });
  }
});

// Get single KPI
router.get('/kpis/:id', authenticate, async (req, res) => {
  try {
    const kpi = await KPI.findById(req.params.id);
    if (!kpi) return res.status(404).json({
      success: false,
      error: 'المؤشر غير موجود'
    });
    res.json({
      success: true,
      data: kpi
    });
  } catch (_error) {
    res.status(500).json({
      success: false,
      error: 'خطأ في جلب المؤشر'
    });
  }
});

// Create KPI
router.post('/kpis', authenticate, authorize('admin', 'manager'), async (req, res) => {
  try {
    const kpi = new KPI({
      ...req.body,
      createdBy: req.user._id
    });
    await kpi.save();
    res.status(201).json({
      success: true,
      data: kpi,
      message: 'تم إنشاء المؤشر بنجاح'
    });
  } catch (error) {
    if (error.code === 11000) {
      return res.status(400).json({
        success: false,
        error: 'رمز المؤشر موجود مسبقاً'
      });
    }
    res.status(500).json({
      success: false,
      error: 'خطأ في إنشاء المؤشر'
    });
  }
});

// Calculate KPI
router.post('/kpis/:id/calculate', authenticate, async (req, res) => {
  try {
    const kpi = await AnalyticsService.calculateKPI(req.params.id);
    res.json({
      success: true,
      data: kpi,
      message: 'تم حساب المؤشر بنجاح'
    });
  } catch (error) {
    res.status(500).json({
      success: false,
      error: error.message || 'خطأ في حساب المؤشر'
    });
  }
});

/**
 * DASHBOARD ENDPOINTS
 */

// Executive Dashboard
router.get('/dashboard/executive', authenticate, authorize('admin', 'manager'), async (req, res) => {
  try {
    const dashboard = await AnalyticsService.getExecutiveDashboard(req.query);
    res.json({
      success: true,
      data: dashboard
    });
  } catch (_error) {
    res.status(500).json({
      success: false,
      error: 'خطأ في جلب لوحة التحكم'
    });
  }
});

// Get dashboards
router.get('/dashboards', authenticate, async (req, res) => {
  try {
    const filter = {
      $or: [{
        'permissions.owner': req.user._id
      }, {
        'permissions.sharedWith.user': req.user._id
      }, {
        'permissions.isPublic': true
      }]
    };
    const dashboards = await Dashboard.find(filter).populate('permissions.owner', 'name email').sort({
      isDefault: -1,
      createdAt: -1
    });
    res.json({
      success: true,
      count: dashboards.length,
      data: dashboards
    });
  } catch (_error) {
    res.status(500).json({
      success: false,
      error: 'خطأ في جلب لوحات التحكم'
    });
  }
});

/**
 * REPORT ENDPOINTS
 */

// Get report templates
router.get('/report-templates', authenticate, async (req, res) => {
  try {
    const {
      category
    } = req.query;
    const filter = {
      $or: [{
        'permissions.canView': req.user.role
      }, {
        'permissions.isPublic': true
      }]
    };
    if (category) filter.category = category;
    const templates = await ReportTemplate.find(filter).populate('structure.kpis').sort({
      category: 1,
      name: 1
    });
    res.json({
      success: true,
      count: templates.length,
      data: templates
    });
  } catch (_error) {
    res.status(500).json({
      success: false,
      error: 'خطأ في جلب قوالب التقارير'
    });
  }
});

// Generate report
router.post('/reports/generate', authenticate, async (req, res) => {
  try {
    const {
      templateId,
      filters,
      format = 'pdf'
    } = req.body;
    if (!templateId) {
      return res.status(400).json({
        success: false,
        error: 'معرف القالب مطلوب'
      });
    }
    const report = await AnalyticsService.generateReport(templateId, filters, format, req.user._id);
    res.json({
      success: true,
      data: report,
      message: 'تم توليد التقرير بنجاح'
    });
  } catch (error) {
    res.status(500).json({
      success: false,
      error: error.message || 'خطأ في توليد التقرير'
    });
  }
});

// Get user reports
router.get('/reports', authenticate, async (req, res) => {
  try {
    const reports = await GeneratedReport.find({
      generatedBy: req.user._id
    }).populate('template', 'name nameAr category').sort({
      createdAt: -1
    }).limit(50);
    res.json({
      success: true,
      count: reports.length,
      data: reports
    });
  } catch (_error) {
    res.status(500).json({
      success: false,
      error: 'خطأ في جلب التقارير'
    });
  }
});

// Download report
router.get('/reports/:id/download', authenticate, async (req, res) => {
  try {
    const report = await GeneratedReport.findById(req.params.id);
    if (!report) {
      return res.status(404).json({
        success: false,
        error: 'التقرير غير موجود'
      });
    }
    if (report.generatedBy.toString() !== req.user._id.toString()) {
      return res.status(403).json({
        success: false,
        error: 'ليس لديك صلاحية لتحميل هذا التقرير'
      });
    }
    if (report.status !== 'completed') {
      return res.status(400).json({
        success: false,
        error: 'التقرير لم يكتمل بعد'
      });
    }
    report.downloads += 1;
    await report.save();
    res.download(report.file.path);
  } catch (_error) {
    res.status(500).json({
      success: false,
      error: 'خطأ في تحميل التقرير'
    });
  }
});

/**
 * PREDICTIVE ANALYTICS
 */

// Create prediction
router.post('/predictions', authenticate, authorize('admin', 'manager'), async (req, res) => {
  try {
    const {
      type,
      kpiId,
      period
    } = req.body;
    if (!type || !kpiId) {
      return res.status(400).json({
        success: false,
        error: 'النوع ومعرف المؤشر مطلوبان'
      });
    }
    const prediction = await AnalyticsService.generatePrediction(type, kpiId, period || 30);
    res.status(201).json({
      success: true,
      data: prediction,
      message: 'تم إنشاء التنبؤ بنجاح'
    });
  } catch (error) {
    res.status(500).json({
      success: false,
      error: error.message || 'خطأ في إنشاء التنبؤ'
    });
  }
});

// Get predictions
router.get('/predictions', authenticate, async (req, res) => {
  try {
    const predictions = await Prediction.find().populate('kpi', 'name nameAr code').sort({
      createdAt: -1
    }).limit(20);
    res.json({
      success: true,
      count: predictions.length,
      data: predictions
    });
  } catch (_error) {
    res.status(500).json({
      success: false,
      error: 'خطأ في جلب التنبؤات'
    });
  }
});

/**
 * SUMMARY
 */

// Analytics summary
router.get('/summary', authenticate, async (req, res) => {
  try {
    const summary = {
      kpis: {
        total: await KPI.countDocuments({
          isActive: true
        }),
        byCategory: await KPI.aggregate([{
          $match: {
            isActive: true
          }
        }, {
          $group: {
            _id: '$category',
            count: {
              $sum: 1
            }
          }
        }])
      },
      reports: {
        total: await GeneratedReport.countDocuments(),
        completed: await GeneratedReport.countDocuments({
          status: 'completed'
        })
      },
      dashboards: {
        total: await Dashboard.countDocuments({
          isActive: true
        })
      }
    };
    res.json({
      success: true,
      data: summary
    });
  } catch (_error) {
    res.status(500).json({
      success: false,
      error: 'خطأ في جلب ملخص التحليلات'
    });
  }
});
module.exports = router;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsInJvdXRlciIsIlJvdXRlciIsIkFuYWx5dGljc1NlcnZpY2UiLCJBcGlSZXNwb25zZSIsIkFwaUVycm9yIiwiZ2V0IiwicmVxIiwicmVzIiwibmV4dCIsInVzZXJJZCIsInBhcmFtcyIsInJlc3VsdCIsInRyYWNrVXNlckJlaGF2aW9yIiwic3RhdHVzIiwianNvbiIsIl9lcnJvciIsIm1lc3NhZ2UiLCJ0aW1lUmFuZ2UiLCJxdWVyeSIsImdldFBlcmZvcm1hbmNlTWV0cmljcyIsImdldEN1c3RvbURhc2hib2FyZCIsImVycm9yIiwibWV0cmljIiwicGVyaW9kIiwiYW5hbHl6ZVRyZW5kcyIsImdldFJlY29tbWVuZGF0aW9ucyIsInBvc3QiLCJtZXRyaWMxIiwibWV0cmljMiIsImJvZHkiLCJzdWNjZXNzIiwiY29tcGFyZU1ldHJpY3MiLCJyZXBvcnRUeXBlIiwiZ2VuZXJhdGVBbmFseXNpc1JlcG9ydCIsImV2ZW50IiwidHJhY2tDb252ZXJzaW9uIiwiZ2V0UmVhbFRpbWVBbmFseXRpY3MiLCJnZXRQcmVkaWN0aXZlQW5hbHl0aWNzIiwiZm9ybWF0IiwiaW5jbHVkZXMiLCJleHBvcnRBbmFseXRpY3NSZXBvcnQiLCJ0ZXN0SWQiLCJnZXRBQlRlc3RSZXN1bHRzIiwiY2FtcGFpZ24iLCJnZXRNYXJrZXRpbmdNZXRyaWNzIiwiYXV0aGVudGljYXRlIiwiYXV0aG9yaXplIiwiS1BJIiwiUmVwb3J0VGVtcGxhdGUiLCJHZW5lcmF0ZWRSZXBvcnQiLCJEYXNoYm9hcmQiLCJQcmVkaWN0aW9uIiwiY2F0ZWdvcnkiLCJpc0FjdGl2ZSIsImZpbHRlciIsInVuZGVmaW5lZCIsImtwaXMiLCJmaW5kIiwic29ydCIsImNvZGUiLCJjb3VudCIsImxlbmd0aCIsImRhdGEiLCJrcGkiLCJmaW5kQnlJZCIsImlkIiwiY3JlYXRlZEJ5IiwidXNlciIsIl9pZCIsInNhdmUiLCJjYWxjdWxhdGVLUEkiLCJkYXNoYm9hcmQiLCJnZXRFeGVjdXRpdmVEYXNoYm9hcmQiLCIkb3IiLCJkYXNoYm9hcmRzIiwicG9wdWxhdGUiLCJpc0RlZmF1bHQiLCJjcmVhdGVkQXQiLCJyb2xlIiwidGVtcGxhdGVzIiwibmFtZSIsInRlbXBsYXRlSWQiLCJmaWx0ZXJzIiwicmVwb3J0IiwiZ2VuZXJhdGVSZXBvcnQiLCJyZXBvcnRzIiwiZ2VuZXJhdGVkQnkiLCJsaW1pdCIsInRvU3RyaW5nIiwiZG93bmxvYWRzIiwiZG93bmxvYWQiLCJmaWxlIiwicGF0aCIsInR5cGUiLCJrcGlJZCIsInByZWRpY3Rpb24iLCJnZW5lcmF0ZVByZWRpY3Rpb24iLCJwcmVkaWN0aW9ucyIsInN1bW1hcnkiLCJ0b3RhbCIsImNvdW50RG9jdW1lbnRzIiwiYnlDYXRlZ29yeSIsImFnZ3JlZ2F0ZSIsIiRtYXRjaCIsIiRncm91cCIsIiRzdW0iLCJjb21wbGV0ZWQiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsiYW5hbHl0aWNzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIEFkdmFuY2VkIEFuYWx5dGljcyBSb3V0ZXNcclxuLy8g2YbZgtin2Lcg2KfZhNiq2K3ZhNmK2YTYp9iqINin2YTZhdiq2YLYr9mF2KlcclxuXHJcbmNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7XHJcbmNvbnN0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XHJcbmNvbnN0IEFuYWx5dGljc1NlcnZpY2UgPSByZXF1aXJlKCcuLi9zZXJ2aWNlcy9hbmFseXRpY3NTZXJ2aWNlJyk7XHJcbmNvbnN0IHsgQXBpUmVzcG9uc2UsIEFwaUVycm9yIH0gPSByZXF1aXJlKCcuLi91dGlscy9hcGlSZXNwb25zZScpO1xyXG5cclxuLy8g2KrYqtio2Lkg2LPZhNmI2YMg2KfZhNmF2LPYqtiu2K/ZhVxyXG5yb3V0ZXIuZ2V0KCcvdXNlci1iZWhhdmlvci86dXNlcklkJywgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHsgdXNlcklkIH0gPSByZXEucGFyYW1zO1xyXG5cclxuICAgIGNvbnN0IHJlc3VsdCA9IEFuYWx5dGljc1NlcnZpY2UudHJhY2tVc2VyQmVoYXZpb3IodXNlcklkKTtcclxuXHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24obmV3IEFwaVJlc3BvbnNlKDIwMCwgcmVzdWx0LCAnVXNlciBiZWhhdmlvciB0cmFja2VkJykpO1xyXG4gIH0gY2F0Y2ggKF9lcnJvcikge1xyXG4gICAgcmV0dXJuIG5leHQobmV3IEFwaUVycm9yKDUwMCwgJ0ZhaWxlZCB0byB0cmFjayB1c2VyIGJlaGF2aW9yJywgW19lcnJvci5tZXNzYWdlXSkpO1xyXG4gIH1cclxufSk7XHJcblxyXG4vLyDYp9mE2K3YtdmI2YQg2LnZhNmJINmF2YLYp9mK2YrYsyDYp9mE2KPYr9in2KFcclxucm91dGVyLmdldCgnL3BlcmZvcm1hbmNlLW1ldHJpY3MnLCAocmVxLCByZXMsIG5leHQpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyB0aW1lUmFuZ2UgfSA9IHJlcS5xdWVyeTtcclxuXHJcbiAgICBjb25zdCByZXN1bHQgPSBBbmFseXRpY3NTZXJ2aWNlLmdldFBlcmZvcm1hbmNlTWV0cmljcyh0aW1lUmFuZ2UgfHwgJzI0aCcpO1xyXG5cclxuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbihuZXcgQXBpUmVzcG9uc2UoMjAwLCByZXN1bHQsICdQZXJmb3JtYW5jZSBtZXRyaWNzIGZldGNoZWQnKSk7XHJcbiAgfSBjYXRjaCAoX2Vycm9yKSB7XHJcbiAgICByZXR1cm4gbmV4dChuZXcgQXBpRXJyb3IoNTAwLCAnRmFpbGVkIHRvIGZldGNoIHBlcmZvcm1hbmNlIG1ldHJpY3MnLCBbX2Vycm9yLm1lc3NhZ2VdKSk7XHJcbiAgfVxyXG59KTtcclxuXHJcbi8vINi52LHYtiDZhNmI2K3YqSDYqtit2YPZhSDZhdiu2LXYtdipXHJcbnJvdXRlci5nZXQoJy9kYXNoYm9hcmQvOnVzZXJJZCcsIChyZXEsIHJlcywgbmV4dCkgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IHVzZXJJZCB9ID0gcmVxLnBhcmFtcztcclxuXHJcbiAgICBjb25zdCByZXN1bHQgPSBBbmFseXRpY3NTZXJ2aWNlLmdldEN1c3RvbURhc2hib2FyZCh1c2VySWQpO1xyXG5cclxuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbihuZXcgQXBpUmVzcG9uc2UoMjAwLCByZXN1bHQsICdEYXNoYm9hcmQgZmV0Y2hlZCcpKTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgcmV0dXJuIG5leHQobmV3IEFwaUVycm9yKDUwMCwgJ0ZhaWxlZCB0byBmZXRjaCBkYXNoYm9hcmQnLCBbZXJyb3IubWVzc2FnZV0pKTtcclxuICB9XHJcbn0pO1xyXG5cclxuLy8g2KrYrdmE2YrZhCDYp9mE2KfYqtis2KfZh9in2Kpcclxucm91dGVyLmdldCgnL3RyZW5kcy86bWV0cmljJywgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHsgbWV0cmljIH0gPSByZXEucGFyYW1zO1xyXG4gICAgY29uc3QgeyBwZXJpb2QgfSA9IHJlcS5xdWVyeTtcclxuXHJcbiAgICBjb25zdCByZXN1bHQgPSBBbmFseXRpY3NTZXJ2aWNlLmFuYWx5emVUcmVuZHMobWV0cmljLCBwZXJpb2QgfHwgJzMwZCcpO1xyXG5cclxuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbihuZXcgQXBpUmVzcG9uc2UoMjAwLCByZXN1bHQsICdUcmVuZHMgYW5hbHl6ZWQnKSk7XHJcbiAgfSBjYXRjaCAoX2Vycm9yKSB7XHJcbiAgICByZXR1cm4gbmV4dChuZXcgQXBpRXJyb3IoNTAwLCAnRmFpbGVkIHRvIGFuYWx5emUgdHJlbmRzJywgW19lcnJvci5tZXNzYWdlXSkpO1xyXG4gIH1cclxufSk7XHJcblxyXG4vLyDYp9mE2K3YtdmI2YQg2LnZhNmJINin2YTYqtmI2LXZitin2Kpcclxucm91dGVyLmdldCgnL3JlY29tbWVuZGF0aW9ucycsIChyZXEsIHJlcywgbmV4dCkgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCByZXN1bHQgPSBBbmFseXRpY3NTZXJ2aWNlLmdldFJlY29tbWVuZGF0aW9ucygpO1xyXG5cclxuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbihuZXcgQXBpUmVzcG9uc2UoMjAwLCByZXN1bHQsICdSZWNvbW1lbmRhdGlvbnMgZmV0Y2hlZCcpKTtcclxuICB9IGNhdGNoIChfZXJyb3IpIHtcclxuICAgIHJldHVybiBuZXh0KG5ldyBBcGlFcnJvcig1MDAsICdGYWlsZWQgdG8gZmV0Y2ggcmVjb21tZW5kYXRpb25zJywgW19lcnJvci5tZXNzYWdlXSkpO1xyXG4gIH1cclxufSk7XHJcblxyXG4vLyDZhdmC2KfYsdmG2Kkg2KfZhNmF2YLYp9mK2YrYs1xyXG5yb3V0ZXIucG9zdCgnL2NvbXBhcmUtbWV0cmljcycsIChyZXEsIHJlcykgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IG1ldHJpYzEsIG1ldHJpYzIsIHBlcmlvZCB9ID0gcmVxLmJvZHk7XHJcblxyXG4gICAgaWYgKCFtZXRyaWMxIHx8ICFtZXRyaWMyKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XHJcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgbWVzc2FnZTogJ01ldHJpY3MgcmVxdWlyZWQnLFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCByZXN1bHQgPSBBbmFseXRpY3NTZXJ2aWNlLmNvbXBhcmVNZXRyaWNzKG1ldHJpYzEsIG1ldHJpYzIsIHBlcmlvZCB8fCAnMzBkJyk7XHJcblxyXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24ocmVzdWx0KTtcclxuICB9IGNhdGNoIChfZXJyb3IpIHtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIG1lc3NhZ2U6ICdGYWlsZWQgdG8gY29tcGFyZSBtZXRyaWNzJyxcclxuICAgICAgZXJyb3I6IF9lcnJvci5tZXNzYWdlLFxyXG4gICAgfSk7XHJcbiAgfVxyXG59KTtcclxuXHJcbi8vINiq2YjZhNmK2K8g2KrZgtix2YrYsSDYqtit2YTZitmE2Ypcclxucm91dGVyLnBvc3QoJy9nZW5lcmF0ZS1yZXBvcnQnLCAocmVxLCByZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyByZXBvcnRUeXBlIH0gPSByZXEuYm9keTtcclxuXHJcbiAgICBjb25zdCByZXN1bHQgPSBBbmFseXRpY3NTZXJ2aWNlLmdlbmVyYXRlQW5hbHlzaXNSZXBvcnQocmVwb3J0VHlwZSB8fCAnZXhlY3V0aXZlJyk7XHJcblxyXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24ocmVzdWx0KTtcclxuICB9IGNhdGNoIChfZXJyb3IpIHtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIG1lc3NhZ2U6ICdGYWlsZWQgdG8gZ2VuZXJhdGUgcmVwb3J0JyxcclxuICAgICAgZXJyb3I6IF9lcnJvci5tZXNzYWdlLFxyXG4gICAgfSk7XHJcbiAgfVxyXG59KTtcclxuXHJcbi8vINiq2KrYqNi5INin2YTYqtit2YjZitmEXHJcbnJvdXRlci5wb3N0KCcvdHJhY2stY29udmVyc2lvbicsIChyZXEsIHJlcykgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IHVzZXJJZCwgZXZlbnQgfSA9IHJlcS5ib2R5O1xyXG5cclxuICAgIGlmICghdXNlcklkIHx8ICFldmVudCkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIG1lc3NhZ2U6ICdVc2VyIElEIGFuZCBldmVudCByZXF1aXJlZCcsXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHJlc3VsdCA9IEFuYWx5dGljc1NlcnZpY2UudHJhY2tDb252ZXJzaW9uKHVzZXJJZCwgZXZlbnQpO1xyXG5cclxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHJlc3VsdCk7XHJcbiAgfSBjYXRjaCAoX2Vycm9yKSB7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XHJcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICBtZXNzYWdlOiAnRmFpbGVkIHRvIHRyYWNrIGNvbnZlcnNpb24nLFxyXG4gICAgICBlcnJvcjogX2Vycm9yLm1lc3NhZ2UsXHJcbiAgICB9KTtcclxuICB9XHJcbn0pO1xyXG5cclxuLy8g2KfZhNiq2K3ZhNmK2YTYp9iqINmB2Yog2KfZhNmI2YLYqiDYp9mE2YHYudmE2Ypcclxucm91dGVyLmdldCgnL3JlYWwtdGltZScsIChyZXEsIHJlcykgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCByZXN1bHQgPSBBbmFseXRpY3NTZXJ2aWNlLmdldFJlYWxUaW1lQW5hbHl0aWNzKCk7XHJcblxyXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24ocmVzdWx0KTtcclxuICB9IGNhdGNoIChfZXJyb3IpIHtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIG1lc3NhZ2U6ICdGYWlsZWQgdG8gZmV0Y2ggcmVhbC10aW1lIGFuYWx5dGljcycsXHJcbiAgICAgIGVycm9yOiBfZXJyb3IubWVzc2FnZSxcclxuICAgIH0pO1xyXG4gIH1cclxufSk7XHJcblxyXG4vLyDYp9mE2KrZhtio2KTYp9iqINin2YTYqtit2YTZitmE2YrYqVxyXG5yb3V0ZXIuZ2V0KCcvcHJlZGljdGlvbnMnLCAocmVxLCByZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgcmVzdWx0ID0gQW5hbHl0aWNzU2VydmljZS5nZXRQcmVkaWN0aXZlQW5hbHl0aWNzKCk7XHJcblxyXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24ocmVzdWx0KTtcclxuICB9IGNhdGNoIChfZXJyb3IpIHtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIG1lc3NhZ2U6ICdGYWlsZWQgdG8gZmV0Y2ggcHJlZGljdGlvbnMnLFxyXG4gICAgICBlcnJvcjogX2Vycm9yLm1lc3NhZ2UsXHJcbiAgICB9KTtcclxuICB9XHJcbn0pO1xyXG5cclxuLy8g2KrYtdiv2YrYsSDYp9mE2KrZgtix2YrYsVxyXG5yb3V0ZXIuZ2V0KCcvZXhwb3J0Lzpmb3JtYXQnLCAocmVxLCByZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyBmb3JtYXQgfSA9IHJlcS5wYXJhbXM7XHJcblxyXG4gICAgaWYgKCFbJ3BkZicsICd4bHN4JywgJ2NzdiddLmluY2x1ZGVzKGZvcm1hdCkpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBtZXNzYWdlOiAnSW52YWxpZCBmb3JtYXQuIFN1cHBvcnRlZDogcGRmLCB4bHN4LCBjc3YnLFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCByZXN1bHQgPSBBbmFseXRpY3NTZXJ2aWNlLmV4cG9ydEFuYWx5dGljc1JlcG9ydChmb3JtYXQpO1xyXG5cclxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHJlc3VsdCk7XHJcbiAgfSBjYXRjaCAoX2Vycm9yKSB7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XHJcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICBtZXNzYWdlOiAnRmFpbGVkIHRvIGV4cG9ydCByZXBvcnQnLFxyXG4gICAgICBlcnJvcjogX2Vycm9yLm1lc3NhZ2UsXHJcbiAgICB9KTtcclxuICB9XHJcbn0pO1xyXG5cclxuLy8g2KfYrtiq2KjYp9ixIEEvQlxyXG5yb3V0ZXIuZ2V0KCcvYWItdGVzdC86dGVzdElkJywgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHsgdGVzdElkIH0gPSByZXEucGFyYW1zO1xyXG5cclxuICAgIGNvbnN0IHJlc3VsdCA9IEFuYWx5dGljc1NlcnZpY2UuZ2V0QUJUZXN0UmVzdWx0cyh0ZXN0SWQpO1xyXG5cclxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHJlc3VsdCk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIG1lc3NhZ2U6ICdGYWlsZWQgdG8gZmV0Y2ggQS9CIHRlc3QgcmVzdWx0cycsXHJcbiAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlLFxyXG4gICAgfSk7XHJcbiAgfVxyXG59KTtcclxuXHJcbi8vINmF2YLYp9mK2YrYsyDYp9mE2KrYs9mI2YrZglxyXG5yb3V0ZXIuZ2V0KCcvbWFya2V0aW5nLzpjYW1wYWlnbicsIChyZXEsIHJlcykgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IGNhbXBhaWduIH0gPSByZXEucGFyYW1zO1xyXG5cclxuICAgIGNvbnN0IHJlc3VsdCA9IEFuYWx5dGljc1NlcnZpY2UuZ2V0TWFya2V0aW5nTWV0cmljcyhjYW1wYWlnbik7XHJcblxyXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24ocmVzdWx0KTtcclxuICB9IGNhdGNoIChfZXJyb3IpIHtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIG1lc3NhZ2U6ICdGYWlsZWQgdG8gZmV0Y2ggY29ob3J0IG1ldHJpY3MnLFxyXG4gICAgICBlcnJvcjogX2Vycm9yLm1lc3NhZ2UsXHJcbiAgICB9KTtcclxuICB9XHJcbn0pO1xyXG5cclxuLyoqXHJcbiAqID09PT09PT09PT09PT09PT09PT09PT1cclxuICogTkVXIEFEVkFOQ0VEIEFOQUxZVElDUyBFTkRQT0lOVFNcclxuICog2YXYs9in2LHYp9iqINin2YTYqtit2YTZitmE2KfYqiDYp9mE2YXYqtmC2K/ZhdipINin2YTYrNiv2YrYr9ipXHJcbiAqID09PT09PT09PT09PT09PT09PT09PT1cclxuICovXHJcblxyXG5jb25zdCB7IGF1dGhlbnRpY2F0ZSwgYXV0aG9yaXplIH0gPSByZXF1aXJlKCcuLi9taWRkbGV3YXJlL2F1dGgnKTtcclxuY29uc3Qge1xyXG4gIEtQSSxcclxuICBSZXBvcnRUZW1wbGF0ZSxcclxuICBHZW5lcmF0ZWRSZXBvcnQsXHJcbiAgRGFzaGJvYXJkLFxyXG4gIFByZWRpY3Rpb24sXHJcbn0gPSByZXF1aXJlKCcuLi9tb2RlbHMvYW5hbHl0aWNzJyk7XHJcblxyXG4vKipcclxuICogS1BJIEVORFBPSU5UU1xyXG4gKi9cclxuXHJcbi8vIEdldCBhbGwgS1BJc1xyXG5yb3V0ZXIuZ2V0KCcva3BpcycsIGF1dGhlbnRpY2F0ZSwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHsgY2F0ZWdvcnksIGlzQWN0aXZlIH0gPSByZXEucXVlcnk7XHJcbiAgICBjb25zdCBmaWx0ZXIgPSB7fTtcclxuICAgIGlmIChjYXRlZ29yeSkgZmlsdGVyLmNhdGVnb3J5ID0gY2F0ZWdvcnk7XHJcbiAgICBpZiAoaXNBY3RpdmUgIT09IHVuZGVmaW5lZCkgZmlsdGVyLmlzQWN0aXZlID0gaXNBY3RpdmUgPT09ICd0cnVlJztcclxuXHJcbiAgICBjb25zdCBrcGlzID0gYXdhaXQgS1BJLmZpbmQoZmlsdGVyKS5zb3J0KHsgY2F0ZWdvcnk6IDEsIGNvZGU6IDEgfSk7XHJcbiAgICByZXMuanNvbih7IHN1Y2Nlc3M6IHRydWUsIGNvdW50OiBrcGlzLmxlbmd0aCwgZGF0YToga3BpcyB9KTtcclxuICB9IGNhdGNoIChfZXJyb3IpIHtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAn2K7Yt9ijINmB2Yog2KzZhNioINin2YTZhdik2LTYsdin2KonIH0pO1xyXG4gIH1cclxufSk7XHJcblxyXG4vLyBHZXQgc2luZ2xlIEtQSVxyXG5yb3V0ZXIuZ2V0KCcva3Bpcy86aWQnLCBhdXRoZW50aWNhdGUsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBrcGkgPSBhd2FpdCBLUEkuZmluZEJ5SWQocmVxLnBhcmFtcy5pZCk7XHJcbiAgICBpZiAoIWtwaSkgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAn2KfZhNmF2KTYtNixINi62YrYsSDZhdmI2KzZiNivJyB9KTtcclxuICAgIHJlcy5qc29uKHsgc3VjY2VzczogdHJ1ZSwgZGF0YToga3BpIH0pO1xyXG4gIH0gY2F0Y2ggKF9lcnJvcikge1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICfYrti32KMg2YHZiiDYrNmE2Kgg2KfZhNmF2KTYtNixJyB9KTtcclxuICB9XHJcbn0pO1xyXG5cclxuLy8gQ3JlYXRlIEtQSVxyXG5yb3V0ZXIucG9zdCgnL2twaXMnLCBhdXRoZW50aWNhdGUsIGF1dGhvcml6ZSgnYWRtaW4nLCAnbWFuYWdlcicpLCBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3Qga3BpID0gbmV3IEtQSSh7IC4uLnJlcS5ib2R5LCBjcmVhdGVkQnk6IHJlcS51c2VyLl9pZCB9KTtcclxuICAgIGF3YWl0IGtwaS5zYXZlKCk7XHJcbiAgICByZXMuc3RhdHVzKDIwMSkuanNvbih7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IGtwaSwgbWVzc2FnZTogJ9iq2YUg2KXZhti02KfYoSDYp9mE2YXYpNi02LEg2KjZhtis2KfYrScgfSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGlmIChlcnJvci5jb2RlID09PSAxMTAwMCkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICfYsdmF2LIg2KfZhNmF2KTYtNixINmF2YjYrNmI2K8g2YXYs9io2YLYp9mLJyB9KTtcclxuICAgIH1cclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAn2K7Yt9ijINmB2Yog2KXZhti02KfYoSDYp9mE2YXYpNi02LEnIH0pO1xyXG4gIH1cclxufSk7XHJcblxyXG4vLyBDYWxjdWxhdGUgS1BJXHJcbnJvdXRlci5wb3N0KCcva3Bpcy86aWQvY2FsY3VsYXRlJywgYXV0aGVudGljYXRlLCBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3Qga3BpID0gYXdhaXQgQW5hbHl0aWNzU2VydmljZS5jYWxjdWxhdGVLUEkocmVxLnBhcmFtcy5pZCk7XHJcbiAgICByZXMuanNvbih7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IGtwaSwgbWVzc2FnZTogJ9iq2YUg2K3Ys9in2Kgg2KfZhNmF2KTYtNixINio2YbYrNin2K0nIH0pO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB8fCAn2K7Yt9ijINmB2Yog2K3Ys9in2Kgg2KfZhNmF2KTYtNixJyB9KTtcclxuICB9XHJcbn0pO1xyXG5cclxuLyoqXHJcbiAqIERBU0hCT0FSRCBFTkRQT0lOVFNcclxuICovXHJcblxyXG4vLyBFeGVjdXRpdmUgRGFzaGJvYXJkXHJcbnJvdXRlci5nZXQoXHJcbiAgJy9kYXNoYm9hcmQvZXhlY3V0aXZlJyxcclxuICBhdXRoZW50aWNhdGUsXHJcbiAgYXV0aG9yaXplKCdhZG1pbicsICdtYW5hZ2VyJyksXHJcbiAgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBkYXNoYm9hcmQgPSBhd2FpdCBBbmFseXRpY3NTZXJ2aWNlLmdldEV4ZWN1dGl2ZURhc2hib2FyZChyZXEucXVlcnkpO1xyXG4gICAgICByZXMuanNvbih7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IGRhc2hib2FyZCB9KTtcclxuICAgIH0gY2F0Y2ggKF9lcnJvcikge1xyXG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ9iu2LfYoyDZgdmKINis2YTYqCDZhNmI2K3YqSDYp9mE2KrYrdmD2YUnIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuKTtcclxuXHJcbi8vIEdldCBkYXNoYm9hcmRzXHJcbnJvdXRlci5nZXQoJy9kYXNoYm9hcmRzJywgYXV0aGVudGljYXRlLCBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgZmlsdGVyID0ge1xyXG4gICAgICAkb3I6IFtcclxuICAgICAgICB7ICdwZXJtaXNzaW9ucy5vd25lcic6IHJlcS51c2VyLl9pZCB9LFxyXG4gICAgICAgIHsgJ3Blcm1pc3Npb25zLnNoYXJlZFdpdGgudXNlcic6IHJlcS51c2VyLl9pZCB9LFxyXG4gICAgICAgIHsgJ3Blcm1pc3Npb25zLmlzUHVibGljJzogdHJ1ZSB9LFxyXG4gICAgICBdLFxyXG4gICAgfTtcclxuICAgIGNvbnN0IGRhc2hib2FyZHMgPSBhd2FpdCBEYXNoYm9hcmQuZmluZChmaWx0ZXIpXHJcbiAgICAgIC5wb3B1bGF0ZSgncGVybWlzc2lvbnMub3duZXInLCAnbmFtZSBlbWFpbCcpXHJcbiAgICAgIC5zb3J0KHsgaXNEZWZhdWx0OiAtMSwgY3JlYXRlZEF0OiAtMSB9KTtcclxuICAgIHJlcy5qc29uKHsgc3VjY2VzczogdHJ1ZSwgY291bnQ6IGRhc2hib2FyZHMubGVuZ3RoLCBkYXRhOiBkYXNoYm9hcmRzIH0pO1xyXG4gIH0gY2F0Y2ggKF9lcnJvcikge1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICfYrti32KMg2YHZiiDYrNmE2Kgg2YTZiNit2KfYqiDYp9mE2KrYrdmD2YUnIH0pO1xyXG4gIH1cclxufSk7XHJcblxyXG4vKipcclxuICogUkVQT1JUIEVORFBPSU5UU1xyXG4gKi9cclxuXHJcbi8vIEdldCByZXBvcnQgdGVtcGxhdGVzXHJcbnJvdXRlci5nZXQoJy9yZXBvcnQtdGVtcGxhdGVzJywgYXV0aGVudGljYXRlLCBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyBjYXRlZ29yeSB9ID0gcmVxLnF1ZXJ5O1xyXG4gICAgY29uc3QgZmlsdGVyID0ge1xyXG4gICAgICAkb3I6IFt7ICdwZXJtaXNzaW9ucy5jYW5WaWV3JzogcmVxLnVzZXIucm9sZSB9LCB7ICdwZXJtaXNzaW9ucy5pc1B1YmxpYyc6IHRydWUgfV0sXHJcbiAgICB9O1xyXG4gICAgaWYgKGNhdGVnb3J5KSBmaWx0ZXIuY2F0ZWdvcnkgPSBjYXRlZ29yeTtcclxuXHJcbiAgICBjb25zdCB0ZW1wbGF0ZXMgPSBhd2FpdCBSZXBvcnRUZW1wbGF0ZS5maW5kKGZpbHRlcilcclxuICAgICAgLnBvcHVsYXRlKCdzdHJ1Y3R1cmUua3BpcycpXHJcbiAgICAgIC5zb3J0KHsgY2F0ZWdvcnk6IDEsIG5hbWU6IDEgfSk7XHJcbiAgICByZXMuanNvbih7IHN1Y2Nlc3M6IHRydWUsIGNvdW50OiB0ZW1wbGF0ZXMubGVuZ3RoLCBkYXRhOiB0ZW1wbGF0ZXMgfSk7XHJcbiAgfSBjYXRjaCAoX2Vycm9yKSB7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ9iu2LfYoyDZgdmKINis2YTYqCDZgtmI2KfZhNioINin2YTYqtmC2KfYsdmK2LEnIH0pO1xyXG4gIH1cclxufSk7XHJcblxyXG4vLyBHZW5lcmF0ZSByZXBvcnRcclxucm91dGVyLnBvc3QoJy9yZXBvcnRzL2dlbmVyYXRlJywgYXV0aGVudGljYXRlLCBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyB0ZW1wbGF0ZUlkLCBmaWx0ZXJzLCBmb3JtYXQgPSAncGRmJyB9ID0gcmVxLmJvZHk7XHJcbiAgICBpZiAoIXRlbXBsYXRlSWQpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAn2YXYudix2YEg2KfZhNmC2KfZhNioINmF2LfZhNmI2KgnIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHJlcG9ydCA9IGF3YWl0IEFuYWx5dGljc1NlcnZpY2UuZ2VuZXJhdGVSZXBvcnQodGVtcGxhdGVJZCwgZmlsdGVycywgZm9ybWF0LCByZXEudXNlci5faWQpO1xyXG4gICAgcmVzLmpzb24oeyBzdWNjZXNzOiB0cnVlLCBkYXRhOiByZXBvcnQsIG1lc3NhZ2U6ICfYqtmFINiq2YjZhNmK2K8g2KfZhNiq2YLYsdmK2LEg2KjZhtis2KfYrScgfSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIHx8ICfYrti32KMg2YHZiiDYqtmI2YTZitivINin2YTYqtmC2LHZitixJyB9KTtcclxuICB9XHJcbn0pO1xyXG5cclxuLy8gR2V0IHVzZXIgcmVwb3J0c1xyXG5yb3V0ZXIuZ2V0KCcvcmVwb3J0cycsIGF1dGhlbnRpY2F0ZSwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHJlcG9ydHMgPSBhd2FpdCBHZW5lcmF0ZWRSZXBvcnQuZmluZCh7IGdlbmVyYXRlZEJ5OiByZXEudXNlci5faWQgfSlcclxuICAgICAgLnBvcHVsYXRlKCd0ZW1wbGF0ZScsICduYW1lIG5hbWVBciBjYXRlZ29yeScpXHJcbiAgICAgIC5zb3J0KHsgY3JlYXRlZEF0OiAtMSB9KVxyXG4gICAgICAubGltaXQoNTApO1xyXG4gICAgcmVzLmpzb24oeyBzdWNjZXNzOiB0cnVlLCBjb3VudDogcmVwb3J0cy5sZW5ndGgsIGRhdGE6IHJlcG9ydHMgfSk7XHJcbiAgfSBjYXRjaCAoX2Vycm9yKSB7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ9iu2LfYoyDZgdmKINis2YTYqCDYp9mE2KrZgtin2LHZitixJyB9KTtcclxuICB9XHJcbn0pO1xyXG5cclxuLy8gRG93bmxvYWQgcmVwb3J0XHJcbnJvdXRlci5nZXQoJy9yZXBvcnRzLzppZC9kb3dubG9hZCcsIGF1dGhlbnRpY2F0ZSwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHJlcG9ydCA9IGF3YWl0IEdlbmVyYXRlZFJlcG9ydC5maW5kQnlJZChyZXEucGFyYW1zLmlkKTtcclxuICAgIGlmICghcmVwb3J0KSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ9in2YTYqtmC2LHZitixINi62YrYsSDZhdmI2KzZiNivJyB9KTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAocmVwb3J0LmdlbmVyYXRlZEJ5LnRvU3RyaW5nKCkgIT09IHJlcS51c2VyLl9pZC50b1N0cmluZygpKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ9mE2YrYsyDZhNiv2YrZgyDYtdmE2KfYrdmK2Kkg2YTYqtit2YXZitmEINmH2LDYpyDYp9mE2KrZgtix2YrYsScgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHJlcG9ydC5zdGF0dXMgIT09ICdjb21wbGV0ZWQnKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ9in2YTYqtmC2LHZitixINmE2YUg2YrZg9iq2YXZhCDYqNi52K8nIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJlcG9ydC5kb3dubG9hZHMgKz0gMTtcclxuICAgIGF3YWl0IHJlcG9ydC5zYXZlKCk7XHJcblxyXG4gICAgcmVzLmRvd25sb2FkKHJlcG9ydC5maWxlLnBhdGgpO1xyXG4gIH0gY2F0Y2ggKF9lcnJvcikge1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICfYrti32KMg2YHZiiDYqtit2YXZitmEINin2YTYqtmC2LHZitixJyB9KTtcclxuICB9XHJcbn0pO1xyXG5cclxuLyoqXHJcbiAqIFBSRURJQ1RJVkUgQU5BTFlUSUNTXHJcbiAqL1xyXG5cclxuLy8gQ3JlYXRlIHByZWRpY3Rpb25cclxucm91dGVyLnBvc3QoJy9wcmVkaWN0aW9ucycsIGF1dGhlbnRpY2F0ZSwgYXV0aG9yaXplKCdhZG1pbicsICdtYW5hZ2VyJyksIGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IHR5cGUsIGtwaUlkLCBwZXJpb2QgfSA9IHJlcS5ib2R5O1xyXG4gICAgaWYgKCF0eXBlIHx8ICFrcGlJZCkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICfYp9mE2YbZiNi5INmI2YXYudix2YEg2KfZhNmF2KTYtNixINmF2LfZhNmI2KjYp9mGJyB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBwcmVkaWN0aW9uID0gYXdhaXQgQW5hbHl0aWNzU2VydmljZS5nZW5lcmF0ZVByZWRpY3Rpb24odHlwZSwga3BpSWQsIHBlcmlvZCB8fCAzMCk7XHJcbiAgICByZXMuc3RhdHVzKDIwMSkuanNvbih7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IHByZWRpY3Rpb24sIG1lc3NhZ2U6ICfYqtmFINil2YbYtNin2KEg2KfZhNiq2YbYqNikINio2YbYrNin2K0nIH0pO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB8fCAn2K7Yt9ijINmB2Yog2KXZhti02KfYoSDYp9mE2KrZhtio2KQnIH0pO1xyXG4gIH1cclxufSk7XHJcblxyXG4vLyBHZXQgcHJlZGljdGlvbnNcclxucm91dGVyLmdldCgnL3ByZWRpY3Rpb25zJywgYXV0aGVudGljYXRlLCBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgcHJlZGljdGlvbnMgPSBhd2FpdCBQcmVkaWN0aW9uLmZpbmQoKVxyXG4gICAgICAucG9wdWxhdGUoJ2twaScsICduYW1lIG5hbWVBciBjb2RlJylcclxuICAgICAgLnNvcnQoeyBjcmVhdGVkQXQ6IC0xIH0pXHJcbiAgICAgIC5saW1pdCgyMCk7XHJcbiAgICByZXMuanNvbih7IHN1Y2Nlc3M6IHRydWUsIGNvdW50OiBwcmVkaWN0aW9ucy5sZW5ndGgsIGRhdGE6IHByZWRpY3Rpb25zIH0pO1xyXG4gIH0gY2F0Y2ggKF9lcnJvcikge1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICfYrti32KMg2YHZiiDYrNmE2Kgg2KfZhNiq2YbYqNik2KfYqicgfSk7XHJcbiAgfVxyXG59KTtcclxuXHJcbi8qKlxyXG4gKiBTVU1NQVJZXHJcbiAqL1xyXG5cclxuLy8gQW5hbHl0aWNzIHN1bW1hcnlcclxucm91dGVyLmdldCgnL3N1bW1hcnknLCBhdXRoZW50aWNhdGUsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBzdW1tYXJ5ID0ge1xyXG4gICAgICBrcGlzOiB7XHJcbiAgICAgICAgdG90YWw6IGF3YWl0IEtQSS5jb3VudERvY3VtZW50cyh7IGlzQWN0aXZlOiB0cnVlIH0pLFxyXG4gICAgICAgIGJ5Q2F0ZWdvcnk6IGF3YWl0IEtQSS5hZ2dyZWdhdGUoW1xyXG4gICAgICAgICAgeyAkbWF0Y2g6IHsgaXNBY3RpdmU6IHRydWUgfSB9LFxyXG4gICAgICAgICAgeyAkZ3JvdXA6IHsgX2lkOiAnJGNhdGVnb3J5JywgY291bnQ6IHsgJHN1bTogMSB9IH0gfSxcclxuICAgICAgICBdKSxcclxuICAgICAgfSxcclxuICAgICAgcmVwb3J0czoge1xyXG4gICAgICAgIHRvdGFsOiBhd2FpdCBHZW5lcmF0ZWRSZXBvcnQuY291bnREb2N1bWVudHMoKSxcclxuICAgICAgICBjb21wbGV0ZWQ6IGF3YWl0IEdlbmVyYXRlZFJlcG9ydC5jb3VudERvY3VtZW50cyh7IHN0YXR1czogJ2NvbXBsZXRlZCcgfSksXHJcbiAgICAgIH0sXHJcbiAgICAgIGRhc2hib2FyZHM6IHtcclxuICAgICAgICB0b3RhbDogYXdhaXQgRGFzaGJvYXJkLmNvdW50RG9jdW1lbnRzKHsgaXNBY3RpdmU6IHRydWUgfSksXHJcbiAgICAgIH0sXHJcbiAgICB9O1xyXG4gICAgcmVzLmpzb24oeyBzdWNjZXNzOiB0cnVlLCBkYXRhOiBzdW1tYXJ5IH0pO1xyXG4gIH0gY2F0Y2ggKF9lcnJvcikge1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICfYrti32KMg2YHZiiDYrNmE2Kgg2YXZhNiu2LUg2KfZhNiq2K3ZhNmK2YTYp9iqJyB9KTtcclxuICB9XHJcbn0pO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSByb3V0ZXI7XHJcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTs7QUFFQSxNQUFNQSxPQUFPLEdBQUdDLE9BQU8sQ0FBQyxTQUFTLENBQUM7QUFDbEMsTUFBTUMsTUFBTSxHQUFHRixPQUFPLENBQUNHLE1BQU0sQ0FBQyxDQUFDO0FBQy9CLE1BQU1DLGdCQUFnQixHQUFHSCxPQUFPLENBQUMsOEJBQThCLENBQUM7QUFDaEUsTUFBTTtFQUFFSSxXQUFXO0VBQUVDO0FBQVMsQ0FBQyxHQUFHTCxPQUFPLENBQUMsc0JBQXNCLENBQUM7O0FBRWpFO0FBQ0FDLE1BQU0sQ0FBQ0ssR0FBRyxDQUFDLHdCQUF3QixFQUFFLENBQUNDLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxJQUFJLEtBQUs7RUFDdkQsSUFBSTtJQUNGLE1BQU07TUFBRUM7SUFBTyxDQUFDLEdBQUdILEdBQUcsQ0FBQ0ksTUFBTTtJQUU3QixNQUFNQyxNQUFNLEdBQUdULGdCQUFnQixDQUFDVSxpQkFBaUIsQ0FBQ0gsTUFBTSxDQUFDO0lBRXpELE9BQU9GLEdBQUcsQ0FBQ00sTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJ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