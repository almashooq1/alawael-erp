{"version":3,"names":["os","require","MonitoringService","getSystemHealth","uptime","process","memoryUsage","cpuUsage","totalMemory","totalmem","freeMemory","freemem","success","system","Math","round","platform","architecture","arch","cpuCount","cpus","length","usedMemory","memoryUsagePercent","pid","rss","heapTotal","heapUsed","external","user","status","timestamp","Date","toISOString","getPerformanceMetrics","metrics","responseTime","random","requestsPerSecond","errorRate","toFixed","cacheHitRate","databaseQueryTime","apiLatency","monitorEndpoints","endpoints","predictions","requestsToday","errors","reports","notifications","getAlerts","alerts","id","severity","message","service","now","totalAlerts","activeAlerts","monitorDatabase","database","connectionPool","active","idle","total","max","queryStats","totalQueries","queriesPerSecond","slowQueries","averageQueryTime","storage","used","usagePercent","getRealtimeData","realtime","activeSessions","floor","cpuUsagePercent","databaseConnections","module","exports"],"sources":["monitoringService.js"],"sourcesContent":["// Monitoring System Service\r\n// نظام المراقبة\r\n\r\nconst os = require('os');\r\n\r\nclass MonitoringService {\r\n  // System Health Check\r\n  static getSystemHealth() {\r\n    const uptime = process.uptime();\r\n    const memoryUsage = process.memoryUsage();\r\n    const cpuUsage = process.cpuUsage();\r\n    const totalMemory = os.totalmem();\r\n    const freeMemory = os.freemem();\r\n\r\n    return {\r\n      success: true,\r\n      system: {\r\n        uptime: Math.round(uptime),\r\n        platform: os.platform(),\r\n        architecture: os.arch(),\r\n        cpuCount: os.cpus().length,\r\n        totalMemory: Math.round(totalMemory / 1024 / 1024), // MB\r\n        freeMemory: Math.round(freeMemory / 1024 / 1024), // MB\r\n        usedMemory: Math.round((totalMemory - freeMemory) / 1024 / 1024), // MB\r\n        memoryUsagePercent: Math.round(((totalMemory - freeMemory) / totalMemory) * 100),\r\n      },\r\n      process: {\r\n        pid: process.pid,\r\n        memoryUsage: {\r\n          rss: Math.round(memoryUsage.rss / 1024 / 1024), // MB\r\n          heapTotal: Math.round(memoryUsage.heapTotal / 1024 / 1024), // MB\r\n          heapUsed: Math.round(memoryUsage.heapUsed / 1024 / 1024), // MB\r\n          external: Math.round(memoryUsage.external / 1024 / 1024), // MB\r\n        },\r\n        cpuUsage: {\r\n          user: cpuUsage.user / 1000, // Convert to ms\r\n          system: cpuUsage.system / 1000,\r\n        },\r\n      },\r\n      status: 'healthy',\r\n      timestamp: new Date().toISOString(),\r\n    };\r\n  }\r\n\r\n  // Get Performance Metrics\r\n  static getPerformanceMetrics() {\r\n    return {\r\n      success: true,\r\n      metrics: {\r\n        responseTime: Math.random() * 100 + 20, // Simulated\r\n        requestsPerSecond: Math.round(Math.random() * 100 + 50),\r\n        errorRate: (Math.random() * 5).toFixed(2) + '%',\r\n        cacheHitRate: (Math.random() * 20 + 75).toFixed(2) + '%',\r\n        databaseQueryTime: Math.round(Math.random() * 50 + 10) + 'ms',\r\n        apiLatency: Math.round(Math.random() * 100 + 20) + 'ms',\r\n      },\r\n      timestamp: new Date().toISOString(),\r\n    };\r\n  }\r\n\r\n  // Monitor API Endpoints\r\n  static monitorEndpoints() {\r\n    return {\r\n      success: true,\r\n      endpoints: {\r\n        predictions: {\r\n          status: 'operational',\r\n          responseTime: '35ms',\r\n          uptime: '99.9%',\r\n          requestsToday: 1250,\r\n          errors: 2,\r\n        },\r\n        reports: {\r\n          status: 'operational',\r\n          responseTime: '42ms',\r\n          uptime: '99.8%',\r\n          requestsToday: 890,\r\n          errors: 1,\r\n        },\r\n        notifications: {\r\n          status: 'operational',\r\n          responseTime: '25ms',\r\n          uptime: '100%',\r\n          requestsToday: 2100,\r\n          errors: 0,\r\n        },\r\n      },\r\n      timestamp: new Date().toISOString(),\r\n    };\r\n  }\r\n\r\n  // Get Alert Status\r\n  static getAlerts() {\r\n    return {\r\n      success: true,\r\n      alerts: [\r\n        {\r\n          id: 'alert_001',\r\n          severity: 'low',\r\n          message: 'Memory usage above 70%',\r\n          service: 'backend',\r\n          timestamp: new Date(Date.now() - 5 * 60000).toISOString(),\r\n          status: 'active',\r\n        },\r\n        {\r\n          id: 'alert_002',\r\n          severity: 'info',\r\n          message: 'Daily backup completed',\r\n          service: 'database',\r\n          timestamp: new Date(Date.now() - 30 * 60000).toISOString(),\r\n          status: 'resolved',\r\n        },\r\n        {\r\n          id: 'alert_003',\r\n          severity: 'high',\r\n          message: 'API response time increased',\r\n          service: 'api',\r\n          timestamp: new Date(Date.now() - 2 * 60000).toISOString(),\r\n          status: 'active',\r\n        },\r\n      ],\r\n      totalAlerts: 3,\r\n      activeAlerts: 2,\r\n      timestamp: new Date().toISOString(),\r\n    };\r\n  }\r\n\r\n  // Database Monitoring\r\n  static monitorDatabase() {\r\n    return {\r\n      success: true,\r\n      database: {\r\n        status: 'connected',\r\n        connectionPool: {\r\n          active: 12,\r\n          idle: 8,\r\n          total: 20,\r\n          max: 30,\r\n        },\r\n        queryStats: {\r\n          totalQueries: 45820,\r\n          queriesPerSecond: 125,\r\n          slowQueries: 18,\r\n          averageQueryTime: '23ms',\r\n        },\r\n        storage: {\r\n          used: '2.5GB',\r\n          total: '10GB',\r\n          usagePercent: 25,\r\n        },\r\n      },\r\n      timestamp: new Date().toISOString(),\r\n    };\r\n  }\r\n\r\n  // Real-time Monitoring Data (for WebSocket)\r\n  static getRealtimeData() {\r\n    return {\r\n      success: true,\r\n      realtime: {\r\n        activeSessions: Math.floor(Math.random() * 100 + 50),\r\n        requestsPerSecond: Math.floor(Math.random() * 100 + 100),\r\n        memoryUsagePercent: Math.random() * 30 + 40,\r\n        cpuUsagePercent: Math.random() * 40 + 20,\r\n        databaseConnections: Math.floor(Math.random() * 15 + 10),\r\n        cacheHitRate: Math.random() * 20 + 75,\r\n      },\r\n      timestamp: new Date().toISOString(),\r\n    };\r\n  }\r\n}\r\n\r\nmodule.exports = MonitoringService;\r\n"],"mappings":"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","ignoreList":[]}