{"version":3,"names":["SmartNotificationsService","require","Logger","SmartNotificationsController","createNotification","req","res","title","message","type","priority","channels","metadata","scheduledFor","body","userId","user","id","status","json","success","en","notification","createSmartNotification","Date","info","data","error","broadcastNotification","userIds","Array","isArray","length","notifications","count","getNotifications","limit","offset","sortBy","query","getUserNotifications","parseInt","stats","getNotificationStats","pagination","total","updatePreferences","preferences","updated","updateUserPreferences","recordInteraction","notificationId","params","action","includes","deleteNotification","deleted","clearAllNotifications","clearUserNotifications","deletedCount","getStats","getPerformanceReport","report","processQueue","processed","module","exports"],"sources":["smartNotifications.controller.js"],"sourcesContent":["/**\r\n * متحكم الإشعارات الذكية\r\n * Smart Notifications Controller\r\n */\r\n\r\nconst SmartNotificationsService = require('../services/smartNotifications.service');\r\nconst Logger = require('../utils/logger');\r\n\r\nclass SmartNotificationsController {\r\n  /**\r\n   * إنشاء إشعار ذكي\r\n   * POST /api/notifications/smart/create\r\n   */\r\n  static async createNotification(req, res) {\r\n    try {\r\n      const {\r\n        title,\r\n        message,\r\n        type = 'info',\r\n        priority = 'normal',\r\n        channels = ['in-app'],\r\n        metadata = {},\r\n        scheduledFor = null,\r\n      } = req.body;\r\n\r\n      const userId = req.user?.id;\r\n\r\n      if (!title || !message) {\r\n        return res.status(400).json({\r\n          success: false,\r\n          message: 'العنوان والرسالة مطلوبة',\r\n          en: 'Title and message are required',\r\n        });\r\n      }\r\n\r\n      const notification = SmartNotificationsService.createSmartNotification({\r\n        userId,\r\n        title,\r\n        message,\r\n        type,\r\n        priority,\r\n        channels,\r\n        metadata,\r\n        scheduledFor: scheduledFor ? new Date(scheduledFor) : null,\r\n      });\r\n\r\n      Logger.info(`Notification created: ${notification.id} for user ${userId}`);\r\n\r\n      res.status(201).json({\r\n        success: true,\r\n        message: 'تم إنشاء الإشعار بنجاح',\r\n        en: 'Notification created successfully',\r\n        data: notification,\r\n      });\r\n    } catch (error) {\r\n      Logger.error(`Create notification error: ${error.message}`);\r\n      res.status(500).json({\r\n        success: false,\r\n        message: 'فشل إنشاء الإشعار',\r\n        en: 'Failed to create notification',\r\n        error: error.message,\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * إرسال إشعار مجموعي\r\n   * POST /api/notifications/smart/broadcast\r\n   */\r\n  static async broadcastNotification(req, res) {\r\n    try {\r\n      const {\r\n        userIds,\r\n        title,\r\n        message,\r\n        type = 'info',\r\n        priority = 'normal',\r\n        channels = ['in-app', 'email'],\r\n        metadata = {},\r\n      } = req.body;\r\n\r\n      if (!userIds || !Array.isArray(userIds) || userIds.length === 0) {\r\n        return res.status(400).json({\r\n          success: false,\r\n          message: 'قائمة معرفات المستخدمين مطلوبة',\r\n          en: 'User IDs array is required',\r\n        });\r\n      }\r\n\r\n      const notifications =\r\n        SmartNotificationsService.broadcastNotification(userIds, {\r\n          title,\r\n          message,\r\n          type,\r\n          priority,\r\n          channels,\r\n          metadata,\r\n        });\r\n\r\n      Logger.info(\r\n        `Broadcast notification sent to ${userIds.length} users`\r\n      );\r\n\r\n      res.status(201).json({\r\n        success: true,\r\n        message: `تم إرسال الإشعار إلى ${userIds.length} مستخدم`,\r\n        en: `Notification sent to ${userIds.length} users`,\r\n        data: {\r\n          count: notifications.length,\r\n          notifications,\r\n        },\r\n      });\r\n    } catch (error) {\r\n      Logger.error(`Broadcast notification error: ${error.message}`);\r\n      res.status(500).json({\r\n        success: false,\r\n        message: 'فشل إرسال الإشعار المجموعي',\r\n        en: 'Failed to broadcast notification',\r\n        error: error.message,\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * جلب إشعارات المستخدم\r\n   * GET /api/notifications/smart/list\r\n   */\r\n  static async getNotifications(req, res) {\r\n    try {\r\n      const userId = req.user?.id;\r\n      const {\r\n        status = null,\r\n        limit = 50,\r\n        offset = 0,\r\n        sortBy = 'createdAt',\r\n      } = req.query;\r\n\r\n      const notifications = SmartNotificationsService.getUserNotifications(\r\n        userId,\r\n        {\r\n          status,\r\n          limit: parseInt(limit),\r\n          offset: parseInt(offset),\r\n          sortBy,\r\n        }\r\n      );\r\n\r\n      const stats = SmartNotificationsService.getNotificationStats(userId);\r\n\r\n      res.json({\r\n        success: true,\r\n        message: 'تم جلب الإشعارات',\r\n        en: 'Notifications retrieved',\r\n        data: {\r\n          notifications,\r\n          stats,\r\n          pagination: {\r\n            limit: parseInt(limit),\r\n            offset: parseInt(offset),\r\n            total: stats.total,\r\n          },\r\n        },\r\n      });\r\n    } catch (error) {\r\n      Logger.error(`Get notifications error: ${error.message}`);\r\n      res.status(500).json({\r\n        success: false,\r\n        message: 'فشل جلب الإشعارات',\r\n        en: 'Failed to get notifications',\r\n        error: error.message,\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * تحديث تفضيلات الإشعارات\r\n   * PATCH /api/notifications/smart/preferences\r\n   */\r\n  static async updatePreferences(req, res) {\r\n    try {\r\n      const userId = req.user?.id;\r\n      const preferences = req.body;\r\n\r\n      const updated = SmartNotificationsService.updateUserPreferences(\r\n        userId,\r\n        preferences\r\n      );\r\n\r\n      Logger.info(`User ${userId} preferences updated`);\r\n\r\n      res.json({\r\n        success: true,\r\n        message: 'تم تحديث التفضيلات',\r\n        en: 'Preferences updated',\r\n        data: updated,\r\n      });\r\n    } catch (error) {\r\n      Logger.error(`Update preferences error: ${error.message}`);\r\n      res.status(500).json({\r\n        success: false,\r\n        message: 'فشل تحديث التفضيلات',\r\n        en: 'Failed to update preferences',\r\n        error: error.message,\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * تسجيل التفاعل مع الإشعار\r\n   * POST /api/notifications/smart/:notificationId/interact\r\n   */\r\n  static async recordInteraction(req, res) {\r\n    try {\r\n      const { notificationId } = req.params;\r\n      const { action } = req.body; // 'read', 'click', 'dismiss'\r\n\r\n      if (!['read', 'click', 'dismiss'].includes(action)) {\r\n        return res.status(400).json({\r\n          success: false,\r\n          message: 'إجراء غير صحيح',\r\n          en: 'Invalid action',\r\n        });\r\n      }\r\n\r\n      SmartNotificationsService.recordInteraction(notificationId, action);\r\n\r\n      res.json({\r\n        success: true,\r\n        message: 'تم تسجيل التفاعل',\r\n        en: 'Interaction recorded',\r\n      });\r\n    } catch (error) {\r\n      Logger.error(`Record interaction error: ${error.message}`);\r\n      res.status(500).json({\r\n        success: false,\r\n        message: 'فشل تسجيل التفاعل',\r\n        en: 'Failed to record interaction',\r\n        error: error.message,\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * حذف إشعار\r\n   * DELETE /api/notifications/smart/:notificationId\r\n   */\r\n  static async deleteNotification(req, res) {\r\n    try {\r\n      const { notificationId } = req.params;\r\n\r\n      const deleted =\r\n        SmartNotificationsService.deleteNotification(notificationId);\r\n\r\n      if (!deleted) {\r\n        return res.status(404).json({\r\n          success: false,\r\n          message: 'الإشعار غير موجود',\r\n          en: 'Notification not found',\r\n        });\r\n      }\r\n\r\n      Logger.info(`Notification ${notificationId} deleted`);\r\n\r\n      res.json({\r\n        success: true,\r\n        message: 'تم حذف الإشعار',\r\n        en: 'Notification deleted',\r\n      });\r\n    } catch (error) {\r\n      Logger.error(`Delete notification error: ${error.message}`);\r\n      res.status(500).json({\r\n        success: false,\r\n        message: 'فشل حذف الإشعار',\r\n        en: 'Failed to delete notification',\r\n        error: error.message,\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * حذف جميع إشعارات المستخدم\r\n   * DELETE /api/notifications/smart/all\r\n   */\r\n  static async clearAllNotifications(req, res) {\r\n    try {\r\n      const userId = req.user?.id;\r\n\r\n      const count = SmartNotificationsService.clearUserNotifications(userId);\r\n\r\n      Logger.info(`Cleared ${count} notifications for user ${userId}`);\r\n\r\n      res.json({\r\n        success: true,\r\n        message: `تم حذف ${count} إشعار`,\r\n        en: `Deleted ${count} notifications`,\r\n        data: { deletedCount: count },\r\n      });\r\n    } catch (error) {\r\n      Logger.error(`Clear notifications error: ${error.message}`);\r\n      res.status(500).json({\r\n        success: false,\r\n        message: 'فشل حذف الإشعارات',\r\n        en: 'Failed to clear notifications',\r\n        error: error.message,\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * جلب إحصائيات الإشعارات\r\n   * GET /api/notifications/smart/stats\r\n   */\r\n  static async getStats(req, res) {\r\n    try {\r\n      const userId = req.user?.id;\r\n\r\n      const stats = SmartNotificationsService.getNotificationStats(userId);\r\n\r\n      res.json({\r\n        success: true,\r\n        message: 'تم جلب الإحصائيات',\r\n        en: 'Statistics retrieved',\r\n        data: stats,\r\n      });\r\n    } catch (error) {\r\n      Logger.error(`Get stats error: ${error.message}`);\r\n      res.status(500).json({\r\n        success: false,\r\n        message: 'فشل جلب الإحصائيات',\r\n        en: 'Failed to get statistics',\r\n        error: error.message,\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * جلب تقرير الأداء\r\n   * GET /api/notifications/smart/performance\r\n   */\r\n  static async getPerformanceReport(req, res) {\r\n    try {\r\n      const userId = req.user?.id;\r\n\r\n      const report = SmartNotificationsService.getPerformanceReport(userId);\r\n\r\n      res.json({\r\n        success: true,\r\n        message: 'تم جلب التقرير',\r\n        en: 'Report retrieved',\r\n        data: report,\r\n      });\r\n    } catch (error) {\r\n      Logger.error(`Get performance report error: ${error.message}`);\r\n      res.status(500).json({\r\n        success: false,\r\n        message: 'فشل جلب التقرير',\r\n        en: 'Failed to get report',\r\n        error: error.message,\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * معالجة طابور الإشعارات\r\n   * POST /api/notifications/smart/process-queue\r\n   */\r\n  static async processQueue(req, res) {\r\n    try {\r\n      const processed = await SmartNotificationsService.processQueue();\r\n\r\n      Logger.info(\r\n        `Notification queue processed: ${processed.length} notifications sent`\r\n      );\r\n\r\n      res.json({\r\n        success: true,\r\n        message: `تم معالجة ${processed.length} إشعار`,\r\n        en: `Processed ${processed.length} notifications`,\r\n        data: {\r\n          count: processed.length,\r\n          notifications: processed,\r\n        },\r\n      });\r\n    } catch (error) {\r\n      Logger.error(`Process queue error: ${error.message}`);\r\n      res.status(500).json({\r\n        success: false,\r\n        message: 'فشل معالجة الطابور',\r\n        en: 'Failed to process queue',\r\n        error: error.message,\r\n      });\r\n    }\r\n  }\r\n}\r\n\r\nmodule.exports = SmartNotificationsController;\r\n"],"mappings":"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","ignoreList":[]}