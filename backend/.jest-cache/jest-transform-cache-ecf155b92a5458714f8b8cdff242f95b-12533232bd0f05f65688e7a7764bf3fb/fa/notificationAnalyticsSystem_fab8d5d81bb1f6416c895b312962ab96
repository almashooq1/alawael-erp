b8f5cacbba38539f5c9d4becdfebaab0
/**
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 * ğŸ“Š Notification Analytics & Monitoring System
 * Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ­Ù„ÙŠÙ„Ø§Øª ÙˆØ§Ù„Ù…Ø±Ø§Ù‚Ø¨Ø© Ù„Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 * 
 * Ù†Ø¸Ø§Ù… Ù…ØªÙ‚Ø¯Ù… Ù„Ù„Ù…Ø±Ø§Ù‚Ø¨Ø© ÙˆØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª:
 * - Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø´Ø§Ù…Ù„Ø©
 * - ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø£Ø¯Ø§Ø¡
 * - Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„ØªÙØµÙŠÙ„ÙŠØ©
 * - Ø§Ù„Ø±Ø³ÙˆÙ… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠØ© ÙˆØ§Ù„Ù…Ø¤Ø´Ø±Ø§Øª
 */

const mongoose = require('mongoose');
const logger = require('../utils/logger');
const EventEmitter = require('events');

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// ğŸ“Š Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

const notificationMetricsSchema = new mongoose.Schema({
  metricsId: {
    type: String,
    unique: true,
    index: true
  },
  timestamp: {
    type: Date,
    default: Date.now,
    index: true
  },
  // ÙØªØ±Ø© Ø§Ù„ØªØ¬Ù…ÙŠØ¹
  period: {
    type: String,
    enum: ['realtime', 'hourly', 'daily', 'weekly', 'monthly'],
    default: 'hourly'
  },
  date: Date,
  // Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø¹Ø§Ù…Ø©
  totalNotifications: Number,
  sentNotifications: Number,
  failedNotifications: Number,
  pendingNotifications: Number,
  // Ø­Ø³Ø¨ Ø§Ù„Ù‚Ù†ÙˆØ§Øª
  channelStats: {
    email: {
      sent: Number,
      failed: Number,
      bounced: Number,
      avgDeliveryTime: Number
    },
    sms: {
      sent: Number,
      failed: Number,
      avgDeliveryTime: Number
    },
    whatsapp: {
      sent: Number,
      failed: Number,
      read: Number,
      avgDeliveryTime: Number
    },
    inApp: {
      sent: Number,
      read: Number,
      clicked: Number,
      avgReadTime: Number
    },
    push: {
      sent: Number,
      failed: Number,
      opened: Number,
      dismissed: Number
    },
    dashboard: {
      sent: Number,
      viewed: Number
    }
  },
  // Ø­Ø³Ø¨ Ø§Ù„ÙØ¦Ø§Øª
  categoryStats: mongoose.Schema.Types.Mixed,
  // Ø­Ø³Ø¨ Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ§Øª
  priorityStats: mongoose.Schema.Types.Mixed,
  // Ù…Ø¹Ø¯Ù„ Ø§Ù„Ù†Ø¬Ø§Ø­
  successRate: Number,
  deliveryRate: Number,
  readRate: Number,
  clickRate: Number,
  // Ø£Ø¯Ø§Ø¡ Ø§Ù„Ù†Ø¸Ø§Ù…
  performance: {
    avgProcessingTime: Number,
    avgQueueWaitTime: Number,
    peakTime: String,
    bottleneck: String
  },
  // Ø§Ù„Ø£Ø®Ø·Ø§Ø¡
  errors: {
    totalErrors: Number,
    byType: mongoose.Schema.Types.Mixed,
    mostCommon: [{
      errorType: String,
      count: Number,
      percentage: Number
    }]
  },
  // Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙˆÙ†
  userStats: {
    activeUsers: Number,
    optedOut: Number,
    suspended: Number,
    engagementRate: Number
  },
  // Ø§Ù„Ø§ØªØ¬Ø§Ù‡Ø§Øª
  trends: {
    increased: Boolean,
    changePercentage: Number,
    comparison: String // 'higher', 'lower', 'stable'
  }
});
const NotificationMetrics = mongoose.model('NotificationMetrics', notificationMetricsSchema);

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// ğŸ¯ Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ­Ù„ÙŠÙ„Ø§Øª ÙˆØ§Ù„Ù…Ø±Ø§Ù‚Ø¨Ø©
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

class NotificationAnalyticsSystem extends EventEmitter {
  constructor() {
    super();

    // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¨Ø« Ø§Ù„ÙÙˆØ±ÙŠ (In-Memory)
    this.liveMetrics = {
      totalNotificationsToday: 0,
      sentNotificationsToday: 0,
      failedNotificationsToday: 0,
      avgDeliveryTime: 0,
      currentQueueSize: 0,
      systemHealth: 'healthy'
    };

    // Ù…Ø¤Ø´Ø±Ø§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© (KPIs)
    this.kpis = {
      deliveryRate: 0,
      successRate: 0,
      readRate: 0,
      clickRate: 0,
      optOutRate: 0,
      engagementRate: 0
    };

    // Ø¨Ø¯Ø¡ Ø¬Ù…Ø¹ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
    this.startMetricsCollection();
  }

  /**
   * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   * ğŸ“Š Ø¬Ù…Ø¹ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
   * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   */

  /**
   * Ø¨Ø¯Ø¡ Ø¬Ù…Ø¹ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
   */
  startMetricsCollection() {
    // ØªØ¬Ù…ÙŠØ¹ ÙƒÙ„ Ø³Ø§Ø¹Ø©
    setInterval(() => {
      this.collectHourlyMetrics();
    }, 3600000);

    // ØªØ¬Ù…ÙŠØ¹ ÙŠÙˆÙ…ÙŠ
    setInterval(() => {
      this.collectDailyMetrics();
    }, 86400000);
    logger.info('â–¶ï¸ Ø¨Ø¯Ø¡ Ù†Ø¸Ø§Ù… Ø¬Ù…Ø¹ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª');
  }

  /**
   * Ø¬Ù…Ø¹ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø¨Ø§Ù„Ø³Ø§Ø¹Ø©
   */
  async collectHourlyMetrics() {
    try {
      const hourAgo = new Date(Date.now() - 3600000);
      const now = new Date();

      // Ø¬Ù…Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
      const metrics = await this.calculateMetrics(hourAgo, now, 'hourly');

      // Ø­ÙØ¸ ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
      const savedMetrics = await this.saveMetrics(metrics);
      this.emit('hourlyMetricsCollected', savedMetrics);
      logger.info('ğŸ“Š ØªÙ… Ø¬Ù…Ø¹ Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø³Ø§Ø¹Ø©');
    } catch (error) {
      logger.error(`âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù…Ø¹ Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø³Ø§Ø¹Ø©: ${error.message}`);
    }
  }

  /**
   * Ø¬Ù…Ø¹ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„ÙŠÙˆÙ…ÙŠØ©
   */
  async collectDailyMetrics() {
    try {
      const yesterday = new Date(Date.now() - 86400000);
      const now = new Date();
      const metrics = await this.calculateMetrics(yesterday, now, 'daily');
      const savedMetrics = await this.saveMetrics(metrics);
      this.emit('dailyMetricsCollected', savedMetrics);
      logger.info('ğŸ“Š ØªÙ… Ø¬Ù…Ø¹ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„ÙŠÙˆÙ…ÙŠØ©');
    } catch (error) {
      logger.error(`âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù…Ø¹ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„ÙŠÙˆÙ…ÙŠØ©: ${error.message}`);
    }
  }

  /**
   * Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
   */
  async calculateMetrics(startDate, endDate, period) {
    try {
      // ÙƒÙˆØ¯ Ø¨Ø³ÙŠØ· Ù„Ù„ØªÙˆØ¶ÙŠØ­
      // ÙÙŠ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙØ¹Ù„ÙŠØŒ Ø³ÙŠØªÙ… Ø§Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù… Ø¹Ù† Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª

      const metrics = {
        metricsId: `METRICS_${Date.now()}`,
        timestamp: new Date(),
        period,
        date: startDate,
        // Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø¹Ø§Ù…Ø© (Ø£Ù…Ø«Ù„Ø©)
        totalNotifications: 1250,
        sentNotifications: 1200,
        failedNotifications: 30,
        pendingNotifications: 20,
        // Ø­Ø³Ø¨ Ø§Ù„Ù‚Ù†ÙˆØ§Øª
        channelStats: {
          email: {
            sent: 400,
            failed: 5,
            bounced: 2,
            avgDeliveryTime: 2500
          },
          sms: {
            sent: 150,
            failed: 3,
            avgDeliveryTime: 1200
          },
          whatsapp: {
            sent: 300,
            failed: 8,
            read: 250,
            avgDeliveryTime: 3000
          },
          inApp: {
            sent: 200,
            read: 180,
            clicked: 90,
            avgReadTime: 45000
          },
          push: {
            sent: 150,
            failed: 10,
            opened: 100,
            dismissed: 40
          },
          dashboard: {
            sent: 50,
            viewed: 45
          }
        },
        // Ù…Ø¹Ø¯Ù„Ø§Øª Ø§Ù„Ù†Ø¬Ø§Ø­
        successRate: 96,
        deliveryRate: 95,
        readRate: 85,
        clickRate: 32,
        // Ø§Ù„Ø£Ø®Ø·Ø§Ø¡
        errors: {
          totalErrors: 38,
          byType: {
            'invalid_number': 8,
            'delivery_timeout': 15,
            'network_error': 10,
            'authentication_failed': 5
          },
          mostCommon: [{
            errorType: 'delivery_timeout',
            count: 15,
            percentage: 39.5
          }, {
            errorType: 'network_error',
            count: 10,
            percentage: 26.3
          }, {
            errorType: 'invalid_number',
            count: 8,
            percentage: 21.1
          }]
        },
        // Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
        userStats: {
          activeUsers: 5420,
          optedOut: 120,
          suspended: 45,
          engagementRate: 78
        },
        // Ø§Ù„Ø£Ø¯Ø§Ø¡
        performance: {
          avgProcessingTime: 450,
          avgQueueWaitTime: 250,
          peakTime: '14:30',
          bottleneck: 'whatsapp_delivery'
        }
      };
      return metrics;
    } catch (error) {
      logger.error(`âŒ Ø®Ø·Ø£ ÙÙŠ Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª: ${error.message}`);
      throw error;
    }
  }

  /**
   * Ø­ÙØ¸ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
   */
  async saveMetrics(metrics) {
    try {
      const savedMetrics = await NotificationMetrics.create(metrics);
      return savedMetrics;
    } catch (error) {
      logger.error(`âŒ Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª: ${error.message}`);
      throw error;
    }
  }

  /**
   * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   * ğŸ“ˆ Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª ÙˆØ§Ù„ØªÙ‚Ø§Ø±ÙŠØ±
   * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   */

  /**
   * Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©
   */
  async getCurrentMetrics() {
    try {
      const latestMetrics = await NotificationMetrics.findOne().sort({
        timestamp: -1
      }).exec();
      return latestMetrics || {
        totalNotifications: 0,
        sentNotifications: 0,
        failedNotifications: 0
      };
    } catch (error) {
      logger.error(`âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©: ${error.message}`);
      throw error;
    }
  }

  /**
   * Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ù†Ø·Ø§Ù‚ Ø²Ù…Ù†ÙŠ
   */
  async getMetricsRange(startDate, endDate, period = 'daily') {
    try {
      const metrics = await NotificationMetrics.find({
        date: {
          $gte: startDate,
          $lte: endDate
        },
        period
      }).sort({
        timestamp: 1
      }).exec();
      return metrics;
    } catch (error) {
      logger.error(`âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù†Ø·Ø§Ù‚: ${error.message}`);
      throw error;
    }
  }

  /**
   * Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù…Ø¤Ø´Ø±Ø§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© (KPIs)
   */
  async getKPIs(period = 'daily') {
    try {
      const metrics = await this.getCurrentMetrics();
      if (!metrics) {
        return this.kpis;
      }
      return {
        deliveryRate: metrics.deliveryRate || 0,
        successRate: metrics.successRate || 0,
        readRate: metrics.readRate || 0,
        clickRate: metrics.clickRate || 0,
        engagementRate: metrics.userStats?.engagementRate || 0,
        optOutRate: this.calculateOptOutRate(metrics)
      };
    } catch (error) {
      logger.error(`âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ KPIs: ${error.message}`);
      throw error;
    }
  }

  /**
   * ØªÙ‚Ø±ÙŠØ± Ø´Ø§Ù…Ù„
   */
  async generateComprehensiveReport(startDate, endDate) {
    try {
      const metricsArray = await this.getMetricsRange(startDate, endDate);
      if (metricsArray.length === 0) {
        throw new Error('Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„ÙØªØ±Ø© Ø§Ù„Ù…Ø­Ø¯Ø¯Ø©');
      }
      const report = {
        period: {
          start: startDate,
          end: endDate,
          days: Math.ceil((endDate - startDate) / (1000 * 3600 * 24))
        },
        summary: {
          totalNotifications: this.sumMetrics(metricsArray, 'totalNotifications'),
          sentNotifications: this.sumMetrics(metricsArray, 'sentNotifications'),
          failedNotifications: this.sumMetrics(metricsArray, 'failedNotifications'),
          avgSuccessRate: this.avgMetrics(metricsArray, 'successRate'),
          avgDeliveryRate: this.avgMetrics(metricsArray, 'deliveryRate')
        },
        byChannel: this.aggregateChannelMetrics(metricsArray),
        byCategory: this.aggregateCategoryMetrics(metricsArray),
        byPriority: this.aggregatePriorityMetrics(metricsArray),
        trends: this.calculateTrends(metricsArray),
        topErrors: this.getTopErrors(metricsArray),
        userInsights: this.getUserInsights(metricsArray),
        recommendations: this.generateRecommendations(metricsArray)
      };
      return report;
    } catch (error) {
      logger.error(`âŒ Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø´Ø§Ù…Ù„: ${error.message}`);
      throw error;
    }
  }

  /**
   * ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ù‚Ù†Ø§Ø©
   */
  async getChannelReport(channel, startDate, endDate) {
    try {
      const metricsArray = await this.getMetricsRange(startDate, endDate);
      const channelMetrics = metricsArray.map(m => m.channelStats?.[channel] || {});
      return {
        channel,
        period: {
          start: startDate,
          end: endDate
        },
        totalSent: this.sumProperty(channelMetrics, 'sent'),
        totalFailed: this.sumProperty(channelMetrics, 'failed'),
        avgDeliveryTime: this.avgProperty(channelMetrics, 'avgDeliveryTime'),
        successRate: this.calculateSuccessRate(this.sumProperty(channelMetrics, 'sent'), this.sumProperty(channelMetrics, 'failed'))
      };
    } catch (error) {
      logger.error(`âŒ Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ù‚Ù†Ø§Ø©: ${error.message}`);
      throw error;
    }
  }

  /**
   * ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
   */
  async getUserEngagementReport(startDate, endDate) {
    try {
      const metricsArray = await this.getMetricsRange(startDate, endDate);
      const engagementMetrics = metricsArray.filter(m => m.userStats).map(m => m.userStats);
      return {
        period: {
          start: startDate,
          end: endDate
        },
        avgActiveUsers: Math.round(this.avgProperty(engagementMetrics, 'activeUsers')),
        avgOptedOut: Math.round(this.avgProperty(engagementMetrics, 'optedOut')),
        avgEngagementRate: Math.round(this.avgProperty(engagementMetrics, 'engagementRate')),
        trend: this.calculateTrend(engagementMetrics, 'engagementRate')
      };
    } catch (error) {
      logger.error(`âŒ Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ©: ${error.message}`);
      throw error;
    }
  }

  /**
   * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   * ğŸ› ï¸ Ø§Ù„Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© Ù„Ù„Ø­Ø³Ø§Ø¨Ø§Øª
   * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   */

  /**
   * Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ù‚ÙŠØ§Ø³
   */
  sumMetrics(metricsArray, field) {
    return metricsArray.reduce((sum, metric) => sum + (metric[field] || 0), 0);
  }

  /**
   * Ù…ØªÙˆØ³Ø· Ø§Ù„Ù…Ù‚ÙŠØ§Ø³
   */
  avgMetrics(metricsArray, field) {
    if (metricsArray.length === 0) return 0;
    return Math.round(metricsArray.reduce((sum, metric) => sum + (metric[field] || 0), 0) / metricsArray.length);
  }

  /**
   * Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ø®Ø§ØµÙŠØ©
   */
  sumProperty(items, property) {
    return items.reduce((sum, item) => sum + (item[property] || 0), 0);
  }

  /**
   * Ù…ØªÙˆØ³Ø· Ø§Ù„Ø®Ø§ØµÙŠØ©
   */
  avgProperty(items, property) {
    if (items.length === 0) return 0;
    return this.sumProperty(items, property) / items.length;
  }

  /**
   * Ø­Ø³Ø§Ø¨ Ù…Ø¹Ø¯Ù„ Ø§Ù„Ù†Ø¬Ø§Ø­
   */
  calculateSuccessRate(sent, failed) {
    if (sent === 0) return 0;
    return Math.round((sent - failed) / sent * 100);
  }

  /**
   * Ø­Ø³Ø§Ø¨ Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø¥Ù„ØºØ§Ø¡
   */
  calculateOptOutRate(metrics) {
    if (!metrics.userStats) return 0;
    const total = metrics.userStats.activeUsers + metrics.userStats.optedOut;
    if (total === 0) return 0;
    return Math.round(metrics.userStats.optedOut / total * 100);
  }

  /**
   * ØªØ¬Ù…ÙŠØ¹ Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù‚Ù†ÙˆØ§Øª
   */
  aggregateChannelMetrics(metricsArray) {
    const channels = {};
    const channelNames = ['email', 'sms', 'whatsapp', 'inApp', 'push', 'dashboard'];
    channelNames.forEach(channel => {
      const channelMetrics = metricsArray.map(m => m.channelStats?.[channel] || {}).filter(m => Object.keys(m).length > 0);
      if (channelMetrics.length > 0) {
        channels[channel] = {
          sent: this.sumProperty(channelMetrics, 'sent'),
          failed: this.sumProperty(channelMetrics, 'failed'),
          avgDeliveryTime: Math.round(this.avgProperty(channelMetrics, 'avgDeliveryTime')),
          successRate: this.calculateSuccessRate(this.sumProperty(channelMetrics, 'sent'), this.sumProperty(channelMetrics, 'failed'))
        };
      }
    });
    return channels;
  }

  /**
   * ØªØ¬Ù…ÙŠØ¹ Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„ÙØ¦Ø§Øª
   */
  aggregateCategoryMetrics(metricsArray) {
    // ØªØ¬Ù…ÙŠØ¹ Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø©
    return {};
  }

  /**
   * ØªØ¬Ù…ÙŠØ¹ Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ§Øª
   */
  aggregatePriorityMetrics(metricsArray) {
    // ØªØ¬Ù…ÙŠØ¹ Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø©
    return {};
  }

  /**
   * Ø­Ø³Ø§Ø¨ Ø§Ù„Ø§ØªØ¬Ø§Ù‡Ø§Øª
   */
  calculateTrends(metricsArray) {
    if (metricsArray.length < 2) {
      return {
        trend: 'stable',
        changePercentage: 0
      };
    }
    const first = metricsArray[0].totalNotifications || 0;
    const last = metricsArray[metricsArray.length - 1].totalNotifications || 0;
    const change = (last - first) / (first || 1) * 100;
    return {
      trend: change > 5 ? 'increasing' : change < -5 ? 'decreasing' : 'stable',
      changePercentage: Math.round(change)
    };
  }

  /**
   * Ø£ÙƒØ«Ø± Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ Ø§Ù„Ø´Ø§Ø¦Ø¹Ø©
   */
  getTopErrors(metricsArray) {
    const allErrors = [];
    metricsArray.forEach(metric => {
      if (metric.errors?.mostCommon) {
        allErrors.push(...metric.errors.mostCommon);
      }
    });
    return allErrors.slice(0, 10);
  }

  /**
   * Ø±Ø¤Ù‰ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
   */
  getUserInsights(metricsArray) {
    const userStats = metricsArray.filter(m => m.userStats).map(m => m.userStats);
    return {
      avgActiveUsers: Math.round(this.avgProperty(userStats, 'activeUsers')),
      avgOptedOut: Math.round(this.avgProperty(userStats, 'optedOut')),
      avgEngagementRate: Math.round(this.avgProperty(userStats, 'engagementRate'))
    };
  }

  /**
   * ØªÙˆÙ„ÙŠØ¯ Ø§Ù„ØªÙˆØµÙŠØ§Øª
   */
  generateRecommendations(metricsArray) {
    const recommendations = [];
    const currentMetrics = metricsArray[metricsArray.length - 1];
    if (currentMetrics.successRate < 90) {
      recommendations.push({
        priority: 'high',
        message: 'Ù…Ø¹Ø¯Ù„ Ø§Ù„Ù†Ø¬Ø§Ø­ Ø£Ù‚Ù„ Ù…Ù† 90% - ÙŠÙˆØ¬Ø¯ Ù…Ø´ÙƒÙ„Ø© ÙÙŠ Ø§Ù„ØªØ³Ù„ÙŠÙ…',
        action: 'ØªØ­Ù‚Ù‚ Ù…Ù† Ø­Ø§Ù„Ø© Ø§Ù„Ø®ÙˆØ§Ø¯Ù… ÙˆØ§Ù„Ø§ØªØµØ§Ù„Ø§Øª'
      });
    }
    if (currentMetrics.errors?.totalErrors > 50) {
      recommendations.push({
        priority: 'high',
        message: 'Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ Ù…Ø±ØªÙØ¹ Ø¬Ø¯Ø§Ù‹',
        action: 'Ø±Ø§Ø¬Ø¹ Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ ÙˆØ­Ø¯Ø¯ Ø§Ù„Ù…Ø´ÙƒÙ„Ø©'
      });
    }
    if (this.calculateOptOutRate(currentMetrics) > 5) {
      recommendations.push({
        priority: 'medium',
        message: 'Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø¥Ù„ØºØ§Ø¡ Ù…Ø±ØªÙØ¹',
        action: 'Ù‚Ù„Ù„ ØªÙƒØ±Ø§Ø± Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø£Ùˆ Ø­Ø³Ù‘Ù† Ø§Ù„Ù…Ø­ØªÙˆÙ‰'
      });
    }
    return recommendations;
  }

  /**
   * Ø­Ø³Ø§Ø¨ Ø§Ù„Ø§ØªØ¬Ø§Ù‡
   */
  calculateTrend(items, property) {
    if (items.length < 2) return 'stable';
    const first = items[0][property] || 0;
    const last = items[items.length - 1][property] || 0;
    if (last > first) return 'increasing';
    if (last < first) return 'decreasing';
    return 'stable';
  }

  /**
   * Ù…Ø³Ø­ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©
   */
  async cleanOldMetrics(daysToKeep = 90) {
    try {
      const cutoffDate = new Date(Date.now() - daysToKeep * 86400000);
      const result = await NotificationMetrics.deleteMany({
        timestamp: {
          $lt: cutoffDate
        }
      });
      logger.info(`ğŸ—‘ï¸ ØªÙ… Ø­Ø°Ù ${result.deletedCount} Ø³Ø¬Ù„ Ø¥Ø­ØµØ§Ø¦ÙŠ Ù‚Ø¯ÙŠÙ…`);
      return result;
    } catch (error) {
      logger.error(`âŒ Ø®Ø·Ø£ ÙÙŠ ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©: ${error.message}`);
      throw error;
    }
  }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// ğŸ“¦ Ø§Ù„ØªØµØ¯ÙŠØ±
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

module.exports = {
  NotificationAnalyticsSystem,
  NotificationMetrics,
  analyticsSystem: new NotificationAnalyticsSystem()
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJsb2dnZXIiLCJFdmVudEVtaXR0ZXIiLCJub3RpZmljYXRpb25NZXRyaWNzU2NoZW1hIiwiU2NoZW1hIiwibWV0cmljc0lkIiwidHlwZSIsIlN0cmluZyIsInVuaXF1ZSIsImluZGV4IiwidGltZXN0YW1wIiwiRGF0ZSIsImRlZmF1bHQiLCJub3ciLCJwZXJpb2QiLCJlbnVtIiwiZGF0ZSIsInRvdGFsTm90aWZpY2F0aW9ucyIsIk51bWJlciIsInNlbnROb3RpZmljYXRpb25zIiwiZmFpbGVkTm90aWZpY2F0aW9ucyIsInBlbmRpbmdOb3RpZmljYXRpb25zIiwiY2hhbm5lbFN0YXRzIiwiZW1haWwiLCJzZW50IiwiZmFpbGVkIiwiYm91bmNlZCIsImF2Z0RlbGl2ZXJ5VGltZSIsInNtcyIsIndoYXRzYXBwIiwicmVhZCIsImluQXBwIiwiY2xpY2tlZCIsImF2Z1JlYWRUaW1lIiwicHVzaCIsIm9wZW5lZCIsImRpc21pc3NlZCIsImRhc2hib2FyZCIsInZpZXdlZCIsImNhdGVnb3J5U3RhdHMiLCJUeXBlcyIsIk1peGVkIiwicHJpb3JpdHlTdGF0cyIsInN1Y2Nlc3NSYXRlIiwiZGVsaXZlcnlSYXRlIiwicmVhZFJhdGUiLCJjbGlja1JhdGUiLCJwZXJmb3JtYW5jZSIsImF2Z1Byb2Nlc3NpbmdUaW1lIiwiYXZnUXVldWVXYWl0VGltZSIsInBlYWtUaW1lIiwiYm90dGxlbmVjayIsImVycm9ycyIsInRvdGFsRXJyb3JzIiwiYnlUeXBlIiwibW9zdENvbW1vbiIsImVycm9yVHlwZSIsImNvdW50IiwicGVyY2VudGFnZSIsInVzZXJTdGF0cyIsImFjdGl2ZVVzZXJzIiwib3B0ZWRPdXQiLCJzdXNwZW5kZWQiLCJlbmdhZ2VtZW50UmF0ZSIsInRyZW5kcyIsImluY3JlYXNlZCIsIkJvb2xlYW4iLCJjaGFuZ2VQZXJjZW50YWdlIiwiY29tcGFyaXNvbiIsIk5vdGlmaWNhdGlvbk1ldHJpY3MiLCJtb2RlbCIsIk5vdGlmaWNhdGlvbkFuYWx5dGljc1N5c3RlbSIsImNvbnN0cnVjdG9yIiwibGl2ZU1ldHJpY3MiLCJ0b3RhbE5vdGlmaWNhdGlvbnNUb2RheSIsInNlbnROb3RpZmljYXRpb25zVG9kYXkiLCJmYWlsZWROb3RpZmljYXRpb25zVG9kYXkiLCJjdXJyZW50UXVldWVTaXplIiwic3lzdGVtSGVhbHRoIiwia3BpcyIsIm9wdE91dFJhdGUiLCJzdGFydE1ldHJpY3NDb2xsZWN0aW9uIiwic2V0SW50ZXJ2YWwiLCJjb2xsZWN0SG91cmx5TWV0cmljcyIsImNvbGxlY3REYWlseU1ldHJpY3MiLCJpbmZvIiwiaG91ckFnbyIsIm1ldHJpY3MiLCJjYWxjdWxhdGVNZXRyaWNzIiwic2F2ZWRNZXRyaWNzIiwic2F2ZU1ldHJpY3MiLCJlbWl0IiwiZXJyb3IiLCJtZXNzYWdlIiwieWVzdGVyZGF5Iiwic3RhcnREYXRlIiwiZW5kRGF0ZSIsImNyZWF0ZSIsImdldEN1cnJlbnRNZXRyaWNzIiwibGF0ZXN0TWV0cmljcyIsImZpbmRPbmUiLCJzb3J0IiwiZXhlYyIsImdldE1ldHJpY3NSYW5nZSIsImZpbmQiLCIkZ3RlIiwiJGx0ZSIsImdldEtQSXMiLCJjYWxjdWxhdGVPcHRPdXRSYXRlIiwiZ2VuZXJhdGVDb21wcmVoZW5zaXZlUmVwb3J0IiwibWV0cmljc0FycmF5IiwibGVuZ3RoIiwiRXJyb3IiLCJyZXBvcnQiLCJzdGFydCIsImVuZCIsImRheXMiLCJNYXRoIiwiY2VpbCIsInN1bW1hcnkiLCJzdW1NZXRyaWNzIiwiYXZnU3VjY2Vzc1JhdGUiLCJhdmdNZXRyaWNzIiwiYXZnRGVsaXZlcnlSYXRlIiwiYnlDaGFubmVsIiwiYWdncmVnYXRlQ2hhbm5lbE1ldHJpY3MiLCJieUNhdGVnb3J5IiwiYWdncmVnYXRlQ2F0ZWdvcnlNZXRyaWNzIiwiYnlQcmlvcml0eSIsImFnZ3JlZ2F0ZVByaW9yaXR5TWV0cmljcyIsImNhbGN1bGF0ZVRyZW5kcyIsInRvcEVycm9ycyIsImdldFRvcEVycm9ycyIsInVzZXJJbnNpZ2h0cyIsImdldFVzZXJJbnNpZ2h0cyIsInJlY29tbWVuZGF0aW9ucyIsImdlbmVyYXRlUmVjb21tZW5kYXRpb25zIiwiZ2V0Q2hhbm5lbFJlcG9ydCIsImNoYW5uZWwiLCJjaGFubmVsTWV0cmljcyIsIm1hcCIsIm0iLCJ0b3RhbFNlbnQiLCJzdW1Qcm9wZXJ0eSIsInRvdGFsRmFpbGVkIiwiYXZnUHJvcGVydHkiLCJjYWxjdWxhdGVTdWNjZXNzUmF0ZSIsImdldFVzZXJFbmdhZ2VtZW50UmVwb3J0IiwiZW5nYWdlbWVudE1ldHJpY3MiLCJmaWx0ZXIiLCJhdmdBY3RpdmVVc2VycyIsInJvdW5kIiwiYXZnT3B0ZWRPdXQiLCJhdmdFbmdhZ2VtZW50UmF0ZSIsInRyZW5kIiwiY2FsY3VsYXRlVHJlbmQiLCJmaWVsZCIsInJlZHVjZSIsInN1bSIsIm1ldHJpYyIsIml0ZW1zIiwicHJvcGVydHkiLCJpdGVtIiwidG90YWwiLCJjaGFubmVscyIsImNoYW5uZWxOYW1lcyIsImZvckVhY2giLCJPYmplY3QiLCJrZXlzIiwiZmlyc3QiLCJsYXN0IiwiY2hhbmdlIiwiYWxsRXJyb3JzIiwic2xpY2UiLCJjdXJyZW50TWV0cmljcyIsInByaW9yaXR5IiwiYWN0aW9uIiwiY2xlYW5PbGRNZXRyaWNzIiwiZGF5c1RvS2VlcCIsImN1dG9mZkRhdGUiLCJyZXN1bHQiLCJkZWxldGVNYW55IiwiJGx0IiwiZGVsZXRlZENvdW50IiwibW9kdWxlIiwiZXhwb3J0cyIsImFuYWx5dGljc1N5c3RlbSJdLCJzb3VyY2VzIjpbIm5vdGlmaWNhdGlvbkFuYWx5dGljc1N5c3RlbS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICog4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQXHJcbiAqIPCfk4ogTm90aWZpY2F0aW9uIEFuYWx5dGljcyAmIE1vbml0b3JpbmcgU3lzdGVtXHJcbiAqINmG2LjYp9mFINin2YTYqtit2YTZitmE2KfYqiDZiNin2YTZhdix2KfZgtio2Kkg2YTZhNil2LTYudin2LHYp9iqXHJcbiAqIOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkFxyXG4gKiBcclxuICog2YbYuNin2YUg2YXYqtmC2K/ZhSDZhNmE2YXYsdin2YLYqNipINmI2KrYrdmE2YrZhCDYp9mE2KXYtNi52KfYsdin2Ko6XHJcbiAqIC0g2KXYrdi12KfYptmK2KfYqiDYtNin2YXZhNipXHJcbiAqIC0g2KrYrdmE2YrZhCDYp9mE2KPYr9in2KFcclxuICogLSDYp9mE2KrZgtin2LHZitixINin2YTYqtmB2LXZitmE2YrYqVxyXG4gKiAtINin2YTYsdiz2YjZhSDYp9mE2KjZitin2YbZitipINmI2KfZhNmF2KTYtNix2KfYqlxyXG4gKi9cclxuXHJcbmNvbnN0IG1vbmdvb3NlID0gcmVxdWlyZSgnbW9uZ29vc2UnKTtcclxuY29uc3QgbG9nZ2VyID0gcmVxdWlyZSgnLi4vdXRpbHMvbG9nZ2VyJyk7XHJcbmNvbnN0IEV2ZW50RW1pdHRlciA9IHJlcXVpcmUoJ2V2ZW50cycpO1xyXG5cclxuLy8g4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQXHJcbi8vIPCfk4og2YbZhdmI2LDYrCDYp9mE2KXYrdi12KfYptmK2KfYqlxyXG4vLyDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZBcclxuXHJcbmNvbnN0IG5vdGlmaWNhdGlvbk1ldHJpY3NTY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hKHtcclxuICBtZXRyaWNzSWQ6IHsgdHlwZTogU3RyaW5nLCB1bmlxdWU6IHRydWUsIGluZGV4OiB0cnVlIH0sXHJcbiAgdGltZXN0YW1wOiB7IHR5cGU6IERhdGUsIGRlZmF1bHQ6IERhdGUubm93LCBpbmRleDogdHJ1ZSB9LFxyXG5cclxuICAvLyDZgdiq2LHYqSDYp9mE2KrYrNmF2YrYuVxyXG4gIHBlcmlvZDoge1xyXG4gICAgdHlwZTogU3RyaW5nLFxyXG4gICAgZW51bTogWydyZWFsdGltZScsICdob3VybHknLCAnZGFpbHknLCAnd2Vla2x5JywgJ21vbnRobHknXSxcclxuICAgIGRlZmF1bHQ6ICdob3VybHknLFxyXG4gIH0sXHJcbiAgZGF0ZTogRGF0ZSxcclxuXHJcbiAgLy8g2KXYrdi12KfYptmK2KfYqiDYudin2YXYqVxyXG4gIHRvdGFsTm90aWZpY2F0aW9uczogTnVtYmVyLFxyXG4gIHNlbnROb3RpZmljYXRpb25zOiBOdW1iZXIsXHJcbiAgZmFpbGVkTm90aWZpY2F0aW9uczogTnVtYmVyLFxyXG4gIHBlbmRpbmdOb3RpZmljYXRpb25zOiBOdW1iZXIsXHJcblxyXG4gIC8vINit2LPYqCDYp9mE2YLZhtmI2KfYqlxyXG4gIGNoYW5uZWxTdGF0czoge1xyXG4gICAgZW1haWw6IHtcclxuICAgICAgc2VudDogTnVtYmVyLFxyXG4gICAgICBmYWlsZWQ6IE51bWJlcixcclxuICAgICAgYm91bmNlZDogTnVtYmVyLFxyXG4gICAgICBhdmdEZWxpdmVyeVRpbWU6IE51bWJlcixcclxuICAgIH0sXHJcbiAgICBzbXM6IHtcclxuICAgICAgc2VudDogTnVtYmVyLFxyXG4gICAgICBmYWlsZWQ6IE51bWJlcixcclxuICAgICAgYXZnRGVsaXZlcnlUaW1lOiBOdW1iZXIsXHJcbiAgICB9LFxyXG4gICAgd2hhdHNhcHA6IHtcclxuICAgICAgc2VudDogTnVtYmVyLFxyXG4gICAgICBmYWlsZWQ6IE51bWJlcixcclxuICAgICAgcmVhZDogTnVtYmVyLFxyXG4gICAgICBhdmdEZWxpdmVyeVRpbWU6IE51bWJlcixcclxuICAgIH0sXHJcbiAgICBpbkFwcDoge1xyXG4gICAgICBzZW50OiBOdW1iZXIsXHJcbiAgICAgIHJlYWQ6IE51bWJlcixcclxuICAgICAgY2xpY2tlZDogTnVtYmVyLFxyXG4gICAgICBhdmdSZWFkVGltZTogTnVtYmVyLFxyXG4gICAgfSxcclxuICAgIHB1c2g6IHtcclxuICAgICAgc2VudDogTnVtYmVyLFxyXG4gICAgICBmYWlsZWQ6IE51bWJlcixcclxuICAgICAgb3BlbmVkOiBOdW1iZXIsXHJcbiAgICAgIGRpc21pc3NlZDogTnVtYmVyLFxyXG4gICAgfSxcclxuICAgIGRhc2hib2FyZDoge1xyXG4gICAgICBzZW50OiBOdW1iZXIsXHJcbiAgICAgIHZpZXdlZDogTnVtYmVyLFxyXG4gICAgfSxcclxuICB9LFxyXG5cclxuICAvLyDYrdiz2Kgg2KfZhNmB2KbYp9iqXHJcbiAgY2F0ZWdvcnlTdGF0czogbW9uZ29vc2UuU2NoZW1hLlR5cGVzLk1peGVkLFxyXG5cclxuICAvLyDYrdiz2Kgg2KfZhNij2YjZhNmI2YrYp9iqXHJcbiAgcHJpb3JpdHlTdGF0czogbW9uZ29vc2UuU2NoZW1hLlR5cGVzLk1peGVkLFxyXG5cclxuICAvLyDZhdi52K/ZhCDYp9mE2YbYrNin2K1cclxuICBzdWNjZXNzUmF0ZTogTnVtYmVyLFxyXG4gIGRlbGl2ZXJ5UmF0ZTogTnVtYmVyLFxyXG4gIHJlYWRSYXRlOiBOdW1iZXIsXHJcbiAgY2xpY2tSYXRlOiBOdW1iZXIsXHJcblxyXG4gIC8vINij2K/Yp9ihINin2YTZhti42KfZhVxyXG4gIHBlcmZvcm1hbmNlOiB7XHJcbiAgICBhdmdQcm9jZXNzaW5nVGltZTogTnVtYmVyLFxyXG4gICAgYXZnUXVldWVXYWl0VGltZTogTnVtYmVyLFxyXG4gICAgcGVha1RpbWU6IFN0cmluZyxcclxuICAgIGJvdHRsZW5lY2s6IFN0cmluZyxcclxuICB9LFxyXG5cclxuICAvLyDYp9mE2KPYrti32KfYoVxyXG4gIGVycm9yczoge1xyXG4gICAgdG90YWxFcnJvcnM6IE51bWJlcixcclxuICAgIGJ5VHlwZTogbW9uZ29vc2UuU2NoZW1hLlR5cGVzLk1peGVkLFxyXG4gICAgbW9zdENvbW1vbjogW1xyXG4gICAgICB7XHJcbiAgICAgICAgZXJyb3JUeXBlOiBTdHJpbmcsXHJcbiAgICAgICAgY291bnQ6IE51bWJlcixcclxuICAgICAgICBwZXJjZW50YWdlOiBOdW1iZXIsXHJcbiAgICAgIH0sXHJcbiAgICBdLFxyXG4gIH0sXHJcblxyXG4gIC8vINin2YTZhdiz2KrYrtiv2YXZiNmGXHJcbiAgdXNlclN0YXRzOiB7XHJcbiAgICBhY3RpdmVVc2VyczogTnVtYmVyLFxyXG4gICAgb3B0ZWRPdXQ6IE51bWJlcixcclxuICAgIHN1c3BlbmRlZDogTnVtYmVyLFxyXG4gICAgZW5nYWdlbWVudFJhdGU6IE51bWJlcixcclxuICB9LFxyXG5cclxuICAvLyDYp9mE2KfYqtis2KfZh9in2KpcclxuICB0cmVuZHM6IHtcclxuICAgIGluY3JlYXNlZDogQm9vbGVhbixcclxuICAgIGNoYW5nZVBlcmNlbnRhZ2U6IE51bWJlcixcclxuICAgIGNvbXBhcmlzb246IFN0cmluZywgLy8gJ2hpZ2hlcicsICdsb3dlcicsICdzdGFibGUnXHJcbiAgfSxcclxufSk7XHJcblxyXG5jb25zdCBOb3RpZmljYXRpb25NZXRyaWNzID0gbW9uZ29vc2UubW9kZWwoJ05vdGlmaWNhdGlvbk1ldHJpY3MnLCBub3RpZmljYXRpb25NZXRyaWNzU2NoZW1hKTtcclxuXHJcbi8vIOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkFxyXG4vLyDwn46vINmG2LjYp9mFINin2YTYqtit2YTZitmE2KfYqiDZiNin2YTZhdix2KfZgtio2KlcclxuLy8g4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQXHJcblxyXG5jbGFzcyBOb3RpZmljYXRpb25BbmFseXRpY3NTeXN0ZW0gZXh0ZW5kcyBFdmVudEVtaXR0ZXIge1xyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgc3VwZXIoKTtcclxuXHJcbiAgICAvLyDYqNmK2KfZhtin2Kog2KfZhNio2Ksg2KfZhNmB2YjYsdmKIChJbi1NZW1vcnkpXHJcbiAgICB0aGlzLmxpdmVNZXRyaWNzID0ge1xyXG4gICAgICB0b3RhbE5vdGlmaWNhdGlvbnNUb2RheTogMCxcclxuICAgICAgc2VudE5vdGlmaWNhdGlvbnNUb2RheTogMCxcclxuICAgICAgZmFpbGVkTm90aWZpY2F0aW9uc1RvZGF5OiAwLFxyXG4gICAgICBhdmdEZWxpdmVyeVRpbWU6IDAsXHJcbiAgICAgIGN1cnJlbnRRdWV1ZVNpemU6IDAsXHJcbiAgICAgIHN5c3RlbUhlYWx0aDogJ2hlYWx0aHknLFxyXG4gICAgfTtcclxuXHJcbiAgICAvLyDZhdik2LTYsdin2Kog2KfZhNij2K/Yp9ihINin2YTYsdim2YrYs9mK2KkgKEtQSXMpXHJcbiAgICB0aGlzLmtwaXMgPSB7XHJcbiAgICAgIGRlbGl2ZXJ5UmF0ZTogMCxcclxuICAgICAgc3VjY2Vzc1JhdGU6IDAsXHJcbiAgICAgIHJlYWRSYXRlOiAwLFxyXG4gICAgICBjbGlja1JhdGU6IDAsXHJcbiAgICAgIG9wdE91dFJhdGU6IDAsXHJcbiAgICAgIGVuZ2FnZW1lbnRSYXRlOiAwLFxyXG4gICAgfTtcclxuXHJcbiAgICAvLyDYqNiv2KEg2KzZhdi5INin2YTYpdit2LXYp9im2YrYp9iqXHJcbiAgICB0aGlzLnN0YXJ0TWV0cmljc0NvbGxlY3Rpb24oKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkFxyXG4gICAqIPCfk4og2KzZhdi5INin2YTYpdit2LXYp9im2YrYp9iqXHJcbiAgICog4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQXHJcbiAgICovXHJcblxyXG4gIC8qKlxyXG4gICAqINio2K/YoSDYrNmF2Lkg2KfZhNil2K3Ytdin2KbZitin2KpcclxuICAgKi9cclxuICBzdGFydE1ldHJpY3NDb2xsZWN0aW9uKCkge1xyXG4gICAgLy8g2KrYrNmF2YrYuSDZg9mEINiz2KfYudipXHJcbiAgICBzZXRJbnRlcnZhbCgoKSA9PiB7XHJcbiAgICAgIHRoaXMuY29sbGVjdEhvdXJseU1ldHJpY3MoKTtcclxuICAgIH0sIDM2MDAwMDApO1xyXG5cclxuICAgIC8vINiq2KzZhdmK2Lkg2YrZiNmF2YpcclxuICAgIHNldEludGVydmFsKCgpID0+IHtcclxuICAgICAgdGhpcy5jb2xsZWN0RGFpbHlNZXRyaWNzKCk7XHJcbiAgICB9LCA4NjQwMDAwMCk7XHJcblxyXG4gICAgbG9nZ2VyLmluZm8oJ+KWtu+4jyDYqNiv2KEg2YbYuNin2YUg2KzZhdi5INin2YTYpdit2LXYp9im2YrYp9iqJyk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDYrNmF2Lkg2KfZhNil2K3Ytdin2KbZitin2Kog2KjYp9mE2LPYp9i52KlcclxuICAgKi9cclxuICBhc3luYyBjb2xsZWN0SG91cmx5TWV0cmljcygpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IGhvdXJBZ28gPSBuZXcgRGF0ZShEYXRlLm5vdygpIC0gMzYwMDAwMCk7XHJcbiAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XHJcblxyXG4gICAgICAvLyDYrNmF2Lkg2KfZhNio2YrYp9mG2KfYqiDZhdmGINmC2KfYudiv2Kkg2KfZhNio2YrYp9mG2KfYqlxyXG4gICAgICBjb25zdCBtZXRyaWNzID0gYXdhaXQgdGhpcy5jYWxjdWxhdGVNZXRyaWNzKGhvdXJBZ28sIG5vdywgJ2hvdXJseScpO1xyXG5cclxuICAgICAgLy8g2K3Zgdi4INmB2Yog2YLYp9i52K/YqSDYp9mE2KjZitin2YbYp9iqXHJcbiAgICAgIGNvbnN0IHNhdmVkTWV0cmljcyA9IGF3YWl0IHRoaXMuc2F2ZU1ldHJpY3MobWV0cmljcyk7XHJcblxyXG4gICAgICB0aGlzLmVtaXQoJ2hvdXJseU1ldHJpY3NDb2xsZWN0ZWQnLCBzYXZlZE1ldHJpY3MpO1xyXG5cclxuICAgICAgbG9nZ2VyLmluZm8oJ/Cfk4og2KrZhSDYrNmF2Lkg2KXYrdi12KfYptmK2KfYqiDYp9mE2LPYp9i52KknKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGxvZ2dlci5lcnJvcihg4p2MINiu2LfYoyDZgdmKINis2YXYuSDYpdit2LXYp9im2YrYp9iqINin2YTYs9in2LnYqTogJHtlcnJvci5tZXNzYWdlfWApO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog2KzZhdi5INin2YTYpdit2LXYp9im2YrYp9iqINin2YTZitmI2YXZitipXHJcbiAgICovXHJcbiAgYXN5bmMgY29sbGVjdERhaWx5TWV0cmljcygpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHllc3RlcmRheSA9IG5ldyBEYXRlKERhdGUubm93KCkgLSA4NjQwMDAwMCk7XHJcbiAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XHJcblxyXG4gICAgICBjb25zdCBtZXRyaWNzID0gYXdhaXQgdGhpcy5jYWxjdWxhdGVNZXRyaWNzKHllc3RlcmRheSwgbm93LCAnZGFpbHknKTtcclxuXHJcbiAgICAgIGNvbnN0IHNhdmVkTWV0cmljcyA9IGF3YWl0IHRoaXMuc2F2ZU1ldHJpY3MobWV0cmljcyk7XHJcblxyXG4gICAgICB0aGlzLmVtaXQoJ2RhaWx5TWV0cmljc0NvbGxlY3RlZCcsIHNhdmVkTWV0cmljcyk7XHJcblxyXG4gICAgICBsb2dnZXIuaW5mbygn8J+TiiDYqtmFINis2YXYuSDYp9mE2KXYrdi12KfYptmK2KfYqiDYp9mE2YrZiNmF2YrYqScpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgbG9nZ2VyLmVycm9yKGDinYwg2K7Yt9ijINmB2Yog2KzZhdi5INin2YTYpdit2LXYp9im2YrYp9iqINin2YTZitmI2YXZitipOiAke2Vycm9yLm1lc3NhZ2V9YCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDYrdiz2KfYqCDYp9mE2KXYrdi12KfYptmK2KfYqlxyXG4gICAqL1xyXG4gIGFzeW5jIGNhbGN1bGF0ZU1ldHJpY3Moc3RhcnREYXRlLCBlbmREYXRlLCBwZXJpb2QpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIC8vINmD2YjYryDYqNiz2YrYtyDZhNmE2KrZiNi22YrYrVxyXG4gICAgICAvLyDZgdmKINin2YTYqti32KjZitmCINin2YTZgdi52YTZitiMINiz2YrYqtmFINin2YTYp9iz2KrYudmE2KfZhSDYudmGINmC2KfYudiv2Kkg2KfZhNio2YrYp9mG2KfYqlxyXG5cclxuICAgICAgY29uc3QgbWV0cmljcyA9IHtcclxuICAgICAgICBtZXRyaWNzSWQ6IGBNRVRSSUNTXyR7RGF0ZS5ub3coKX1gLFxyXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcclxuICAgICAgICBwZXJpb2QsXHJcbiAgICAgICAgZGF0ZTogc3RhcnREYXRlLFxyXG5cclxuICAgICAgICAvLyDYpdit2LXYp9im2YrYp9iqINi52KfZhdipICjYo9mF2KvZhNipKVxyXG4gICAgICAgIHRvdGFsTm90aWZpY2F0aW9uczogMTI1MCxcclxuICAgICAgICBzZW50Tm90aWZpY2F0aW9uczogMTIwMCxcclxuICAgICAgICBmYWlsZWROb3RpZmljYXRpb25zOiAzMCxcclxuICAgICAgICBwZW5kaW5nTm90aWZpY2F0aW9uczogMjAsXHJcblxyXG4gICAgICAgIC8vINit2LPYqCDYp9mE2YLZhtmI2KfYqlxyXG4gICAgICAgIGNoYW5uZWxTdGF0czoge1xyXG4gICAgICAgICAgZW1haWw6IHtcclxuICAgICAgICAgICAgc2VudDogNDAwLFxyXG4gICAgICAgICAgICBmYWlsZWQ6IDUsXHJcbiAgICAgICAgICAgIGJvdW5jZWQ6IDIsXHJcbiAgICAgICAgICAgIGF2Z0RlbGl2ZXJ5VGltZTogMjUwMCxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBzbXM6IHtcclxuICAgICAgICAgICAgc2VudDogMTUwLFxyXG4gICAgICAgICAgICBmYWlsZWQ6IDMsXHJcbiAgICAgICAgICAgIGF2Z0RlbGl2ZXJ5VGltZTogMTIwMCxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICB3aGF0c2FwcDoge1xyXG4gICAgICAgICAgICBzZW50OiAzMDAsXHJcbiAgICAgICAgICAgIGZhaWxlZDogOCxcclxuICAgICAgICAgICAgcmVhZDogMjUwLFxyXG4gICAgICAgICAgICBhdmdEZWxpdmVyeVRpbWU6IDMwMDAsXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgaW5BcHA6IHtcclxuICAgICAgICAgICAgc2VudDogMjAwLFxyXG4gICAgICAgICAgICByZWFkOiAxODAsXHJcbiAgICAgICAgICAgIGNsaWNrZWQ6IDkwLFxyXG4gICAgICAgICAgICBhdmdSZWFkVGltZTogNDUwMDAsXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgcHVzaDoge1xyXG4gICAgICAgICAgICBzZW50OiAxNTAsXHJcbiAgICAgICAgICAgIGZhaWxlZDogMTAsXHJcbiAgICAgICAgICAgIG9wZW5lZDogMTAwLFxyXG4gICAgICAgICAgICBkaXNtaXNzZWQ6IDQwLFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIGRhc2hib2FyZDoge1xyXG4gICAgICAgICAgICBzZW50OiA1MCxcclxuICAgICAgICAgICAgdmlld2VkOiA0NSxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgLy8g2YXYudiv2YTYp9iqINin2YTZhtis2KfYrVxyXG4gICAgICAgIHN1Y2Nlc3NSYXRlOiA5NixcclxuICAgICAgICBkZWxpdmVyeVJhdGU6IDk1LFxyXG4gICAgICAgIHJlYWRSYXRlOiA4NSxcclxuICAgICAgICBjbGlja1JhdGU6IDMyLFxyXG5cclxuICAgICAgICAvLyDYp9mE2KPYrti32KfYoVxyXG4gICAgICAgIGVycm9yczoge1xyXG4gICAgICAgICAgdG90YWxFcnJvcnM6IDM4LFxyXG4gICAgICAgICAgYnlUeXBlOiB7XHJcbiAgICAgICAgICAgICdpbnZhbGlkX251bWJlcic6IDgsXHJcbiAgICAgICAgICAgICdkZWxpdmVyeV90aW1lb3V0JzogMTUsXHJcbiAgICAgICAgICAgICduZXR3b3JrX2Vycm9yJzogMTAsXHJcbiAgICAgICAgICAgICdhdXRoZW50aWNhdGlvbl9mYWlsZWQnOiA1LFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIG1vc3RDb21tb246IFtcclxuICAgICAgICAgICAgeyBlcnJvclR5cGU6ICdkZWxpdmVyeV90aW1lb3V0JywgY291bnQ6IDE1LCBwZXJjZW50YWdlOiAzOS41IH0sXHJcbiAgICAgICAgICAgIHsgZXJyb3JUeXBlOiAnbmV0d29ya19lcnJvcicsIGNvdW50OiAxMCwgcGVyY2VudGFnZTogMjYuMyB9LFxyXG4gICAgICAgICAgICB7IGVycm9yVHlwZTogJ2ludmFsaWRfbnVtYmVyJywgY291bnQ6IDgsIHBlcmNlbnRhZ2U6IDIxLjEgfSxcclxuICAgICAgICAgIF0sXHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgLy8g2KXYrdi12KfYptmK2KfYqiDYp9mE2YXYs9iq2K7Yr9mFXHJcbiAgICAgICAgdXNlclN0YXRzOiB7XHJcbiAgICAgICAgICBhY3RpdmVVc2VyczogNTQyMCxcclxuICAgICAgICAgIG9wdGVkT3V0OiAxMjAsXHJcbiAgICAgICAgICBzdXNwZW5kZWQ6IDQ1LFxyXG4gICAgICAgICAgZW5nYWdlbWVudFJhdGU6IDc4LFxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIC8vINin2YTYo9iv2KfYoVxyXG4gICAgICAgIHBlcmZvcm1hbmNlOiB7XHJcbiAgICAgICAgICBhdmdQcm9jZXNzaW5nVGltZTogNDUwLFxyXG4gICAgICAgICAgYXZnUXVldWVXYWl0VGltZTogMjUwLFxyXG4gICAgICAgICAgcGVha1RpbWU6ICcxNDozMCcsXHJcbiAgICAgICAgICBib3R0bGVuZWNrOiAnd2hhdHNhcHBfZGVsaXZlcnknLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH07XHJcblxyXG4gICAgICByZXR1cm4gbWV0cmljcztcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGxvZ2dlci5lcnJvcihg4p2MINiu2LfYoyDZgdmKINit2LPYp9ioINin2YTYpdit2LXYp9im2YrYp9iqOiAke2Vycm9yLm1lc3NhZ2V9YCk7XHJcbiAgICAgIHRocm93IGVycm9yO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog2K3Zgdi4INin2YTYpdit2LXYp9im2YrYp9iqXHJcbiAgICovXHJcbiAgYXN5bmMgc2F2ZU1ldHJpY3MobWV0cmljcykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3Qgc2F2ZWRNZXRyaWNzID0gYXdhaXQgTm90aWZpY2F0aW9uTWV0cmljcy5jcmVhdGUobWV0cmljcyk7XHJcbiAgICAgIHJldHVybiBzYXZlZE1ldHJpY3M7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBsb2dnZXIuZXJyb3IoYOKdjCDYrti32KMg2YHZiiDYrdmB2Lgg2KfZhNil2K3Ytdin2KbZitin2Ko6ICR7ZXJyb3IubWVzc2FnZX1gKTtcclxuICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZBcclxuICAgKiDwn5OIINin2LPYqtix2KzYp9i5INin2YTYpdit2LXYp9im2YrYp9iqINmI2KfZhNiq2YLYp9ix2YrYsVxyXG4gICAqIOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkFxyXG4gICAqL1xyXG5cclxuICAvKipcclxuICAgKiDYp9mE2K3YtdmI2YQg2LnZhNmJINin2YTYpdit2LXYp9im2YrYp9iqINin2YTYrdin2YTZitipXHJcbiAgICovXHJcbiAgYXN5bmMgZ2V0Q3VycmVudE1ldHJpY3MoKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBsYXRlc3RNZXRyaWNzID0gYXdhaXQgTm90aWZpY2F0aW9uTWV0cmljcy5maW5kT25lKClcclxuICAgICAgICAuc29ydCh7IHRpbWVzdGFtcDogLTEgfSlcclxuICAgICAgICAuZXhlYygpO1xyXG5cclxuICAgICAgcmV0dXJuIGxhdGVzdE1ldHJpY3MgfHwge1xyXG4gICAgICAgIHRvdGFsTm90aWZpY2F0aW9uczogMCxcclxuICAgICAgICBzZW50Tm90aWZpY2F0aW9uczogMCxcclxuICAgICAgICBmYWlsZWROb3RpZmljYXRpb25zOiAwLFxyXG4gICAgICB9O1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgbG9nZ2VyLmVycm9yKGDinYwg2K7Yt9ijINmB2Yog2KzZhNioINin2YTYpdit2LXYp9im2YrYp9iqINin2YTYrdin2YTZitipOiAke2Vycm9yLm1lc3NhZ2V9YCk7XHJcbiAgICAgIHRocm93IGVycm9yO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog2KfZhNit2LXZiNmEINi52YTZiSDYpdit2LXYp9im2YrYp9iqINmG2LfYp9mCINiy2YXZhtmKXHJcbiAgICovXHJcbiAgYXN5bmMgZ2V0TWV0cmljc1JhbmdlKHN0YXJ0RGF0ZSwgZW5kRGF0ZSwgcGVyaW9kID0gJ2RhaWx5Jykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgbWV0cmljcyA9IGF3YWl0IE5vdGlmaWNhdGlvbk1ldHJpY3MuZmluZCh7XHJcbiAgICAgICAgZGF0ZToge1xyXG4gICAgICAgICAgJGd0ZTogc3RhcnREYXRlLFxyXG4gICAgICAgICAgJGx0ZTogZW5kRGF0ZSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIHBlcmlvZCxcclxuICAgICAgfSkuc29ydCh7IHRpbWVzdGFtcDogMSB9KS5leGVjKCk7XHJcblxyXG4gICAgICByZXR1cm4gbWV0cmljcztcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGxvZ2dlci5lcnJvcihg4p2MINiu2LfYoyDZgdmKINis2YTYqCDYpdit2LXYp9im2YrYp9iqINin2YTZhti32KfZgjogJHtlcnJvci5tZXNzYWdlfWApO1xyXG4gICAgICB0aHJvdyBlcnJvcjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqINin2YTYrdi12YjZhCDYudmE2Ykg2YXYpNi02LHYp9iqINin2YTYo9iv2KfYoSDYp9mE2LHYptmK2LPZitipIChLUElzKVxyXG4gICAqL1xyXG4gIGFzeW5jIGdldEtQSXMocGVyaW9kID0gJ2RhaWx5Jykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgbWV0cmljcyA9IGF3YWl0IHRoaXMuZ2V0Q3VycmVudE1ldHJpY3MoKTtcclxuXHJcbiAgICAgIGlmICghbWV0cmljcykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmtwaXM7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgZGVsaXZlcnlSYXRlOiBtZXRyaWNzLmRlbGl2ZXJ5UmF0ZSB8fCAwLFxyXG4gICAgICAgIHN1Y2Nlc3NSYXRlOiBtZXRyaWNzLnN1Y2Nlc3NSYXRlIHx8IDAsXHJcbiAgICAgICAgcmVhZFJhdGU6IG1ldHJpY3MucmVhZFJhdGUgfHwgMCxcclxuICAgICAgICBjbGlja1JhdGU6IG1ldHJpY3MuY2xpY2tSYXRlIHx8IDAsXHJcbiAgICAgICAgZW5nYWdlbWVudFJhdGU6IG1ldHJpY3MudXNlclN0YXRzPy5lbmdhZ2VtZW50UmF0ZSB8fCAwLFxyXG4gICAgICAgIG9wdE91dFJhdGU6IHRoaXMuY2FsY3VsYXRlT3B0T3V0UmF0ZShtZXRyaWNzKSxcclxuICAgICAgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGxvZ2dlci5lcnJvcihg4p2MINiu2LfYoyDZgdmKINis2YTYqCBLUElzOiAke2Vycm9yLm1lc3NhZ2V9YCk7XHJcbiAgICAgIHRocm93IGVycm9yO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog2KrZgtix2YrYsSDYtNin2YXZhFxyXG4gICAqL1xyXG4gIGFzeW5jIGdlbmVyYXRlQ29tcHJlaGVuc2l2ZVJlcG9ydChzdGFydERhdGUsIGVuZERhdGUpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IG1ldHJpY3NBcnJheSA9IGF3YWl0IHRoaXMuZ2V0TWV0cmljc1JhbmdlKHN0YXJ0RGF0ZSwgZW5kRGF0ZSk7XHJcblxyXG4gICAgICBpZiAobWV0cmljc0FycmF5Lmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcign2YTYpyDYqtmI2KzYryDYqNmK2KfZhtin2Kog2YTZhNmB2KrYsdipINin2YTZhdit2K/Yr9ipJyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IHJlcG9ydCA9IHtcclxuICAgICAgICBwZXJpb2Q6IHtcclxuICAgICAgICAgIHN0YXJ0OiBzdGFydERhdGUsXHJcbiAgICAgICAgICBlbmQ6IGVuZERhdGUsXHJcbiAgICAgICAgICBkYXlzOiBNYXRoLmNlaWwoKGVuZERhdGUgLSBzdGFydERhdGUpIC8gKDEwMDAgKiAzNjAwICogMjQpKSxcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBzdW1tYXJ5OiB7XHJcbiAgICAgICAgICB0b3RhbE5vdGlmaWNhdGlvbnM6IHRoaXMuc3VtTWV0cmljcyhtZXRyaWNzQXJyYXksICd0b3RhbE5vdGlmaWNhdGlvbnMnKSxcclxuICAgICAgICAgIHNlbnROb3RpZmljYXRpb25zOiB0aGlzLnN1bU1ldHJpY3MobWV0cmljc0FycmF5LCAnc2VudE5vdGlmaWNhdGlvbnMnKSxcclxuICAgICAgICAgIGZhaWxlZE5vdGlmaWNhdGlvbnM6IHRoaXMuc3VtTWV0cmljcyhtZXRyaWNzQXJyYXksICdmYWlsZWROb3RpZmljYXRpb25zJyksXHJcbiAgICAgICAgICBhdmdTdWNjZXNzUmF0ZTogdGhpcy5hdmdNZXRyaWNzKG1ldHJpY3NBcnJheSwgJ3N1Y2Nlc3NSYXRlJyksXHJcbiAgICAgICAgICBhdmdEZWxpdmVyeVJhdGU6IHRoaXMuYXZnTWV0cmljcyhtZXRyaWNzQXJyYXksICdkZWxpdmVyeVJhdGUnKSxcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBieUNoYW5uZWw6IHRoaXMuYWdncmVnYXRlQ2hhbm5lbE1ldHJpY3MobWV0cmljc0FycmF5KSxcclxuICAgICAgICBieUNhdGVnb3J5OiB0aGlzLmFnZ3JlZ2F0ZUNhdGVnb3J5TWV0cmljcyhtZXRyaWNzQXJyYXkpLFxyXG4gICAgICAgIGJ5UHJpb3JpdHk6IHRoaXMuYWdncmVnYXRlUHJpb3JpdHlNZXRyaWNzKG1ldHJpY3NBcnJheSksXHJcblxyXG4gICAgICAgIHRyZW5kczogdGhpcy5jYWxjdWxhdGVUcmVuZHMobWV0cmljc0FycmF5KSxcclxuICAgICAgICB0b3BFcnJvcnM6IHRoaXMuZ2V0VG9wRXJyb3JzKG1ldHJpY3NBcnJheSksXHJcbiAgICAgICAgdXNlckluc2lnaHRzOiB0aGlzLmdldFVzZXJJbnNpZ2h0cyhtZXRyaWNzQXJyYXkpLFxyXG5cclxuICAgICAgICByZWNvbW1lbmRhdGlvbnM6IHRoaXMuZ2VuZXJhdGVSZWNvbW1lbmRhdGlvbnMobWV0cmljc0FycmF5KSxcclxuICAgICAgfTtcclxuXHJcbiAgICAgIHJldHVybiByZXBvcnQ7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBsb2dnZXIuZXJyb3IoYOKdjCDYrti32KMg2YHZiiDYpdmG2LTYp9ihINin2YTYqtmC2LHZitixINin2YTYtNin2YXZhDogJHtlcnJvci5tZXNzYWdlfWApO1xyXG4gICAgICB0aHJvdyBlcnJvcjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqINiq2YLYsdmK2LEg2KfZhNmC2YbYp9ipXHJcbiAgICovXHJcbiAgYXN5bmMgZ2V0Q2hhbm5lbFJlcG9ydChjaGFubmVsLCBzdGFydERhdGUsIGVuZERhdGUpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IG1ldHJpY3NBcnJheSA9IGF3YWl0IHRoaXMuZ2V0TWV0cmljc1JhbmdlKHN0YXJ0RGF0ZSwgZW5kRGF0ZSk7XHJcblxyXG4gICAgICBjb25zdCBjaGFubmVsTWV0cmljcyA9IG1ldHJpY3NBcnJheS5tYXAobSA9PiBtLmNoYW5uZWxTdGF0cz8uW2NoYW5uZWxdIHx8IHt9KTtcclxuXHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgY2hhbm5lbCxcclxuICAgICAgICBwZXJpb2Q6IHsgc3RhcnQ6IHN0YXJ0RGF0ZSwgZW5kOiBlbmREYXRlIH0sXHJcbiAgICAgICAgdG90YWxTZW50OiB0aGlzLnN1bVByb3BlcnR5KGNoYW5uZWxNZXRyaWNzLCAnc2VudCcpLFxyXG4gICAgICAgIHRvdGFsRmFpbGVkOiB0aGlzLnN1bVByb3BlcnR5KGNoYW5uZWxNZXRyaWNzLCAnZmFpbGVkJyksXHJcbiAgICAgICAgYXZnRGVsaXZlcnlUaW1lOiB0aGlzLmF2Z1Byb3BlcnR5KGNoYW5uZWxNZXRyaWNzLCAnYXZnRGVsaXZlcnlUaW1lJyksXHJcbiAgICAgICAgc3VjY2Vzc1JhdGU6IHRoaXMuY2FsY3VsYXRlU3VjY2Vzc1JhdGUoXHJcbiAgICAgICAgICB0aGlzLnN1bVByb3BlcnR5KGNoYW5uZWxNZXRyaWNzLCAnc2VudCcpLFxyXG4gICAgICAgICAgdGhpcy5zdW1Qcm9wZXJ0eShjaGFubmVsTWV0cmljcywgJ2ZhaWxlZCcpXHJcbiAgICAgICAgKSxcclxuICAgICAgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGxvZ2dlci5lcnJvcihg4p2MINiu2LfYoyDZgdmKINil2YbYtNin2KEg2KrZgtix2YrYsSDYp9mE2YLZhtin2Kk6ICR7ZXJyb3IubWVzc2FnZX1gKTtcclxuICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDYqtmC2LHZitixINin2YTZhdiz2KrYrtiv2YXZitmGXHJcbiAgICovXHJcbiAgYXN5bmMgZ2V0VXNlckVuZ2FnZW1lbnRSZXBvcnQoc3RhcnREYXRlLCBlbmREYXRlKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBtZXRyaWNzQXJyYXkgPSBhd2FpdCB0aGlzLmdldE1ldHJpY3NSYW5nZShzdGFydERhdGUsIGVuZERhdGUpO1xyXG5cclxuICAgICAgY29uc3QgZW5nYWdlbWVudE1ldHJpY3MgPSBtZXRyaWNzQXJyYXlcclxuICAgICAgICAuZmlsdGVyKG0gPT4gbS51c2VyU3RhdHMpXHJcbiAgICAgICAgLm1hcChtID0+IG0udXNlclN0YXRzKTtcclxuXHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgcGVyaW9kOiB7IHN0YXJ0OiBzdGFydERhdGUsIGVuZDogZW5kRGF0ZSB9LFxyXG4gICAgICAgIGF2Z0FjdGl2ZVVzZXJzOiBNYXRoLnJvdW5kKHRoaXMuYXZnUHJvcGVydHkoZW5nYWdlbWVudE1ldHJpY3MsICdhY3RpdmVVc2VycycpKSxcclxuICAgICAgICBhdmdPcHRlZE91dDogTWF0aC5yb3VuZCh0aGlzLmF2Z1Byb3BlcnR5KGVuZ2FnZW1lbnRNZXRyaWNzLCAnb3B0ZWRPdXQnKSksXHJcbiAgICAgICAgYXZnRW5nYWdlbWVudFJhdGU6IE1hdGgucm91bmQodGhpcy5hdmdQcm9wZXJ0eShlbmdhZ2VtZW50TWV0cmljcywgJ2VuZ2FnZW1lbnRSYXRlJykpLFxyXG4gICAgICAgIHRyZW5kOiB0aGlzLmNhbGN1bGF0ZVRyZW5kKGVuZ2FnZW1lbnRNZXRyaWNzLCAnZW5nYWdlbWVudFJhdGUnKSxcclxuICAgICAgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGxvZ2dlci5lcnJvcihg4p2MINiu2LfYoyDZgdmKINil2YbYtNin2KEg2KrZgtix2YrYsSDYp9mE2YXYtNin2LHZg9ipOiAke2Vycm9yLm1lc3NhZ2V9YCk7XHJcbiAgICAgIHRocm93IGVycm9yO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQXHJcbiAgICog8J+boO+4jyDYp9mE2KPYr9mI2KfYqiDYp9mE2YXYs9in2LnYr9ipINmE2YTYrdiz2KfYqNin2KpcclxuICAgKiDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZBcclxuICAgKi9cclxuXHJcbiAgLyoqXHJcbiAgICog2KXYrNmF2KfZhNmKINin2YTZhdmC2YrYp9izXHJcbiAgICovXHJcbiAgc3VtTWV0cmljcyhtZXRyaWNzQXJyYXksIGZpZWxkKSB7XHJcbiAgICByZXR1cm4gbWV0cmljc0FycmF5LnJlZHVjZSgoc3VtLCBtZXRyaWMpID0+IHN1bSArIChtZXRyaWNbZmllbGRdIHx8IDApLCAwKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqINmF2KrZiNiz2Lcg2KfZhNmF2YLZitin2LNcclxuICAgKi9cclxuICBhdmdNZXRyaWNzKG1ldHJpY3NBcnJheSwgZmllbGQpIHtcclxuICAgIGlmIChtZXRyaWNzQXJyYXkubGVuZ3RoID09PSAwKSByZXR1cm4gMDtcclxuICAgIHJldHVybiBNYXRoLnJvdW5kKFxyXG4gICAgICBtZXRyaWNzQXJyYXkucmVkdWNlKChzdW0sIG1ldHJpYykgPT4gc3VtICsgKG1ldHJpY1tmaWVsZF0gfHwgMCksIDApIC9cclxuICAgICAgbWV0cmljc0FycmF5Lmxlbmd0aFxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqINmF2KzZhdmI2Lkg2KfZhNiu2KfYtdmK2KlcclxuICAgKi9cclxuICBzdW1Qcm9wZXJ0eShpdGVtcywgcHJvcGVydHkpIHtcclxuICAgIHJldHVybiBpdGVtcy5yZWR1Y2UoKHN1bSwgaXRlbSkgPT4gc3VtICsgKGl0ZW1bcHJvcGVydHldIHx8IDApLCAwKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqINmF2KrZiNiz2Lcg2KfZhNiu2KfYtdmK2KlcclxuICAgKi9cclxuICBhdmdQcm9wZXJ0eShpdGVtcywgcHJvcGVydHkpIHtcclxuICAgIGlmIChpdGVtcy5sZW5ndGggPT09IDApIHJldHVybiAwO1xyXG4gICAgcmV0dXJuIHRoaXMuc3VtUHJvcGVydHkoaXRlbXMsIHByb3BlcnR5KSAvIGl0ZW1zLmxlbmd0aDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqINit2LPYp9ioINmF2LnYr9mEINin2YTZhtis2KfYrVxyXG4gICAqL1xyXG4gIGNhbGN1bGF0ZVN1Y2Nlc3NSYXRlKHNlbnQsIGZhaWxlZCkge1xyXG4gICAgaWYgKHNlbnQgPT09IDApIHJldHVybiAwO1xyXG4gICAgcmV0dXJuIE1hdGgucm91bmQoKChzZW50IC0gZmFpbGVkKSAvIHNlbnQpICogMTAwKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqINit2LPYp9ioINmF2LnYr9mEINin2YTYpdmE2LrYp9ihXHJcbiAgICovXHJcbiAgY2FsY3VsYXRlT3B0T3V0UmF0ZShtZXRyaWNzKSB7XHJcbiAgICBpZiAoIW1ldHJpY3MudXNlclN0YXRzKSByZXR1cm4gMDtcclxuICAgIGNvbnN0IHRvdGFsID0gbWV0cmljcy51c2VyU3RhdHMuYWN0aXZlVXNlcnMgKyBtZXRyaWNzLnVzZXJTdGF0cy5vcHRlZE91dDtcclxuICAgIGlmICh0b3RhbCA9PT0gMCkgcmV0dXJuIDA7XHJcbiAgICByZXR1cm4gTWF0aC5yb3VuZCgobWV0cmljcy51c2VyU3RhdHMub3B0ZWRPdXQgLyB0b3RhbCkgKiAxMDApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog2KrYrNmF2YrYuSDYpdit2LXYp9im2YrYp9iqINin2YTZgtmG2YjYp9iqXHJcbiAgICovXHJcbiAgYWdncmVnYXRlQ2hhbm5lbE1ldHJpY3MobWV0cmljc0FycmF5KSB7XHJcbiAgICBjb25zdCBjaGFubmVscyA9IHt9O1xyXG5cclxuICAgIGNvbnN0IGNoYW5uZWxOYW1lcyA9IFsnZW1haWwnLCAnc21zJywgJ3doYXRzYXBwJywgJ2luQXBwJywgJ3B1c2gnLCAnZGFzaGJvYXJkJ107XHJcblxyXG4gICAgY2hhbm5lbE5hbWVzLmZvckVhY2goY2hhbm5lbCA9PiB7XHJcbiAgICAgIGNvbnN0IGNoYW5uZWxNZXRyaWNzID0gbWV0cmljc0FycmF5XHJcbiAgICAgICAgLm1hcChtID0+IG0uY2hhbm5lbFN0YXRzPy5bY2hhbm5lbF0gfHwge30pXHJcbiAgICAgICAgLmZpbHRlcihtID0+IE9iamVjdC5rZXlzKG0pLmxlbmd0aCA+IDApO1xyXG5cclxuICAgICAgaWYgKGNoYW5uZWxNZXRyaWNzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICBjaGFubmVsc1tjaGFubmVsXSA9IHtcclxuICAgICAgICAgIHNlbnQ6IHRoaXMuc3VtUHJvcGVydHkoY2hhbm5lbE1ldHJpY3MsICdzZW50JyksXHJcbiAgICAgICAgICBmYWlsZWQ6IHRoaXMuc3VtUHJvcGVydHkoY2hhbm5lbE1ldHJpY3MsICdmYWlsZWQnKSxcclxuICAgICAgICAgIGF2Z0RlbGl2ZXJ5VGltZTogTWF0aC5yb3VuZCh0aGlzLmF2Z1Byb3BlcnR5KGNoYW5uZWxNZXRyaWNzLCAnYXZnRGVsaXZlcnlUaW1lJykpLFxyXG4gICAgICAgICAgc3VjY2Vzc1JhdGU6IHRoaXMuY2FsY3VsYXRlU3VjY2Vzc1JhdGUoXHJcbiAgICAgICAgICAgIHRoaXMuc3VtUHJvcGVydHkoY2hhbm5lbE1ldHJpY3MsICdzZW50JyksXHJcbiAgICAgICAgICAgIHRoaXMuc3VtUHJvcGVydHkoY2hhbm5lbE1ldHJpY3MsICdmYWlsZWQnKVxyXG4gICAgICAgICAgKSxcclxuICAgICAgICB9O1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gY2hhbm5lbHM7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDYqtis2YXZiti5INil2K3Ytdin2KbZitin2Kog2KfZhNmB2KbYp9iqXHJcbiAgICovXHJcbiAgYWdncmVnYXRlQ2F0ZWdvcnlNZXRyaWNzKG1ldHJpY3NBcnJheSkge1xyXG4gICAgLy8g2KrYrNmF2YrYuSDZhdmGINin2YTYqNmK2KfZhtin2Kog2KfZhNmF2KrYp9it2KlcclxuICAgIHJldHVybiB7fTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqINiq2KzZhdmK2Lkg2KXYrdi12KfYptmK2KfYqiDYp9mE2KPZiNmE2YjZitin2KpcclxuICAgKi9cclxuICBhZ2dyZWdhdGVQcmlvcml0eU1ldHJpY3MobWV0cmljc0FycmF5KSB7XHJcbiAgICAvLyDYqtis2YXZiti5INmF2YYg2KfZhNio2YrYp9mG2KfYqiDYp9mE2YXYqtin2K3YqVxyXG4gICAgcmV0dXJuIHt9O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog2K3Ys9in2Kgg2KfZhNin2KrYrNin2YfYp9iqXHJcbiAgICovXHJcbiAgY2FsY3VsYXRlVHJlbmRzKG1ldHJpY3NBcnJheSkge1xyXG4gICAgaWYgKG1ldHJpY3NBcnJheS5sZW5ndGggPCAyKSB7XHJcbiAgICAgIHJldHVybiB7IHRyZW5kOiAnc3RhYmxlJywgY2hhbmdlUGVyY2VudGFnZTogMCB9O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGZpcnN0ID0gbWV0cmljc0FycmF5WzBdLnRvdGFsTm90aWZpY2F0aW9ucyB8fCAwO1xyXG4gICAgY29uc3QgbGFzdCA9IG1ldHJpY3NBcnJheVttZXRyaWNzQXJyYXkubGVuZ3RoIC0gMV0udG90YWxOb3RpZmljYXRpb25zIHx8IDA7XHJcblxyXG4gICAgY29uc3QgY2hhbmdlID0gKChsYXN0IC0gZmlyc3QpIC8gKGZpcnN0IHx8IDEpKSAqIDEwMDtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB0cmVuZDogY2hhbmdlID4gNSA/ICdpbmNyZWFzaW5nJyA6IGNoYW5nZSA8IC01ID8gJ2RlY3JlYXNpbmcnIDogJ3N0YWJsZScsXHJcbiAgICAgIGNoYW5nZVBlcmNlbnRhZ2U6IE1hdGgucm91bmQoY2hhbmdlKSxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDYo9mD2KvYsSDYp9mE2KPYrti32KfYoSDYp9mE2LTYp9im2LnYqVxyXG4gICAqL1xyXG4gIGdldFRvcEVycm9ycyhtZXRyaWNzQXJyYXkpIHtcclxuICAgIGNvbnN0IGFsbEVycm9ycyA9IFtdO1xyXG5cclxuICAgIG1ldHJpY3NBcnJheS5mb3JFYWNoKG1ldHJpYyA9PiB7XHJcbiAgICAgIGlmIChtZXRyaWMuZXJyb3JzPy5tb3N0Q29tbW9uKSB7XHJcbiAgICAgICAgYWxsRXJyb3JzLnB1c2goLi4ubWV0cmljLmVycm9ycy5tb3N0Q29tbW9uKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIGFsbEVycm9ycy5zbGljZSgwLCAxMCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDYsdik2Ykg2KfZhNmF2LPYqtiu2K/ZhdmK2YZcclxuICAgKi9cclxuICBnZXRVc2VySW5zaWdodHMobWV0cmljc0FycmF5KSB7XHJcbiAgICBjb25zdCB1c2VyU3RhdHMgPSBtZXRyaWNzQXJyYXlcclxuICAgICAgLmZpbHRlcihtID0+IG0udXNlclN0YXRzKVxyXG4gICAgICAubWFwKG0gPT4gbS51c2VyU3RhdHMpO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIGF2Z0FjdGl2ZVVzZXJzOiBNYXRoLnJvdW5kKHRoaXMuYXZnUHJvcGVydHkodXNlclN0YXRzLCAnYWN0aXZlVXNlcnMnKSksXHJcbiAgICAgIGF2Z09wdGVkT3V0OiBNYXRoLnJvdW5kKHRoaXMuYXZnUHJvcGVydHkodXNlclN0YXRzLCAnb3B0ZWRPdXQnKSksXHJcbiAgICAgIGF2Z0VuZ2FnZW1lbnRSYXRlOiBNYXRoLnJvdW5kKHRoaXMuYXZnUHJvcGVydHkodXNlclN0YXRzLCAnZW5nYWdlbWVudFJhdGUnKSksXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog2KrZiNmE2YrYryDYp9mE2KrZiNi12YrYp9iqXHJcbiAgICovXHJcbiAgZ2VuZXJhdGVSZWNvbW1lbmRhdGlvbnMobWV0cmljc0FycmF5KSB7XHJcbiAgICBjb25zdCByZWNvbW1lbmRhdGlvbnMgPSBbXTtcclxuXHJcbiAgICBjb25zdCBjdXJyZW50TWV0cmljcyA9IG1ldHJpY3NBcnJheVttZXRyaWNzQXJyYXkubGVuZ3RoIC0gMV07XHJcblxyXG4gICAgaWYgKGN1cnJlbnRNZXRyaWNzLnN1Y2Nlc3NSYXRlIDwgOTApIHtcclxuICAgICAgcmVjb21tZW5kYXRpb25zLnB1c2goe1xyXG4gICAgICAgIHByaW9yaXR5OiAnaGlnaCcsXHJcbiAgICAgICAgbWVzc2FnZTogJ9mF2LnYr9mEINin2YTZhtis2KfYrSDYo9mC2YQg2YXZhiA5MCUgLSDZitmI2KzYryDZhdi02YPZhNipINmB2Yog2KfZhNiq2LPZhNmK2YUnLFxyXG4gICAgICAgIGFjdGlvbjogJ9iq2K3ZgtmCINmF2YYg2K3Yp9mE2Kkg2KfZhNiu2YjYp9iv2YUg2YjYp9mE2KfYqti12KfZhNin2KonLFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoY3VycmVudE1ldHJpY3MuZXJyb3JzPy50b3RhbEVycm9ycyA+IDUwKSB7XHJcbiAgICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKHtcclxuICAgICAgICBwcmlvcml0eTogJ2hpZ2gnLFxyXG4gICAgICAgIG1lc3NhZ2U6ICfYudiv2K8g2KfZhNij2K7Yt9in2KEg2YXYsdiq2YHYuSDYrNiv2KfZiycsXHJcbiAgICAgICAgYWN0aW9uOiAn2LHYp9is2Lkg2LPYrNmE2KfYqiDYp9mE2KPYrti32KfYoSDZiNit2K/YryDYp9mE2YXYtNmD2YTYqScsXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLmNhbGN1bGF0ZU9wdE91dFJhdGUoY3VycmVudE1ldHJpY3MpID4gNSkge1xyXG4gICAgICByZWNvbW1lbmRhdGlvbnMucHVzaCh7XHJcbiAgICAgICAgcHJpb3JpdHk6ICdtZWRpdW0nLFxyXG4gICAgICAgIG1lc3NhZ2U6ICfZhdi52K/ZhCDYp9mE2KXZhNi62KfYoSDZhdix2KrZgdi5JyxcclxuICAgICAgICBhY3Rpb246ICfZgtmE2YQg2KrZg9ix2KfYsSDYp9mE2KXYtNi52KfYsdin2Kog2KPZiCDYrdiz2ZHZhiDYp9mE2YXYrdiq2YjZiScsXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiByZWNvbW1lbmRhdGlvbnM7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDYrdiz2KfYqCDYp9mE2KfYqtis2KfZh1xyXG4gICAqL1xyXG4gIGNhbGN1bGF0ZVRyZW5kKGl0ZW1zLCBwcm9wZXJ0eSkge1xyXG4gICAgaWYgKGl0ZW1zLmxlbmd0aCA8IDIpIHJldHVybiAnc3RhYmxlJztcclxuXHJcbiAgICBjb25zdCBmaXJzdCA9IGl0ZW1zWzBdW3Byb3BlcnR5XSB8fCAwO1xyXG4gICAgY29uc3QgbGFzdCA9IGl0ZW1zW2l0ZW1zLmxlbmd0aCAtIDFdW3Byb3BlcnR5XSB8fCAwO1xyXG5cclxuICAgIGlmIChsYXN0ID4gZmlyc3QpIHJldHVybiAnaW5jcmVhc2luZyc7XHJcbiAgICBpZiAobGFzdCA8IGZpcnN0KSByZXR1cm4gJ2RlY3JlYXNpbmcnO1xyXG4gICAgcmV0dXJuICdzdGFibGUnO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog2YXYs9itINin2YTYpdit2LXYp9im2YrYp9iqINin2YTZgtiv2YrZhdipXHJcbiAgICovXHJcbiAgYXN5bmMgY2xlYW5PbGRNZXRyaWNzKGRheXNUb0tlZXAgPSA5MCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgY3V0b2ZmRGF0ZSA9IG5ldyBEYXRlKERhdGUubm93KCkgLSBkYXlzVG9LZWVwICogODY0MDAwMDApO1xyXG5cclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgTm90aWZpY2F0aW9uTWV0cmljcy5kZWxldGVNYW55KHtcclxuICAgICAgICB0aW1lc3RhbXA6IHsgJGx0OiBjdXRvZmZEYXRlIH0sXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgbG9nZ2VyLmluZm8oYPCfl5HvuI8g2KrZhSDYrdiw2YEgJHtyZXN1bHQuZGVsZXRlZENvdW50fSDYs9is2YQg2KXYrdi12KfYptmKINmC2K/ZitmFYCk7XHJcblxyXG4gICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgbG9nZ2VyLmVycm9yKGDinYwg2K7Yt9ijINmB2Yog2KrZhti42YrZgSDYp9mE2KXYrdi12KfYptmK2KfYqiDYp9mE2YLYr9mK2YXYqTogJHtlcnJvci5tZXNzYWdlfWApO1xyXG4gICAgICB0aHJvdyBlcnJvcjtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbi8vIOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkFxyXG4vLyDwn5OmINin2YTYqti12K/ZitixXHJcbi8vIOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkFxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSB7XHJcbiAgTm90aWZpY2F0aW9uQW5hbHl0aWNzU3lzdGVtLFxyXG4gIE5vdGlmaWNhdGlvbk1ldHJpY3MsXHJcbiAgYW5hbHl0aWNzU3lzdGVtOiBuZXcgTm90aWZpY2F0aW9uQW5hbHl0aWNzU3lzdGVtKCksXHJcbn07XHJcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE1BQU1BLFFBQVEsR0FBR0MsT0FBTyxDQUFDLFVBQVUsQ0FBQztBQUNwQyxNQUFNQyxNQUFNLEdBQUdELE9BQU8sQ0FBQyxpQkFBaUIsQ0FBQztBQUN6QyxNQUFNRSxZQUFZLEdBQUdGLE9BQU8sQ0FBQyxRQUFRLENBQUM7O0FBRXRDO0FBQ0E7QUFDQTs7QUFFQSxNQUFNRyx5QkFBeUIsR0FBRyxJQUFJSixRQUFRLENBQUNLLE1BQU0sQ0FBQztFQUNwREMsU0FBUyxFQUFFO0lBQUVDLElBQUksRUFBRUMsTUFBTTtJQUFFQyxNQUFNLEVBQUUsSUFBSTtJQUFFQyxLQUFLLEVBQUU7RUFBSyxDQUFDO0VBQ3REQyxTQUFTLEVBQUU7SUFBRUosSUFBSSxFQUFFSyxJQUFJO0lBQUVDLE9BQU8sRUFBRUQsSUFBSSxDQUFDRSxHQUFHO0lBQUVKLEtBQUssRUFBRTtFQUFLLENBQUM7RUFFekQ7RUFDQUssTUFBTSxFQUFFO0lBQ05SLElBQUksRUFBRUMsTUFBTTtJQUNaUSxJQUFJLEVBQUUsQ0FBQyxVQUFVLEVBQUUs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QUFRLEVBQUUsUUFBUTtRQUNsQmxGLE9BQU8sRUFBRSxvQkFBb0I7UUFDN0JtRixNQUFNLEVBQUU7TUFDVixDQUFDLENBQUM7SUFDSjtJQUVBLE9BQU96QyxlQUFlO0VBQ3hCOztFQUVBO0FBQ0Y7QUFDQTtFQUNFb0IsY0FBY0EsQ0FBQ0ssS0FBSyxFQUFFQyxRQUFRLEVBQUU7SUFDOUIsSUFBSUQsS0FBSyxDQUFDakQsTUFBTSxHQUFHLENBQUMsRUFBRSxPQUFPLFFBQVE7SUFFckMsTUFBTTBELEtBQUssR0FBR1QsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDQyxRQUFRLENBQUMsSUFBSSxDQUFDO0lBQ3JDLE1BQU1TLElBQUksR0FBR1YsS0FBSyxDQUFDQSxLQUFLLENBQUNqRCxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUNrRCxRQUFRLENBQUMsSUFBSSxDQUFDO0lBRW5ELElBQUlTLElBQUksR0FBR0QsS0FBSyxFQUFFLE9BQU8sWUFBWTtJQUNyQyxJQUFJQyxJQUFJLEdBQUdELEtBQUssRUFBRSxPQUFPLFlBQVk7SUFDckMsT0FBTyxRQUFRO0VBQ2pCOztFQUVBO0FBQ0Y7QUFDQTtFQUNFLE1BQU1RLGVBQWVBLENBQUNDLFVBQVUsR0FBRyxFQUFFLEVBQUU7SUFDckMsSUFBSTtNQUNGLE1BQU1DLFVBQVUsR0FBRyxJQUFJeEssSUFBSSxDQUFDQSxJQUFJLENBQUNFLEdBQUcsQ0FBQyxDQUFDLEdBQUdxSyxVQUFVLEdBQUcsUUFBUSxDQUFDO01BRS9ELE1BQU1FLE1BQU0sR0FBRyxNQUFNL0csbUJBQW1CLENBQUNnSCxVQUFVLENBQUM7UUFDbEQzSyxTQUFTLEVBQUU7VUFBRTRLLEdBQUcsRUFBRUg7UUFBVztNQUMvQixDQUFDLENBQUM7TUFFRmxMLE1BQU0sQ0FBQ29GLElBQUksQ0FBQyxjQUFjK0YsTUFBTSxDQUFDRyxZQUFZLGtCQUFrQixDQUFDO01BRWhFLE9BQU9ILE1BQU07SUFDZixDQUFDLENBQUMsT0FBT3hGLEtBQUssRUFBRTtNQUNkM0YsTUFBTSxDQUFDMkYsS0FBSyxDQUFDLHNDQUFzQ0EsS0FBSyxDQUFDQyxPQUFPLEVBQUUsQ0FBQztNQUNuRSxNQUFNRCxLQUFLO0lBQ2I7RUFDRjtBQUNGOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTRGLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHO0VBQ2ZsSCwyQkFBMkI7RUFDM0JGLG1CQUFtQjtFQUNuQnFILGVBQWUsRUFBRSxJQUFJbkgsMkJBQTJCLENBQUM7QUFDbkQsQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==