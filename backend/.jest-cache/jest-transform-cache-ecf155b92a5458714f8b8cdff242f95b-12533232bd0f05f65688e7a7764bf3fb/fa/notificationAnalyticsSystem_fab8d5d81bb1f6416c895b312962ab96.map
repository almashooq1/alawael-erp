{"version":3,"names":["mongoose","require","logger","EventEmitter","notificationMetricsSchema","Schema","metricsId","type","String","unique","index","timestamp","Date","default","now","period","enum","date","totalNotifications","Number","sentNotifications","failedNotifications","pendingNotifications","channelStats","email","sent","failed","bounced","avgDeliveryTime","sms","whatsapp","read","inApp","clicked","avgReadTime","push","opened","dismissed","dashboard","viewed","categoryStats","Types","Mixed","priorityStats","successRate","deliveryRate","readRate","clickRate","performance","avgProcessingTime","avgQueueWaitTime","peakTime","bottleneck","errors","totalErrors","byType","mostCommon","errorType","count","percentage","userStats","activeUsers","optedOut","suspended","engagementRate","trends","increased","Boolean","changePercentage","comparison","NotificationMetrics","model","NotificationAnalyticsSystem","constructor","liveMetrics","totalNotificationsToday","sentNotificationsToday","failedNotificationsToday","currentQueueSize","systemHealth","kpis","optOutRate","startMetricsCollection","setInterval","collectHourlyMetrics","collectDailyMetrics","info","hourAgo","metrics","calculateMetrics","savedMetrics","saveMetrics","emit","error","message","yesterday","startDate","endDate","create","getCurrentMetrics","latestMetrics","findOne","sort","exec","getMetricsRange","find","$gte","$lte","getKPIs","calculateOptOutRate","generateComprehensiveReport","metricsArray","length","Error","report","start","end","days","Math","ceil","summary","sumMetrics","avgSuccessRate","avgMetrics","avgDeliveryRate","byChannel","aggregateChannelMetrics","byCategory","aggregateCategoryMetrics","byPriority","aggregatePriorityMetrics","calculateTrends","topErrors","getTopErrors","userInsights","getUserInsights","recommendations","generateRecommendations","getChannelReport","channel","channelMetrics","map","m","totalSent","sumProperty","totalFailed","avgProperty","calculateSuccessRate","getUserEngagementReport","engagementMetrics","filter","avgActiveUsers","round","avgOptedOut","avgEngagementRate","trend","calculateTrend","field","reduce","sum","metric","items","property","item","total","channels","channelNames","forEach","Object","keys","first","last","change","allErrors","slice","currentMetrics","priority","action","cleanOldMetrics","daysToKeep","cutoffDate","result","deleteMany","$lt","deletedCount","module","exports","analyticsSystem"],"sources":["notificationAnalyticsSystem.js"],"sourcesContent":["/**\r\n * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\r\n * ğŸ“Š Notification Analytics & Monitoring System\r\n * Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ­Ù„ÙŠÙ„Ø§Øª ÙˆØ§Ù„Ù…Ø±Ø§Ù‚Ø¨Ø© Ù„Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª\r\n * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\r\n * \r\n * Ù†Ø¸Ø§Ù… Ù…ØªÙ‚Ø¯Ù… Ù„Ù„Ù…Ø±Ø§Ù‚Ø¨Ø© ÙˆØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª:\r\n * - Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø´Ø§Ù…Ù„Ø©\r\n * - ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø£Ø¯Ø§Ø¡\r\n * - Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„ØªÙØµÙŠÙ„ÙŠØ©\r\n * - Ø§Ù„Ø±Ø³ÙˆÙ… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠØ© ÙˆØ§Ù„Ù…Ø¤Ø´Ø±Ø§Øª\r\n */\r\n\r\nconst mongoose = require('mongoose');\r\nconst logger = require('../utils/logger');\r\nconst EventEmitter = require('events');\r\n\r\n// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\r\n// ğŸ“Š Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª\r\n// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\r\n\r\nconst notificationMetricsSchema = new mongoose.Schema({\r\n  metricsId: { type: String, unique: true, index: true },\r\n  timestamp: { type: Date, default: Date.now, index: true },\r\n\r\n  // ÙØªØ±Ø© Ø§Ù„ØªØ¬Ù…ÙŠØ¹\r\n  period: {\r\n    type: String,\r\n    enum: ['realtime', 'hourly', 'daily', 'weekly', 'monthly'],\r\n    default: 'hourly',\r\n  },\r\n  date: Date,\r\n\r\n  // Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø¹Ø§Ù…Ø©\r\n  totalNotifications: Number,\r\n  sentNotifications: Number,\r\n  failedNotifications: Number,\r\n  pendingNotifications: Number,\r\n\r\n  // Ø­Ø³Ø¨ Ø§Ù„Ù‚Ù†ÙˆØ§Øª\r\n  channelStats: {\r\n    email: {\r\n      sent: Number,\r\n      failed: Number,\r\n      bounced: Number,\r\n      avgDeliveryTime: Number,\r\n    },\r\n    sms: {\r\n      sent: Number,\r\n      failed: Number,\r\n      avgDeliveryTime: Number,\r\n    },\r\n    whatsapp: {\r\n      sent: Number,\r\n      failed: Number,\r\n      read: Number,\r\n      avgDeliveryTime: Number,\r\n    },\r\n    inApp: {\r\n      sent: Number,\r\n      read: Number,\r\n      clicked: Number,\r\n      avgReadTime: Number,\r\n    },\r\n    push: {\r\n      sent: Number,\r\n      failed: Number,\r\n      opened: Number,\r\n      dismissed: Number,\r\n    },\r\n    dashboard: {\r\n      sent: Number,\r\n      viewed: Number,\r\n    },\r\n  },\r\n\r\n  // Ø­Ø³Ø¨ Ø§Ù„ÙØ¦Ø§Øª\r\n  categoryStats: mongoose.Schema.Types.Mixed,\r\n\r\n  // Ø­Ø³Ø¨ Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ§Øª\r\n  priorityStats: mongoose.Schema.Types.Mixed,\r\n\r\n  // Ù…Ø¹Ø¯Ù„ Ø§Ù„Ù†Ø¬Ø§Ø­\r\n  successRate: Number,\r\n  deliveryRate: Number,\r\n  readRate: Number,\r\n  clickRate: Number,\r\n\r\n  // Ø£Ø¯Ø§Ø¡ Ø§Ù„Ù†Ø¸Ø§Ù…\r\n  performance: {\r\n    avgProcessingTime: Number,\r\n    avgQueueWaitTime: Number,\r\n    peakTime: String,\r\n    bottleneck: String,\r\n  },\r\n\r\n  // Ø§Ù„Ø£Ø®Ø·Ø§Ø¡\r\n  errors: {\r\n    totalErrors: Number,\r\n    byType: mongoose.Schema.Types.Mixed,\r\n    mostCommon: [\r\n      {\r\n        errorType: String,\r\n        count: Number,\r\n        percentage: Number,\r\n      },\r\n    ],\r\n  },\r\n\r\n  // Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙˆÙ†\r\n  userStats: {\r\n    activeUsers: Number,\r\n    optedOut: Number,\r\n    suspended: Number,\r\n    engagementRate: Number,\r\n  },\r\n\r\n  // Ø§Ù„Ø§ØªØ¬Ø§Ù‡Ø§Øª\r\n  trends: {\r\n    increased: Boolean,\r\n    changePercentage: Number,\r\n    comparison: String, // 'higher', 'lower', 'stable'\r\n  },\r\n});\r\n\r\nconst NotificationMetrics = mongoose.model('NotificationMetrics', notificationMetricsSchema);\r\n\r\n// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\r\n// ğŸ¯ Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ­Ù„ÙŠÙ„Ø§Øª ÙˆØ§Ù„Ù…Ø±Ø§Ù‚Ø¨Ø©\r\n// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\r\n\r\nclass NotificationAnalyticsSystem extends EventEmitter {\r\n  constructor() {\r\n    super();\r\n\r\n    // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¨Ø« Ø§Ù„ÙÙˆØ±ÙŠ (In-Memory)\r\n    this.liveMetrics = {\r\n      totalNotificationsToday: 0,\r\n      sentNotificationsToday: 0,\r\n      failedNotificationsToday: 0,\r\n      avgDeliveryTime: 0,\r\n      currentQueueSize: 0,\r\n      systemHealth: 'healthy',\r\n    };\r\n\r\n    // Ù…Ø¤Ø´Ø±Ø§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© (KPIs)\r\n    this.kpis = {\r\n      deliveryRate: 0,\r\n      successRate: 0,\r\n      readRate: 0,\r\n      clickRate: 0,\r\n      optOutRate: 0,\r\n      engagementRate: 0,\r\n    };\r\n\r\n    // Ø¨Ø¯Ø¡ Ø¬Ù…Ø¹ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª\r\n    this.startMetricsCollection();\r\n  }\r\n\r\n  /**\r\n   * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\r\n   * ğŸ“Š Ø¬Ù…Ø¹ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª\r\n   * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\r\n   */\r\n\r\n  /**\r\n   * Ø¨Ø¯Ø¡ Ø¬Ù…Ø¹ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª\r\n   */\r\n  startMetricsCollection() {\r\n    // ØªØ¬Ù…ÙŠØ¹ ÙƒÙ„ Ø³Ø§Ø¹Ø©\r\n    setInterval(() => {\r\n      this.collectHourlyMetrics();\r\n    }, 3600000);\r\n\r\n    // ØªØ¬Ù…ÙŠØ¹ ÙŠÙˆÙ…ÙŠ\r\n    setInterval(() => {\r\n      this.collectDailyMetrics();\r\n    }, 86400000);\r\n\r\n    logger.info('â–¶ï¸ Ø¨Ø¯Ø¡ Ù†Ø¸Ø§Ù… Ø¬Ù…Ø¹ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª');\r\n  }\r\n\r\n  /**\r\n   * Ø¬Ù…Ø¹ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø¨Ø§Ù„Ø³Ø§Ø¹Ø©\r\n   */\r\n  async collectHourlyMetrics() {\r\n    try {\r\n      const hourAgo = new Date(Date.now() - 3600000);\r\n      const now = new Date();\r\n\r\n      // Ø¬Ù…Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª\r\n      const metrics = await this.calculateMetrics(hourAgo, now, 'hourly');\r\n\r\n      // Ø­ÙØ¸ ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª\r\n      const savedMetrics = await this.saveMetrics(metrics);\r\n\r\n      this.emit('hourlyMetricsCollected', savedMetrics);\r\n\r\n      logger.info('ğŸ“Š ØªÙ… Ø¬Ù…Ø¹ Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø³Ø§Ø¹Ø©');\r\n    } catch (error) {\r\n      logger.error(`âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù…Ø¹ Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø³Ø§Ø¹Ø©: ${error.message}`);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Ø¬Ù…Ø¹ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„ÙŠÙˆÙ…ÙŠØ©\r\n   */\r\n  async collectDailyMetrics() {\r\n    try {\r\n      const yesterday = new Date(Date.now() - 86400000);\r\n      const now = new Date();\r\n\r\n      const metrics = await this.calculateMetrics(yesterday, now, 'daily');\r\n\r\n      const savedMetrics = await this.saveMetrics(metrics);\r\n\r\n      this.emit('dailyMetricsCollected', savedMetrics);\r\n\r\n      logger.info('ğŸ“Š ØªÙ… Ø¬Ù…Ø¹ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„ÙŠÙˆÙ…ÙŠØ©');\r\n    } catch (error) {\r\n      logger.error(`âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù…Ø¹ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„ÙŠÙˆÙ…ÙŠØ©: ${error.message}`);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª\r\n   */\r\n  async calculateMetrics(startDate, endDate, period) {\r\n    try {\r\n      // ÙƒÙˆØ¯ Ø¨Ø³ÙŠØ· Ù„Ù„ØªÙˆØ¶ÙŠØ­\r\n      // ÙÙŠ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙØ¹Ù„ÙŠØŒ Ø³ÙŠØªÙ… Ø§Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù… Ø¹Ù† Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª\r\n\r\n      const metrics = {\r\n        metricsId: `METRICS_${Date.now()}`,\r\n        timestamp: new Date(),\r\n        period,\r\n        date: startDate,\r\n\r\n        // Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø¹Ø§Ù…Ø© (Ø£Ù…Ø«Ù„Ø©)\r\n        totalNotifications: 1250,\r\n        sentNotifications: 1200,\r\n        failedNotifications: 30,\r\n        pendingNotifications: 20,\r\n\r\n        // Ø­Ø³Ø¨ Ø§Ù„Ù‚Ù†ÙˆØ§Øª\r\n        channelStats: {\r\n          email: {\r\n            sent: 400,\r\n            failed: 5,\r\n            bounced: 2,\r\n            avgDeliveryTime: 2500,\r\n          },\r\n          sms: {\r\n            sent: 150,\r\n            failed: 3,\r\n            avgDeliveryTime: 1200,\r\n          },\r\n          whatsapp: {\r\n            sent: 300,\r\n            failed: 8,\r\n            read: 250,\r\n            avgDeliveryTime: 3000,\r\n          },\r\n          inApp: {\r\n            sent: 200,\r\n            read: 180,\r\n            clicked: 90,\r\n            avgReadTime: 45000,\r\n          },\r\n          push: {\r\n            sent: 150,\r\n            failed: 10,\r\n            opened: 100,\r\n            dismissed: 40,\r\n          },\r\n          dashboard: {\r\n            sent: 50,\r\n            viewed: 45,\r\n          },\r\n        },\r\n\r\n        // Ù…Ø¹Ø¯Ù„Ø§Øª Ø§Ù„Ù†Ø¬Ø§Ø­\r\n        successRate: 96,\r\n        deliveryRate: 95,\r\n        readRate: 85,\r\n        clickRate: 32,\r\n\r\n        // Ø§Ù„Ø£Ø®Ø·Ø§Ø¡\r\n        errors: {\r\n          totalErrors: 38,\r\n          byType: {\r\n            'invalid_number': 8,\r\n            'delivery_timeout': 15,\r\n            'network_error': 10,\r\n            'authentication_failed': 5,\r\n          },\r\n          mostCommon: [\r\n            { errorType: 'delivery_timeout', count: 15, percentage: 39.5 },\r\n            { errorType: 'network_error', count: 10, percentage: 26.3 },\r\n            { errorType: 'invalid_number', count: 8, percentage: 21.1 },\r\n          ],\r\n        },\r\n\r\n        // Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…\r\n        userStats: {\r\n          activeUsers: 5420,\r\n          optedOut: 120,\r\n          suspended: 45,\r\n          engagementRate: 78,\r\n        },\r\n\r\n        // Ø§Ù„Ø£Ø¯Ø§Ø¡\r\n        performance: {\r\n          avgProcessingTime: 450,\r\n          avgQueueWaitTime: 250,\r\n          peakTime: '14:30',\r\n          bottleneck: 'whatsapp_delivery',\r\n        },\r\n      };\r\n\r\n      return metrics;\r\n    } catch (error) {\r\n      logger.error(`âŒ Ø®Ø·Ø£ ÙÙŠ Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Ø­ÙØ¸ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª\r\n   */\r\n  async saveMetrics(metrics) {\r\n    try {\r\n      const savedMetrics = await NotificationMetrics.create(metrics);\r\n      return savedMetrics;\r\n    } catch (error) {\r\n      logger.error(`âŒ Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\r\n   * ğŸ“ˆ Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª ÙˆØ§Ù„ØªÙ‚Ø§Ø±ÙŠØ±\r\n   * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\r\n   */\r\n\r\n  /**\r\n   * Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©\r\n   */\r\n  async getCurrentMetrics() {\r\n    try {\r\n      const latestMetrics = await NotificationMetrics.findOne()\r\n        .sort({ timestamp: -1 })\r\n        .exec();\r\n\r\n      return latestMetrics || {\r\n        totalNotifications: 0,\r\n        sentNotifications: 0,\r\n        failedNotifications: 0,\r\n      };\r\n    } catch (error) {\r\n      logger.error(`âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ù†Ø·Ø§Ù‚ Ø²Ù…Ù†ÙŠ\r\n   */\r\n  async getMetricsRange(startDate, endDate, period = 'daily') {\r\n    try {\r\n      const metrics = await NotificationMetrics.find({\r\n        date: {\r\n          $gte: startDate,\r\n          $lte: endDate,\r\n        },\r\n        period,\r\n      }).sort({ timestamp: 1 }).exec();\r\n\r\n      return metrics;\r\n    } catch (error) {\r\n      logger.error(`âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù†Ø·Ø§Ù‚: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù…Ø¤Ø´Ø±Ø§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© (KPIs)\r\n   */\r\n  async getKPIs(period = 'daily') {\r\n    try {\r\n      const metrics = await this.getCurrentMetrics();\r\n\r\n      if (!metrics) {\r\n        return this.kpis;\r\n      }\r\n\r\n      return {\r\n        deliveryRate: metrics.deliveryRate || 0,\r\n        successRate: metrics.successRate || 0,\r\n        readRate: metrics.readRate || 0,\r\n        clickRate: metrics.clickRate || 0,\r\n        engagementRate: metrics.userStats?.engagementRate || 0,\r\n        optOutRate: this.calculateOptOutRate(metrics),\r\n      };\r\n    } catch (error) {\r\n      logger.error(`âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ KPIs: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ØªÙ‚Ø±ÙŠØ± Ø´Ø§Ù…Ù„\r\n   */\r\n  async generateComprehensiveReport(startDate, endDate) {\r\n    try {\r\n      const metricsArray = await this.getMetricsRange(startDate, endDate);\r\n\r\n      if (metricsArray.length === 0) {\r\n        throw new Error('Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„ÙØªØ±Ø© Ø§Ù„Ù…Ø­Ø¯Ø¯Ø©');\r\n      }\r\n\r\n      const report = {\r\n        period: {\r\n          start: startDate,\r\n          end: endDate,\r\n          days: Math.ceil((endDate - startDate) / (1000 * 3600 * 24)),\r\n        },\r\n\r\n        summary: {\r\n          totalNotifications: this.sumMetrics(metricsArray, 'totalNotifications'),\r\n          sentNotifications: this.sumMetrics(metricsArray, 'sentNotifications'),\r\n          failedNotifications: this.sumMetrics(metricsArray, 'failedNotifications'),\r\n          avgSuccessRate: this.avgMetrics(metricsArray, 'successRate'),\r\n          avgDeliveryRate: this.avgMetrics(metricsArray, 'deliveryRate'),\r\n        },\r\n\r\n        byChannel: this.aggregateChannelMetrics(metricsArray),\r\n        byCategory: this.aggregateCategoryMetrics(metricsArray),\r\n        byPriority: this.aggregatePriorityMetrics(metricsArray),\r\n\r\n        trends: this.calculateTrends(metricsArray),\r\n        topErrors: this.getTopErrors(metricsArray),\r\n        userInsights: this.getUserInsights(metricsArray),\r\n\r\n        recommendations: this.generateRecommendations(metricsArray),\r\n      };\r\n\r\n      return report;\r\n    } catch (error) {\r\n      logger.error(`âŒ Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø´Ø§Ù…Ù„: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ù‚Ù†Ø§Ø©\r\n   */\r\n  async getChannelReport(channel, startDate, endDate) {\r\n    try {\r\n      const metricsArray = await this.getMetricsRange(startDate, endDate);\r\n\r\n      const channelMetrics = metricsArray.map(m => m.channelStats?.[channel] || {});\r\n\r\n      return {\r\n        channel,\r\n        period: { start: startDate, end: endDate },\r\n        totalSent: this.sumProperty(channelMetrics, 'sent'),\r\n        totalFailed: this.sumProperty(channelMetrics, 'failed'),\r\n        avgDeliveryTime: this.avgProperty(channelMetrics, 'avgDeliveryTime'),\r\n        successRate: this.calculateSuccessRate(\r\n          this.sumProperty(channelMetrics, 'sent'),\r\n          this.sumProperty(channelMetrics, 'failed')\r\n        ),\r\n      };\r\n    } catch (error) {\r\n      logger.error(`âŒ Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ù‚Ù†Ø§Ø©: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†\r\n   */\r\n  async getUserEngagementReport(startDate, endDate) {\r\n    try {\r\n      const metricsArray = await this.getMetricsRange(startDate, endDate);\r\n\r\n      const engagementMetrics = metricsArray\r\n        .filter(m => m.userStats)\r\n        .map(m => m.userStats);\r\n\r\n      return {\r\n        period: { start: startDate, end: endDate },\r\n        avgActiveUsers: Math.round(this.avgProperty(engagementMetrics, 'activeUsers')),\r\n        avgOptedOut: Math.round(this.avgProperty(engagementMetrics, 'optedOut')),\r\n        avgEngagementRate: Math.round(this.avgProperty(engagementMetrics, 'engagementRate')),\r\n        trend: this.calculateTrend(engagementMetrics, 'engagementRate'),\r\n      };\r\n    } catch (error) {\r\n      logger.error(`âŒ Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ©: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\r\n   * ğŸ› ï¸ Ø§Ù„Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© Ù„Ù„Ø­Ø³Ø§Ø¨Ø§Øª\r\n   * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\r\n   */\r\n\r\n  /**\r\n   * Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ù‚ÙŠØ§Ø³\r\n   */\r\n  sumMetrics(metricsArray, field) {\r\n    return metricsArray.reduce((sum, metric) => sum + (metric[field] || 0), 0);\r\n  }\r\n\r\n  /**\r\n   * Ù…ØªÙˆØ³Ø· Ø§Ù„Ù…Ù‚ÙŠØ§Ø³\r\n   */\r\n  avgMetrics(metricsArray, field) {\r\n    if (metricsArray.length === 0) return 0;\r\n    return Math.round(\r\n      metricsArray.reduce((sum, metric) => sum + (metric[field] || 0), 0) /\r\n      metricsArray.length\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ø®Ø§ØµÙŠØ©\r\n   */\r\n  sumProperty(items, property) {\r\n    return items.reduce((sum, item) => sum + (item[property] || 0), 0);\r\n  }\r\n\r\n  /**\r\n   * Ù…ØªÙˆØ³Ø· Ø§Ù„Ø®Ø§ØµÙŠØ©\r\n   */\r\n  avgProperty(items, property) {\r\n    if (items.length === 0) return 0;\r\n    return this.sumProperty(items, property) / items.length;\r\n  }\r\n\r\n  /**\r\n   * Ø­Ø³Ø§Ø¨ Ù…Ø¹Ø¯Ù„ Ø§Ù„Ù†Ø¬Ø§Ø­\r\n   */\r\n  calculateSuccessRate(sent, failed) {\r\n    if (sent === 0) return 0;\r\n    return Math.round(((sent - failed) / sent) * 100);\r\n  }\r\n\r\n  /**\r\n   * Ø­Ø³Ø§Ø¨ Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø¥Ù„ØºØ§Ø¡\r\n   */\r\n  calculateOptOutRate(metrics) {\r\n    if (!metrics.userStats) return 0;\r\n    const total = metrics.userStats.activeUsers + metrics.userStats.optedOut;\r\n    if (total === 0) return 0;\r\n    return Math.round((metrics.userStats.optedOut / total) * 100);\r\n  }\r\n\r\n  /**\r\n   * ØªØ¬Ù…ÙŠØ¹ Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù‚Ù†ÙˆØ§Øª\r\n   */\r\n  aggregateChannelMetrics(metricsArray) {\r\n    const channels = {};\r\n\r\n    const channelNames = ['email', 'sms', 'whatsapp', 'inApp', 'push', 'dashboard'];\r\n\r\n    channelNames.forEach(channel => {\r\n      const channelMetrics = metricsArray\r\n        .map(m => m.channelStats?.[channel] || {})\r\n        .filter(m => Object.keys(m).length > 0);\r\n\r\n      if (channelMetrics.length > 0) {\r\n        channels[channel] = {\r\n          sent: this.sumProperty(channelMetrics, 'sent'),\r\n          failed: this.sumProperty(channelMetrics, 'failed'),\r\n          avgDeliveryTime: Math.round(this.avgProperty(channelMetrics, 'avgDeliveryTime')),\r\n          successRate: this.calculateSuccessRate(\r\n            this.sumProperty(channelMetrics, 'sent'),\r\n            this.sumProperty(channelMetrics, 'failed')\r\n          ),\r\n        };\r\n      }\r\n    });\r\n\r\n    return channels;\r\n  }\r\n\r\n  /**\r\n   * ØªØ¬Ù…ÙŠØ¹ Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„ÙØ¦Ø§Øª\r\n   */\r\n  aggregateCategoryMetrics(metricsArray) {\r\n    // ØªØ¬Ù…ÙŠØ¹ Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø©\r\n    return {};\r\n  }\r\n\r\n  /**\r\n   * ØªØ¬Ù…ÙŠØ¹ Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ§Øª\r\n   */\r\n  aggregatePriorityMetrics(metricsArray) {\r\n    // ØªØ¬Ù…ÙŠØ¹ Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø©\r\n    return {};\r\n  }\r\n\r\n  /**\r\n   * Ø­Ø³Ø§Ø¨ Ø§Ù„Ø§ØªØ¬Ø§Ù‡Ø§Øª\r\n   */\r\n  calculateTrends(metricsArray) {\r\n    if (metricsArray.length < 2) {\r\n      return { trend: 'stable', changePercentage: 0 };\r\n    }\r\n\r\n    const first = metricsArray[0].totalNotifications || 0;\r\n    const last = metricsArray[metricsArray.length - 1].totalNotifications || 0;\r\n\r\n    const change = ((last - first) / (first || 1)) * 100;\r\n\r\n    return {\r\n      trend: change > 5 ? 'increasing' : change < -5 ? 'decreasing' : 'stable',\r\n      changePercentage: Math.round(change),\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Ø£ÙƒØ«Ø± Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ Ø§Ù„Ø´Ø§Ø¦Ø¹Ø©\r\n   */\r\n  getTopErrors(metricsArray) {\r\n    const allErrors = [];\r\n\r\n    metricsArray.forEach(metric => {\r\n      if (metric.errors?.mostCommon) {\r\n        allErrors.push(...metric.errors.mostCommon);\r\n      }\r\n    });\r\n\r\n    return allErrors.slice(0, 10);\r\n  }\r\n\r\n  /**\r\n   * Ø±Ø¤Ù‰ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†\r\n   */\r\n  getUserInsights(metricsArray) {\r\n    const userStats = metricsArray\r\n      .filter(m => m.userStats)\r\n      .map(m => m.userStats);\r\n\r\n    return {\r\n      avgActiveUsers: Math.round(this.avgProperty(userStats, 'activeUsers')),\r\n      avgOptedOut: Math.round(this.avgProperty(userStats, 'optedOut')),\r\n      avgEngagementRate: Math.round(this.avgProperty(userStats, 'engagementRate')),\r\n    };\r\n  }\r\n\r\n  /**\r\n   * ØªÙˆÙ„ÙŠØ¯ Ø§Ù„ØªÙˆØµÙŠØ§Øª\r\n   */\r\n  generateRecommendations(metricsArray) {\r\n    const recommendations = [];\r\n\r\n    const currentMetrics = metricsArray[metricsArray.length - 1];\r\n\r\n    if (currentMetrics.successRate < 90) {\r\n      recommendations.push({\r\n        priority: 'high',\r\n        message: 'Ù…Ø¹Ø¯Ù„ Ø§Ù„Ù†Ø¬Ø§Ø­ Ø£Ù‚Ù„ Ù…Ù† 90% - ÙŠÙˆØ¬Ø¯ Ù…Ø´ÙƒÙ„Ø© ÙÙŠ Ø§Ù„ØªØ³Ù„ÙŠÙ…',\r\n        action: 'ØªØ­Ù‚Ù‚ Ù…Ù† Ø­Ø§Ù„Ø© Ø§Ù„Ø®ÙˆØ§Ø¯Ù… ÙˆØ§Ù„Ø§ØªØµØ§Ù„Ø§Øª',\r\n      });\r\n    }\r\n\r\n    if (currentMetrics.errors?.totalErrors > 50) {\r\n      recommendations.push({\r\n        priority: 'high',\r\n        message: 'Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ Ù…Ø±ØªÙØ¹ Ø¬Ø¯Ø§Ù‹',\r\n        action: 'Ø±Ø§Ø¬Ø¹ Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ ÙˆØ­Ø¯Ø¯ Ø§Ù„Ù…Ø´ÙƒÙ„Ø©',\r\n      });\r\n    }\r\n\r\n    if (this.calculateOptOutRate(currentMetrics) > 5) {\r\n      recommendations.push({\r\n        priority: 'medium',\r\n        message: 'Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø¥Ù„ØºØ§Ø¡ Ù…Ø±ØªÙØ¹',\r\n        action: 'Ù‚Ù„Ù„ ØªÙƒØ±Ø§Ø± Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø£Ùˆ Ø­Ø³Ù‘Ù† Ø§Ù„Ù…Ø­ØªÙˆÙ‰',\r\n      });\r\n    }\r\n\r\n    return recommendations;\r\n  }\r\n\r\n  /**\r\n   * Ø­Ø³Ø§Ø¨ Ø§Ù„Ø§ØªØ¬Ø§Ù‡\r\n   */\r\n  calculateTrend(items, property) {\r\n    if (items.length < 2) return 'stable';\r\n\r\n    const first = items[0][property] || 0;\r\n    const last = items[items.length - 1][property] || 0;\r\n\r\n    if (last > first) return 'increasing';\r\n    if (last < first) return 'decreasing';\r\n    return 'stable';\r\n  }\r\n\r\n  /**\r\n   * Ù…Ø³Ø­ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©\r\n   */\r\n  async cleanOldMetrics(daysToKeep = 90) {\r\n    try {\r\n      const cutoffDate = new Date(Date.now() - daysToKeep * 86400000);\r\n\r\n      const result = await NotificationMetrics.deleteMany({\r\n        timestamp: { $lt: cutoffDate },\r\n      });\r\n\r\n      logger.info(`ğŸ—‘ï¸ ØªÙ… Ø­Ø°Ù ${result.deletedCount} Ø³Ø¬Ù„ Ø¥Ø­ØµØ§Ø¦ÙŠ Ù‚Ø¯ÙŠÙ…`);\r\n\r\n      return result;\r\n    } catch (error) {\r\n      logger.error(`âŒ Ø®Ø·Ø£ ÙÙŠ ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n}\r\n\r\n// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\r\n// ğŸ“¦ Ø§Ù„ØªØµØ¯ÙŠØ±\r\n// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\r\n\r\nmodule.exports = {\r\n  NotificationAnalyticsSystem,\r\n  NotificationMetrics,\r\n  analyticsSystem: new NotificationAnalyticsSystem(),\r\n};\r\n"],"mappings":"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","ignoreList":[]}