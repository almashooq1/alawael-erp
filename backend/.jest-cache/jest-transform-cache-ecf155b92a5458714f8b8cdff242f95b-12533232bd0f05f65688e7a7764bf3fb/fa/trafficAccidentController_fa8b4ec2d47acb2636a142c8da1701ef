2146e60a5d0bf919f247515ab37c1007
/**
 * Traffic Accident Controller - تحكم الحوادث المرورية
 * معالج طلبات API لتقارير الحوادث المرورية
 */

const trafficAccidentService = require('../services/trafficAccidentService');
const logger = require('../utils/logger');
class TrafficAccidentController {
  /**
   * CREATE - إنشاء تقرير حادث جديد
   */
  async createAccidentReport(req, res) {
    try {
      const {
        accidentData
      } = req.body;
      const userId = req.user?.id || req.userId;
      if (!accidentData) {
        return res.status(400).json({
          success: false,
          message: 'بيانات الحادث مطلوبة'
        });
      }
      const report = await trafficAccidentService.createAccidentReport(accidentData, userId);
      res.status(201).json({
        success: true,
        message: 'تم إنشاء التقرير بنجاح',
        data: report
      });
    } catch (error) {
      logger.error('Error creating accident report', {
        error: error.message
      });
      res.status(500).json({
        success: false,
        message: error.message
      });
    }
  }

  /**
   * GET ALL - الحصول على جميع التقارير
   */
  async getAllReports(req, res) {
    try {
      const {
        status,
        severity,
        city,
        priority,
        startDate,
        endDate,
        page = 1,
        limit = 20
      } = req.query;
      const filters = {
        status,
        severity,
        city,
        priority,
        startDate,
        endDate
      };

      // Remove undefined filters
      Object.keys(filters).forEach(key => filters[key] === undefined && delete filters[key]);
      const result = await trafficAccidentService.getAllReports(filters, parseInt(page), parseInt(limit));
      res.status(200).json({
        success: true,
        ...result
      });
    } catch (error) {
      logger.error('Error fetching accident reports', {
        error: error.message
      });
      res.status(500).json({
        success: false,
        message: error.message
      });
    }
  }

  /**
   * GET ONE - الحصول على تقرير محدد
   */
  async getReportById(req, res) {
    try {
      const {
        id
      } = req.params;
      const userId = req.user?.id || req.userId;
      const report = await trafficAccidentService.getReportById(id);

      // Record view history
      await trafficAccidentService.recordViewHistory(id, userId);
      res.status(200).json({
        success: true,
        data: report
      });
    } catch (error) {
      logger.error('Error fetching accident report', {
        error: error.message
      });
      res.status(500).json({
        success: false,
        message: error.message
      });
    }
  }

  /**
   * UPDATE - تحديث تقرير الحادث
   */
  async updateAccidentReport(req, res) {
    try {
      const {
        id
      } = req.params;
      const {
        updateData
      } = req.body;
      const userId = req.user?.id || req.userId;
      if (!updateData) {
        return res.status(400).json({
          success: false,
          message: 'بيانات التحديث مطلوبة'
        });
      }
      const report = await trafficAccidentService.updateAccidentReport(id, updateData, userId);
      res.status(200).json({
        success: true,
        message: 'تم تحديث التقرير بنجاح',
        data: report
      });
    } catch (error) {
      logger.error('Error updating accident report', {
        error: error.message
      });
      res.status(500).json({
        success: false,
        message: error.message
      });
    }
  }

  /**
   * DELETE - حذف/أرشفة تقرير
   */
  async deleteAccidentReport(req, res) {
    try {
      const {
        id
      } = req.params;
      const {
        reason
      } = req.body;
      const userId = req.user?.id || req.userId;
      const result = await trafficAccidentService.deleteAccidentReport(id, userId, reason);
      res.status(200).json({
        success: true,
        message: result.message
      });
    } catch (error) {
      logger.error('Error deleting accident report', {
        error: error.message
      });
      res.status(500).json({
        success: false,
        message: error.message
      });
    }
  }

  /**
   * UPDATE STATUS - تحديث حالة التقرير
   */
  async updateReportStatus(req, res) {
    try {
      const {
        id
      } = req.params;
      const {
        status,
        notes
      } = req.body;
      const userId = req.user?.id || req.userId;
      if (!status) {
        return res.status(400).json({
          success: false,
          message: 'الحالة مطلوبة'
        });
      }
      const report = await trafficAccidentService.updateReportStatus(id, status, userId, notes);
      res.status(200).json({
        success: true,
        message: 'تم تحديث الحالة بنجاح',
        data: report
      });
    } catch (error) {
      logger.error('Error updating report status', {
        error: error.message
      });
      res.status(500).json({
        success: false,
        message: error.message
      });
    }
  }

  /**
   * START INVESTIGATION - بدء التحقيق
   */
  async startInvestigation(req, res) {
    try {
      const {
        id
      } = req.params;
      const {
        investigatingOfficerId
      } = req.body;
      const userId = req.user?.id || req.userId;
      if (!investigatingOfficerId) {
        return res.status(400).json({
          success: false,
          message: 'معرف المحقق مطلوب'
        });
      }
      const report = await trafficAccidentService.startInvestigation(id, investigatingOfficerId, userId);
      res.status(200).json({
        success: true,
        message: 'تم بدء التحقيق بنجاح',
        data: report
      });
    } catch (error) {
      logger.error('Error starting investigation', {
        error: error.message
      });
      res.status(500).json({
        success: false,
        message: error.message
      });
    }
  }

  /**
   * COMPLETE INVESTIGATION - إكمال التحقيق
   */
  async completeInvestigation(req, res) {
    try {
      const {
        id
      } = req.params;
      const {
        findings,
        rootCause,
        contributingFactors,
        recommendations,
        primaryCause
      } = req.body;
      const userId = req.user?.id || req.userId;
      if (!findings || !rootCause) {
        return res.status(400).json({
          success: false,
          message: 'النتائج والسبب الأساسي مطلوبان'
        });
      }
      const report = await trafficAccidentService.completeInvestigation(id, {
        findings,
        rootCause,
        contributingFactors,
        recommendations,
        primaryCause
      }, userId);
      res.status(200).json({
        success: true,
        message: 'تم إكمال التحقيق بنجاح',
        data: report
      });
    } catch (error) {
      logger.error('Error completing investigation', {
        error: error.message
      });
      res.status(500).json({
        success: false,
        message: error.message
      });
    }
  }

  /**
   * ADD COMMENT - إضافة تعليق
   */
  async addComment(req, res) {
    try {
      const {
        id
      } = req.params;
      const {
        comment,
        attachments
      } = req.body;
      const userId = req.user?.id || req.userId;
      const userName = req.user?.name || 'Unknown';
      if (!comment) {
        return res.status(400).json({
          success: false,
          message: 'التعليق مطلوب'
        });
      }
      const report = await trafficAccidentService.addComment(id, userId, userName, comment, attachments);
      res.status(200).json({
        success: true,
        message: 'تم إضافة التعليق بنجاح',
        data: report
      });
    } catch (error) {
      logger.error('Error adding comment', {
        error: error.message
      });
      res.status(500).json({
        success: false,
        message: error.message
      });
    }
  }

  /**
   * ADD WITNESS - إضافة شاهد
   */
  async addWitness(req, res) {
    try {
      const {
        id
      } = req.params;
      const witnessData = req.body;
      const userId = req.user?.id || req.userId;
      if (!witnessData.name || !witnessData.phone) {
        return res.status(400).json({
          success: false,
          message: 'الاسم والهاتف مطلوبان'
        });
      }
      const report = await trafficAccidentService.addWitness(id, witnessData, userId);
      res.status(200).json({
        success: true,
        message: 'تم إضافة الشاهد بنجاح',
        data: report
      });
    } catch (error) {
      logger.error('Error adding witness', {
        error: error.message
      });
      res.status(500).json({
        success: false,
        message: error.message
      });
    }
  }

  /**
   * ADD ATTACHMENT - إضافة مرفق
   */
  async addAttachment(req, res) {
    try {
      const {
        id
      } = req.params;
      const {
        fileName,
        fileUrl,
        fileType
      } = req.body;
      const userId = req.user?.id || req.userId;
      if (!fileName || !fileUrl) {
        return res.status(400).json({
          success: false,
          message: 'اسم الملف والرابط مطلوبان'
        });
      }
      const report = await trafficAccidentService.addAttachment(id, {
        fileName,
        fileUrl,
        fileType
      }, userId);
      res.status(200).json({
        success: true,
        message: 'تم إضافة المرفق بنجاح',
        data: report
      });
    } catch (error) {
      logger.error('Error adding attachment', {
        error: error.message
      });
      res.status(500).json({
        success: false,
        message: error.message
      });
    }
  }

  /**
   * ADD INSURANCE INFO - إضافة معلومات التأمين
   */
  async addInsuranceInfo(req, res) {
    try {
      const {
        id,
        vehicleIndex
      } = req.params;
      const insuranceData = req.body;
      const userId = req.user?.id || req.userId;
      const report = await trafficAccidentService.addInsuranceInfo(id, parseInt(vehicleIndex), insuranceData, userId);
      res.status(200).json({
        success: true,
        message: 'تم إضافة معلومات التأمين بنجاح',
        data: report
      });
    } catch (error) {
      logger.error('Error adding insurance info', {
        error: error.message
      });
      res.status(500).json({
        success: false,
        message: error.message
      });
    }
  }

  /**
   * DETERMINE LIABILITY - تحديد المسؤولية
   */
  async determineLiability(req, res) {
    try {
      const {
        id
      } = req.params;
      const {
        primaryResponsiblePartyId,
        responsibilityPercentage,
        determination
      } = req.body;
      const userId = req.user?.id || req.userId;
      const report = await trafficAccidentService.determineLiability(id, primaryResponsiblePartyId, responsibilityPercentage, determination, userId);
      res.status(200).json({
        success: true,
        message: 'تم تحديد المسؤولية بنجاح',
        data: report
      });
    } catch (error) {
      logger.error('Error determining liability', {
        error: error.message
      });
      res.status(500).json({
        success: false,
        message: error.message
      });
    }
  }

  /**
   * CLOSE REPORT - إغلاق التقرير
   */
  async closeReport(req, res) {
    try {
      const {
        id
      } = req.params;
      const conclusionData = req.body;
      const userId = req.user?.id || req.userId;
      const report = await trafficAccidentService.closeReport(id, conclusionData, userId);
      res.status(200).json({
        success: true,
        message: 'تم إغلاق التقرير بنجاح',
        data: report
      });
    } catch (error) {
      logger.error('Error closing report', {
        error: error.message
      });
      res.status(500).json({
        success: false,
        message: error.message
      });
    }
  }

  /**
   * STATISTICS - الحصول على الإحصائيات
   */
  async getStatistics(req, res) {
    try {
      const {
        startDate,
        endDate,
        city,
        severity,
        status
      } = req.query;
      const filters = {};
      if (startDate) filters.startDate = startDate;
      if (endDate) filters.endDate = endDate;
      if (city) filters.city = city;
      if (severity) filters.severity = severity;
      if (status) filters.status = status;
      const statistics = await trafficAccidentService.getStatistics(filters);
      res.status(200).json({
        success: true,
        data: statistics
      });
    } catch (error) {
      logger.error('Error fetching statistics', {
        error: error.message
      });
      res.status(500).json({
        success: false,
        message: error.message
      });
    }
  }

  /**
   * SEARCH - البحث المتقدم
   */
  async searchReports(req, res) {
    try {
      const {
        q,
        severity,
        status,
        page = 1,
        limit = 20
      } = req.query;
      if (!q) {
        return res.status(400).json({
          success: false,
          message: 'معيار البحث مطلوب'
        });
      }
      const filters = {};
      if (severity) filters.severity = severity;
      if (status) filters.status = status;
      const result = await trafficAccidentService.searchReports(q, filters, parseInt(page), parseInt(limit));
      res.status(200).json({
        success: true,
        ...result
      });
    } catch (error) {
      logger.error('Error searching reports', {
        error: error.message
      });
      res.status(500).json({
        success: false,
        message: error.message
      });
    }
  }

  /**
   * NEARBY ACCIDENTS - الحوادث القريبة
   */
  async getNearbyAccidents(req, res) {
    try {
      const {
        latitude,
        longitude,
        maxDistance = 5000
      } = req.query;
      if (!latitude || !longitude) {
        return res.status(400).json({
          success: false,
          message: 'الإحداثيات (latitude, longitude) مطلوبة'
        });
      }
      const accidents = await trafficAccidentService.getNearbyAccidents(parseFloat(latitude), parseFloat(longitude), parseInt(maxDistance));
      res.status(200).json({
        success: true,
        data: accidents
      });
    } catch (error) {
      logger.error('Error fetching nearby accidents', {
        error: error.message
      });
      res.status(500).json({
        success: false,
        message: error.message
      });
    }
  }

  /**
   * OVERDUE FOLLOW-UPS - المتابعات المتأخرة
   */
  async getOverdueFollowUps(req, res) {
    try {
      const {
        daysThreshold = 30
      } = req.query;
      const reports = await trafficAccidentService.getOverdueFollowUps(parseInt(daysThreshold));
      res.status(200).json({
        success: true,
        count: reports.length,
        data: reports
      });
    } catch (error) {
      logger.error('Error fetching overdue follow-ups', {
        error: error.message
      });
      res.status(500).json({
        success: false,
        message: error.message
      });
    }
  }

  /**
   * UPDATE DAMAGE INFO - تحديث معلومات الضرر
   */
  async updateDamageInfo(req, res) {
    try {
      const {
        id,
        vehicleIndex
      } = req.params;
      const damageData = req.body;
      const userId = req.user?.id || req.userId;
      const report = await trafficAccidentService.updateDamageInfo(id, parseInt(vehicleIndex), damageData, userId);
      res.status(200).json({
        success: true,
        message: 'تم تحديث معلومات الضرر بنجاح',
        data: report
      });
    } catch (error) {
      logger.error('Error updating damage info', {
        error: error.message
      });
      res.status(500).json({
        success: false,
        message: error.message
      });
    }
  }

  /**
   * EXPORT PDF - تصدير PDF
   */
  async exportPDF(req, res) {
    try {
      const {
        id
      } = req.params;
      const pdfDoc = await trafficAccidentService.generatePDFReport(id, true);
      res.setHeader('Content-Type', 'application/pdf');
      res.setHeader('Content-Disposition', `attachment; filename="accident-report-${id}.pdf"`);
      pdfDoc.pipe(res);
      pdfDoc.end();
    } catch (error) {
      logger.error('Error exporting PDF', {
        error: error.message
      });
      res.status(500).json({
        success: false,
        message: error.message
      });
    }
  }

  /**
   * EXPORT EXCEL - تصدير Excel
   */
  async exportExcel(req, res) {
    try {
      const {
        startDate,
        endDate,
        city,
        severity
      } = req.query;
      const filters = {};
      if (startDate) filters.startDate = startDate;
      if (endDate) filters.endDate = endDate;
      if (city) filters.city = city;
      if (severity) filters.severity = severity;
      const workbook = await trafficAccidentService.generateExcelReport(filters);
      res.setHeader('Content-Type', 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet');
      res.setHeader('Content-Disposition', 'attachment; filename="accident-reports.xlsx"');
      workbook.write(res);
      res.end();
    } catch (error) {
      logger.error('Error exporting Excel', {
        error: error.message
      });
      res.status(500).json({
        success: false,
        message: error.message
      });
    }
  }
}
module.exports = new TrafficAccidentController();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ0cmFmZmljQWNjaWRlbnRTZXJ2aWNlIiwicmVxdWlyZSIsImxvZ2dlciIsIlRyYWZmaWNBY2NpZGVudENvbnRyb2xsZXIiLCJjcmVhdGVBY2NpZGVudFJlcG9ydCIsInJlcSIsInJlcyIsImFjY2lkZW50RGF0YSIsImJvZHkiLCJ1c2VySWQiLCJ1c2VyIiwiaWQiLCJzdGF0dXMiLCJqc29uIiwic3VjY2VzcyIsIm1lc3NhZ2UiLCJyZXBvcnQiLCJkYXRhIiwiZXJyb3IiLCJnZXRBbGxSZXBvcnRzIiwic2V2ZXJpdHkiLCJjaXR5IiwicHJpb3JpdHkiLCJzdGFydERhdGUiLCJlbmREYXRlIiwicGFnZSIsImxpbWl0IiwicXVlcnkiLCJmaWx0ZXJzIiwiT2JqZWN0Iiwia2V5cyIsImZvckVhY2giLCJrZXkiLCJ1bmRlZmluZWQiLCJyZXN1bHQiLCJwYXJzZUludCIsImdldFJlcG9ydEJ5SWQiLCJwYXJhbXMiLCJyZWNvcmRWaWV3SGlzdG9yeSIsInVwZGF0ZUFjY2lkZW50UmVwb3J0IiwidXBkYXRlRGF0YSIsImRlbGV0ZUFjY2lkZW50UmVwb3J0IiwicmVhc29uIiwidXBkYXRlUmVwb3J0U3RhdHVzIiwibm90ZXMiLCJzdGFydEludmVzdGlnYXRpb24iLCJpbnZlc3RpZ2F0aW5nT2ZmaWNlcklkIiwiY29tcGxldGVJbnZlc3RpZ2F0aW9uIiwiZmluZGluZ3MiLCJyb290Q2F1c2UiLCJjb250cmlidXRpbmdGYWN0b3JzIiwicmVjb21tZW5kYXRpb25zIiwicHJpbWFyeUNhdXNlIiwiYWRkQ29tbWVudCIsImNvbW1lbnQiLCJhdHRhY2htZW50cyIsInVzZXJOYW1lIiwibmFtZSIsImFkZFdpdG5lc3MiLCJ3aXRuZXNzRGF0YSIsInBob25lIiwiYWRkQXR0YWNobWVudCIsImZpbGVOYW1lIiwiZmlsZVVybCIsImZpbGVUeXBlIiwiYWRkSW5zdXJhbmNlSW5mbyIsInZlaGljbGVJbmRleCIsImluc3VyYW5jZURhdGEiLCJkZXRlcm1pbmVMaWFiaWxpdHkiLCJwcmltYXJ5UmVzcG9uc2libGVQYXJ0eUlkIiwicmVzcG9uc2liaWxpdHlQZXJjZW50YWdlIiwiZGV0ZXJtaW5hdGlvbiIsImNsb3NlUmVwb3J0IiwiY29uY2x1c2lvbkRhdGEiLCJnZXRTdGF0aXN0aWNzIiwic3RhdGlzdGljcyIsInNlYXJjaFJlcG9ydHMiLCJxIiwiZ2V0TmVhcmJ5QWNjaWRlbnRzIiwibGF0aXR1ZGUiLCJsb25naXR1ZGUiLCJtYXhEaXN0YW5jZSIsImFjY2lkZW50cyIsInBhcnNlRmxvYXQiLCJnZXRPdmVyZHVlRm9sbG93VXBzIiwiZGF5c1RocmVzaG9sZCIsInJlcG9ydHMiLCJjb3VudCIsImxlbmd0aCIsInVwZGF0ZURhbWFnZUluZm8iLCJkYW1hZ2VEYXRhIiwiZXhwb3J0UERGIiwicGRmRG9jIiwiZ2VuZXJhdGVQREZSZXBvcnQiLCJzZXRIZWFkZXIiLCJwaXBlIiwiZW5kIiwiZXhwb3J0RXhjZWwiLCJ3b3JrYm9vayIsImdlbmVyYXRlRXhjZWxSZXBvcnQiLCJ3cml0ZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlcyI6WyJ0cmFmZmljQWNjaWRlbnRDb250cm9sbGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBUcmFmZmljIEFjY2lkZW50IENvbnRyb2xsZXIgLSDYqtit2YPZhSDYp9mE2K3ZiNin2K/YqyDYp9mE2YXYsdmI2LHZitipXHJcbiAqINmF2LnYp9mE2Kwg2LfZhNio2KfYqiBBUEkg2YTYqtmC2KfYsdmK2LEg2KfZhNit2YjYp9iv2Ksg2KfZhNmF2LHZiNix2YrYqVxyXG4gKi9cclxuXHJcbmNvbnN0IHRyYWZmaWNBY2NpZGVudFNlcnZpY2UgPSByZXF1aXJlKCcuLi9zZXJ2aWNlcy90cmFmZmljQWNjaWRlbnRTZXJ2aWNlJyk7XHJcbmNvbnN0IGxvZ2dlciA9IHJlcXVpcmUoJy4uL3V0aWxzL2xvZ2dlcicpO1xyXG5cclxuY2xhc3MgVHJhZmZpY0FjY2lkZW50Q29udHJvbGxlciB7XHJcbiAgLyoqXHJcbiAgICogQ1JFQVRFIC0g2KXZhti02KfYoSDYqtmC2LHZitixINit2KfYr9irINis2K/ZitivXHJcbiAgICovXHJcbiAgYXN5bmMgY3JlYXRlQWNjaWRlbnRSZXBvcnQocmVxLCByZXMpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHsgYWNjaWRlbnREYXRhIH0gPSByZXEuYm9keTtcclxuICAgICAgY29uc3QgdXNlcklkID0gcmVxLnVzZXI/LmlkIHx8IHJlcS51c2VySWQ7XHJcblxyXG4gICAgICBpZiAoIWFjY2lkZW50RGF0YSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XHJcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgIG1lc3NhZ2U6ICfYqNmK2KfZhtin2Kog2KfZhNit2KfYr9irINmF2LfZhNmI2KjYqSdcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgcmVwb3J0ID0gYXdhaXQgdHJhZmZpY0FjY2lkZW50U2VydmljZS5jcmVhdGVBY2NpZGVudFJlcG9ydChcclxuICAgICAgICBhY2NpZGVudERhdGEsXHJcbiAgICAgICAgdXNlcklkXHJcbiAgICAgICk7XHJcblxyXG4gICAgICByZXMuc3RhdHVzKDIwMSkuanNvbih7XHJcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICBtZXNzYWdlOiAn2KrZhSDYpdmG2LTYp9ihINin2YTYqtmC2LHZitixINio2YbYrNin2K0nLFxyXG4gICAgICAgIGRhdGE6IHJlcG9ydFxyXG4gICAgICB9KTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGxvZ2dlci5lcnJvcignRXJyb3IgY3JlYXRpbmcgYWNjaWRlbnQgcmVwb3J0Jywge1xyXG4gICAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlXHJcbiAgICAgIH0pO1xyXG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XHJcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdFVCBBTEwgLSDYp9mE2K3YtdmI2YQg2LnZhNmJINis2YXZiti5INin2YTYqtmC2KfYsdmK2LFcclxuICAgKi9cclxuICBhc3luYyBnZXRBbGxSZXBvcnRzKHJlcSwgcmVzKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCB7XHJcbiAgICAgICAgc3RhdHVzLFxyXG4gICAgICAgIHNldmVyaXR5LFxyXG4gICAgICAgIGNpdHksXHJcbiAgICAgICAgcHJpb3JpdHksXHJcbiAgICAgICAgc3RhcnREYXRlLFxyXG4gICAgICAgIGVuZERhdGUsXHJcbiAgICAgICAgcGFnZSA9IDEsXHJcbiAgICAgICAgbGltaXQgPSAyMFxyXG4gICAgICB9ID0gcmVxLnF1ZXJ5O1xyXG5cclxuICAgICAgY29uc3QgZmlsdGVycyA9IHtcclxuICAgICAgICBzdGF0dXMsXHJcbiAgICAgICAgc2V2ZXJpdHksXHJcbiAgICAgICAgY2l0eSxcclxuICAgICAgICBwcmlvcml0eSxcclxuICAgICAgICBzdGFydERhdGUsXHJcbiAgICAgICAgZW5kRGF0ZVxyXG4gICAgICB9O1xyXG5cclxuICAgICAgLy8gUmVtb3ZlIHVuZGVmaW5lZCBmaWx0ZXJzXHJcbiAgICAgIE9iamVjdC5rZXlzKGZpbHRlcnMpLmZvckVhY2goa2V5ID0+XHJcbiAgICAgICAgZmlsdGVyc1trZXldID09PSB1bmRlZmluZWQgJiYgZGVsZXRlIGZpbHRlcnNba2V5XVxyXG4gICAgICApO1xyXG5cclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdHJhZmZpY0FjY2lkZW50U2VydmljZS5nZXRBbGxSZXBvcnRzKFxyXG4gICAgICAgIGZpbHRlcnMsXHJcbiAgICAgICAgcGFyc2VJbnQocGFnZSksXHJcbiAgICAgICAgcGFyc2VJbnQobGltaXQpXHJcbiAgICAgICk7XHJcblxyXG4gICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7XHJcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICAuLi5yZXN1bHRcclxuICAgICAgfSk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGFjY2lkZW50IHJlcG9ydHMnLCB7XHJcbiAgICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2VcclxuICAgICAgfSk7XHJcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR0VUIE9ORSAtINin2YTYrdi12YjZhCDYudmE2Ykg2KrZgtix2YrYsSDZhdit2K/Yr1xyXG4gICAqL1xyXG4gIGFzeW5jIGdldFJlcG9ydEJ5SWQocmVxLCByZXMpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHsgaWQgfSA9IHJlcS5wYXJhbXM7XHJcbiAgICAgIGNvbnN0IHVzZXJJZCA9IHJlcS51c2VyPy5pZCB8fCByZXEudXNlcklkO1xyXG5cclxuICAgICAgY29uc3QgcmVwb3J0ID0gYXdhaXQgdHJhZmZpY0FjY2lkZW50U2VydmljZS5nZXRSZXBvcnRCeUlkKGlkKTtcclxuXHJcbiAgICAgIC8vIFJlY29yZCB2aWV3IGhpc3RvcnlcclxuICAgICAgYXdhaXQgdHJhZmZpY0FjY2lkZW50U2VydmljZS5yZWNvcmRWaWV3SGlzdG9yeShpZCwgdXNlcklkKTtcclxuXHJcbiAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcclxuICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgIGRhdGE6IHJlcG9ydFxyXG4gICAgICB9KTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGxvZ2dlci5lcnJvcignRXJyb3IgZmV0Y2hpbmcgYWNjaWRlbnQgcmVwb3J0Jywge1xyXG4gICAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlXHJcbiAgICAgIH0pO1xyXG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XHJcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFVQREFURSAtINiq2K3Yr9mK2Ksg2KrZgtix2YrYsSDYp9mE2K3Yp9iv2KtcclxuICAgKi9cclxuICBhc3luYyB1cGRhdGVBY2NpZGVudFJlcG9ydChyZXEsIHJlcykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgeyBpZCB9ID0gcmVxLnBhcmFtcztcclxuICAgICAgY29uc3QgeyB1cGRhdGVEYXRhIH0gPSByZXEuYm9keTtcclxuICAgICAgY29uc3QgdXNlcklkID0gcmVxLnVzZXI/LmlkIHx8IHJlcS51c2VySWQ7XHJcblxyXG4gICAgICBpZiAoIXVwZGF0ZURhdGEpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xyXG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICBtZXNzYWdlOiAn2KjZitin2YbYp9iqINin2YTYqtit2K/ZitirINmF2LfZhNmI2KjYqSdcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgcmVwb3J0ID0gYXdhaXQgdHJhZmZpY0FjY2lkZW50U2VydmljZS51cGRhdGVBY2NpZGVudFJlcG9ydChcclxuICAgICAgICBpZCxcclxuICAgICAgICB1cGRhdGVEYXRhLFxyXG4gICAgICAgIHVzZXJJZFxyXG4gICAgICApO1xyXG5cclxuICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oe1xyXG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgbWVzc2FnZTogJ9iq2YUg2KrYrdiv2YrYqyDYp9mE2KrZgtix2YrYsSDYqNmG2KzYp9itJyxcclxuICAgICAgICBkYXRhOiByZXBvcnRcclxuICAgICAgfSk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIGFjY2lkZW50IHJlcG9ydCcsIHtcclxuICAgICAgICBlcnJvcjogZXJyb3IubWVzc2FnZVxyXG4gICAgICB9KTtcclxuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2VcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBERUxFVEUgLSDYrdiw2YEv2KPYsdi02YHYqSDYqtmC2LHZitixXHJcbiAgICovXHJcbiAgYXN5bmMgZGVsZXRlQWNjaWRlbnRSZXBvcnQocmVxLCByZXMpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHsgaWQgfSA9IHJlcS5wYXJhbXM7XHJcbiAgICAgIGNvbnN0IHsgcmVhc29uIH0gPSByZXEuYm9keTtcclxuICAgICAgY29uc3QgdXNlcklkID0gcmVxLnVzZXI/LmlkIHx8IHJlcS51c2VySWQ7XHJcblxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0cmFmZmljQWNjaWRlbnRTZXJ2aWNlLmRlbGV0ZUFjY2lkZW50UmVwb3J0KFxyXG4gICAgICAgIGlkLFxyXG4gICAgICAgIHVzZXJJZCxcclxuICAgICAgICByZWFzb25cclxuICAgICAgKTtcclxuXHJcbiAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcclxuICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgIG1lc3NhZ2U6IHJlc3VsdC5tZXNzYWdlXHJcbiAgICAgIH0pO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciBkZWxldGluZyBhY2NpZGVudCByZXBvcnQnLCB7XHJcbiAgICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2VcclxuICAgICAgfSk7XHJcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVVBEQVRFIFNUQVRVUyAtINiq2K3Yr9mK2Ksg2K3Yp9mE2Kkg2KfZhNiq2YLYsdmK2LFcclxuICAgKi9cclxuICBhc3luYyB1cGRhdGVSZXBvcnRTdGF0dXMocmVxLCByZXMpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHsgaWQgfSA9IHJlcS5wYXJhbXM7XHJcbiAgICAgIGNvbnN0IHsgc3RhdHVzLCBub3RlcyB9ID0gcmVxLmJvZHk7XHJcbiAgICAgIGNvbnN0IHVzZXJJZCA9IHJlcS51c2VyPy5pZCB8fCByZXEudXNlcklkO1xyXG5cclxuICAgICAgaWYgKCFzdGF0dXMpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xyXG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICBtZXNzYWdlOiAn2KfZhNit2KfZhNipINmF2LfZhNmI2KjYqSdcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgcmVwb3J0ID0gYXdhaXQgdHJhZmZpY0FjY2lkZW50U2VydmljZS51cGRhdGVSZXBvcnRTdGF0dXMoXHJcbiAgICAgICAgaWQsXHJcbiAgICAgICAgc3RhdHVzLFxyXG4gICAgICAgIHVzZXJJZCxcclxuICAgICAgICBub3Rlc1xyXG4gICAgICApO1xyXG5cclxuICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oe1xyXG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgbWVzc2FnZTogJ9iq2YUg2KrYrdiv2YrYqyDYp9mE2K3Yp9mE2Kkg2KjZhtis2KfYrScsXHJcbiAgICAgICAgZGF0YTogcmVwb3J0XHJcbiAgICAgIH0pO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciB1cGRhdGluZyByZXBvcnQgc3RhdHVzJywge1xyXG4gICAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlXHJcbiAgICAgIH0pO1xyXG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XHJcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFNUQVJUIElOVkVTVElHQVRJT04gLSDYqNiv2KEg2KfZhNiq2K3ZgtmK2YJcclxuICAgKi9cclxuICBhc3luYyBzdGFydEludmVzdGlnYXRpb24ocmVxLCByZXMpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHsgaWQgfSA9IHJlcS5wYXJhbXM7XHJcbiAgICAgIGNvbnN0IHsgaW52ZXN0aWdhdGluZ09mZmljZXJJZCB9ID0gcmVxLmJvZHk7XHJcbiAgICAgIGNvbnN0IHVzZXJJZCA9IHJlcS51c2VyPy5pZCB8fCByZXEudXNlcklkO1xyXG5cclxuICAgICAgaWYgKCFpbnZlc3RpZ2F0aW5nT2ZmaWNlcklkKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcclxuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgbWVzc2FnZTogJ9mF2LnYsdmBINin2YTZhdit2YLZgiDZhdi32YTZiNioJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCByZXBvcnQgPSBhd2FpdCB0cmFmZmljQWNjaWRlbnRTZXJ2aWNlLnN0YXJ0SW52ZXN0aWdhdGlvbihcclxuICAgICAgICBpZCxcclxuICAgICAgICBpbnZlc3RpZ2F0aW5nT2ZmaWNlcklkLFxyXG4gICAgICAgIHVzZXJJZFxyXG4gICAgICApO1xyXG5cclxuICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oe1xyXG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgbWVzc2FnZTogJ9iq2YUg2KjYr9ihINin2YTYqtit2YLZitmCINio2YbYrNin2K0nLFxyXG4gICAgICAgIGRhdGE6IHJlcG9ydFxyXG4gICAgICB9KTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGxvZ2dlci5lcnJvcignRXJyb3Igc3RhcnRpbmcgaW52ZXN0aWdhdGlvbicsIHtcclxuICAgICAgICBlcnJvcjogZXJyb3IubWVzc2FnZVxyXG4gICAgICB9KTtcclxuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2VcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDT01QTEVURSBJTlZFU1RJR0FUSU9OIC0g2KXZg9mF2KfZhCDYp9mE2KrYrdmC2YrZglxyXG4gICAqL1xyXG4gIGFzeW5jIGNvbXBsZXRlSW52ZXN0aWdhdGlvbihyZXEsIHJlcykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgeyBpZCB9ID0gcmVxLnBhcmFtcztcclxuICAgICAgY29uc3QgeyBmaW5kaW5ncywgcm9vdENhdXNlLCBjb250cmlidXRpbmdGYWN0b3JzLCByZWNvbW1lbmRhdGlvbnMsIHByaW1hcnlDYXVzZSB9ID0gcmVxLmJvZHk7XHJcbiAgICAgIGNvbnN0IHVzZXJJZCA9IHJlcS51c2VyPy5pZCB8fCByZXEudXNlcklkO1xyXG5cclxuICAgICAgaWYgKCFmaW5kaW5ncyB8fCAhcm9vdENhdXNlKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcclxuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgbWVzc2FnZTogJ9in2YTZhtiq2KfYptisINmI2KfZhNiz2KjYqCDYp9mE2KPYs9in2LPZiiDZhdi32YTZiNio2KfZhidcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgcmVwb3J0ID0gYXdhaXQgdHJhZmZpY0FjY2lkZW50U2VydmljZS5jb21wbGV0ZUludmVzdGlnYXRpb24oXHJcbiAgICAgICAgaWQsXHJcbiAgICAgICAgeyBmaW5kaW5ncywgcm9vdENhdXNlLCBjb250cmlidXRpbmdGYWN0b3JzLCByZWNvbW1lbmRhdGlvbnMsIHByaW1hcnlDYXVzZSB9LFxyXG4gICAgICAgIHVzZXJJZFxyXG4gICAgICApO1xyXG5cclxuICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oe1xyXG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgbWVzc2FnZTogJ9iq2YUg2KXZg9mF2KfZhCDYp9mE2KrYrdmC2YrZgiDYqNmG2KzYp9itJyxcclxuICAgICAgICBkYXRhOiByZXBvcnRcclxuICAgICAgfSk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIGNvbXBsZXRpbmcgaW52ZXN0aWdhdGlvbicsIHtcclxuICAgICAgICBlcnJvcjogZXJyb3IubWVzc2FnZVxyXG4gICAgICB9KTtcclxuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2VcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBBREQgQ09NTUVOVCAtINil2LbYp9mB2Kkg2KrYudmE2YrZglxyXG4gICAqL1xyXG4gIGFzeW5jIGFkZENvbW1lbnQocmVxLCByZXMpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHsgaWQgfSA9IHJlcS5wYXJhbXM7XHJcbiAgICAgIGNvbnN0IHsgY29tbWVudCwgYXR0YWNobWVudHMgfSA9IHJlcS5ib2R5O1xyXG4gICAgICBjb25zdCB1c2VySWQgPSByZXEudXNlcj8uaWQgfHwgcmVxLnVzZXJJZDtcclxuICAgICAgY29uc3QgdXNlck5hbWUgPSByZXEudXNlcj8ubmFtZSB8fCAnVW5rbm93bic7XHJcblxyXG4gICAgICBpZiAoIWNvbW1lbnQpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xyXG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICBtZXNzYWdlOiAn2KfZhNiq2LnZhNmK2YIg2YXYt9mE2YjYqCdcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgcmVwb3J0ID0gYXdhaXQgdHJhZmZpY0FjY2lkZW50U2VydmljZS5hZGRDb21tZW50KFxyXG4gICAgICAgIGlkLFxyXG4gICAgICAgIHVzZXJJZCxcclxuICAgICAgICB1c2VyTmFtZSxcclxuICAgICAgICBjb21tZW50LFxyXG4gICAgICAgIGF0dGFjaG1lbnRzXHJcbiAgICAgICk7XHJcblxyXG4gICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7XHJcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICBtZXNzYWdlOiAn2KrZhSDYpdi22KfZgdipINin2YTYqti52YTZitmCINio2YbYrNin2K0nLFxyXG4gICAgICAgIGRhdGE6IHJlcG9ydFxyXG4gICAgICB9KTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGxvZ2dlci5lcnJvcignRXJyb3IgYWRkaW5nIGNvbW1lbnQnLCB7IGVycm9yOiBlcnJvci5tZXNzYWdlIH0pO1xyXG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XHJcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEFERCBXSVRORVNTIC0g2KXYttin2YHYqSDYtNin2YfYr1xyXG4gICAqL1xyXG4gIGFzeW5jIGFkZFdpdG5lc3MocmVxLCByZXMpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHsgaWQgfSA9IHJlcS5wYXJhbXM7XHJcbiAgICAgIGNvbnN0IHdpdG5lc3NEYXRhID0gcmVxLmJvZHk7XHJcbiAgICAgIGNvbnN0IHVzZXJJZCA9IHJlcS51c2VyPy5pZCB8fCByZXEudXNlcklkO1xyXG5cclxuICAgICAgaWYgKCF3aXRuZXNzRGF0YS5uYW1lIHx8ICF3aXRuZXNzRGF0YS5waG9uZSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XHJcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgIG1lc3NhZ2U6ICfYp9mE2KfYs9mFINmI2KfZhNmH2KfYqtmBINmF2LfZhNmI2KjYp9mGJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCByZXBvcnQgPSBhd2FpdCB0cmFmZmljQWNjaWRlbnRTZXJ2aWNlLmFkZFdpdG5lc3MoXHJcbiAgICAgICAgaWQsXHJcbiAgICAgICAgd2l0bmVzc0RhdGEsXHJcbiAgICAgICAgdXNlcklkXHJcbiAgICAgICk7XHJcblxyXG4gICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7XHJcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICBtZXNzYWdlOiAn2KrZhSDYpdi22KfZgdipINin2YTYtNin2YfYryDYqNmG2KzYp9itJyxcclxuICAgICAgICBkYXRhOiByZXBvcnRcclxuICAgICAgfSk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIGFkZGluZyB3aXRuZXNzJywgeyBlcnJvcjogZXJyb3IubWVzc2FnZSB9KTtcclxuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2VcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBBREQgQVRUQUNITUVOVCAtINil2LbYp9mB2Kkg2YXYsdmB2YJcclxuICAgKi9cclxuICBhc3luYyBhZGRBdHRhY2htZW50KHJlcSwgcmVzKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCB7IGlkIH0gPSByZXEucGFyYW1zO1xyXG4gICAgICBjb25zdCB7IGZpbGVOYW1lLCBmaWxlVXJsLCBmaWxlVHlwZSB9ID0gcmVxLmJvZHk7XHJcbiAgICAgIGNvbnN0IHVzZXJJZCA9IHJlcS51c2VyPy5pZCB8fCByZXEudXNlcklkO1xyXG5cclxuICAgICAgaWYgKCFmaWxlTmFtZSB8fCAhZmlsZVVybCkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XHJcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgIG1lc3NhZ2U6ICfYp9iz2YUg2KfZhNmF2YTZgSDZiNin2YTYsdin2KjYtyDZhdi32YTZiNio2KfZhidcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgcmVwb3J0ID0gYXdhaXQgdHJhZmZpY0FjY2lkZW50U2VydmljZS5hZGRBdHRhY2htZW50KFxyXG4gICAgICAgIGlkLFxyXG4gICAgICAgIHsgZmlsZU5hbWUsIGZpbGVVcmwsIGZpbGVUeXBlIH0sXHJcbiAgICAgICAgdXNlcklkXHJcbiAgICAgICk7XHJcblxyXG4gICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7XHJcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICBtZXNzYWdlOiAn2KrZhSDYpdi22KfZgdipINin2YTZhdix2YHZgiDYqNmG2KzYp9itJyxcclxuICAgICAgICBkYXRhOiByZXBvcnRcclxuICAgICAgfSk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIGFkZGluZyBhdHRhY2htZW50JywgeyBlcnJvcjogZXJyb3IubWVzc2FnZSB9KTtcclxuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2VcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBBREQgSU5TVVJBTkNFIElORk8gLSDYpdi22KfZgdipINmF2LnZhNmI2YXYp9iqINin2YTYqtij2YXZitmGXHJcbiAgICovXHJcbiAgYXN5bmMgYWRkSW5zdXJhbmNlSW5mbyhyZXEsIHJlcykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgeyBpZCwgdmVoaWNsZUluZGV4IH0gPSByZXEucGFyYW1zO1xyXG4gICAgICBjb25zdCBpbnN1cmFuY2VEYXRhID0gcmVxLmJvZHk7XHJcbiAgICAgIGNvbnN0IHVzZXJJZCA9IHJlcS51c2VyPy5pZCB8fCByZXEudXNlcklkO1xyXG5cclxuICAgICAgY29uc3QgcmVwb3J0ID0gYXdhaXQgdHJhZmZpY0FjY2lkZW50U2VydmljZS5hZGRJbnN1cmFuY2VJbmZvKFxyXG4gICAgICAgIGlkLFxyXG4gICAgICAgIHBhcnNlSW50KHZlaGljbGVJbmRleCksXHJcbiAgICAgICAgaW5zdXJhbmNlRGF0YSxcclxuICAgICAgICB1c2VySWRcclxuICAgICAgKTtcclxuXHJcbiAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcclxuICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgIG1lc3NhZ2U6ICfYqtmFINil2LbYp9mB2Kkg2YXYudmE2YjZhdin2Kog2KfZhNiq2KPZhdmK2YYg2KjZhtis2KfYrScsXHJcbiAgICAgICAgZGF0YTogcmVwb3J0XHJcbiAgICAgIH0pO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciBhZGRpbmcgaW5zdXJhbmNlIGluZm8nLCB7IGVycm9yOiBlcnJvci5tZXNzYWdlIH0pO1xyXG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XHJcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIERFVEVSTUlORSBMSUFCSUxJVFkgLSDYqtit2K/ZitivINin2YTZhdiz2KTZiNmE2YrYqVxyXG4gICAqL1xyXG4gIGFzeW5jIGRldGVybWluZUxpYWJpbGl0eShyZXEsIHJlcykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgeyBpZCB9ID0gcmVxLnBhcmFtcztcclxuICAgICAgY29uc3Qge1xyXG4gICAgICAgIHByaW1hcnlSZXNwb25zaWJsZVBhcnR5SWQsXHJcbiAgICAgICAgcmVzcG9uc2liaWxpdHlQZXJjZW50YWdlLFxyXG4gICAgICAgIGRldGVybWluYXRpb25cclxuICAgICAgfSA9IHJlcS5ib2R5O1xyXG4gICAgICBjb25zdCB1c2VySWQgPSByZXEudXNlcj8uaWQgfHwgcmVxLnVzZXJJZDtcclxuXHJcbiAgICAgIGNvbnN0IHJlcG9ydCA9IGF3YWl0IHRyYWZmaWNBY2NpZGVudFNlcnZpY2UuZGV0ZXJtaW5lTGlhYmlsaXR5KFxyXG4gICAgICAgIGlkLFxyXG4gICAgICAgIHByaW1hcnlSZXNwb25zaWJsZVBhcnR5SWQsXHJcbiAgICAgICAgcmVzcG9uc2liaWxpdHlQZXJjZW50YWdlLFxyXG4gICAgICAgIGRldGVybWluYXRpb24sXHJcbiAgICAgICAgdXNlcklkXHJcbiAgICAgICk7XHJcblxyXG4gICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7XHJcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICBtZXNzYWdlOiAn2KrZhSDYqtit2K/ZitivINin2YTZhdiz2KTZiNmE2YrYqSDYqNmG2KzYp9itJyxcclxuICAgICAgICBkYXRhOiByZXBvcnRcclxuICAgICAgfSk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIGRldGVybWluaW5nIGxpYWJpbGl0eScsIHsgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfSk7XHJcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ0xPU0UgUkVQT1JUIC0g2KXYutmE2KfZgiDYp9mE2KrZgtix2YrYsVxyXG4gICAqL1xyXG4gIGFzeW5jIGNsb3NlUmVwb3J0KHJlcSwgcmVzKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCB7IGlkIH0gPSByZXEucGFyYW1zO1xyXG4gICAgICBjb25zdCBjb25jbHVzaW9uRGF0YSA9IHJlcS5ib2R5O1xyXG4gICAgICBjb25zdCB1c2VySWQgPSByZXEudXNlcj8uaWQgfHwgcmVxLnVzZXJJZDtcclxuXHJcbiAgICAgIGNvbnN0IHJlcG9ydCA9IGF3YWl0IHRyYWZmaWNBY2NpZGVudFNlcnZpY2UuY2xvc2VSZXBvcnQoXHJcbiAgICAgICAgaWQsXHJcbiAgICAgICAgY29uY2x1c2lvbkRhdGEsXHJcbiAgICAgICAgdXNlcklkXHJcbiAgICAgICk7XHJcblxyXG4gICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7XHJcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICBtZXNzYWdlOiAn2KrZhSDYpdi62YTYp9mCINin2YTYqtmC2LHZitixINio2YbYrNin2K0nLFxyXG4gICAgICAgIGRhdGE6IHJlcG9ydFxyXG4gICAgICB9KTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGxvZ2dlci5lcnJvcignRXJyb3IgY2xvc2luZyByZXBvcnQnLCB7IGVycm9yOiBlcnJvci5tZXNzYWdlIH0pO1xyXG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XHJcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFNUQVRJU1RJQ1MgLSDYp9mE2K3YtdmI2YQg2LnZhNmJINin2YTYpdit2LXYp9im2YrYp9iqXHJcbiAgICovXHJcbiAgYXN5bmMgZ2V0U3RhdGlzdGljcyhyZXEsIHJlcykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgeyBzdGFydERhdGUsIGVuZERhdGUsIGNpdHksIHNldmVyaXR5LCBzdGF0dXMgfSA9IHJlcS5xdWVyeTtcclxuXHJcbiAgICAgIGNvbnN0IGZpbHRlcnMgPSB7fTtcclxuICAgICAgaWYgKHN0YXJ0RGF0ZSkgZmlsdGVycy5zdGFydERhdGUgPSBzdGFydERhdGU7XHJcbiAgICAgIGlmIChlbmREYXRlKSBmaWx0ZXJzLmVuZERhdGUgPSBlbmREYXRlO1xyXG4gICAgICBpZiAoY2l0eSkgZmlsdGVycy5jaXR5ID0gY2l0eTtcclxuICAgICAgaWYgKHNldmVyaXR5KSBmaWx0ZXJzLnNldmVyaXR5ID0gc2V2ZXJpdHk7XHJcbiAgICAgIGlmIChzdGF0dXMpIGZpbHRlcnMuc3RhdHVzID0gc3RhdHVzO1xyXG5cclxuICAgICAgY29uc3Qgc3RhdGlzdGljcyA9IGF3YWl0IHRyYWZmaWNBY2NpZGVudFNlcnZpY2UuZ2V0U3RhdGlzdGljcyhmaWx0ZXJzKTtcclxuXHJcbiAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcclxuICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgIGRhdGE6IHN0YXRpc3RpY3NcclxuICAgICAgfSk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHN0YXRpc3RpY3MnLCB7IGVycm9yOiBlcnJvci5tZXNzYWdlIH0pO1xyXG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XHJcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFNFQVJDSCAtINin2YTYqNit2Ksg2KfZhNmF2KrZgtiv2YVcclxuICAgKi9cclxuICBhc3luYyBzZWFyY2hSZXBvcnRzKHJlcSwgcmVzKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCB7IHEsIHNldmVyaXR5LCBzdGF0dXMsIHBhZ2UgPSAxLCBsaW1pdCA9IDIwIH0gPSByZXEucXVlcnk7XHJcblxyXG4gICAgICBpZiAoIXEpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xyXG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICBtZXNzYWdlOiAn2YXYudmK2KfYsSDYp9mE2KjYrdirINmF2LfZhNmI2KgnXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IGZpbHRlcnMgPSB7fTtcclxuICAgICAgaWYgKHNldmVyaXR5KSBmaWx0ZXJzLnNldmVyaXR5ID0gc2V2ZXJpdHk7XHJcbiAgICAgIGlmIChzdGF0dXMpIGZpbHRlcnMuc3RhdHVzID0gc3RhdHVzO1xyXG5cclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdHJhZmZpY0FjY2lkZW50U2VydmljZS5zZWFyY2hSZXBvcnRzKFxyXG4gICAgICAgIHEsXHJcbiAgICAgICAgZmlsdGVycyxcclxuICAgICAgICBwYXJzZUludChwYWdlKSxcclxuICAgICAgICBwYXJzZUludChsaW1pdClcclxuICAgICAgKTtcclxuXHJcbiAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcclxuICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgIC4uLnJlc3VsdFxyXG4gICAgICB9KTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGxvZ2dlci5lcnJvcignRXJyb3Igc2VhcmNoaW5nIHJlcG9ydHMnLCB7IGVycm9yOiBlcnJvci5tZXNzYWdlIH0pO1xyXG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XHJcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIE5FQVJCWSBBQ0NJREVOVFMgLSDYp9mE2K3ZiNin2K/YqyDYp9mE2YLYsdmK2KjYqVxyXG4gICAqL1xyXG4gIGFzeW5jIGdldE5lYXJieUFjY2lkZW50cyhyZXEsIHJlcykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgeyBsYXRpdHVkZSwgbG9uZ2l0dWRlLCBtYXhEaXN0YW5jZSA9IDUwMDAgfSA9IHJlcS5xdWVyeTtcclxuXHJcbiAgICAgIGlmICghbGF0aXR1ZGUgfHwgIWxvbmdpdHVkZSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XHJcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgIG1lc3NhZ2U6ICfYp9mE2KXYrdiv2KfYq9mK2KfYqiAobGF0aXR1ZGUsIGxvbmdpdHVkZSkg2YXYt9mE2YjYqNipJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBhY2NpZGVudHMgPSBhd2FpdCB0cmFmZmljQWNjaWRlbnRTZXJ2aWNlLmdldE5lYXJieUFjY2lkZW50cyhcclxuICAgICAgICBwYXJzZUZsb2F0KGxhdGl0dWRlKSxcclxuICAgICAgICBwYXJzZUZsb2F0KGxvbmdpdHVkZSksXHJcbiAgICAgICAgcGFyc2VJbnQobWF4RGlzdGFuY2UpXHJcbiAgICAgICk7XHJcblxyXG4gICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7XHJcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICBkYXRhOiBhY2NpZGVudHNcclxuICAgICAgfSk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIG5lYXJieSBhY2NpZGVudHMnLCB7XHJcbiAgICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2VcclxuICAgICAgfSk7XHJcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogT1ZFUkRVRSBGT0xMT1ctVVBTIC0g2KfZhNmF2KrYp9io2LnYp9iqINin2YTZhdiq2KPYrtix2KlcclxuICAgKi9cclxuICBhc3luYyBnZXRPdmVyZHVlRm9sbG93VXBzKHJlcSwgcmVzKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCB7IGRheXNUaHJlc2hvbGQgPSAzMCB9ID0gcmVxLnF1ZXJ5O1xyXG5cclxuICAgICAgY29uc3QgcmVwb3J0cyA9IGF3YWl0IHRyYWZmaWNBY2NpZGVudFNlcnZpY2UuZ2V0T3ZlcmR1ZUZvbGxvd1VwcyhcclxuICAgICAgICBwYXJzZUludChkYXlzVGhyZXNob2xkKVxyXG4gICAgICApO1xyXG5cclxuICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oe1xyXG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgY291bnQ6IHJlcG9ydHMubGVuZ3RoLFxyXG4gICAgICAgIGRhdGE6IHJlcG9ydHNcclxuICAgICAgfSk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIG92ZXJkdWUgZm9sbG93LXVwcycsIHtcclxuICAgICAgICBlcnJvcjogZXJyb3IubWVzc2FnZVxyXG4gICAgICB9KTtcclxuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2VcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBVUERBVEUgREFNQUdFIElORk8gLSDYqtit2K/ZitirINmF2LnZhNmI2YXYp9iqINin2YTYttix2LFcclxuICAgKi9cclxuICBhc3luYyB1cGRhdGVEYW1hZ2VJbmZvKHJlcSwgcmVzKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCB7IGlkLCB2ZWhpY2xlSW5kZXggfSA9IHJlcS5wYXJhbXM7XHJcbiAgICAgIGNvbnN0IGRhbWFnZURhdGEgPSByZXEuYm9keTtcclxuICAgICAgY29uc3QgdXNlcklkID0gcmVxLnVzZXI/LmlkIHx8IHJlcS51c2VySWQ7XHJcblxyXG4gICAgICBjb25zdCByZXBvcnQgPSBhd2FpdCB0cmFmZmljQWNjaWRlbnRTZXJ2aWNlLnVwZGF0ZURhbWFnZUluZm8oXHJcbiAgICAgICAgaWQsXHJcbiAgICAgICAgcGFyc2VJbnQodmVoaWNsZUluZGV4KSxcclxuICAgICAgICBkYW1hZ2VEYXRhLFxyXG4gICAgICAgIHVzZXJJZFxyXG4gICAgICApO1xyXG5cclxuICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oe1xyXG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgbWVzc2FnZTogJ9iq2YUg2KrYrdiv2YrYqyDZhdi52YTZiNmF2KfYqiDYp9mE2LbYsdixINio2YbYrNin2K0nLFxyXG4gICAgICAgIGRhdGE6IHJlcG9ydFxyXG4gICAgICB9KTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGxvZ2dlci5lcnJvcignRXJyb3IgdXBkYXRpbmcgZGFtYWdlIGluZm8nLCB7IGVycm9yOiBlcnJvci5tZXNzYWdlIH0pO1xyXG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XHJcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEVYUE9SVCBQREYgLSDYqti12K/ZitixIFBERlxyXG4gICAqL1xyXG4gIGFzeW5jIGV4cG9ydFBERihyZXEsIHJlcykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgeyBpZCB9ID0gcmVxLnBhcmFtcztcclxuXHJcbiAgICAgIGNvbnN0IHBkZkRvYyA9IGF3YWl0IHRyYWZmaWNBY2NpZGVudFNlcnZpY2UuZ2VuZXJhdGVQREZSZXBvcnQoaWQsIHRydWUpO1xyXG5cclxuICAgICAgcmVzLnNldEhlYWRlcignQ29udGVudC1UeXBlJywgJ2FwcGxpY2F0aW9uL3BkZicpO1xyXG4gICAgICByZXMuc2V0SGVhZGVyKFxyXG4gICAgICAgICdDb250ZW50LURpc3Bvc2l0aW9uJyxcclxuICAgICAgICBgYXR0YWNobWVudDsgZmlsZW5hbWU9XCJhY2NpZGVudC1yZXBvcnQtJHtpZH0ucGRmXCJgXHJcbiAgICAgICk7XHJcblxyXG4gICAgICBwZGZEb2MucGlwZShyZXMpO1xyXG4gICAgICBwZGZEb2MuZW5kKCk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIGV4cG9ydGluZyBQREYnLCB7IGVycm9yOiBlcnJvci5tZXNzYWdlIH0pO1xyXG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XHJcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEVYUE9SVCBFWENFTCAtINiq2LXYr9mK2LEgRXhjZWxcclxuICAgKi9cclxuICBhc3luYyBleHBvcnRFeGNlbChyZXEsIHJlcykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgeyBzdGFydERhdGUsIGVuZERhdGUsIGNpdHksIHNldmVyaXR5IH0gPSByZXEucXVlcnk7XHJcblxyXG4gICAgICBjb25zdCBmaWx0ZXJzID0ge307XHJcbiAgICAgIGlmIChzdGFydERhdGUpIGZpbHRlcnMuc3RhcnREYXRlID0gc3RhcnREYXRlO1xyXG4gICAgICBpZiAoZW5kRGF0ZSkgZmlsdGVycy5lbmREYXRlID0gZW5kRGF0ZTtcclxuICAgICAgaWYgKGNpdHkpIGZpbHRlcnMuY2l0eSA9IGNpdHk7XHJcbiAgICAgIGlmIChzZXZlcml0eSkgZmlsdGVycy5zZXZlcml0eSA9IHNldmVyaXR5O1xyXG5cclxuICAgICAgY29uc3Qgd29ya2Jvb2sgPSBhd2FpdCB0cmFmZmljQWNjaWRlbnRTZXJ2aWNlLmdlbmVyYXRlRXhjZWxSZXBvcnQoXHJcbiAgICAgICAgZmlsdGVyc1xyXG4gICAgICApO1xyXG5cclxuICAgICAgcmVzLnNldEhlYWRlcihcclxuICAgICAgICAnQ29udGVudC1UeXBlJyxcclxuICAgICAgICAnYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LnNwcmVhZHNoZWV0bWwuc2hlZXQnXHJcbiAgICAgICk7XHJcbiAgICAgIHJlcy5zZXRIZWFkZXIoXHJcbiAgICAgICAgJ0NvbnRlbnQtRGlzcG9zaXRpb24nLFxyXG4gICAgICAgICdhdHRhY2htZW50OyBmaWxlbmFtZT1cImFjY2lkZW50LXJlcG9ydHMueGxzeFwiJ1xyXG4gICAgICApO1xyXG5cclxuICAgICAgd29ya2Jvb2sud3JpdGUocmVzKTtcclxuICAgICAgcmVzLmVuZCgpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciBleHBvcnRpbmcgRXhjZWwnLCB7IGVycm9yOiBlcnJvci5tZXNzYWdlIH0pO1xyXG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XHJcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gbmV3IFRyYWZmaWNBY2NpZGVudENvbnRyb2xsZXIoKTtcclxuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FB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LEVBQUU7TUFDZGhCLE1BQU0sQ0FBQ2dCLEtBQUssQ0FBQyxxQkFBcUIsRUFBRTtRQUFFQSxLQUFLLEVBQUVBLEtBQUssQ0FBQ0g7TUFBUSxDQUFDLENBQUM7TUFDN0RULEdBQUcsQ0FBQ00sTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7UUFDbkJDLE9BQU8sRUFBRSxLQUFLO1FBQ2RDLE9BQU8sRUFBRUcsS0FBSyxDQUFDSDtNQUNqQixDQUFDLENBQUM7SUFDSjtFQUNGOztFQUVBO0FBQ0Y7QUFDQTtFQUNFLE1BQU1rRixXQUFXQSxDQUFDNUYsR0FBRyxFQUFFQyxHQUFHLEVBQUU7SUFDMUIsSUFBSTtNQUNGLE1BQU07UUFBRWlCLFNBQVM7UUFBRUMsT0FBTztRQUFFSCxJQUFJO1FBQUVEO01BQVMsQ0FBQyxHQUFHZixHQUFHLENBQUNzQixLQUFLO01BRXhELE1BQU1DLE9BQU8sR0FBRyxDQUFDLENBQUM7TUFDbEIsSUFBSUwsU0FBUyxFQUFFSyxPQUFPLENBQUNMLFNBQVMsR0FBR0EsU0FBUztNQUM1QyxJQUFJQyxPQUFPLEVBQUVJLE9BQU8sQ0FBQ0osT0FBTyxHQUFHQSxPQUFPO01BQ3RDLElBQUlILElBQUksRUFBRU8sT0FBTyxDQUFDUCxJQUFJLEdBQUdBLElBQUk7TUFDN0IsSUFBSUQsUUFBUSxFQUFFUSxPQUFPLENBQUNSLFFBQVEsR0FBR0EsUUFBUTtNQUV6QyxNQUFNOEUsUUFBUSxHQUFHLE1BQU1sRyxzQkFBc0IsQ0FBQ21HLG1CQUFtQixDQUMvRHZFLE9BQ0YsQ0FBQztNQUVEdEIsR0FBRyxDQUFDd0YsU0FBUyxDQUNYLGNBQWMsRUFDZCxtRUFDRixDQUFDO01BQ0R4RixHQUFHLENBQUN3RixTQUFTLENBQ1gscUJBQXFCLEVBQ3JCLDhDQUNGLENBQUM7TUFFREksUUFBUSxDQUFDRSxLQUFLLENBQUM5RixHQUFHLENBQUM7TUFDbkJBLEdBQUcsQ0FBQzBGLEdBQUcsQ0FBQyxDQUFDO0lBQ1gsQ0FBQyxDQUFDLE9BQU85RSxLQUFLLEVBQUU7TUFDZGhCLE1BQU0sQ0FBQ2dCLEtBQUssQ0FBQyx1QkFBdUIsRUFBRTtRQUFFQSxLQUFLLEVBQUVBLEtBQUssQ0FBQ0g7TUFBUSxDQUFDLENBQUM7TUFDL0RULEdBQUcsQ0FBQ00sTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7UUFDbkJDLE9BQU8sRUFBRSxLQUFLO1FBQ2RDLE9BQU8sRUFBRUcsS0FBSyxDQUFDSDtNQUNqQixDQUFDLENBQUM7SUFDSjtFQUNGO0FBQ0Y7QUFFQXNGLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHLElBQUluRyx5QkFBeUIsQ0FBQyxDQUFDIiwiaWdub3JlTGlzdCI6W119