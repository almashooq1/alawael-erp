{"version":3,"names":["EventEmitter","require","uuid","randomUUID","Logger","MobileAnalyticsService","constructor","sessions","Map","events","crashes","performanceMetrics","userJourneys","startSession","userId","deviceId","sessionData","sessionId","session","id","startTime","Date","endTime","duration","screens","appVersion","osVersion","isActive","networkType","locale","timezone","isFirstSession","sessionCount","metrics","totalEvents","totalCrashes","totalScreenViews","averageEventTime","sessionEngagementScore","set","info","emit","error","endSession","get","Error","_calculateEngagementScore","toFixed","engagementScore","trackEvent","eventData","eventId","event","timestamp","category","action","label","value","screenName","customParams","push","trackScreenView","screenData","screenView","className","loadTime","logCrash","crashData","crashId","crash","type","message","stack","severity","fatal","customData","deviceMemory","availableMemory","log","trackPerformance","metricData","metricId","metric","metricName","unit","threshold","isSlowMetric","customAttributes","key","has","getSessionStats","map","stats","slice","topEvents","_getTopEvents","length","getUserAnalytics","days","userSessions","Array","from","values","filter","s","sessionAge","now","getTime","totalSessions","totalDuration","reduce","sum","analytics","timeframe","averageSessionDuration","eventsPerSession","crashRate","averageEngagementScore","mostFrequentScreens","_getMostFrequentScreens","getCrashReport","filters","crashing","filtered","c","undefined","report","criticalCrashes","fatalCrashes","topExceptions","_getTopExceptions","crashesByAppVersion","_groupBy","crashesByOSVersion","getPerformanceReport","flat","m","slowMetrics","totalMeasurements","slowMeasurements","slowRate","average","min","Math","max","p95","_calculatePercentile","p99","score","durationMinutes","round","limit","grouped","Object","entries","items","count","sort","a","b","flatMap","screen","_getFrequency","prop","item","frequency","forEach","percentile","sorted","index","lower","floor","upper","ceil","weight","module","exports"],"sources":["mobileAnalytics.service.js"],"sourcesContent":["/**\r\n * Mobile Analytics Service\r\n * Ø®Ø¯Ù…Ø© ØªØ­Ù„ÙŠÙ„Ø§Øª Ø§Ù„Ù‡Ø§ØªÙ Ø§Ù„Ù…Ø­Ù…ÙˆÙ„\r\n * \r\n * Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ§Øª:\r\n * - ØªØªØ¨Ø¹ Ø³Ù„ÙˆÙƒ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¹Ù„Ù‰ Ø§Ù„Ù‡Ø§ØªÙ\r\n * - Ù‚ÙŠØ§Ø³ Ø§Ù„Ø£Ø¯Ø§Ø¡ ÙˆØ§Ù„ØªØ£Ø®ÙŠØ±\r\n * - ØªØªØ¨Ø¹ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ ÙˆØ§Ù„Ø£Ø¹Ø·Ø§Ù„\r\n * - ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø¬Ù„Ø³Ø§Øª\r\n * - ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…\r\n */\r\n\r\nconst EventEmitter = require('events');\r\nconst uuid = require('crypto').randomUUID;\r\nconst { Logger } = require('../utils/logger');\r\n\r\nclass MobileAnalyticsService extends EventEmitter {\r\n  constructor() {\r\n    super();\r\n    this.sessions = new Map();\r\n    this.events = new Map();\r\n    this.crashes = new Map();\r\n    this.performanceMetrics = new Map();\r\n    this.userJourneys = new Map();\r\n  }\r\n\r\n  /**\r\n   * Ø¨Ø¯Ø¡ Ø¬Ù„Ø³Ø© Ù…Ø­Ù…ÙˆÙ„\r\n   * Start mobile session\r\n   */\r\n  startSession(userId, deviceId, sessionData) {\r\n    try {\r\n      const sessionId = uuid();\r\n      const session = {\r\n        id: sessionId,\r\n        userId,\r\n        deviceId,\r\n        startTime: new Date(),\r\n        endTime: null,\r\n        duration: null,\r\n        events: [],\r\n        crashes: [],\r\n        screens: [],\r\n        appVersion: sessionData.appVersion,\r\n        osVersion: sessionData.osVersion,\r\n        isActive: true,\r\n        networkType: sessionData.networkType || 'unknown',\r\n        locale: sessionData.locale || 'en',\r\n        timezone: sessionData.timezone || 'UTC',\r\n        isFirstSession: sessionData.isFirstSession === true,\r\n        sessionCount: sessionData.sessionCount || 1,\r\n        metrics: {\r\n          totalEvents: 0,\r\n          totalCrashes: 0,\r\n          totalScreenViews: 0,\r\n          averageEventTime: 0,\r\n          sessionEngagementScore: 0,\r\n        },\r\n      };\r\n\r\n      this.sessions.set(sessionId, session);\r\n\r\n      Logger.info(`ðŸ• Mobile session started: ${sessionId} for user ${userId}`);\r\n\r\n      this.emit('session:started', {\r\n        sessionId,\r\n        userId,\r\n        deviceId,\r\n        isFirstSession: sessionData.isFirstSession,\r\n      });\r\n\r\n      return session;\r\n    } catch (error) {\r\n      Logger.error('Start session error:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Ø¥Ù†Ù‡Ø§Ø¡ Ø¬Ù„Ø³Ø©\r\n   * End mobile session\r\n   */\r\n  endSession(sessionId) {\r\n    try {\r\n      const session = this.sessions.get(sessionId);\r\n      if (!session) throw new Error('Session not found');\r\n\r\n      session.endTime = new Date();\r\n      session.duration = session.endTime - session.startTime;\r\n      session.isActive = false;\r\n\r\n      // Calculate engagement score\r\n      session.metrics.sessionEngagementScore = this._calculateEngagementScore(session);\r\n\r\n      Logger.info(\r\n        `ðŸ Mobile session ended: ${sessionId} (Duration: ${(session.duration / 1000).toFixed(2)}s)`\r\n      );\r\n\r\n      this.emit('session:ended', {\r\n        sessionId,\r\n        userId: session.userId,\r\n        duration: session.duration,\r\n        engagementScore: session.metrics.sessionEngagementScore,\r\n      });\r\n\r\n      return session;\r\n    } catch (error) {\r\n      Logger.error('End session error:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ØªØªØ¨Ø¹ Ø­Ø¯Ø« ÙÙŠ Ø§Ù„Ø¬Ù„Ø³Ø©\r\n   * Track event in session\r\n   */\r\n  trackEvent(sessionId, eventData) {\r\n    try {\r\n      const session = this.sessions.get(sessionId);\r\n      if (!session) throw new Error('Session not found');\r\n\r\n      const eventId = uuid();\r\n      const event = {\r\n        id: eventId,\r\n        sessionId,\r\n        userId: session.userId,\r\n        deviceId: session.deviceId,\r\n        timestamp: new Date(),\r\n        category: eventData.category,\r\n        action: eventData.action,\r\n        label: eventData.label || null,\r\n        value: eventData.value || null,\r\n        screenName: eventData.screenName || null,\r\n        customParams: eventData.customParams || {},\r\n        duration: eventData.duration || 0,\r\n      };\r\n\r\n      this.events.set(eventId, event);\r\n      session.events.push(eventId);\r\n      session.metrics.totalEvents++;\r\n\r\n      this.emit('event:tracked', {\r\n        eventId,\r\n        sessionId,\r\n        category: eventData.category,\r\n        action: eventData.action,\r\n      });\r\n\r\n      return event;\r\n    } catch (error) {\r\n      Logger.error('Track event error:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ØªØªØ¨Ø¹ Ø¹Ø±Ø¶ Ø§Ù„Ø´Ø§Ø´Ø©\r\n   * Track screen view\r\n   */\r\n  trackScreenView(sessionId, screenData) {\r\n    try {\r\n      const session = this.sessions.get(sessionId);\r\n      if (!session) throw new Error('Session not found');\r\n\r\n      const screenView = {\r\n        id: uuid(),\r\n        sessionId,\r\n        screenName: screenData.screenName,\r\n        className: screenData.className || null,\r\n        timestamp: new Date(),\r\n        loadTime: screenData.loadTime || 0,\r\n        customParams: screenData.customParams || {},\r\n      };\r\n\r\n      session.screens.push(screenView);\r\n      session.metrics.totalScreenViews++;\r\n\r\n      this.emit('screen:viewed', {\r\n        sessionId,\r\n        screenName: screenData.screenName,\r\n        loadTime: screenData.loadTime,\r\n      });\r\n\r\n      return screenView;\r\n    } catch (error) {\r\n      Logger.error('Track screen view error:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ØªØ³Ø¬ÙŠÙ„ Ø®Ø·Ø£ Ø£Ùˆ ØªÙˆÙ‚Ù\r\n   * Log crash or exception\r\n   */\r\n  logCrash(sessionId, crashData) {\r\n    try {\r\n      const session = this.sessions.get(sessionId);\r\n      if (!session) throw new Error('Session not found');\r\n\r\n      const crashId = uuid();\r\n      const crash = {\r\n        id: crashId,\r\n        sessionId,\r\n        userId: session.userId,\r\n        deviceId: session.deviceId,\r\n        timestamp: new Date(),\r\n        type: crashData.type || 'exception', // exception, crash, anr\r\n        message: crashData.message,\r\n        stack: crashData.stack || null,\r\n        severity: crashData.severity || 'error', // info, warning, error, critical\r\n        fatal: crashData.fatal === true,\r\n        appVersion: crashData.appVersion || session.appVersion,\r\n        osVersion: crashData.osVersion || session.osVersion,\r\n        customData: crashData.customData || {},\r\n        deviceMemory: crashData.deviceMemory || null,\r\n        availableMemory: crashData.availableMemory || null,\r\n      };\r\n\r\n      this.crashes.set(crashId, crash);\r\n      session.crashes.push(crashId);\r\n      session.metrics.totalCrashes++;\r\n\r\n      let severity = 'warning';\r\n      if (crash.fatal || crash.severity === 'critical') {\r\n        severity = 'critical';\r\n      }\r\n\r\n      Logger.log(severity, `ðŸ’¥ Crash reported: ${crashId} - ${crashData.message}`);\r\n\r\n      this.emit('crash:reported', {\r\n        crashId,\r\n        sessionId,\r\n        userId: session.userId,\r\n        type: crashData.type,\r\n        severity: crash.severity,\r\n        fatal: crash.fatal,\r\n      });\r\n\r\n      return crash;\r\n    } catch (error) {\r\n      Logger.error('Log crash error:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ØªØªØ¨Ø¹ Ù…Ù‚ÙŠØ§Ø³ Ø§Ù„Ø£Ø¯Ø§Ø¡\r\n   * Track performance metric\r\n   */\r\n  trackPerformance(sessionId, metricData) {\r\n    try {\r\n      const session = this.sessions.get(sessionId);\r\n      if (!session) throw new Error('Session not found');\r\n\r\n      const metricId = uuid();\r\n      const metric = {\r\n        id: metricId,\r\n        sessionId,\r\n        userId: session.userId,\r\n        timestamp: new Date(),\r\n        metricName: metricData.metricName,\r\n        value: metricData.value,\r\n        unit: metricData.unit || 'ms',\r\n        threshold: metricData.threshold || null,\r\n        isSlowMetric: false,\r\n        customAttributes: metricData.customAttributes || {},\r\n      };\r\n\r\n      // Check if metric exceeds threshold\r\n      if (metric.threshold && metric.value > metric.threshold) {\r\n        metric.isSlowMetric = true;\r\n\r\n        this.emit('performance:slow', {\r\n          metricId,\r\n          sessionId,\r\n          metricName: metricData.metricName,\r\n          value: metricData.value,\r\n          threshold: metricData.threshold,\r\n        });\r\n      }\r\n\r\n      const key = `${session.userId}:${session.deviceId}`;\r\n      if (!this.performanceMetrics.has(key)) {\r\n        this.performanceMetrics.set(key, []);\r\n      }\r\n\r\n      this.performanceMetrics.get(key).push(metric);\r\n\r\n      this.emit('performance:tracked', {\r\n        metricId,\r\n        sessionId,\r\n        metricName: metricData.metricName,\r\n        value: metricData.value,\r\n      });\r\n\r\n      return metric;\r\n    } catch (error) {\r\n      Logger.error('Track performance error:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø¬Ù„Ø³Ø©\r\n   * Get session statistics\r\n   */\r\n  getSessionStats(sessionId) {\r\n    try {\r\n      const session = this.sessions.get(sessionId);\r\n      if (!session) throw new Error('Session not found');\r\n\r\n      const events = session.events.map(id => this.events.get(id));\r\n\r\n      const stats = {\r\n        sessionId,\r\n        userId: session.userId,\r\n        deviceId: session.deviceId,\r\n        startTime: session.startTime,\r\n        endTime: session.endTime,\r\n        duration: session.duration,\r\n        totalEvents: session.metrics.totalEvents,\r\n        totalCrashes: session.metrics.totalCrashes,\r\n        totalScreenViews: session.metrics.totalScreenViews,\r\n        engagementScore: session.metrics.sessionEngagementScore,\r\n        screens: session.screens.slice(0, 10), // Last 10 screens\r\n        topEvents: this._getTopEvents(events, 5),\r\n        crashes: session.crashes.length > 0\r\n          ? session.crashes.map(id => {\r\n              const crash = this.crashes.get(id);\r\n              return {\r\n                id: crash.id,\r\n                type: crash.type,\r\n                message: crash.message,\r\n                severity: crash.severity,\r\n              };\r\n            })\r\n          : [],\r\n      };\r\n\r\n      return stats;\r\n    } catch (error) {\r\n      Logger.error('Get session stats error:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…\r\n   * Get user analytics\r\n   */\r\n  getUserAnalytics(userId, days = 30) {\r\n    try {\r\n      const userSessions = Array.from(this.sessions.values())\r\n        .filter(s => s.userId === userId)\r\n        .filter(s => {\r\n          const sessionAge = Date.now() - s.startTime.getTime();\r\n          return sessionAge < days * 24 * 60 * 60 * 1000;\r\n        });\r\n\r\n      const totalSessions = userSessions.length;\r\n      const totalDuration = userSessions.reduce((sum, s) => sum + (s.duration || 0), 0);\r\n      const totalEvents = userSessions.reduce((sum, s) => sum + s.metrics.totalEvents, 0);\r\n      const totalCrashes = userSessions.reduce((sum, s) => sum + s.metrics.totalCrashes, 0);\r\n\r\n      const analytics = {\r\n        userId,\r\n        timeframe: `${days} days`,\r\n        totalSessions,\r\n        averageSessionDuration: totalSessions > 0 ? totalDuration / totalSessions : 0,\r\n        totalEvents,\r\n        eventsPerSession: totalSessions > 0 ? totalEvents / totalSessions : 0,\r\n        totalCrashes,\r\n        crashRate: totalSessions > 0 ? ((totalCrashes / totalSessions) * 100).toFixed(2) : 0,\r\n        averageEngagementScore: totalSessions > 0\r\n          ? (\r\n              userSessions.reduce((sum, s) => sum + s.metrics.sessionEngagementScore, 0) /\r\n              totalSessions\r\n            ).toFixed(2)\r\n          : 0,\r\n        mostFrequentScreens: this._getMostFrequentScreens(userSessions, 5),\r\n      };\r\n\r\n      return analytics;\r\n    } catch (error) {\r\n      Logger.error('Get user analytics error:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø£Ø¹Ø·Ø§Ù„\r\n   * Get crash report\r\n   */\r\n  getCrashReport(filters = {}) {\r\n    try {\r\n      const crashing = Array.from(this.crashes.values());\r\n\r\n      let filtered = crashing;\r\n\r\n      if (filters.userId) {\r\n        filtered = filtered.filter(c => c.userId === filters.userId);\r\n      }\r\n\r\n      if (filters.severity) {\r\n        filtered = filtered.filter(c => c.severity === filters.severity);\r\n      }\r\n\r\n      if (filters.fatal !== undefined) {\r\n        filtered = filtered.filter(c => c.fatal === filters.fatal);\r\n      }\r\n\r\n      const report = {\r\n        totalCrashes: filtered.length,\r\n        criticalCrashes: filtered.filter(c => c.severity === 'critical').length,\r\n        fatalCrashes: filtered.filter(c => c.fatal).length,\r\n        topExceptions: this._getTopExceptions(filtered, 10),\r\n        crashesByAppVersion: this._groupBy(filtered, 'appVersion'),\r\n        crashesByOSVersion: this._groupBy(filtered, 'osVersion'),\r\n      };\r\n\r\n      return report;\r\n    } catch (error) {\r\n      Logger.error('Get crash report error:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø£Ø¯Ø§Ø¡\r\n   * Get performance report\r\n   */\r\n  getPerformanceReport(userId, metricName) {\r\n    try {\r\n      const key = `${userId}:*`;\r\n      const metrics = Array.from(this.performanceMetrics.values())\r\n        .flat()\r\n        .filter(m => m.userId === userId && m.metricName === metricName);\r\n\r\n      const slowMetrics = metrics.filter(m => m.isSlowMetric);\r\n\r\n      const report = {\r\n        userId,\r\n        metricName,\r\n        totalMeasurements: metrics.length,\r\n        slowMeasurements: slowMetrics.length,\r\n        slowRate: metrics.length > 0 ? ((slowMetrics.length / metrics.length) * 100).toFixed(2) : 0,\r\n        average: metrics.length > 0 ? (metrics.reduce((sum, m) => sum + m.value, 0) / metrics.length).toFixed(2) : 0,\r\n        min: metrics.length > 0 ? Math.min(...metrics.map(m => m.value)) : 0,\r\n        max: metrics.length > 0 ? Math.max(...metrics.map(m => m.value)) : 0,\r\n        p95: this._calculatePercentile(metrics.map(m => m.value), 95),\r\n        p99: this._calculatePercentile(metrics.map(m => m.value), 99),\r\n      };\r\n\r\n      return report;\r\n    } catch (error) {\r\n      Logger.error('Get performance report error:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ===== Private Methods =====\r\n   */\r\n\r\n  /**\r\n   * Calculate engagement score\r\n   */\r\n  _calculateEngagementScore(session) {\r\n    let score = 0;\r\n\r\n    // Duration: up to 30 points\r\n    const durationMinutes = session.duration / 60000;\r\n    score += Math.min(durationMinutes * 0.5, 30);\r\n\r\n    // Events: up to 40 points\r\n    score += Math.min(session.metrics.totalEvents * 2, 40);\r\n\r\n    // Screen views: up to 20 points\r\n    score += Math.min(session.metrics.totalScreenViews, 20);\r\n\r\n    // Crashes penalty: -10 per crash\r\n    score -= session.metrics.totalCrashes * 10;\r\n\r\n    return Math.max(0, Math.min(100, Math.round(score)));\r\n  }\r\n\r\n  /**\r\n   * Get top events\r\n   */\r\n  _getTopEvents(events, limit) {\r\n    const grouped = this._groupBy(events, 'action');\r\n    return Object.entries(grouped)\r\n      .map(([action, items]) => ({\r\n        action,\r\n        count: items.length,\r\n      }))\r\n      .sort((a, b) => b.count - a.count)\r\n      .slice(0, limit);\r\n  }\r\n\r\n  /**\r\n   * Get most frequent screens\r\n   */\r\n  _getMostFrequentScreens(sessions, limit) {\r\n    const screens = sessions\r\n      .flatMap(s => s.screens)\r\n      .map(screen => screen.screenName);\r\n\r\n    return this._getFrequency(screens, limit);\r\n  }\r\n\r\n  /**\r\n   * Get top exceptions\r\n   */\r\n  _getTopExceptions(crashes, limit) {\r\n    const grouped = this._groupBy(crashes, 'message');\r\n    return Object.entries(grouped)\r\n      .map(([message, items]) => ({\r\n        message,\r\n        count: items.length,\r\n      }))\r\n      .sort((a, b) => b.count - a.count)\r\n      .slice(0, limit);\r\n  }\r\n\r\n  /**\r\n   * Group by property\r\n   */\r\n  _groupBy(items, prop) {\r\n    return items.reduce((grouped, item) => {\r\n      const key = item[prop];\r\n      if (!grouped[key]) grouped[key] = [];\r\n      grouped[key].push(item);\r\n      return grouped;\r\n    }, {});\r\n  }\r\n\r\n  /**\r\n   * Get frequency\r\n   */\r\n  _getFrequency(items, limit) {\r\n    const frequency = {};\r\n    items.forEach(item => {\r\n      frequency[item] = (frequency[item] || 0) + 1;\r\n    });\r\n\r\n    return Object.entries(frequency)\r\n      .map(([item, count]) => ({ item, count }))\r\n      .sort((a, b) => b.count - a.count)\r\n      .slice(0, limit);\r\n  }\r\n\r\n  /**\r\n   * Calculate percentile\r\n   */\r\n  _calculatePercentile(values, percentile) {\r\n    if (values.length === 0) return 0;\r\n\r\n    const sorted = values.sort((a, b) => a - b);\r\n    const index = (percentile / 100) * sorted.length;\r\n    const lower = Math.floor(index) - 1;\r\n    const upper = Math.ceil(index) - 1;\r\n\r\n    if (upper === lower) return sorted[lower];\r\n\r\n    const weight = index % 1;\r\n    return sorted[lower] * (1 - weight) + sorted[upper] * weight;\r\n  }\r\n}\r\n\r\nmodule.exports = new MobileAnalyticsService();\r\n"],"mappings":"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","ignoreList":[]}