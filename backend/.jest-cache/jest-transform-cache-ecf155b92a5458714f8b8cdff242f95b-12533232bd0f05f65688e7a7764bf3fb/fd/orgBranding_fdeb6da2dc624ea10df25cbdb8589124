8474bd681fd2db25dc66d9e67a7828f7
const express = require('express');
const router = express.Router();
const OrgBranding = require('../models/OrgBranding');
const {
  requireAdmin
} = require('../middleware/auth');

// Get branding for org
router.get('/:orgId', async (req, res) => {
  try {
    const branding = await OrgBranding.findOne({
      orgId: req.params.orgId
    });
    res.json(branding || {});
  } catch (err) {
    res.status(500).json({
      error: 'Error fetching branding'
    });
  }
});

// Update branding (admin only)
router.post('/:orgId', requireAdmin, async (req, res) => {
  try {
    const {
      name,
      color,
      logo
    } = req.body;
    const updated = await OrgBranding.findOneAndUpdate({
      orgId: req.params.orgId
    }, {
      name,
      color,
      logo,
      updatedBy: req.user._id,
      updatedAt: new Date()
    }, {
      upsert: true,
      new: true
    });
    res.json(updated);
  } catch (err) {
    res.status(500).json({
      error: 'Error updating branding'
    });
  }
});
module.exports = router;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsInJvdXRlciIsIlJvdXRlciIsIk9yZ0JyYW5kaW5nIiwicmVxdWlyZUFkbWluIiwiZ2V0IiwicmVxIiwicmVzIiwiYnJhbmRpbmciLCJmaW5kT25lIiwib3JnSWQiLCJwYXJhbXMiLCJqc29uIiwiZXJyIiwic3RhdHVzIiwiZXJyb3IiLCJwb3N0IiwibmFtZSIsImNvbG9yIiwibG9nbyIsImJvZHkiLCJ1cGRhdGVkIiwiZmluZE9uZUFuZFVwZGF0ZSIsInVwZGF0ZWRCeSIsInVzZXIiLCJfaWQiLCJ1cGRhdGVkQXQiLCJEYXRlIiwidXBzZXJ0IiwibmV3IiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbIm9yZ0JyYW5kaW5nLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7XHJcbmNvbnN0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XHJcbmNvbnN0IE9yZ0JyYW5kaW5nID0gcmVxdWlyZSgnLi4vbW9kZWxzL09yZ0JyYW5kaW5nJyk7XHJcbmNvbnN0IHsgcmVxdWlyZUFkbWluIH0gPSByZXF1aXJlKCcuLi9taWRkbGV3YXJlL2F1dGgnKTtcclxuXHJcbi8vIEdldCBicmFuZGluZyBmb3Igb3JnXHJcbnJvdXRlci5nZXQoJy86b3JnSWQnLCBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgYnJhbmRpbmcgPSBhd2FpdCBPcmdCcmFuZGluZy5maW5kT25lKHsgb3JnSWQ6IHJlcS5wYXJhbXMub3JnSWQgfSk7XHJcbiAgICByZXMuanNvbihicmFuZGluZyB8fCB7fSk7XHJcbiAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiAnRXJyb3IgZmV0Y2hpbmcgYnJhbmRpbmcnIH0pO1xyXG4gIH1cclxufSk7XHJcblxyXG4vLyBVcGRhdGUgYnJhbmRpbmcgKGFkbWluIG9ubHkpXHJcbnJvdXRlci5wb3N0KCcvOm9yZ0lkJywgcmVxdWlyZUFkbWluLCBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyBuYW1lLCBjb2xvciwgbG9nbyB9ID0gcmVxLmJvZHk7XHJcbiAgICBjb25zdCB1cGRhdGVkID0gYXdhaXQgT3JnQnJhbmRpbmcuZmluZE9uZUFuZFVwZGF0ZShcclxuICAgICAgeyBvcmdJZDogcmVxLnBhcmFtcy5vcmdJZCB9LFxyXG4gICAgICB7IG5hbWUsIGNvbG9yLCBsb2dvLCB1cGRhdGVkQnk6IHJlcS51c2VyLl9pZCwgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpIH0sXHJcbiAgICAgIHsgdXBzZXJ0OiB0cnVlLCBuZXc6IHRydWUgfVxyXG4gICAgKTtcclxuICAgIHJlcy5qc29uKHVwZGF0ZWQpO1xyXG4gIH0gY2F0Y2ggKGVycikge1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ0Vycm9yIHVwZGF0aW5nIGJyYW5kaW5nJyB9KTtcclxuICB9XHJcbn0pO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSByb3V0ZXI7XHJcbiJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsT0FBTyxHQUFHQyxPQUFPLENBQUMsU0FBUyxDQUFDO0FBQ2xDLE1BQU1DLE1BQU0sR0FBR0YsT0FBTyxDQUFDRyxNQUFNLENBQUMsQ0FBQztBQUMvQixNQUFNQyxXQUFXLEdBQUdILE9BQU8sQ0FBQyx1QkFBdUIsQ0FBQztBQUNwRCxNQUFNO0VBQUVJO0FBQWEsQ0FBQyxHQUFHSixPQUFPLENBQUMsb0JBQW9CLENBQUM7O0FBRXREO0FBQ0FDLE1BQU0sQ0FBQ0ksR0FBRyxDQUFDLFNBQVMsRUFBRSxPQUFPQyxHQUFHLEVBQUVDLEdBQUcsS0FBSztFQUN4QyxJQUFJO0lBQ0YsTUFBTUMsUUFBUSxHQUFHLE1BQU1MLFdBQVcsQ0FBQ00sT0FBTyxDQUFDO01BQUVDLEtBQUssRUFBRUosR0FBRyxDQUFDSyxNQUFNLENBQUNEO0lBQU0sQ0FBQyxDQUFDO0lBQ3ZFSCxHQUFHLENBQUNLLElBQUksQ0FBQ0osUUFBUSxJQUFJLENBQUMsQ0FBQyxDQUFDO0VBQzFCLENBQUMsQ0FBQyxPQUFPSyxHQUFHLEVBQUU7SUFDWk4sR0FBRyxDQUFDTyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNGLElBQUksQ0FBQztNQUFFRyxLQUFLLEVBQUU7SUFBMEIsQ0FBQyxDQUFDO0VBQzVEO0FBQ0YsQ0FBQyxDQUFDOztBQUVGO0FBQ0FkLE1BQU0sQ0FBQ2UsSUFBSSxDQUFDLFNBQVMsRUFBRVosWUFBWSxFQUFFLE9BQU9FLEdBQUcsRUFBRUMsR0FBRyxLQUFLO0VBQ3ZELElBQUk7SUFDRixNQUFNO01BQUVVLElBQUk7TUFBRUMsS0FBSztNQUFFQztJQUFLLENBQUMsR0FBR2IsR0FBRyxDQUFDYyxJQUFJO0lBQ3RDLE1BQU1DLE9BQU8sR0FBRyxNQUFNbEIsV0FBVyxDQUFDbUIsZ0JBQWdCLENBQ2hEO01BQUVaLEtBQUssRUFBRUosR0FBRyxDQUFDSyxNQUFNLENBQUNEO0lBQU0sQ0FBQyxFQUMzQjtNQUFFTyxJQUFJO01BQUVDLEtBQUs7TUFBRUMsSUFBSTtNQUFFSSxTQUFTLEVBQUVqQixHQUFHLENBQUNrQixJQUFJLENBQUNDLEdBQUc7TUFBRUMsU0FBUyxFQUFFLElBQUlDLElBQUksQ0FBQztJQUFFLENBQUMsRUFDckU7TUFBRUMsTUFBTSxFQUFFLElBQUk7TUFBRUMsR0FBRyxFQUFFO0lBQUssQ0FDNUIsQ0FBQztJQUNEdEIsR0FBRyxDQUFDSyxJQUFJLENBQUNTLE9BQU8sQ0FBQztFQUNuQixDQUFDLENBQUMsT0FBT1IsR0FBRyxFQUFFO0lBQ1pOLEdBQUcsQ0FBQ08sTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDRixJQUFJLENBQUM7TUFBRUcsS0FBSyxFQUFFO0lBQTBCLENBQUMsQ0FBQztFQUM1RDtBQUNGLENBQUMsQ0FBQztBQUVGZSxNQUFNLENBQUNDLE9BQU8sR0FBRzlCLE1BQU0iLCJpZ25vcmVMaXN0IjpbXX0=