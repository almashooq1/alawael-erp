{"version":3,"names":["express","require","router","Router","OrgBranding","requireAdmin","get","req","res","branding","findOne","orgId","params","json","err","status","error","post","name","color","logo","body","updated","findOneAndUpdate","updatedBy","user","_id","updatedAt","Date","upsert","new","module","exports"],"sources":["orgBranding.js"],"sourcesContent":["const express = require('express');\r\nconst router = express.Router();\r\nconst OrgBranding = require('../models/OrgBranding');\r\nconst { requireAdmin } = require('../middleware/auth');\r\n\r\n// Get branding for org\r\nrouter.get('/:orgId', async (req, res) => {\r\n  try {\r\n    const branding = await OrgBranding.findOne({ orgId: req.params.orgId });\r\n    res.json(branding || {});\r\n  } catch (err) {\r\n    res.status(500).json({ error: 'Error fetching branding' });\r\n  }\r\n});\r\n\r\n// Update branding (admin only)\r\nrouter.post('/:orgId', requireAdmin, async (req, res) => {\r\n  try {\r\n    const { name, color, logo } = req.body;\r\n    const updated = await OrgBranding.findOneAndUpdate(\r\n      { orgId: req.params.orgId },\r\n      { name, color, logo, updatedBy: req.user._id, updatedAt: new Date() },\r\n      { upsert: true, new: true }\r\n    );\r\n    res.json(updated);\r\n  } catch (err) {\r\n    res.status(500).json({ error: 'Error updating branding' });\r\n  }\r\n});\r\n\r\nmodule.exports = router;\r\n"],"mappings":"AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAS,CAAC;AAClC,MAAMC,MAAM,GAAGF,OAAO,CAACG,MAAM,CAAC,CAAC;AAC/B,MAAMC,WAAW,GAAGH,OAAO,CAAC,uBAAuB,CAAC;AACpD,MAAM;EAAEI;AAAa,CAAC,GAAGJ,OAAO,CAAC,oBAAoB,CAAC;;AAEtD;AACAC,MAAM,CAACI,GAAG,CAAC,SAAS,EAAE,OAAOC,GAAG,EAAEC,GAAG,KAAK;EACxC,IAAI;IACF,MAAMC,QAAQ,GAAG,MAAML,WAAW,CAACM,OAAO,CAAC;MAAEC,KAAK,EAAEJ,GAAG,CAACK,MAAM,CAACD;IAAM,CAAC,CAAC;IACvEH,GAAG,CAACK,IAAI,CAACJ,QAAQ,IAAI,CAAC,CAAC,CAAC;EAC1B,CAAC,CAAC,OAAOK,GAAG,EAAE;IACZN,GAAG,CAACO,MAAM,CAAC,GAAG,CAAC,CAACF,IAAI,CAAC;MAAEG,KAAK,EAAE;IAA0B,CAAC,CAAC;EAC5D;AACF,CAAC,CAAC;;AAEF;AACAd,MAAM,CAACe,IAAI,CAAC,SAAS,EAAEZ,YAAY,EAAE,OAAOE,GAAG,EAAEC,GAAG,KAAK;EACvD,IAAI;IACF,MAAM;MAAEU,IAAI;MAAEC,KAAK;MAAEC;IAAK,CAAC,GAAGb,GAAG,CAACc,IAAI;IACtC,MAAMC,OAAO,GAAG,MAAMlB,WAAW,CAACmB,gBAAgB,CAChD;MAAEZ,KAAK,EAAEJ,GAAG,CAACK,MAAM,CAACD;IAAM,CAAC,EAC3B;MAAEO,IAAI;MAAEC,KAAK;MAAEC,IAAI;MAAEI,SAAS,EAAEjB,GAAG,CAACkB,IAAI,CAACC,GAAG;MAAEC,SAAS,EAAE,IAAIC,IAAI,CAAC;IAAE,CAAC,EACrE;MAAEC,MAAM,EAAE,IAAI;MAAEC,GAAG,EAAE;IAAK,CAC5B,CAAC;IACDtB,GAAG,CAACK,IAAI,CAACS,OAAO,CAAC;EACnB,CAAC,CAAC,OAAOR,GAAG,EAAE;IACZN,GAAG,CAACO,MAAM,CAAC,GAAG,CAAC,CAACF,IAAI,CAAC;MAAEG,KAAK,EAAE;IAA0B,CAAC,CAAC;EAC5D;AACF,CAAC,CAAC;AAEFe,MAAM,CAACC,OAAO,GAAG9B,MAAM","ignoreList":[]}