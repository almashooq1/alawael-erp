4ba58bc69049085bad9d18c164a96c6b
const mongoose = require('mongoose');
const vehicleSchema = new mongoose.Schema({
  // معلومات أساسية
  vehicleNumber: {
    type: String,
    required: true,
    unique: true
  },
  plateNumber: {
    type: String,
    required: true,
    unique: true
  },
  type: {
    type: String,
    enum: ['bus', 'van', 'car', 'truck'],
    required: true
  },
  brand: String,
  model: String,
  year: Number,
  color: String,
  capacity: {
    type: Number,
    required: true,
    min: 1
  },
  // مستوى الوقود (للتوافق مع الاختبارات)
  fuelLevel: {
    type: Number,
    default: 100
  },
  // حالة المركبة
  status: {
    type: String,
    enum: ['active', 'maintenance', 'inactive', 'emergency'],
    default: 'active'
  },
  // معلومات GPS والموقع
  gpsDevice: {
    deviceId: String,
    lastUpdate: Date,
    currentLocation: {
      type: {
        type: String,
        enum: ['Point'],
        default: 'Point'
      },
      coordinates: {
        type: [Number] // [longitude, latitude]
      },
      address: String,
      speed: Number,
      // km/h
      heading: Number // اتجاه الحركة (0-360)
    }
  },
  // السائق الحالي
  currentDriver: {
    type: mongoose.Schema.Types.ObjectId,
    ref: 'User'
  },
  // حقل مستعار للسائق (للتوافق مع الاختبارات)
  driver: {
    type: mongoose.Schema.Types.ObjectId,
    ref: 'User'
  },
  // المسار الحالي
  currentRoute: {
    type: mongoose.Schema.Types.ObjectId,
    ref: 'TransportRoute'
  },
  // مسافة المركبة
  mileage: {
    type: Number,
    default: 0
  },
  // استهلاك الوقود
  fuelConsumption: {
    fuelType: {
      type: String,
      enum: ['petrol', 'diesel', 'electric', 'hybrid']
    },
    tankCapacity: Number,
    // لتر
    currentFuelLevel: Number,
    // لتر
    averageConsumption: Number,
    // لتر/100كم
    lastRefill: {
      date: Date,
      amount: Number,
      cost: Number,
      station: String
    }
  },
  // صيانة المركبة
  maintenance: {
    lastMaintenanceDate: Date,
    nextMaintenanceDate: Date,
    nextMaintenanceKm: Number,
    currentOdometer: Number // كم
  },
  // سجل الصيانة (للتوافق مع الاختبارات)
  maintenanceHistory: {
    type: [{
      date: {
        type: Date,
        default: Date.now
      },
      type: {
        type: String
      },
      description: String,
      cost: Number,
      workshop: String
    }],
    default: []
  },
  // تأمين المركبة
  insurance: {
    company: String,
    policyNumber: String,
    startDate: Date,
    expiryDate: Date,
    coverageAmount: Number,
    annualCost: Number
  },
  // مراقبة السلامة
  safety: {
    lastInspectionDate: Date,
    nextInspectionDate: Date,
    emergencyAlerts: [{
      timestamp: Date,
      type: {
        type: String,
        enum: ['accident', 'breakdown', 'speeding', 'harsh_braking', 'deviation']
      },
      location: {
        type: {
          type: String,
          default: 'Point'
        },
        coordinates: [Number]
      },
      severity: {
        type: String,
        enum: ['low', 'medium', 'high', 'critical']
      },
      resolved: {
        type: Boolean,
        default: false
      },
      resolvedAt: Date
    }],
    speedingIncidents: {
      type: Number,
      default: 0
    },
    harshBrakingIncidents: {
      type: Number,
      default: 0
    }
  },
  // الركاب المعينين
  assignedPassengers: [{
    type: mongoose.Schema.Types.ObjectId,
    ref: 'User'
  }],
  // إحصائيات
  statistics: {
    totalDistanceCovered: {
      type: Number,
      default: 0
    },
    // كم
    totalFuelConsumed: {
      type: Number,
      default: 0
    },
    // لتر
    totalMaintenanceCost: {
      type: Number,
      default: 0
    },
    // ريال
    averageSpeed: Number,
    // km/h
    tripCount: {
      type: Number,
      default: 0
    }
  },
  // معلومات إضافية
  notes: String,
  documents: [{
    name: String,
    type: String,
    url: String,
    uploadDate: Date
  }],
  isActive: {
    type: Boolean,
    default: true
  }
}, {
  timestamps: true
});

// Indexes للبحث والأداء
vehicleSchema.index({
  status: 1,
  isActive: 1
});
vehicleSchema.index({
  currentDriver: 1
});
vehicleSchema.index({
  'gpsDevice.currentLocation.coordinates': '2dsphere'
});

// Virtual للحصول على حالة الوقود
vehicleSchema.virtual('fuelStatus').get(function () {
  if (!this.fuelConsumption.currentFuelLevel || !this.fuelConsumption.tankCapacity) {
    return 'unknown';
  }
  const percentage = this.fuelConsumption.currentFuelLevel / this.fuelConsumption.tankCapacity * 100;
  if (percentage < 20) return 'critical';
  if (percentage < 40) return 'low';
  if (percentage < 70) return 'medium';
  return 'good';
});

// Virtual للحصول على حالة الصيانة
vehicleSchema.virtual('maintenanceStatus').get(function () {
  if (!this.maintenance.nextMaintenanceDate) return 'unknown';
  const daysUntilMaintenance = Math.ceil((this.maintenance.nextMaintenanceDate - new Date()) / (1000 * 60 * 60 * 24));
  if (daysUntilMaintenance < 0) return 'overdue';
  if (daysUntilMaintenance <= 7) return 'urgent';
  if (daysUntilMaintenance <= 30) return 'soon';
  return 'good';
});

// Method لتحديث موقع GPS
vehicleSchema.methods.updateGPSLocation = function (location, speed, heading) {
  this.gpsDevice.currentLocation = {
    type: 'Point',
    coordinates: location.coordinates || [location.longitude, location.latitude]
  };
  if (speed !== undefined) this.currentSpeed = speed;
  if (heading !== undefined) this.gpsDevice.heading = heading;
  this.gpsDevice.lastUpdate = new Date();
  return this.save();
};

// Method لإضافة تنبيه طوارئ
vehicleSchema.methods.addEmergencyAlert = function (alert) {
  this.safety.emergencyAlerts.push({
    timestamp: new Date(),
    type: alert.type,
    location: alert.location,
    severity: alert.severity
  });

  // تحديث حالة المركبة للطوارئ الحرجة
  if (alert.severity === 'critical') {
    this.status = 'emergency';
  }
  return this.save();
};

// Method لتحديث استهلاك الوقود
vehicleSchema.methods.updateFuelConsumption = function (distance) {
  if (this.fuelConsumption.averageConsumption) {
    const consumed = distance / 100 * this.fuelConsumption.averageConsumption;
    this.fuelConsumption.currentFuelLevel -= consumed;
    this.statistics.totalFuelConsumed += consumed;
    this.statistics.totalDistanceCovered += distance;
  }
  return this.save();
};

// Static method للبحث عن مركبات قريبة
vehicleSchema.statics.findNearby = function (longitude, latitude, maxDistance = 5000) {
  return this.find({
    'gpsDevice.currentLocation.coordinates': {
      $near: {
        $geometry: {
          type: 'Point',
          coordinates: [longitude, latitude]
        },
        $maxDistance: maxDistance
      }
    },
    status: 'active',
    isActive: true
  });
};

// Static method للحصول على المركبات المتاحة
vehicleSchema.statics.findAvailable = function (capacity) {
  return this.find({
    status: 'active',
    isActive: true,
    capacity: {
      $gte: capacity
    },
    currentDriver: {
      $exists: true
    }
  });
};
module.exports = mongoose.model('Vehicle', vehicleSchema);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJ2ZWhpY2xlU2NoZW1hIiwiU2NoZW1hIiwidmVoaWNsZU51bWJlciIsInR5cGUiLCJTdHJpbmciLCJyZXF1aXJlZCIsInVuaXF1ZSIsInBsYXRlTnVtYmVyIiwiZW51bSIsImJyYW5kIiwibW9kZWwiLCJ5ZWFyIiwiTnVtYmVyIiwiY29sb3IiLCJjYXBhY2l0eSIsIm1pbiIsImZ1ZWxMZXZlbCIsImRlZmF1bHQiLCJzdGF0dXMiLCJncHNEZXZpY2UiLCJkZXZpY2VJZCIsImxhc3RVcGRhdGUiLCJEYXRlIiwiY3VycmVudExvY2F0aW9uIiwiY29vcmRpbmF0ZXMiLCJhZGRyZXNzIiwic3BlZWQiLCJoZWFkaW5nIiwiY3VycmVudERyaXZlciIsIlR5cGVzIiwiT2JqZWN0SWQiLCJyZWYiLCJkcml2ZXIiLCJjdXJyZW50Um91dGUiLCJtaWxlYWdlIiwiZnVlbENvbnN1bXB0aW9uIiwiZnVlbFR5cGUiLCJ0YW5rQ2FwYWNpdHkiLCJjdXJyZW50RnVlbExldmVsIiwiYXZlcmFnZUNvbnN1bXB0aW9uIiwibGFzdFJlZmlsbCIsImRhdGUiLCJhbW91bnQiLCJjb3N0Iiwic3RhdGlvbiIsIm1haW50ZW5hbmNlIiwibGFzdE1haW50ZW5hbmNlRGF0ZSIsIm5leHRNYWludGVuYW5jZURhdGUiLCJuZXh0TWFpbnRlbmFuY2VLbSIsImN1cnJlbnRPZG9tZXRlciIsIm1haW50ZW5hbmNlSGlzdG9yeSIsIm5vdyIsImRlc2NyaXB0aW9uIiwid29ya3Nob3AiLCJpbnN1cmFuY2UiLCJjb21wYW55IiwicG9saWN5TnVtYmVyIiwic3RhcnREYXRlIiwiZXhwaXJ5RGF0ZSIsImNvdmVyYWdlQW1vdW50IiwiYW5udWFsQ29zdCIsInNhZmV0eSIsImxhc3RJbnNwZWN0aW9uRGF0ZSIsIm5leHRJbnNwZWN0aW9uRGF0ZSIsImVtZXJnZW5jeUFsZXJ0cyIsInRpbWVzdGFtcCIsImxvY2F0aW9uIiwic2V2ZXJpdHkiLCJyZXNvbHZlZCIsIkJvb2xlYW4iLCJyZXNvbHZlZEF0Iiwic3BlZWRpbmdJbmNpZGVudHMiLCJoYXJzaEJyYWtpbmdJbmNpZGVudHMiLCJhc3NpZ25lZFBhc3NlbmdlcnMiLCJzdGF0aXN0aWNzIiwidG90YWxEaXN0YW5jZUNvdmVyZWQiLCJ0b3RhbEZ1ZWxDb25zdW1lZCIsInRvdGFsTWFpbnRlbmFuY2VDb3N0IiwiYXZlcmFnZVNwZWVkIiwidHJpcENvdW50Iiwibm90ZXMiLCJkb2N1bWVudHMiLCJuYW1lIiwidXJsIiwidXBsb2FkRGF0ZSIsImlzQWN0aXZlIiwidGltZXN0YW1wcyIsImluZGV4IiwidmlydHVhbCIsImdldCIsInBlcmNlbnRhZ2UiLCJkYXlzVW50aWxNYWludGVuYW5jZSIsIk1hdGgiLCJjZWlsIiwibWV0aG9kcyIsInVwZGF0ZUdQU0xvY2F0aW9uIiwibG9uZ2l0dWRlIiwibGF0aXR1ZGUiLCJ1bmRlZmluZWQiLCJjdXJyZW50U3BlZWQiLCJzYXZlIiwiYWRkRW1lcmdlbmN5QWxlcnQiLCJhbGVydCIsInB1c2giLCJ1cGRhdGVGdWVsQ29uc3VtcHRpb24iLCJkaXN0YW5jZSIsImNvbnN1bWVkIiwic3RhdGljcyIsImZpbmROZWFyYnkiLCJtYXhEaXN0YW5jZSIsImZpbmQiLCIkbmVhciIsIiRnZW9tZXRyeSIsIiRtYXhEaXN0YW5jZSIsImZpbmRBdmFpbGFibGUiLCIkZ3RlIiwiJGV4aXN0cyIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlcyI6WyJWZWhpY2xlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IG1vbmdvb3NlID0gcmVxdWlyZSgnbW9uZ29vc2UnKTtcclxuXHJcbmNvbnN0IHZlaGljbGVTY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hKFxyXG4gIHtcclxuICAgIC8vINmF2LnZhNmI2YXYp9iqINij2LPYp9iz2YrYqVxyXG4gICAgdmVoaWNsZU51bWJlcjoge1xyXG4gICAgICB0eXBlOiBTdHJpbmcsXHJcbiAgICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gICAgICB1bmlxdWU6IHRydWVcclxuICAgIH0sXHJcbiAgICBwbGF0ZU51bWJlcjoge1xyXG4gICAgICB0eXBlOiBTdHJpbmcsXHJcbiAgICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gICAgICB1bmlxdWU6IHRydWUsXHJcbiAgICB9LFxyXG4gICAgdHlwZToge1xyXG4gICAgICB0eXBlOiBTdHJpbmcsXHJcbiAgICAgIGVudW06IFsnYnVzJywgJ3ZhbicsICdjYXInLCAndHJ1Y2snXSxcclxuICAgICAgcmVxdWlyZWQ6IHRydWUsXHJcbiAgICB9LFxyXG4gICAgYnJhbmQ6IFN0cmluZyxcclxuICAgIG1vZGVsOiBTdHJpbmcsXHJcbiAgICB5ZWFyOiBOdW1iZXIsXHJcbiAgICBjb2xvcjogU3RyaW5nLFxyXG4gICAgY2FwYWNpdHk6IHtcclxuICAgICAgdHlwZTogTnVtYmVyLFxyXG4gICAgICByZXF1aXJlZDogdHJ1ZSxcclxuICAgICAgbWluOiAxLFxyXG4gICAgfSxcclxuXHJcbiAgICAvLyDZhdiz2KrZiNmJINin2YTZiNmC2YjYryAo2YTZhNiq2YjYp9mB2YIg2YXYuSDYp9mE2KfYrtiq2KjYp9ix2KfYqilcclxuICAgIGZ1ZWxMZXZlbDoge1xyXG4gICAgICB0eXBlOiBOdW1iZXIsXHJcbiAgICAgIGRlZmF1bHQ6IDEwMCxcclxuICAgIH0sXHJcblxyXG4gICAgLy8g2K3Yp9mE2Kkg2KfZhNmF2LHZg9io2KlcclxuICAgIHN0YXR1czoge1xyXG4gICAgICB0eXBlOiBTdHJpbmcsXHJcbiAgICAgIGVudW06IFsnYWN0aXZlJywgJ21haW50ZW5hbmNlJywgJ2luYWN0aXZlJywgJ2VtZXJnZW5jeSddLFxyXG4gICAgICBkZWZhdWx0OiAnYWN0aXZlJyxcclxuICAgIH0sXHJcblxyXG4gICAgLy8g2YXYudmE2YjZhdin2KogR1BTINmI2KfZhNmF2YjZgti5XHJcbiAgICBncHNEZXZpY2U6IHtcclxuICAgICAgZGV2aWNlSWQ6IFN0cmluZyxcclxuICAgICAgbGFzdFVwZGF0ZTogRGF0ZSxcclxuICAgICAgY3VycmVudExvY2F0aW9uOiB7XHJcbiAgICAgICAgdHlwZToge1xyXG4gICAgICAgICAgdHlwZTogU3RyaW5nLFxyXG4gICAgICAgICAgZW51bTogWydQb2ludCddLFxyXG4gICAgICAgICAgZGVmYXVsdDogJ1BvaW50JyxcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNvb3JkaW5hdGVzOiB7XHJcbiAgICAgICAgICB0eXBlOiBbTnVtYmVyXSwgLy8gW2xvbmdpdHVkZSwgbGF0aXR1ZGVdXHJcbiAgICAgICAgfSxcclxuICAgICAgICBhZGRyZXNzOiBTdHJpbmcsXHJcbiAgICAgICAgc3BlZWQ6IE51bWJlciwgLy8ga20vaFxyXG4gICAgICAgIGhlYWRpbmc6IE51bWJlciwgLy8g2KfYqtis2KfZhyDYp9mE2K3YsdmD2KkgKDAtMzYwKVxyXG4gICAgICB9LFxyXG4gICAgfSxcclxuXHJcbiAgICAvLyDYp9mE2LPYp9im2YIg2KfZhNit2KfZhNmKXHJcbiAgICBjdXJyZW50RHJpdmVyOiB7XHJcbiAgICAgIHR5cGU6IG1vbmdvb3NlLlNjaGVtYS5UeXBlcy5PYmplY3RJZCxcclxuICAgICAgcmVmOiAnVXNlcicsXHJcbiAgICB9LFxyXG5cclxuICAgIC8vINit2YLZhCDZhdiz2KrYudin2LEg2YTZhNiz2KfYptmCICjZhNmE2KrZiNin2YHZgiDZhdi5INin2YTYp9iu2KrYqNin2LHYp9iqKVxyXG4gICAgZHJpdmVyOiB7XHJcbiAgICAgIHR5cGU6IG1vbmdvb3NlLlNjaGVtYS5UeXBlcy5PYmplY3RJZCxcclxuICAgICAgcmVmOiAnVXNlcicsXHJcbiAgICB9LFxyXG5cclxuICAgIC8vINin2YTZhdiz2KfYsSDYp9mE2K3Yp9mE2YpcclxuICAgIGN1cnJlbnRSb3V0ZToge1xyXG4gICAgICB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsXHJcbiAgICAgIHJlZjogJ1RyYW5zcG9ydFJvdXRlJyxcclxuICAgIH0sXHJcblxyXG4gICAgLy8g2YXYs9in2YHYqSDYp9mE2YXYsdmD2KjYqVxyXG4gICAgbWlsZWFnZToge1xyXG4gICAgICB0eXBlOiBOdW1iZXIsXHJcbiAgICAgIGRlZmF1bHQ6IDAsXHJcbiAgICB9LFxyXG5cclxuICAgIC8vINin2LPYqtmH2YTYp9mDINin2YTZiNmC2YjYr1xyXG4gICAgZnVlbENvbnN1bXB0aW9uOiB7XHJcbiAgICAgIGZ1ZWxUeXBlOiB7XHJcbiAgICAgICAgdHlwZTogU3RyaW5nLFxyXG4gICAgICAgIGVudW06IFsncGV0cm9sJywgJ2RpZXNlbCcsICdlbGVjdHJpYycsICdoeWJyaWQnXSxcclxuICAgICAgfSxcclxuICAgICAgdGFua0NhcGFjaXR5OiBOdW1iZXIsIC8vINmE2KrYsVxyXG4gICAgICBjdXJyZW50RnVlbExldmVsOiBOdW1iZXIsIC8vINmE2KrYsVxyXG4gICAgICBhdmVyYWdlQ29uc3VtcHRpb246IE51bWJlciwgLy8g2YTYqtixLzEwMNmD2YVcclxuICAgICAgbGFzdFJlZmlsbDoge1xyXG4gICAgICAgIGRhdGU6IERhdGUsXHJcbiAgICAgICAgYW1vdW50OiBOdW1iZXIsXHJcbiAgICAgICAgY29zdDogTnVtYmVyLFxyXG4gICAgICAgIHN0YXRpb246IFN0cmluZyxcclxuICAgICAgfSxcclxuICAgIH0sXHJcblxyXG4gICAgLy8g2LXZitin2YbYqSDYp9mE2YXYsdmD2KjYqVxyXG4gICAgbWFpbnRlbmFuY2U6IHtcclxuICAgICAgbGFzdE1haW50ZW5hbmNlRGF0ZTogRGF0ZSxcclxuICAgICAgbmV4dE1haW50ZW5hbmNlRGF0ZTogRGF0ZSxcclxuICAgICAgbmV4dE1haW50ZW5hbmNlS206IE51bWJlcixcclxuICAgICAgY3VycmVudE9kb21ldGVyOiBOdW1iZXIsIC8vINmD2YVcclxuICAgIH0sXHJcblxyXG4gICAgLy8g2LPYrNmEINin2YTYtdmK2KfZhtipICjZhNmE2KrZiNin2YHZgiDZhdi5INin2YTYp9iu2KrYqNin2LHYp9iqKVxyXG4gICAgbWFpbnRlbmFuY2VIaXN0b3J5OiB7XHJcbiAgICAgIHR5cGU6IFt7XHJcbiAgICAgICAgZGF0ZTogeyB0eXBlOiBEYXRlLCBkZWZhdWx0OiBEYXRlLm5vdyB9LFxyXG4gICAgICAgIHR5cGU6IHsgdHlwZTogU3RyaW5nIH0sXHJcbiAgICAgICAgZGVzY3JpcHRpb246IFN0cmluZyxcclxuICAgICAgICBjb3N0OiBOdW1iZXIsXHJcbiAgICAgICAgd29ya3Nob3A6IFN0cmluZyxcclxuICAgICAgfV0sXHJcbiAgICAgIGRlZmF1bHQ6IFtdLFxyXG4gICAgfSxcclxuXHJcbiAgICAvLyDYqtij2YXZitmGINin2YTZhdix2YPYqNipXHJcbiAgICBpbnN1cmFuY2U6IHtcclxuICAgICAgY29tcGFueTogU3RyaW5nLFxyXG4gICAgICBwb2xpY3lOdW1iZXI6IFN0cmluZyxcclxuICAgICAgc3RhcnREYXRlOiBEYXRlLFxyXG4gICAgICBleHBpcnlEYXRlOiBEYXRlLFxyXG4gICAgICBjb3ZlcmFnZUFtb3VudDogTnVtYmVyLFxyXG4gICAgICBhbm51YWxDb3N0OiBOdW1iZXIsXHJcbiAgICB9LFxyXG5cclxuICAgIC8vINmF2LHYp9mC2KjYqSDYp9mE2LPZhNin2YXYqVxyXG4gICAgc2FmZXR5OiB7XHJcbiAgICAgIGxhc3RJbnNwZWN0aW9uRGF0ZTogRGF0ZSxcclxuICAgICAgbmV4dEluc3BlY3Rpb25EYXRlOiBEYXRlLFxyXG4gICAgICBlbWVyZ2VuY3lBbGVydHM6IFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUsXHJcbiAgICAgICAgICB0eXBlOiB7XHJcbiAgICAgICAgICAgIHR5cGU6IFN0cmluZyxcclxuICAgICAgICAgICAgZW51bTogWydhY2NpZGVudCcsICdicmVha2Rvd24nLCAnc3BlZWRpbmcnLCAnaGFyc2hfYnJha2luZycsICdkZXZpYXRpb24nXSxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBsb2NhdGlvbjoge1xyXG4gICAgICAgICAgICB0eXBlOiB7XHJcbiAgICAgICAgICAgICAgdHlwZTogU3RyaW5nLFxyXG4gICAgICAgICAgICAgIGRlZmF1bHQ6ICdQb2ludCcsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGNvb3JkaW5hdGVzOiBbTnVtYmVyXSxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBzZXZlcml0eToge1xyXG4gICAgICAgICAgICB0eXBlOiBTdHJpbmcsXHJcbiAgICAgICAgICAgIGVudW06IFsnbG93JywgJ21lZGl1bScsICdoaWdoJywgJ2NyaXRpY2FsJ10sXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgcmVzb2x2ZWQ6IHtcclxuICAgICAgICAgICAgdHlwZTogQm9vbGVhbixcclxuICAgICAgICAgICAgZGVmYXVsdDogZmFsc2UsXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgcmVzb2x2ZWRBdDogRGF0ZSxcclxuICAgICAgICB9LFxyXG4gICAgICBdLFxyXG4gICAgICBzcGVlZGluZ0luY2lkZW50czoge1xyXG4gICAgICAgIHR5cGU6IE51bWJlcixcclxuICAgICAgICBkZWZhdWx0OiAwLFxyXG4gICAgICB9LFxyXG4gICAgICBoYXJzaEJyYWtpbmdJbmNpZGVudHM6IHtcclxuICAgICAgICB0eXBlOiBOdW1iZXIsXHJcbiAgICAgICAgZGVmYXVsdDogMCxcclxuICAgICAgfSxcclxuICAgIH0sXHJcblxyXG4gICAgLy8g2KfZhNix2YPYp9ioINin2YTZhdi52YrZhtmK2YZcclxuICAgIGFzc2lnbmVkUGFzc2VuZ2VyczogW1xyXG4gICAgICB7XHJcbiAgICAgICAgdHlwZTogbW9uZ29vc2UuU2NoZW1hLlR5cGVzLk9iamVjdElkLFxyXG4gICAgICAgIHJlZjogJ1VzZXInLFxyXG4gICAgICB9LFxyXG4gICAgXSxcclxuXHJcbiAgICAvLyDYpdit2LXYp9im2YrYp9iqXHJcbiAgICBzdGF0aXN0aWNzOiB7XHJcbiAgICAgIHRvdGFsRGlzdGFuY2VDb3ZlcmVkOiB7XHJcbiAgICAgICAgdHlwZTogTnVtYmVyLFxyXG4gICAgICAgIGRlZmF1bHQ6IDAsXHJcbiAgICAgIH0sIC8vINmD2YVcclxuICAgICAgdG90YWxGdWVsQ29uc3VtZWQ6IHtcclxuICAgICAgICB0eXBlOiBOdW1iZXIsXHJcbiAgICAgICAgZGVmYXVsdDogMCxcclxuICAgICAgfSwgLy8g2YTYqtixXHJcbiAgICAgIHRvdGFsTWFpbnRlbmFuY2VDb3N0OiB7XHJcbiAgICAgICAgdHlwZTogTnVtYmVyLFxyXG4gICAgICAgIGRlZmF1bHQ6IDAsXHJcbiAgICAgIH0sIC8vINix2YrYp9mEXHJcbiAgICAgIGF2ZXJhZ2VTcGVlZDogTnVtYmVyLCAvLyBrbS9oXHJcbiAgICAgIHRyaXBDb3VudDoge1xyXG4gICAgICAgIHR5cGU6IE51bWJlcixcclxuICAgICAgICBkZWZhdWx0OiAwLFxyXG4gICAgICB9LFxyXG4gICAgfSxcclxuXHJcbiAgICAvLyDZhdi52YTZiNmF2KfYqiDYpdi22KfZgdmK2KlcclxuICAgIG5vdGVzOiBTdHJpbmcsXHJcbiAgICBkb2N1bWVudHM6IFtcclxuICAgICAge1xyXG4gICAgICAgIG5hbWU6IFN0cmluZyxcclxuICAgICAgICB0eXBlOiBTdHJpbmcsXHJcbiAgICAgICAgdXJsOiBTdHJpbmcsXHJcbiAgICAgICAgdXBsb2FkRGF0ZTogRGF0ZSxcclxuICAgICAgfSxcclxuICAgIF0sXHJcblxyXG4gICAgaXNBY3RpdmU6IHtcclxuICAgICAgdHlwZTogQm9vbGVhbixcclxuICAgICAgZGVmYXVsdDogdHJ1ZSxcclxuICAgIH0sXHJcbiAgfSxcclxuICB7XHJcbiAgICB0aW1lc3RhbXBzOiB0cnVlLFxyXG4gIH1cclxuKTtcclxuXHJcbi8vIEluZGV4ZXMg2YTZhNio2K3YqyDZiNin2YTYo9iv2KfYoVxyXG52ZWhpY2xlU2NoZW1hLmluZGV4KHsgc3RhdHVzOiAxLCBpc0FjdGl2ZTogMSB9KTtcclxudmVoaWNsZVNjaGVtYS5pbmRleCh7IGN1cnJlbnREcml2ZXI6IDEgfSk7XHJcbnZlaGljbGVTY2hlbWEuaW5kZXgoeyAnZ3BzRGV2aWNlLmN1cnJlbnRMb2NhdGlvbi5jb29yZGluYXRlcyc6ICcyZHNwaGVyZScgfSk7XHJcblxyXG4vLyBWaXJ0dWFsINmE2YTYrdi12YjZhCDYudmE2Ykg2K3Yp9mE2Kkg2KfZhNmI2YLZiNivXHJcbnZlaGljbGVTY2hlbWEudmlydHVhbCgnZnVlbFN0YXR1cycpLmdldChmdW5jdGlvbiAoKSB7XHJcbiAgaWYgKCF0aGlzLmZ1ZWxDb25zdW1wdGlvbi5jdXJyZW50RnVlbExldmVsIHx8ICF0aGlzLmZ1ZWxDb25zdW1wdGlvbi50YW5rQ2FwYWNpdHkpIHtcclxuICAgIHJldHVybiAndW5rbm93bic7XHJcbiAgfVxyXG4gIGNvbnN0IHBlcmNlbnRhZ2UgPVxyXG4gICAgKHRoaXMuZnVlbENvbnN1bXB0aW9uLmN1cnJlbnRGdWVsTGV2ZWwgLyB0aGlzLmZ1ZWxDb25zdW1wdGlvbi50YW5rQ2FwYWNpdHkpICogMTAwO1xyXG4gIGlmIChwZXJjZW50YWdlIDwgMjApIHJldHVybiAnY3JpdGljYWwnO1xyXG4gIGlmIChwZXJjZW50YWdlIDwgNDApIHJldHVybiAnbG93JztcclxuICBpZiAocGVyY2VudGFnZSA8IDcwKSByZXR1cm4gJ21lZGl1bSc7XHJcbiAgcmV0dXJuICdnb29kJztcclxufSk7XHJcblxyXG4vLyBWaXJ0dWFsINmE2YTYrdi12YjZhCDYudmE2Ykg2K3Yp9mE2Kkg2KfZhNi12YrYp9mG2KlcclxudmVoaWNsZVNjaGVtYS52aXJ0dWFsKCdtYWludGVuYW5jZVN0YXR1cycpLmdldChmdW5jdGlvbiAoKSB7XHJcbiAgaWYgKCF0aGlzLm1haW50ZW5hbmNlLm5leHRNYWludGVuYW5jZURhdGUpIHJldHVybiAndW5rbm93bic7XHJcbiAgY29uc3QgZGF5c1VudGlsTWFpbnRlbmFuY2UgPSBNYXRoLmNlaWwoXHJcbiAgICAodGhpcy5tYWludGVuYW5jZS5uZXh0TWFpbnRlbmFuY2VEYXRlIC0gbmV3IERhdGUoKSkgLyAoMTAwMCAqIDYwICogNjAgKiAyNClcclxuICApO1xyXG4gIGlmIChkYXlzVW50aWxNYWludGVuYW5jZSA8IDApIHJldHVybiAnb3ZlcmR1ZSc7XHJcbiAgaWYgKGRheXNVbnRpbE1haW50ZW5hbmNlIDw9IDcpIHJldHVybiAndXJnZW50JztcclxuICBpZiAoZGF5c1VudGlsTWFpbnRlbmFuY2UgPD0gMzApIHJldHVybiAnc29vbic7XHJcbiAgcmV0dXJuICdnb29kJztcclxufSk7XHJcblxyXG4vLyBNZXRob2Qg2YTYqtit2K/ZitirINmF2YjZgti5IEdQU1xyXG52ZWhpY2xlU2NoZW1hLm1ldGhvZHMudXBkYXRlR1BTTG9jYXRpb24gPSBmdW5jdGlvbiAobG9jYXRpb24sIHNwZWVkLCBoZWFkaW5nKSB7XHJcbiAgdGhpcy5ncHNEZXZpY2UuY3VycmVudExvY2F0aW9uID0ge1xyXG4gICAgdHlwZTogJ1BvaW50JyxcclxuICAgIGNvb3JkaW5hdGVzOiBsb2NhdGlvbi5jb29yZGluYXRlcyB8fCBbbG9jYXRpb24ubG9uZ2l0dWRlLCBsb2NhdGlvbi5sYXRpdHVkZV0sXHJcbiAgfTtcclxuICBpZiAoc3BlZWQgIT09IHVuZGVmaW5lZCkgdGhpcy5jdXJyZW50U3BlZWQgPSBzcGVlZDtcclxuICBpZiAoaGVhZGluZyAhPT0gdW5kZWZpbmVkKSB0aGlzLmdwc0RldmljZS5oZWFkaW5nID0gaGVhZGluZztcclxuICB0aGlzLmdwc0RldmljZS5sYXN0VXBkYXRlID0gbmV3IERhdGUoKTtcclxuICByZXR1cm4gdGhpcy5zYXZlKCk7XHJcbn07XHJcblxyXG4vLyBNZXRob2Qg2YTYpdi22KfZgdipINiq2YbYqNmK2Ycg2LfZiNin2LHYplxyXG52ZWhpY2xlU2NoZW1hLm1ldGhvZHMuYWRkRW1lcmdlbmN5QWxlcnQgPSBmdW5jdGlvbiAoYWxlcnQpIHtcclxuICB0aGlzLnNhZmV0eS5lbWVyZ2VuY3lBbGVydHMucHVzaCh7XHJcbiAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXHJcbiAgICB0eXBlOiBhbGVydC50eXBlLFxyXG4gICAgbG9jYXRpb246IGFsZXJ0LmxvY2F0aW9uLFxyXG4gICAgc2V2ZXJpdHk6IGFsZXJ0LnNldmVyaXR5LFxyXG4gIH0pO1xyXG5cclxuICAvLyDYqtit2K/ZitirINit2KfZhNipINin2YTZhdix2YPYqNipINmE2YTYt9mI2KfYsdimINin2YTYrdix2KzYqVxyXG4gIGlmIChhbGVydC5zZXZlcml0eSA9PT0gJ2NyaXRpY2FsJykge1xyXG4gICAgdGhpcy5zdGF0dXMgPSAnZW1lcmdlbmN5JztcclxuICB9XHJcblxyXG4gIHJldHVybiB0aGlzLnNhdmUoKTtcclxufTtcclxuXHJcbi8vIE1ldGhvZCDZhNiq2K3Yr9mK2Ksg2KfYs9iq2YfZhNin2YMg2KfZhNmI2YLZiNivXHJcbnZlaGljbGVTY2hlbWEubWV0aG9kcy51cGRhdGVGdWVsQ29uc3VtcHRpb24gPSBmdW5jdGlvbiAoZGlzdGFuY2UpIHtcclxuICBpZiAodGhpcy5mdWVsQ29uc3VtcHRpb24uYXZlcmFnZUNvbnN1bXB0aW9uKSB7XHJcbiAgICBjb25zdCBjb25zdW1lZCA9IChkaXN0YW5jZSAvIDEwMCkgKiB0aGlzLmZ1ZWxDb25zdW1wdGlvbi5hdmVyYWdlQ29uc3VtcHRpb247XHJcbiAgICB0aGlzLmZ1ZWxDb25zdW1wdGlvbi5jdXJyZW50RnVlbExldmVsIC09IGNvbnN1bWVkO1xyXG4gICAgdGhpcy5zdGF0aXN0aWNzLnRvdGFsRnVlbENvbnN1bWVkICs9IGNvbnN1bWVkO1xyXG4gICAgdGhpcy5zdGF0aXN0aWNzLnRvdGFsRGlzdGFuY2VDb3ZlcmVkICs9IGRpc3RhbmNlO1xyXG4gIH1cclxuICByZXR1cm4gdGhpcy5zYXZlKCk7XHJcbn07XHJcblxyXG4vLyBTdGF0aWMgbWV0aG9kINmE2YTYqNit2Ksg2LnZhiDZhdix2YPYqNin2Kog2YLYsdmK2KjYqVxyXG52ZWhpY2xlU2NoZW1hLnN0YXRpY3MuZmluZE5lYXJieSA9IGZ1bmN0aW9uIChsb25naXR1ZGUsIGxhdGl0dWRlLCBtYXhEaXN0YW5jZSA9IDUwMDApIHtcclxuICByZXR1cm4gdGhpcy5maW5kKHtcclxuICAgICdncHNEZXZpY2UuY3VycmVudExvY2F0aW9uLmNvb3JkaW5hdGVzJzoge1xyXG4gICAgICAkbmVhcjoge1xyXG4gICAgICAgICRnZW9tZXRyeToge1xyXG4gICAgICAgICAgdHlwZTogJ1BvaW50JyxcclxuICAgICAgICAgIGNvb3JkaW5hdGVzOiBbbG9uZ2l0dWRlLCBsYXRpdHVkZV0sXHJcbiAgICAgICAgfSxcclxuICAgICAgICAkbWF4RGlzdGFuY2U6IG1heERpc3RhbmNlLFxyXG4gICAgICB9LFxyXG4gICAgfSxcclxuICAgIHN0YXR1czogJ2FjdGl2ZScsXHJcbiAgICBpc0FjdGl2ZTogdHJ1ZSxcclxuICB9KTtcclxufTtcclxuXHJcbi8vIFN0YXRpYyBtZXRob2Qg2YTZhNit2LXZiNmEINi52YTZiSDYp9mE2YXYsdmD2KjYp9iqINin2YTZhdiq2KfYrdipXHJcbnZlaGljbGVTY2hlbWEuc3RhdGljcy5maW5kQXZhaWxhYmxlID0gZnVuY3Rpb24gKGNhcGFjaXR5KSB7XHJcbiAgcmV0dXJuIHRoaXMuZmluZCh7XHJcbiAgICBzdGF0dXM6ICdhY3RpdmUnLFxyXG4gICAgaXNBY3RpdmU6IHRydWUsXHJcbiAgICBjYXBhY2l0eTogeyAkZ3RlOiBjYXBhY2l0eSB9LFxyXG4gICAgY3VycmVudERyaXZlcjogeyAkZXhpc3RzOiB0cnVlIH0sXHJcbiAgfSk7XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IG1vbmdvb3NlLm1vZGVsKCdWZWhpY2xlJywgdmVoaWNsZVNjaGVtYSk7XHJcbiJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsUUFBUSxHQUFHQyxPQUFPLENBQUMsVUFBVSxDQUFDO0FBRXBDLE1BQU1DLGFBQWEsR0FBRyxJQUFJRixRQUFRLENBQUNHLE1BQU0sQ0FDdkM7RUFDRTtFQUNBQyxhQUFhLEVBQUU7SUFDYkMsSUFBSSxFQUFFQyxNQUFNO0lBQ1pDLFFBQVEsRUFBRSxJQUFJO0lBQ2RDLE1BQU0sRUFBRTtFQUNWLENBQUM7RUFDREMsV0FBVyxFQUFFO0lBQ1hKLElBQUksRUFBRUMsTUFBTTtJQUNaQyxRQUFRLEVBQUUsSUFBSTtJQUNkQyxNQUFNLEVBQUU7RUFDVixD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