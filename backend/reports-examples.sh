#!/bin/bash
# Reports System - Quick Usage Examples
# أمثلة الاستخدام السريع لنظام التقارير

echo "📊 نظام التقارير - أمثلة الاستخدام"
echo "===================================="
echo ""

# Set your token
TOKEN="your-jwt-token-here"
API="http://localhost:3001/api/v1/reports"

# ============================================================================
# 1. عرض القوالب المتاحة
# ============================================================================
echo "1️⃣  عرض القوالب المتاحة"
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo ""
echo "curl -X GET $API/templates \\"
echo "  -H \"Authorization: Bearer $TOKEN\""
echo ""

# ============================================================================
# 2. إنشاء تقرير ملخص الدفع
# ============================================================================
echo "2️⃣  إنشاء تقرير ملخص الدفع"
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo ""
echo "curl -X POST $API/generate \\"
echo "  -H \"Authorization: Bearer $TOKEN\" \\"
echo "  -H \"Content-Type: application/json\" \\"
echo "  -d '{"
echo "    \"templateType\": \"PAYMENT_SUMMARY\","
echo "    \"filters\": {"
echo "      \"startDate\": \"2026-01-01\","
echo "      \"endDate\": \"2026-02-01\""
echo "    }"
echo "  }'"
echo ""

# ============================================================================
# 3. تصدير التقرير إلى CSV
# ============================================================================
echo "3️⃣  تصدير التقرير إلى CSV"
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo ""
echo "curl -X POST $API/export \\"
echo "  -H \"Authorization: Bearer $TOKEN\" \\"
echo "  -H \"Content-Type: application/json\" \\"
echo "  -d '{"
echo "    \"templateType\": \"PAYMENT_SUMMARY\","
echo "    \"format\": \"csv\""
echo "  }' > payment_report.csv"
echo ""

# ============================================================================
# 4. تصدير التقرير إلى Excel
# ============================================================================
echo "4️⃣  تصدير التقرير إلى Excel"
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo ""
echo "curl -X POST $API/export \\"
echo "  -H \"Authorization: Bearer $TOKEN\" \\"
echo "  -H \"Content-Type: application/json\" \\"
echo "  -d '{"
echo "    \"templateType\": \"EMAIL_REPORT\","
echo "    \"format\": \"excel\""
echo "  }' > email_report.xlsx"
echo ""

# ============================================================================
# 5. تصدير التقرير إلى PDF
# ============================================================================
echo "5️⃣  تصدير التقرير إلى PDF"
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo ""
echo "curl -X POST $API/export \\"
echo "  -H \"Authorization: Bearer $TOKEN\" \\"
echo "  -H \"Content-Type: application/json\" \\"
echo "  -d '{"
echo "    \"templateType\": \"SMS_REPORT\","
echo "    \"format\": \"pdf\""
echo "  }' > sms_report.pdf"
echo ""

# ============================================================================
# 6. جدولة تقرير يومي
# ============================================================================
echo "6️⃣  جدولة تقرير يومي"
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo ""
echo "curl -X POST $API/schedule \\"
echo "  -H \"Authorization: Bearer $TOKEN\" \\"
echo "  -H \"Content-Type: application/json\" \\"
echo "  -d '{"
echo "    \"templateType\": \"PAYMENT_SUMMARY\","
echo "    \"schedule\": \"0 8 * * *\","
echo "    \"format\": \"pdf\","
echo "    \"email\": \"manager@company.com\""
echo "  }'"
echo ""
echo "ملاحظة: 0 8 * * * = كل يوم الساعة 8 صباحاً"
echo ""

# ============================================================================
# 7. جدولة تقرير أسبوعي
# ============================================================================
echo "7️⃣  جدولة تقرير أسبوعي (كل الاثنين)"
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo ""
echo "curl -X POST $API/schedule \\"
echo "  -H \"Authorization: Bearer $TOKEN\" \\"
echo "  -H \"Content-Type: application/json\" \\"
echo "  -d '{"
echo "    \"templateType\": \"REVENUE\","
echo "    \"schedule\": \"0 9 * * 1\","
echo "    \"format\": \"excel\","
echo "    \"email\": \"cfo@company.com\""
echo "  }'"
echo ""
echo "ملاحظة: 0 9 * * 1 = كل الاثنين الساعة 9 صباحاً"
echo ""

# ============================================================================
# 8. الحصول على التحليلات والاتجاهات
# ============================================================================
echo "8️⃣  الحصول على التحليلات والاتجاهات"
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo ""
echo "curl -X GET \"$API/analytics?reportType=PAYMENT_SUMMARY&days=30\" \\"
echo "  -H \"Authorization: Bearer $TOKEN\""
echo ""

# ============================================================================
# 9. مقارنة التقارير
# ============================================================================
echo "9️⃣  مقارنة عدة تقارير"
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo ""
echo "curl -X POST $API/compare \\"
echo "  -H \"Authorization: Bearer $TOKEN\" \\"
echo "  -H \"Content-Type: application/json\" \\"
echo "  -d '{"
echo "    \"templates\": [\"PAYMENT_SUMMARY\", \"EMAIL_REPORT\", \"SMS_REPORT\"],"
echo "    \"filters\": { \"days\": 7 }"
echo "  }'"
echo ""

# ============================================================================
# 10. الحصول على تقرير محدد
# ============================================================================
echo "🔟  الحصول على تقرير محدد"
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo ""
echo "curl -X GET $API/SYSTEM_HEALTH \\"
echo "  -H \"Authorization: Bearer $TOKEN\""
echo ""

# ============================================================================
# صيغ Cron للجدولة
# ============================================================================
echo ""
echo "📅 صيغ Cron الشهيرة:"
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo ""
echo "0 8 * * *      = كل يوم الساعة 8 صباحاً"
echo "0 9 * * 1      = كل الاثنين الساعة 9 صباحاً"
echo "0 0 1 * *      = أول كل شهر منتصف الليل"
echo "*/30 * * * *   = كل 30 دقيقة"
echo "0 */6 * * *    = كل 6 ساعات"
echo "0 12 * * *     = كل يوم الظهيرة"
echo "0 18 * * *     = كل يوم الساعة 6 مساءً"
echo ""

# ============================================================================
# الملفات المدعومة للتصدير
# ============================================================================
echo ""
echo "📄 الملفات المدعومة للتصدير:"
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo ""
echo "✅ CSV       - للاستيراد والمعالجة"
echo "✅ Excel     - للتحليل المتقدم"
echo "✅ PDF       - للطباعة والمشاركة"
echo ""

# ============================================================================
# قوالب التقارير المتاحة
# ============================================================================
echo ""
echo "📊 قوالب التقارير المتاحة:"
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo ""
echo "1. PAYMENT_SUMMARY    - ملخص الدفع"
echo "2. EMAIL_REPORT       - تقرير البريد الإلكتروني"
echo "3. SMS_REPORT         - تقرير الرسائل النصية"
echo "4. USER_ACTIVITY      - نشاط المستخدمين"
echo "5. SYSTEM_HEALTH      - صحة النظام"
echo "6. REVENUE            - الإيرادات والأرباح"
echo ""

# ============================================================================
# نصائح مهمة
# ============================================================================
echo ""
echo "💡 نصائح مهمة:"
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo ""
echo "✓ استبدل YOUR_TOKEN برمزك JWT الفعلي"
echo "✓ تأكد من أن الخادم يعمل على http://localhost:3001"
echo "✓ استخدم -u لحفظ الملفات: curl ... -u filename"
echo "✓ جميع الطلبات تتطلب المصادقة"
echo "✓ يمكن تخصيص الفترة باستخدام startDate و endDate"
echo ""
