
> alawael-erp-backend@1.0.0 test
> jest --coverage

node.exe : FAIL api/tests/advancedSearch.test.js
At line:1 char:1
+ & "C:\Program Files\nodejs/node.exe" "C:\Program 
Files\nodejs/node_mo ...
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
~~~~~~~~~~~~~~~
    + CategoryInfo          : NotSpecified: (FAIL api/t 
   ests/advancedSearch.test.js:String) [], RemoteExcep  
  tion
    + FullyQualifiedErrorId : NativeCommandError
 
  AdvancedSearchService Tests
    Basic Search Operations
      ظêأ should search by single field (17 ms)
      ظêأ should search by multiple fields
      ظêأ should return empty array when no matches (1 
ms)
      ظêأ should handle case insensitive search (1 ms)
      ظêأ should search entire object when field is not 
specified (1 ms)
    Fuzzy Search Operations
      ظêأ should perform fuzzy search with typos
      ظêأ should handle partial matches in fuzzy search 
(1 ms)
      ظêأ should calculate similarity score (3 ms)
      ظêأ should handle empty query in fuzzy search
    Filter Operations
      ظêأ should filter by exact value (9 ms)
      ├ù should filter with greater than operator (15 
ms)
      ظêأ should filter with less than operator
      ظêأ should combine multiple filters (AND)
      ├ù should filter with IN operator (1 ms)
      ظêأ should filter with CONTAINS operator
      ├ù should handle date range filter
    Faceted Search
      ظêأ should generate facets for a field
      ظêأ should generate numeric facets with ranges
      ظêأ should handle empty facets
      ظêأ should apply facet filters
    Autocomplete
      ظêأ should provide autocomplete suggestions
      ظêأ should limit autocomplete results
      ظêأ should return unique suggestions
      ظêأ should handle special characters in 
autocomplete
    Sorting
      ظêأ should sort ascending
      ظêأ should sort descending
      ظêأ should sort strings alphabetically
      ظêأ should handle multi-field sort
    Pagination
      ظêأ should paginate results
      ظêأ should return correct page
      ظêأ should handle out of bounds page
    Compound Search
      ظêأ should perform compound search with multiple 
criteria (1 ms)
      ظêأ should combine search with sorting
    Search Statistics
      ظêأ should calculate search statistics
      ظêأ should calculate string statistics
    Export Functionality
      ظêأ should export to CSV
      ظêأ should export to JSON
      ظêأ should export selected fields only
    Error Handling
      ظêأ should handle null data
      ظêأ should handle undefined query
      ظêأ should handle invalid field name
      ظêأ should handle circular references
    Performance
      ظêأ should handle large dataset (5 ms)
      ظêأ should cache frequently used facets
    Edge Cases
      ظêأ should handle empty string search
      ظêأ should handle very long query
      ظêأ should handle special regex characters
      ظêأ should handle unicode characters

  ظù AdvancedSearchService Tests ظ║ Filter Operations 
ظ║ should filter with greater than operator

    assert(received)

    Expected value to be equal to:
      true
    Received:
      false

    Message:
      Should find users with salary > 5000

    [0m [90m 119 |[39m     test([32m'should filter 
with greater than operator'[39m[33m,[39m () 
[33m=>[39m {
     [90m 120 |[39m       [36mconst[39m result 
[33m=[39m 
searchService[33m.[39mfilter(sampleData[33m,[39m [{ 
field[33m:[39m [32m'salary'[39m[33m,[39m 
operator[33m:[39m [32m'gt'[39m[33m,[39m 
value[33m:[39m [35m5000[39m }])[33m;[39m
    [31m[1m>[22m[39m[90m 121 |[39m       
assert(result[33m.[39mlength [33m===[39m 
[35m2[39m[33m,[39m [32m'Should find users with 
salary > 5000'[39m)[33m;[39m
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 122 |[39m     })[33m;[39m
     [90m 123 |[39m
     [90m 124 |[39m     test([32m'should filter with 
less than operator'[39m[33m,[39m () [33m=>[39m 
{[0m

      at Object.assert 
(api/tests/advancedSearch.test.js:121:7)

  ظù AdvancedSearchService Tests ظ║ Filter Operations 
ظ║ should filter with IN operator

    assert(received)

    Expected value to be equal to:
      true
    Received:
      false

    Message:
      Should find all Engineering and Sales members

    [0m [90m 137 |[39m     test([32m'should filter 
with IN operator'[39m[33m,[39m () [33m=>[39m {
     [90m 138 |[39m       [36mconst[39m result 
[33m=[39m 
searchService[33m.[39mfilter(sampleData[33m,[39m [{ 
field[33m:[39m [32m'department'[39m[33m,[39m 
operator[33m:[39m [32m'in'[39m[33m,[39m 
value[33m:[39m [[32m'Engineering'[39m[33m,[39m 
[32m'Sales'[39m] }])[33m;[39m
    [31m[1m>[22m[39m[90m 139 |[39m       
assert(result[33m.[39mlength [33m===[39m 
[35m3[39m[33m,[39m [32m'Should find all 
Engineering and Sales members'[39m)[33m;[39m
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 140 |[39m     })[33m;[39m
     [90m 141 |[39m
     [90m 142 |[39m     test([32m'should filter with 
CONTAINS operator'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.assert 
(api/tests/advancedSearch.test.js:139:7)

  ظù AdvancedSearchService Tests ظ║ Filter Operations 
ظ║ should handle date range filter

    assert(received)

    Expected value to be equal to:
      true
    Received:
      false

    Message:
      Should find users joined after 2023-01-01

    [0m [90m 147 |[39m     test([32m'should handle 
date range filter'[39m[33m,[39m () [33m=>[39m {
     [90m 148 |[39m       [36mconst[39m result 
[33m=[39m 
searchService[33m.[39mfilter(sampleData[33m,[39m [{ 
field[33m:[39m [32m'joinDate'[39m[33m,[39m 
operator[33m:[39m [32m'gte'[39m[33m,[39m 
value[33m:[39m [32m'2023-01-01'[39m }])[33m;[39m
    [31m[1m>[22m[39m[90m 149 |[39m       
assert(result[33m.[39mlength [33m===[39m 
[35m2[39m[33m,[39m [32m'Should find users joined 
after 2023-01-01'[39m)[33m;[39m
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 150 |[39m     })[33m;[39m
     [90m 151 |[39m   })[33m;[39m
     [90m 152 |[39m[0m

      at Object.assert 
(api/tests/advancedSearch.test.js:149:7)

  console.log
    ظ£à ╪ش┘à┘è╪╣ ╪د┘╪د╪«╪ز╪ذ╪د╪▒╪د╪ز ╪ش╪د┘ç╪▓╪ر ┘┘╪ز╪┤╪║┘è┘

      at Object.log (tests/smartNotifications.test.js:428:9)

FAIL api/tests/aiAnalytics.test.js
  AIAnalyticsService Tests
    Attendance Prediction
      ├ù should predict attendance for next period (43 
ms)
      ├ù should predict with historical trend (1 ms)
      ├ù should forecast attendance for multiple 
periods (1 ms)
      ├ù should handle seasonal patterns in attendance
      ├ù should calculate prediction confidence
      ├ù should handle missing data points (1 ms)
    Performance Prediction
      ├ù should predict performance score (1 ms)
      ├ù should identify performance factors
      ├ù should forecast performance trend
      ├ù should detect performance anomalies
      ├ù should compare against baseline
      ├ù should predict performance improvement
    Anomaly Detection
      ├ù should detect unusual patterns (1 ms)
      ├ù should classify anomaly severity
      ├ù should explain anomalies
      ├ù should detect gradual drift (1 ms)
      ├ù should handle threshold customization (5 ms)
    Recommendations
      ├ù should generate smart recommendations
      ├ù should provide actionable recommendations (1 
ms)
      ├ù should rank recommendations by priority
      ├ù should tailor recommendations to user (1 ms)
      ├ù should estimate recommendation impact
      ├ù should provide confidence in recommendations
    Trend Analysis
      ├ù should analyze data trends (1 ms)
      ├ù should identify trend inflection points (1 ms)
      ├ù should calculate trend slope (1 ms)
      ├ù should forecast based on trends
      ├ù should detect seasonality (2 ms)
      ├ù should compare trends over periods (1 ms)
    Model Management
      ├ù should list available models (1 ms)
      ├ù should get model information
      ├ù should train custom model
      ├ù should evaluate model performance
      ├ù should provide model metrics
      ├ù should handle model versioning
    Correlation Analysis
      ├ù should find correlations between variables (1 
ms)
      ├ù should identify strong correlations (1 ms)
      ├ù should distinguish causation from correlation 
(1 ms)
    Data Quality
      ├ù should validate data quality (1 ms)
      ├ù should detect missing values
      ├ù should identify outliers (1 ms)
    Error Handling
      ├ù should handle empty data (2 ms)
      ظêأ should handle single data point
      ├ù should handle all identical values (8 ms)
      ├ù should handle extreme values
    Performance
      ظêأ should process large datasets efficiently (5 
ms)
      ظêأ should cache predictions
    Batch Operations
      ├ù should process batch predictions (2 ms)
      ├ù should handle mixed batch requests (1 ms)

  ظù AIAnalyticsService Tests ظ║ Attendance 
Prediction ظ║ should predict attendance for next period

    assert(received)

    Expected value to be equal to:
      true
    Received:
      false

    [0m [90m 30 |[39m     test([32m'should predict 
attendance for next period'[39m[33m,[39m () 
[33m=>[39m {
     [90m 31 |[39m       [36mconst[39m prediction 
[33m=[39m aiService[33m.[39mpredictAttendance(traini
ngData)[33m;[39m
    [31m[1m>[22m[39m[90m 32 |[39m       
assert(prediction[33m.[39mnextPeriod [33m>=[39m 
[35m0[39m [33m&&[39m 
prediction[33m.[39mnextPeriod [33m<=[39m 
[35m100[39m)[33m;[39m
     [90m    |[39m       [31m[1m^[22m[39m
     [90m 33 |[39m       
assert(prediction[33m.[39mconfidence [33m>=[39m 
[35m0[39m [33m&&[39m 
prediction[33m.[39mconfidence [33m<=[39m 
[35m100[39m)[33m;[39m
     [90m 34 |[39m     })[33m;[39m
     [90m 35 |[39m[0m

      at Object.assert 
(api/tests/aiAnalytics.test.js:32:7)

  ظù AIAnalyticsService Tests ظ║ Attendance 
Prediction ظ║ should predict with historical trend

    assert(received)

    Expected value to be equal to:
      true
    Received:
      undefined

    Message:
      Should indicate trend

    Difference:

      Comparing two different types of values. Expected 
boolean but received undefined.

    [0m [90m 38 |[39m         
considerTrend[33m:[39m [36mtrue[39m[33m,[39m
     [90m 39 |[39m       })[33m;[39m
    [31m[1m>[22m[39m[90m 40 |[39m       
assert(prediction[33m.[39mtrend[33m,[39m 
[32m'Should indicate trend'[39m)[33m;[39m
     [90m    |[39m       [31m[1m^[22m[39m
     [90m 41 |[39m       
assert([[32m'increasing'[39m[33m,[39m 
[32m'decreasing'[39m[33m,[39m [32m'stable'[39m][3
3m.[39mincludes(prediction[33m.[39mtrend))[33m;[39m
     [90m 42 |[39m     })[33m;[39m
     [90m 43 |[39m[0m

      at Object.assert 
(api/tests/aiAnalytics.test.js:40:7)

  ظù AIAnalyticsService Tests ظ║ Attendance 
Prediction ظ║ should forecast attendance for multiple 
periods

    TypeError: Cannot read properties of undefined 
(reading 'length')

    [0m [90m 46 |[39m         periods[33m:[39m 
[35m5[39m[33m,[39m
     [90m 47 |[39m       })[33m;[39m
    [31m[1m>[22m[39m[90m 48 |[39m       
assert(forecast[33m.[39mforecasts[33m.[39mlength 
[33m===[39m [35m5[39m)[33m;[39m
     [90m    |[39m                                 
[31m[1m^[22m[39m
     [90m 49 |[39m       
forecast[33m.[39mforecasts[33m.[39mforEach(f 
[33m=>[39m {
     [90m 50 |[39m         assert(f[33m.[39mvalue 
[33m>=[39m [35m0[39m [33m&&[39m f[33m.[39mvalue 
[33m<=[39m [35m100[39m)[33m;[39m
     [90m 51 |[39m       })[33m;[39m[0m

      at Object.length 
(api/tests/aiAnalytics.test.js:48:33)

  ظù AIAnalyticsService Tests ظ║ Attendance 
Prediction ظ║ should handle seasonal patterns in 
attendance

    assert(received)

    Expected value to be equal to:
      true
    Received:
      undefined

    Message:
      Should detect seasonality

    Difference:

      Comparing two different types of values. Expected 
boolean but received undefined.

    [0m [90m 62 |[39m         seasonal[33m:[39m 
[36mtrue[39m[33m,[39m
     [90m 63 |[39m       })[33m;[39m
    [31m[1m>[22m[39m[90m 64 |[39m       
assert(prediction[33m.[39mseasonalPattern[33m,[39m 
[32m'Should detect seasonality'[39m)[33m;[39m
     [90m    |[39m       [31m[1m^[22m[39m
     [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
     [90m 67 |[39m     test([32m'should calculate 
prediction confidence'[39m[33m,[39m () [33m=>[39m 
{[0m

      at Object.assert 
(api/tests/aiAnalytics.test.js:64:7)

  ظù AIAnalyticsService Tests ظ║ Attendance 
Prediction ظ║ should calculate prediction confidence

    assert(received)

    Expected value to be equal to:
      true
    Received:
      undefined

    Message:
      Should explain confidence

    Difference:

      Comparing two different types of values. Expected 
boolean but received undefined.

    [0m [90m 68 |[39m       [36mconst[39m 
prediction [33m=[39m aiService[33m.[39mpredictAttend
ance(trainingData)[33m;[39m
     [90m 69 |[39m       
assert(prediction[33m.[39mconfidence [33m<=[39m 
[35m100[39m [33m&&[39m 
prediction[33m.[39mconfidence [33m>=[39m 
[35m0[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 70 |[39m       
assert(prediction[33m.[39mconfidenceReason[33m,[39m 
[32m'Should explain confidence'[39m)[33m;[39m
     [90m    |[39m       [31m[1m^[22m[39m
     [90m 71 |[39m     })[33m;[39m
     [90m 72 |[39m
     [90m 73 |[39m     test([32m'should handle 
missing data points'[39m[33m,[39m () [33m=>[39m 
{[0m

      at Object.assert 
(api/tests/aiAnalytics.test.js:70:7)

  ظù AIAnalyticsService Tests ظ║ Attendance 
Prediction ظ║ should handle missing data points

    assert(received)

    Expected value to be equal to:
      true
    Received:
      undefined

    Message:
      Should handle missing data

    Difference:

      Comparing two different types of values. Expected 
boolean but received undefined.

    [0m [90m 79 |[39m
     [90m 80 |[39m       [36mconst[39m prediction 
[33m=[39m aiService[33m.[39mpredictAttendance(incomp
leteData)[33m;[39m
    [31m[1m>[22m[39m[90m 81 |[39m       
assert(prediction[33m.[39mnextPeriod[33m,[39m 
[32m'Should handle missing data'[39m)[33m;[39m
     [90m    |[39m       [31m[1m^[22m[39m
     [90m 82 |[39m     })[33m;[39m
     [90m 83 |[39m   })[33m;[39m
     [90m 84 |[39m[0m

      at Object.assert 
(api/tests/aiAnalytics.test.js:81:7)

  ظù AIAnalyticsService Tests ظ║ Performance 
Prediction ظ║ should predict performance score

    assert(received)

    Expected value to be equal to:
      true
    Received:
      false

    [0m [90m 89 |[39m     test([32m'should predict 
performance score'[39m[33m,[39m () [33m=>[39m {
     [90m 90 |[39m       [36mconst[39m prediction 
[33m=[39m aiService[33m.[39mpredictPerformance(train
ingData)[33m;[39m
    [31m[1m>[22m[39m[90m 91 |[39m       
assert(prediction[33m.[39mnextScore [33m>=[39m 
[35m0[39m [33m&&[39m prediction[33m.[39mnextScore 
[33m<=[39m [35m100[39m)[33m;[39m
     [90m    |[39m       [31m[1m^[22m[39m
     [90m 92 |[39m       
assert(prediction[33m.[39mconfidence [33m>=[39m 
[35m0[39m)[33m;[39m
     [90m 93 |[39m     })[33m;[39m
     [90m 94 |[39m[0m

      at Object.assert 
(api/tests/aiAnalytics.test.js:91:7)

  ظù AIAnalyticsService Tests ظ║ Performance 
Prediction ظ║ should identify performance factors

    assert(received)

    Expected value to be equal to:
      true
    Received:
      false

    Message:
      Should list contributing factors

    [0m [90m  95 |[39m     test([32m'should 
identify performance factors'[39m[33m,[39m () 
[33m=>[39m {
     [90m  96 |[39m       [36mconst[39m prediction 
[33m=[39m aiService[33m.[39mpredictPerformance(train
ingData)[33m;[39m
    [31m[1m>[22m[39m[90m  97 |[39m       assert([
33mArray[39m[33m.[39misArray(prediction[33m.[39mfac
tors)[33m,[39m [32m'Should list contributing 
factors'[39m)[33m;[39m
     [90m     |[39m       [31m[1m^[22m[39m
     [90m  98 |[39m     })[33m;[39m
     [90m  99 |[39m
     [90m 100 |[39m     test([32m'should forecast 
performance trend'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.assert 
(api/tests/aiAnalytics.test.js:97:7)

  ظù AIAnalyticsService Tests ظ║ Performance 
Prediction ظ║ should forecast performance trend

    TypeError: aiService.forecastPerformance is not a 
function

    [0m [90m  99 |[39m
     [90m 100 |[39m     test([32m'should forecast 
performance trend'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 101 |[39m       
[36mconst[39m forecast [33m=[39m aiService[33m.[39
mforecastPerformance(trainingData[33m,[39m {
     [90m     |[39m                                  
[31m[1m^[22m[39m
     [90m 102 |[39m         periods[33m:[39m 
[35m10[39m[33m,[39m
     [90m 103 |[39m       })[33m;[39m
     [90m 104 |[39m       
assert(forecast[33m.[39mforecasts[33m.[39mlength 
[33m===[39m [35m10[39m)[33m;[39m[0m

      at Object.forecastPerformance 
(api/tests/aiAnalytics.test.js:101:34)

  ظù AIAnalyticsService Tests ظ║ Performance 
Prediction ظ║ should detect performance anomalies

    TypeError: aiService.detectPerformanceAnomalies is 
not a function

    [0m [90m 108 |[39m       [36mconst[39m 
dataWithAnomaly [33m=[39m 
[[33m...[39mtrainingData[33m,[39m { date[33m:[39m 
[32m'2024-01-06'[39m[33m,[39m attendance[33m:[39m 
[35m50[39m[33m,[39m performance[33m:[39m 
[35m20[39m[33m,[39m score[33m:[39m [35m30[39m 
}][33m;[39m
     [90m 109 |[39m
    [31m[1m>[22m[39m[90m 110 |[39m       
[36mconst[39m anomalies [33m=[39m aiService[33m.[3
9mdetectPerformanceAnomalies(dataWithAnomaly)[33m;[39m
     [90m     |[39m                                   
[31m[1m^[22m[39m
     [90m 111 |[39m       
assert(anomalies[33m.[39mlength [33m>[39m 
[35m0[39m[33m,[39m [32m'Should detect 
anomalies'[39m)[33m;[39m
     [90m 112 |[39m     })[33m;[39m
     [90m 113 |[39m[0m

      at Object.detectPerformanceAnomalies 
(api/tests/aiAnalytics.test.js:110:35)

  ظù AIAnalyticsService Tests ظ║ Performance 
Prediction ظ║ should compare against baseline

    TypeError: aiService.comparePerformance is not a 
function

    [0m [90m 113 |[39m
     [90m 114 |[39m     test([32m'should compare 
against baseline'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 115 |[39m       
[36mconst[39m comparison [33m=[39m aiService[33m.[
39mcomparePerformance(trainingData[33m,[39m {
     [90m     |[39m                                   
 [31m[1m^[22m[39m
     [90m 116 |[39m         baseline[33m:[39m 
[35m85[39m[33m,[39m
     [90m 117 |[39m       })[33m;[39m
     [90m 118 |[39m       
assert(comparison[33m.[39maboveBaseline [33m!==[39m 
undefined)[33m;[39m[0m

      at Object.comparePerformance 
(api/tests/aiAnalytics.test.js:115:36)

  ظù AIAnalyticsService Tests ظ║ Performance 
Prediction ظ║ should predict performance improvement

    TypeError: aiService.predictImprovement is not a 
function

    [0m [90m 121 |[39m
     [90m 122 |[39m     test([32m'should predict 
performance improvement'[39m[33m,[39m () 
[33m=>[39m {
    [31m[1m>[22m[39m[90m 123 |[39m       
[36mconst[39m prediction [33m=[39m aiService[33m.[
39mpredictImprovement(trainingData)[33m;[39m
     [90m     |[39m                                   
 [31m[1m^[22m[39m
     [90m 124 |[39m       
assert(prediction[33m.[39mprojectedImprovement 
[33m!==[39m undefined)[33m;[39m
     [90m 125 |[39m       
assert(prediction[33m.[39mtimeToTarget [33m!==[39m 
undefined)[33m;[39m
     [90m 126 |[39m     })[33m;[39m[0m

      at Object.predictImprovement 
(api/tests/aiAnalytics.test.js:123:36)

  ظù AIAnalyticsService Tests ظ║ Anomaly Detection 
ظ║ should detect unusual patterns

    assert(received)

    Expected value to be equal to:
      true
    Received:
      false

    Message:
      Should return array of anomalies

    [0m [90m 135 |[39m
     [90m 136 |[39m       [36mconst[39m anomalies 
[33m=[39m aiService[33m.[39mdetectAnomalies(dataWith
Anomaly)[33m;[39m
    [31m[1m>[22m[39m[90m 137 |[39m       assert([
33mArray[39m[33m.[39misArray(anomalies)[33m,[39m 
[32m'Should return array of anomalies'[39m)[33m;[39m
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 138 |[39m       
assert(anomalies[33m.[39mlength [33m>[39m 
[35m0[39m[33m,[39m [32m'Should detect 
anomalies'[39m)[33m;[39m
     [90m 139 |[39m     })[33m;[39m
     [90m 140 |[39m[0m

      at Object.assert 
(api/tests/aiAnalytics.test.js:137:7)

  ظù AIAnalyticsService Tests ظ║ Anomaly Detection 
ظ║ should classify anomaly severity

    TypeError: anomalies.forEach is not a function

    [0m [90m 143 |[39m
     [90m 144 |[39m       [36mconst[39m anomalies 
[33m=[39m aiService[33m.[39mdetectAnomalies(dataWith
Anomaly)[33m;[39m
    [31m[1m>[22m[39m[90m 145 |[39m       
anomalies[33m.[39mforEach(a [33m=>[39m {
     [90m     |[39m                 
[31m[1m^[22m[39m
     [90m 146 |[39m         
assert([[32m'low'[39m[33m,[39m 
[32m'medium'[39m[33m,[39m 
[32m'high'[39m[33m,[39m [32m'critical'[39m][33m.
[39mincludes(a[33m.[39mseverity))[33m;[39m
     [90m 147 |[39m       })[33m;[39m
     [90m 148 |[39m     })[33m;[39m[0m

      at Object.forEach 
(api/tests/aiAnalytics.test.js:145:17)

  ظù AIAnalyticsService Tests ظ║ Anomaly Detection 
ظ║ should explain anomalies

    TypeError: anomalies.forEach is not a function

    [0m [90m 152 |[39m
     [90m 153 |[39m       [36mconst[39m anomalies 
[33m=[39m aiService[33m.[39mdetectAnomalies(dataWith
Anomaly)[33m;[39m
    [31m[1m>[22m[39m[90m 154 |[39m       
anomalies[33m.[39mforEach(a [33m=>[39m {
     [90m     |[39m                 
[31m[1m^[22m[39m
     [90m 155 |[39m         
assert(a[33m.[39mreason[33m,[39m [32m'Should 
explain anomaly'[39m)[33m;[39m
     [90m 156 |[39m       })[33m;[39m
     [90m 157 |[39m     })[33m;[39m[0m

      at Object.forEach 
(api/tests/aiAnalytics.test.js:154:17)

  ظù AIAnalyticsService Tests ظ║ Anomaly Detection 
ظ║ should detect gradual drift

    TypeError: aiService.detectDrift is not a function

    [0m [90m 163 |[39m       }))[33m;[39m
     [90m 164 |[39m
    [31m[1m>[22m[39m[90m 165 |[39m       
[36mconst[39m drift [33m=[39m 
aiService[33m.[39mdetectDrift(driftData)[33m;[39m
     [90m     |[39m                               
[31m[1m^[22m[39m
     [90m 166 |[39m       
assert(drift[33m.[39mdriftDetected [33m!==[39m 
undefined)[33m;[39m
     [90m 167 |[39m       [36mif[39m 
(drift[33m.[39mdriftDetected) {
     [90m 168 |[39m         
assert(drift[33m.[39mdirection[33m,[39m 
[32m'Should indicate drift 
direction'[39m)[33m;[39m[0m

      at Object.detectDrift 
(api/tests/aiAnalytics.test.js:165:31)

  ظù AIAnalyticsService Tests ظ║ Anomaly Detection 
ظ║ should handle threshold customization

    assert(received)

    Expected value to be equal to:
      true
    Received:
      false

    [0m [90m 174 |[39m         threshold[33m:[39m 
[35m2.5[39m[33m,[39m [90m// Custom threshold[39m
     [90m 175 |[39m       })[33m;[39m
    [31m[1m>[22m[39m[90m 176 |[39m       assert([
33mArray[39m[33m.[39misArray(anomalies))[33m;[39m
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 177 |[39m     })[33m;[39m
     [90m 178 |[39m   })[33m;[39m
     [90m 179 |[39m[0m

      at Object.assert 
(api/tests/aiAnalytics.test.js:176:7)

  ظù AIAnalyticsService Tests ظ║ Recommendations ظ║ 
should generate smart recommendations

    TypeError: aiService.generateRecommendations is not 
a function

    [0m [90m 183 |[39m   
describe([32m'Recommendations'[39m[33m,[39m () 
[33m=>[39m {
     [90m 184 |[39m     test([32m'should generate 
smart recommendations'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 185 |[39m       
[36mconst[39m recommendations [33m=[39m aiService[3
3m.[39mgenerateRecommendations(trainingData)[33m;[39m
     [90m     |[39m                                   
      [31m[1m^[22m[39m
     [90m 186 |[39m       assert([33mArray[39m[33m.
[39misArray(recommendations)[33m,[39m [32m'Should 
return array'[39m)[33m;[39m
     [90m 187 |[39m       
assert(recommendations[33m.[39mlength [33m>[39m 
[35m0[39m[33m,[39m [32m'Should have 
recommendations'[39m)[33m;[39m
     [90m 188 |[39m     })[33m;[39m[0m

      at Object.generateRecommendations 
(api/tests/aiAnalytics.test.js:185:41)

  ظù AIAnalyticsService Tests ظ║ Recommendations ظ║ 
should provide actionable recommendations

    TypeError: aiService.generateRecommendations is not 
a function

    [0m [90m 189 |[39m
     [90m 190 |[39m     test([32m'should provide 
actionable recommendations'[39m[33m,[39m () 
[33m=>[39m {
    [31m[1m>[22m[39m[90m 191 |[39m       
[36mconst[39m recommendations [33m=[39m aiService[3
3m.[39mgenerateRecommendations(trainingData)[33m;[39m
     [90m     |[39m                                   
      [31m[1m^[22m[39m
     [90m 192 |[39m       
recommendations[33m.[39mforEach(r [33m=>[39m {
     [90m 193 |[39m         
assert(r[33m.[39maction[33m,[39m [32m'Should have 
action'[39m)[33m;[39m
     [90m 194 |[39m         
assert(r[33m.[39mpriority[33m,[39m [32m'Should 
have priority'[39m)[33m;[39m[0m

      at Object.generateRecommendations 
(api/tests/aiAnalytics.test.js:191:41)

  ظù AIAnalyticsService Tests ظ║ Recommendations ظ║ 
should rank recommendations by priority

    TypeError: aiService.generateRecommendations is not 
a function

    [0m [90m 198 |[39m
     [90m 199 |[39m     test([32m'should rank 
recommendations by priority'[39m[33m,[39m () 
[33m=>[39m {
    [31m[1m>[22m[39m[90m 200 |[39m       
[36mconst[39m recommendations [33m=[39m aiService[3
3m.[39mgenerateRecommendations(trainingData)[33m;[39m
     [90m     |[39m                                   
      [31m[1m^[22m[39m
     [90m 201 |[39m       [36mconst[39m priorities 
[33m=[39m recommendations[33m.[39mmap(r 
[33m=>[39m r[33m.[39mpriority)[33m;[39m
     [90m 202 |[39m       
assert(priorities[[35m0[39m] [33m===[39m 
[32m'high'[39m [33m||[39m priorities[33m.[39minclu
des([32m'high'[39m))[33m;[39m
     [90m 203 |[39m     })[33m;[39m[0m

      at Object.generateRecommendations 
(api/tests/aiAnalytics.test.js:200:41)

  ظù AIAnalyticsService Tests ظ║ Recommendations ظ║ 
should tailor recommendations to user

    TypeError: aiService.generateRecommendations is not 
a function

    [0m [90m 204 |[39m
     [90m 205 |[39m     test([32m'should tailor 
recommendations to user'[39m[33m,[39m () 
[33m=>[39m {
    [31m[1m>[22m[39m[90m 206 |[39m       
[36mconst[39m recommendations [33m=[39m aiService[3
3m.[39mgenerateRecommendations(trainingData[33m,[39m 
{
     [90m     |[39m                                   
      [31m[1m^[22m[39m
     [90m 207 |[39m         userId[33m:[39m 
[32m'user123'[39m[33m,[39m
     [90m 208 |[39m         department[33m:[39m 
[32m'engineering'[39m[33m,[39m
     [90m 209 |[39m       })[33m;[39m[0m

      at Object.generateRecommendations 
(api/tests/aiAnalytics.test.js:206:41)

  ظù AIAnalyticsService Tests ظ║ Recommendations ظ║ 
should estimate recommendation impact

    TypeError: aiService.generateRecommendations is not 
a function

    [0m [90m 212 |[39m
     [90m 213 |[39m     test([32m'should estimate 
recommendation impact'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 214 |[39m       
[36mconst[39m recommendations [33m=[39m aiService[3
3m.[39mgenerateRecommendations(trainingData)[33m;[39m
     [90m     |[39m                                   
      [31m[1m^[22m[39m
     [90m 215 |[39m       
recommendations[33m.[39mforEach(r [33m=>[39m {
     [90m 216 |[39m         
assert(r[33m.[39mestimatedImprovement [33m!==[39m 
undefined)[33m;[39m
     [90m 217 |[39m         
assert(r[33m.[39mtimeToSeeResults [33m!==[39m 
undefined)[33m;[39m[0m

      at Object.generateRecommendations 
(api/tests/aiAnalytics.test.js:214:41)

  ظù AIAnalyticsService Tests ظ║ Recommendations ظ║ 
should provide confidence in recommendations

    TypeError: aiService.generateRecommendations is not 
a function

    [0m [90m 220 |[39m
     [90m 221 |[39m     test([32m'should provide 
confidence in recommendations'[39m[33m,[39m () 
[33m=>[39m {
    [31m[1m>[22m[39m[90m 222 |[39m       
[36mconst[39m recommendations [33m=[39m aiService[3
3m.[39mgenerateRecommendations(trainingData)[33m;[39m
     [90m     |[39m                                   
      [31m[1m^[22m[39m
     [90m 223 |[39m       
recommendations[33m.[39mforEach(r [33m=>[39m {
     [90m 224 |[39m         
assert(r[33m.[39mconfidence [33m>=[39m [35m0[39m 
[33m&&[39m r[33m.[39mconfidence [33m<=[39m 
[35m100[39m)[33m;[39m
     [90m 225 |[39m       })[33m;[39m[0m

      at Object.generateRecommendations 
(api/tests/aiAnalytics.test.js:222:41)

  ظù AIAnalyticsService Tests ظ║ Trend Analysis ظ║ 
should analyze data trends

    assert(received)

    Expected value to be equal to:
      true
    Received:
      undefined

    Message:
      Should have trend direction

    Difference:

      Comparing two different types of values. Expected 
boolean but received undefined.

    [0m [90m 233 |[39m     test([32m'should analyze 
data trends'[39m[33m,[39m () [33m=>[39m {
     [90m 234 |[39m       [36mconst[39m trends 
[33m=[39m aiService[33m.[39manalyzeTrends(trainingDa
ta)[33m;[39m
    [31m[1m>[22m[39m[90m 235 |[39m       
assert(trends[33m.[39mdirection[33m,[39m 
[32m'Should have trend direction'[39m)[33m;[39m
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 236 |[39m       
assert([[32m'up'[39m[33m,[39m 
[32m'down'[39m[33m,[39m [32m'stable'[39m][33m.[3
9mincludes(trends[33m.[39mdirection))[33m;[39m
     [90m 237 |[39m     })[33m;[39m
     [90m 238 |[39m[0m

      at Object.assert 
(api/tests/aiAnalytics.test.js:235:7)

  ظù AIAnalyticsService Tests ظ║ Trend Analysis ظ║ 
should identify trend inflection points

    assert(received)

    Expected value to be equal to:
      true
    Received:
      undefined

    Message:
      Should detect inflection points

    Difference:

      Comparing two different types of values. Expected 
boolean but received undefined.

    [0m [90m 247 |[39m
     [90m 248 |[39m       [36mconst[39m trends 
[33m=[39m 
aiService[33m.[39manalyzeTrends(trendData)[33m;[39m
    [31m[1m>[22m[39m[90m 249 |[39m       
assert(trends[33m.[39minflectionPoints[33m,[39m 
[32m'Should detect inflection points'[39m)[33m;[39m
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 250 |[39m     })[33m;[39m
     [90m 251 |[39m
     [90m 252 |[39m     test([32m'should calculate 
trend slope'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.assert 
(api/tests/aiAnalytics.test.js:249:7)

  ظù AIAnalyticsService Tests ظ║ Trend Analysis ظ║ 
should calculate trend slope

    assert(received)

    Expected value to be equal to:
      true
    Received:
      false

    Message:
      Should calculate slope

    [0m [90m 252 |[39m     test([32m'should 
calculate trend slope'[39m[33m,[39m () [33m=>[39m {
     [90m 253 |[39m       [36mconst[39m trends 
[33m=[39m aiService[33m.[39manalyzeTrends(trainingDa
ta)[33m;[39m
    [31m[1m>[22m[39m[90m 254 |[39m       
assert(trends[33m.[39mslope [33m!==[39m 
undefined[33m,[39m [32m'Should calculate 
slope'[39m)[33m;[39m
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 255 |[39m       assert([36mtypeof[39m 
trends[33m.[39mslope [33m===[39m 
[32m'number'[39m)[33m;[39m
     [90m 256 |[39m     })[33m;[39m
     [90m 257 |[39m[0m

      at Object.assert 
(api/tests/aiAnalytics.test.js:254:7)

  ظù AIAnalyticsService Tests ظ║ Trend Analysis ظ║ 
should forecast based on trends

    TypeError: projected.toFixed is not a function

    [0m [90m 446 |[39m
     [90m 447 |[39m     [36mreturn[39m {
    [31m[1m>[22m[39m[90m 448 |[39m       
nextPeriod[33m:[39m 
projected[33m.[39mtoFixed([35m2[39m)[33m,[39m
     [90m     |[39m                             
[31m[1m^[22m[39m
     [90m 449 |[39m       confidence[33m:[39m 
[32m'75%'[39m[33m,[39m
     [90m 450 |[39m       direction[33m:[39m slope 
[33m>[39m [35m0[39m [33m?[39m [32m'upward'[39m 
[33m:[39m [32m'downward'[39m[33m,[39m
     [90m 451 |[39m     }[33m;[39m[0m

      at AIAnalyticsService.toFixed [as forecastTrend] 
(services/aiAnalyticsService.js:448:29)
      at Object.forecastTrend 
(api/tests/aiAnalytics.test.js:259:34)

  ظù AIAnalyticsService Tests ظ║ Trend Analysis ظ║ 
should detect seasonality

    assert(received)

    Expected value to be equal to:
      true
    Received:
      false

    [0m [90m 268 |[39m
     [90m 269 |[39m       [36mconst[39m analysis 
[33m=[39m aiService[33m.[39manalyzeTrends(seasonalDa
ta)[33m;[39m
    [31m[1m>[22m[39m[90m 270 |[39m       
assert(analysis[33m.[39mseasonal [33m!==[39m 
undefined)[33m;[39m
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 271 |[39m     })[33m;[39m
     [90m 272 |[39m
     [90m 273 |[39m     test([32m'should compare 
trends over periods'[39m[33m,[39m () [33m=>[39m 
{[0m

      at Object.assert 
(api/tests/aiAnalytics.test.js:270:7)

  ظù AIAnalyticsService Tests ظ║ Trend Analysis ظ║ 
should compare trends over periods

    TypeError: aiService.compareTrends is not a function

    [0m [90m 272 |[39m
     [90m 273 |[39m     test([32m'should compare 
trends over periods'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 274 |[39m       
[36mconst[39m comparison [33m=[39m aiService[33m.[
39mcompareTrends(trainingData[33m.[39mslice([35m0[39
m[33m,[39m [35m3[39m)[33m,[39m 
trainingData[33m.[39mslice([35m2[39m[33m,[39m 
[35m5[39m))[33m;[39m
     [90m     |[39m                                   
 [31m[1m^[22m[39m
     [90m 275 |[39m       
assert(comparison[33m.[39mtrend1Direction[33m,[39m 
[32m'Should analyze first trend'[39m)[33m;[39m
     [90m 276 |[39m       
assert(comparison[33m.[39mtrend2Direction[33m,[39m 
[32m'Should analyze second trend'[39m)[33m;[39m
     [90m 277 |[39m     })[33m;[39m[0m

      at Object.compareTrends 
(api/tests/aiAnalytics.test.js:274:36)

  ظù AIAnalyticsService Tests ظ║ Model Management ظ║ 
should list available models

    TypeError: aiService.listModels is not a function

    [0m [90m 283 |[39m   describe([32m'Model 
Management'[39m[33m,[39m () [33m=>[39m {
     [90m 284 |[39m     test([32m'should list 
available models'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 285 |[39m       
[36mconst[39m models [33m=[39m 
aiService[33m.[39mlistModels()[33m;[39m
     [90m     |[39m                                
[31m[1m^[22m[39m
     [90m 286 |[39m       assert([33mArray[39m[33m.
[39misArray(models))[33m;[39m
     [90m 287 |[39m       
assert(models[33m.[39mlength [33m>[39m 
[35m0[39m)[33m;[39m
     [90m 288 |[39m     })[33m;[39m[0m

      at Object.listModels 
(api/tests/aiAnalytics.test.js:285:32)

  ظù AIAnalyticsService Tests ظ║ Model Management ظ║ 
should get model information

    TypeError: aiService.listModels is not a function

    [0m [90m 289 |[39m
     [90m 290 |[39m     test([32m'should get model 
information'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 291 |[39m       
[36mconst[39m models [33m=[39m 
aiService[33m.[39mlistModels()[33m;[39m
     [90m     |[39m                                
[31m[1m^[22m[39m
     [90m 292 |[39m       [36mconst[39m modelInfo 
[33m=[39m aiService[33m.[39mgetModelInfo(models[[35
m0[39m][33m.[39mid)[33m;[39m
     [90m 293 |[39m       
assert(modelInfo[33m.[39mname[33m,[39m [32m'Should 
have model name'[39m)[33m;[39m
     [90m 294 |[39m       
assert(modelInfo[33m.[39mversion[33m,[39m 
[32m'Should have version'[39m)[33m;[39m[0m

      at Object.listModels 
(api/tests/aiAnalytics.test.js:291:32)

  ظù AIAnalyticsService Tests ظ║ Model Management ظ║ 
should train custom model

    TypeError: aiService.trainModel is not a function

    [0m [90m 296 |[39m
     [90m 297 |[39m     test([32m'should train 
custom model'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 298 |[39m       
[36mconst[39m training [33m=[39m 
aiService[33m.[39mtrainModel(trainingData[33m,[39m {
     [90m     |[39m                                  
[31m[1m^[22m[39m
     [90m 299 |[39m         modelType[33m:[39m 
[32m'regression'[39m[33m,[39m
     [90m 300 |[39m         features[33m:[39m 
[[32m'attendance'[39m[33m,[39m 
[32m'performance'[39m][33m,[39m
     [90m 301 |[39m         target[33m:[39m 
[32m'score'[39m[33m,[39m[0m

      at Object.trainModel 
(api/tests/aiAnalytics.test.js:298:34)

  ظù AIAnalyticsService Tests ظ║ Model Management ظ║ 
should evaluate model performance

    TypeError: aiService.evaluateModel is not a function

    [0m [90m 307 |[39m
     [90m 308 |[39m     test([32m'should evaluate 
model performance'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 309 |[39m       
[36mconst[39m evaluation [33m=[39m aiService[33m.[
39mevaluateModel([32m'default-model'[39m[33m,[39m 
trainingData)[33m;[39m
     [90m     |[39m                                   
 [31m[1m^[22m[39m
     [90m 310 |[39m       
assert(evaluation[33m.[39maccuracy [33m>=[39m 
[35m0[39m [33m&&[39m evaluation[33m.[39maccuracy 
[33m<=[39m [35m100[39m)[33m;[39m
     [90m 311 |[39m       
assert(evaluation[33m.[39mprecision [33m!==[39m 
undefined)[33m;[39m
     [90m 312 |[39m       
assert(evaluation[33m.[39mrecall [33m!==[39m 
undefined)[33m;[39m[0m

      at Object.evaluateModel 
(api/tests/aiAnalytics.test.js:309:36)

  ظù AIAnalyticsService Tests ظ║ Model Management ظ║ 
should provide model metrics

    TypeError: aiService.getModelMetrics is not a 
function

    [0m [90m 314 |[39m
     [90m 315 |[39m     test([32m'should provide 
model metrics'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 316 |[39m       
[36mconst[39m metrics [33m=[39m aiService[33m.[39m
getModelMetrics([32m'default-model'[39m)[33m;[39m
     [90m     |[39m                                 
[31m[1m^[22m[39m
     [90m 317 |[39m       
assert(metrics[33m.[39maccuracy[33m,[39m 
[32m'Should have accuracy'[39m)[33m;[39m
     [90m 318 |[39m       
assert(metrics[33m.[39mprecision[33m,[39m 
[32m'Should have precision'[39m)[33m;[39m
     [90m 319 |[39m       
assert(metrics[33m.[39mrecall[33m,[39m [32m'Should 
have recall'[39m)[33m;[39m[0m

      at Object.getModelMetrics 
(api/tests/aiAnalytics.test.js:316:33)

  ظù AIAnalyticsService Tests ظ║ Model Management ظ║ 
should handle model versioning

    TypeError: aiService.getModelVersions is not a 
function

    [0m [90m 322 |[39m
     [90m 323 |[39m     test([32m'should handle 
model versioning'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 324 |[39m       
[36mconst[39m versions [33m=[39m aiService[33m.[39
mgetModelVersions([32m'default-model'[39m)[33m;[39m
     [90m     |[39m                                  
[31m[1m^[22m[39m
     [90m 325 |[39m       assert([33mArray[39m[33m.
[39misArray(versions))[33m;[39m
     [90m 326 |[39m       
assert(versions[33m.[39mlength [33m>[39m 
[35m0[39m)[33m;[39m
     [90m 327 |[39m     })[33m;[39m[0m

      at Object.getModelVersions 
(api/tests/aiAnalytics.test.js:324:34)

  ظù AIAnalyticsService Tests ظ║ Correlation Analysis 
ظ║ should find correlations between variables

    TypeError: aiService.findCorrelations is not a 
function

    [0m [90m 333 |[39m   describe([32m'Correlation 
Analysis'[39m[33m,[39m () [33m=>[39m {
     [90m 334 |[39m     test([32m'should find 
correlations between variables'[39m[33m,[39m () 
[33m=>[39m {
    [31m[1m>[22m[39m[90m 335 |[39m       
[36mconst[39m correlations [33m=[39m aiService[33m.
[39mfindCorrelations(trainingData)[33m;[39m
     [90m     |[39m                                   
   [31m[1m^[22m[39m
     [90m 336 |[39m       assert([33mArray[39m[33m.
[39misArray(correlations))[33m;[39m
     [90m 337 |[39m       
correlations[33m.[39mforEach(c [33m=>[39m {
     [90m 338 |[39m         
assert(c[33m.[39mvariable1[33m,[39m [32m'Should 
have first variable'[39m)[33m;[39m[0m

      at Object.findCorrelations 
(api/tests/aiAnalytics.test.js:335:38)

  ظù AIAnalyticsService Tests ظ║ Correlation Analysis 
ظ║ should identify strong correlations

    TypeError: aiService.findCorrelations is not a 
function

    [0m [90m 343 |[39m
     [90m 344 |[39m     test([32m'should identify 
strong correlations'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 345 |[39m       
[36mconst[39m correlations [33m=[39m aiService[33m.
[39mfindCorrelations(trainingData[33m,[39m {
     [90m     |[39m                                   
   [31m[1m^[22m[39m
     [90m 346 |[39m         minStrength[33m:[39m 
[35m0.7[39m[33m,[39m
     [90m 347 |[39m       })[33m;[39m
     [90m 348 |[39m       
correlations[33m.[39mforEach(c [33m=>[39m {[0m

      at Object.findCorrelations 
(api/tests/aiAnalytics.test.js:345:38)

  ظù AIAnalyticsService Tests ظ║ Correlation Analysis 
ظ║ should distinguish causation from correlation

    TypeError: aiService.analyzeRelationship is not a 
function

    [0m [90m 352 |[39m
     [90m 353 |[39m     test([32m'should distinguish 
causation from correlation'[39m[33m,[39m () 
[33m=>[39m {
    [31m[1m>[22m[39m[90m 354 |[39m       
[36mconst[39m analysis [33m=[39m aiService[33m.[39
manalyzeRelationship(trainingData[33m,[39m 
[32m'attendance'[39m[33m,[39m 
[32m'performance'[39m)[33m;[39m
     [90m     |[39m                                  
[31m[1m^[22m[39m
     [90m 355 |[39m       
assert(analysis[33m.[39mcorrelation [33m!==[39m 
undefined)[33m;[39m
     [90m 356 |[39m       
assert(analysis[33m.[39mlikelyCausal [33m!==[39m 
undefined)[33m;[39m
     [90m 357 |[39m     })[33m;[39m[0m

      at Object.analyzeRelationship 
(api/tests/aiAnalytics.test.js:354:34)

  ظù AIAnalyticsService Tests ظ║ Data Quality ظ║ 
should validate data quality

    TypeError: aiService.checkDataQuality is not a 
function

    [0m [90m 363 |[39m   describe([32m'Data 
Quality'[39m[33m,[39m () [33m=>[39m {
     [90m 364 |[39m     test([32m'should validate 
data quality'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 365 |[39m       
[36mconst[39m quality [33m=[39m aiService[33m.[39m
checkDataQuality(trainingData)[33m;[39m
     [90m     |[39m                                 
[31m[1m^[22m[39m
     [90m 366 |[39m       
assert(quality[33m.[39mscore [33m>=[39m [35m0[39m 
[33m&&[39m quality[33m.[39mscore [33m<=[39m 
[35m100[39m)[33m;[39m
     [90m 367 |[39m       
assert(quality[33m.[39missues[33m,[39m [32m'Should 
list issues'[39m)[33m;[39m
     [90m 368 |[39m     })[33m;[39m[0m

      at Object.checkDataQuality 
(api/tests/aiAnalytics.test.js:365:33)

  ظù AIAnalyticsService Tests ظ║ Data Quality ظ║ 
should detect missing values

    TypeError: aiService.checkDataQuality is not a 
function

    [0m [90m 371 |[39m       [36mconst[39m 
incompleteData [33m=[39m 
[[33m...[39mtrainingData[33m,[39m { date[33m:[39m 
[32m'2024-01-06'[39m[33m,[39m attendance[33m:[39m 
[36mnull[39m[33m,[39m performance[33m:[39m 
[35m85[39m }][33m;[39m
     [90m 372 |[39m
    [31m[1m>[22m[39m[90m 373 |[39m       
[36mconst[39m quality [33m=[39m aiService[33m.[39m
checkDataQuality(incompleteData)[33m;[39m
     [90m     |[39m                                 
[31m[1m^[22m[39m
     [90m 374 |[39m       
assert(quality[33m.[39mmissingValueCount [33m>=[39m 
[35m0[39m)[33m;[39m
     [90m 375 |[39m     })[33m;[39m
     [90m 376 |[39m[0m

      at Object.checkDataQuality 
(api/tests/aiAnalytics.test.js:373:33)

  ظù AIAnalyticsService Tests ظ║ Data Quality ظ║ 
should identify outliers

    TypeError: aiService.checkDataQuality is not a 
function

    [0m [90m 378 |[39m       [36mconst[39m 
dataWithOutliers [33m=[39m 
[[33m...[39mtrainingData[33m,[39m { date[33m:[39m 
[32m'2024-01-06'[39m[33m,[39m attendance[33m:[39m 
[35m200[39m[33m,[39m performance[33m:[39m 
[35m250[39m[33m,[39m score[33m:[39m [35m300[39m 
}][33m;[39m
     [90m 379 |[39m
    [31m[1m>[22m[39m[90m 380 |[39m       
[36mconst[39m quality [33m=[39m aiService[33m.[39m
checkDataQuality(dataWithOutliers)[33m;[39m
     [90m     |[39m                                 
[31m[1m^[22m[39m
     [90m 381 |[39m       
assert(quality[33m.[39moutlierCount [33m>=[39m 
[35m0[39m)[33m;[39m
     [90m 382 |[39m     })[33m;[39m
     [90m 383 |[39m   })[33m;[39m[0m

      at Object.checkDataQuality 
(api/tests/aiAnalytics.test.js:380:33)

  ظù AIAnalyticsService Tests ظ║ Error Handling ظ║ 
should handle empty data

    assert(received)

    Expected value to be equal to:
      true
    Received:
      false

    [0m [90m 389 |[39m     test([32m'should handle 
empty data'[39m[33m,[39m () [33m=>[39m {
     [90m 390 |[39m       [36mconst[39m prediction 
[33m=[39m 
aiService[33m.[39mpredictAttendance([])[33m;[39m
    [31m[1m>[22m[39m[90m 391 |[39m       
assert(prediction[33m.[39merror [33m||[39m 
prediction[33m.[39mnextPeriod [33m!==[39m 
undefined)[33m;[39m
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 392 |[39m     })[33m;[39m
     [90m 393 |[39m
     [90m 394 |[39m     test([32m'should handle 
single data point'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.assert 
(api/tests/aiAnalytics.test.js:391:7)

  ظù AIAnalyticsService Tests ظ║ Error Handling ظ║ 
should handle all identical values

    assert(received)

    Expected value to be equal to:
      true
    Received:
      undefined

    Message:
      Should handle constant data

    Difference:

      Comparing two different types of values. Expected 
boolean but received undefined.

    [0m [90m 405 |[39m
     [90m 406 |[39m       [36mconst[39m prediction 
[33m=[39m aiService[33m.[39mpredictAttendance(consta
ntData)[33m;[39m
    [31m[1m>[22m[39m[90m 407 |[39m       
assert(prediction[33m.[39mnextPeriod[33m,[39m 
[32m'Should handle constant data'[39m)[33m;[39m
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 408 |[39m     })[33m;[39m
     [90m 409 |[39m
     [90m 410 |[39m     test([32m'should handle 
extreme values'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.assert 
(api/tests/aiAnalytics.test.js:407:7)

  ظù AIAnalyticsService Tests ظ║ Error Handling ظ║ 
should handle extreme values

    assert(received)

    Expected value to be equal to:
      true
    Received:
      false

    [0m [90m 412 |[39m
     [90m 413 |[39m       [36mconst[39m prediction 
[33m=[39m aiService[33m.[39mpredictAttendance(extrem
eData)[33m;[39m
    [31m[1m>[22m[39m[90m 414 |[39m       
assert(prediction[33m.[39merror [33m||[39m 
prediction[33m.[39mnextPeriod [33m!==[39m 
undefined)[33m;[39m
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 415 |[39m     })[33m;[39m
     [90m 416 |[39m   })[33m;[39m
     [90m 417 |[39m[0m

      at Object.assert 
(api/tests/aiAnalytics.test.js:414:7)

  ظù AIAnalyticsService Tests ظ║ Batch Operations ظ║ 
should process batch predictions

    TypeError: aiService.batchPredict is not a function

    [0m [90m 450 |[39m     test([32m'should process 
batch predictions'[39m[33m,[39m () [33m=>[39m {
     [90m 451 |[39m       [36mconst[39m batches 
[33m=[39m [trainingData[33m,[39m 
trainingData][33m;[39m
    [31m[1m>[22m[39m[90m 452 |[39m       
[36mconst[39m results [33m=[39m 
aiService[33m.[39mbatchPredict(batches[33m,[39m 
[32m'attendance'[39m)[33m;[39m
     [90m     |[39m                                 
[31m[1m^[22m[39m
     [90m 453 |[39m
     [90m 454 |[39m       
assert(results[33m.[39mlength [33m===[39m 
[35m2[39m)[33m;[39m
     [90m 455 |[39m       results[33m.[39mforEach(r 
[33m=>[39m {[0m

      at Object.batchPredict 
(api/tests/aiAnalytics.test.js:452:33)

  ظù AIAnalyticsService Tests ظ║ Batch Operations ظ║ 
should handle mixed batch requests

    TypeError: aiService.batchAnalyze is not a function

    [0m [90m 464 |[39m       ][33m;[39m
     [90m 465 |[39m
    [31m[1m>[22m[39m[90m 466 |[39m       
[36mconst[39m results [33m=[39m 
aiService[33m.[39mbatchAnalyze(requests)[33m;[39m
     [90m     |[39m                                 
[31m[1m^[22m[39m
     [90m 467 |[39m       
assert(results[33m.[39mlength [33m===[39m 
[35m2[39m)[33m;[39m
     [90m 468 |[39m     })[33m;[39m
     [90m 469 |[39m   })[33m;[39m[0m

      at Object.batchAnalyze 
(api/tests/aiAnalytics.test.js:466:33)

FAIL api/tests/advancedReporting.test.js
  AdvancedReportingService Tests
    Template Management
      ظêأ should create new report template (11 ms)
      ظêأ should retrieve template by ID (1 ms)
      ظêأ should update existing template (1 ms)
      ظêأ should delete template
      ظêأ should list all templates (1 ms)
      ├ù should validate template structure (1 ms)
    Report Generation
      ├ù should generate basic report (60 ms)
      ├ù should generate report with filters (1 ms)
      ├ù should generate report in different formats (1 
ms)
      ├ù should generate report with aggregations
      ├ù should include section headers in report
      ├ù should handle empty data in report
    Report Scheduling
      ├ù should schedule recurring report
      ├ù should support different frequencies
      ظêأ should calculate next run time correctly (1 
ms)
      ├ù should get scheduled report details (1 ms)
      ├ù should pause scheduled report (1 ms)
      ├ù should resume paused schedule
      ├ù should delete schedule (1 ms)
    Export Functionality
      ├ù should export report to CSV (1 ms)
      ظêأ should export report to Excel (1 ms)
      ظêأ should export report to PDF
      ظêأ should export with custom filename
      ظêأ should include metadata in export
      ├ù should support partial exports (1 ms)
    Filtering and Aggregation
      ├ù should apply filters during report generation
      ├ù should calculate sum aggregation
      ├ù should calculate average aggregation
      ├ù should calculate count aggregation
      ├ù should group data for aggregation
    Charts and Visualization
      ├ù should generate chart data for bar chart (1 ms)
      ├ù should generate chart data for pie chart
      ├ù should generate chart data for line chart (1 
ms)
      ├ù should support chart customization
    Email Distribution
      ├ù should send report via email
      ├ù should send to multiple recipients (1 ms)
      ├ù should include attachments in email (1 ms)
      ├ù should support email templates (1 ms)
    Caching and Performance
      ظêأ should cache generated report
      ظêأ should clear report cache (1 ms)
      ├ù should handle large dataset efficiently (30 ms)
    Error Handling
      ظêأ should handle invalid template
      ├ù should handle invalid data format
      ├ù should handle missing required fields (1 ms)
      ├ù should validate filter conditions (1 ms)
    Report History
      ├ù should save report to history (1 ms)
      ├ù should retrieve report from history (1 ms)
      ظêأ should list report history (1 ms)
      ├ù should delete from history

  ظù AdvancedReportingService Tests ظ║ Template 
Management ظ║ should validate template structure

    TypeError: reportingService.validateTemplate is not 
a function

    [0m [90m 78 |[39m     test([32m'should validate 
template structure'[39m[33m,[39m () [33m=>[39m {
     [90m 79 |[39m       [36mconst[39m 
invalidTemplate [33m=[39m { name[33m:[39m 
[32m'Invalid'[39m }[33m;[39m [90m// Missing 
required fields[39m
    [31m[1m>[22m[39m[90m 80 |[39m       
[36mconst[39m result [33m=[39m reportingService[33m
.[39mvalidateTemplate(invalidTemplate)[33m;[39m
     [90m    |[39m                                    
   [31m[1m^[22m[39m
     [90m 81 |[39m       
assert([33m![39mresult[33m.[39mvalid[33m,[39m 
[32m'Should identify invalid template'[39m)[33m;[39m
     [90m 82 |[39m     })[33m;[39m
     [90m 83 |[39m   })[33m;[39m[0m

      at Object.validateTemplate 
(api/tests/advancedReporting.test.js:80:39)

  ظù AdvancedReportingService Tests ظ║ Report 
Generation ظ║ should generate basic report

    assert(received)

    Expected value to be equal to:
      true
    Received:
      undefined

    Message:
      Report should have content

    Difference:

      Comparing two different types of values. Expected 
boolean but received undefined.

    [0m [90m 89 |[39m     test([32m'should generate 
basic report'[39m[33m,[39m () [33m=>[39m {
     [90m 90 |[39m       [36mconst[39m report 
[33m=[39m reportingService[33m.[39mgenerateReport(re
portTemplate[33m,[39m sampleData)[33m;[39m
    [31m[1m>[22m[39m[90m 91 |[39m       
assert(report[33m.[39mcontent[33m,[39m [32m'Report 
should have content'[39m)[33m;[39m
     [90m    |[39m       [31m[1m^[22m[39m
     [90m 92 |[39m       
assert(report[33m.[39mgeneratedAt[33m,[39m 
[32m'Report should have generation 
timestamp'[39m)[33m;[39m
     [90m 93 |[39m     })[33m;[39m
     [90m 94 |[39m[0m

      at Object.assert 
(api/tests/advancedReporting.test.js:91:7)

  ظù AdvancedReportingService Tests ظ║ Report 
Generation ظ║ should generate report with filters

    assert(received)

    Expected value to be equal to:
      true
    Received:
      undefined

    Message:
      Report should be generated with filters

    Difference:

      Comparing two different types of values. Expected 
boolean but received undefined.

    [0m [90m  97 |[39m         filters[33m:[39m [{ 
field[33m:[39m [32m'department'[39m[33m,[39m 
operator[33m:[39m [32m'equals'[39m[33m,[39m 
value[33m:[39m [32m'Engineering'[39m }][33m,[39m
     [90m  98 |[39m       })[33m;[39m
    [31m[1m>[22m[39m[90m  99 |[39m       
assert(report[33m.[39mcontent[33m,[39m [32m'Report 
should be generated with filters'[39m)[33m;[39m
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 100 |[39m     })[33m;[39m
     [90m 101 |[39m
     [90m 102 |[39m     test([32m'should generate 
report in different formats'[39m[33m,[39m () 
[33m=>[39m {[0m

      at Object.assert 
(api/tests/advancedReporting.test.js:99:7)

  ظù AdvancedReportingService Tests ظ║ Report 
Generation ظ║ should generate report in different 
formats

    assert(received)

    Expected value to be equal to:
      true
    Received:
      undefined

    Message:
      HTML report should be generated

    Difference:

      Comparing two different types of values. Expected 
boolean but received undefined.

    [0m [90m 103 |[39m       [36mconst[39m 
htmlReport [33m=[39m 
reportingService[33m.[39mgenerateReport({ 
[33m...[39mreportTemplate[33m,[39m 
format[33m:[39m [32m'html'[39m }[33m,[39m 
sampleData)[33m;[39m
     [90m 104 |[39m       [36mconst[39m csvReport 
[33m=[39m reportingService[33m.[39mgenerateReport({ 
[33m...[39mreportTemplate[33m,[39m 
format[33m:[39m [32m'csv'[39m }[33m,[39m 
sampleData)[33m;[39m
    [31m[1m>[22m[39m[90m 105 |[39m       
assert(htmlReport[33m.[39mcontent[33m,[39m 
[32m'HTML report should be generated'[39m)[33m;[39m
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 106 |[39m       
assert(csvReport[33m.[39mcontent[33m,[39m [32m'CSV 
report should be generated'[39m)[33m;[39m
     [90m 107 |[39m     })[33m;[39m
     [90m 108 |[39m[0m

      at Object.assert 
(api/tests/advancedReporting.test.js:105:7)

  ظù AdvancedReportingService Tests ظ║ Report 
Generation ظ║ should generate report with aggregations

    assert(received)

    Expected value to be equal to:
      true
    Received:
      undefined

    Message:
      Report should include aggregations

    Difference:

      Comparing two different types of values. Expected 
boolean but received undefined.

    [0m [90m 115 |[39m         }[33m,[39m
     [90m 116 |[39m       })[33m;[39m
    [31m[1m>[22m[39m[90m 117 |[39m       
assert(report[33m.[39maggregations[33m,[39m 
[32m'Report should include 
aggregations'[39m)[33m;[39m
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 118 |[39m     })[33m;[39m
     [90m 119 |[39m
     [90m 120 |[39m     test([32m'should include 
section headers in report'[39m[33m,[39m () 
[33m=>[39m {[0m

      at Object.assert 
(api/tests/advancedReporting.test.js:117:7)

  ظù AdvancedReportingService Tests ظ║ Report 
Generation ظ║ should include section headers in report

    TypeError: Cannot read properties of undefined 
(reading 'toLowerCase')

    [0m [90m 120 |[39m     test([32m'should include 
section headers in report'[39m[33m,[39m () 
[33m=>[39m {
     [90m 121 |[39m       [36mconst[39m report 
[33m=[39m reportingService[33m.[39mgenerateReport(re
portTemplate[33m,[39m sampleData)[33m;[39m
    [31m[1m>[22m[39m[90m 122 |[39m       
[36mconst[39m content [33m=[39m report[33m.[39mcon
tent[33m.[39mtoLowerCase()[33m;[39m
     [90m     |[39m                                   
   [31m[1m^[22m[39m
     [90m 123 |[39m       
assert(content[33m.[39mincludes([32m'monthly'[39m) 
[33m||[39m content[33m.[39mincludes([32m'sales'[39
m)[33m,[39m [32m'Report should contain template 
sections'[39m)[33m;[39m
     [90m 124 |[39m     })[33m;[39m
     [90m 125 |[39m[0m

      at Object.toLowerCase 
(api/tests/advancedReporting.test.js:122:38)

  ظù AdvancedReportingService Tests ظ║ Report 
Generation ظ║ should handle empty data in report

    assert(received)

    Expected value to be equal to:
      true
    Received:
      undefined

    Message:
      Report should be generated even with empty data

    Difference:

      Comparing two different types of values. Expected 
boolean but received undefined.

    [0m [90m 126 |[39m     test([32m'should handle 
empty data in report'[39m[33m,[39m () [33m=>[39m {
     [90m 127 |[39m       [36mconst[39m report 
[33m=[39m reportingService[33m.[39mgenerateReport(re
portTemplate[33m,[39m [])[33m;[39m
    [31m[1m>[22m[39m[90m 128 |[39m       
assert(report[33m.[39mcontent[33m,[39m [32m'Report 
should be generated even with empty 
data'[39m)[33m;[39m
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 129 |[39m     })[33m;[39m
     [90m 130 |[39m   })[33m;[39m
     [90m 131 |[39m[0m

      at Object.assert 
(api/tests/advancedReporting.test.js:128:7)

  ظù AdvancedReportingService Tests ظ║ Report 
Scheduling ظ║ should schedule recurring report

    assert(received)

    Expected value to be equal to:
      true
    Received:
      undefined

    Message:
      Schedule should have an ID

    Difference:

      Comparing two different types of values. Expected 
boolean but received undefined.

    [0m [90m 144 |[39m       }[33m;[39m
     [90m 145 |[39m       [36mconst[39m result 
[33m=[39m reportingService[33m.[39mscheduleReport(sc
hedule)[33m;[39m
    [31m[1m>[22m[39m[90m 146 |[39m       
assert(result[33m.[39mscheduleId[33m,[39m 
[32m'Schedule should have an ID'[39m)[33m;[39m
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 147 |[39m       
assert(result[33m.[39mnextRun[33m,[39m 
[32m'Schedule should have next run 
time'[39m)[33m;[39m
     [90m 148 |[39m     })[33m;[39m
     [90m 149 |[39m[0m

      at Object.assert 
(api/tests/advancedReporting.test.js:146:7)

  ظù AdvancedReportingService Tests ظ║ Report 
Scheduling ظ║ should support different frequencies

    assert(received)

    Expected value to be equal to:
      true
    Received:
      false

    Message:
      Should support daily frequency

    [0m [90m 157 |[39m         }[33m;[39m
     [90m 158 |[39m         [36mconst[39m result 
[33m=[39m reportingService[33m.[39mscheduleReport(sc
hedule)[33m;[39m
    [31m[1m>[22m[39m[90m 159 |[39m         
assert(result[33m.[39mfrequency [33m===[39m 
freq[33m,[39m [32m`Should support ${freq} 
frequency`[39m)[33m;[39m
     [90m     |[39m         [31m[1m^[22m[39m
     [90m 160 |[39m       })[33m;[39m
     [90m 161 |[39m     })[33m;[39m
     [90m 162 |[39m[0m

      at assert 
(api/tests/advancedReporting.test.js:159:9)
          at Array.forEach (<anonymous>)
      at Object.forEach 
(api/tests/advancedReporting.test.js:152:19)

  ظù AdvancedReportingService Tests ظ║ Report 
Scheduling ظ║ should get scheduled report details

    TypeError: reportingService.getSchedule is not a 
function

    [0m [90m 181 |[39m       }[33m;[39m
     [90m 182 |[39m       [36mconst[39m created 
[33m=[39m reportingService[33m.[39mscheduleReport(sc
hedule)[33m;[39m
    [31m[1m>[22m[39m[90m 183 |[39m       
[36mconst[39m retrieved [33m=[39m reportingService[
33m.[39mgetSchedule(created[33m.[39mscheduleId)[33m;
[39m
     [90m     |[39m                                   
       [31m[1m^[22m[39m
     [90m 184 |[39m       
assert(retrieved[33m.[39mfrequency [33m===[39m 
[32m'weekly'[39m)[33m;[39m
     [90m 185 |[39m     })[33m;[39m
     [90m 186 |[39m[0m

      at Object.getSchedule 
(api/tests/advancedReporting.test.js:183:42)

  ظù AdvancedReportingService Tests ظ║ Report 
Scheduling ظ║ should pause scheduled report

    TypeError: reportingService.pauseSchedule is not a 
function

    [0m [90m 192 |[39m       }[33m;[39m
     [90m 193 |[39m       [36mconst[39m created 
[33m=[39m reportingService[33m.[39mscheduleReport(sc
hedule)[33m;[39m
    [31m[1m>[22m[39m[90m 194 |[39m       
[36mconst[39m paused [33m=[39m reportingService[33m
.[39mpauseSchedule(created[33m.[39mscheduleId)[33m;
[39m
     [90m     |[39m                                   
    [31m[1m^[22m[39m
     [90m 195 |[39m       
assert(paused[33m.[39mstatus [33m===[39m 
[32m'paused'[39m)[33m;[39m
     [90m 196 |[39m     })[33m;[39m
     [90m 197 |[39m[0m

      at Object.pauseSchedule 
(api/tests/advancedReporting.test.js:194:39)

  ظù AdvancedReportingService Tests ظ║ Report 
Scheduling ظ║ should resume paused schedule

    TypeError: reportingService.pauseSchedule is not a 
function

    [0m [90m 203 |[39m       }[33m;[39m
     [90m 204 |[39m       [36mconst[39m created 
[33m=[39m reportingService[33m.[39mscheduleReport(sc
hedule)[33m;[39m
    [31m[1m>[22m[39m[90m 205 |[39m       reporting
Service[33m.[39mpauseSchedule(created[33m.[39mschedu
leId)[33m;[39m
     [90m     |[39m                        
[31m[1m^[22m[39m
     [90m 206 |[39m       [36mconst[39m resumed 
[33m=[39m reportingService[33m.[39mresumeSchedule(cr
eated[33m.[39mscheduleId)[33m;[39m
     [90m 207 |[39m       
assert(resumed[33m.[39mstatus [33m===[39m 
[32m'active'[39m)[33m;[39m
     [90m 208 |[39m     })[33m;[39m[0m

      at Object.pauseSchedule 
(api/tests/advancedReporting.test.js:205:24)

  ظù AdvancedReportingService Tests ظ║ Report 
Scheduling ظ║ should delete schedule

    TypeError: reportingService.deleteSchedule is not a 
function

    [0m [90m 215 |[39m       }[33m;[39m
     [90m 216 |[39m       [36mconst[39m created 
[33m=[39m reportingService[33m.[39mscheduleReport(sc
hedule)[33m;[39m
    [31m[1m>[22m[39m[90m 217 |[39m       
[36mconst[39m deleted [33m=[39m reportingService[33
m.[39mdeleteSchedule(created[33m.[39mscheduleId)[33m
;[39m
     [90m     |[39m                                   
     [31m[1m^[22m[39m
     [90m 218 |[39m       assert(deleted[33m,[39m 
[32m'Should return true when schedule is 
deleted'[39m)[33m;[39m
     [90m 219 |[39m     })[33m;[39m
     [90m 220 |[39m   })[33m;[39m[0m

      at Object.deleteSchedule 
(api/tests/advancedReporting.test.js:217:40)

  ظù AdvancedReportingService Tests ظ║ Export 
Functionality ظ║ should export report to CSV

    assert(received)

    Expected value to be equal to:
      true
    Received:
      false

    Message:
      CSV should contain data

    [0m [90m 227 |[39m       [36mconst[39m report 
[33m=[39m reportingService[33m.[39mgenerateReport(re
portTemplate[33m,[39m sampleData)[33m;[39m
     [90m 228 |[39m       [36mconst[39m csv 
[33m=[39m reportingService[33m.[39mexportToCSV(repor
t)[33m;[39m
    [31m[1m>[22m[39m[90m 229 |[39m       
assert(csv[33m.[39mincludes([32m'name'[39m) 
[33m||[39m csv[33m.[39mincludes([32m'department'[3
9m)[33m,[39m [32m'CSV should contain 
data'[39m)[33m;[39m
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 230 |[39m     })[33m;[39m
     [90m 231 |[39m
     [90m 232 |[39m     test([32m'should export 
report to Excel'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.assert 
(api/tests/advancedReporting.test.js:229:7)

  ظù AdvancedReportingService Tests ظ║ Export 
Functionality ظ║ should support partial exports

    assert(received)

    Expected value to be equal to:
      true
    Received:
      false

    Message:
      Export should include selected columns only

    [0m [90m 260 |[39m         columns[33m:[39m 
[[32m'name'[39m[33m,[39m 
[32m'sales'[39m][33m,[39m
     [90m 261 |[39m       })[33m;[39m
    [31m[1m>[22m[39m[90m 262 |[39m       assert(cs
v[33m.[39mincludes([32m'sales'[39m)[33m,[39m 
[32m'Export should include selected columns 
only'[39m)[33m;[39m
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 263 |[39m     })[33m;[39m
     [90m 264 |[39m   })[33m;[39m
     [90m 265 |[39m[0m

      at Object.assert 
(api/tests/advancedReporting.test.js:262:7)

  ظù AdvancedReportingService Tests ظ║ Filtering and 
Aggregation ظ║ should apply filters during report 
generation

    assert(received)

    Expected value to be equal to:
      true
    Received:
      undefined

    Message:
      Report should be generated with filters

    Difference:

      Comparing two different types of values. Expected 
boolean but received undefined.

    [0m [90m 272 |[39m         filters[33m:[39m [{ 
field[33m:[39m [32m'department'[39m[33m,[39m 
operator[33m:[39m [32m'equals'[39m[33m,[39m 
value[33m:[39m [32m'Engineering'[39m }][33m,[39m
     [90m 273 |[39m       })[33m;[39m
    [31m[1m>[22m[39m[90m 274 |[39m       
assert(report[33m.[39mcontent[33m,[39m [32m'Report 
should be generated with filters'[39m)[33m;[39m
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 275 |[39m     })[33m;[39m
     [90m 276 |[39m
     [90m 277 |[39m     test([32m'should calculate 
sum aggregation'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.assert 
(api/tests/advancedReporting.test.js:274:7)

  ظù AdvancedReportingService Tests ظ║ Filtering and 
Aggregation ظ║ should calculate sum aggregation

    TypeError: reportingService.aggregate is not a 
function

    [0m [90m 276 |[39m
     [90m 277 |[39m     test([32m'should calculate 
sum aggregation'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 278 |[39m       
[36mconst[39m result [33m=[39m reportingService[33m
.[39maggregate(sampleData[33m,[39m {
     [90m     |[39m                                   
    [31m[1m^[22m[39m
     [90m 279 |[39m         type[33m:[39m 
[32m'sum'[39m[33m,[39m
     [90m 280 |[39m         field[33m:[39m 
[32m'sales'[39m[33m,[39m
     [90m 281 |[39m       })[33m;[39m[0m

      at Object.aggregate 
(api/tests/advancedReporting.test.js:278:39)

  ظù AdvancedReportingService Tests ظ║ Filtering and 
Aggregation ظ║ should calculate average aggregation

    TypeError: reportingService.aggregate is not a 
function

    [0m [90m 284 |[39m
     [90m 285 |[39m     test([32m'should calculate 
average aggregation'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 286 |[39m       
[36mconst[39m result [33m=[39m reportingService[33m
.[39maggregate(sampleData[33m,[39m {
     [90m     |[39m                                   
    [31m[1m^[22m[39m
     [90m 287 |[39m         type[33m:[39m 
[32m'avg'[39m[33m,[39m
     [90m 288 |[39m         field[33m:[39m 
[32m'sales'[39m[33m,[39m
     [90m 289 |[39m       })[33m;[39m[0m

      at Object.aggregate 
(api/tests/advancedReporting.test.js:286:39)

  ظù AdvancedReportingService Tests ظ║ Filtering and 
Aggregation ظ║ should calculate count aggregation

    TypeError: reportingService.aggregate is not a 
function

    [0m [90m 292 |[39m
     [90m 293 |[39m     test([32m'should calculate 
count aggregation'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 294 |[39m       
[36mconst[39m result [33m=[39m reportingService[33m
.[39maggregate(sampleData[33m,[39m {
     [90m     |[39m                                   
    [31m[1m^[22m[39m
     [90m 295 |[39m         type[33m:[39m 
[32m'count'[39m[33m,[39m
     [90m 296 |[39m       })[33m;[39m
     [90m 297 |[39m       assert(result [33m===[39m 
[35m4[39m[33m,[39m [32m'Count should be 
4'[39m)[33m;[39m[0m

      at Object.aggregate 
(api/tests/advancedReporting.test.js:294:39)

  ظù AdvancedReportingService Tests ظ║ Filtering and 
Aggregation ظ║ should group data for aggregation

    TypeError: reportingService.groupAndAggregate is 
not a function

    [0m [90m 299 |[39m
     [90m 300 |[39m     test([32m'should group data 
for aggregation'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 301 |[39m       
[36mconst[39m grouped [33m=[39m reportingService[33
m.[39mgroupAndAggregate(sampleData[33m,[39m {
     [90m     |[39m                                   
     [31m[1m^[22m[39m
     [90m 302 |[39m         groupBy[33m:[39m 
[32m'department'[39m[33m,[39m
     [90m 303 |[39m         aggregations[33m:[39m {
     [90m 304 |[39m           totalSales[33m:[39m { 
type[33m:[39m [32m'sum'[39m[33m,[39m 
field[33m:[39m [32m'sales'[39m }[33m,[39m[0m

      at Object.groupAndAggregate 
(api/tests/advancedReporting.test.js:301:40)

  ظù AdvancedReportingService Tests ظ║ Charts and 
Visualization ظ║ should generate chart data for bar 
chart

    TypeError: reportingService.generateChartData is 
not a function

    [0m [90m 315 |[39m   describe([32m'Charts and 
Visualization'[39m[33m,[39m () [33m=>[39m {
     [90m 316 |[39m     test([32m'should generate 
chart data for bar chart'[39m[33m,[39m () 
[33m=>[39m {
    [31m[1m>[22m[39m[90m 317 |[39m       
[36mconst[39m chartData [33m=[39m reportingService[
33m.[39mgenerateChartData(sampleData[33m,[39m {
     [90m     |[39m                                   
       [31m[1m^[22m[39m
     [90m 318 |[39m         type[33m:[39m 
[32m'bar'[39m[33m,[39m
     [90m 319 |[39m         xField[33m:[39m 
[32m'name'[39m[33m,[39m
     [90m 320 |[39m         yField[33m:[39m 
[32m'sales'[39m[33m,[39m[0m

      at Object.generateChartData 
(api/tests/advancedReporting.test.js:317:42)

  ظù AdvancedReportingService Tests ظ║ Charts and 
Visualization ظ║ should generate chart data for pie 
chart

    TypeError: reportingService.generateChartData is 
not a function

    [0m [90m 325 |[39m
     [90m 326 |[39m     test([32m'should generate 
chart data for pie chart'[39m[33m,[39m () 
[33m=>[39m {
    [31m[1m>[22m[39m[90m 327 |[39m       
[36mconst[39m chartData [33m=[39m reportingService[
33m.[39mgenerateChartData(sampleData[33m,[39m {
     [90m     |[39m                                   
       [31m[1m^[22m[39m
     [90m 328 |[39m         type[33m:[39m 
[32m'pie'[39m[33m,[39m
     [90m 329 |[39m         field[33m:[39m 
[32m'department'[39m[33m,[39m
     [90m 330 |[39m       })[33m;[39m[0m

      at Object.generateChartData 
(api/tests/advancedReporting.test.js:327:42)

  ظù AdvancedReportingService Tests ظ║ Charts and 
Visualization ظ║ should generate chart data for line 
chart

    TypeError: reportingService.generateChartData is 
not a function

    [0m [90m 333 |[39m
     [90m 334 |[39m     test([32m'should generate 
chart data for line chart'[39m[33m,[39m () 
[33m=>[39m {
    [31m[1m>[22m[39m[90m 335 |[39m       
[36mconst[39m chartData [33m=[39m reportingService[
33m.[39mgenerateChartData(sampleData[33m,[39m {
     [90m     |[39m                                   
       [31m[1m^[22m[39m
     [90m 336 |[39m         type[33m:[39m 
[32m'line'[39m[33m,[39m
     [90m 337 |[39m         xField[33m:[39m 
[32m'date'[39m[33m,[39m
     [90m 338 |[39m         yField[33m:[39m 
[32m'sales'[39m[33m,[39m[0m

      at Object.generateChartData 
(api/tests/advancedReporting.test.js:335:42)

  ظù AdvancedReportingService Tests ظ║ Charts and 
Visualization ظ║ should support chart customization

    TypeError: reportingService.generateChartData is 
not a function

    [0m [90m 342 |[39m
     [90m 343 |[39m     test([32m'should support 
chart customization'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 344 |[39m       
[36mconst[39m chartData [33m=[39m reportingService[
33m.[39mgenerateChartData(sampleData[33m,[39m {
     [90m     |[39m                                   
       [31m[1m^[22m[39m
     [90m 345 |[39m         type[33m:[39m 
[32m'bar'[39m[33m,[39m
     [90m 346 |[39m         xField[33m:[39m 
[32m'name'[39m[33m,[39m
     [90m 347 |[39m         yField[33m:[39m 
[32m'sales'[39m[33m,[39m[0m

      at Object.generateChartData 
(api/tests/advancedReporting.test.js:344:42)

  ظù AdvancedReportingService Tests ظ║ Email 
Distribution ظ║ should send report via email

    assert(received)

    Expected value to be equal to:
      true
    Received:
      undefined

    Message:
      Should return email ID

    Difference:

      Comparing two different types of values. Expected 
boolean but received undefined.

    [0m [90m 365 |[39m         format[33m:[39m 
[32m'pdf'[39m[33m,[39m
     [90m 366 |[39m       })[33m;[39m
    [31m[1m>[22m[39m[90m 367 |[39m       
assert(result[33m.[39memailId[33m,[39m [32m'Should 
return email ID'[39m)[33m;[39m
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 368 |[39m       
assert(result[33m.[39mstatus [33m===[39m 
[32m'sent'[39m)[33m;[39m
     [90m 369 |[39m     })[33m;[39m
     [90m 370 |[39m[0m

      at Object.assert 
(api/tests/advancedReporting.test.js:367:7)

  ظù AdvancedReportingService Tests ظ║ Email 
Distribution ظ║ should send to multiple recipients

    assert(received)

    Expected value to be equal to:
      true
    Received:
      false

    Message:
      Should send to 2 recipients

    [0m [90m 375 |[39m         subject[33m:[39m 
[32m'Monthly Report'[39m[33m,[39m
     [90m 376 |[39m       })[33m;[39m
    [31m[1m>[22m[39m[90m 377 |[39m       
assert(result[33m.[39mrecipientCount [33m===[39m 
[35m2[39m[33m,[39m [32m'Should send to 2 
recipients'[39m)[33m;[39m
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 378 |[39m     })[33m;[39m
     [90m 379 |[39m
     [90m 380 |[39m     test([32m'should include 
attachments in email'[39m[33m,[39m () [33m=>[39m 
{[0m

      at Object.assert 
(api/tests/advancedReporting.test.js:377:7)

  ظù AdvancedReportingService Tests ظ║ Email 
Distribution ظ║ should include attachments in email

    assert(received)

    Expected value to be equal to:
      true
    Received:
      false

    Message:
      Email should be sent with attachments

    [0m [90m 385 |[39m         
attachments[33m:[39m [{ filename[33m:[39m 
[32m'data.csv'[39m[33m,[39m data[33m:[39m 
[32m'csv content'[39m }][33m,[39m
     [90m 386 |[39m       })[33m;[39m
    [31m[1m>[22m[39m[90m 387 |[39m       
assert(result[33m.[39mstatus [33m===[39m 
[32m'sent'[39m[33m,[39m [32m'Email should be sent 
with attachments'[39m)[33m;[39m
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 388 |[39m     })[33m;[39m
     [90m 389 |[39m
     [90m 390 |[39m     test([32m'should support 
email templates'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.assert 
(api/tests/advancedReporting.test.js:387:7)

  ظù AdvancedReportingService Tests ظ║ Email 
Distribution ظ║ should support email templates

    assert(received)

    Expected value to be equal to:
      true
    Received:
      false

    Message:
      Should use email template

    [0m [90m 394 |[39m         templateId[33m:[39m 
[32m'report-email-template'[39m[33m,[39m
     [90m 395 |[39m       })[33m;[39m
    [31m[1m>[22m[39m[90m 396 |[39m       
assert(result[33m.[39mstatus [33m===[39m 
[32m'sent'[39m[33m,[39m [32m'Should use email 
template'[39m)[33m;[39m
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 397 |[39m     })[33m;[39m
     [90m 398 |[39m   })[33m;[39m
     [90m 399 |[39m[0m

      at Object.assert 
(api/tests/advancedReporting.test.js:396:7)

  ظù AdvancedReportingService Tests ظ║ Caching and 
Performance ظ║ should handle large dataset efficiently

    assert(received)

    Expected value to be equal to:
      true
    Received:
      undefined

    Message:
      Report should be generated

    Difference:

      Comparing two different types of values. Expected 
boolean but received undefined.

    [0m [90m 426 |[39m       [36mconst[39m 
duration [33m=[39m [33mDate[39m[33m.[39mnow() 
[33m-[39m start[33m;[39m
     [90m 427 |[39m
    [31m[1m>[22m[39m[90m 428 |[39m       
assert(report[33m.[39mcontent[33m,[39m [32m'Report 
should be generated'[39m)[33m;[39m
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 429 |[39m       assert(duration [33m<[39m 
[35m5000[39m[33m,[39m [32m'Should generate large 
report within 5 seconds'[39m)[33m;[39m
     [90m 430 |[39m     })[33m;[39m
     [90m 431 |[39m   })[33m;[39m[0m

      at Object.assert 
(api/tests/advancedReporting.test.js:428:7)

  ظù AdvancedReportingService Tests ظ║ Error Handling 
ظ║ should handle invalid data format

    TypeError: data.reduce is not a function

    [0m [90m 204 |[39m
     [90m 205 |[39m     [90m// ╪ص╪│╪د╪ذ 
╪د┘┘à╪ز┘ê╪│╪╖[39m
    [31m[1m>[22m[39m[90m 206 |[39m     
[36mconst[39m sum [33m=[39m 
data[33m.[39mreduce((s[33m,[39m d) [33m=>[39m s 
[33m+[39m ([33mNumber[39m(d[33m.[39mvalue) 
[33m||[39m [35m0[39m)[33m,[39m 
[35m0[39m)[33m;[39m
     [90m     |[39m                      
[31m[1m^[22m[39m
     [90m 207 |[39m     stats[33m.[39maverage 
[33m=[39m sum [33m/[39m 
data[33m.[39mlength[33m;[39m
     [90m 208 |[39m
     [90m 209 |[39m     [90m// ╪ص╪│╪د╪ذ 
╪د┘┘ê╪│┘è╪╖[39m[0m

      at AdvancedReportingService.reduce [as 
calculateStatistics] 
(services/advancedReportingService.js:206:22)
      at AdvancedReportingService.calculateStatistics 
[as generateReport] 
(services/advancedReportingService.js:79:30)
      at Object.generateReport 
(api/tests/advancedReporting.test.js:443:39)

  ظù AdvancedReportingService Tests ظ║ Error Handling 
ظ║ should handle missing required fields

    assert(received)

    Expected value to be equal to:
      true
    Received:
      undefined

    Message:
      Should handle missing fields gracefully

    Difference:

      Comparing two different types of values. Expected 
boolean but received undefined.

    [0m [90m 448 |[39m       [36mconst[39m 
invalidTemplate [33m=[39m { name[33m:[39m 
[32m'Report'[39m }[33m;[39m [90m// Missing 
sections[39m
     [90m 449 |[39m       [36mconst[39m result 
[33m=[39m reportingService[33m.[39mgenerateReport(in
validTemplate[33m,[39m sampleData)[33m;[39m
    [31m[1m>[22m[39m[90m 450 |[39m       
assert(result[33m.[39merror [33m||[39m 
result[33m.[39mcontent[33m,[39m [32m'Should handle 
missing fields gracefully'[39m)[33m;[39m
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 451 |[39m     })[33m;[39m
     [90m 452 |[39m
     [90m 453 |[39m     test([32m'should validate 
filter conditions'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.assert 
(api/tests/advancedReporting.test.js:450:7)

  ظù AdvancedReportingService Tests ظ║ Error Handling 
ظ║ should validate filter conditions

    assert(received)

    Expected value to be equal to:
      true
    Received:
      undefined

    Message:
      Should handle invalid filters

    Difference:

      Comparing two different types of values. Expected 
boolean but received undefined.

    [0m [90m 455 |[39m         filters[33m:[39m [{ 
field[33m:[39m [32m'invalid'[39m[33m,[39m 
operator[33m:[39m [32m'equals'[39m[33m,[39m 
value[33m:[39m [32m'test'[39m }][33m,[39m
     [90m 456 |[39m       })[33m;[39m
    [31m[1m>[22m[39m[90m 457 |[39m       
assert(report[33m.[39mcontent[33m,[39m [32m'Should 
handle invalid filters'[39m)[33m;[39m
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 458 |[39m     })[33m;[39m
     [90m 459 |[39m   })[33m;[39m
     [90m 460 |[39m[0m

      at Object.assert 
(api/tests/advancedReporting.test.js:457:7)

  ظù AdvancedReportingService Tests ظ║ Report History 
ظ║ should save report to history

    assert(received)

    Expected value to be equal to:
      true
    Received:
      undefined

    Message:
      Should save to history

    Difference:

      Comparing two different types of values. Expected 
boolean but received undefined.

    [0m [90m 466 |[39m       [36mconst[39m report 
[33m=[39m reportingService[33m.[39mgenerateReport(re
portTemplate[33m,[39m sampleData)[33m;[39m
     [90m 467 |[39m       [36mconst[39m saved 
[33m=[39m reportingService[33m.[39msaveToHistory(rep
ort)[33m;[39m
    [31m[1m>[22m[39m[90m 468 |[39m       
assert(saved[33m.[39mhistoryId[33m,[39m 
[32m'Should save to history'[39m)[33m;[39m
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 469 |[39m     })[33m;[39m
     [90m 470 |[39m
     [90m 471 |[39m     test([32m'should retrieve 
report from history'[39m[33m,[39m () [33m=>[39m 
{[0m

      at Object.assert 
(api/tests/advancedReporting.test.js:468:7)

  ظù AdvancedReportingService Tests ظ║ Report History 
ظ║ should retrieve report from history

    TypeError: reportingService.getFromHistory is not a 
function

    [0m [90m 472 |[39m       [36mconst[39m report 
[33m=[39m reportingService[33m.[39mgenerateReport(re
portTemplate[33m,[39m sampleData)[33m;[39m
     [90m 473 |[39m       [36mconst[39m saved 
[33m=[39m reportingService[33m.[39msaveToHistory(rep
ort)[33m;[39m
    [31m[1m>[22m[39m[90m 474 |[39m       
[36mconst[39m retrieved [33m=[39m reportingService[
33m.[39mgetFromHistory(saved[33m.[39mhistoryId)[33m;
[39m
     [90m     |[39m                                   
       [31m[1m^[22m[39m
     [90m 475 |[39m       
assert(retrieved[33m.[39mid [33m===[39m 
report[33m.[39mid [33m||[39m 
retrieved[33m.[39mcontent [33m===[39m 
report[33m.[39mcontent)[33m;[39m
     [90m 476 |[39m     })[33m;[39m
     [90m 477 |[39m[0m

      at Object.getFromHistory 
(api/tests/advancedReporting.test.js:474:42)

  ظù AdvancedReportingService Tests ظ║ Report History 
ظ║ should delete from history

    assert(received)

    Expected value to be equal to:
      true
    Received:
      false

    Message:
      Should delete from history

    [0m [90m 486 |[39m       [36mconst[39m saved 
[33m=[39m reportingService[33m.[39msaveToHistory(rep
ort)[33m;[39m
     [90m 487 |[39m       [36mconst[39m deleted 
[33m=[39m reportingService[33m.[39mdeleteFromHistory
(saved[33m.[39mhistoryId)[33m;[39m
    [31m[1m>[22m[39m[90m 488 |[39m       
assert(deleted[33m,[39m [32m'Should delete from 
history'[39m)[33m;[39m
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 489 |[39m     })[33m;[39m
     [90m 490 |[39m   })[33m;[39m
     [90m 491 |[39m })[33m;[39m[0m

      at Object.assert 
(api/tests/advancedReporting.test.js:488:7)

FAIL api/tests/projectManagement.test.js
  ProjectManagementService Tests
    Project CRUD Operations
      ├ù should create project (25 ms)
      ├ù should retrieve project by ID (1 ms)
      ├ù should update project (1 ms)
      ├ù should list all projects (29 ms)
      ├ù should delete project (1 ms)
      ظêأ should validate project data (1 ms)
    Phase Management
      ├ù should add phase to project (1 ms)
      ├ù should list project phases (1 ms)
      ├ù should update phase (3 ms)
      ├ù should delete phase (1 ms)
      ├ù should calculate phase progress
    Task Management
      ├ù should create task in project (1 ms)
      ├ù should update task status (1 ms)
      ├ù should list project tasks
      ├ù should filter tasks by status
      ├ù should assign tasks (1 ms)
      ├ù should set task dependencies
      ├ù should calculate task progress
      ├ù should delete task (1 ms)
    Resource Allocation
      ├ù should allocate resource to project (1 ms)
      ├ù should get project resources (1 ms)
      ├ù should update resource allocation (1 ms)
      ├ù should check resource availability (1 ms)
      ├ù should remove resource from project
    Risk Management
      ├ù should identify project risks
      ├ù should get risk severity (1 ms)
      ├ù should update risk status (1 ms)
      ├ù should list project risks (1 ms)
      ├ù should delete risk
    Budget Management
      ├ù should create project budget
      ├ù should record budget expense
      ├ù should calculate budget usage
      ├ù should get budget report (1 ms)
      ├ù should warn on budget overrun
    Project Progress & Analytics
      ├ù should calculate project progress
      ├ù should get project timeline
      ├ù should generate project report (7 ms)
      ├ù should get project health status (1 ms)
    Project Closure
      ├ù should close completed project (434 ms)
      ├ù should generate closure report (1 ms)
      ├ù should archive closed project (4 ms)
    Error Handling
      ظêأ should handle invalid project data
      ├ù should handle missing required fields
      ├ù should prevent tasks without project
    Performance
      ├ù should handle large number of tasks (1 ms)
      ظêأ should generate report efficiently (1 ms)

  ظù ProjectManagementService Tests ظ║ Project CRUD 
Operations ظ║ should create project

    assert(received)

    Expected value to be equal to:
      true
    Received:
      undefined

    Message:
      Should have project ID

    Difference:

      Comparing two different types of values. Expected 
boolean but received undefined.

    [0m [90m 31 |[39m     test([32m'should create 
project'[39m[33m,[39m () [33m=>[39m {
     [90m 32 |[39m       [36mconst[39m result 
[33m=[39m projectService[33m.[39mcreateProject(sampl
eProject)[33m;[39m
    [31m[1m>[22m[39m[90m 33 |[39m       
assert(result[33m.[39mid[33m,[39m [32m'Should have 
project ID'[39m)[33m;[39m
     [90m    |[39m       [31m[1m^[22m[39m
     [90m 34 |[39m       assert(result[33m.[39mname 
[33m===[39m sampleProject[33m.[39mname)[33m;[39m
     [90m 35 |[39m       
assert(result[33m.[39mstatus [33m===[39m 
[32m'active'[39m)[33m;[39m
     [90m 36 |[39m     })[33m;[39m[0m

      at Object.assert 
(api/tests/projectManagement.test.js:33:7)

  ظù ProjectManagementService Tests ظ║ Project CRUD 
Operations ظ║ should retrieve project by ID

    TypeError: Cannot read properties of undefined 
(reading 'name')

    [0m [90m 39 |[39m       [36mconst[39m created 
[33m=[39m projectService[33m.[39mcreateProject(sampl
eProject)[33m;[39m
     [90m 40 |[39m       [36mconst[39m retrieved 
[33m=[39m projectService[33m.[39mgetProject(created
[33m.[39mid)[33m;[39m
    [31m[1m>[22m[39m[90m 41 |[39m       
assert(retrieved[33m.[39mname [33m===[39m 
sampleProject[33m.[39mname)[33m;[39m
     [90m    |[39m                        
[31m[1m^[22m[39m
     [90m 42 |[39m     })[33m;[39m
     [90m 43 |[39m
     [90m 44 |[39m     test([32m'should update 
project'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.name 
(api/tests/projectManagement.test.js:41:24)

  ظù ProjectManagementService Tests ظ║ Project CRUD 
Operations ظ║ should update project

    TypeError: Cannot read properties of null (reading 
'status')

    [0m [90m 47 |[39m         status[33m:[39m 
[32m'completed'[39m[33m,[39m
     [90m 48 |[39m       })[33m;[39m
    [31m[1m>[22m[39m[90m 49 |[39m       
assert(updated[33m.[39mstatus [33m===[39m 
[32m'completed'[39m)[33m;[39m
     [90m    |[39m                      
[31m[1m^[22m[39m
     [90m 50 |[39m     })[33m;[39m
     [90m 51 |[39m
     [90m 52 |[39m     test([32m'should list all 
projects'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.status 
(api/tests/projectManagement.test.js:49:22)

  ظù ProjectManagementService Tests ظ║ Project CRUD 
Operations ظ║ should list all projects

    assert(received)

    Expected value to be equal to:
      true
    Received:
      false

    [0m [90m 55 |[39m
     [90m 56 |[39m       [36mconst[39m projects 
[33m=[39m 
projectService[33m.[39mlistProjects()[33m;[39m
    [31m[1m>[22m[39m[90m 57 |[39m       
assert(projects[33m.[39mlength [33m>=[39m 
[35m2[39m)[33m;[39m
     [90m    |[39m       [31m[1m^[22m[39m
     [90m 58 |[39m     })[33m;[39m
     [90m 59 |[39m
     [90m 60 |[39m     test([32m'should delete 
project'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.assert 
(api/tests/projectManagement.test.js:57:7)

  ظù ProjectManagementService Tests ظ║ Project CRUD 
Operations ظ║ should delete project

    assert(received)

    Expected value to be equal to:
      true
    Received:
      false

    Message:
      Should delete project

    [0m [90m 61 |[39m       [36mconst[39m created 
[33m=[39m projectService[33m.[39mcreateProject(sampl
eProject)[33m;[39m
     [90m 62 |[39m       [36mconst[39m deleted 
[33m=[39m projectService[33m.[39mdeleteProject(creat
ed[33m.[39mid)[33m;[39m
    [31m[1m>[22m[39m[90m 63 |[39m       
assert(deleted[33m,[39m [32m'Should delete 
project'[39m)[33m;[39m
     [90m    |[39m       [31m[1m^[22m[39m
     [90m 64 |[39m     })[33m;[39m
     [90m 65 |[39m
     [90m 66 |[39m     test([32m'should validate 
project data'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.assert 
(api/tests/projectManagement.test.js:63:7)

  ظù ProjectManagementService Tests ظ║ Phase 
Management ظ║ should add phase to project

    TypeError: Cannot read properties of undefined 
(reading 'set')

    [0m [90m 629 |[39m     [36mconst[39m phaseId 
[33m=[39m [32m`phase_${Date.now()}`[39m[33m;[39m
     [90m 630 |[39m     [36mconst[39m newPhase 
[33m=[39m { [33m...[39mphase[33m,[39m 
id[33m:[39m phaseId[33m,[39m projectId }[33m;[39m
    [31m[1m>[22m[39m[90m 631 |[39m     [36mthis[
39m[33m.[39mphases[33m.[39m[36mset[39m(phaseId[33
m,[39m newPhase)[33m;[39m
     [90m     |[39m                 
[31m[1m^[22m[39m
     [90m 632 |[39m     [36mreturn[39m 
newPhase[33m;[39m
     [90m 633 |[39m   }
     [90m 634 |[39m[0m

      at ProjectManagementService.set [as addPhase] 
(services/projectManagementService.js:631:17)
      at Object.addPhase 
(api/tests/projectManagement.test.js:79:36)

  ظù ProjectManagementService Tests ظ║ Phase 
Management ظ║ should list project phases

    TypeError: Cannot read properties of undefined 
(reading 'set')

    [0m [90m 629 |[39m     [36mconst[39m phaseId 
[33m=[39m [32m`phase_${Date.now()}`[39m[33m;[39m
     [90m 630 |[39m     [36mconst[39m newPhase 
[33m=[39m { [33m...[39mphase[33m,[39m 
id[33m:[39m phaseId[33m,[39m projectId }[33m;[39m
    [31m[1m>[22m[39m[90m 631 |[39m     [36mthis[
39m[33m.[39mphases[33m.[39m[36mset[39m(phaseId[33
m,[39m newPhase)[33m;[39m
     [90m     |[39m                 
[31m[1m^[22m[39m
     [90m 632 |[39m     [36mreturn[39m 
newPhase[33m;[39m
     [90m 633 |[39m   }
     [90m 634 |[39m[0m

      at ProjectManagementService.set [as addPhase] 
(services/projectManagementService.js:631:17)
      at Object.addPhase 
(api/tests/projectManagement.test.js:91:22)

  ظù ProjectManagementService Tests ظ║ Phase 
Management ظ║ should update phase

    TypeError: Cannot read properties of undefined 
(reading 'set')

    [0m [90m 629 |[39m     [36mconst[39m phaseId 
[33m=[39m [32m`phase_${Date.now()}`[39m[33m;[39m
     [90m 630 |[39m     [36mconst[39m newPhase 
[33m=[39m { [33m...[39mphase[33m,[39m 
id[33m:[39m phaseId[33m,[39m projectId }[33m;[39m
    [31m[1m>[22m[39m[90m 631 |[39m     [36mthis[
39m[33m.[39mphases[33m.[39m[36mset[39m(phaseId[33
m,[39m newPhase)[33m;[39m
     [90m     |[39m                 
[31m[1m^[22m[39m
     [90m 632 |[39m     [36mreturn[39m 
newPhase[33m;[39m
     [90m 633 |[39m   }
     [90m 634 |[39m[0m

      at ProjectManagementService.set [as addPhase] 
(services/projectManagementService.js:631:17)
      at Object.addPhase 
(api/tests/projectManagement.test.js:103:36)

  ظù ProjectManagementService Tests ظ║ Phase 
Management ظ║ should delete phase

    TypeError: Cannot read properties of undefined 
(reading 'set')

    [0m [90m 629 |[39m     [36mconst[39m phaseId 
[33m=[39m [32m`phase_${Date.now()}`[39m[33m;[39m
     [90m 630 |[39m     [36mconst[39m newPhase 
[33m=[39m { [33m...[39mphase[33m,[39m 
id[33m:[39m phaseId[33m,[39m projectId }[33m;[39m
    [31m[1m>[22m[39m[90m 631 |[39m     [36mthis[
39m[33m.[39mphases[33m.[39m[36mset[39m(phaseId[33
m,[39m newPhase)[33m;[39m
     [90m     |[39m                 
[31m[1m^[22m[39m
     [90m 632 |[39m     [36mreturn[39m 
newPhase[33m;[39m
     [90m 633 |[39m   }
     [90m 634 |[39m[0m

      at ProjectManagementService.set [as addPhase] 
(services/projectManagementService.js:631:17)
      at Object.addPhase 
(api/tests/projectManagement.test.js:118:36)

  ظù ProjectManagementService Tests ظ║ Phase 
Management ظ║ should calculate phase progress

    TypeError: Cannot read properties of undefined 
(reading 'set')

    [0m [90m 629 |[39m     [36mconst[39m phaseId 
[33m=[39m [32m`phase_${Date.now()}`[39m[33m;[39m
     [90m 630 |[39m     [36mconst[39m newPhase 
[33m=[39m { [33m...[39mphase[33m,[39m 
id[33m:[39m phaseId[33m,[39m projectId }[33m;[39m
    [31m[1m>[22m[39m[90m 631 |[39m     [36mthis[
39m[33m.[39mphases[33m.[39m[36mset[39m(phaseId[33
m,[39m newPhase)[33m;[39m
     [90m     |[39m                 
[31m[1m^[22m[39m
     [90m 632 |[39m     [36mreturn[39m 
newPhase[33m;[39m
     [90m 633 |[39m   }
     [90m 634 |[39m[0m

      at ProjectManagementService.set [as addPhase] 
(services/projectManagementService.js:631:17)
      at Object.addPhase 
(api/tests/projectManagement.test.js:128:36)

  ظù ProjectManagementService Tests ظ║ Task 
Management ظ║ should create task in project

    assert(received)

    Expected value to be equal to:
      true
    Received:
      false

    [0m [90m 150 |[39m
     [90m 151 |[39m       
assert(task[33m.[39mid[33m,[39m [32m'Should have 
task ID'[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 152 |[39m       
assert(task[33m.[39mstatus [33m===[39m 
[32m'open'[39m)[33m;[39m
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 153 |[39m     })[33m;[39m
     [90m 154 |[39m
     [90m 155 |[39m     test([32m'should update task 
status'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.assert 
(api/tests/projectManagement.test.js:152:7)

  ظù ProjectManagementService Tests ظ║ Task 
Management ظ║ should update task status

    assert(received)

    Expected value to be equal to:
      true
    Received:
      false

    [0m [90m 161 |[39m       [36mconst[39m updated 
[33m=[39m projectService[33m.[39mupdateTaskStatus(pr
oject[33m.[39mid[33m,[39m 
task[33m.[39mid[33m,[39m 
[32m'in_progress'[39m)[33m;[39m
     [90m 162 |[39m
    [31m[1m>[22m[39m[90m 163 |[39m       
assert(updated[33m.[39mstatus [33m===[39m 
[32m'in_progress'[39m)[33m;[39m
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 164 |[39m     })[33m;[39m
     [90m 165 |[39m
     [90m 166 |[39m     test([32m'should list 
project tasks'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.assert 
(api/tests/projectManagement.test.js:163:7)

  ظù ProjectManagementService Tests ظ║ Task 
Management ظ║ should list project tasks

    TypeError: projectService.getTasks is not a function

    [0m [90m 169 |[39m       projectService[33m.[39
maddTask(project[33m.[39mid[33m,[39m { 
title[33m:[39m [32m'Task 2'[39m })[33m;[39m
     [90m 170 |[39m
    [31m[1m>[22m[39m[90m 171 |[39m       
[36mconst[39m tasks [33m=[39m projectService[33m.[
39mgetTasks(project[33m.[39mid)[33m;[39m
     [90m     |[39m                                   
 [31m[1m^[22m[39m
     [90m 172 |[39m       
assert(tasks[33m.[39mlength [33m>=[39m 
[35m2[39m)[33m;[39m
     [90m 173 |[39m     })[33m;[39m
     [90m 174 |[39m[0m

      at Object.getTasks 
(api/tests/projectManagement.test.js:171:36)

  ظù ProjectManagementService Tests ظ║ Task 
Management ظ║ should filter tasks by status

    TypeError: projectService.getTasks is not a function

    [0m [90m 179 |[39m       projectService[33m.[39
maddTask(project[33m.[39mid[33m,[39m { 
title[33m:[39m [32m'Task 2'[39m })[33m;[39m
     [90m 180 |[39m
    [31m[1m>[22m[39m[90m 181 |[39m       
[36mconst[39m openTasks [33m=[39m projectService[33
m.[39mgetTasks(project[33m.[39mid[33m,[39m { 
status[33m:[39m [32m'open'[39m })[33m;[39m
     [90m     |[39m                                   
     [31m[1m^[22m[39m
     [90m 182 |[39m       
assert(openTasks[33m.[39mlength [33m>=[39m 
[35m1[39m)[33m;[39m
     [90m 183 |[39m     })[33m;[39m
     [90m 184 |[39m[0m

      at Object.getTasks 
(api/tests/projectManagement.test.js:181:40)

  ظù ProjectManagementService Tests ظ║ Task 
Management ظ║ should assign tasks

    assert(received)

    Expected value to be equal to:
      true
    Received:
      false

    [0m [90m 191 |[39m       [36mconst[39m 
assigned [33m=[39m projectService[33m.[39massignTask
(project[33m.[39mid[33m,[39m 
task[33m.[39mid[33m,[39m 
[32m'user@example.com'[39m)[33m;[39m
     [90m 192 |[39m
    [31m[1m>[22m[39m[90m 193 |[39m       
assert(assigned[33m.[39massignee [33m===[39m 
[32m'user@example.com'[39m)[33m;[39m
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 194 |[39m     })[33m;[39m
     [90m 195 |[39m
     [90m 196 |[39m     test([32m'should set task 
dependencies'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.assert 
(api/tests/projectManagement.test.js:193:7)

  ظù ProjectManagementService Tests ظ║ Task 
Management ظ║ should set task dependencies

    TypeError: projectService.addTaskDependency is not 
a function

    [0m [90m 199 |[39m       [36mconst[39m task2 
[33m=[39m projectService[33m.[39maddTask(project[33
m.[39mid[33m,[39m { title[33m:[39m [32m'Task 
2'[39m })[33m;[39m
     [90m 200 |[39m
    [31m[1m>[22m[39m[90m 201 |[39m       
[36mconst[39m result [33m=[39m projectService[33m.
[39maddTaskDependency(project[33m.[39mid[33m,[39m 
task2[33m.[39mid[33m,[39m 
task1[33m.[39mid)[33m;[39m
     [90m     |[39m                                   
  [31m[1m^[22m[39m
     [90m 202 |[39m
     [90m 203 |[39m       assert(result[33m.[39mdepe
ndencies[33m.[39mincludes(task1[33m.[39mid))[33m;[
39m
     [90m 204 |[39m     })[33m;[39m[0m

      at Object.addTaskDependency 
(api/tests/projectManagement.test.js:201:37)

  ظù ProjectManagementService Tests ظ║ Task 
Management ظ║ should calculate task progress

    TypeError: projectService.getTaskProgress is not a 
function

    [0m [90m 214 |[39m       })[33m;[39m
     [90m 215 |[39m
    [31m[1m>[22m[39m[90m 216 |[39m       
[36mconst[39m progress [33m=[39m projectService[33m
.[39mgetTaskProgress(project[33m.[39mid[33m,[39m 
task[33m.[39mid)[33m;[39m
     [90m     |[39m                                   
    [31m[1m^[22m[39m
     [90m 217 |[39m       
assert(progress[33m.[39mpercentage [33m===[39m 
[35m50[39m)[33m;[39m
     [90m 218 |[39m     })[33m;[39m
     [90m 219 |[39m[0m

      at Object.getTaskProgress 
(api/tests/projectManagement.test.js:216:39)

  ظù ProjectManagementService Tests ظ║ Task 
Management ظ║ should delete task

    TypeError: projectService.deleteTask is not a 
function

    [0m [90m 222 |[39m       [36mconst[39m task 
[33m=[39m projectService[33m.[39maddTask(project[33
m.[39mid[33m,[39m { title[33m:[39m [32m'Task 
1'[39m })[33m;[39m
     [90m 223 |[39m
    [31m[1m>[22m[39m[90m 224 |[39m       
[36mconst[39m deleted [33m=[39m projectService[33m.
[39mdeleteTask(project[33m.[39mid[33m,[39m 
task[33m.[39mid)[33m;[39m
     [90m     |[39m                                   
   [31m[1m^[22m[39m
     [90m 225 |[39m       assert(deleted)[33m;[39m
     [90m 226 |[39m     })[33m;[39m
     [90m 227 |[39m   })[33m;[39m[0m

      at Object.deleteTask 
(api/tests/projectManagement.test.js:224:38)

  ظù ProjectManagementService Tests ظ║ Resource 
Allocation ظ║ should allocate resource to project

    assert(received)

    Expected value to be equal to:
      true
    Received:
      undefined

    Message:
      Should have resource ID

    Difference:

      Comparing two different types of values. Expected 
boolean but received undefined.

    [0m [90m 240 |[39m       })[33m;[39m
     [90m 241 |[39m
    [31m[1m>[22m[39m[90m 242 |[39m       
assert(resource[33m.[39mid[33m,[39m [32m'Should 
have resource ID'[39m)[33m;[39m
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 243 |[39m     })[33m;[39m
     [90m 244 |[39m
     [90m 245 |[39m     test([32m'should get project 
resources'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.assert 
(api/tests/projectManagement.test.js:242:7)

  ظù ProjectManagementService Tests ظ║ Resource 
Allocation ظ║ should get project resources

    TypeError: projectService.getResources is not a 
function

    [0m [90m 250 |[39m       })[33m;[39m
     [90m 251 |[39m
    [31m[1m>[22m[39m[90m 252 |[39m       
[36mconst[39m resources [33m=[39m projectService[33
m.[39mgetResources(project[33m.[39mid)[33m;[39m
     [90m     |[39m                                   
     [31m[1m^[22m[39m
     [90m 253 |[39m       
assert(resources[33m.[39mlength [33m>[39m 
[35m0[39m)[33m;[39m
     [90m 254 |[39m     })[33m;[39m
     [90m 255 |[39m[0m

      at Object.getResources 
(api/tests/projectManagement.test.js:252:40)

  ظù ProjectManagementService Tests ظ║ Resource 
Allocation ظ║ should update resource allocation

    TypeError: projectService.updateResourceAllocation 
is not a function

    [0m [90m 261 |[39m       })[33m;[39m
     [90m 262 |[39m
    [31m[1m>[22m[39m[90m 263 |[39m       
[36mconst[39m updated [33m=[39m projectService[33m.
[39mupdateResourceAllocation(project[33m.[39mid[33m,
[39m resource[33m.[39mid[33m,[39m 
[35m100[39m)[33m;[39m
     [90m     |[39m                                   
   [31m[1m^[22m[39m
     [90m 264 |[39m
     [90m 265 |[39m       
assert(updated[33m.[39mallocation [33m===[39m 
[35m100[39m)[33m;[39m
     [90m 266 |[39m     })[33m;[39m[0m

      at Object.updateResourceAllocation 
(api/tests/projectManagement.test.js:263:38)

  ظù ProjectManagementService Tests ظ║ Resource 
Allocation ظ║ should check resource availability

    TypeError: projectService.checkResourceAvailability 
is not a function

    [0m [90m 273 |[39m       })[33m;[39m
     [90m 274 |[39m
    [31m[1m>[22m[39m[90m 275 |[39m       
[36mconst[39m available [33m=[39m projectService[33
m.[39mcheckResourceAvailability(project[33m.[39mid)[
33m;[39m
     [90m     |[39m                                   
     [31m[1m^[22m[39m
     [90m 276 |[39m       
assert(available[33m.[39mtotalAllocation [33m<=[39m 
[35m100[39m)[33m;[39m
     [90m 277 |[39m     })[33m;[39m
     [90m 278 |[39m[0m

      at Object.checkResourceAvailability 
(api/tests/projectManagement.test.js:275:40)

  ظù ProjectManagementService Tests ظ║ Resource 
Allocation ظ║ should remove resource from project

    TypeError: projectService.removeResource is not a 
function

    [0m [90m 283 |[39m       })[33m;[39m
     [90m 284 |[39m
    [31m[1m>[22m[39m[90m 285 |[39m       
[36mconst[39m removed [33m=[39m projectService[33m.
[39mremoveResource(project[33m.[39mid[33m,[39m 
resource[33m.[39mid)[33m;[39m
     [90m     |[39m                                   
   [31m[1m^[22m[39m
     [90m 286 |[39m       assert(removed)[33m;[39m
     [90m 287 |[39m     })[33m;[39m
     [90m 288 |[39m   })[33m;[39m[0m

      at Object.removeResource 
(api/tests/projectManagement.test.js:285:38)

  ظù ProjectManagementService Tests ظ║ Risk 
Management ظ║ should identify project risks

    TypeError: projectService.addRisk is not a function

    [0m [90m 294 |[39m     test([32m'should 
identify project risks'[39m[33m,[39m () [33m=>[39m 
{
     [90m 295 |[39m       [36mconst[39m project 
[33m=[39m projectService[33m.[39mcreateProject(sampl
eProject)[33m;[39m
    [31m[1m>[22m[39m[90m 296 |[39m       
[36mconst[39m risk [33m=[39m projectService[33m.[3
9maddRisk(project[33m.[39mid[33m,[39m {
     [90m     |[39m                                   
[31m[1m^[22m[39m
     [90m 297 |[39m         title[33m:[39m 
[32m'Budget Risk'[39m[33m,[39m
     [90m 298 |[39m         description[33m:[39m 
[32m'Potential budget overrun'[39m[33m,[39m
     [90m 299 |[39m         probability[33m:[39m 
[32m'high'[39m[33m,[39m[0m

      at Object.addRisk 
(api/tests/projectManagement.test.js:296:35)

  ظù ProjectManagementService Tests ظ║ Risk 
Management ظ║ should get risk severity

    TypeError: projectService.addRisk is not a function

    [0m [90m 307 |[39m     test([32m'should get 
risk severity'[39m[33m,[39m () [33m=>[39m {
     [90m 308 |[39m       [36mconst[39m project 
[33m=[39m projectService[33m.[39mcreateProject(sampl
eProject)[33m;[39m
    [31m[1m>[22m[39m[90m 309 |[39m       
[36mconst[39m risk [33m=[39m projectService[33m.[3
9maddRisk(project[33m.[39mid[33m,[39m {
     [90m     |[39m                                   
[31m[1m^[22m[39m
     [90m 310 |[39m         title[33m:[39m 
[32m'Risk'[39m[33m,[39m
     [90m 311 |[39m         probability[33m:[39m 
[32m'high'[39m[33m,[39m
     [90m 312 |[39m         impact[33m:[39m 
[32m'high'[39m[33m,[39m[0m

      at Object.addRisk 
(api/tests/projectManagement.test.js:309:35)

  ظù ProjectManagementService Tests ظ║ Risk 
Management ظ║ should update risk status

    TypeError: projectService.addRisk is not a function

    [0m [90m 319 |[39m     test([32m'should update 
risk status'[39m[33m,[39m () [33m=>[39m {
     [90m 320 |[39m       [36mconst[39m project 
[33m=[39m projectService[33m.[39mcreateProject(sampl
eProject)[33m;[39m
    [31m[1m>[22m[39m[90m 321 |[39m       
[36mconst[39m risk [33m=[39m projectService[33m.[3
9maddRisk(project[33m.[39mid[33m,[39m {
     [90m     |[39m                                   
[31m[1m^[22m[39m
     [90m 322 |[39m         title[33m:[39m 
[32m'Risk'[39m[33m,[39m
     [90m 323 |[39m       })[33m;[39m
     [90m 324 |[39m[0m

      at Object.addRisk 
(api/tests/projectManagement.test.js:321:35)

  ظù ProjectManagementService Tests ظ║ Risk 
Management ظ║ should list project risks

    TypeError: projectService.addRisk is not a function

    [0m [90m 330 |[39m     test([32m'should list 
project risks'[39m[33m,[39m () [33m=>[39m {
     [90m 331 |[39m       [36mconst[39m project 
[33m=[39m projectService[33m.[39mcreateProject(sampl
eProject)[33m;[39m
    [31m[1m>[22m[39m[90m 332 |[39m       projectSe
rvice[33m.[39maddRisk(project[33m.[39mid[33m,[39m 
{ title[33m:[39m [32m'Risk 1'[39m })[33m;[39m
     [90m     |[39m                      
[31m[1m^[22m[39m
     [90m 333 |[39m       projectService[33m.[39madd
Risk(project[33m.[39mid[33m,[39m { title[33m:[39m 
[32m'Risk 2'[39m })[33m;[39m
     [90m 334 |[39m
     [90m 335 |[39m       [36mconst[39m risks 
[33m=[39m projectService[33m.[39mgetRisks(project[3
3m.[39mid)[33m;[39m[0m

      at Object.addRisk 
(api/tests/projectManagement.test.js:332:22)

  ظù ProjectManagementService Tests ظ║ Risk 
Management ظ║ should delete risk

    TypeError: projectService.addRisk is not a function

    [0m [90m 339 |[39m     test([32m'should delete 
risk'[39m[33m,[39m () [33m=>[39m {
     [90m 340 |[39m       [36mconst[39m project 
[33m=[39m projectService[33m.[39mcreateProject(sampl
eProject)[33m;[39m
    [31m[1m>[22m[39m[90m 341 |[39m       
[36mconst[39m risk [33m=[39m projectService[33m.[3
9maddRisk(project[33m.[39mid[33m,[39m { 
title[33m:[39m [32m'Risk'[39m })[33m;[39m
     [90m     |[39m                                   
[31m[1m^[22m[39m
     [90m 342 |[39m
     [90m 343 |[39m       [36mconst[39m deleted 
[33m=[39m projectService[33m.[39mdeleteRisk(project
[33m.[39mid[33m,[39m risk[33m.[39mid)[33m;[39m
     [90m 344 |[39m       
assert(deleted)[33m;[39m[0m

      at Object.addRisk 
(api/tests/projectManagement.test.js:341:35)

  ظù ProjectManagementService Tests ظ║ Budget 
Management ظ║ should create project budget

    TypeError: projectService.createBudget is not a 
function

    [0m [90m 352 |[39m     test([32m'should create 
project budget'[39m[33m,[39m () [33m=>[39m {
     [90m 353 |[39m       [36mconst[39m project 
[33m=[39m projectService[33m.[39mcreateProject(sampl
eProject)[33m;[39m
    [31m[1m>[22m[39m[90m 354 |[39m       
[36mconst[39m budget [33m=[39m projectService[33m.
[39mcreateBudget(project[33m.[39mid[33m,[39m {
     [90m     |[39m                                   
  [31m[1m^[22m[39m
     [90m 355 |[39m         totalAmount[33m:[39m 
[35m100000[39m[33m,[39m
     [90m 356 |[39m         currency[33m:[39m 
[32m'USD'[39m[33m,[39m
     [90m 357 |[39m       })[33m;[39m[0m

      at Object.createBudget 
(api/tests/projectManagement.test.js:354:37)

  ظù ProjectManagementService Tests ظ║ Budget 
Management ظ║ should record budget expense

    TypeError: projectService.createBudget is not a 
function

    [0m [90m 363 |[39m     test([32m'should record 
budget expense'[39m[33m,[39m () [33m=>[39m {
     [90m 364 |[39m       [36mconst[39m project 
[33m=[39m projectService[33m.[39mcreateProject(sampl
eProject)[33m;[39m
    [31m[1m>[22m[39m[90m 365 |[39m       
[36mconst[39m budget [33m=[39m projectService[33m.
[39mcreateBudget(project[33m.[39mid[33m,[39m {
     [90m     |[39m                                   
  [31m[1m^[22m[39m
     [90m 366 |[39m         totalAmount[33m:[39m 
[35m100000[39m[33m,[39m
     [90m 367 |[39m       })[33m;[39m
     [90m 368 |[39m[0m

      at Object.createBudget 
(api/tests/projectManagement.test.js:365:37)

  ظù ProjectManagementService Tests ظ║ Budget 
Management ظ║ should calculate budget usage

    TypeError: projectService.createBudget is not a 
function

    [0m [90m 378 |[39m     test([32m'should 
calculate budget usage'[39m[33m,[39m () [33m=>[39m 
{
     [90m 379 |[39m       [36mconst[39m project 
[33m=[39m projectService[33m.[39mcreateProject(sampl
eProject)[33m;[39m
    [31m[1m>[22m[39m[90m 380 |[39m       
[36mconst[39m budget [33m=[39m projectService[33m.
[39mcreateBudget(project[33m.[39mid[33m,[39m {
     [90m     |[39m                                   
  [31m[1m^[22m[39m
     [90m 381 |[39m         totalAmount[33m:[39m 
[35m100000[39m[33m,[39m
     [90m 382 |[39m       })[33m;[39m
     [90m 383 |[39m[0m

      at Object.createBudget 
(api/tests/projectManagement.test.js:380:37)

  ظù ProjectManagementService Tests ظ║ Budget 
Management ظ║ should get budget report

    TypeError: projectService.createBudget is not a 
function

    [0m [90m 393 |[39m     test([32m'should get 
budget report'[39m[33m,[39m () [33m=>[39m {
     [90m 394 |[39m       [36mconst[39m project 
[33m=[39m projectService[33m.[39mcreateProject(sampl
eProject)[33m;[39m
    [31m[1m>[22m[39m[90m 395 |[39m       
[36mconst[39m budget [33m=[39m projectService[33m.
[39mcreateBudget(project[33m.[39mid[33m,[39m {
     [90m     |[39m                                   
  [31m[1m^[22m[39m
     [90m 396 |[39m         totalAmount[33m:[39m 
[35m100000[39m[33m,[39m
     [90m 397 |[39m       })[33m;[39m
     [90m 398 |[39m[0m

      at Object.createBudget 
(api/tests/projectManagement.test.js:395:37)

  ظù ProjectManagementService Tests ظ║ Budget 
Management ظ║ should warn on budget overrun

    TypeError: projectService.createBudget is not a 
function

    [0m [90m 409 |[39m     test([32m'should warn on 
budget overrun'[39m[33m,[39m () [33m=>[39m {
     [90m 410 |[39m       [36mconst[39m project 
[33m=[39m projectService[33m.[39mcreateProject(sampl
eProject)[33m;[39m
    [31m[1m>[22m[39m[90m 411 |[39m       
[36mconst[39m budget [33m=[39m projectService[33m.
[39mcreateBudget(project[33m.[39mid[33m,[39m {
     [90m     |[39m                                   
  [31m[1m^[22m[39m
     [90m 412 |[39m         totalAmount[33m:[39m 
[35m100000[39m[33m,[39m
     [90m 413 |[39m       })[33m;[39m
     [90m 414 |[39m[0m

      at Object.createBudget 
(api/tests/projectManagement.test.js:411:37)

  ظù ProjectManagementService Tests ظ║ Project 
Progress & Analytics ظ║ should calculate project 
progress

    TypeError: projectService.getProjectProgress is not 
a function

    [0m [90m 437 |[39m       projectService[33m.[39
mupdateTaskStatus(project[33m.[39mid[33m,[39m 
task1[33m.[39mid[33m,[39m 
[32m'completed'[39m)[33m;[39m
     [90m 438 |[39m
    [31m[1m>[22m[39m[90m 439 |[39m       
[36mconst[39m progress [33m=[39m projectService[33m
.[39mgetProjectProgress(project[33m.[39mid)[33m;[39
m
     [90m     |[39m                                   
    [31m[1m^[22m[39m
     [90m 440 |[39m       
assert(progress[33m.[39mpercentage [33m===[39m 
[35m50[39m)[33m;[39m
     [90m 441 |[39m     })[33m;[39m
     [90m 442 |[39m[0m

      at Object.getProjectProgress 
(api/tests/projectManagement.test.js:439:39)

  ظù ProjectManagementService Tests ظ║ Project 
Progress & Analytics ظ║ should get project timeline

    TypeError: Cannot read properties of undefined 
(reading 'set')

    [0m [90m 629 |[39m     [36mconst[39m phaseId 
[33m=[39m [32m`phase_${Date.now()}`[39m[33m;[39m
     [90m 630 |[39m     [36mconst[39m newPhase 
[33m=[39m { [33m...[39mphase[33m,[39m 
id[33m:[39m phaseId[33m,[39m projectId }[33m;[39m
    [31m[1m>[22m[39m[90m 631 |[39m     [36mthis[
39m[33m.[39mphases[33m.[39m[36mset[39m(phaseId[33
m,[39m newPhase)[33m;[39m
     [90m     |[39m                 
[31m[1m^[22m[39m
     [90m 632 |[39m     [36mreturn[39m 
newPhase[33m;[39m
     [90m 633 |[39m   }
     [90m 634 |[39m[0m

      at ProjectManagementService.set [as addPhase] 
(services/projectManagementService.js:631:17)
      at Object.addPhase 
(api/tests/projectManagement.test.js:445:22)

  ظù ProjectManagementService Tests ظ║ Project 
Progress & Analytics ظ║ should generate project report

    assert(received)

    Expected value to be equal to:
      true
    Received:
      undefined

    Message:
      Should have summary

    Difference:

      Comparing two different types of values. Expected 
boolean but received undefined.

    [0m [90m 458 |[39m
     [90m 459 |[39m       [36mconst[39m report 
[33m=[39m projectService[33m.[39mgenerateProjectRepo
rt(project[33m.[39mid)[33m;[39m
    [31m[1m>[22m[39m[90m 460 |[39m       
assert(report[33m.[39msummary[33m,[39m [32m'Should 
have summary'[39m)[33m;[39m
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 461 |[39m       
assert(report[33m.[39mmetrics[33m,[39m [32m'Should 
have metrics'[39m)[33m;[39m
     [90m 462 |[39m     })[33m;[39m
     [90m 463 |[39m[0m

      at Object.assert 
(api/tests/projectManagement.test.js:460:7)

  ظù ProjectManagementService Tests ظ║ Project 
Progress & Analytics ظ║ should get project health 
status

    TypeError: projectService.getProjectHealth is not a 
function

    [0m [90m 465 |[39m       [36mconst[39m project 
[33m=[39m projectService[33m.[39mcreateProject(sampl
eProject)[33m;[39m
     [90m 466 |[39m
    [31m[1m>[22m[39m[90m 467 |[39m       
[36mconst[39m health [33m=[39m projectService[33m.
[39mgetProjectHealth(project[33m.[39mid)[33m;[39m
     [90m     |[39m                                   
  [31m[1m^[22m[39m
     [90m 468 |[39m       
assert([[32m'green'[39m[33m,[39m 
[32m'yellow'[39m[33m,[39m [32m'red'[39m][33m.[39
mincludes(health[33m.[39mstatus))[33m;[39m
     [90m 469 |[39m     })[33m;[39m
     [90m 470 |[39m   })[33m;[39m[0m

      at Object.getProjectHealth 
(api/tests/projectManagement.test.js:467:37)

  ظù ProjectManagementService Tests ظ║ Project 
Closure ظ║ should close completed project

    assert(received)

    Expected value to be equal to:
      true
    Received:
      false

    [0m [90m 482 |[39m       })[33m;[39m
     [90m 483 |[39m
    [31m[1m>[22m[39m[90m 484 |[39m       
assert(closed[33m.[39mstatus [33m===[39m 
[32m'closed'[39m)[33m;[39m
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 485 |[39m     })[33m;[39m
     [90m 486 |[39m
     [90m 487 |[39m     test([32m'should generate 
closure report'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.assert 
(api/tests/projectManagement.test.js:484:7)

  ظù ProjectManagementService Tests ظ║ Project 
Closure ظ║ should generate closure report

    TypeError: projectService.getClosureReport is not a 
function

    [0m [90m 489 |[39m       projectService[33m.[39
maddTask(project[33m.[39mid[33m,[39m { 
title[33m:[39m [32m'Task 1'[39m })[33m;[39m
     [90m 490 |[39m
    [31m[1m>[22m[39m[90m 491 |[39m       
[36mconst[39m report [33m=[39m projectService[33m.
[39mgetClosureReport(project[33m.[39mid)[33m;[39m
     [90m     |[39m                                   
  [31m[1m^[22m[39m
     [90m 492 |[39m       
assert(report[33m.[39mcompletionPercentage 
[33m>=[39m [35m0[39m)[33m;[39m
     [90m 493 |[39m       
assert(report[33m.[39mlessons[33m,[39m [32m'Should 
have lessons learned'[39m)[33m;[39m
     [90m 494 |[39m     })[33m;[39m[0m

      at Object.getClosureReport 
(api/tests/projectManagement.test.js:491:37)

  ظù ProjectManagementService Tests ظ║ Project 
Closure ظ║ should archive closed project

    TypeError: projectService.archiveProject is not a 
function

    [0m [90m 498 |[39m       projectService[33m.[39
mcloseProject(project[33m.[39mid[33m,[39m 
{})[33m;[39m
     [90m 499 |[39m
    [31m[1m>[22m[39m[90m 500 |[39m       
[36mconst[39m archived [33m=[39m projectService[33m
.[39marchiveProject(project[33m.[39mid)[33m;[39m
     [90m     |[39m                                   
    [31m[1m^[22m[39m
     [90m 501 |[39m       
assert(archived[33m.[39mstatus [33m===[39m 
[32m'archived'[39m)[33m;[39m
     [90m 502 |[39m     })[33m;[39m
     [90m 503 |[39m   })[33m;[39m[0m

      at Object.archiveProject 
(api/tests/projectManagement.test.js:500:39)

  ظù ProjectManagementService Tests ظ║ Error Handling 
ظ║ should handle missing required fields

    assert(received)

    Expected value to be equal to:
      true
    Received:
      undefined

    Message:
      Should handle missing fields

    Difference:

      Comparing two different types of values. Expected 
boolean but received undefined.

    [0m [90m 517 |[39m         [90m// Missing other 
required fields[39m
     [90m 518 |[39m       })[33m;[39m
    [31m[1m>[22m[39m[90m 519 |[39m       
assert(result[33m.[39merror [33m||[39m 
result[33m.[39mid[33m,[39m [32m'Should handle 
missing fields'[39m)[33m;[39m
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 520 |[39m     })[33m;[39m
     [90m 521 |[39m
     [90m 522 |[39m     test([32m'should prevent 
tasks without project'[39m[33m,[39m () [33m=>[39m 
{[0m

      at Object.assert 
(api/tests/projectManagement.test.js:519:7)

  ظù ProjectManagementService Tests ظ║ Error Handling 
ظ║ should prevent tasks without project

    assert(received)

    Expected value to be equal to:
      true
    Received:
      undefined

    Message:
      Should prevent invalid project

    Difference:

      Comparing two different types of values. Expected 
boolean but received undefined.

    [0m [90m 522 |[39m     test([32m'should prevent 
tasks without project'[39m[33m,[39m () [33m=>[39m {
     [90m 523 |[39m       [36mconst[39m result 
[33m=[39m projectService[33m.[39maddTask([32m'inval
id-id'[39m[33m,[39m { title[33m:[39m 
[32m'Task'[39m })[33m;[39m
    [31m[1m>[22m[39m[90m 524 |[39m       
assert(result[33m.[39merror[33m,[39m [32m'Should 
prevent invalid project'[39m)[33m;[39m
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 525 |[39m     })[33m;[39m
     [90m 526 |[39m   })[33m;[39m
     [90m 527 |[39m[0m

      at Object.assert 
(api/tests/projectManagement.test.js:524:7)

  ظù ProjectManagementService Tests ظ║ Performance 
ظ║ should handle large number of tasks

    TypeError: projectService.getTasks is not a function

    [0m [90m 539 |[39m       [36mconst[39m 
duration [33m=[39m [33mDate[39m[33m.[39mnow() 
[33m-[39m start[33m;[39m
     [90m 540 |[39m
    [31m[1m>[22m[39m[90m 541 |[39m       
[36mconst[39m tasks [33m=[39m projectService[33m.[
39mgetTasks(project[33m.[39mid)[33m;[39m
     [90m     |[39m                                   
 [31m[1m^[22m[39m
     [90m 542 |[39m       
assert(tasks[33m.[39mlength [33m===[39m 
[35m1000[39m)[33m;[39m
     [90m 543 |[39m       assert(duration [33m<[39m 
[35m10000[39m[33m,[39m [32m'Should handle 1000 
tasks within 10 seconds'[39m)[33m;[39m
     [90m 544 |[39m     })[33m;[39m[0m

      at Object.getTasks 
(api/tests/projectManagement.test.js:541:36)

(node:19088) [MONGOOSE] Warning: Duplicate schema index 
on {"registrationNumber":1} found. This is often due to 
declaring an index using both "index: true" and 
"schema.index()". Please remove the duplicate index 
definition.
(Use `node --trace-warnings ...` to show where the 
warning was created)
(node:19088) [MONGOOSE] Warning: Duplicate schema index 
on {"plateNumber":1} found. This is often due to 
declaring an index using both "index: true" and 
"schema.index()". Please remove the duplicate index 
definition.
(node:19088) [MONGOOSE] Warning: Duplicate schema index 
on {"assignedDriver":1} found. This is often due to 
declaring an index using both "index: true" and 
"schema.index()". Please remove the duplicate index 
definition.
(node:19088) [MONGOOSE] Warning: Duplicate schema index 
on {"personalInfo.nationalId":1} found. This is often 
due to declaring an index using both "index: true" and 
"schema.index()". Please remove the duplicate index 
definition.
(node:19088) [MONGOOSE] Warning: Duplicate schema index 
on {"license.licenseNumber":1} found. This is often due 
to declaring an index using both "index: true" and 
"schema.index()". Please remove the duplicate index 
definition.
  console.log
    ≡اْش ╪ح╪╢╪د┘╪ر ╪▒╪│╪د┘╪ر ╪»╪د╪«┘ ╪د┘╪ز╪╖╪ذ┘è┘é

      at AdvancedMessagingAlertSystem.log [as sendToChannel] (services/advancedMessagingAlertSystem.js:179:17)

  console.log
    ≡اôد ╪ح╪▒╪│╪د┘ ╪ذ╪▒┘è╪» ╪ح┘┘ë user_123: ╪│┘è╪▒ ╪╣┘à┘ ╪ش╪»┘è╪»: ╪╖┘╪ذ ╪ح╪ش╪د╪▓╪ر

      at AdvancedMessagingAlertSystem.log [as sendToChannel] (services/advancedMessagingAlertSystem.js:167:17)

  console.log
    ≡اôد ╪ح╪▒╪│╪د┘ ╪ذ╪▒┘è╪» ╪ح┘┘ë manager@example.com: ≡ا¤┤ ┘┘ê╪▒┘è: Performance Drop Alert

      at AdvancedMessagingAlertSystem.log [as sendToChannel] (services/advancedMessagingAlertSystem.js:167:17)

  console.log
    ≡ا¤¤ ╪ح╪▒╪│╪د┘ ╪ح╪┤╪╣╪د╪▒ ┘┘ê╪▒┘è ╪ح┘┘ë manager@example.com

      at AdvancedMessagingAlertSystem.log [as sendToChannel] (services/advancedMessagingAlertSystem.js:175:17)

  console.log
    ≡اْش ╪ح╪╢╪د┘╪ر ╪▒╪│╪د┘╪ر ╪»╪د╪«┘ ╪د┘╪ز╪╖╪ذ┘è┘é

      at AdvancedMessagingAlertSystem.log [as sendToChannel] (services/advancedMessagingAlertSystem.js:179:17)

  console.log
    ≡اْش ╪ح╪╢╪د┘╪ر ╪▒╪│╪د┘╪ر ╪»╪د╪«┘ ╪د┘╪ز╪╖╪ذ┘è┘é

      at AdvancedMessagingAlertSystem.log [as sendToChannel] (services/advancedMessagingAlertSystem.js:179:17)

  console.log
    ≡اôد ╪ح╪▒╪│╪د┘ ╪ذ╪▒┘è╪» ╪ح┘┘ë user_123: ┘à┘ê╪د┘┘é╪ر ┘à╪╖┘┘ê╪ذ╪ر: ╪╖┘╪ذ ╪ح╪ش╪د╪▓╪ر

      at AdvancedMessagingAlertSystem.log [as sendToChannel] (services/advancedMessagingAlertSystem.js:167:17)

  console.log
    ≡اôإ Auth routes using In-Memory User model

      at Object.log (api/routes/auth.routes.js:9:11)

  console.log
    ≡اôإ Auth routes using In-Memory User model

      at Object.log (api/routes/auth.routes.js:9:11)

  console.log
    ≡اôإ Auth routes using In-Memory User model

      at Object.log (api/routes/auth.routes.js:9:11)

  console.log
    ≡اôإ Auth routes using In-Memory User model

      at Object.log (api/routes/auth.routes.js:9:11)

  console.log
    ≡اôإ Auth routes using In-Memory User model

      at Object.log (api/routes/auth.routes.js:9:11)

  console.log
    ≡اôإ Auth routes using In-Memory User model

      at Object.log (api/routes/auth.routes.js:9:11)

  console.log
    ≡ا» Using in-memory database (development mode)

      at log (config/database.js:14:13)

  console.log
    ≡اôإ Data will be lost when server restarts

      at log (config/database.js:15:13)

  console.log
    ظأآي╕  To use MongoDB Atlas, set USE_MOCK_DB=false in .env

      at log (config/database.js:16:13)

  console.log
    ظ╣ي╕  Using in-memory database - seeding skipped

      at log (server.js:346:15)

(node:6976) [MONGOOSE] Warning: Duplicate schema index 
on {"email":1} found. This is often due to declaring an 
index using both "index: true" and "schema.index()". 
Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the 
warning was created)
(node:6976) [MONGOOSE] Warning: Duplicate schema index 
on {"beneficiary_id":1} found. This is often due to 
declaring an index using both "index: true" and 
"schema.index()". Please remove the duplicate index 
definition.
(node:6976) [MONGOOSE] Warning: Duplicate schema index 
on {"beneficiary_id":1} found. This is often due to 
declaring an index using both "index: true" and 
"schema.index()". Please remove the duplicate index 
definition.
(node:6976) [MONGOOSE] Warning: Duplicate schema index 
on {"program_code":1} found. This is often due to 
declaring an index using both "index: true" and 
"schema.index()". Please remove the duplicate index 
definition.
[0mGET /api/users [32m200[0m 37.862 ms - 384[0m
[0mGET /api/users [32m200[0m 2.676 ms - 384[0m
[0mGET /api/users [33m403[0m 0.864 ms - 51[0m
[0mGET /api/users [33m401[0m 0.996 ms - 54[0m
[0mGET /api/users/user-1 [32m200[0m 2.951 ms - 202[0m
[0mGET /api/users/non-existent [33m404[0m 2.216 ms - 44[0m
[0mGET /api/users/user-1 [32m200[0m 1.916 ms - 202[0m
[0mGET /api/users/user-1 [33m403[0m 1.216 ms - 51[0m
  console.log
    ≡ا» Using in-memory database (development mode)

      at log (config/database.js:14:13)

  console.log
    ≡اôإ Data will be lost when server restarts

      at log (config/database.js:15:13)

  console.log
    ظأآي╕  To use MongoDB Atlas, set USE_MOCK_DB=false in .env

      at log (config/database.js:16:13)

  console.log
    ظ╣ي╕  Using in-memory database - seeding skipped

      at log (server.js:346:15)

(node:11344) [MONGOOSE] Warning: Duplicate schema index 
on {"email":1} found. This is often due to declaring an 
index using both "index: true" and "schema.index()". 
Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the 
warning was created)
(node:11344) [MONGOOSE] Warning: Duplicate schema index 
on {"beneficiary_id":1} found. This is often due to 
declaring an index using both "index: true" and 
"schema.index()". Please remove the duplicate index 
definition.
(node:11344) [MONGOOSE] Warning: Duplicate schema index 
on {"beneficiary_id":1} found. This is often due to 
declaring an index using both "index: true" and 
"schema.index()". Please remove the duplicate index 
definition.
(node:11344) [MONGOOSE] Warning: Duplicate schema index 
on {"program_code":1} found. This is often due to 
declaring an index using both "index: true" and 
"schema.index()". Please remove the duplicate index 
definition.
  console.log
    ≡ا¤ْ [SECURITY] 2026-01-14T07:38:11.637Z - USER_CREATED_BY_ADMIN {
      adminId: 'admin-1',
      newUserId: '1',
      email: 'newuser@example.com',
      ip: '::ffff:127.0.0.1'
    }

      at log (utils/security.js:83:11)

[0mPOST /api/users [32m201[0m 188.452 ms - 178[0m
  console.log
    ≡ا¤ْ [SECURITY] 2026-01-14T07:38:11.652Z - USER_REGISTERED {
      userId: undefined,
      email: 'test@example.com',
      ip: '::ffff:127.0.0.1'
    }

      at log (utils/security.js:83:11)

[0mPOST /api/users [33m400[0m 2.768 ms - 54[0m
[0mPOST /api/auth/register [32m201[0m 193.296 ms - 351[0m
[0mPOST /api/users [33m403[0m 1.261 ms - 51[0m
  console.error
    Create user error: Error: Illegal arguments: undefined, string
        at _async (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\bcryptjs\umd\index.js:233:15)
        at C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\bcryptjs\umd\index.js:245:11
        at new Promise (<anonymous>)
        at Object.hash (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\bcryptjs\umd\index.js:244:16)
        at hash (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\api\routes\users.routes.js:118:41)

    [0m [90m 144 |[39m     })[33m;[39m
     [90m 145 |[39m   } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 146 |[39m     console[33m.[39merror([32m'Create user error:'[39m[33m,[39m error)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 147 |[39m     res[33m.[39mstatus([35m500[39m)[33m.[39mjson({
     [90m 148 |[39m       success[33m:[39m [36mfalse[39m[33m,[39m
     [90m 149 |[39m       message[33m:[39m [32m'Failed to create user'[39m[33m,[39m[0m

      at error (api/routes/users.routes.js:146:13)

[0mPOST /api/users [31m500[0m 14.829 ms - 51[0m
  console.log
    ≡ا¤ْ [SECURITY] 2026-01-14T07:38:11.717Z - USER_UPDATED_BY_ADMIN { adminId: 'admin-1', updatedUserId: 'user-1', ip: '::ffff:127.0.0.1' }

      at log (utils/security.js:83:11)

[0mPUT /api/users/user-1 [32m200[0m 3.914 ms - 146[0m
[0mPUT /api/users/non-existent [33m404[0m 0.950 ms - 44[0m
[0mPUT /api/users/user-1 [33m403[0m 3.827 ms - 51[0m
  console.log
    ≡ا¤ْ [SECURITY] 2026-01-14T07:38:11.752Z - USER_DELETED_BY_ADMIN {
      adminId: 'admin-1',
      deletedUserId: 'user-1',
      deletedUserEmail: 'user@example.com',
      ip: '::ffff:127.0.0.1'
    }

      at log (utils/security.js:83:11)

[0mDELETE /api/users/user-1 [32m200[0m 4.914 ms - 54[0m
[0mDELETE /api/users/non-existent [33m404[0m 0.713 ms - 44[0m
[0mDELETE /api/users/user-1 [33m403[0m 0.714 ms - 51[0m
[0mGET /api/users/user-1/profile [33m404[0m 0.811 ms - 141[0m
[0mPUT /api/users/user-1/profile [33m404[0m 0.673 ms - 141[0m
[0mGET /api/users [33m403[0m 1.156 ms - 50[0m
  console.log
    ≡ا» Using in-memory database (development mode)

      at log (config/database.js:14:13)

  console.log
    ≡اôإ Data will be lost when server restarts

      at log (config/database.js:15:13)

  console.log
    ظأآي╕  To use MongoDB Atlas, set USE_MOCK_DB=false in .env

      at log (config/database.js:16:13)

  console.log
    ظ╣ي╕  Using in-memory database - seeding skipped

      at log (server.js:346:15)

(node:11844) [MONGOOSE] Warning: Duplicate schema index 
on {"email":1} found. This is often due to declaring an 
index using both "index: true" and "schema.index()". 
Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the 
warning was created)
(node:11844) [MONGOOSE] Warning: Duplicate schema index 
on {"beneficiary_id":1} found. This is often due to 
declaring an index using both "index: true" and 
"schema.index()". Please remove the duplicate index 
definition.
(node:11844) [MONGOOSE] Warning: Duplicate schema index 
on {"beneficiary_id":1} found. This is often due to 
declaring an index using both "index: true" and 
"schema.index()". Please remove the duplicate index 
definition.
(node:11844) [MONGOOSE] Warning: Duplicate schema index 
on {"program_code":1} found. This is often due to 
declaring an index using both "index: true" and 
"schema.index()". Please remove the duplicate index 
definition.
  console.log
    ≡ا¤ْ [SECURITY] 2026-01-14T07:38:11.804Z - USER_REGISTERED {
      userId: undefined,
      email: 'duplicate@example.com',
      ip: '::ffff:127.0.0.1'
    }

      at log (utils/security.js:83:11)

[0mPOST /api/auth/register [32m201[0m 119.402 ms - 361[0m
  console.log
    ≡ا¤ْ [SECURITY] 2026-01-14T07:38:11.819Z - REGISTRATION_ATTEMPT_EXISTING_EMAIL { email: 'duplicate@example.com', ip: '::ffff:127.0.0.1' }

      at log (utils/security.js:83:11)

[0mPOST /api/auth/register [33m400[0m 4.082 ms - 54[0m
[0mPOST /api/auth/register [33m429[0m 1.046 ms - 99[0m
[0mPOST /api/auth/register [33m429[0m 0.679 ms - 99[0m
  console.error
    ظإî Login failed: User not found for email: login@example.com

    [0m [90m 111 |[39m     [36mconst[39m user [33m=[39m [36mawait[39m [33mUser[39m[33m.[39mfindOne({ email })[33m;[39m
     [90m 112 |[39m     [36mif[39m ([33m![39muser) {
    [31m[1m>[22m[39m[90m 113 |[39m       console[33m.[39merror([32m'ظإî Login failed: User not found for email:'[39m[33m,[39m email)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 114 |[39m       [36mreturn[39m res[33m.[39mstatus([35m401[39m)[33m.[39mjson({
     [90m 115 |[39m         success[33m:[39m [36mfalse[39m[33m,[39m
     [90m 116 |[39m         message[33m:[39m [32m'Invalid email or password'[39m[33m,[39m[0m

      at error (api/routes/auth.routes.js:113:15)

[0mPOST /api/auth/login [33m401[0m 5.742 ms - 55[0m
  console.error
    ظإî Login failed: User not found for email: admin@alawael.com

    [0m [90m 111 |[39m     [36mconst[39m user [33m=[39m [36mawait[39m [33mUser[39m[33m.[39mfindOne({ email })[33m;[39m
     [90m 112 |[39m     [36mif[39m ([33m![39muser) {
    [31m[1m>[22m[39m[90m 113 |[39m       console[33m.[39merror([32m'ظإî Login failed: User not found for email:'[39m[33m,[39m email)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 114 |[39m       [36mreturn[39m res[33m.[39mstatus([35m401[39m)[33m.[39mjson({
     [90m 115 |[39m         success[33m:[39m [36mfalse[39m[33m,[39m
     [90m 116 |[39m         message[33m:[39m [32m'Invalid email or password'[39m[33m,[39m[0m

      at error (api/routes/auth.routes.js:113:15)

[0mPOST /api/auth/register [33m429[0m 0.389 ms - 99[0m
[0mPOST /api/auth/login [33m401[0m 21.573 ms - 55[0m
  console.error
    ظإî Login failed: User not found for email: nonexistent@example.com

    [0m [90m 111 |[39m     [36mconst[39m user [33m=[39m [36mawait[39m [33mUser[39m[33m.[39mfindOne({ email })[33m;[39m
     [90m 112 |[39m     [36mif[39m ([33m![39muser) {
    [31m[1m>[22m[39m[90m 113 |[39m       console[33m.[39merror([32m'ظإî Login failed: User not found for email:'[39m[33m,[39m email)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 114 |[39m       [36mreturn[39m res[33m.[39mstatus([35m401[39m)[33m.[39mjson({
     [90m 115 |[39m         success[33m:[39m [36mfalse[39m[33m,[39m
     [90m 116 |[39m         message[33m:[39m [32m'Invalid email or password'[39m[33m,[39m[0m

      at error (api/routes/auth.routes.js:113:15)

[0mPOST /api/auth/login [33m401[0m 5.989 ms - 55[0m
[0mPOST /api/auth/register [33m429[0m 0.573 ms - 99[0m
  console.error
    ظإî Login failed: User not found for email: login@example.com

    [0m [90m 111 |[39m     [36mconst[39m user [33m=[39m [36mawait[39m [33mUser[39m[33m.[39mfindOne({ email })[33m;[39m
     [90m 112 |[39m     [36mif[39m ([33m![39muser) {
    [31m[1m>[22m[39m[90m 113 |[39m       console[33m.[39merror([32m'ظإî Login failed: User not found for email:'[39m[33m,[39m email)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 114 |[39m       [36mreturn[39m res[33m.[39mstatus([35m401[39m)[33m.[39mjson({
     [90m 115 |[39m         success[33m:[39m [36mfalse[39m[33m,[39m
     [90m 116 |[39m         message[33m:[39m [32m'Invalid email or password'[39m[33m,[39m[0m

      at error (api/routes/auth.routes.js:113:15)

[0mPOST /api/auth/login [33m401[0m 2.244 ms - 55[0m
[0mGET /api/users [33m401[0m 1.196 ms - 69[0m
[0mGET /api/users [33m401[0m 0.328 ms - 54[0m
[0mPOST /api/auth/logout [33m401[0m 1.194 ms - 54[0m
PASS tests/auth.test.js
  POST /api/auth/login
    ظêأ should handle login attempt (gracefully fail in 
test mode) (81 ms)

PASS __tests__/users.test.js
  User Management Routes
    GET /api/users
      ظêأ should return all users for admin (189 ms)
      ظêأ should not return passwords in user list (20 
ms)
      ظêأ should deny access to non-admin users (12 ms)
      ظêأ should require authentication (13 ms)
    GET /api/users/:id
      ظêأ should return user by ID for admin (15 ms)
      ظêأ should return 404 for non-existent user (21 
ms)
      ظêأ should not include password in response (12 
ms)
      ظêأ should deny access to non-admin users (11 ms)
    POST /api/users
      ظêأ should create new user for admin (242 ms)
      ظêأ should reject duplicate email (17 ms)
      ظêأ should deny access to non-admin users (11 ms)
      ظêأ should require all fields (21 ms)
    PUT /api/users/:id
      ظêأ should update user for admin (20 ms)
      ظêأ should return 404 for non-existent user (6 ms)
      ظêأ should deny access to non-admin users (10 ms)
    DELETE /api/users/:id
      ظêأ should delete user for admin (18 ms)
      ظêأ should return 404 for non-existent user (5 ms)
      ظêأ should deny access to non-admin users (5 ms)
    GET /api/users/:id/profile
      ظêأ should allow users to get their own profile 
(5 ms)
    PUT /api/users/:id/profile
      ظêأ should allow users to update their own 
profile (5 ms)
    Error Handling
      ظêأ should handle invalid token (9 ms)
      ظêأ should handle expired token (122 ms)
      ظêأ should handle malformed authorization header 
(5 ms)

  console.log
    ≡ا» Using in-memory database (development mode)

      at log (config/database.js:14:13)

PASS __tests__/auth.test.js
  Authentication Routes
    POST /api/auth/register
      ظêأ should register a new user successfully (238 
ms)
      ظêأ should reject duplicate email (141 ms)
      ظêأ should require all fields (13 ms)
    POST /api/auth/login
      ظêأ should login successfully with correct 
credentials (18 ms)
      ظêأ should reject invalid email (21 ms)
      ظêأ should reject wrong password (12 ms)
    POST /api/auth/logout
      ظêأ should logout successfully (21 ms)

  console.log
    ≡اôإ Data will be lost when server restarts

      at log (config/database.js:15:13)

  console.log
    ظأآي╕  To use MongoDB Atlas, set USE_MOCK_DB=false in .env

      at log (config/database.js:16:13)

  console.log
    ظ╣ي╕  Using in-memory database - seeding skipped

      at log (server.js:346:15)

(node:24804) [MONGOOSE] Warning: Duplicate schema index 
on {"email":1} found. This is often due to declaring an 
index using both "index: true" and "schema.index()". 
Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the 
warning was created)
(node:24804) [MONGOOSE] Warning: Duplicate schema index 
on {"beneficiary_id":1} found. This is often due to 
declaring an index using both "index: true" and 
"schema.index()". Please remove the duplicate index 
definition.
(node:24804) [MONGOOSE] Warning: Duplicate schema index 
on {"beneficiary_id":1} found. This is often due to 
declaring an index using both "index: true" and 
"schema.index()". Please remove the duplicate index 
definition.
(node:24804) [MONGOOSE] Warning: Duplicate schema index 
on {"program_code":1} found. This is often due to 
declaring an index using both "index: true" and 
"schema.index()". Please remove the duplicate index 
definition.
[0mGET /api/health [33m404[0m 23.646 ms - 127[0m
  console.log
    ≡ا» Using in-memory database (development mode)

      at log (config/database.js:14:13)

  console.log
    ≡اôإ Data will be lost when server restarts

      at log (config/database.js:15:13)

  console.log
    ظأآي╕  To use MongoDB Atlas, set USE_MOCK_DB=false in .env

      at log (config/database.js:16:13)

  console.log
    ظ╣ي╕  Using in-memory database - seeding skipped

      at log (server.js:346:15)

[0mGET /api/status [33m404[0m 1.685 ms - 127[0m
(node:21048) [MONGOOSE] Warning: Duplicate schema index 
on {"email":1} found. This is often due to declaring an 
index using both "index: true" and "schema.index()". 
Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the 
warning was created)
(node:21048) [MONGOOSE] Warning: Duplicate schema index 
on {"beneficiary_id":1} found. This is often due to 
declaring an index using both "index: true" and 
"schema.index()". Please remove the duplicate index 
definition.
(node:21048) [MONGOOSE] Warning: Duplicate schema index 
on {"beneficiary_id":1} found. This is often due to 
declaring an index using both "index: true" and 
"schema.index()". Please remove the duplicate index 
definition.
(node:21048) [MONGOOSE] Warning: Duplicate schema index 
on {"program_code":1} found. This is often due to 
declaring an index using both "index: true" and 
"schema.index()". Please remove the duplicate index 
definition.
[0mGET / [32m200[0m 0.869 ms - 165[0m
  console.log
    ≡ا» Using in-memory database (development mode)

      at log (config/database.js:14:13)

  console.log
    ≡اôإ Data will be lost when server restarts

      at log (config/database.js:15:13)

[0mGET /api [33m404[0m 0.632 ms - 120[0m
  console.log
    ظأآي╕  To use MongoDB Atlas, set USE_MOCK_DB=false in .env

      at log (config/database.js:16:13)

  console.log
    ظ£à Created 1000 notifications in 10ms

      at Object.log (tests/smartNotifications.test.js:371:13)

[0mGET /api/nonexistent-route [33m404[0m 0.731 ms - 138[0m
  console.log
    ظ╣ي╕  Using in-memory database - seeding skipped

      at log (server.js:346:15)

  console.log
    ظ£à Retrieved 100 notifications in 0ms

      at Object.log (tests/smartNotifications.test.js:388:13)

PASS tests/smartNotifications.test.js
  SmartNotificationService Tests
    ظêأ should create a smart notification (3 ms)
    ظêأ should calculate correct priority (1 ms)
    ظêأ should send notification successfully
    ظêأ should mark notification as read (5 ms)
    ظêأ should get unread notifications only (1 ms)
    ظêأ should delete notification (1 ms)
    ظêأ should clear all notifications
    ظêأ should calculate statistics correctly (1 ms)
    ظêأ should schedule notification (1514 ms)
  AdvancedMessagingAlertSystem Tests
    ظêأ should initialize message templates
    ظêأ should send message using template (9 ms)
    ظêأ should create alert rule (1 ms)
    ظêأ should check and trigger alerts (5 ms)
    ظêأ should support multiple alert types (1 ms)
    ظêأ should get message statistics
    ظêأ should get alert statistics (1 ms)
  Integration Tests
    ظêأ complete notification workflow (1 ms)
    ظêأ send message and trigger alert (3 ms)
    ظêأ schedule multiple notifications (2512 ms)
  Performance Tests
    ظêأ should handle 1000 notifications (14 ms)
    ظêأ should retrieve notifications quickly (6 ms)
  Edge Cases
    ظêأ should handle user with no notifications (1 ms)
    ظêأ should handle deleting same notification twice 
(1 ms)
    ظêأ should handle empty workflow data

[0mPOST /api/auth/register [33m400[0m 2.177 ms - 47[0m
(node:19088) [MONGOOSE] Warning: Duplicate schema index 
on {"email":1} found. This is often due to declaring an 
index using both "index: true" and "schema.index()". 
Please remove the duplicate index definition.
(node:19088) [MONGOOSE] Warning: Duplicate schema index 
on {"beneficiary_id":1} found. This is often due to 
declaring an index using both "index: true" and 
"schema.index()". Please remove the duplicate index 
definition.
(node:19088) [MONGOOSE] Warning: Duplicate schema index 
on {"beneficiary_id":1} found. This is often due to 
declaring an index using both "index: true" and 
"schema.index()". Please remove the duplicate index 
definition.
(node:19088) [MONGOOSE] Warning: Duplicate schema index 
on {"program_code":1} found. This is often due to 
declaring an index using both "index: true" and 
"schema.index()". Please remove the duplicate index 
definition.
  console.log
    [INFO] Retrieved 0 employees

      at Object.log [as info] (utils/logger.js:6:13)

[0mGET /api/hr/employees [32m200[0m 23.517 ms - 112[0m
[0mGET /api/hr/employees [33m401[0m 4.538 ms - 54[0m
[0mPOST /api/hr/employees [33m400[0m 3.719 ms - 104[0m
[0mGET /api/hr/employees/123 [33m404[0m 2.894 ms - 60[0m
  console.error
    Error: request entity too large

    [0m [90m 318 |[39m [90m// Error handling middleware (MUST be after all routes)[39m
     [90m 319 |[39m app[33m.[39muse((err[33m,[39m req[33m,[39m res[33m,[39m next) [33m=>[39m {
    [31m[1m>[22m[39m[90m 320 |[39m   console[33m.[39merror([32m'Error:'[39m[33m,[39m err[33m.[39mmessage)[33m;[39m
     [90m     |[39m           [31m[1m^[22m[39m
     [90m 321 |[39m   res[33m.[39mstatus(err[33m.[39mstatusCode [33m||[39m [35m500[39m)[33m.[39mjson({
     [90m 322 |[39m     success[33m:[39m [36mfalse[39m[33m,[39m
     [90m 323 |[39m     statusCode[33m:[39m err[33m.[39mstatusCode [33m||[39m [35m500[39m[33m,[39m[0m

      at error (server.js:320:11)
      at Layer.handle_error (node_modules/express/lib/router/layer.js:71:5)
      at trim_prefix (node_modules/express/lib/router/index.js:326:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at Layer.handle_error (node_modules/express/lib/router/layer.js:67:12)
      at trim_prefix (node_modules/express/lib/router/index.js:326:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at Layer.handle_error (node_modules/express/lib/router/layer.js:67:12)
      at trim_prefix (node_modules/express/lib/router/index.js:326:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at Layer.handle_error (node_modules/express/lib/router/layer.js:67:12)
      at trim_prefix (node_modules/express/lib/router/index.js:326:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at Layer.handle_error (node_modules/express/lib/router/layer.js:67:12)
      at trim_prefix (node_modules/express/lib/router/index.js:326:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at Layer.handle_error (node_modules/express/lib/router/layer.js:67:12)
      at trim_prefix (node_modules/express/lib/router/index.js:326:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at Layer.handle_error (node_modules/express/lib/router/layer.js:67:12)
      at trim_prefix (node_modules/express/lib/router/index.js:326:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at Layer.handle_error (node_modules/express/lib/router/layer.js:67:12)
      at trim_prefix (node_modules/express/lib/router/index.js:326:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at Layer.handle_error (node_modules/express/lib/router/layer.js:67:12)
      at trim_prefix (node_modules/express/lib/router/index.js:326:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at Layer.handle_error (node_modules/express/lib/router/layer.js:67:12)
      at trim_prefix (node_modules/express/lib/router/index.js:326:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at onfinished (node_modules/body-parser/lib/read.js:102:9)
      at listener (node_modules/on-finished/index.js:170:15)
      at onFinish (node_modules/on-finished/index.js:101:5)
      at callback (node_modules/ee-first/index.js:55:10)
      at IncomingMessage.onevent (node_modules/ee-first/index.js:93:5)

[0mPUT /api/hr/employees/123 [33m404[0m 2.057 ms - 60[0m
[0mDELETE /api/hr/employees/123 [33m404[0m 1.446 ms - 60[0m
  console.log
    ≡ا¤ْ [SECURITY] 2026-01-14T07:38:12.414Z - USER_REGISTERED {
      userId: undefined,
      email: 'ahmed@example.com',
      ip: '::ffff:127.0.0.1'
    }

      at log (utils/security.js:83:11)

[0mGET /api/hr/attendance [33m404[0m 1.045 ms - 134[0m
[0mGET /api/users [32m200[0m 6.504 ms - 205[0m
[0mPOST /api/hr/attendance [33m400[0m 0.724 ms - 91[0m
[0mPOST /api/auth/register [32m201[0m 225.701 ms - 356[0m
[0mGET /api/hr/leaves [32m200[0m 1.368 ms - 76[0m
[0mPOST /api/hr/leaves [33m400[0m 0.952 ms - 65[0m
[0mGET /api/finance/budgets [33m404[0m 1.019 ms - 136[0m
[0mPOST /api/finance/expenses [32m201[0m 4.300 ms - 222[0m
[0mPOST /api/auth/register [33m400[0m 2.813 ms - 51[0m
[0mGET /api/finance/reports [33m404[0m 1.440 ms - 136[0m
[0mPOST /api/auth/register [33m400[0m 1.359 ms - 47[0m
[0mGET /api/notifications [32m200[0m 1.221 ms - 70[0m
[0mGET /api/notifications [33m401[0m 0.340 ms - 54[0m
[0mPOST /api/auth/register [33m429[0m 1.349 ms - 99[0m
[0mPOST /api/notifications [33m404[0m 1.395 ms - 135[0m
[0mPOST /api/auth/register [33m429[0m 1.313 ms - 99[0m
[0mGET /api/notifications/123 [33m404[0m 0.836 ms - 138[0m
[0mPUT /api/notifications/123/read [33m404[0m 0.597 ms - 143[0m
[0mPOST /api/auth/register [33m429[0m 0.505 ms - 99[0m
[0mGET /api/reports/hr [33m404[0m 0.672 ms - 131[0m
[0mPOST /api/auth/register [33m429[0m 0.389 ms - 99[0m
[0mGET /api/reports/finance [33m404[0m 0.678 ms - 136[0m
[0mPOST /api/auth/register [33m429[0m 0.931 ms - 99[0m
[0mGET /api/reports/attendance [33m404[0m 0.535 ms - 139[0m
[0mPOST /api/auth/register [33m429[0m 0.638 ms - 99[0m
[0mGET /api/reports/generate?type=hr&startDate=2024-01-01&endDate=2024-12-31 [33m404[0m 1.160 ms - 185[0m
[0mGET /api/ai/predictions [33m404[0m 1.009 ms - 135[0m
[0mPOST /api/auth/register [33m429[0m 0.867 ms - 99[0m
[0mPOST /api/ai/chat [33m404[0m 0.787 ms - 129[0m
[0mPOST /api/auth/register [33m429[0m 0.908 ms - 99[0m
[0mPOST /api/ai/chat [33m404[0m 1.079 ms - 129[0m
[0mGET /api/ai/analytics [33m404[0m 0.526 ms - 133[0m
[0mPOST /api/auth/register [33m429[0m 0.863 ms - 99[0m
[0mPOST /api/auth/register [33m429[0m 0.715 ms - 99[0m
[0mPOST /api/auth/register [33m429[0m 0.512 ms - 99[0m
[0mPOST /api/auth/register [33m429[0m 0.377 ms - 99[0m
[0mPOST /api/auth/register [33m429[0m 7.582 ms - 99[0m
  console.log
    ≡ا¤ْ [SECURITY] 2026-01-14T07:38:12.592Z - USER_REGISTERED {
      userId: undefined,
      email: 'test@example.com',
      ip: '::ffff:127.0.0.1'
    }

      at log (utils/security.js:83:11)

[0mPOST /api/auth/register [33m429[0m 0.366 ms - 99[0m
[0mPOST /api/auth/register [32m201[0m 180.106 ms - 351[0m
  console.error
    ظإî Login failed: User not found for email: logintest@example.com

    [0m [90m 111 |[39m     [36mconst[39m user [33m=[39m [36mawait[39m [33mUser[39m[33m.[39mfindOne({ email })[33m;[39m
     [90m 112 |[39m     [36mif[39m ([33m![39muser) {
    [31m[1m>[22m[39m[90m 113 |[39m       console[33m.[39merror([32m'ظإî Login failed: User not found for email:'[39m[33m,[39m email)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 114 |[39m       [36mreturn[39m res[33m.[39mstatus([35m401[39m)[33m.[39mjson({
     [90m 115 |[39m         success[33m:[39m [36mfalse[39m[33m,[39m
     [90m 116 |[39m         message[33m:[39m [32m'Invalid email or password'[39m[33m,[39m[0m

      at error (api/routes/auth.routes.js:113:15)

[0mPOST /api/auth/login [33m401[0m 11.602 ms - 55[0m
[0mPOST /api/auth/register [33m429[0m 0.725 ms - 99[0m
  console.error
    ظإî Login failed: User not found for email: logintest@example.com

    [0m [90m 111 |[39m     [36mconst[39m user [33m=[39m [36mawait[39m [33mUser[39m[33m.[39mfindOne({ email })[33m;[39m
     [90m 112 |[39m     [36mif[39m ([33m![39muser) {
    [31m[1m>[22m[39m[90m 113 |[39m       console[33m.[39merror([32m'ظإî Login failed: User not found for email:'[39m[33m,[39m email)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 114 |[39m       [36mreturn[39m res[33m.[39mstatus([35m401[39m)[33m.[39mjson({
     [90m 115 |[39m         success[33m:[39m [36mfalse[39m[33m,[39m
     [90m 116 |[39m         message[33m:[39m [32m'Invalid email or password'[39m[33m,[39m[0m

      at error (api/routes/auth.routes.js:113:15)

[0mPOST /api/auth/login [33m401[0m 13.148 ms - 55[0m
PASS __tests__/routes.test.js
  HR Routes
    GET /api/hr/employees
      ظêأ should return all employees for admin (82 ms)
      ظêأ should require authentication (54 ms)
    POST /api/hr/employees
      ظêأ should create new employee (49 ms)
    GET /api/hr/employees/:id
      ظêأ should get employee by ID (15 ms)
    PUT /api/hr/employees/:id
      ظêأ should update employee (28 ms)
    DELETE /api/hr/employees/:id
      ظêأ should delete employee (7 ms)
    GET /api/hr/attendance
      ظêأ should get attendance records (5 ms)
    POST /api/hr/attendance
      ظêأ should record attendance (6 ms)
    GET /api/hr/leaves
      ظêأ should get leaves (6 ms)
    POST /api/hr/leaves
      ظêأ should request leave (8 ms)
  Finance Routes
    GET /api/finance/budgets
      ظêأ should get budgets (6 ms)
    POST /api/finance/expenses
      ظêأ should record expense (12 ms)
    GET /api/finance/reports
      ظêأ should get financial reports (10 ms)
  Notifications Routes
    GET /api/notifications
      ظêأ should get user notifications (8 ms)
      ظêأ should require authentication (6 ms)
    POST /api/notifications
      ظêأ should send notification (7 ms)
    GET /api/notifications/:id
      ظêأ should get specific notification (5 ms)
    PUT /api/notifications/:id/read
      ظêأ should mark notification as read (5 ms)
  Reports Routes
    GET /api/reports/hr
      ظêأ should get HR reports (11 ms)
    GET /api/reports/finance
      ظêأ should get finance reports (5 ms)
    GET /api/reports/attendance
      ظêأ should get attendance reports (4 ms)
    GET /api/reports/generate
      ظêأ should generate report (10 ms)
  AI Routes
    GET /api/ai/predictions
      ظêأ should get AI predictions (5 ms)
    POST /api/ai/chat
      ظêأ should send chat message (6 ms)
      ظêأ should require message field (9 ms)
    GET /api/ai/analytics
      ظêأ should get analytics (4 ms)

[0mPOST /api/auth/register [33m429[0m 0.791 ms - 99[0m
  console.error
    ظإî Login failed: User not found for email: nonexistent@example.com

    [0m [90m 111 |[39m     [36mconst[39m user [33m=[39m [36mawait[39m [33mUser[39m[33m.[39mfindOne({ email })[33m;[39m
     [90m 112 |[39m     [36mif[39m ([33m![39muser) {
    [31m[1m>[22m[39m[90m 113 |[39m       console[33m.[39merror([32m'ظإî Login failed: User not found for email:'[39m[33m,[39m email)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 114 |[39m       [36mreturn[39m res[33m.[39mstatus([35m401[39m)[33m.[39mjson({
     [90m 115 |[39m         success[33m:[39m [36mfalse[39m[33m,[39m
     [90m 116 |[39m         message[33m:[39m [32m'Invalid email or password'[39m[33m,[39m[0m

      at error (api/routes/auth.routes.js:113:15)

[0mPOST /api/auth/login [33m401[0m 5.357 ms - 55[0m
[0mPOST /api/auth/register [33m429[0m 0.369 ms - 99[0m
[0mPOST /api/auth/login [33m400[0m 0.358 ms - 61[0m
[0mPOST /api/auth/register [33m429[0m 0.653 ms - 99[0m
[0mPOST /api/auth/login [33m400[0m 0.362 ms - 61[0m
[0mPOST /api/auth/register [33m429[0m 0.422 ms - 99[0m
[0mPOST /api/auth/login [33m429[0m 0.643 ms - 97[0m
[0mPOST /api/auth/register [33m429[0m 0.353 ms - 99[0m
[0mPOST /api/auth/register [33m429[0m 0.448 ms - 99[0m
[0mPOST /api/auth/logout [33m401[0m 1.105 ms - 54[0m
[0mPOST /api/auth/register [33m429[0m 0.401 ms - 99[0m
[0mPOST /api/auth/refresh [33m401[0m 1.015 ms - 55[0m
[0mPOST /api/auth/register [33m429[0m 0.335 ms - 99[0m
[0mPOST /api/auth/register [33m429[0m 0.345 ms - 99[0m
[0mPOST /api/auth/register [33m429[0m 0.387 ms - 99[0m
  console.log
    ≡ا¤ْ [SECURITY] 2026-01-14T07:38:12.816Z - USER_REGISTERED {
      userId: undefined,
      email: 'test@example.com',
      ip: '::ffff:127.0.0.1'
    }

      at log (utils/security.js:83:11)

[0mPOST /api/auth/register [32m201[0m 203.364 ms - 346[0m
[0mPOST /api/auth/change-password [33m401[0m 0.440 ms - 54[0m
[0mPOST /api/auth/register [33m429[0m 0.368 ms - 99[0m
[0mPOST /api/auth/register [33m429[0m 0.580 ms - 99[0m
[0mPOST /api/auth/register [33m429[0m 0.770 ms - 99[0m
[0mGET /api/users [32m200[0m 5.679 ms - 26[0m
[0mPOST /api/auth/register [33m429[0m 0.783 ms - 99[0m
[0mGET /api/users [32m200[0m 1.718 ms - 205[0m
[0mGET /api/users [32m200[0m 1.661 ms - 205[0m
[0mGET /api/users [32m200[0m 20.423 ms - 205[0m
[0mPOST /api/auth/register [33m429[0m 0.715 ms - 99[0m
[0mPOST /api/auth/register [33m429[0m 0.647 ms - 99[0m
[0mPOST /api/auth/register [33m429[0m 0.743 ms - 99[0m
[0mPOST /api/auth/register [33m429[0m 0.411 ms - 99[0m
[0mPOST /api/auth/register [33m429[0m 0.438 ms - 99[0m
[0mGET /api/users [32m200[0m 2.771 ms - 205[0m
[0mGET /api/health [33m404[0m 0.804 ms - 127[0m
[0mPOST /api/auth/register [33m429[0m 0.352 ms - 99[0m
PASS __tests__/auth.extended.test.js
  Authentication Routes - Extended Coverage
    POST /api/auth/register - Complete Coverage
      ظêأ should register successfully with valid data 
(306 ms)
      ظêأ should require fullName field (14 ms)
      ظêأ should require email field (11 ms)
      ظêأ should require password field (15 ms)
      ظêأ should reject invalid email format (11 ms)
      ظêأ should reject weak password (8 ms)
      ظêأ should prevent duplicate email registration 
(12 ms)
      ظêأ should hash password before storing (10 ms)
      ظêأ should return access token in response (15 ms)
      ظêأ should return user object without password (8 
ms)
      ظêأ should handle empty string inputs (9 ms)
      ظêأ should handle null values (8 ms)
      ظêأ should trim whitespace from inputs (8 ms)
      ظêأ should handle very long inputs (4 ms)
      ظêأ should accept unicode names (15 ms)
    POST /api/auth/login
      ظêأ should login with correct credentials (21 ms)
      ظêأ should reject incorrect password (26 ms)
      ظêأ should reject non-existent user (20 ms)
      ظêأ should require email field (8 ms)
      ظêأ should require password field (46 ms)
      ظêأ should not expose user password in response 
(8 ms)
    POST /api/auth/logout
      ظêأ should logout authenticated user (15 ms)
      ظêأ should reject logout without token (29 ms)
    POST /api/auth/refresh
      ظêأ should refresh valid token (7 ms)
      ظêأ should reject invalid refresh token (8 ms)
    POST /api/auth/change-password
      ظêأ should change password with correct old 
password (4 ms)
      ظêأ should reject change with incorrect old 
password (7 ms)
      ظêأ should require authentication (30 ms)
    Error Handling and Security
      ظêأ should handle server errors gracefully (12 ms)
      ظêأ should not expose internal server errors (34 
ms)
      ظêأ should log security events (9 ms)

[0mGET /api/users [33m401[0m 0.345 ms - 54[0m
[0mGET /api/users [33m401[0m 0.335 ms - 54[0m
[0mGET /api/users [33m401[0m 0.348 ms - 54[0m
[0mGET /api/users [33m403[0m 0.395 ms - 50[0m
[0mGET /api/users [32m200[0m 0.848 ms - 205[0m
[0mGET /api/users [32m200[0m 0.925 ms - 205[0m
[0mGET /api/users [32m200[0m 1.050 ms - 26[0m
  console.log
    ≡اôإ Auth routes using In-Memory User model

      at Object.log (api/routes/auth.routes.js:9:11)

[0mGET /api/users [32m200[0m 1.781 ms - 205[0m
[0mPOST /api/auth/register [33m429[0m 0.826 ms - 99[0m
[0mPUT /api/users/123 [33m404[0m 2.546 ms - 44[0m
[0mDELETE /api/users/123 [33m404[0m 0.885 ms - 44[0m
  console.log
    ≡اôإ Auth routes using In-Memory User model

      at Object.log (api/routes/auth.routes.js:9:11)

[0mPATCH /api/auth/register [33m404[0m 7.248 ms - 136[0m
PASS __tests__/integration.test.js
  System Routes and Integration Tests
    Health Check Endpoint
      ظêأ should return 200 for health check (104 ms)
      ظêأ should return server status (13 ms)
    Root Endpoint
      ظêأ should respond to GET / (11 ms)
      ظêأ should respond to GET /api (6 ms)
    Error Handling
      ظêأ should return 404 for non-existent routes (7 
ms)
      ظêأ should handle bad request gracefully (31 ms)
      ظêأ should reject oversized payloads (186 ms)
    CORS Configuration
      ظêأ should respond to OPTIONS requests (10 ms)
      ظêأ should include CORS headers (18 ms)
    Request/Response Handling
      ظêأ should handle JSON requests (186 ms)
      ظêأ should parse URL-encoded data (211 ms)
      ظêأ should handle empty request body (41 ms)
    Security Headers
      ظêأ should include security headers (15 ms)
      ظêأ should enforce HTTPS in production (2 ms)
    Concurrent Requests
      ظêأ should handle multiple simultaneous requests 
(41 ms)
      ظêأ should handle concurrent auth requests (21 ms)
    Content-Type Handling
      ظêأ should reject invalid Content-Type (6 ms)
      ظêأ should handle application/json (21 ms)
    Response Format
      ظêأ should return JSON responses (13 ms)
      ظêأ should include status code in response (10 ms)
      ظêأ should include success flag in error 
responses (6 ms)
    Authentication Edge Cases
      ظêأ should handle missing Authorization header 
(21 ms)
      ظêأ should handle malformed Authorization header 
(6 ms)
      ظêأ should handle empty Authorization header (6 
ms)
      ظêأ should reject invalid token format (4 ms)
    Request Timeout
      ظêأ should handle slow responses (7 ms)
    Database Connection States
      ظêأ should work with in-memory database (5 ms)
      ظêأ should handle empty database gracefully (31 
ms)
    Request Methods
      ظêأ should handle GET requests (11 ms)
      ظêأ should handle POST requests (9 ms)
      ظêأ should handle PUT requests (11 ms)
      ظêأ should handle DELETE requests (25 ms)
      ظêأ should handle unsupported methods (26 ms)

PASS __tests__/middleware.test.js
  Authentication Middleware
    authenticateToken
      ظêأ should pass valid token (109 ms)
      ظêأ should reject missing token (10 ms)
      ظêأ should reject invalid token (122 ms)
      ظêأ should reject expired token (238 ms)
      ظêأ should handle malformed authorization header
      ظêأ should set user object on request (136 ms)
    requireAdmin
      ظêأ should allow admin users
      ظêأ should deny non-admin users (2 ms)
      ظêأ should deny users without role
      ظêأ should handle null user
    Token extraction
      ظêأ should extract token from Bearer scheme (133 
ms)
      ظêأ should ignore whitespace in authorization 
header (1 ms)
      ظêأ should handle multiple spaces in Bearer 
scheme (126 ms)
    Error handling
      ظêأ should handle JWT verification errors 
gracefully (129 ms)
      ظêأ should set correct status for different error 
types (247 ms)

PASS __tests__/reports.routes.expanded.test.js
  Reports Routes
    GET /api/reports/employee-summary
      ظêأ should return employee summary with all 
statistics (57 ms)
      ظêأ should count total employees correctly (11 ms)
      ظêأ should group employees by department (7 ms)
      ظêأ should group employees by status (7 ms)
      ظêأ should categorize employees by salary range 
(46 ms)
      ظêأ should handle empty employee list (10 ms)
      ظêأ should handle missing salary data (6 ms)
      ظêأ should handle errors gracefully (8 ms)
    GET /api/reports/attendance-stats
      ظêأ should return attendance statistics (8 ms)
      ظêأ should filter attendance by date range (34 ms)
      ظêأ should filter attendance by department (10 ms)
      ظêأ should apply multiple filters together (9 ms)
      ظêأ should count attendance by status correctly 
(9 ms)
      ظêأ should calculate average attendance per day 
(7 ms)
      ظêأ should handle empty attendance data (16 ms)
      ظêأ should handle invalid date format (12 ms)
    GET /api/reports/leave-summary
      ظêأ should return leave summary statistics (7 ms)
      ظêأ should categorize leaves by status (13 ms)
      ظêأ should filter leaves by employee (10 ms)
      ظêأ should calculate total leave days (19 ms)
    GET /api/reports/performance
      ظêأ should return performance analytics (7 ms)
      ظêأ should handle performance calculation errors 
(3 ms)
    POST /api/reports/generate-excel
      ظêأ should generate Excel report (25 ms)
      ظêأ should handle Excel generation errors (13 ms)
    POST /api/reports/generate-pdf
      ظêأ should generate PDF report (32 ms)
    POST /api/reports/custom
      ظêأ should generate custom report with filters (6 
ms)
      ظêأ should accept date range filter (6 ms)
      ظêأ should return validation error for missing 
type (16 ms)
    GET /api/reports/department/:deptId
      ظêأ should return report for specific department 
(22 ms)
      ظêأ should handle invalid department ID (7 ms)
    POST /api/reports/schedule
      ظêأ should schedule a new report (39 ms)
      ظêأ should validate required fields (6 ms)
    GET /api/reports/templates
      ظêأ should list available report templates (6 ms)
    GET /api/reports/templates/:templateId
      ظêأ should get specific report template (10 ms)
    GET /api/reports/export
      ظêأ should export report in specified format (11 
ms)
      ظêأ should support multiple export formats (11 ms)
      ظêأ should handle invalid format gracefully (3 ms)
    Error Handling
      ظêأ should return 401 for unauthenticated requests
      ظêأ should handle server errors gracefully (21 ms)
      ظêأ should validate query parameters (6 ms)

  console.log
    Notification sent: workflow_created for workflow WF-1768376293648-44a6dljb4

      at log (api/routes/workflows.routes.js:516:11)

  console.log
    Notification sent: workflow_created for workflow WF-1768376293677-uob1a6bg6

      at log (api/routes/workflows.routes.js:516:11)

  console.log
    Notification sent: workflow_created for workflow WF-1768376293698-uqixgovbf

      at log (api/routes/workflows.routes.js:516:11)

  console.log
    Notification sent: workflow_created for workflow WF-1768376293743-w39u2o4ov

      at log (api/routes/workflows.routes.js:516:11)

  console.log
    Notification sent: stage_approve for workflow WF-1768376293743-w39u2o4ov

      at log (api/routes/workflows.routes.js:516:11)

  console.log
    ≡ا» Using in-memory database (development mode)

      at log (config/database.js:14:13)

  console.log
    ≡اôإ Data will be lost when server restarts

      at log (config/database.js:15:13)

  console.log
    ظأآي╕  To use MongoDB Atlas, set USE_MOCK_DB=false in .env

      at log (config/database.js:16:13)

  console.log
    ظ╣ي╕  Using in-memory database - seeding skipped

      at log (server.js:346:15)

  console.log
    Notification sent: workflow_created for workflow WF-1768376293781-ys3dz968x

      at log (api/routes/workflows.routes.js:516:11)

  console.log
    Notification sent: stage_reject for workflow WF-1768376293781-ys3dz968x

      at log (api/routes/workflows.routes.js:516:11)

(node:11844) [MONGOOSE] Warning: Duplicate schema index 
on {"email":1} found. This is often due to declaring an 
index using both "index: true" and "schema.index()". 
Please remove the duplicate index definition.
(node:11844) [MONGOOSE] Warning: Duplicate schema index 
on {"beneficiary_id":1} found. This is often due to 
declaring an index using both "index: true" and 
"schema.index()". Please remove the duplicate index 
definition.
(node:11844) [MONGOOSE] Warning: Duplicate schema index 
on {"beneficiary_id":1} found. This is often due to 
declaring an index using both "index: true" and 
"schema.index()". Please remove the duplicate index 
definition.
(node:11844) [MONGOOSE] Warning: Duplicate schema index 
on {"program_code":1} found. This is often due to 
declaring an index using both "index: true" and 
"schema.index()". Please remove the duplicate index 
definition.
  console.log
    Notification sent: workflow_created for workflow WF-1768376293795-e7axvpo04

      at log (api/routes/workflows.routes.js:516:11)

  console.log
    Notification sent: stage_revise for workflow WF-1768376293795-e7axvpo04

      at log (api/routes/workflows.routes.js:516:11)

  console.log
    Notification sent: workflow_created for workflow WF-1768376293804-mpmrlg16m

      at log (api/routes/workflows.routes.js:516:11)

  console.log
    Notification sent: workflow_created for workflow WF-1768376293811-z612fvlk3

      at log (api/routes/workflows.routes.js:516:11)

[0mPOST /api/ai-predictions/predict-performance [33m403[0m 25.704 ms - 50[0m
  console.log
    Notification sent: delegated for workflow WF-1768376293811-z612fvlk3

      at log (api/routes/workflows.routes.js:516:11)

[0mGET /api/ai-predictions/predict-churn/user123 [33m403[0m 0.875 ms - 50[0m
[0mGET /api/ai-predictions/predict-behavior/user123 [33m403[0m 0.656 ms - 50[0m
  console.log
    Notification sent: workflow_created for workflow WF-1768376293845-af6smyjrj

      at log (api/routes/workflows.routes.js:516:11)

[0mGET /api/ai-predictions/predict-trends/performance?timeframe=30 [33m403[0m 1.515 ms - 50[0m
PASS __tests__/validators.test.js
  Validators
    Auth Validators
      Login Validation
        ظêأ should validate correct login credentials 
(3 ms)
        ظêأ should reject invalid email (2 ms)
        ظêأ should reject short password (1 ms)
        ظêأ should reject missing email (1 ms)
        ظêأ should reject missing password (1 ms)
        ظêأ should allow various valid email formats (2 
ms)
      Register Validation
        ظêأ should validate correct registration data 
(1 ms)
        ظêأ should require minimum password length of 8
        ظêأ should require fullName (1 ms)
        ظêأ should accept special characters in 
password (1 ms)
        ظêأ should accept unicode names
    Employee Validators
      Create Employee Validation
        ظêأ should validate correct employee data
        ظêأ should require all mandatory fields
        ظêأ should reject negative salary
        ظêأ should accept zero salary
    Validator Schema Structure
      ظêأ should have auth validators defined
      ظêأ should use Joi schemas (1 ms)
      ظêأ should have arabic error messages
    Edge Cases
      ظêأ should handle whitespace in email (1 ms)
      ظêأ should handle very long email addresses (3 ms)
      ظêأ should handle very long names (1 ms)
      ظêأ should handle empty strings (1 ms)
      ظêأ should handle null values (1 ms)
      ظêأ should handle undefined values (13 ms)
    Validator Reusability
      ظêأ should validate multiple times without 
interference (3 ms)
      ظêأ should not mutate original data

  console.log
    Notification sent: workflow_created for workflow WF-1768376293873-0e5imlqit

      at log (api/routes/workflows.routes.js:516:11)

  console.log
    Notification sent: workflow_created for workflow WF-1768376293900-692q2t98g

      at log (api/routes/workflows.routes.js:516:11)

[0mGET /api/ai-predictions/predictions/user123 [33m403[0m 1.015 ms - 50[0m
[0mGET /api/ai-predictions/recommendations/user123 [33m403[0m 0.551 ms - 50[0m
PASS __tests__/ai.routes.expanded.test.js
  AI Routes
    GET /api/ai/predictions/attendance
      ظêأ should return attendance prediction for 
specific employee (86 ms)
      ظêأ should return predictions for all employees 
without employeeId (8 ms)
      ظêأ should handle invalid employee ID gracefully 
(39 ms)
      ظêأ should calculate risk levels correctly (9 ms)
      ظêأ should return prediction confidence score (7 
ms)
      ظêأ should handle database errors (5 ms)
    GET /api/ai/predictions/salary
      ظêأ should return salary budget prediction (8 ms)
      ظêأ should include confidence level (35 ms)
      ظêأ should return currency information (3 ms)
      ظêأ should handle missing employee data (5 ms)
    GET /api/ai/predictions/leaves
      ظêأ should return leave need predictions (8 ms)
      ظêأ should identify peak leave months (22 ms)
      ظêأ should include prediction confidence (7 ms)
      ظêأ should handle historical leave data (4 ms)
    GET /api/ai/analytics/trends
      ظêأ should return attendance trend analysis or 
404 if not implemented (39 ms)
      ظêأ should analyze performance trends or 404 (9 
ms)
      ظêأ should return leave patterns or 404 (3 ms)
      ظêأ should support time range filtering or 404 
(15 ms)
      ظêأ should filter by department or 404 (10 ms)
    GET /api/ai/performance/:employeeId
      ظêأ should return employee performance score or 
handle errors (3 ms)
      ظêأ should include performance grade or handle 
errors (3 ms)
      ظêأ should predict performance trend or handle 
errors (3 ms)
      ظêأ should handle invalid employee ID (2 ms)
    GET /api/ai/insights/employee/:employeeId
      ظêأ should return AI-generated employee insights 
or 404 (30 ms)
      ظêأ should include recommendations or 404 (3 ms)
      ظêأ should analyze behavior patterns or 404 (4 ms)
    GET /api/ai/insights/executive-summary
      ظêأ should return executive summary of all 
insights or 404 (5 ms)
      ظêأ should include critical alerts or 404 (3 ms)
    GET /api/ai/automation/suggestions
      ظêأ should suggest automation opportunities or 
404 if not implemented (5 ms)
      ظêأ should calculate time savings potential or 
404 (7 ms)
      ظêأ should filter by department or 404 (27 ms)
      ظêأ should prioritize suggestions by impact or 
404 (7 ms)
    POST /api/ai/automation/workflows
      ظêأ should create new automation workflow or 404 
(13 ms)
      ظêأ should validate workflow configuration (5 ms)
      ظêأ should handle duplicate workflow names (4 ms)
    POST /api/ai/chat
      ظêأ should respond to user query or 404 if not 
implemented (8 ms)
      ظêأ should maintain conversation context or 404 
(34 ms)
      ظêأ should handle empty messages or 404 (3 ms)
      ظêأ should validate message length or 404 (20 ms)
      ظêأ should support multiple languages or 404 (3 
ms)
    GET /api/ai/recommendations/:employeeId
      ظêأ should return personalized recommendations or 
404 if not implemented (4 ms)
      ظêأ should include recommendation reasons or 404 
(2 ms)
      ظêأ should filter recommendations by category or 
404 (3 ms)
    GET /api/ai/analytics/dashboard
      ظêأ should return comprehensive analytics 
dashboard or 404 if not implemented (3 ms)
      ظêأ should include key metrics or 404 (2 ms)
      ظêأ should support date range filtering or 404 (3 
ms)
    Error Handling
      ظêأ should handle authentication errors
      ظêأ should handle missing dependencies (37 ms)
      ظêأ should handle timeout scenarios (2 ms)
      ظêأ should validate query parameters (3 ms)
    Rate Limiting
      ظêأ should handle high request volume (11 ms)

  console.log
    Notification sent: workflow_created for workflow WF-1768376293934-igt1pb1m7

      at log (api/routes/workflows.routes.js:516:11)

  console.log
    ≡ا» Using in-memory database (development mode)

      at log (config/database.js:14:13)

  console.log
    ≡اôإ Data will be lost when server restarts

      at log (config/database.js:15:13)

  console.log
    ظأآي╕  To use MongoDB Atlas, set USE_MOCK_DB=false in .env

      at log (config/database.js:16:13)

  console.log
    ظ╣ي╕  Using in-memory database - seeding skipped

      at log (server.js:346:15)

(node:11344) [MONGOOSE] Warning: Duplicate schema index 
on {"email":1} found. This is often due to declaring an 
index using both "index: true" and "schema.index()". 
Please remove the duplicate index definition.
(node:11344) [MONGOOSE] Warning: Duplicate schema index 
on {"beneficiary_id":1} found. This is often due to 
declaring an index using both "index: true" and 
"schema.index()". Please remove the duplicate index 
definition.
(node:11344) [MONGOOSE] Warning: Duplicate schema index 
on {"beneficiary_id":1} found. This is often due to 
declaring an index using both "index: true" and 
"schema.index()". Please remove the duplicate index 
definition.
(node:11344) [MONGOOSE] Warning: Duplicate schema index 
on {"program_code":1} found. This is often due to 
declaring an index using both "index: true" and 
"schema.index()". Please remove the duplicate index 
definition.
PASS __tests__/hr.routes.expanded.test.js
  HR Routes
    GET /api/hr/
      ظêأ should return all employees with default 
pagination (23 ms)
      ظêأ should apply department filter (32 ms)
      ظêأ should apply status filter (3 ms)
      ظêأ should support search functionality (8 ms)
      ظêأ should apply pagination with limit and offset 
(4 ms)
      ظêأ should handle multiple filters together (3 ms)
      ظêأ should return empty list for no matches (3 ms)
      ظêأ should handle database errors (3 ms)
    GET /api/hr/:id
      ظêأ should return specific employee by ID (4 ms)
      ظêأ should return 404 for non-existent employee 
(3 ms)
      ظêأ should handle database errors (11 ms)
      ظêأ should return complete employee information 
(8 ms)
    GET /api/hr/analytics/summary
      ظêأ should return employee statistics (9 ms)
      ظêأ should calculate average salary (7 ms)
      ظêأ should group employees by department (6 ms)
      ظêأ should handle empty employee list (6 ms)
    POST /api/hr/
      ظêأ should create new employee (36 ms)
      ظêأ should validate required fields (4 ms)
      ظêأ should handle validation errors (2 ms)
      ظêأ should prevent duplicate emails (7 ms)
    PUT /api/hr/:id
      ظêأ should update employee information (7 ms)
      ظêأ should not update non-updatable fields (21 ms)
      ظêأ should handle 404 for non-existent employee 
(3 ms)
      ظêأ should validate updated fields (6 ms)
    DELETE /api/hr/:id
      ظêأ should delete employee (6 ms)
      ظêأ should handle 404 for non-existent employee 
(9 ms)
      ظêأ should soft-delete employee (mark as 
inactive) (2 ms)
    GET /api/hr/attendance/:employeeId
      ظêأ should return employee attendance records (39 
ms)
    GET /api/hr/leaves/:employeeId
      ظêأ should return employee leave history (6 ms)
    GET /api/hr/performance/:employeeId
      ظêأ should return employee performance data (6 ms)
    Authorization Checks
      ظêأ should require admin or hr role for employee 
list (1 ms)
      ظêأ should allow anyone to view their own profile
      ظêأ should restrict salary information by role
    Bulk Operations
      ظêأ should support bulk employee creation (7 ms)
      ظêأ should support bulk update operations (3 ms)
    Export/Import
      ظêأ should export employees to CSV (3 ms)
      ظêأ should export employees to Excel (3 ms)
      ظêأ should import employees from file (31 ms)
    Advanced Search
      ظêأ should search by multiple fields (7 ms)
      ظêأ should filter by salary range (7 ms)
      ظêأ should sort results by field (5 ms)
    Error Handling
      ظêأ should handle server errors gracefully (3 ms)
      ظêأ should log errors appropriately (5 ms)

[0mGET /health [32m200[0m 1.038 ms - 118[0m
  console.log
    Notification sent: workflow_created for workflow WF-1768376293999-muhf23oj4

      at log (api/routes/workflows.routes.js:516:11)

  console.log
    Notification sent: stage_approve for workflow WF-1768376293999-muhf23oj4

      at log (api/routes/workflows.routes.js:516:11)

  console.log
    Notification sent: stage_approve for workflow WF-1768376293999-muhf23oj4

      at log (api/routes/workflows.routes.js:516:11)

PASS __tests__/workflows.test.js
  Advanced Workflow System Tests
    GET /api/templates
      ظêأ should return all workflow templates (9 ms)
      ظêأ should return 401 without auth token (2 ms)
    POST /api/workflows
      ظêأ should create a new workflow successfully (27 
ms)
      ظêأ should return 404 for non-existent template 
(4 ms)
    GET /api/workflows
      ظêأ should get all workflows (3 ms)
      ظêأ should filter workflows by status (4 ms)
      ظêأ should filter workflows by priority (7 ms)
    GET /api/workflows/:id
      ظêأ should get workflow details by ID (5 ms)
      ظêأ should return 404 for non-existent workflow 
(10 ms)
    POST /api/workflows/:id/approve
      ظêأ should approve workflow stage successfully 
(21 ms)
      ظêأ should reject workflow stage (34 ms)
      ظêأ should request revision (8 ms)
      ظêأ should return 400 for invalid decision (8 ms)
    POST /api/workflows/:id/delegate
      ظêأ should delegate workflow successfully (24 ms)
    GET /api/analytics
      ظêأ should return workflow analytics (26 ms)
    GET /api/audit-log
      ظêأ should return audit log (7 ms)
      ظêأ should filter audit log by workflowId (7 ms)
      ظêأ should filter audit log by action (41 ms)
    Workflow Lifecycle Integration Test
      ظêأ should complete full workflow lifecycle (75 
ms)

PASS tests/ai-predictions.test.js
  AI Predictions Service
    AIPredictionsService
      ظêأ ╪ز┘ê┘é╪╣ ╪د┘╪ث╪»╪د╪ة ╪ذ┘╪ش╪د╪ص (3 ms)
      ظêأ ╪ز┘ê┘é╪╣ ╪د┘╪د┘╪│╪ص╪د╪ذ ╪ذ┘╪ش╪د╪ص (2 ms)
      ظêأ ╪ز┘ê┘é╪╣ ╪د┘╪│┘┘ê┘â ╪ذ┘╪ش╪د╪ص (1 ms)
      ظêأ ╪ز┘ê┘é╪╣ ╪د┘╪د╪ز╪ش╪د┘ç╪د╪ز ╪ذ┘╪ش╪د╪ص (1 ms)
    AI Predictions API Endpoints
      ظêأ POST /api/ai-predictions/predict-performance 
┘à╪╣ ╪ذ┘è╪د┘╪د╪ز ╪╡╪ص┘è╪ص╪ر (45 ms)
      ظêأ GET /api/ai-predictions/predict-churn/:userId 
┘à╪╣ userId ╪╡╪ص┘è╪ص (6 ms)
      ظêأ GET 
/api/ai-predictions/predict-behavior/:userId ┘à╪╣ 
userId ╪╡╪ص┘è╪ص (4 ms)
      ظêأ GET 
/api/ai-predictions/predict-trends/:category ┘à╪╣ 
category ╪╡╪ص┘è╪ص (9 ms)
      ظêأ GET /api/ai-predictions/predictions/:userId 
┘è╪╣┘è╪» ┘é╪د╪خ┘à╪ر ╪د┘╪ز┘╪ذ╪ج╪د╪ز (48 ms)
      ظêأ GET 
/api/ai-predictions/recommendations/:userId ┘è╪╣┘è╪» 
╪د┘╪ز┘ê╪╡┘è╪د╪ز (4 ms)
    AI Service Helper Functions
      ظêأ ╪ص╪│╪د╪ذ ╪د┘┘à╪ز┘ê╪│╪╖ ╪د┘╪ص╪│╪د╪ذ┘è 
╪ذ╪┤┘â┘ ╪╡╪ص┘è╪ص (1 ms)
      ظêأ ╪ص╪│╪د╪ذ ╪د┘╪د┘╪ص╪▒╪د┘ ╪د┘┘à╪╣┘è╪د╪▒┘è
      ظêأ ╪ص╪│╪د╪ذ ╪»╪▒╪ش╪ر ╪د┘╪ز┘╪د╪╣┘
      ظêأ ╪ص╪│╪د╪ذ ╪د╪ص╪ز┘à╪د┘┘è╪ر ╪د┘╪د┘╪│╪ص╪د╪ذ
      ظêأ ╪د╪│╪ز╪«┘╪د╪╡ ╪د┘╪╣┘ê╪د┘à┘ ╪د┘┘à╪ج╪س╪▒╪ر 
╪ذ┘╪ش╪د╪ص
      ظêأ ╪ز┘ê┘┘è╪» ╪د┘╪ز┘ê╪╡┘è╪د╪ز ╪ذ┘╪د╪ة┘ï ╪╣┘┘ë 
╪»╪▒╪ش╪ر ╪د┘╪ز┘╪ذ╪ج (1 ms)
    Error Handling
      ظêأ ╪د┘╪ز╪╣╪د┘à┘ ┘à╪╣ ╪د┘╪ذ┘è╪د┘╪د╪ز 
╪د┘┘╪د╪▒╪║╪ر
      ظêأ ╪د┘╪ز╪╣╪د┘à┘ ┘à╪╣ userId ╪║┘è╪▒ ┘à┘ê╪ش┘ê╪»

PASS __tests__/models.test.js
  Memory Models - Employee, Attendance, Leave, Finance
    Employee Model
      ظêأ should create new employee (2 ms)
      ظêأ should find all employees (3 ms)
      ظêأ should find employee by ID (2 ms)
      ظêأ should update employee (3 ms)
      ظêأ should delete employee (3 ms)
      ظêأ should not find deleted employee (1 ms)
      ظêأ should handle non-existent employee update (1 
ms)
      ظêأ should handle non-existent employee delete (1 
ms)
    Attendance Model
      ظêأ should record attendance (5 ms)
      ظêأ should find attendance by employee (20 ms)
      ظêأ should find attendance by ID (2 ms)
      ظêأ should record checkout time (2 ms)
    Leave Model
      ظêأ should create leave request (2 ms)
      ظêأ should find leaves by employee (3 ms)
      ظêأ should find pending leaves (5 ms)
      ظêأ should approve leave request (6 ms)
      ظêأ should reject leave request (4 ms)
      ظêأ should support multiple leave types (4 ms)
    Model Operations - Edge Cases
      ظêأ should handle empty results (2 ms)
      ظêأ should handle bulk creates (43 ms)
      ظêأ should maintain data integrity (4 ms)
      ظêأ should handle concurrent operations (4 ms)
    Data Validation
      ظêأ should store all required fields (3 ms)
      ظêأ should handle date fields correctly (2 ms)
      ظêأ should assign unique IDs (19 ms)

PASS __tests__/errorHandler.test.js
  Error Handler
    AppError Class
      ظêأ should create AppError with message and 
statusCode
      ظêأ should create AppError with code
      ظêأ should have timestamp in ISO format
      ظêأ should inherit from Error
      ظêأ should have proper error stack (10 ms)
    Global Error Handler Middleware
      ظêأ should handle AppError (2 ms)
      ظêأ should handle generic errors with default 
status 500
      ظêأ should handle validation errors
      ظêأ should handle duplicate key errors (1 ms)
      ظêأ should handle cast errors
      ظêأ should include timestamp in error response
      ظêأ should preserve success: false in all 
responses (1 ms)
    Error Response Structure
      ظêأ should have consistent error response 
structure
      ظêأ should include code in AppError responses (1 
ms)
      ظêأ should include errors array for validation 
errors
    Async Handler Wrapper
      ظêأ should execute async function successfully
      ظêأ should pass arguments to wrapped function (1 
ms)
      ظêأ should catch errors and pass to next
    Error Handling Edge Cases
      ظêأ should handle error without message
      ظêأ should handle error with null statusCode
      ظêأ should handle multiple validation errors (1 
ms)
      ظêأ should handle JSON parsing errors

PASS __tests__/database.test.js
  In-Memory Database Configuration
    Database Read/Write
      ظêأ should write data to database (3 ms)
      ظêأ should read data from database (2 ms)
      ظêأ should preserve all collections (3 ms)
    Collections Management
      ظêأ should handle users collection (4 ms)
      ظêأ should handle employees collection (4 ms)
      ظêأ should handle attendances collection (3 ms)
      ظêأ should handle leaves collection (2 ms)
    Data Persistence
      ظêأ should maintain data between operations (2 ms)
      ظêأ should overwrite data on write (2 ms)
    Edge Cases
      ظêأ should handle empty database (1 ms)
      ظêأ should handle null values in collections (1 
ms)
      ظêأ should handle undefined values in collections 
(3 ms)
      ظêأ should handle large datasets (26 ms)
      ظêأ should handle complex nested objects (2 ms)
    Data Integrity
      ظêأ should not modify returned data references (1 
ms)
      ظêأ should handle concurrent reads (2 ms)
      ظêأ should handle mixed operations (1 ms)
    Data Structure Consistency
      ظêأ should maintain required collections (1 ms)
      ظêأ should handle objects with additional 
properties (1 ms)
    Database API
      ظêأ should export read function (1 ms)
      ظêأ should export write function (1 ms)
      ظêأ should return object from read (2 ms)

PASS tests/health.test.js
  GET /health
    ظêأ should return OK status (16 ms)

PASS __tests__/models.simple.test.js
  Memory Models - Simplified Tests
    Employee Model
      ظêأ should create new employee (2 ms)
      ظêأ should find all employees (3 ms)
      ظêأ should find employee by ID (2 ms)
      ظêأ should update employee (4 ms)
      ظêأ should delete employee (4 ms)
    Attendance Model
      ظêأ should create attendance record (1 ms)
      ظêأ should find attendance records (2 ms)
    Leave Model
      ظêأ should create leave request (2 ms)
      ظêأ should find pending leaves (27 ms)
      ظêأ should update leave status (4 ms)

PASS __tests__/models.extended.test.js
  User Model Extended Tests
    ظêأ should create user with all fields (3 ms)
    ظêأ should find user by email
    ظêأ should authenticate user with correct password
    ظêأ should reject authentication with wrong 
password (16 ms)
    ظêأ should update user profile (1 ms)
    ظêأ should delete user (1 ms)
  Employee Model Extended Tests
    ظêأ should create employee with full information (1 
ms)
    ظêأ should find all employees with pagination (1 ms)
    ظêأ should find employees by department
    ظêأ should get total employee count (1 ms)
    ظêأ should update employee information (1 ms)
    ظêأ should delete employee
    ظêأ should handle bulk employee operations (1 ms)
  Attendance Model Extended Tests
    ظêأ should create attendance record
    ظêأ should find attendance by employee
    ظêأ should get monthly attendance statistics
    ظêأ should update attendance record (1 ms)
    ظêأ should delete attendance record (1 ms)
    ظêأ should handle bulk attendance records
  Leave Model Extended Tests
    ظêأ should create leave request
    ظêأ should find leave requests by employee (16 ms)
    ظêأ should approve leave request
    ظêأ should reject leave request
    ظêأ should calculate leave days
    ظêأ should handle overlapping leave requests (1 ms)
  Finance Model Extended Tests
    ظêأ should create expense record
    ظêأ should find expenses by employee (1 ms)
    ظêأ should create budget
    ظêأ should calculate budget utilization
    ظêأ should update budget
  AI Predictions Model Tests
    ظêأ should store attendance prediction (1 ms)
    ظêأ should store salary prediction
    ظêأ should store leave trend analysis
  Notification Model Tests
    ظêأ should create notification
    ظêأ should mark notification as read (1 ms)
    ظêأ should get unread notification count
  Data Integrity Tests
    ظêأ should maintain referential integrity for 
employee-attendance relationship
    ظêأ should handle null/undefined values gracefully
    ظêأ should validate data types (16 ms)
  Performance Tests
    ظêأ should handle large datasets efficiently (2 ms)
    ظêأ should cache frequently accessed data

PASS api/tests/externalIntegration.test.js
  ExternalIntegrationService Tests
    Slack Integration
      ظêأ should configure Slack connection (2 ms)
      ظêأ should validate Slack webhook URL (1 ms)
      ظêأ should send Slack message
      ظêأ should handle Slack message formatting
      ظêأ should support Slack threads
      ظêأ should handle Slack rate limiting
      ظêأ should handle Slack connection errors (1 ms)
    Email Integration
      ظêأ should configure email service (2 ms)
      ظêأ should validate email address
      ظêأ should send single email (1 ms)
      ظêأ should send bulk emails
      ظêأ should handle email attachments
      ظêأ should support email templates
      ظêأ should retry failed emails (1 ms)
      ظêأ should handle email encoding
      ظêأ should track email delivery (1 ms)
    Webhook Management
      ظêأ should register webhook
      ظêأ should list registered webhooks
      ظêأ should trigger webhook
      ظêأ should retry failed webhook deliveries
      ظêأ should delete webhook (1 ms)
      ظêأ should validate webhook signature
      ظêأ should filter webhook events
      ظêأ should get webhook delivery history (1 ms)
    Connection Status & Monitoring
      ظêأ should check Slack connection
      ظêأ should check email connection
      ظêأ should get overall integration status
      ظêأ should monitor connection health
    Event Logging
      ظêأ should log integration events (1 ms)
      ظêأ should filter logs by type
      ظêأ should get logs with pagination
      ظêأ should clear old logs (1 ms)
      ظêأ should export logs (1 ms)
    Error Handling
      ظêأ should handle invalid configuration (1 ms)
      ظêأ should handle connection timeouts
      ظêأ should handle rate limits (1 ms)
      ظêأ should handle authentication errors
    Performance
      ظêأ should handle bulk email efficiently (1 ms)
      ظêأ should cache webhook configurations

PASS __tests__/security-compliance.test.js
  Security & Compliance Tests
    Data Protection - Encryption
      ظêأ should encrypt sensitive data (AES-256) (21 
ms)
      ظêأ should decrypt encrypted data correctly
      ظêأ should use different IV for each encryption 
(1 ms)
    Authentication & Authorization
      ظêأ should validate JWT tokens (26 ms)
      ظêأ should reject expired tokens
      ظêأ should enforce role-based access control (1 
ms)
      ظêأ should validate user permissions for 
sensitive operations
    Input Validation & Sanitization
      ظêأ should validate National ID format (10 
digits) (1 ms)
      ظêأ should validate violation codes format (2 ms)
      ظêأ should prevent SQL Injection (1 ms)
      ظêأ should prevent XSS attacks (1 ms)
      ظêأ should validate email format (1 ms)
      ظêأ should limit input length for text fields (1 
ms)
    OWASP Top 10 Prevention
      ظêأ A1: Injection - SQL parameterized queries (1 
ms)
      ظêأ A2: Broken Authentication - Password hashing 
(14 ms)
      ظêأ A3: Sensitive Data Exposure - HTTPS/TLS
      ظêأ A4: XML External Entity (XXE) Prevention
      ظêأ A5: Broken Access Control - Authorization 
checks (1 ms)
      ظêأ A6: Security Misconfiguration - Secure headers
      ظêأ A7: Cross-Site Scripting (XSS) Prevention
      ظêأ A8: Insecure Deserialization
      ظêأ A9: Using Components with Known 
Vulnerabilities (15 ms)
      ظêأ A10: Insufficient Logging & Monitoring
    Audit Logging
      ظêأ should log all data access (1 ms)
      ظêأ should log data modifications (1 ms)
      ظêأ should log failed access attempts
      ظêأ should include IP address in audit logs (9 ms)
    GDPR Compliance
      ظêأ should track user consent (1 ms)
      ظêأ should support data access requests (1 ms)
      ظêأ should support data deletion (1 ms)
      ظêأ should maintain data retention policy
      ظêأ should log data export requests (1 ms)
    Rate Limiting & DoS Prevention
      ظêأ should enforce rate limits on API endpoints 
(1 ms)
      ظêأ should implement exponential backoff (1 ms)
      ظêأ should block repeated failed login attempts 
(1 ms)
    Secure Configuration
      ظêأ should use environment variables for secrets 
(1 ms)
      ظêأ should not expose sensitive data in logs (1 
ms)
      ظêأ should implement CORS properly

(node:19088) [MONGOOSE] Warning: Duplicate schema index 
on {"registrationNumber":1} found. This is often due to 
declaring an index using both "index: true" and 
"schema.index()". Please remove the duplicate index 
definition.
(node:19088) [MONGOOSE] Warning: Duplicate schema index 
on {"plateNumber":1} found. This is often due to 
declaring an index using both "index: true" and 
"schema.index()". Please remove the duplicate index 
definition.
(node:19088) [MONGOOSE] Warning: Duplicate schema index 
on {"assignedDriver":1} found. This is often due to 
declaring an index using both "index: true" and 
"schema.index()". Please remove the duplicate index 
definition.
(node:19088) [MONGOOSE] Warning: Duplicate schema index 
on {"personalInfo.nationalId":1} found. This is often 
due to declaring an index using both "index: true" and 
"schema.index()". Please remove the duplicate index 
definition.
(node:19088) [MONGOOSE] Warning: Duplicate schema index 
on {"license.licenseNumber":1} found. This is often due 
to declaring an index using both "index: true" and 
"schema.index()". Please remove the duplicate index 
definition.
PASS __tests__/saudiComplianceService.test.js
  SaudiComplianceService
    Violation Codes Database
      ظêأ should have 20 violation codes (1 ms)
      ظêأ should have required fields for each 
violation code (8 ms)
      ظêأ violation codes should have valid fines (2 ms)
      ظêأ violation codes should have valid demerit 
points (1 ms)
    recordSaudiViolation
      ظêأ should record a valid violation
      ظêأ should reject invalid violation code
    calculateViolationSeverity
      ظêأ should return "╪ذ╪│┘è╪╖╪ر (╪║╪▒╪د┘à╪ر 
┘┘é╪╖)" for 0 points (1 ms)
      ظêأ should return "┘à╪ز┘ê╪│╪╖╪ر (1-3 ┘┘é╪د╪╖)" 
for 1-3 points
      ظêأ should return "╪«╪╖┘è╪▒╪ر (4-6 ┘┘é╪د╪╖)" for 
4-6 points
      ظêأ should return "╪┤╪»┘è╪»╪ر (7+ ┘┘é╪د╪╖)" for 
7+ points
    checkRegistrationValidity
      ظêأ should return valid for non-expired 
registration
      ظêأ should return invalid for expired 
registration (1 ms)
      ظêأ should return warning for registration 
expiring soon
    checkInsuranceValidity
      ظêأ should validate Saudi insurance providers
      ظêأ should check insurance policy types
    getInspectionSchedule
      ظêأ should return schedule for private vehicles 
(1 ms)
      ظêأ should return schedule for commercial vehicles
      ظêأ should return schedule for buses
    validateVehicleData
      ظêأ should validate correct vehicle data
      ظêأ should detect missing national ID
      ظêأ should validate national ID format (10 
digits) (1 ms)
      ظêأ should calculate data completeness percentage 
(1 ms)
    calculateDaysRemaining
      ظêأ should calculate positive days for future 
date (3 ms)
      ظêأ should calculate negative days for past date
      ظêأ should return 0 for today
    Error Handling
      ظêأ should handle null vehicle gracefully
      ظêأ should handle missing dates (1 ms)
      ظêأ should handle invalid date formats
    Compliance Score Calculation
      ظêأ should calculate 100% score for compliant 
vehicle
      ظêأ should reduce score for violations

PASS __tests__/logger.test.js
  Logger Utility
    Logger Methods
      ظêأ should have log method (1 ms)
      ظêأ should log messages
      ظêأ should log errors (1 ms)
      ظêأ should log warnings
      ظêأ should log info
    Logger with Timestamps
      ظêأ should include timestamps in logs
    Logger with Levels
      ظêأ should support different log levels (1 ms)
    Logger with Context
      ظêأ should handle objects in logs (14 ms)
      ظêأ should handle arrays in logs
    Logger Edge Cases
      ظêأ should handle empty messages
      ظêأ should handle null messages (1 ms)
      ظêأ should handle undefined messages
      ظêأ should handle long messages (1 ms)
      ظêأ should handle special characters
    Logger Performance
      ظêأ should handle rapid sequential logs
    Logger Formatting
      ظêأ should format log messages
      ظêأ should include log level in output (1 ms)
    Logger Initialization
      ظêأ should initialize without errors (1 ms)
      ظêأ should be configurable

PASS __tests__/rateLimiter.test.js
  Rate Limiting Middleware
    API Limiter Configuration
      ظêأ should have correct window size (43 ms)
      ظêأ should enforce maximum requests per window 
(21 ms)
      ظêأ should return proper error message (1 ms)
    Auth Limiter Configuration
      ظêأ should have strict rate limit for auth
      ظêأ should skip successful requests when 
configured
      ظêأ should provide auth-specific message (1 ms)
    Password Limiter Configuration
      ظêأ should have very strict rate limit (1 ms)
      ظêأ should use 1 hour window for password 
operations
      ظêأ should limit password attempts severely (1 ms)
    Create Account Limiter Configuration
      ظêأ should limit account creation (1 ms)
      ظêأ should use 1 hour window (1 ms)
      ظêأ should allow 3 account creations per hour (2 
ms)
    Rate Limiter Behavior
      ظêأ should call next when under limit (1 ms)
      ظêأ should include rate limit headers (2 ms)
      ظêأ should not use legacy headers when configured 
(1 ms)
    Rate Limit Configuration Structure
      ظêأ should have consistent structure for all 
limiters (2 ms)
      ظêأ should have proper message format (1 ms)
    Rate Limit Edge Cases
      ظêأ should handle IP spoofing detection
      ظêأ should handle multiple requests from same IP 
(1 ms)
      ظêأ should handle requests from different IPs
    Rate Limit Window Sizes
      ظêأ should use 15 minutes for general API (11 ms)
      ظêأ should use 1 hour for sensitive operations
      ظêأ should properly calculate milliseconds (1 ms)
    Rate Limit Max Requests
      ظêأ should allow 100 general API requests
      ظêأ should limit auth to 5 attempts (1 ms)
      ظêأ should limit password to 3 attempts
      ظêأ should limit account creation to 3 per hour
    Test Environment Configuration
      ظêأ should skip rate limiting in test mode (1 ms)
      ظêأ should apply rate limiting in production

PASS __tests__/validation.test.js
  Validation Middleware
    Password Validation
      ظêأ should accept valid password (1 ms)
      ظêأ should reject password shorter than minimum 
(1 ms)
      ظêأ should reject password without uppercase 
letter (1 ms)
      ظêأ should reject password without lowercase 
letter
      ظêأ should reject password without number (1 ms)
      ظêأ should reject password without special 
character
      ظêأ should accept various special characters (3 
ms)
      ظêأ should reject null password (1 ms)
      ظêأ should reject undefined password (1 ms)
      ظêأ should reject non-string password
      ظêأ should reject empty string password
      ظêأ should reject password exceeding maximum 
length (1 ms)
    Email Validation
      ظêأ should accept valid email (3 ms)
      ظêأ should reject invalid email format (1 ms)
      ظêأ should accept emails with subdomains (1 ms)
      ظêأ should accept emails with special characters 
(1 ms)
      ظêأ should reject email without domain
      ظêأ should reject email without local part (1 ms)
      ظêأ should reject null email
      ظêأ should reject undefined email (1 ms)
      ظêأ should handle email normalization (2 ms)
    Registration Validation
      ظêأ should pass validation middleware for valid 
data (9 ms)
      ظêأ should reject invalid email in registration
      ظêأ should reject weak password in registration 
(1 ms)
      ظêأ should require all registration fields
    Profile Update Validation
      ظêأ should accept valid profile update (1 ms)
      ظêأ should reject invalid email in profile update 
(1 ms)
    Password Change Validation
      ظêأ should validate old and new password (1 ms)
      ظêأ should require password confirmation (3 ms)
      ظêأ should reject mismatched passwords (1 ms)
    Validation Edge Cases
      ظêأ should handle null request body
      ظêأ should handle undefined request body (1 ms)
      ظêأ should handle extra fields in request body (1 
ms)
    Password Policy
      ظêأ should enforce minimum length of 8 characters
      ظêأ should enforce maximum length
      ظêأ should require all policy components

  console.log
    ≡ا¤ْ [SECURITY] 2026-01-14T07:38:14.555Z - LOGIN_ATTEMPT { userId: 'user-1', ip: '192.168.1.1' }

      at log (utils/security.js:83:11)

  console.log
    ≡ا¤ْ [SECURITY] 2026-01-14T07:38:14.559Z - ACCESS_DENIED { userId: 'user-1' }

      at log (utils/security.js:83:11)

  console.log
    ≡ا¤ْ [SECURITY] 2026-01-14T07:38:14.563Z - SYSTEM_START {}

      at log (utils/security.js:83:11)

PASS __tests__/employee.test.js
  Employee Model
    create
      ظêأ should create a new employee (3 ms)
    findById
      ظêأ should find employee by id (2 ms)
      ظêأ should return null if not found (2 ms)
    findAll
      ظêأ should find all employees (4 ms)
      ظêأ should filter by department (3 ms)
    updateById
      ظêأ should update employee (2 ms)
    deleteById
      ظêأ should delete employee (6 ms)
    getTotalCount
      ظêأ should get total count by status (4 ms)

  console.log
    ≡ا¤ْ [SECURITY] 2026-01-14T07:38:14.565Z - SYSTEM_STOP {}

      at log (utils/security.js:83:11)

  console.log
    ≡ا¤ْ [SECURITY] 2026-01-14T07:38:14.567Z - LOGIN_ATTEMPT { test: true }

      at log (utils/security.js:83:11)
          at Array.forEach (<anonymous>)

  console.log
    ≡ا¤ْ [SECURITY] 2026-01-14T07:38:14.569Z - LOGIN_SUCCESS { test: true }

      at log (utils/security.js:83:11)
          at Array.forEach (<anonymous>)

  console.log
    ≡ا¤ْ [SECURITY] 2026-01-14T07:38:14.571Z - LOGIN_FAILED { test: true }

      at log (utils/security.js:83:11)
          at Array.forEach (<anonymous>)

  console.log
    ≡ا¤ْ [SECURITY] 2026-01-14T07:38:14.574Z - ACCESS_DENIED { test: true }

      at log (utils/security.js:83:11)
          at Array.forEach (<anonymous>)

  console.log
    ≡ا¤ْ [SECURITY] 2026-01-14T07:38:14.575Z - REGISTRATION_ATTEMPT { test: true }

      at log (utils/security.js:83:11)
          at Array.forEach (<anonymous>)

  console.log
    ≡ا¤ْ [SECURITY] 2026-01-14T07:38:14.577Z - USER_REGISTERED { test: true }

      at log (utils/security.js:83:11)
          at Array.forEach (<anonymous>)

  console.log
    ≡ا¤ْ [SECURITY] 2026-01-14T07:38:14.578Z - PASSWORD_CHANGED { test: true }

      at log (utils/security.js:83:11)
          at Array.forEach (<anonymous>)

  console.log
    ≡ا¤ْ [SECURITY] 2026-01-14T07:38:14.579Z - UNAUTHORIZED_ACCESS { test: true }

      at log (utils/security.js:83:11)
          at Array.forEach (<anonymous>)

  console.log
    ≡ا¤ْ [SECURITY] 2026-01-14T07:38:14.582Z - SYSTEM_START { test: true }

      at log (utils/security.js:83:11)
          at Array.forEach (<anonymous>)

  console.log
    ≡ا¤ْ [SECURITY] 2026-01-14T07:38:14.583Z - SYSTEM_STOP { test: true }

      at log (utils/security.js:83:11)
          at Array.forEach (<anonymous>)

  console.log
    ≡ا¤ْ [SECURITY] 2026-01-14T07:38:14.584Z - PROFILE_UPDATED {
      userId: 'user-123',
      email: 'test@example.com',
      ip: '192.168.1.1',
      action: 'UPDATE_PROFILE',
      status: 'SUCCESS',
      timestamp: '2026-01-14T07:38:14.584Z'
    }

      at log (utils/security.js:83:11)

  console.log
    ≡ا¤ْ [SECURITY] 2026-01-14T07:38:14.585Z - USER_ACCESS_DENIED_HIGH_RISK { reason: 'Suspicious activity' }

      at log (utils/security.js:83:11)

  console.log
    ≡ا¤ْ [SECURITY] 2026-01-14T07:38:14.588Z - COMPLEX_EVENT {
      user: { id: 'user-1', email: 'test@example.com' },
      request: { method: 'POST', path: '/api/users' }
    }

      at log (utils/security.js:83:11)

  console.log
    ≡ا¤ْ [SECURITY] 2026-01-14T07:38:14.594Z - LOGIN { userId: 'user-1' }

      at log (utils/security.js:83:11)
          at Array.forEach (<anonymous>)

  console.log
    ≡ا¤ْ [SECURITY] 2026-01-14T07:38:14.595Z - LOGOUT { userId: 'user-1' }

      at log (utils/security.js:83:11)
          at Array.forEach (<anonymous>)

  console.log
    ≡ا¤ْ [SECURITY] 2026-01-14T07:38:14.596Z - ERROR { message: 'Test error' }

      at log (utils/security.js:83:11)
          at Array.forEach (<anonymous>)

  console.log
    ≡ا¤ْ [SECURITY] 2026-01-14T07:38:14.598Z - EVENT_0 { sequence: 0 }

      at log (utils/security.js:83:11)

  console.log
    ≡ا¤ْ [SECURITY] 2026-01-14T07:38:14.599Z - EVENT_1 { sequence: 1 }

      at log (utils/security.js:83:11)

  console.log
    ≡ا¤ْ [SECURITY] 2026-01-14T07:38:14.599Z - EVENT_2 { sequence: 2 }

      at log (utils/security.js:83:11)

  console.log
    ≡ا¤ْ [SECURITY] 2026-01-14T07:38:14.600Z - EVENT_3 { sequence: 3 }

      at log (utils/security.js:83:11)

  console.log
    ≡ا¤ْ [SECURITY] 2026-01-14T07:38:14.601Z - EVENT_4 { sequence: 4 }

      at log (utils/security.js:83:11)

PASS __tests__/security.test.js
  Security Utils
    getClientIP
      ظêأ should return x-forwarded-for header if 
present (5 ms)
      ظêأ should return x-real-ip header if 
x-forwarded-for not present
      ظêأ should return req.ip if headers not present
      ظêأ should return connection remote address as 
fallback (2 ms)
      ظêأ should handle empty string headers
      ظêأ should handle multiple forwarded IPs and 
return first (1 ms)
      ظêأ should handle IPv6 addresses
      ظêأ should handle undefined connection object (1 
ms)
    logSecurityEvent
      ظêأ should log security event with event name (4 
ms)
      ظêأ should include timestamp in ISO format (4 ms)
      ظêأ should handle empty details object (2 ms)
      ظêأ should handle undefined details (2 ms)
      ظêأ should support multiple event types (17 ms)
      ظêأ should include detailed information in logs 
(1 ms)
      ظêأ should handle special characters in event 
names (3 ms)
      ظêأ should handle nested details objects (6 ms)
    Security Event Logging - Integration
      ظêأ should log events with consistent structure 
(4 ms)
      ظêأ should handle rapid successive events (4 ms)
    IP Detection Edge Cases
      ظêأ should handle all null/undefined values 
gracefully
      ظêأ should handle localhost addresses
      ظêأ should preserve IP format (1 ms)

  console.log
    ≡اôإ Auth routes using In-Memory User model

      at Object.log (api/routes/auth.routes.js:9:11)

  console.log
    ≡ا» Using in-memory database (development mode)

      at log (config/database.js:14:13)

  console.log
    ≡اôإ Data will be lost when server restarts

      at log (config/database.js:15:13)

  console.log
    ظأآي╕  To use MongoDB Atlas, set USE_MOCK_DB=false in .env

      at log (config/database.js:16:13)

  console.log
    ظ╣ي╕  Using in-memory database - seeding skipped

      at log (server.js:346:15)

(node:25296) [MONGOOSE] Warning: Duplicate schema index 
on {"email":1} found. This is often due to declaring an 
index using both "index: true" and "schema.index()". 
Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the 
warning was created)
(node:25296) [MONGOOSE] Warning: Duplicate schema index 
on {"beneficiary_id":1} found. This is often due to 
declaring an index using both "index: true" and 
"schema.index()". Please remove the duplicate index 
definition.
(node:25296) [MONGOOSE] Warning: Duplicate schema index 
on {"beneficiary_id":1} found. This is often due to 
declaring an index using both "index: true" and 
"schema.index()". Please remove the duplicate index 
definition.
(node:25296) [MONGOOSE] Warning: Duplicate schema index 
on {"program_code":1} found. This is often due to 
declaring an index using both "index: true" and 
"schema.index()". Please remove the duplicate index 
definition.
  console.error
    ظإî Login failed: User not found for email: admin@alawael.com

    [0m [90m 111 |[39m     [36mconst[39m user [33m=[39m [36mawait[39m [33mUser[39m[33m.[39mfindOne({ email })[33m;[39m
     [90m 112 |[39m     [36mif[39m ([33m![39muser) {
    [31m[1m>[22m[39m[90m 113 |[39m       console[33m.[39merror([32m'ظإî Login failed: User not found for email:'[39m[33m,[39m email)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 114 |[39m       [36mreturn[39m res[33m.[39mstatus([35m401[39m)[33m.[39mjson({
     [90m 115 |[39m         success[33m:[39m [36mfalse[39m[33m,[39m
     [90m 116 |[39m         message[33m:[39m [32m'Invalid email or password'[39m[33m,[39m[0m

      at error (api/routes/auth.routes.js:113:15)

[0mPOST /api/auth/login [33m401[0m 17.011 ms - 55[0m
PASS tests/users.test.js
  GET /api/users
    ظêأ should handle users list request (gracefully 
fail without auth in test mode) (62 ms)

----------------------------------|---------|----------|---------|---------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
File                              | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                                                                                                                                                                      
----------------------------------|---------|----------|---------|---------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
All files                         |   29.87 |    21.82 |   17.89 |   30.47 |                                                                                                                                                                                        
 backend                          |   55.81 |    34.04 |   20.83 |   55.81 |                                                                                                                                                                                        
  server.js                       |   56.47 |    34.04 |   20.83 |   56.47 | 74-168,232,269-314,348-355,367-370                                                                                                                                                     
  start.js                        |       0 |      100 |     100 |       0 | 3-4                                                                                                                                                                                    
 backend/api/routes               |   24.65 |    26.68 |   20.57 |   24.93 |                                                                                                                                                                                        
  ai.routes.js                    |       0 |        0 |       0 |       0 | 6-151                                                                                                                                                                                  
  auth.routes.js                  |   41.59 |    30.95 |   42.85 |   41.96 | 12-13,86-87,120-167,191-223,237-242,254-275,288-319,332-373                                                                                                                            
  crm.routes.js                   |    8.84 |        0 |       0 |   10.92 | 240-253,299-320,333-365,378-407,420-458,471-495,508-533,546-575,588-656                                                                                                                
  documents.routes.js             |   11.33 |        0 |       0 |   13.17 | 215-251,265-318,332-363,377-383,397-403,417-457,471-497,511-528,542-589,603-659                                                                                                        
  integration.routes.js           |       0 |        0 |       0 |       0 | 6-124                                                                                                                                                                                  
  modules.routes.js               |      32 |        0 |       0 |      32 | 230-251,265-278,292-306                                                                                                                                                                
  project.routes.js               |       0 |        0 |       0 |       0 | 6-167                                                                                                                                                                                  
  reporting.routes.js             |       0 |        0 |       0 |       0 | 6-119                                                                                                                                                                                  
  search.routes.js                |       0 |        0 |       0 |       0 | 6-200                                                                                                                                                                                  
  setupRoutes.js                  |       0 |      100 |       0 |       0 | 10-97                                                                                                                                                                                  
  transport.routes.js             |       0 |        0 |       0 |       0 | 6-653                                                                                                                                                                                  
  users.routes.js                 |   84.05 |    53.12 |     100 |   83.33 | 9,25,47-48,88-89,194-195,212,240-241                                                                                                                                                   
  workflows.routes.js             |      82 |    70.93 |      82 |   87.05 | 59,141,162,170,187,192,197,231-232,277,294,299,339,379,399,429,466-470,477-478,485                                                                                                     
 backend/config                   |   20.17 |    10.25 |      10 |   22.54 |                                                                                                                                                                                        
  database.js                     |   26.08 |    21.42 |   16.66 |   26.08 | 10-11,21-67,72-79,86                                                                                                                                                                   
  in-memory-db.js                 |       0 |        0 |       0 |       0 | 4-122                                                                                                                                                                                  
  inMemoryDB.js                   |   61.11 |       50 |     100 |   61.11 | 13-21,26-27,45-46                                                                                                                                                                      
 backend/middleware               |      52 |    37.38 |      45 |    52.7 |                                                                                                                                                                                        
  auth.js                         |      65 |    71.42 |   71.42 |      65 | 41-42,67-82,94,100                                                                                                                                                                     
  auth.middleware.js              |      15 |        0 |       0 |   15.38 | 19-69,82-97,105-123,132-152,161-177,186-192,200-204,213,230-262                                                                                                                        
  rateLimiter.js                  |   88.88 |       50 |       0 |     100 | 29                                                                                                                                                                                     
  responseHandler.js              |   88.88 |    33.33 |      75 |   88.88 | 25                                                                                                                                                                                     
  sanitize.js                     |   83.33 |      100 |       0 |   83.33 | 14                                                                                                                                                                                     
  securityHeaders.js              |     100 |      100 |     100 |     100 |                                                                                                                                                                                        
  uploadMiddleware.js             |   34.48 |     8.33 |       0 |   34.48 | 13,19-25,31-52,67-75                                                                                                                                                                   
  validation.js                   |   88.15 |    80.32 |     100 |   89.33 | 72,89,93,98,115,139,171,190                                                                                                                                                            
  validator.middleware.js         |   35.41 |    15.21 |     100 |   35.41 | 14-32,45-61,74-93                                                                                                                                                                      
 backend/models                   |   30.15 |    15.14 |   14.94 |    31.8 |                                                                                                                                                                                        
  AI.memory.js                    |    3.27 |        0 |       0 |       4 | 7-280                                                                                                                                                                                  
  Attendance.memory.js            |   29.72 |    18.75 |   18.18 |   31.42 | 20-31,40-71                                                                                                                                                                            
  Document.js                     |   40.62 |        0 |       0 |   43.33 | 232-235,240-245,251-267,272                                                                                                                                                            
  Driver.js                       |   35.29 |        0 |       0 |   35.29 | 212-227,231-232,236-247                                                                                                                                                                
  Employee.memory.js              |   68.18 |    51.28 |   68.42 |   68.42 | 21,30,42,45-47,53,63-67,87,104-113,126                                                                                                                                                 
  Finance.memory.js               |   14.95 |     7.89 |   10.52 |   17.58 | 12-19,23-24,34-95,124-244                                                                                                                                                              
  Leave.memory.js                 |   46.42 |    36.66 |   46.66 |   48.93 | 21-39,56,81-107                                                                                                                                                                        
  Notification.memory.js          |   17.74 |     4.54 |   13.04 |   19.29 | 10-12,16-52,61-68,83-207                                                                                                                                                               
  Product.js                      |       0 |      100 |       0 |       0 | 1-47                                                                                                                                                                                   
  Trip.js                         |       0 |        0 |       0 |       0 | 11-226                                                                                                                                                                                 
  User.js                         |      50 |      100 |       0 |      50 | 45-46,51-54                                                                                                                                                                            
  User.memory.js                  |   72.72 |    56.86 |      75 |   73.41 | 62-64,80-81,99,102,120,126-129,134-150                                                                                                                                                 
  Vehicle.js                      |   31.34 |        0 |       0 |    32.3 | 350,354-362,366-375,379-388,393-396,400-402,406-415,419-428,432-451                                                                                                                    
  Vehicle_SaudiCompliant.js       |       0 |        0 |       0 |       0 | 13-841                                                                                                                                                                                 
  analytics.model.js              |   34.14 |     7.69 |      25 |   33.33 | 7-39,45-64,69-70,76-85,91,103-107                                                                                                                                                      
  conversation.model.js           |   26.19 |        0 |       0 |   29.33 | 183,188-198,203-209,214-223,228-232,237-239,244-248,253-255,260-265,270,279-288,299-314,319-337,343-344,349-351                                                                        
  disability-assessment.model.js  |   37.93 |        0 |       0 |      40 | 287-304,308-309,320,335-340,349,369-372,382,386,390-410,419-424                                                                                                                        
  employee.model.js               |   33.33 |        0 |       0 |   33.87 | 259,268-286,293,303-305,312-324,331-336,343-344,351-359,366,387,394,401-422,443-444,453-456                                                                                            
  message.model.js                |   37.77 |        0 |       0 |   40.47 | 144,149,154-158,163-167,172-176,181-188,198,208-217,223-228                                                                                                                            
  payroll.model.js                |   24.48 |        0 |       0 |   24.48 | 115-130,137-158,165-168,175-178,185-188,197,204-216                                                                                                                                    
  performance.model.js            |   27.27 |        0 |       0 |   33.33 | 118-126,133-135,142-147,154-158,165-170                                                                                                                                                
  prediction.model.js             |      50 |    33.33 |      25 |    52.5 | 7-58,74,88-115,123-127                                                                                                                                                                 
  rehabilitation-program.model.js |   35.82 |        0 |       0 |   40.67 | 403-405,409-423,429-431,435,454-462,466-468,473,477-480,485,498-501                                                                                                                    
  training.model.js               |   29.16 |        0 |       0 |      35 | 88-94,101-109,116-118                                                                                                                                                                  
  transport.models.js             |       0 |      100 |     100 |       0 | 6-749                                                                                                                                                                                  
 backend/routes                   |   25.65 |       14 |   11.94 |   25.25 |                                                                                                                                                                                        
  ai.routes.js                    |   54.34 |    36.36 |   43.75 |   54.02 | 92,119-121,148-173,187-200,214-221,233-250,262-277                                                                                                                                     
  archivingRoutes.js              |       0 |        0 |       0 |       0 | 6-415                                                                                                                                                                                  
  complianceRoutes.js             |    13.1 |        0 |       0 |   13.57 | 26-47,59-69,83-107,119-143,155-180,192-234,248-257,269-287,299-354,368-379,391-410,424-469                                                                                             
  documentRoutes.js               |     100 |      100 |     100 |     100 |                                                                                                                                                                                        
  driverRoutes.js                 |       0 |        0 |       0 |       0 | 10-308                                                                                                                                                                                 
  finance.routes.js               |   25.26 |    13.04 |    7.14 |   25.26 | 16-39,51-58,70-83,95-108,120-133,151,169,181-194,206-219,233-248,260-272,286-309,321-335,347-366                                                                                       
  hr-advanced.routes.js           |   28.84 |        0 |       0 |   29.41 | 21-22,37-49,68-69,83-84,99-101,117-119,134-135,150-151,166-167,183-184,199-201,216-218,233-235,251-253,268-270,285-287,301-304,319-322,339-340,354-356,370-371,385-386,400-401,415-427 
  hr.routes.js                    |   71.73 |     62.5 |   88.88 |   70.78 | 81-82,95-103,123-125,131-133,153-155,164-184                                                                                                                                           
  hrops.routes.js                 |   30.12 |       10 |   14.28 |   30.86 | 16-28,34-48,59-71,88-89,95-100,106-124,130-147                                                                                                                                         
  messaging.routes.js             |   15.88 |        0 |       0 |   15.88 | 36-56,68-78,90-99,111-121,133-153,165-173,187-200,212-228,240-260,272-289,301-311                                                                                                      
  notifications.routes.js         |   20.93 |        0 |    4.76 |   20.93 | 41,53-64,76-90,104-129,143-172,184-203,217-234,246-264,278-287,301-323,335-357,369-380,392-403,415-425,437-457,471-492,504-521,533-546,558-580,592-605,617-634                         
  predictions.routes.js           |      24 |        0 |       0 |      24 | 9-29,38-48,57-67,76-87,96-108,117-130                                                                                                                                                  
  rehabilitation.routes.js        |   37.33 |      100 |       0 |   37.33 | 22-23,39-40,54-55,66-67,78-79,90-91,102-103,116-117,133-134,148-149,160-162,173-174,185-186,197-198,209-210,221-222,233-234,245-246,259-260,271-272,283-284,295-296,307-309            
  reports.routes.js               |   44.96 |    37.17 |   31.03 |    41.8 | 48,108,120-142,155-211,223-261,273-305                                                                                                                                                 
  vehicleRoutes.js                |       0 |      100 |       0 |       0 | 10-262                                                                                                                                                                                 
 backend/utils                    |   52.33 |    58.13 |   54.54 |   52.94 |                                                                                                                                                                                        
  errorHandler.js                 |   88.46 |    84.21 |     100 |    87.5 | 57,66,76                                                                                                                                                                               
  logger.js                       |   71.42 |        0 |      75 |   71.42 | 18-19                                                                                                                                                                                  
  security.js                     |   48.88 |    56.25 |   44.44 |   51.16 | 11,18,25-47,55-56,113,125-132                                                                                                                                                          
  seedDatabase.js                 |       0 |        0 |       0 |       0 | 2-38                                                                                                                                                                                   
  validators.js                   |   42.85 |        0 |       0 |   46.15 | 81-102                                                                                                                                                                                 
----------------------------------|---------|----------|---------|---------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Jest: "global" coverage threshold for branches (25%) 
not met: 21.82%
Jest: "global" coverage threshold for functions (25%) 
not met: 17.89%
Summary of all failing tests
FAIL api/tests/advancedSearch.test.js
  ظù AdvancedSearchService Tests ظ║ Filter Operations 
ظ║ should filter with greater than operator

    assert(received)

    Expected value to be equal to:
      true
    Received:
      false

    Message:
      Should find users with salary > 5000

    [0m [90m 119 |[39m     test([32m'should filter 
with greater than operator'[39m[33m,[39m () 
[33m=>[39m {
     [90m 120 |[39m       [36mconst[39m result 
[33m=[39m 
searchService[33m.[39mfilter(sampleData[33m,[39m [{ 
field[33m:[39m [32m'salary'[39m[33m,[39m 
operator[33m:[39m [32m'gt'[39m[33m,[39m 
value[33m:[39m [35m5000[39m }])[33m;[39m
    [31m[1m>[22m[39m[90m 121 |[39m       
assert(result[33m.[39mlength [33m===[39m 
[35m2[39m[33m,[39m [32m'Should find users with 
salary > 5000'[39m)[33m;[39m
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 122 |[39m     })[33m;[39m
     [90m 123 |[39m
     [90m 124 |[39m     test([32m'should filter with 
less than operator'[39m[33m,[39m () [33m=>[39m 
{[0m

      at Object.assert 
(api/tests/advancedSearch.test.js:121:7)

  ظù AdvancedSearchService Tests ظ║ Filter Operations 
ظ║ should filter with IN operator

    assert(received)

    Expected value to be equal to:
      true
    Received:
      false

    Message:
      Should find all Engineering and Sales members

    [0m [90m 137 |[39m     test([32m'should filter 
with IN operator'[39m[33m,[39m () [33m=>[39m {
     [90m 138 |[39m       [36mconst[39m result 
[33m=[39m 
searchService[33m.[39mfilter(sampleData[33m,[39m [{ 
field[33m:[39m [32m'department'[39m[33m,[39m 
operator[33m:[39m [32m'in'[39m[33m,[39m 
value[33m:[39m [[32m'Engineering'[39m[33m,[39m 
[32m'Sales'[39m] }])[33m;[39m
    [31m[1m>[22m[39m[90m 139 |[39m       
assert(result[33m.[39mlength [33m===[39m 
[35m3[39m[33m,[39m [32m'Should find all 
Engineering and Sales members'[39m)[33m;[39m
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 140 |[39m     })[33m;[39m
     [90m 141 |[39m
     [90m 142 |[39m     test([32m'should filter with 
CONTAINS operator'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.assert 
(api/tests/advancedSearch.test.js:139:7)

  ظù AdvancedSearchService Tests ظ║ Filter Operations 
ظ║ should handle date range filter

    assert(received)

    Expected value to be equal to:
      true
    Received:
      false

    Message:
      Should find users joined after 2023-01-01

    [0m [90m 147 |[39m     test([32m'should handle 
date range filter'[39m[33m,[39m () [33m=>[39m {
     [90m 148 |[39m       [36mconst[39m result 
[33m=[39m 
searchService[33m.[39mfilter(sampleData[33m,[39m [{ 
field[33m:[39m [32m'joinDate'[39m[33m,[39m 
operator[33m:[39m [32m'gte'[39m[33m,[39m 
value[33m:[39m [32m'2023-01-01'[39m }])[33m;[39m
    [31m[1m>[22m[39m[90m 149 |[39m       
assert(result[33m.[39mlength [33m===[39m 
[35m2[39m[33m,[39m [32m'Should find users joined 
after 2023-01-01'[39m)[33m;[39m
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 150 |[39m     })[33m;[39m
     [90m 151 |[39m   })[33m;[39m
     [90m 152 |[39m[0m

      at Object.assert 
(api/tests/advancedSearch.test.js:149:7)

FAIL api/tests/aiAnalytics.test.js
  ظù AIAnalyticsService Tests ظ║ Attendance 
Prediction ظ║ should predict attendance for next period

    assert(received)

    Expected value to be equal to:
      true
    Received:
      false

    [0m [90m 30 |[39m     test([32m'should predict 
attendance for next period'[39m[33m,[39m () 
[33m=>[39m {
     [90m 31 |[39m       [36mconst[39m prediction 
[33m=[39m aiService[33m.[39mpredictAttendance(traini
ngData)[33m;[39m
    [31m[1m>[22m[39m[90m 32 |[39m       
assert(prediction[33m.[39mnextPeriod [33m>=[39m 
[35m0[39m [33m&&[39m 
prediction[33m.[39mnextPeriod [33m<=[39m 
[35m100[39m)[33m;[39m
     [90m    |[39m       [31m[1m^[22m[39m
     [90m 33 |[39m       
assert(prediction[33m.[39mconfidence [33m>=[39m 
[35m0[39m [33m&&[39m 
prediction[33m.[39mconfidence [33m<=[39m 
[35m100[39m)[33m;[39m
     [90m 34 |[39m     })[33m;[39m
     [90m 35 |[39m[0m

      at Object.assert 
(api/tests/aiAnalytics.test.js:32:7)

  ظù AIAnalyticsService Tests ظ║ Attendance 
Prediction ظ║ should predict with historical trend

    assert(received)

    Expected value to be equal to:
      true
    Received:
      undefined

    Message:
      Should indicate trend

    Difference:

      Comparing two different types of values. Expected 
boolean but received undefined.

    [0m [90m 38 |[39m         
considerTrend[33m:[39m [36mtrue[39m[33m,[39m
     [90m 39 |[39m       })[33m;[39m
    [31m[1m>[22m[39m[90m 40 |[39m       
assert(prediction[33m.[39mtrend[33m,[39m 
[32m'Should indicate trend'[39m)[33m;[39m
     [90m    |[39m       [31m[1m^[22m[39m
     [90m 41 |[39m       
assert([[32m'increasing'[39m[33m,[39m 
[32m'decreasing'[39m[33m,[39m [32m'stable'[39m][3
3m.[39mincludes(prediction[33m.[39mtrend))[33m;[39m
     [90m 42 |[39m     })[33m;[39m
     [90m 43 |[39m[0m

      at Object.assert 
(api/tests/aiAnalytics.test.js:40:7)

  ظù AIAnalyticsService Tests ظ║ Attendance 
Prediction ظ║ should forecast attendance for multiple 
periods

    TypeError: Cannot read properties of undefined 
(reading 'length')

    [0m [90m 46 |[39m         periods[33m:[39m 
[35m5[39m[33m,[39m
     [90m 47 |[39m       })[33m;[39m
    [31m[1m>[22m[39m[90m 48 |[39m       
assert(forecast[33m.[39mforecasts[33m.[39mlength 
[33m===[39m [35m5[39m)[33m;[39m
     [90m    |[39m                                 
[31m[1m^[22m[39m
     [90m 49 |[39m       
forecast[33m.[39mforecasts[33m.[39mforEach(f 
[33m=>[39m {
     [90m 50 |[39m         assert(f[33m.[39mvalue 
[33m>=[39m [35m0[39m [33m&&[39m f[33m.[39mvalue 
[33m<=[39m [35m100[39m)[33m;[39m
     [90m 51 |[39m       })[33m;[39m[0m

      at Object.length 
(api/tests/aiAnalytics.test.js:48:33)

  ظù AIAnalyticsService Tests ظ║ Attendance 
Prediction ظ║ should handle seasonal patterns in 
attendance

    assert(received)

    Expected value to be equal to:
      true
    Received:
      undefined

    Message:
      Should detect seasonality

    Difference:

      Comparing two different types of values. Expected 
boolean but received undefined.

    [0m [90m 62 |[39m         seasonal[33m:[39m 
[36mtrue[39m[33m,[39m
     [90m 63 |[39m       })[33m;[39m
    [31m[1m>[22m[39m[90m 64 |[39m       
assert(prediction[33m.[39mseasonalPattern[33m,[39m 
[32m'Should detect seasonality'[39m)[33m;[39m
     [90m    |[39m       [31m[1m^[22m[39m
     [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
     [90m 67 |[39m     test([32m'should calculate 
prediction confidence'[39m[33m,[39m () [33m=>[39m 
{[0m

      at Object.assert 
(api/tests/aiAnalytics.test.js:64:7)

  ظù AIAnalyticsService Tests ظ║ Attendance 
Prediction ظ║ should calculate prediction confidence

    assert(received)

    Expected value to be equal to:
      true
    Received:
      undefined

    Message:
      Should explain confidence

    Difference:

      Comparing two different types of values. Expected 
boolean but received undefined.

    [0m [90m 68 |[39m       [36mconst[39m 
prediction [33m=[39m aiService[33m.[39mpredictAttend
ance(trainingData)[33m;[39m
     [90m 69 |[39m       
assert(prediction[33m.[39mconfidence [33m<=[39m 
[35m100[39m [33m&&[39m 
prediction[33m.[39mconfidence [33m>=[39m 
[35m0[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 70 |[39m       
assert(prediction[33m.[39mconfidenceReason[33m,[39m 
[32m'Should explain confidence'[39m)[33m;[39m
     [90m    |[39m       [31m[1m^[22m[39m
     [90m 71 |[39m     })[33m;[39m
     [90m 72 |[39m
     [90m 73 |[39m     test([32m'should handle 
missing data points'[39m[33m,[39m () [33m=>[39m 
{[0m

      at Object.assert 
(api/tests/aiAnalytics.test.js:70:7)

  ظù AIAnalyticsService Tests ظ║ Attendance 
Prediction ظ║ should handle missing data points

    assert(received)

    Expected value to be equal to:
      true
    Received:
      undefined

    Message:
      Should handle missing data

    Difference:

      Comparing two different types of values. Expected 
boolean but received undefined.

    [0m [90m 79 |[39m
     [90m 80 |[39m       [36mconst[39m prediction 
[33m=[39m aiService[33m.[39mpredictAttendance(incomp
leteData)[33m;[39m
    [31m[1m>[22m[39m[90m 81 |[39m       
assert(prediction[33m.[39mnextPeriod[33m,[39m 
[32m'Should handle missing data'[39m)[33m;[39m
     [90m    |[39m       [31m[1m^[22m[39m
     [90m 82 |[39m     })[33m;[39m
     [90m 83 |[39m   })[33m;[39m
     [90m 84 |[39m[0m

      at Object.assert 
(api/tests/aiAnalytics.test.js:81:7)

  ظù AIAnalyticsService Tests ظ║ Performance 
Prediction ظ║ should predict performance score

    assert(received)

    Expected value to be equal to:
      true
    Received:
      false

    [0m [90m 89 |[39m     test([32m'should predict 
performance score'[39m[33m,[39m () [33m=>[39m {
     [90m 90 |[39m       [36mconst[39m prediction 
[33m=[39m aiService[33m.[39mpredictPerformance(train
ingData)[33m;[39m
    [31m[1m>[22m[39m[90m 91 |[39m       
assert(prediction[33m.[39mnextScore [33m>=[39m 
[35m0[39m [33m&&[39m prediction[33m.[39mnextScore 
[33m<=[39m [35m100[39m)[33m;[39m
     [90m    |[39m       [31m[1m^[22m[39m
     [90m 92 |[39m       
assert(prediction[33m.[39mconfidence [33m>=[39m 
[35m0[39m)[33m;[39m
     [90m 93 |[39m     })[33m;[39m
     [90m 94 |[39m[0m

      at Object.assert 
(api/tests/aiAnalytics.test.js:91:7)

  ظù AIAnalyticsService Tests ظ║ Performance 
Prediction ظ║ should identify performance factors

    assert(received)

    Expected value to be equal to:
      true
    Received:
      false

    Message:
      Should list contributing factors

    [0m [90m  95 |[39m     test([32m'should 
identify performance factors'[39m[33m,[39m () 
[33m=>[39m {
     [90m  96 |[39m       [36mconst[39m prediction 
[33m=[39m aiService[33m.[39mpredictPerformance(train
ingData)[33m;[39m
    [31m[1m>[22m[39m[90m  97 |[39m       assert([
33mArray[39m[33m.[39misArray(prediction[33m.[39mfac
tors)[33m,[39m [32m'Should list contributing 
factors'[39m)[33m;[39m
     [90m     |[39m       [31m[1m^[22m[39m
     [90m  98 |[39m     })[33m;[39m
     [90m  99 |[39m
     [90m 100 |[39m     test([32m'should forecast 
performance trend'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.assert 
(api/tests/aiAnalytics.test.js:97:7)

  ظù AIAnalyticsService Tests ظ║ Performance 
Prediction ظ║ should forecast performance trend

    TypeError: aiService.forecastPerformance is not a 
function

    [0m [90m  99 |[39m
     [90m 100 |[39m     test([32m'should forecast 
performance trend'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 101 |[39m       
[36mconst[39m forecast [33m=[39m aiService[33m.[39
mforecastPerformance(trainingData[33m,[39m {
     [90m     |[39m                                  
[31m[1m^[22m[39m
     [90m 102 |[39m         periods[33m:[39m 
[35m10[39m[33m,[39m
     [90m 103 |[39m       })[33m;[39m
     [90m 104 |[39m       
assert(forecast[33m.[39mforecasts[33m.[39mlength 
[33m===[39m [35m10[39m)[33m;[39m[0m

      at Object.forecastPerformance 
(api/tests/aiAnalytics.test.js:101:34)

  ظù AIAnalyticsService Tests ظ║ Performance 
Prediction ظ║ should detect performance anomalies

    TypeError: aiService.detectPerformanceAnomalies is 
not a function

    [0m [90m 108 |[39m       [36mconst[39m 
dataWithAnomaly [33m=[39m 
[[33m...[39mtrainingData[33m,[39m { date[33m:[39m 
[32m'2024-01-06'[39m[33m,[39m attendance[33m:[39m 
[35m50[39m[33m,[39m performance[33m:[39m 
[35m20[39m[33m,[39m score[33m:[39m [35m30[39m 
}][33m;[39m
     [90m 109 |[39m
    [31m[1m>[22m[39m[90m 110 |[39m       
[36mconst[39m anomalies [33m=[39m aiService[33m.[3
9mdetectPerformanceAnomalies(dataWithAnomaly)[33m;[39m
     [90m     |[39m                                   
[31m[1m^[22m[39m
     [90m 111 |[39m       
assert(anomalies[33m.[39mlength [33m>[39m 
[35m0[39m[33m,[39m [32m'Should detect 
anomalies'[39m)[33m;[39m
     [90m 112 |[39m     })[33m;[39m
     [90m 113 |[39m[0m

      at Object.detectPerformanceAnomalies 
(api/tests/aiAnalytics.test.js:110:35)

  ظù AIAnalyticsService Tests ظ║ Performance 
Prediction ظ║ should compare against baseline

    TypeError: aiService.comparePerformance is not a 
function

    [0m [90m 113 |[39m
     [90m 114 |[39m     test([32m'should compare 
against baseline'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 115 |[39m       
[36mconst[39m comparison [33m=[39m aiService[33m.[
39mcomparePerformance(trainingData[33m,[39m {
     [90m     |[39m                                   
 [31m[1m^[22m[39m
     [90m 116 |[39m         baseline[33m:[39m 
[35m85[39m[33m,[39m
     [90m 117 |[39m       })[33m;[39m
     [90m 118 |[39m       
assert(comparison[33m.[39maboveBaseline [33m!==[39m 
undefined)[33m;[39m[0m

      at Object.comparePerformance 
(api/tests/aiAnalytics.test.js:115:36)

  ظù AIAnalyticsService Tests ظ║ Performance 
Prediction ظ║ should predict performance improvement

    TypeError: aiService.predictImprovement is not a 
function

    [0m [90m 121 |[39m
     [90m 122 |[39m     test([32m'should predict 
performance improvement'[39m[33m,[39m () 
[33m=>[39m {
    [31m[1m>[22m[39m[90m 123 |[39m       
[36mconst[39m prediction [33m=[39m aiService[33m.[
39mpredictImprovement(trainingData)[33m;[39m
     [90m     |[39m                                   
 [31m[1m^[22m[39m
     [90m 124 |[39m       
assert(prediction[33m.[39mprojectedImprovement 
[33m!==[39m undefined)[33m;[39m
     [90m 125 |[39m       
assert(prediction[33m.[39mtimeToTarget [33m!==[39m 
undefined)[33m;[39m
     [90m 126 |[39m     })[33m;[39m[0m

      at Object.predictImprovement 
(api/tests/aiAnalytics.test.js:123:36)

  ظù AIAnalyticsService Tests ظ║ Anomaly Detection 
ظ║ should detect unusual patterns

    assert(received)

    Expected value to be equal to:
      true
    Received:
      false

    Message:
      Should return array of anomalies

    [0m [90m 135 |[39m
     [90m 136 |[39m       [36mconst[39m anomalies 
[33m=[39m aiService[33m.[39mdetectAnomalies(dataWith
Anomaly)[33m;[39m
    [31m[1m>[22m[39m[90m 137 |[39m       assert([
33mArray[39m[33m.[39misArray(anomalies)[33m,[39m 
[32m'Should return array of anomalies'[39m)[33m;[39m
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 138 |[39m       
assert(anomalies[33m.[39mlength [33m>[39m 
[35m0[39m[33m,[39m [32m'Should detect 
anomalies'[39m)[33m;[39m
     [90m 139 |[39m     })[33m;[39m
     [90m 140 |[39m[0m

      at Object.assert 
(api/tests/aiAnalytics.test.js:137:7)

  ظù AIAnalyticsService Tests ظ║ Anomaly Detection 
ظ║ should classify anomaly severity

    TypeError: anomalies.forEach is not a function

    [0m [90m 143 |[39m
     [90m 144 |[39m       [36mconst[39m anomalies 
[33m=[39m aiService[33m.[39mdetectAnomalies(dataWith
Anomaly)[33m;[39m
    [31m[1m>[22m[39m[90m 145 |[39m       
anomalies[33m.[39mforEach(a [33m=>[39m {
     [90m     |[39m                 
[31m[1m^[22m[39m
     [90m 146 |[39m         
assert([[32m'low'[39m[33m,[39m 
[32m'medium'[39m[33m,[39m 
[32m'high'[39m[33m,[39m [32m'critical'[39m][33m.
[39mincludes(a[33m.[39mseverity))[33m;[39m
     [90m 147 |[39m       })[33m;[39m
     [90m 148 |[39m     })[33m;[39m[0m

      at Object.forEach 
(api/tests/aiAnalytics.test.js:145:17)

  ظù AIAnalyticsService Tests ظ║ Anomaly Detection 
ظ║ should explain anomalies

    TypeError: anomalies.forEach is not a function

    [0m [90m 152 |[39m
     [90m 153 |[39m       [36mconst[39m anomalies 
[33m=[39m aiService[33m.[39mdetectAnomalies(dataWith
Anomaly)[33m;[39m
    [31m[1m>[22m[39m[90m 154 |[39m       
anomalies[33m.[39mforEach(a [33m=>[39m {
     [90m     |[39m                 
[31m[1m^[22m[39m
     [90m 155 |[39m         
assert(a[33m.[39mreason[33m,[39m [32m'Should 
explain anomaly'[39m)[33m;[39m
     [90m 156 |[39m       })[33m;[39m
     [90m 157 |[39m     })[33m;[39m[0m

      at Object.forEach 
(api/tests/aiAnalytics.test.js:154:17)

  ظù AIAnalyticsService Tests ظ║ Anomaly Detection 
ظ║ should detect gradual drift

    TypeError: aiService.detectDrift is not a function

    [0m [90m 163 |[39m       }))[33m;[39m
     [90m 164 |[39m
    [31m[1m>[22m[39m[90m 165 |[39m       
[36mconst[39m drift [33m=[39m 
aiService[33m.[39mdetectDrift(driftData)[33m;[39m
     [90m     |[39m                               
[31m[1m^[22m[39m
     [90m 166 |[39m       
assert(drift[33m.[39mdriftDetected [33m!==[39m 
undefined)[33m;[39m
     [90m 167 |[39m       [36mif[39m 
(drift[33m.[39mdriftDetected) {
     [90m 168 |[39m         
assert(drift[33m.[39mdirection[33m,[39m 
[32m'Should indicate drift 
direction'[39m)[33m;[39m[0m

      at Object.detectDrift 
(api/tests/aiAnalytics.test.js:165:31)

  ظù AIAnalyticsService Tests ظ║ Anomaly Detection 
ظ║ should handle threshold customization

    assert(received)

    Expected value to be equal to:
      true
    Received:
      false

    [0m [90m 174 |[39m         threshold[33m:[39m 
[35m2.5[39m[33m,[39m [90m// Custom threshold[39m
     [90m 175 |[39m       })[33m;[39m
    [31m[1m>[22m[39m[90m 176 |[39m       assert([
33mArray[39m[33m.[39misArray(anomalies))[33m;[39m
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 177 |[39m     })[33m;[39m
     [90m 178 |[39m   })[33m;[39m
     [90m 179 |[39m[0m

      at Object.assert 
(api/tests/aiAnalytics.test.js:176:7)

  ظù AIAnalyticsService Tests ظ║ Recommendations ظ║ 
should generate smart recommendations

    TypeError: aiService.generateRecommendations is not 
a function

    [0m [90m 183 |[39m   
describe([32m'Recommendations'[39m[33m,[39m () 
[33m=>[39m {
     [90m 184 |[39m     test([32m'should generate 
smart recommendations'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 185 |[39m       
[36mconst[39m recommendations [33m=[39m aiService[3
3m.[39mgenerateRecommendations(trainingData)[33m;[39m
     [90m     |[39m                                   
      [31m[1m^[22m[39m
     [90m 186 |[39m       assert([33mArray[39m[33m.
[39misArray(recommendations)[33m,[39m [32m'Should 
return array'[39m)[33m;[39m
     [90m 187 |[39m       
assert(recommendations[33m.[39mlength [33m>[39m 
[35m0[39m[33m,[39m [32m'Should have 
recommendations'[39m)[33m;[39m
     [90m 188 |[39m     })[33m;[39m[0m

      at Object.generateRecommendations 
(api/tests/aiAnalytics.test.js:185:41)

  ظù AIAnalyticsService Tests ظ║ Recommendations ظ║ 
should provide actionable recommendations

    TypeError: aiService.generateRecommendations is not 
a function

    [0m [90m 189 |[39m
     [90m 190 |[39m     test([32m'should provide 
actionable recommendations'[39m[33m,[39m () 
[33m=>[39m {
    [31m[1m>[22m[39m[90m 191 |[39m       
[36mconst[39m recommendations [33m=[39m aiService[3
3m.[39mgenerateRecommendations(trainingData)[33m;[39m
     [90m     |[39m                                   
      [31m[1m^[22m[39m
     [90m 192 |[39m       
recommendations[33m.[39mforEach(r [33m=>[39m {
     [90m 193 |[39m         
assert(r[33m.[39maction[33m,[39m [32m'Should have 
action'[39m)[33m;[39m
     [90m 194 |[39m         
assert(r[33m.[39mpriority[33m,[39m [32m'Should 
have priority'[39m)[33m;[39m[0m

      at Object.generateRecommendations 
(api/tests/aiAnalytics.test.js:191:41)

  ظù AIAnalyticsService Tests ظ║ Recommendations ظ║ 
should rank recommendations by priority

    TypeError: aiService.generateRecommendations is not 
a function

    [0m [90m 198 |[39m
     [90m 199 |[39m     test([32m'should rank 
recommendations by priority'[39m[33m,[39m () 
[33m=>[39m {
    [31m[1m>[22m[39m[90m 200 |[39m       
[36mconst[39m recommendations [33m=[39m aiService[3
3m.[39mgenerateRecommendations(trainingData)[33m;[39m
     [90m     |[39m                                   
      [31m[1m^[22m[39m
     [90m 201 |[39m       [36mconst[39m priorities 
[33m=[39m recommendations[33m.[39mmap(r 
[33m=>[39m r[33m.[39mpriority)[33m;[39m
     [90m 202 |[39m       
assert(priorities[[35m0[39m] [33m===[39m 
[32m'high'[39m [33m||[39m priorities[33m.[39minclu
des([32m'high'[39m))[33m;[39m
     [90m 203 |[39m     })[33m;[39m[0m

      at Object.generateRecommendations 
(api/tests/aiAnalytics.test.js:200:41)

  ظù AIAnalyticsService Tests ظ║ Recommendations ظ║ 
should tailor recommendations to user

    TypeError: aiService.generateRecommendations is not 
a function

    [0m [90m 204 |[39m
     [90m 205 |[39m     test([32m'should tailor 
recommendations to user'[39m[33m,[39m () 
[33m=>[39m {
    [31m[1m>[22m[39m[90m 206 |[39m       
[36mconst[39m recommendations [33m=[39m aiService[3
3m.[39mgenerateRecommendations(trainingData[33m,[39m 
{
     [90m     |[39m                                   
      [31m[1m^[22m[39m
     [90m 207 |[39m         userId[33m:[39m 
[32m'user123'[39m[33m,[39m
     [90m 208 |[39m         department[33m:[39m 
[32m'engineering'[39m[33m,[39m
     [90m 209 |[39m       })[33m;[39m[0m

      at Object.generateRecommendations 
(api/tests/aiAnalytics.test.js:206:41)

  ظù AIAnalyticsService Tests ظ║ Recommendations ظ║ 
should estimate recommendation impact

    TypeError: aiService.generateRecommendations is not 
a function

    [0m [90m 212 |[39m
     [90m 213 |[39m     test([32m'should estimate 
recommendation impact'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 214 |[39m       
[36mconst[39m recommendations [33m=[39m aiService[3
3m.[39mgenerateRecommendations(trainingData)[33m;[39m
     [90m     |[39m                                   
      [31m[1m^[22m[39m
     [90m 215 |[39m       
recommendations[33m.[39mforEach(r [33m=>[39m {
     [90m 216 |[39m         
assert(r[33m.[39mestimatedImprovement [33m!==[39m 
undefined)[33m;[39m
     [90m 217 |[39m         
assert(r[33m.[39mtimeToSeeResults [33m!==[39m 
undefined)[33m;[39m[0m

      at Object.generateRecommendations 
(api/tests/aiAnalytics.test.js:214:41)

  ظù AIAnalyticsService Tests ظ║ Recommendations ظ║ 
should provide confidence in recommendations

    TypeError: aiService.generateRecommendations is not 
a function

    [0m [90m 220 |[39m
     [90m 221 |[39m     test([32m'should provide 
confidence in recommendations'[39m[33m,[39m () 
[33m=>[39m {
    [31m[1m>[22m[39m[90m 222 |[39m       
[36mconst[39m recommendations [33m=[39m aiService[3
3m.[39mgenerateRecommendations(trainingData)[33m;[39m
     [90m     |[39m                                   
      [31m[1m^[22m[39m
     [90m 223 |[39m       
recommendations[33m.[39mforEach(r [33m=>[39m {
     [90m 224 |[39m         
assert(r[33m.[39mconfidence [33m>=[39m [35m0[39m 
[33m&&[39m r[33m.[39mconfidence [33m<=[39m 
[35m100[39m)[33m;[39m
     [90m 225 |[39m       })[33m;[39m[0m

      at Object.generateRecommendations 
(api/tests/aiAnalytics.test.js:222:41)

  ظù AIAnalyticsService Tests ظ║ Trend Analysis ظ║ 
should analyze data trends

    assert(received)

    Expected value to be equal to:
      true
    Received:
      undefined

    Message:
      Should have trend direction

    Difference:

      Comparing two different types of values. Expected 
boolean but received undefined.

    [0m [90m 233 |[39m     test([32m'should analyze 
data trends'[39m[33m,[39m () [33m=>[39m {
     [90m 234 |[39m       [36mconst[39m trends 
[33m=[39m aiService[33m.[39manalyzeTrends(trainingDa
ta)[33m;[39m
    [31m[1m>[22m[39m[90m 235 |[39m       
assert(trends[33m.[39mdirection[33m,[39m 
[32m'Should have trend direction'[39m)[33m;[39m
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 236 |[39m       
assert([[32m'up'[39m[33m,[39m 
[32m'down'[39m[33m,[39m [32m'stable'[39m][33m.[3
9mincludes(trends[33m.[39mdirection))[33m;[39m
     [90m 237 |[39m     })[33m;[39m
     [90m 238 |[39m[0m

      at Object.assert 
(api/tests/aiAnalytics.test.js:235:7)

  ظù AIAnalyticsService Tests ظ║ Trend Analysis ظ║ 
should identify trend inflection points

    assert(received)

    Expected value to be equal to:
      true
    Received:
      undefined

    Message:
      Should detect inflection points

    Difference:

      Comparing two different types of values. Expected 
boolean but received undefined.

    [0m [90m 247 |[39m
     [90m 248 |[39m       [36mconst[39m trends 
[33m=[39m 
aiService[33m.[39manalyzeTrends(trendData)[33m;[39m
    [31m[1m>[22m[39m[90m 249 |[39m       
assert(trends[33m.[39minflectionPoints[33m,[39m 
[32m'Should detect inflection points'[39m)[33m;[39m
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 250 |[39m     })[33m;[39m
     [90m 251 |[39m
     [90m 252 |[39m     test([32m'should calculate 
trend slope'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.assert 
(api/tests/aiAnalytics.test.js:249:7)

  ظù AIAnalyticsService Tests ظ║ Trend Analysis ظ║ 
should calculate trend slope

    assert(received)

    Expected value to be equal to:
      true
    Received:
      false

    Message:
      Should calculate slope

    [0m [90m 252 |[39m     test([32m'should 
calculate trend slope'[39m[33m,[39m () [33m=>[39m {
     [90m 253 |[39m       [36mconst[39m trends 
[33m=[39m aiService[33m.[39manalyzeTrends(trainingDa
ta)[33m;[39m
    [31m[1m>[22m[39m[90m 254 |[39m       
assert(trends[33m.[39mslope [33m!==[39m 
undefined[33m,[39m [32m'Should calculate 
slope'[39m)[33m;[39m
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 255 |[39m       assert([36mtypeof[39m 
trends[33m.[39mslope [33m===[39m 
[32m'number'[39m)[33m;[39m
     [90m 256 |[39m     })[33m;[39m
     [90m 257 |[39m[0m

      at Object.assert 
(api/tests/aiAnalytics.test.js:254:7)

  ظù AIAnalyticsService Tests ظ║ Trend Analysis ظ║ 
should forecast based on trends

    TypeError: projected.toFixed is not a function

    [0m [90m 446 |[39m
     [90m 447 |[39m     [36mreturn[39m {
    [31m[1m>[22m[39m[90m 448 |[39m       
nextPeriod[33m:[39m 
projected[33m.[39mtoFixed([35m2[39m)[33m,[39m
     [90m     |[39m                             
[31m[1m^[22m[39m
     [90m 449 |[39m       confidence[33m:[39m 
[32m'75%'[39m[33m,[39m
     [90m 450 |[39m       direction[33m:[39m slope 
[33m>[39m [35m0[39m [33m?[39m [32m'upward'[39m 
[33m:[39m [32m'downward'[39m[33m,[39m
     [90m 451 |[39m     }[33m;[39m[0m

      at AIAnalyticsService.toFixed [as forecastTrend] 
(services/aiAnalyticsService.js:448:29)
      at Object.forecastTrend 
(api/tests/aiAnalytics.test.js:259:34)

  ظù AIAnalyticsService Tests ظ║ Trend Analysis ظ║ 
should detect seasonality

    assert(received)

    Expected value to be equal to:
      true
    Received:
      false

    [0m [90m 268 |[39m
     [90m 269 |[39m       [36mconst[39m analysis 
[33m=[39m aiService[33m.[39manalyzeTrends(seasonalDa
ta)[33m;[39m
    [31m[1m>[22m[39m[90m 270 |[39m       
assert(analysis[33m.[39mseasonal [33m!==[39m 
undefined)[33m;[39m
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 271 |[39m     })[33m;[39m
     [90m 272 |[39m
     [90m 273 |[39m     test([32m'should compare 
trends over periods'[39m[33m,[39m () [33m=>[39m 
{[0m

      at Object.assert 
(api/tests/aiAnalytics.test.js:270:7)

  ظù AIAnalyticsService Tests ظ║ Trend Analysis ظ║ 
should compare trends over periods

    TypeError: aiService.compareTrends is not a function

    [0m [90m 272 |[39m
     [90m 273 |[39m     test([32m'should compare 
trends over periods'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 274 |[39m       
[36mconst[39m comparison [33m=[39m aiService[33m.[
39mcompareTrends(trainingData[33m.[39mslice([35m0[39
m[33m,[39m [35m3[39m)[33m,[39m 
trainingData[33m.[39mslice([35m2[39m[33m,[39m 
[35m5[39m))[33m;[39m
     [90m     |[39m                                   
 [31m[1m^[22m[39m
     [90m 275 |[39m       
assert(comparison[33m.[39mtrend1Direction[33m,[39m 
[32m'Should analyze first trend'[39m)[33m;[39m
     [90m 276 |[39m       
assert(comparison[33m.[39mtrend2Direction[33m,[39m 
[32m'Should analyze second trend'[39m)[33m;[39m
     [90m 277 |[39m     })[33m;[39m[0m

      at Object.compareTrends 
(api/tests/aiAnalytics.test.js:274:36)

  ظù AIAnalyticsService Tests ظ║ Model Management ظ║ 
should list available models

    TypeError: aiService.listModels is not a function

    [0m [90m 283 |[39m   describe([32m'Model 
Management'[39m[33m,[39m () [33m=>[39m {
     [90m 284 |[39m     test([32m'should list 
available models'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 285 |[39m       
[36mconst[39m models [33m=[39m 
aiService[33m.[39mlistModels()[33m;[39m
     [90m     |[39m                                
[31m[1m^[22m[39m
     [90m 286 |[39m       assert([33mArray[39m[33m.
[39misArray(models))[33m;[39m
     [90m 287 |[39m       
assert(models[33m.[39mlength [33m>[39m 
[35m0[39m)[33m;[39m
     [90m 288 |[39m     })[33m;[39m[0m

      at Object.listModels 
(api/tests/aiAnalytics.test.js:285:32)

  ظù AIAnalyticsService Tests ظ║ Model Management ظ║ 
should get model information

    TypeError: aiService.listModels is not a function

    [0m [90m 289 |[39m
     [90m 290 |[39m     test([32m'should get model 
information'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 291 |[39m       
[36mconst[39m models [33m=[39m 
aiService[33m.[39mlistModels()[33m;[39m
     [90m     |[39m                                
[31m[1m^[22m[39m
     [90m 292 |[39m       [36mconst[39m modelInfo 
[33m=[39m aiService[33m.[39mgetModelInfo(models[[35
m0[39m][33m.[39mid)[33m;[39m
     [90m 293 |[39m       
assert(modelInfo[33m.[39mname[33m,[39m [32m'Should 
have model name'[39m)[33m;[39m
     [90m 294 |[39m       
assert(modelInfo[33m.[39mversion[33m,[39m 
[32m'Should have version'[39m)[33m;[39m[0m

      at Object.listModels 
(api/tests/aiAnalytics.test.js:291:32)

  ظù AIAnalyticsService Tests ظ║ Model Management ظ║ 
should train custom model

    TypeError: aiService.trainModel is not a function

    [0m [90m 296 |[39m
     [90m 297 |[39m     test([32m'should train 
custom model'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 298 |[39m       
[36mconst[39m training [33m=[39m 
aiService[33m.[39mtrainModel(trainingData[33m,[39m {
     [90m     |[39m                                  
[31m[1m^[22m[39m
     [90m 299 |[39m         modelType[33m:[39m 
[32m'regression'[39m[33m,[39m
     [90m 300 |[39m         features[33m:[39m 
[[32m'attendance'[39m[33m,[39m 
[32m'performance'[39m][33m,[39m
     [90m 301 |[39m         target[33m:[39m 
[32m'score'[39m[33m,[39m[0m

      at Object.trainModel 
(api/tests/aiAnalytics.test.js:298:34)

  ظù AIAnalyticsService Tests ظ║ Model Management ظ║ 
should evaluate model performance

    TypeError: aiService.evaluateModel is not a function

    [0m [90m 307 |[39m
     [90m 308 |[39m     test([32m'should evaluate 
model performance'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 309 |[39m       
[36mconst[39m evaluation [33m=[39m aiService[33m.[
39mevaluateModel([32m'default-model'[39m[33m,[39m 
trainingData)[33m;[39m
     [90m     |[39m                                   
 [31m[1m^[22m[39m
     [90m 310 |[39m       
assert(evaluation[33m.[39maccuracy [33m>=[39m 
[35m0[39m [33m&&[39m evaluation[33m.[39maccuracy 
[33m<=[39m [35m100[39m)[33m;[39m
     [90m 311 |[39m       
assert(evaluation[33m.[39mprecision [33m!==[39m 
undefined)[33m;[39m
     [90m 312 |[39m       
assert(evaluation[33m.[39mrecall [33m!==[39m 
undefined)[33m;[39m[0m

      at Object.evaluateModel 
(api/tests/aiAnalytics.test.js:309:36)

  ظù AIAnalyticsService Tests ظ║ Model Management ظ║ 
should provide model metrics

    TypeError: aiService.getModelMetrics is not a 
function

    [0m [90m 314 |[39m
     [90m 315 |[39m     test([32m'should provide 
model metrics'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 316 |[39m       
[36mconst[39m metrics [33m=[39m aiService[33m.[39m
getModelMetrics([32m'default-model'[39m)[33m;[39m
     [90m     |[39m                                 
[31m[1m^[22m[39m
     [90m 317 |[39m       
assert(metrics[33m.[39maccuracy[33m,[39m 
[32m'Should have accuracy'[39m)[33m;[39m
     [90m 318 |[39m       
assert(metrics[33m.[39mprecision[33m,[39m 
[32m'Should have precision'[39m)[33m;[39m
     [90m 319 |[39m       
assert(metrics[33m.[39mrecall[33m,[39m [32m'Should 
have recall'[39m)[33m;[39m[0m

      at Object.getModelMetrics 
(api/tests/aiAnalytics.test.js:316:33)

  ظù AIAnalyticsService Tests ظ║ Model Management ظ║ 
should handle model versioning

    TypeError: aiService.getModelVersions is not a 
function

    [0m [90m 322 |[39m
     [90m 323 |[39m     test([32m'should handle 
model versioning'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 324 |[39m       
[36mconst[39m versions [33m=[39m aiService[33m.[39
mgetModelVersions([32m'default-model'[39m)[33m;[39m
     [90m     |[39m                                  
[31m[1m^[22m[39m
     [90m 325 |[39m       assert([33mArray[39m[33m.
[39misArray(versions))[33m;[39m
     [90m 326 |[39m       
assert(versions[33m.[39mlength [33m>[39m 
[35m0[39m)[33m;[39m
     [90m 327 |[39m     })[33m;[39m[0m

      at Object.getModelVersions 
(api/tests/aiAnalytics.test.js:324:34)

  ظù AIAnalyticsService Tests ظ║ Correlation Analysis 
ظ║ should find correlations between variables

    TypeError: aiService.findCorrelations is not a 
function

    [0m [90m 333 |[39m   describe([32m'Correlation 
Analysis'[39m[33m,[39m () [33m=>[39m {
     [90m 334 |[39m     test([32m'should find 
correlations between variables'[39m[33m,[39m () 
[33m=>[39m {
    [31m[1m>[22m[39m[90m 335 |[39m       
[36mconst[39m correlations [33m=[39m aiService[33m.
[39mfindCorrelations(trainingData)[33m;[39m
     [90m     |[39m                                   
   [31m[1m^[22m[39m
     [90m 336 |[39m       assert([33mArray[39m[33m.
[39misArray(correlations))[33m;[39m
     [90m 337 |[39m       
correlations[33m.[39mforEach(c [33m=>[39m {
     [90m 338 |[39m         
assert(c[33m.[39mvariable1[33m,[39m [32m'Should 
have first variable'[39m)[33m;[39m[0m

      at Object.findCorrelations 
(api/tests/aiAnalytics.test.js:335:38)

  ظù AIAnalyticsService Tests ظ║ Correlation Analysis 
ظ║ should identify strong correlations

    TypeError: aiService.findCorrelations is not a 
function

    [0m [90m 343 |[39m
     [90m 344 |[39m     test([32m'should identify 
strong correlations'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 345 |[39m       
[36mconst[39m correlations [33m=[39m aiService[33m.
[39mfindCorrelations(trainingData[33m,[39m {
     [90m     |[39m                                   
   [31m[1m^[22m[39m
     [90m 346 |[39m         minStrength[33m:[39m 
[35m0.7[39m[33m,[39m
     [90m 347 |[39m       })[33m;[39m
     [90m 348 |[39m       
correlations[33m.[39mforEach(c [33m=>[39m {[0m

      at Object.findCorrelations 
(api/tests/aiAnalytics.test.js:345:38)

  ظù AIAnalyticsService Tests ظ║ Correlation Analysis 
ظ║ should distinguish causation from correlation

    TypeError: aiService.analyzeRelationship is not a 
function

    [0m [90m 352 |[39m
     [90m 353 |[39m     test([32m'should distinguish 
causation from correlation'[39m[33m,[39m () 
[33m=>[39m {
    [31m[1m>[22m[39m[90m 354 |[39m       
[36mconst[39m analysis [33m=[39m aiService[33m.[39
manalyzeRelationship(trainingData[33m,[39m 
[32m'attendance'[39m[33m,[39m 
[32m'performance'[39m)[33m;[39m
     [90m     |[39m                                  
[31m[1m^[22m[39m
     [90m 355 |[39m       
assert(analysis[33m.[39mcorrelation [33m!==[39m 
undefined)[33m;[39m
     [90m 356 |[39m       
assert(analysis[33m.[39mlikelyCausal [33m!==[39m 
undefined)[33m;[39m
     [90m 357 |[39m     })[33m;[39m[0m

      at Object.analyzeRelationship 
(api/tests/aiAnalytics.test.js:354:34)

  ظù AIAnalyticsService Tests ظ║ Data Quality ظ║ 
should validate data quality

    TypeError: aiService.checkDataQuality is not a 
function

    [0m [90m 363 |[39m   describe([32m'Data 
Quality'[39m[33m,[39m () [33m=>[39m {
     [90m 364 |[39m     test([32m'should validate 
data quality'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 365 |[39m       
[36mconst[39m quality [33m=[39m aiService[33m.[39m
checkDataQuality(trainingData)[33m;[39m
     [90m     |[39m                                 
[31m[1m^[22m[39m
     [90m 366 |[39m       
assert(quality[33m.[39mscore [33m>=[39m [35m0[39m 
[33m&&[39m quality[33m.[39mscore [33m<=[39m 
[35m100[39m)[33m;[39m
     [90m 367 |[39m       
assert(quality[33m.[39missues[33m,[39m [32m'Should 
list issues'[39m)[33m;[39m
     [90m 368 |[39m     })[33m;[39m[0m

      at Object.checkDataQuality 
(api/tests/aiAnalytics.test.js:365:33)

  ظù AIAnalyticsService Tests ظ║ Data Quality ظ║ 
should detect missing values

    TypeError: aiService.checkDataQuality is not a 
function

    [0m [90m 371 |[39m       [36mconst[39m 
incompleteData [33m=[39m 
[[33m...[39mtrainingData[33m,[39m { date[33m:[39m 
[32m'2024-01-06'[39m[33m,[39m attendance[33m:[39m 
[36mnull[39m[33m,[39m performance[33m:[39m 
[35m85[39m }][33m;[39m
     [90m 372 |[39m
    [31m[1m>[22m[39m[90m 373 |[39m       
[36mconst[39m quality [33m=[39m aiService[33m.[39m
checkDataQuality(incompleteData)[33m;[39m
     [90m     |[39m                                 
[31m[1m^[22m[39m
     [90m 374 |[39m       
assert(quality[33m.[39mmissingValueCount [33m>=[39m 
[35m0[39m)[33m;[39m
     [90m 375 |[39m     })[33m;[39m
     [90m 376 |[39m[0m

      at Object.checkDataQuality 
(api/tests/aiAnalytics.test.js:373:33)

  ظù AIAnalyticsService Tests ظ║ Data Quality ظ║ 
should identify outliers

    TypeError: aiService.checkDataQuality is not a 
function

    [0m [90m 378 |[39m       [36mconst[39m 
dataWithOutliers [33m=[39m 
[[33m...[39mtrainingData[33m,[39m { date[33m:[39m 
[32m'2024-01-06'[39m[33m,[39m attendance[33m:[39m 
[35m200[39m[33m,[39m performance[33m:[39m 
[35m250[39m[33m,[39m score[33m:[39m [35m300[39m 
}][33m;[39m
     [90m 379 |[39m
    [31m[1m>[22m[39m[90m 380 |[39m       
[36mconst[39m quality [33m=[39m aiService[33m.[39m
checkDataQuality(dataWithOutliers)[33m;[39m
     [90m     |[39m                                 
[31m[1m^[22m[39m
     [90m 381 |[39m       
assert(quality[33m.[39moutlierCount [33m>=[39m 
[35m0[39m)[33m;[39m
     [90m 382 |[39m     })[33m;[39m
     [90m 383 |[39m   })[33m;[39m[0m

      at Object.checkDataQuality 
(api/tests/aiAnalytics.test.js:380:33)

  ظù AIAnalyticsService Tests ظ║ Error Handling ظ║ 
should handle empty data

    assert(received)

    Expected value to be equal to:
      true
    Received:
      false

    [0m [90m 389 |[39m     test([32m'should handle 
empty data'[39m[33m,[39m () [33m=>[39m {
     [90m 390 |[39m       [36mconst[39m prediction 
[33m=[39m 
aiService[33m.[39mpredictAttendance([])[33m;[39m
    [31m[1m>[22m[39m[90m 391 |[39m       
assert(prediction[33m.[39merror [33m||[39m 
prediction[33m.[39mnextPeriod [33m!==[39m 
undefined)[33m;[39m
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 392 |[39m     })[33m;[39m
     [90m 393 |[39m
     [90m 394 |[39m     test([32m'should handle 
single data point'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.assert 
(api/tests/aiAnalytics.test.js:391:7)

  ظù AIAnalyticsService Tests ظ║ Error Handling ظ║ 
should handle all identical values

    assert(received)

    Expected value to be equal to:
      true
    Received:
      undefined

    Message:
      Should handle constant data

    Difference:

      Comparing two different types of values. Expected 
boolean but received undefined.

    [0m [90m 405 |[39m
     [90m 406 |[39m       [36mconst[39m prediction 
[33m=[39m aiService[33m.[39mpredictAttendance(consta
ntData)[33m;[39m
    [31m[1m>[22m[39m[90m 407 |[39m       
assert(prediction[33m.[39mnextPeriod[33m,[39m 
[32m'Should handle constant data'[39m)[33m;[39m
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 408 |[39m     })[33m;[39m
     [90m 409 |[39m
     [90m 410 |[39m     test([32m'should handle 
extreme values'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.assert 
(api/tests/aiAnalytics.test.js:407:7)

  ظù AIAnalyticsService Tests ظ║ Error Handling ظ║ 
should handle extreme values

    assert(received)

    Expected value to be equal to:
      true
    Received:
      false

    [0m [90m 412 |[39m
     [90m 413 |[39m       [36mconst[39m prediction 
[33m=[39m aiService[33m.[39mpredictAttendance(extrem
eData)[33m;[39m
    [31m[1m>[22m[39m[90m 414 |[39m       
assert(prediction[33m.[39merror [33m||[39m 
prediction[33m.[39mnextPeriod [33m!==[39m 
undefined)[33m;[39m
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 415 |[39m     })[33m;[39m
     [90m 416 |[39m   })[33m;[39m
     [90m 417 |[39m[0m

      at Object.assert 
(api/tests/aiAnalytics.test.js:414:7)

  ظù AIAnalyticsService Tests ظ║ Batch Operations ظ║ 
should process batch predictions

    TypeError: aiService.batchPredict is not a function

    [0m [90m 450 |[39m     test([32m'should process 
batch predictions'[39m[33m,[39m () [33m=>[39m {
     [90m 451 |[39m       [36mconst[39m batches 
[33m=[39m [trainingData[33m,[39m 
trainingData][33m;[39m
    [31m[1m>[22m[39m[90m 452 |[39m       
[36mconst[39m results [33m=[39m 
aiService[33m.[39mbatchPredict(batches[33m,[39m 
[32m'attendance'[39m)[33m;[39m
     [90m     |[39m                                 
[31m[1m^[22m[39m
     [90m 453 |[39m
     [90m 454 |[39m       
assert(results[33m.[39mlength [33m===[39m 
[35m2[39m)[33m;[39m
     [90m 455 |[39m       results[33m.[39mforEach(r 
[33m=>[39m {[0m

      at Object.batchPredict 
(api/tests/aiAnalytics.test.js:452:33)

  ظù AIAnalyticsService Tests ظ║ Batch Operations ظ║ 
should handle mixed batch requests

    TypeError: aiService.batchAnalyze is not a function

    [0m [90m 464 |[39m       ][33m;[39m
     [90m 465 |[39m
    [31m[1m>[22m[39m[90m 466 |[39m       
[36mconst[39m results [33m=[39m 
aiService[33m.[39mbatchAnalyze(requests)[33m;[39m
     [90m     |[39m                                 
[31m[1m^[22m[39m
     [90m 467 |[39m       
assert(results[33m.[39mlength [33m===[39m 
[35m2[39m)[33m;[39m
     [90m 468 |[39m     })[33m;[39m
     [90m 469 |[39m   })[33m;[39m[0m

      at Object.batchAnalyze 
(api/tests/aiAnalytics.test.js:466:33)

FAIL api/tests/advancedReporting.test.js
  ظù AdvancedReportingService Tests ظ║ Template 
Management ظ║ should validate template structure

    TypeError: reportingService.validateTemplate is not 
a function

    [0m [90m 78 |[39m     test([32m'should validate 
template structure'[39m[33m,[39m () [33m=>[39m {
     [90m 79 |[39m       [36mconst[39m 
invalidTemplate [33m=[39m { name[33m:[39m 
[32m'Invalid'[39m }[33m;[39m [90m// Missing 
required fields[39m
    [31m[1m>[22m[39m[90m 80 |[39m       
[36mconst[39m result [33m=[39m reportingService[33m
.[39mvalidateTemplate(invalidTemplate)[33m;[39m
     [90m    |[39m                                    
   [31m[1m^[22m[39m
     [90m 81 |[39m       
assert([33m![39mresult[33m.[39mvalid[33m,[39m 
[32m'Should identify invalid template'[39m)[33m;[39m
     [90m 82 |[39m     })[33m;[39m
     [90m 83 |[39m   })[33m;[39m[0m

      at Object.validateTemplate 
(api/tests/advancedReporting.test.js:80:39)

  ظù AdvancedReportingService Tests ظ║ Report 
Generation ظ║ should generate basic report

    assert(received)

    Expected value to be equal to:
      true
    Received:
      undefined

    Message:
      Report should have content

    Difference:

      Comparing two different types of values. Expected 
boolean but received undefined.

    [0m [90m 89 |[39m     test([32m'should generate 
basic report'[39m[33m,[39m () [33m=>[39m {
     [90m 90 |[39m       [36mconst[39m report 
[33m=[39m reportingService[33m.[39mgenerateReport(re
portTemplate[33m,[39m sampleData)[33m;[39m
    [31m[1m>[22m[39m[90m 91 |[39m       
assert(report[33m.[39mcontent[33m,[39m [32m'Report 
should have content'[39m)[33m;[39m
     [90m    |[39m       [31m[1m^[22m[39m
     [90m 92 |[39m       
assert(report[33m.[39mgeneratedAt[33m,[39m 
[32m'Report should have generation 
timestamp'[39m)[33m;[39m
     [90m 93 |[39m     })[33m;[39m
     [90m 94 |[39m[0m

      at Object.assert 
(api/tests/advancedReporting.test.js:91:7)

  ظù AdvancedReportingService Tests ظ║ Report 
Generation ظ║ should generate report with filters

    assert(received)

    Expected value to be equal to:
      true
    Received:
      undefined

    Message:
      Report should be generated with filters

    Difference:

      Comparing two different types of values. Expected 
boolean but received undefined.

    [0m [90m  97 |[39m         filters[33m:[39m [{ 
field[33m:[39m [32m'department'[39m[33m,[39m 
operator[33m:[39m [32m'equals'[39m[33m,[39m 
value[33m:[39m [32m'Engineering'[39m }][33m,[39m
     [90m  98 |[39m       })[33m;[39m
    [31m[1m>[22m[39m[90m  99 |[39m       
assert(report[33m.[39mcontent[33m,[39m [32m'Report 
should be generated with filters'[39m)[33m;[39m
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 100 |[39m     })[33m;[39m
     [90m 101 |[39m
     [90m 102 |[39m     test([32m'should generate 
report in different formats'[39m[33m,[39m () 
[33m=>[39m {[0m

      at Object.assert 
(api/tests/advancedReporting.test.js:99:7)

  ظù AdvancedReportingService Tests ظ║ Report 
Generation ظ║ should generate report in different 
formats

    assert(received)

    Expected value to be equal to:
      true
    Received:
      undefined

    Message:
      HTML report should be generated

    Difference:

      Comparing two different types of values. Expected 
boolean but received undefined.

    [0m [90m 103 |[39m       [36mconst[39m 
htmlReport [33m=[39m 
reportingService[33m.[39mgenerateReport({ 
[33m...[39mreportTemplate[33m,[39m 
format[33m:[39m [32m'html'[39m }[33m,[39m 
sampleData)[33m;[39m
     [90m 104 |[39m       [36mconst[39m csvReport 
[33m=[39m reportingService[33m.[39mgenerateReport({ 
[33m...[39mreportTemplate[33m,[39m 
format[33m:[39m [32m'csv'[39m }[33m,[39m 
sampleData)[33m;[39m
    [31m[1m>[22m[39m[90m 105 |[39m       
assert(htmlReport[33m.[39mcontent[33m,[39m 
[32m'HTML report should be generated'[39m)[33m;[39m
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 106 |[39m       
assert(csvReport[33m.[39mcontent[33m,[39m [32m'CSV 
report should be generated'[39m)[33m;[39m
     [90m 107 |[39m     })[33m;[39m
     [90m 108 |[39m[0m

      at Object.assert 
(api/tests/advancedReporting.test.js:105:7)

  ظù AdvancedReportingService Tests ظ║ Report 
Generation ظ║ should generate report with aggregations

    assert(received)

    Expected value to be equal to:
      true
    Received:
      undefined

    Message:
      Report should include aggregations

    Difference:

      Comparing two different types of values. Expected 
boolean but received undefined.

    [0m [90m 115 |[39m         }[33m,[39m
     [90m 116 |[39m       })[33m;[39m
    [31m[1m>[22m[39m[90m 117 |[39m       
assert(report[33m.[39maggregations[33m,[39m 
[32m'Report should include 
aggregations'[39m)[33m;[39m
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 118 |[39m     })[33m;[39m
     [90m 119 |[39m
     [90m 120 |[39m     test([32m'should include 
section headers in report'[39m[33m,[39m () 
[33m=>[39m {[0m

      at Object.assert 
(api/tests/advancedReporting.test.js:117:7)

  ظù AdvancedReportingService Tests ظ║ Report 
Generation ظ║ should include section headers in report

    TypeError: Cannot read properties of undefined 
(reading 'toLowerCase')

    [0m [90m 120 |[39m     test([32m'should include 
section headers in report'[39m[33m,[39m () 
[33m=>[39m {
     [90m 121 |[39m       [36mconst[39m report 
[33m=[39m reportingService[33m.[39mgenerateReport(re
portTemplate[33m,[39m sampleData)[33m;[39m
    [31m[1m>[22m[39m[90m 122 |[39m       
[36mconst[39m content [33m=[39m report[33m.[39mcon
tent[33m.[39mtoLowerCase()[33m;[39m
     [90m     |[39m                                   
   [31m[1m^[22m[39m
     [90m 123 |[39m       
assert(content[33m.[39mincludes([32m'monthly'[39m) 
[33m||[39m content[33m.[39mincludes([32m'sales'[39
m)[33m,[39m [32m'Report should contain template 
sections'[39m)[33m;[39m
     [90m 124 |[39m     })[33m;[39m
     [90m 125 |[39m[0m

      at Object.toLowerCase 
(api/tests/advancedReporting.test.js:122:38)

  ظù AdvancedReportingService Tests ظ║ Report 
Generation ظ║ should handle empty data in report

    assert(received)

    Expected value to be equal to:
      true
    Received:
      undefined

    Message:
      Report should be generated even with empty data

    Difference:

      Comparing two different types of values. Expected 
boolean but received undefined.

    [0m [90m 126 |[39m     test([32m'should handle 
empty data in report'[39m[33m,[39m () [33m=>[39m {
     [90m 127 |[39m       [36mconst[39m report 
[33m=[39m reportingService[33m.[39mgenerateReport(re
portTemplate[33m,[39m [])[33m;[39m
    [31m[1m>[22m[39m[90m 128 |[39m       
assert(report[33m.[39mcontent[33m,[39m [32m'Report 
should be generated even with empty 
data'[39m)[33m;[39m
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 129 |[39m     })[33m;[39m
     [90m 130 |[39m   })[33m;[39m
     [90m 131 |[39m[0m

      at Object.assert 
(api/tests/advancedReporting.test.js:128:7)

  ظù AdvancedReportingService Tests ظ║ Report 
Scheduling ظ║ should schedule recurring report

    assert(received)

    Expected value to be equal to:
      true
    Received:
      undefined

    Message:
      Schedule should have an ID

    Difference:

      Comparing two different types of values. Expected 
boolean but received undefined.

    [0m [90m 144 |[39m       }[33m;[39m
     [90m 145 |[39m       [36mconst[39m result 
[33m=[39m reportingService[33m.[39mscheduleReport(sc
hedule)[33m;[39m
    [31m[1m>[22m[39m[90m 146 |[39m       
assert(result[33m.[39mscheduleId[33m,[39m 
[32m'Schedule should have an ID'[39m)[33m;[39m
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 147 |[39m       
assert(result[33m.[39mnextRun[33m,[39m 
[32m'Schedule should have next run 
time'[39m)[33m;[39m
     [90m 148 |[39m     })[33m;[39m
     [90m 149 |[39m[0m

      at Object.assert 
(api/tests/advancedReporting.test.js:146:7)

  ظù AdvancedReportingService Tests ظ║ Report 
Scheduling ظ║ should support different frequencies

    assert(received)

    Expected value to be equal to:
      true
    Received:
      false

    Message:
      Should support daily frequency

    [0m [90m 157 |[39m         }[33m;[39m
     [90m 158 |[39m         [36mconst[39m result 
[33m=[39m reportingService[33m.[39mscheduleReport(sc
hedule)[33m;[39m
    [31m[1m>[22m[39m[90m 159 |[39m         
assert(result[33m.[39mfrequency [33m===[39m 
freq[33m,[39m [32m`Should support ${freq} 
frequency`[39m)[33m;[39m
     [90m     |[39m         [31m[1m^[22m[39m
     [90m 160 |[39m       })[33m;[39m
     [90m 161 |[39m     })[33m;[39m
     [90m 162 |[39m[0m

      at assert 
(api/tests/advancedReporting.test.js:159:9)
          at Array.forEach (<anonymous>)
      at Object.forEach 
(api/tests/advancedReporting.test.js:152:19)

  ظù AdvancedReportingService Tests ظ║ Report 
Scheduling ظ║ should get scheduled report details

    TypeError: reportingService.getSchedule is not a 
function

    [0m [90m 181 |[39m       }[33m;[39m
     [90m 182 |[39m       [36mconst[39m created 
[33m=[39m reportingService[33m.[39mscheduleReport(sc
hedule)[33m;[39m
    [31m[1m>[22m[39m[90m 183 |[39m       
[36mconst[39m retrieved [33m=[39m reportingService[
33m.[39mgetSchedule(created[33m.[39mscheduleId)[33m;
[39m
     [90m     |[39m                                   
       [31m[1m^[22m[39m
     [90m 184 |[39m       
assert(retrieved[33m.[39mfrequency [33m===[39m 
[32m'weekly'[39m)[33m;[39m
     [90m 185 |[39m     })[33m;[39m
     [90m 186 |[39m[0m

      at Object.getSchedule 
(api/tests/advancedReporting.test.js:183:42)

  ظù AdvancedReportingService Tests ظ║ Report 
Scheduling ظ║ should pause scheduled report

    TypeError: reportingService.pauseSchedule is not a 
function

    [0m [90m 192 |[39m       }[33m;[39m
     [90m 193 |[39m       [36mconst[39m created 
[33m=[39m reportingService[33m.[39mscheduleReport(sc
hedule)[33m;[39m
    [31m[1m>[22m[39m[90m 194 |[39m       
[36mconst[39m paused [33m=[39m reportingService[33m
.[39mpauseSchedule(created[33m.[39mscheduleId)[33m;
[39m
     [90m     |[39m                                   
    [31m[1m^[22m[39m
     [90m 195 |[39m       
assert(paused[33m.[39mstatus [33m===[39m 
[32m'paused'[39m)[33m;[39m
     [90m 196 |[39m     })[33m;[39m
     [90m 197 |[39m[0m

      at Object.pauseSchedule 
(api/tests/advancedReporting.test.js:194:39)

  ظù AdvancedReportingService Tests ظ║ Report 
Scheduling ظ║ should resume paused schedule

    TypeError: reportingService.pauseSchedule is not a 
function

    [0m [90m 203 |[39m       }[33m;[39m
     [90m 204 |[39m       [36mconst[39m created 
[33m=[39m reportingService[33m.[39mscheduleReport(sc
hedule)[33m;[39m
    [31m[1m>[22m[39m[90m 205 |[39m       reporting
Service[33m.[39mpauseSchedule(created[33m.[39mschedu
leId)[33m;[39m
     [90m     |[39m                        
[31m[1m^[22m[39m
     [90m 206 |[39m       [36mconst[39m resumed 
[33m=[39m reportingService[33m.[39mresumeSchedule(cr
eated[33m.[39mscheduleId)[33m;[39m
     [90m 207 |[39m       
assert(resumed[33m.[39mstatus [33m===[39m 
[32m'active'[39m)[33m;[39m
     [90m 208 |[39m     })[33m;[39m[0m

      at Object.pauseSchedule 
(api/tests/advancedReporting.test.js:205:24)

  ظù AdvancedReportingService Tests ظ║ Report 
Scheduling ظ║ should delete schedule

    TypeError: reportingService.deleteSchedule is not a 
function

    [0m [90m 215 |[39m       }[33m;[39m
     [90m 216 |[39m       [36mconst[39m created 
[33m=[39m reportingService[33m.[39mscheduleReport(sc
hedule)[33m;[39m
    [31m[1m>[22m[39m[90m 217 |[39m       
[36mconst[39m deleted [33m=[39m reportingService[33
m.[39mdeleteSchedule(created[33m.[39mscheduleId)[33m
;[39m
     [90m     |[39m                                   
     [31m[1m^[22m[39m
     [90m 218 |[39m       assert(deleted[33m,[39m 
[32m'Should return true when schedule is 
deleted'[39m)[33m;[39m
     [90m 219 |[39m     })[33m;[39m
     [90m 220 |[39m   })[33m;[39m[0m

      at Object.deleteSchedule 
(api/tests/advancedReporting.test.js:217:40)

  ظù AdvancedReportingService Tests ظ║ Export 
Functionality ظ║ should export report to CSV

    assert(received)

    Expected value to be equal to:
      true
    Received:
      false

    Message:
      CSV should contain data

    [0m [90m 227 |[39m       [36mconst[39m report 
[33m=[39m reportingService[33m.[39mgenerateReport(re
portTemplate[33m,[39m sampleData)[33m;[39m
     [90m 228 |[39m       [36mconst[39m csv 
[33m=[39m reportingService[33m.[39mexportToCSV(repor
t)[33m;[39m
    [31m[1m>[22m[39m[90m 229 |[39m       
assert(csv[33m.[39mincludes([32m'name'[39m) 
[33m||[39m csv[33m.[39mincludes([32m'department'[3
9m)[33m,[39m [32m'CSV should contain 
data'[39m)[33m;[39m
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 230 |[39m     })[33m;[39m
     [90m 231 |[39m
     [90m 232 |[39m     test([32m'should export 
report to Excel'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.assert 
(api/tests/advancedReporting.test.js:229:7)

  ظù AdvancedReportingService Tests ظ║ Export 
Functionality ظ║ should support partial exports

    assert(received)

    Expected value to be equal to:
      true
    Received:
      false

    Message:
      Export should include selected columns only

    [0m [90m 260 |[39m         columns[33m:[39m 
[[32m'name'[39m[33m,[39m 
[32m'sales'[39m][33m,[39m
     [90m 261 |[39m       })[33m;[39m
    [31m[1m>[22m[39m[90m 262 |[39m       assert(cs
v[33m.[39mincludes([32m'sales'[39m)[33m,[39m 
[32m'Export should include selected columns 
only'[39m)[33m;[39m
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 263 |[39m     })[33m;[39m
     [90m 264 |[39m   })[33m;[39m
     [90m 265 |[39m[0m

      at Object.assert 
(api/tests/advancedReporting.test.js:262:7)

  ظù AdvancedReportingService Tests ظ║ Filtering and 
Aggregation ظ║ should apply filters during report 
generation

    assert(received)

    Expected value to be equal to:
      true
    Received:
      undefined

    Message:
      Report should be generated with filters

    Difference:

      Comparing two different types of values. Expected 
boolean but received undefined.

    [0m [90m 272 |[39m         filters[33m:[39m [{ 
field[33m:[39m [32m'department'[39m[33m,[39m 
operator[33m:[39m [32m'equals'[39m[33m,[39m 
value[33m:[39m [32m'Engineering'[39m }][33m,[39m
     [90m 273 |[39m       })[33m;[39m
    [31m[1m>[22m[39m[90m 274 |[39m       
assert(report[33m.[39mcontent[33m,[39m [32m'Report 
should be generated with filters'[39m)[33m;[39m
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 275 |[39m     })[33m;[39m
     [90m 276 |[39m
     [90m 277 |[39m     test([32m'should calculate 
sum aggregation'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.assert 
(api/tests/advancedReporting.test.js:274:7)

  ظù AdvancedReportingService Tests ظ║ Filtering and 
Aggregation ظ║ should calculate sum aggregation

    TypeError: reportingService.aggregate is not a 
function

    [0m [90m 276 |[39m
     [90m 277 |[39m     test([32m'should calculate 
sum aggregation'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 278 |[39m       
[36mconst[39m result [33m=[39m reportingService[33m
.[39maggregate(sampleData[33m,[39m {
     [90m     |[39m                                   
    [31m[1m^[22m[39m
     [90m 279 |[39m         type[33m:[39m 
[32m'sum'[39m[33m,[39m
     [90m 280 |[39m         field[33m:[39m 
[32m'sales'[39m[33m,[39m
     [90m 281 |[39m       })[33m;[39m[0m

      at Object.aggregate 
(api/tests/advancedReporting.test.js:278:39)

  ظù AdvancedReportingService Tests ظ║ Filtering and 
Aggregation ظ║ should calculate average aggregation

    TypeError: reportingService.aggregate is not a 
function

    [0m [90m 284 |[39m
     [90m 285 |[39m     test([32m'should calculate 
average aggregation'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 286 |[39m       
[36mconst[39m result [33m=[39m reportingService[33m
.[39maggregate(sampleData[33m,[39m {
     [90m     |[39m                                   
    [31m[1m^[22m[39m
     [90m 287 |[39m         type[33m:[39m 
[32m'avg'[39m[33m,[39m
     [90m 288 |[39m         field[33m:[39m 
[32m'sales'[39m[33m,[39m
     [90m 289 |[39m       })[33m;[39m[0m

      at Object.aggregate 
(api/tests/advancedReporting.test.js:286:39)

  ظù AdvancedReportingService Tests ظ║ Filtering and 
Aggregation ظ║ should calculate count aggregation

    TypeError: reportingService.aggregate is not a 
function

    [0m [90m 292 |[39m
     [90m 293 |[39m     test([32m'should calculate 
count aggregation'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 294 |[39m       
[36mconst[39m result [33m=[39m reportingService[33m
.[39maggregate(sampleData[33m,[39m {
     [90m     |[39m                                   
    [31m[1m^[22m[39m
     [90m 295 |[39m         type[33m:[39m 
[32m'count'[39m[33m,[39m
     [90m 296 |[39m       })[33m;[39m
     [90m 297 |[39m       assert(result [33m===[39m 
[35m4[39m[33m,[39m [32m'Count should be 
4'[39m)[33m;[39m[0m

      at Object.aggregate 
(api/tests/advancedReporting.test.js:294:39)

  ظù AdvancedReportingService Tests ظ║ Filtering and 
Aggregation ظ║ should group data for aggregation

    TypeError: reportingService.groupAndAggregate is 
not a function

    [0m [90m 299 |[39m
     [90m 300 |[39m     test([32m'should group data 
for aggregation'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 301 |[39m       
[36mconst[39m grouped [33m=[39m reportingService[33
m.[39mgroupAndAggregate(sampleData[33m,[39m {
     [90m     |[39m                                   
     [31m[1m^[22m[39m
     [90m 302 |[39m         groupBy[33m:[39m 
[32m'department'[39m[33m,[39m
     [90m 303 |[39m         aggregations[33m:[39m {
     [90m 304 |[39m           totalSales[33m:[39m { 
type[33m:[39m [32m'sum'[39m[33m,[39m 
field[33m:[39m [32m'sales'[39m }[33m,[39m[0m

      at Object.groupAndAggregate 
(api/tests/advancedReporting.test.js:301:40)

  ظù AdvancedReportingService Tests ظ║ Charts and 
Visualization ظ║ should generate chart data for bar 
chart

    TypeError: reportingService.generateChartData is 
not a function

    [0m [90m 315 |[39m   describe([32m'Charts and 
Visualization'[39m[33m,[39m () [33m=>[39m {
     [90m 316 |[39m     test([32m'should generate 
chart data for bar chart'[39m[33m,[39m () 
[33m=>[39m {
    [31m[1m>[22m[39m[90m 317 |[39m       
[36mconst[39m chartData [33m=[39m reportingService[
33m.[39mgenerateChartData(sampleData[33m,[39m {
     [90m     |[39m                                   
       [31m[1m^[22m[39m
     [90m 318 |[39m         type[33m:[39m 
[32m'bar'[39m[33m,[39m
     [90m 319 |[39m         xField[33m:[39m 
[32m'name'[39m[33m,[39m
     [90m 320 |[39m         yField[33m:[39m 
[32m'sales'[39m[33m,[39m[0m

      at Object.generateChartData 
(api/tests/advancedReporting.test.js:317:42)

  ظù AdvancedReportingService Tests ظ║ Charts and 
Visualization ظ║ should generate chart data for pie 
chart

    TypeError: reportingService.generateChartData is 
not a function

    [0m [90m 325 |[39m
     [90m 326 |[39m     test([32m'should generate 
chart data for pie chart'[39m[33m,[39m () 
[33m=>[39m {
    [31m[1m>[22m[39m[90m 327 |[39m       
[36mconst[39m chartData [33m=[39m reportingService[
33m.[39mgenerateChartData(sampleData[33m,[39m {
     [90m     |[39m                                   
       [31m[1m^[22m[39m
     [90m 328 |[39m         type[33m:[39m 
[32m'pie'[39m[33m,[39m
     [90m 329 |[39m         field[33m:[39m 
[32m'department'[39m[33m,[39m
     [90m 330 |[39m       })[33m;[39m[0m

      at Object.generateChartData 
(api/tests/advancedReporting.test.js:327:42)

  ظù AdvancedReportingService Tests ظ║ Charts and 
Visualization ظ║ should generate chart data for line 
chart

    TypeError: reportingService.generateChartData is 
not a function

    [0m [90m 333 |[39m
     [90m 334 |[39m     test([32m'should generate 
chart data for line chart'[39m[33m,[39m () 
[33m=>[39m {
    [31m[1m>[22m[39m[90m 335 |[39m       
[36mconst[39m chartData [33m=[39m reportingService[
33m.[39mgenerateChartData(sampleData[33m,[39m {
     [90m     |[39m                                   
       [31m[1m^[22m[39m
     [90m 336 |[39m         type[33m:[39m 
[32m'line'[39m[33m,[39m
     [90m 337 |[39m         xField[33m:[39m 
[32m'date'[39m[33m,[39m
     [90m 338 |[39m         yField[33m:[39m 
[32m'sales'[39m[33m,[39m[0m

      at Object.generateChartData 
(api/tests/advancedReporting.test.js:335:42)

  ظù AdvancedReportingService Tests ظ║ Charts and 
Visualization ظ║ should support chart customization

    TypeError: reportingService.generateChartData is 
not a function

    [0m [90m 342 |[39m
     [90m 343 |[39m     test([32m'should support 
chart customization'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 344 |[39m       
[36mconst[39m chartData [33m=[39m reportingService[
33m.[39mgenerateChartData(sampleData[33m,[39m {
     [90m     |[39m                                   
       [31m[1m^[22m[39m
     [90m 345 |[39m         type[33m:[39m 
[32m'bar'[39m[33m,[39m
     [90m 346 |[39m         xField[33m:[39m 
[32m'name'[39m[33m,[39m
     [90m 347 |[39m         yField[33m:[39m 
[32m'sales'[39m[33m,[39m[0m

      at Object.generateChartData 
(api/tests/advancedReporting.test.js:344:42)

  ظù AdvancedReportingService Tests ظ║ Email 
Distribution ظ║ should send report via email

    assert(received)

    Expected value to be equal to:
      true
    Received:
      undefined

    Message:
      Should return email ID

    Difference:

      Comparing two different types of values. Expected 
boolean but received undefined.

    [0m [90m 365 |[39m         format[33m:[39m 
[32m'pdf'[39m[33m,[39m
     [90m 366 |[39m       })[33m;[39m
    [31m[1m>[22m[39m[90m 367 |[39m       
assert(result[33m.[39memailId[33m,[39m [32m'Should 
return email ID'[39m)[33m;[39m
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 368 |[39m       
assert(result[33m.[39mstatus [33m===[39m 
[32m'sent'[39m)[33m;[39m
     [90m 369 |[39m     })[33m;[39m
     [90m 370 |[39m[0m

      at Object.assert 
(api/tests/advancedReporting.test.js:367:7)

  ظù AdvancedReportingService Tests ظ║ Email 
Distribution ظ║ should send to multiple recipients

    assert(received)

    Expected value to be equal to:
      true
    Received:
      false

    Message:
      Should send to 2 recipients

    [0m [90m 375 |[39m         subject[33m:[39m 
[32m'Monthly Report'[39m[33m,[39m
     [90m 376 |[39m       })[33m;[39m
    [31m[1m>[22m[39m[90m 377 |[39m       
assert(result[33m.[39mrecipientCount [33m===[39m 
[35m2[39m[33m,[39m [32m'Should send to 2 
recipients'[39m)[33m;[39m
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 378 |[39m     })[33m;[39m
     [90m 379 |[39m
     [90m 380 |[39m     test([32m'should include 
attachments in email'[39m[33m,[39m () [33m=>[39m 
{[0m

      at Object.assert 
(api/tests/advancedReporting.test.js:377:7)

  ظù AdvancedReportingService Tests ظ║ Email 
Distribution ظ║ should include attachments in email

    assert(received)

    Expected value to be equal to:
      true
    Received:
      false

    Message:
      Email should be sent with attachments

    [0m [90m 385 |[39m         
attachments[33m:[39m [{ filename[33m:[39m 
[32m'data.csv'[39m[33m,[39m data[33m:[39m 
[32m'csv content'[39m }][33m,[39m
     [90m 386 |[39m       })[33m;[39m
    [31m[1m>[22m[39m[90m 387 |[39m       
assert(result[33m.[39mstatus [33m===[39m 
[32m'sent'[39m[33m,[39m [32m'Email should be sent 
with attachments'[39m)[33m;[39m
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 388 |[39m     })[33m;[39m
     [90m 389 |[39m
     [90m 390 |[39m     test([32m'should support 
email templates'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.assert 
(api/tests/advancedReporting.test.js:387:7)

  ظù AdvancedReportingService Tests ظ║ Email 
Distribution ظ║ should support email templates

    assert(received)

    Expected value to be equal to:
      true
    Received:
      false

    Message:
      Should use email template

    [0m [90m 394 |[39m         templateId[33m:[39m 
[32m'report-email-template'[39m[33m,[39m
     [90m 395 |[39m       })[33m;[39m
    [31m[1m>[22m[39m[90m 396 |[39m       
assert(result[33m.[39mstatus [33m===[39m 
[32m'sent'[39m[33m,[39m [32m'Should use email 
template'[39m)[33m;[39m
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 397 |[39m     })[33m;[39m
     [90m 398 |[39m   })[33m;[39m
     [90m 399 |[39m[0m

      at Object.assert 
(api/tests/advancedReporting.test.js:396:7)

  ظù AdvancedReportingService Tests ظ║ Caching and 
Performance ظ║ should handle large dataset efficiently

    assert(received)

    Expected value to be equal to:
      true
    Received:
      undefined

    Message:
      Report should be generated

    Difference:

      Comparing two different types of values. Expected 
boolean but received undefined.

    [0m [90m 426 |[39m       [36mconst[39m 
duration [33m=[39m [33mDate[39m[33m.[39mnow() 
[33m-[39m start[33m;[39m
     [90m 427 |[39m
    [31m[1m>[22m[39m[90m 428 |[39m       
assert(report[33m.[39mcontent[33m,[39m [32m'Report 
should be generated'[39m)[33m;[39m
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 429 |[39m       assert(duration [33m<[39m 
[35m5000[39m[33m,[39m [32m'Should generate large 
report within 5 seconds'[39m)[33m;[39m
     [90m 430 |[39m     })[33m;[39m
     [90m 431 |[39m   })[33m;[39m[0m

      at Object.assert 
(api/tests/advancedReporting.test.js:428:7)

  ظù AdvancedReportingService Tests ظ║ Error Handling 
ظ║ should handle invalid data format

    TypeError: data.reduce is not a function

    [0m [90m 204 |[39m
     [90m 205 |[39m     [90m// ╪ص╪│╪د╪ذ 
╪د┘┘à╪ز┘ê╪│╪╖[39m
    [31m[1m>[22m[39m[90m 206 |[39m     
[36mconst[39m sum [33m=[39m 
data[33m.[39mreduce((s[33m,[39m d) [33m=>[39m s 
[33m+[39m ([33mNumber[39m(d[33m.[39mvalue) 
[33m||[39m [35m0[39m)[33m,[39m 
[35m0[39m)[33m;[39m
     [90m     |[39m                      
[31m[1m^[22m[39m
     [90m 207 |[39m     stats[33m.[39maverage 
[33m=[39m sum [33m/[39m 
data[33m.[39mlength[33m;[39m
     [90m 208 |[39m
     [90m 209 |[39m     [90m// ╪ص╪│╪د╪ذ 
╪د┘┘ê╪│┘è╪╖[39m[0m

      at AdvancedReportingService.reduce [as 
calculateStatistics] 
(services/advancedReportingService.js:206:22)
      at AdvancedReportingService.calculateStatistics 
[as generateReport] 
(services/advancedReportingService.js:79:30)
      at Object.generateReport 
(api/tests/advancedReporting.test.js:443:39)

  ظù AdvancedReportingService Tests ظ║ Error Handling 
ظ║ should handle missing required fields

    assert(received)

    Expected value to be equal to:
      true
    Received:
      undefined

    Message:
      Should handle missing fields gracefully

    Difference:

      Comparing two different types of values. Expected 
boolean but received undefined.

    [0m [90m 448 |[39m       [36mconst[39m 
invalidTemplate [33m=[39m { name[33m:[39m 
[32m'Report'[39m }[33m;[39m [90m// Missing 
sections[39m
     [90m 449 |[39m       [36mconst[39m result 
[33m=[39m reportingService[33m.[39mgenerateReport(in
validTemplate[33m,[39m sampleData)[33m;[39m
    [31m[1m>[22m[39m[90m 450 |[39m       
assert(result[33m.[39merror [33m||[39m 
result[33m.[39mcontent[33m,[39m [32m'Should handle 
missing fields gracefully'[39m)[33m;[39m
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 451 |[39m     })[33m;[39m
     [90m 452 |[39m
     [90m 453 |[39m     test([32m'should validate 
filter conditions'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.assert 
(api/tests/advancedReporting.test.js:450:7)

  ظù AdvancedReportingService Tests ظ║ Error Handling 
ظ║ should validate filter conditions

    assert(received)

    Expected value to be equal to:
      true
    Received:
      undefined

    Message:
      Should handle invalid filters

    Difference:

      Comparing two different types of values. Expected 
boolean but received undefined.

    [0m [90m 455 |[39m         filters[33m:[39m [{ 
field[33m:[39m [32m'invalid'[39m[33m,[39m 
operator[33m:[39m [32m'equals'[39m[33m,[39m 
value[33m:[39m [32m'test'[39m }][33m,[39m
     [90m 456 |[39m       })[33m;[39m
    [31m[1m>[22m[39m[90m 457 |[39m       
assert(report[33m.[39mcontent[33m,[39m [32m'Should 
handle invalid filters'[39m)[33m;[39m
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 458 |[39m     })[33m;[39m
     [90m 459 |[39m   })[33m;[39m
     [90m 460 |[39m[0m

      at Object.assert 
(api/tests/advancedReporting.test.js:457:7)

  ظù AdvancedReportingService Tests ظ║ Report History 
ظ║ should save report to history

    assert(received)

    Expected value to be equal to:
      true
    Received:
      undefined

    Message:
      Should save to history

    Difference:

      Comparing two different types of values. Expected 
boolean but received undefined.

    [0m [90m 466 |[39m       [36mconst[39m report 
[33m=[39m reportingService[33m.[39mgenerateReport(re
portTemplate[33m,[39m sampleData)[33m;[39m
     [90m 467 |[39m       [36mconst[39m saved 
[33m=[39m reportingService[33m.[39msaveToHistory(rep
ort)[33m;[39m
    [31m[1m>[22m[39m[90m 468 |[39m       
assert(saved[33m.[39mhistoryId[33m,[39m 
[32m'Should save to history'[39m)[33m;[39m
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 469 |[39m     })[33m;[39m
     [90m 470 |[39m
     [90m 471 |[39m     test([32m'should retrieve 
report from history'[39m[33m,[39m () [33m=>[39m 
{[0m

      at Object.assert 
(api/tests/advancedReporting.test.js:468:7)

  ظù AdvancedReportingService Tests ظ║ Report History 
ظ║ should retrieve report from history

    TypeError: reportingService.getFromHistory is not a 
function

    [0m [90m 472 |[39m       [36mconst[39m report 
[33m=[39m reportingService[33m.[39mgenerateReport(re
portTemplate[33m,[39m sampleData)[33m;[39m
     [90m 473 |[39m       [36mconst[39m saved 
[33m=[39m reportingService[33m.[39msaveToHistory(rep
ort)[33m;[39m
    [31m[1m>[22m[39m[90m 474 |[39m       
[36mconst[39m retrieved [33m=[39m reportingService[
33m.[39mgetFromHistory(saved[33m.[39mhistoryId)[33m;
[39m
     [90m     |[39m                                   
       [31m[1m^[22m[39m
     [90m 475 |[39m       
assert(retrieved[33m.[39mid [33m===[39m 
report[33m.[39mid [33m||[39m 
retrieved[33m.[39mcontent [33m===[39m 
report[33m.[39mcontent)[33m;[39m
     [90m 476 |[39m     })[33m;[39m
     [90m 477 |[39m[0m

      at Object.getFromHistory 
(api/tests/advancedReporting.test.js:474:42)

  ظù AdvancedReportingService Tests ظ║ Report History 
ظ║ should delete from history

    assert(received)

    Expected value to be equal to:
      true
    Received:
      false

    Message:
      Should delete from history

    [0m [90m 486 |[39m       [36mconst[39m saved 
[33m=[39m reportingService[33m.[39msaveToHistory(rep
ort)[33m;[39m
     [90m 487 |[39m       [36mconst[39m deleted 
[33m=[39m reportingService[33m.[39mdeleteFromHistory
(saved[33m.[39mhistoryId)[33m;[39m
    [31m[1m>[22m[39m[90m 488 |[39m       
assert(deleted[33m,[39m [32m'Should delete from 
history'[39m)[33m;[39m
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 489 |[39m     })[33m;[39m
     [90m 490 |[39m   })[33m;[39m
     [90m 491 |[39m })[33m;[39m[0m

      at Object.assert 
(api/tests/advancedReporting.test.js:488:7)

FAIL api/tests/projectManagement.test.js
  ظù ProjectManagementService Tests ظ║ Project CRUD 
Operations ظ║ should create project

    assert(received)

    Expected value to be equal to:
      true
    Received:
      undefined

    Message:
      Should have project ID

    Difference:

      Comparing two different types of values. Expected 
boolean but received undefined.

    [0m [90m 31 |[39m     test([32m'should create 
project'[39m[33m,[39m () [33m=>[39m {
     [90m 32 |[39m       [36mconst[39m result 
[33m=[39m projectService[33m.[39mcreateProject(sampl
eProject)[33m;[39m
    [31m[1m>[22m[39m[90m 33 |[39m       
assert(result[33m.[39mid[33m,[39m [32m'Should have 
project ID'[39m)[33m;[39m
     [90m    |[39m       [31m[1m^[22m[39m
     [90m 34 |[39m       assert(result[33m.[39mname 
[33m===[39m sampleProject[33m.[39mname)[33m;[39m
     [90m 35 |[39m       
assert(result[33m.[39mstatus [33m===[39m 
[32m'active'[39m)[33m;[39m
     [90m 36 |[39m     })[33m;[39m[0m

      at Object.assert 
(api/tests/projectManagement.test.js:33:7)

  ظù ProjectManagementService Tests ظ║ Project CRUD 
Operations ظ║ should retrieve project by ID

    TypeError: Cannot read properties of undefined 
(reading 'name')

    [0m [90m 39 |[39m       [36mconst[39m created 
[33m=[39m projectService[33m.[39mcreateProject(sampl
eProject)[33m;[39m
     [90m 40 |[39m       [36mconst[39m retrieved 
[33m=[39m projectService[33m.[39mgetProject(created
[33m.[39mid)[33m;[39m
    [31m[1m>[22m[39m[90m 41 |[39m       
assert(retrieved[33m.[39mname [33m===[39m 
sampleProject[33m.[39mname)[33m;[39m
     [90m    |[39m                        
[31m[1m^[22m[39m
     [90m 42 |[39m     })[33m;[39m
     [90m 43 |[39m
     [90m 44 |[39m     test([32m'should update 
project'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.name 
(api/tests/projectManagement.test.js:41:24)

  ظù ProjectManagementService Tests ظ║ Project CRUD 
Operations ظ║ should update project

    TypeError: Cannot read properties of null (reading 
'status')

    [0m [90m 47 |[39m         status[33m:[39m 
[32m'completed'[39m[33m,[39m
     [90m 48 |[39m       })[33m;[39m
    [31m[1m>[22m[39m[90m 49 |[39m       
assert(updated[33m.[39mstatus [33m===[39m 
[32m'completed'[39m)[33m;[39m
     [90m    |[39m                      
[31m[1m^[22m[39m
     [90m 50 |[39m     })[33m;[39m
     [90m 51 |[39m
     [90m 52 |[39m     test([32m'should list all 
projects'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.status 
(api/tests/projectManagement.test.js:49:22)

  ظù ProjectManagementService Tests ظ║ Project CRUD 
Operations ظ║ should list all projects

    assert(received)

    Expected value to be equal to:
      true
    Received:
      false

    [0m [90m 55 |[39m
     [90m 56 |[39m       [36mconst[39m projects 
[33m=[39m 
projectService[33m.[39mlistProjects()[33m;[39m
    [31m[1m>[22m[39m[90m 57 |[39m       
assert(projects[33m.[39mlength [33m>=[39m 
[35m2[39m)[33m;[39m
     [90m    |[39m       [31m[1m^[22m[39m
     [90m 58 |[39m     })[33m;[39m
     [90m 59 |[39m
     [90m 60 |[39m     test([32m'should delete 
project'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.assert 
(api/tests/projectManagement.test.js:57:7)

  ظù ProjectManagementService Tests ظ║ Project CRUD 
Operations ظ║ should delete project

    assert(received)

    Expected value to be equal to:
      true
    Received:
      false

    Message:
      Should delete project

    [0m [90m 61 |[39m       [36mconst[39m created 
[33m=[39m projectService[33m.[39mcreateProject(sampl
eProject)[33m;[39m
     [90m 62 |[39m       [36mconst[39m deleted 
[33m=[39m projectService[33m.[39mdeleteProject(creat
ed[33m.[39mid)[33m;[39m
    [31m[1m>[22m[39m[90m 63 |[39m       
assert(deleted[33m,[39m [32m'Should delete 
project'[39m)[33m;[39m
     [90m    |[39m       [31m[1m^[22m[39m
     [90m 64 |[39m     })[33m;[39m
     [90m 65 |[39m
     [90m 66 |[39m     test([32m'should validate 
project data'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.assert 
(api/tests/projectManagement.test.js:63:7)

  ظù ProjectManagementService Tests ظ║ Phase 
Management ظ║ should add phase to project

    TypeError: Cannot read properties of undefined 
(reading 'set')

    [0m [90m 629 |[39m     [36mconst[39m phaseId 
[33m=[39m [32m`phase_${Date.now()}`[39m[33m;[39m
     [90m 630 |[39m     [36mconst[39m newPhase 
[33m=[39m { [33m...[39mphase[33m,[39m 
id[33m:[39m phaseId[33m,[39m projectId }[33m;[39m
    [31m[1m>[22m[39m[90m 631 |[39m     [36mthis[
39m[33m.[39mphases[33m.[39m[36mset[39m(phaseId[33
m,[39m newPhase)[33m;[39m
     [90m     |[39m                 
[31m[1m^[22m[39m
     [90m 632 |[39m     [36mreturn[39m 
newPhase[33m;[39m
     [90m 633 |[39m   }
     [90m 634 |[39m[0m

      at ProjectManagementService.set [as addPhase] 
(services/projectManagementService.js:631:17)
      at Object.addPhase 
(api/tests/projectManagement.test.js:79:36)

  ظù ProjectManagementService Tests ظ║ Phase 
Management ظ║ should list project phases

    TypeError: Cannot read properties of undefined 
(reading 'set')

    [0m [90m 629 |[39m     [36mconst[39m phaseId 
[33m=[39m [32m`phase_${Date.now()}`[39m[33m;[39m
     [90m 630 |[39m     [36mconst[39m newPhase 
[33m=[39m { [33m...[39mphase[33m,[39m 
id[33m:[39m phaseId[33m,[39m projectId }[33m;[39m
    [31m[1m>[22m[39m[90m 631 |[39m     [36mthis[
39m[33m.[39mphases[33m.[39m[36mset[39m(phaseId[33
m,[39m newPhase)[33m;[39m
     [90m     |[39m                 
[31m[1m^[22m[39m
     [90m 632 |[39m     [36mreturn[39m 
newPhase[33m;[39m
     [90m 633 |[39m   }
     [90m 634 |[39m[0m

      at ProjectManagementService.set [as addPhase] 
(services/projectManagementService.js:631:17)
      at Object.addPhase 
(api/tests/projectManagement.test.js:91:22)

  ظù ProjectManagementService Tests ظ║ Phase 
Management ظ║ should update phase

    TypeError: Cannot read properties of undefined 
(reading 'set')

    [0m [90m 629 |[39m     [36mconst[39m phaseId 
[33m=[39m [32m`phase_${Date.now()}`[39m[33m;[39m
     [90m 630 |[39m     [36mconst[39m newPhase 
[33m=[39m { [33m...[39mphase[33m,[39m 
id[33m:[39m phaseId[33m,[39m projectId }[33m;[39m
    [31m[1m>[22m[39m[90m 631 |[39m     [36mthis[
39m[33m.[39mphases[33m.[39m[36mset[39m(phaseId[33
m,[39m newPhase)[33m;[39m
     [90m     |[39m                 
[31m[1m^[22m[39m
     [90m 632 |[39m     [36mreturn[39m 
newPhase[33m;[39m
     [90m 633 |[39m   }
     [90m 634 |[39m[0m

      at ProjectManagementService.set [as addPhase] 
(services/projectManagementService.js:631:17)
      at Object.addPhase 
(api/tests/projectManagement.test.js:103:36)

  ظù ProjectManagementService Tests ظ║ Phase 
Management ظ║ should delete phase

    TypeError: Cannot read properties of undefined 
(reading 'set')

    [0m [90m 629 |[39m     [36mconst[39m phaseId 
[33m=[39m [32m`phase_${Date.now()}`[39m[33m;[39m
     [90m 630 |[39m     [36mconst[39m newPhase 
[33m=[39m { [33m...[39mphase[33m,[39m 
id[33m:[39m phaseId[33m,[39m projectId }[33m;[39m
    [31m[1m>[22m[39m[90m 631 |[39m     [36mthis[
39m[33m.[39mphases[33m.[39m[36mset[39m(phaseId[33
m,[39m newPhase)[33m;[39m
     [90m     |[39m                 
[31m[1m^[22m[39m
     [90m 632 |[39m     [36mreturn[39m 
newPhase[33m;[39m
     [90m 633 |[39m   }
     [90m 634 |[39m[0m

      at ProjectManagementService.set [as addPhase] 
(services/projectManagementService.js:631:17)
      at Object.addPhase 
(api/tests/projectManagement.test.js:118:36)

  ظù ProjectManagementService Tests ظ║ Phase 
Management ظ║ should calculate phase progress

    TypeError: Cannot read properties of undefined 
(reading 'set')

    [0m [90m 629 |[39m     [36mconst[39m phaseId 
[33m=[39m [32m`phase_${Date.now()}`[39m[33m;[39m
     [90m 630 |[39m     [36mconst[39m newPhase 
[33m=[39m { [33m...[39mphase[33m,[39m 
id[33m:[39m phaseId[33m,[39m projectId }[33m;[39m
    [31m[1m>[22m[39m[90m 631 |[39m     [36mthis[
39m[33m.[39mphases[33m.[39m[36mset[39m(phaseId[33
m,[39m newPhase)[33m;[39m
     [90m     |[39m                 
[31m[1m^[22m[39m
     [90m 632 |[39m     [36mreturn[39m 
newPhase[33m;[39m
     [90m 633 |[39m   }
     [90m 634 |[39m[0m

      at ProjectManagementService.set [as addPhase] 
(services/projectManagementService.js:631:17)
      at Object.addPhase 
(api/tests/projectManagement.test.js:128:36)

  ظù ProjectManagementService Tests ظ║ Task 
Management ظ║ should create task in project

    assert(received)

    Expected value to be equal to:
      true
    Received:
      false

    [0m [90m 150 |[39m
     [90m 151 |[39m       
assert(task[33m.[39mid[33m,[39m [32m'Should have 
task ID'[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 152 |[39m       
assert(task[33m.[39mstatus [33m===[39m 
[32m'open'[39m)[33m;[39m
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 153 |[39m     })[33m;[39m
     [90m 154 |[39m
     [90m 155 |[39m     test([32m'should update task 
status'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.assert 
(api/tests/projectManagement.test.js:152:7)

  ظù ProjectManagementService Tests ظ║ Task 
Management ظ║ should update task status

    assert(received)

    Expected value to be equal to:
      true
    Received:
      false

    [0m [90m 161 |[39m       [36mconst[39m updated 
[33m=[39m projectService[33m.[39mupdateTaskStatus(pr
oject[33m.[39mid[33m,[39m 
task[33m.[39mid[33m,[39m 
[32m'in_progress'[39m)[33m;[39m
     [90m 162 |[39m
    [31m[1m>[22m[39m[90m 163 |[39m       
assert(updated[33m.[39mstatus [33m===[39m 
[32m'in_progress'[39m)[33m;[39m
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 164 |[39m     })[33m;[39m
     [90m 165 |[39m
     [90m 166 |[39m     test([32m'should list 
project tasks'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.assert 
(api/tests/projectManagement.test.js:163:7)

  ظù ProjectManagementService Tests ظ║ Task 
Management ظ║ should list project tasks

    TypeError: projectService.getTasks is not a function

    [0m [90m 169 |[39m       projectService[33m.[39
maddTask(project[33m.[39mid[33m,[39m { 
title[33m:[39m [32m'Task 2'[39m })[33m;[39m
     [90m 170 |[39m
    [31m[1m>[22m[39m[90m 171 |[39m       
[36mconst[39m tasks [33m=[39m projectService[33m.[
39mgetTasks(project[33m.[39mid)[33m;[39m
     [90m     |[39m                                   
 [31m[1m^[22m[39m
     [90m 172 |[39m       
assert(tasks[33m.[39mlength [33m>=[39m 
[35m2[39m)[33m;[39m
     [90m 173 |[39m     })[33m;[39m
     [90m 174 |[39m[0m

      at Object.getTasks 
(api/tests/projectManagement.test.js:171:36)

  ظù ProjectManagementService Tests ظ║ Task 
Management ظ║ should filter tasks by status

    TypeError: projectService.getTasks is not a function

    [0m [90m 179 |[39m       projectService[33m.[39
maddTask(project[33m.[39mid[33m,[39m { 
title[33m:[39m [32m'Task 2'[39m })[33m;[39m
     [90m 180 |[39m
    [31m[1m>[22m[39m[90m 181 |[39m       
[36mconst[39m openTasks [33m=[39m projectService[33
m.[39mgetTasks(project[33m.[39mid[33m,[39m { 
status[33m:[39m [32m'open'[39m })[33m;[39m
     [90m     |[39m                                   
     [31m[1m^[22m[39m
     [90m 182 |[39m       
assert(openTasks[33m.[39mlength [33m>=[39m 
[35m1[39m)[33m;[39m
     [90m 183 |[39m     })[33m;[39m
     [90m 184 |[39m[0m

      at Object.getTasks 
(api/tests/projectManagement.test.js:181:40)

  ظù ProjectManagementService Tests ظ║ Task 
Management ظ║ should assign tasks

    assert(received)

    Expected value to be equal to:
      true
    Received:
      false

    [0m [90m 191 |[39m       [36mconst[39m 
assigned [33m=[39m projectService[33m.[39massignTask
(project[33m.[39mid[33m,[39m 
task[33m.[39mid[33m,[39m 
[32m'user@example.com'[39m)[33m;[39m
     [90m 192 |[39m
    [31m[1m>[22m[39m[90m 193 |[39m       
assert(assigned[33m.[39massignee [33m===[39m 
[32m'user@example.com'[39m)[33m;[39m
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 194 |[39m     })[33m;[39m
     [90m 195 |[39m
     [90m 196 |[39m     test([32m'should set task 
dependencies'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.assert 
(api/tests/projectManagement.test.js:193:7)

  ظù ProjectManagementService Tests ظ║ Task 
Management ظ║ should set task dependencies

    TypeError: projectService.addTaskDependency is not 
a function

    [0m [90m 199 |[39m       [36mconst[39m task2 
[33m=[39m projectService[33m.[39maddTask(project[33
m.[39mid[33m,[39m { title[33m:[39m [32m'Task 
2'[39m })[33m;[39m
     [90m 200 |[39m
    [31m[1m>[22m[39m[90m 201 |[39m       
[36mconst[39m result [33m=[39m projectService[33m.
[39maddTaskDependency(project[33m.[39mid[33m,[39m 
task2[33m.[39mid[33m,[39m 
task1[33m.[39mid)[33m;[39m
     [90m     |[39m                                   
  [31m[1m^[22m[39m
     [90m 202 |[39m
     [90m 203 |[39m       assert(result[33m.[39mdepe
ndencies[33m.[39mincludes(task1[33m.[39mid))[33m;[
39m
     [90m 204 |[39m     })[33m;[39m[0m

      at Object.addTaskDependency 
(api/tests/projectManagement.test.js:201:37)

  ظù ProjectManagementService Tests ظ║ Task 
Management ظ║ should calculate task progress

    TypeError: projectService.getTaskProgress is not a 
function

    [0m [90m 214 |[39m       })[33m;[39m
     [90m 215 |[39m
    [31m[1m>[22m[39m[90m 216 |[39m       
[36mconst[39m progress [33m=[39m projectService[33m
.[39mgetTaskProgress(project[33m.[39mid[33m,[39m 
task[33m.[39mid)[33m;[39m
     [90m     |[39m                                   
    [31m[1m^[22m[39m
     [90m 217 |[39m       
assert(progress[33m.[39mpercentage [33m===[39m 
[35m50[39m)[33m;[39m
     [90m 218 |[39m     })[33m;[39m
     [90m 219 |[39m[0m

      at Object.getTaskProgress 
(api/tests/projectManagement.test.js:216:39)

  ظù ProjectManagementService Tests ظ║ Task 
Management ظ║ should delete task

    TypeError: projectService.deleteTask is not a 
function

    [0m [90m 222 |[39m       [36mconst[39m task 
[33m=[39m projectService[33m.[39maddTask(project[33
m.[39mid[33m,[39m { title[33m:[39m [32m'Task 
1'[39m })[33m;[39m
     [90m 223 |[39m
    [31m[1m>[22m[39m[90m 224 |[39m       
[36mconst[39m deleted [33m=[39m projectService[33m.
[39mdeleteTask(project[33m.[39mid[33m,[39m 
task[33m.[39mid)[33m;[39m
     [90m     |[39m                                   
   [31m[1m^[22m[39m
     [90m 225 |[39m       assert(deleted)[33m;[39m
     [90m 226 |[39m     })[33m;[39m
     [90m 227 |[39m   })[33m;[39m[0m

      at Object.deleteTask 
(api/tests/projectManagement.test.js:224:38)

  ظù ProjectManagementService Tests ظ║ Resource 
Allocation ظ║ should allocate resource to project

    assert(received)

    Expected value to be equal to:
      true
    Received:
      undefined

    Message:
      Should have resource ID

    Difference:

      Comparing two different types of values. Expected 
boolean but received undefined.

    [0m [90m 240 |[39m       })[33m;[39m
     [90m 241 |[39m
    [31m[1m>[22m[39m[90m 242 |[39m       
assert(resource[33m.[39mid[33m,[39m [32m'Should 
have resource ID'[39m)[33m;[39m
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 243 |[39m     })[33m;[39m
     [90m 244 |[39m
     [90m 245 |[39m     test([32m'should get project 
resources'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.assert 
(api/tests/projectManagement.test.js:242:7)

  ظù ProjectManagementService Tests ظ║ Resource 
Allocation ظ║ should get project resources

    TypeError: projectService.getResources is not a 
function

    [0m [90m 250 |[39m       })[33m;[39m
     [90m 251 |[39m
    [31m[1m>[22m[39m[90m 252 |[39m       
[36mconst[39m resources [33m=[39m projectService[33
m.[39mgetResources(project[33m.[39mid)[33m;[39m
     [90m     |[39m                                   
     [31m[1m^[22m[39m
     [90m 253 |[39m       
assert(resources[33m.[39mlength [33m>[39m 
[35m0[39m)[33m;[39m
     [90m 254 |[39m     })[33m;[39m
     [90m 255 |[39m[0m

      at Object.getResources 
(api/tests/projectManagement.test.js:252:40)

  ظù ProjectManagementService Tests ظ║ Resource 
Allocation ظ║ should update resource allocation

    TypeError: projectService.updateResourceAllocation 
is not a function

    [0m [90m 261 |[39m       })[33m;[39m
     [90m 262 |[39m
    [31m[1m>[22m[39m[90m 263 |[39m       
[36mconst[39m updated [33m=[39m projectService[33m.
[39mupdateResourceAllocation(project[33m.[39mid[33m,
[39m resource[33m.[39mid[33m,[39m 
[35m100[39m)[33m;[39m
     [90m     |[39m                                   
   [31m[1m^[22m[39m
     [90m 264 |[39m
     [90m 265 |[39m       
assert(updated[33m.[39mallocation [33m===[39m 
[35m100[39m)[33m;[39m
     [90m 266 |[39m     })[33m;[39m[0m

      at Object.updateResourceAllocation 
(api/tests/projectManagement.test.js:263:38)

  ظù ProjectManagementService Tests ظ║ Resource 
Allocation ظ║ should check resource availability

    TypeError: projectService.checkResourceAvailability 
is not a function

    [0m [90m 273 |[39m       })[33m;[39m
     [90m 274 |[39m
    [31m[1m>[22m[39m[90m 275 |[39m       
[36mconst[39m available [33m=[39m projectService[33
m.[39mcheckResourceAvailability(project[33m.[39mid)[
33m;[39m
     [90m     |[39m                                   
     [31m[1m^[22m[39m
     [90m 276 |[39m       
assert(available[33m.[39mtotalAllocation [33m<=[39m 
[35m100[39m)[33m;[39m
     [90m 277 |[39m     })[33m;[39m
     [90m 278 |[39m[0m

      at Object.checkResourceAvailability 
(api/tests/projectManagement.test.js:275:40)

  ظù ProjectManagementService Tests ظ║ Resource 
Allocation ظ║ should remove resource from project

    TypeError: projectService.removeResource is not a 
function

    [0m [90m 283 |[39m       })[33m;[39m
     [90m 284 |[39m
    [31m[1m>[22m[39m[90m 285 |[39m       
[36mconst[39m removed [33m=[39m projectService[33m.
[39mremoveResource(project[33m.[39mid[33m,[39m 
resource[33m.[39mid)[33m;[39m
     [90m     |[39m                                   
   [31m[1m^[22m[39m
     [90m 286 |[39m       assert(removed)[33m;[39m
     [90m 287 |[39m     })[33m;[39m
     [90m 288 |[39m   })[33m;[39m[0m

      at Object.removeResource 
(api/tests/projectManagement.test.js:285:38)

  ظù ProjectManagementService Tests ظ║ Risk 
Management ظ║ should identify project risks

    TypeError: projectService.addRisk is not a function

    [0m [90m 294 |[39m     test([32m'should 
identify project risks'[39m[33m,[39m () [33m=>[39m 
{
     [90m 295 |[39m       [36mconst[39m project 
[33m=[39m projectService[33m.[39mcreateProject(sampl
eProject)[33m;[39m
    [31m[1m>[22m[39m[90m 296 |[39m       
[36mconst[39m risk [33m=[39m projectService[33m.[3
9maddRisk(project[33m.[39mid[33m,[39m {
     [90m     |[39m                                   
[31m[1m^[22m[39m
     [90m 297 |[39m         title[33m:[39m 
[32m'Budget Risk'[39m[33m,[39m
     [90m 298 |[39m         description[33m:[39m 
[32m'Potential budget overrun'[39m[33m,[39m
     [90m 299 |[39m         probability[33m:[39m 
[32m'high'[39m[33m,[39m[0m

      at Object.addRisk 
(api/tests/projectManagement.test.js:296:35)

  ظù ProjectManagementService Tests ظ║ Risk 
Management ظ║ should get risk severity

    TypeError: projectService.addRisk is not a function

    [0m [90m 307 |[39m     test([32m'should get 
risk severity'[39m[33m,[39m () [33m=>[39m {
     [90m 308 |[39m       [36mconst[39m project 
[33m=[39m projectService[33m.[39mcreateProject(sampl
eProject)[33m;[39m
    [31m[1m>[22m[39m[90m 309 |[39m       
[36mconst[39m risk [33m=[39m projectService[33m.[3
9maddRisk(project[33m.[39mid[33m,[39m {
     [90m     |[39m                                   
[31m[1m^[22m[39m
     [90m 310 |[39m         title[33m:[39m 
[32m'Risk'[39m[33m,[39m
     [90m 311 |[39m         probability[33m:[39m 
[32m'high'[39m[33m,[39m
     [90m 312 |[39m         impact[33m:[39m 
[32m'high'[39m[33m,[39m[0m

      at Object.addRisk 
(api/tests/projectManagement.test.js:309:35)

  ظù ProjectManagementService Tests ظ║ Risk 
Management ظ║ should update risk status

    TypeError: projectService.addRisk is not a function

    [0m [90m 319 |[39m     test([32m'should update 
risk status'[39m[33m,[39m () [33m=>[39m {
     [90m 320 |[39m       [36mconst[39m project 
[33m=[39m projectService[33m.[39mcreateProject(sampl
eProject)[33m;[39m
    [31m[1m>[22m[39m[90m 321 |[39m       
[36mconst[39m risk [33m=[39m projectService[33m.[3
9maddRisk(project[33m.[39mid[33m,[39m {
     [90m     |[39m                                   
[31m[1m^[22m[39m
     [90m 322 |[39m         title[33m:[39m 
[32m'Risk'[39m[33m,[39m
     [90m 323 |[39m       })[33m;[39m
     [90m 324 |[39m[0m

      at Object.addRisk 
(api/tests/projectManagement.test.js:321:35)

  ظù ProjectManagementService Tests ظ║ Risk 
Management ظ║ should list project risks

    TypeError: projectService.addRisk is not a function

    [0m [90m 330 |[39m     test([32m'should list 
project risks'[39m[33m,[39m () [33m=>[39m {
     [90m 331 |[39m       [36mconst[39m project 
[33m=[39m projectService[33m.[39mcreateProject(sampl
eProject)[33m;[39m
    [31m[1m>[22m[39m[90m 332 |[39m       projectSe
rvice[33m.[39maddRisk(project[33m.[39mid[33m,[39m 
{ title[33m:[39m [32m'Risk 1'[39m })[33m;[39m
     [90m     |[39m                      
[31m[1m^[22m[39m
     [90m 333 |[39m       projectService[33m.[39madd
Risk(project[33m.[39mid[33m,[39m { title[33m:[39m 
[32m'Risk 2'[39m })[33m;[39m
     [90m 334 |[39m
     [90m 335 |[39m       [36mconst[39m risks 
[33m=[39m projectService[33m.[39mgetRisks(project[3
3m.[39mid)[33m;[39m[0m

      at Object.addRisk 
(api/tests/projectManagement.test.js:332:22)

  ظù ProjectManagementService Tests ظ║ Risk 
Management ظ║ should delete risk

    TypeError: projectService.addRisk is not a function

    [0m [90m 339 |[39m     test([32m'should delete 
risk'[39m[33m,[39m () [33m=>[39m {
     [90m 340 |[39m       [36mconst[39m project 
[33m=[39m projectService[33m.[39mcreateProject(sampl
eProject)[33m;[39m
    [31m[1m>[22m[39m[90m 341 |[39m       
[36mconst[39m risk [33m=[39m projectService[33m.[3
9maddRisk(project[33m.[39mid[33m,[39m { 
title[33m:[39m [32m'Risk'[39m })[33m;[39m
     [90m     |[39m                                   
[31m[1m^[22m[39m
     [90m 342 |[39m
     [90m 343 |[39m       [36mconst[39m deleted 
[33m=[39m projectService[33m.[39mdeleteRisk(project
[33m.[39mid[33m,[39m risk[33m.[39mid)[33m;[39m
     [90m 344 |[39m       
assert(deleted)[33m;[39m[0m

      at Object.addRisk 
(api/tests/projectManagement.test.js:341:35)

  ظù ProjectManagementService Tests ظ║ Budget 
Management ظ║ should create project budget

    TypeError: projectService.createBudget is not a 
function

    [0m [90m 352 |[39m     test([32m'should create 
project budget'[39m[33m,[39m () [33m=>[39m {
     [90m 353 |[39m       [36mconst[39m project 
[33m=[39m projectService[33m.[39mcreateProject(sampl
eProject)[33m;[39m
    [31m[1m>[22m[39m[90m 354 |[39m       
[36mconst[39m budget [33m=[39m projectService[33m.
[39mcreateBudget(project[33m.[39mid[33m,[39m {
     [90m     |[39m                                   
  [31m[1m^[22m[39m
     [90m 355 |[39m         totalAmount[33m:[39m 
[35m100000[39m[33m,[39m
     [90m 356 |[39m         currency[33m:[39m 
[32m'USD'[39m[33m,[39m
     [90m 357 |[39m       })[33m;[39m[0m

      at Object.createBudget 
(api/tests/projectManagement.test.js:354:37)

  ظù ProjectManagementService Tests ظ║ Budget 
Management ظ║ should record budget expense

    TypeError: projectService.createBudget is not a 
function

    [0m [90m 363 |[39m     test([32m'should record 
budget expense'[39m[33m,[39m () [33m=>[39m {
     [90m 364 |[39m       [36mconst[39m project 
[33m=[39m projectService[33m.[39mcreateProject(sampl
eProject)[33m;[39m
    [31m[1m>[22m[39m[90m 365 |[39m       
[36mconst[39m budget [33m=[39m projectService[33m.
[39mcreateBudget(project[33m.[39mid[33m,[39m {
     [90m     |[39m                                   
  [31m[1m^[22m[39m
     [90m 366 |[39m         totalAmount[33m:[39m 
[35m100000[39m[33m,[39m
     [90m 367 |[39m       })[33m;[39m
     [90m 368 |[39m[0m

      at Object.createBudget 
(api/tests/projectManagement.test.js:365:37)

  ظù ProjectManagementService Tests ظ║ Budget 
Management ظ║ should calculate budget usage

    TypeError: projectService.createBudget is not a 
function

    [0m [90m 378 |[39m     test([32m'should 
calculate budget usage'[39m[33m,[39m () [33m=>[39m 
{
     [90m 379 |[39m       [36mconst[39m project 
[33m=[39m projectService[33m.[39mcreateProject(sampl
eProject)[33m;[39m
    [31m[1m>[22m[39m[90m 380 |[39m       
[36mconst[39m budget [33m=[39m projectService[33m.
[39mcreateBudget(project[33m.[39mid[33m,[39m {
     [90m     |[39m                                   
  [31m[1m^[22m[39m
     [90m 381 |[39m         totalAmount[33m:[39m 
[35m100000[39m[33m,[39m
     [90m 382 |[39m       })[33m;[39m
     [90m 383 |[39m[0m

      at Object.createBudget 
(api/tests/projectManagement.test.js:380:37)

  ظù ProjectManagementService Tests ظ║ Budget 
Management ظ║ should get budget report

    TypeError: projectService.createBudget is not a 
function

    [0m [90m 393 |[39m     test([32m'should get 
budget report'[39m[33m,[39m () [33m=>[39m {
     [90m 394 |[39m       [36mconst[39m project 
[33m=[39m projectService[33m.[39mcreateProject(sampl
eProject)[33m;[39m
    [31m[1m>[22m[39m[90m 395 |[39m       
[36mconst[39m budget [33m=[39m projectService[33m.
[39mcreateBudget(project[33m.[39mid[33m,[39m {
     [90m     |[39m                                   
  [31m[1m^[22m[39m
     [90m 396 |[39m         totalAmount[33m:[39m 
[35m100000[39m[33m,[39m
     [90m 397 |[39m       })[33m;[39m
     [90m 398 |[39m[0m

      at Object.createBudget 
(api/tests/projectManagement.test.js:395:37)

  ظù ProjectManagementService Tests ظ║ Budget 
Management ظ║ should warn on budget overrun

    TypeError: projectService.createBudget is not a 
function

    [0m [90m 409 |[39m     test([32m'should warn on 
budget overrun'[39m[33m,[39m () [33m=>[39m {
     [90m 410 |[39m       [36mconst[39m project 
[33m=[39m projectService[33m.[39mcreateProject(sampl
eProject)[33m;[39m
    [31m[1m>[22m[39m[90m 411 |[39m       
[36mconst[39m budget [33m=[39m projectService[33m.
[39mcreateBudget(project[33m.[39mid[33m,[39m {
     [90m     |[39m                                   
  [31m[1m^[22m[39m
     [90m 412 |[39m         totalAmount[33m:[39m 
[35m100000[39m[33m,[39m
     [90m 413 |[39m       })[33m;[39m
     [90m 414 |[39m[0m

      at Object.createBudget 
(api/tests/projectManagement.test.js:411:37)

  ظù ProjectManagementService Tests ظ║ Project 
Progress & Analytics ظ║ should calculate project 
progress

    TypeError: projectService.getProjectProgress is not 
a function

    [0m [90m 437 |[39m       projectService[33m.[39
mupdateTaskStatus(project[33m.[39mid[33m,[39m 
task1[33m.[39mid[33m,[39m 
[32m'completed'[39m)[33m;[39m
     [90m 438 |[39m
    [31m[1m>[22m[39m[90m 439 |[39m       
[36mconst[39m progress [33m=[39m projectService[33m
.[39mgetProjectProgress(project[33m.[39mid)[33m;[39
m
     [90m     |[39m                                   
    [31m[1m^[22m[39m
     [90m 440 |[39m       
assert(progress[33m.[39mpercentage [33m===[39m 
[35m50[39m)[33m;[39m
     [90m 441 |[39m     })[33m;[39m
     [90m 442 |[39m[0m

      at Object.getProjectProgress 
(api/tests/projectManagement.test.js:439:39)

  ظù ProjectManagementService Tests ظ║ Project 
Progress & Analytics ظ║ should get project timeline

    TypeError: Cannot read properties of undefined 
(reading 'set')

    [0m [90m 629 |[39m     [36mconst[39m phaseId 
[33m=[39m [32m`phase_${Date.now()}`[39m[33m;[39m
     [90m 630 |[39m     [36mconst[39m newPhase 
[33m=[39m { [33m...[39mphase[33m,[39m 
id[33m:[39m phaseId[33m,[39m projectId }[33m;[39m
    [31m[1m>[22m[39m[90m 631 |[39m     [36mthis[
39m[33m.[39mphases[33m.[39m[36mset[39m(phaseId[33
m,[39m newPhase)[33m;[39m
     [90m     |[39m                 
[31m[1m^[22m[39m
     [90m 632 |[39m     [36mreturn[39m 
newPhase[33m;[39m
     [90m 633 |[39m   }
     [90m 634 |[39m[0m

      at ProjectManagementService.set [as addPhase] 
(services/projectManagementService.js:631:17)
      at Object.addPhase 
(api/tests/projectManagement.test.js:445:22)

  ظù ProjectManagementService Tests ظ║ Project 
Progress & Analytics ظ║ should generate project report

    assert(received)

    Expected value to be equal to:
      true
    Received:
      undefined

    Message:
      Should have summary

    Difference:

      Comparing two different types of values. Expected 
boolean but received undefined.

    [0m [90m 458 |[39m
     [90m 459 |[39m       [36mconst[39m report 
[33m=[39m projectService[33m.[39mgenerateProjectRepo
rt(project[33m.[39mid)[33m;[39m
    [31m[1m>[22m[39m[90m 460 |[39m       
assert(report[33m.[39msummary[33m,[39m [32m'Should 
have summary'[39m)[33m;[39m
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 461 |[39m       
assert(report[33m.[39mmetrics[33m,[39m [32m'Should 
have metrics'[39m)[33m;[39m
     [90m 462 |[39m     })[33m;[39m
     [90m 463 |[39m[0m

      at Object.assert 
(api/tests/projectManagement.test.js:460:7)

  ظù ProjectManagementService Tests ظ║ Project 
Progress & Analytics ظ║ should get project health 
status

    TypeError: projectService.getProjectHealth is not a 
function

    [0m [90m 465 |[39m       [36mconst[39m project 
[33m=[39m projectService[33m.[39mcreateProject(sampl
eProject)[33m;[39m
     [90m 466 |[39m
    [31m[1m>[22m[39m[90m 467 |[39m       
[36mconst[39m health [33m=[39m projectService[33m.
[39mgetProjectHealth(project[33m.[39mid)[33m;[39m
     [90m     |[39m                                   
  [31m[1m^[22m[39m
     [90m 468 |[39m       
assert([[32m'green'[39m[33m,[39m 
[32m'yellow'[39m[33m,[39m [32m'red'[39m][33m.[39
mincludes(health[33m.[39mstatus))[33m;[39m
     [90m 469 |[39m     })[33m;[39m
     [90m 470 |[39m   })[33m;[39m[0m

      at Object.getProjectHealth 
(api/tests/projectManagement.test.js:467:37)

  ظù ProjectManagementService Tests ظ║ Project 
Closure ظ║ should close completed project

    assert(received)

    Expected value to be equal to:
      true
    Received:
      false

    [0m [90m 482 |[39m       })[33m;[39m
     [90m 483 |[39m
    [31m[1m>[22m[39m[90m 484 |[39m       
assert(closed[33m.[39mstatus [33m===[39m 
[32m'closed'[39m)[33m;[39m
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 485 |[39m     })[33m;[39m
     [90m 486 |[39m
     [90m 487 |[39m     test([32m'should generate 
closure report'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.assert 
(api/tests/projectManagement.test.js:484:7)

  ظù ProjectManagementService Tests ظ║ Project 
Closure ظ║ should generate closure report

    TypeError: projectService.getClosureReport is not a 
function

    [0m [90m 489 |[39m       projectService[33m.[39
maddTask(project[33m.[39mid[33m,[39m { 
title[33m:[39m [32m'Task 1'[39m })[33m;[39m
     [90m 490 |[39m
    [31m[1m>[22m[39m[90m 491 |[39m       
[36mconst[39m report [33m=[39m projectService[33m.
[39mgetClosureReport(project[33m.[39mid)[33m;[39m
     [90m     |[39m                                   
  [31m[1m^[22m[39m
     [90m 492 |[39m       
assert(report[33m.[39mcompletionPercentage 
[33m>=[39m [35m0[39m)[33m;[39m
     [90m 493 |[39m       
assert(report[33m.[39mlessons[33m,[39m [32m'Should 
have lessons learned'[39m)[33m;[39m
     [90m 494 |[39m     })[33m;[39m[0m

      at Object.getClosureReport 
(api/tests/projectManagement.test.js:491:37)

  ظù ProjectManagementService Tests ظ║ Project 
Closure ظ║ should archive closed project

    TypeError: projectService.archiveProject is not a 
function

    [0m [90m 498 |[39m       projectService[33m.[39
mcloseProject(project[33m.[39mid[33m,[39m 
{})[33m;[39m
     [90m 499 |[39m
    [31m[1m>[22m[39m[90m 500 |[39m       
[36mconst[39m archived [33m=[39m projectService[33m
.[39marchiveProject(project[33m.[39mid)[33m;[39m
     [90m     |[39m                                   
    [31m[1m^[22m[39m
     [90m 501 |[39m       
assert(archived[33m.[39mstatus [33m===[39m 
[32m'archived'[39m)[33m;[39m
     [90m 502 |[39m     })[33m;[39m
     [90m 503 |[39m   })[33m;[39m[0m

      at Object.archiveProject 
(api/tests/projectManagement.test.js:500:39)

  ظù ProjectManagementService Tests ظ║ Error Handling 
ظ║ should handle missing required fields

    assert(received)

    Expected value to be equal to:
      true
    Received:
      undefined

    Message:
      Should handle missing fields

    Difference:

      Comparing two different types of values. Expected 
boolean but received undefined.

    [0m [90m 517 |[39m         [90m// Missing other 
required fields[39m
     [90m 518 |[39m       })[33m;[39m
    [31m[1m>[22m[39m[90m 519 |[39m       
assert(result[33m.[39merror [33m||[39m 
result[33m.[39mid[33m,[39m [32m'Should handle 
missing fields'[39m)[33m;[39m
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 520 |[39m     })[33m;[39m
     [90m 521 |[39m
     [90m 522 |[39m     test([32m'should prevent 
tasks without project'[39m[33m,[39m () [33m=>[39m 
{[0m

      at Object.assert 
(api/tests/projectManagement.test.js:519:7)

  ظù ProjectManagementService Tests ظ║ Error Handling 
ظ║ should prevent tasks without project

    assert(received)

    Expected value to be equal to:
      true
    Received:
      undefined

    Message:
      Should prevent invalid project

    Difference:

      Comparing two different types of values. Expected 
boolean but received undefined.

    [0m [90m 522 |[39m     test([32m'should prevent 
tasks without project'[39m[33m,[39m () [33m=>[39m {
     [90m 523 |[39m       [36mconst[39m result 
[33m=[39m projectService[33m.[39maddTask([32m'inval
id-id'[39m[33m,[39m { title[33m:[39m 
[32m'Task'[39m })[33m;[39m
    [31m[1m>[22m[39m[90m 524 |[39m       
assert(result[33m.[39merror[33m,[39m [32m'Should 
prevent invalid project'[39m)[33m;[39m
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 525 |[39m     })[33m;[39m
     [90m 526 |[39m   })[33m;[39m
     [90m 527 |[39m[0m

      at Object.assert 
(api/tests/projectManagement.test.js:524:7)

  ظù ProjectManagementService Tests ظ║ Performance 
ظ║ should handle large number of tasks

    TypeError: projectService.getTasks is not a function

    [0m [90m 539 |[39m       [36mconst[39m 
duration [33m=[39m [33mDate[39m[33m.[39mnow() 
[33m-[39m start[33m;[39m
     [90m 540 |[39m
    [31m[1m>[22m[39m[90m 541 |[39m       
[36mconst[39m tasks [33m=[39m projectService[33m.[
39mgetTasks(project[33m.[39mid)[33m;[39m
     [90m     |[39m                                   
 [31m[1m^[22m[39m
     [90m 542 |[39m       
assert(tasks[33m.[39mlength [33m===[39m 
[35m1000[39m)[33m;[39m
     [90m 543 |[39m       assert(duration [33m<[39m 
[35m10000[39m[33m,[39m [32m'Should handle 1000 
tasks within 10 seconds'[39m)[33m;[39m
     [90m 544 |[39m     })[33m;[39m[0m

      at Object.getTasks 
(api/tests/projectManagement.test.js:541:36)


Test Suites: 4 failed, 1 skipped, 29 passed, 33 of 34 
total
Tests:       127 failed, 37 skipped, 764 passed, 928 
total
Snapshots:   0 total
Time:        11.872 s
Ran all test suites.
