# โ ุฅููุงู ุฅุนุฏุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช

# Database Setup Completion Guide

## ๐ ุงูุญุงูุฉ ุงูุญุงููุฉ - Current Status

### โ ุงูููุชูู - Completed

- [x] ุฅูุดุงุก Mongoose Schemas (5 models)
- [x] ุฅูุดุงุก ูุธุงู ุงููุณุฎ ุงูุงุญุชูุงุทู ุงูุชููุงุฆู
- [x] ุชูุซูู ุดุงูู

### โณ ุงูุฎุทูุงุช ุงููุชุจููุฉ - Remaining Steps

- [ ] **ุฑุจุท ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงููุนููุฉ** (5 ุฏูุงุฆู)
- [ ] **ุงุณุชูุฑุงุฏ ุงูุจูุงูุงุช ุงูุฃูููุฉ** (10 ุฏูุงุฆู)
- [ ] **ุงุฎุชุจุงุฑ ุงูุงุชุตุงู** (5 ุฏูุงุฆู)

---

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ - Next Steps

### ุงูุฎุทูุฉ 1: ุงุฎุชูุงุฑ ูุงุนุฏุฉ ุงูุจูุงูุงุช (ุฏูููุชุงู)

ูุฏูู ุฎูุงุฑุงู:

#### ุงูุฎูุงุฑ A: Hostinger Cloud (ุงูููุตู ุจู)

```env
MONGODB_URI=mongodb://<username>:<password>@<hostinger-host>:27017/alawael-erp
```

**ุงููููุฒุงุช:**

- โ ูุฏูู ุงุณุชุถุงูุฉ ุฌุงูุฒุฉ
- โ ุณุฑูุน ูููุซูู
- โ ุฏุนู ููู

**ุงูุฎุทูุงุช:**

1. ุชุณุฌูู ุงูุฏุฎูู ุฅูู Hostinger
2. ุงูุชูู ุฅูู ูุณู Databases
3. ุฃูุดุฆ ูุงุนุฏุฉ MongoDB ุฌุฏูุฏุฉ
4. ุงุญุตู ุนูู ุฑุงุจุท ุงูุงุชุตุงู

#### ุงูุฎูุงุฑ B: MongoDB Atlas (ูุฌุงูู)

```env
MONGODB_URI=mongodb+srv://<username>:<password>@cluster0.xxxxx.mongodb.net/alawael-erp?retryWrites=true&w=majority
```

**ุงููููุฒุงุช:**

- โ ูุฌุงูู ุชูุงูุงู (512 MB)
- โ ุฅุนุฏุงุฏ ุณุฑูุน (5 ุฏูุงุฆู)
- โ ุนุงููู ููุณุชูุฑ

**ุงูุฎุทูุงุช:**

1. ุงุฐูุจ ุฅูู mongodb.com/cloud/atlas
2. ุณุฌู ุญุณุงุจ ูุฌุงูู
3. ุฃูุดุฆ Cluster ูุฌุงูู
4. ุงุญุตู ุนูู ุฑุงุจุท ุงูุงุชุตุงู

---

### ุงูุฎุทูุฉ 2: ุชุญุฏูุซ ุงูุฅุนุฏุงุฏุงุช (ุฏูููุฉ ูุงุญุฏุฉ)

ุงูุชุญ ููู `.env` ูู ูุฌูุฏ `backend`:

```env
# ุชุบููุฑ ูู In-Memory ุฅูู MongoDB
USE_MOCK_DB=false

# ุฅุถุงูุฉ ุฑุงุจุท ูุงุนุฏุฉ ุงูุจูุงูุงุช (ุงุฎุชุฑ ูุงุญุฏุงู)
MONGODB_URI=mongodb+srv://username:password@cluster.mongodb.net/alawael-erp

# ุงูุฅุนุฏุงุฏุงุช ุงูุฃุฎุฑู (ูุง ุชุบูุฑูุง)
NODE_ENV=development
PORT=3001
JWT_SECRET=your-secret-key-here
```

---

### ุงูุฎุทูุฉ 3: ุชุซุจูุช Mongoose (ุฅุฐุง ูู ููู ูุซุจุชุงู)

```bash
cd backend
npm install mongoose
```

---

### ุงูุฎุทูุฉ 4: ุฅูุดุงุก script ููุจูุงูุงุช ุงูุฃูููุฉ

ุณุฃูุดุฆ ููู `backend/scripts/seed.js`:

```javascript
// ุณูุชู ุฅูุดุงุคู ุชููุงุฆูุงู ูู ุงูุฎุทูุฉ ุงูุชุงููุฉ
```

---

### ุงูุฎุทูุฉ 5: ุชุดุบูู ุงููุธุงู ูุน ูุงุนุฏุฉ ุงูุจูุงูุงุช

```bash
# ูู terminal ุฌุฏูุฏ
cd backend
npm start

# ูุฌุจ ุฃู ุชุฑู:
# โ Connected to MongoDB: alawael-erp
# ๐ Server is running on port 3001
```

---

## ๐งช ุงุฎุชุจุงุฑ ุงููุธุงู

### 1. ุงุฎุชุจุงุฑ ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช

```bash
# ุงูุชุญ browser ูุงุฐูุจ ุฅูู:
http://localhost:3001/api/organizations

# ูุฌุจ ุฃู ุชุฑู:
{
  "success": true,
  "data": [],
  "message": "Organizations retrieved"
}
```

### 2. ุงุฎุชุจุงุฑ ุฅุถุงูุฉ ุจูุงูุงุช

```bash
# ุงุณุชุฎุฏู Postman ุฃู curl:
curl -X POST http://localhost:3001/api/organizations \
  -H "Content-Type: application/json" \
  -d '{
    "organizationId": "ORG001",
    "name": "ููุธูุฉ ุงูุฃูุงุฆู",
    "chairman": {
      "name": "ุฑุฆูุณ ูุฌูุณ ุงูุฅุฏุงุฑุฉ",
      "title": "Chairman",
      "email": "chairman@alawael.com"
    }
  }'
```

### 3. ุงุฎุชุจุงุฑ ุจูุงุก ุงูุจูุงูุงุช

```bash
# 1. ุฃุถู ุจูุงูุงุช (ููุง ูู ุงูุฃุนูู)
# 2. ุฃููู ุงูุณูุฑูุฑ (Ctrl+C)
# 3. ุดุบู ุงูุณูุฑูุฑ ูุฑุฉ ุฃุฎุฑู (npm start)
# 4. ุงุทูุจ ุงูุจูุงูุงุช ูุฑุฉ ุฃุฎุฑู:

curl http://localhost:3001/api/organizations

# ูุฌุจ ุฃู ุชุฑู ุงูุจูุงูุงุช ููุฌูุฏุฉ! โ
```

---

## ๐ฆ ูุธุงู ุงููุณุฎ ุงูุงุญุชูุงุทู

### ุฅูุดุงุก ูุณุฎุฉ ุงุญุชูุงุทูุฉ ูุฏููุฉ

```bash
cd backend
node scripts/backup.js
```

### ุนุฑุถ ุฌููุน ุงููุณุฎ ุงูุงุญุชูุงุทูุฉ

```bash
node scripts/backup.js list
```

### ุฌุฏููุฉ ูุณุฎ ุงุญุชูุงุทูุฉ ููููุฉ (Windows)

```powershell
# ุฅูุดุงุก task ูู Windows Task Scheduler
$action = New-ScheduledTaskAction -Execute "node" -Argument "C:\path\to\backend\scripts\backup.js"
$trigger = New-ScheduledTaskTrigger -Daily -At 3am
Register-ScheduledTask -Action $action -Trigger $trigger -TaskName "ERP Backup" -Description "Daily ERP database backup"
```

---

## ๐ ุงูุจูุงูุงุช ุงููุญููุธุฉ - Data Structure

ุจุนุฏ ุงูุฑุจุทุ ุณูุชู ุญูุธ:

### 1. ุงููุคุณุณุฉ (Organization)

- ูุนูููุงุช ุงููุคุณุณุฉ ุงูุฃุณุงุณูุฉ
- 9 ุฃูุณุงู ุฑุฆูุณูุฉ
- 4 ูุฑูุน
- ูุคุดุฑุงุช ุงูุฃุฏุงุก (KPIs)
- ุงููุณุงุฑุงุช ุงููุธูููุฉ
- ุจุฑุงูุฌ ุงูุชุฏุฑูุจ (200+ ุจุฑูุงูุฌ)

### 2. ุงูููุธููู (Employees)

- ูุนูููุงุช ุดุฎุตูุฉ
- ุจูุงูุงุช ุงูุชูุธูู
- ุงูุฑูุงุชุจ ูุงูุจุฏูุงุช
- ุชููููุงุช ุงูุฃุฏุงุก
- ุณุฌูุงุช ุงูุชุฏุฑูุจ
- ุงูุญุถูุฑ ูุงูุบูุงุจ

### 3. ุชูุจุคุงุช ุงูุฐูุงุก ุงูุงุตุทูุงุนู (AI Predictions)

- ุชูุจุคุงุช ุงูุชุฑููุฉ
- ุชูุจุคุงุช ุฏูุฑุงู ุงูููุธููู
- ุชุฃุซูุฑ ุงูุชุฏุฑูุจ
- ุชููุนุงุช ุงูููุฒุงููุฉ
- ุชููููุงุช ุงูุฃุฏุงุก

### 4. ุณุฌูุงุช ุงููุธุงู (System Logs)

- ุฌููุน ุงูุนูููุงุช
- ุชุณุฌููุงุช ุงูุฏุฎูู
- ุงูุชุบููุฑุงุช ูู ุงูุจูุงูุงุช
- ุงูุฃุฎุทุงุก ูุงูุชุญุฐูุฑุงุช

### 5. ุงููุณุฎ ุงูุงุญุชูุงุทูุฉ (Backups)

- ูุนูููุงุช ุงููุณุฎ ุงูุงุญุชูุงุทูุฉ
- ุงูุชูุงุฑูุฎ ูุงูุฃุญุฌุงู
- ุงูุญุงูุฉ ูุงูุฃุฎุทุงุก

---

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก - Troubleshooting

### ูุดููุฉ: ูุง ูููู ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช

```
Error: connect ECONNREFUSED
```

**ุงูุญููู:**

1. ุชุฃูุฏ ูู ุตุญุฉ `MONGODB_URI` ูู `.env`
2. ุชุฃูุฏ ูู `USE_MOCK_DB=false`
3. ุชุฃูุฏ ูู ุงูุงุชุตุงู ุจุงูุฅูุชุฑูุช (ุฅุฐุง ููุช ุชุณุชุฎุฏู MongoDB Atlas)
4. ุชุญูู ูู ุงุณู ุงููุณุชุฎุฏู ููููุฉ ุงููุฑูุฑ

### ูุดููุฉ: ุงูุจูุงูุงุช ูุง ุชูุญูุธ

```
Data is lost after restart
```

**ุงูุญููู:**

1. ุชุฃูุฏ ูู `USE_MOCK_DB=false` ูู `.env`
2. ุชุฃูุฏ ูู ุฅุนุงุฏุฉ ุชุดุบูู ุงูุณูุฑูุฑ ุจุนุฏ ุงูุชุบููุฑ
3. ุชุญูู ูู logs:

```bash
# ูุฌุจ ุฃู ุชุฑู
โ Connected to MongoDB: alawael-erp
# ูููุณ
โ๏ธ Using In-Memory Database
```

### ูุดููุฉ: Mongoose not found

```
Error: Cannot find module 'mongoose'
```

**ุงูุญู:**

```bash
cd backend
npm install mongoose
npm start
```

---

## ๐ ุงูุฃุฏุงุก - Performance

### ุจุนุฏ ุฑุจุท ูุงุนุฏุฉ ุงูุจูุงูุงุช:

| ุงููููุงุณ             | In-Memory            | MongoDB       |
| ------------------- | -------------------- | ------------- |
| ุณุฑุนุฉ ุงููุฑุงุกุฉ        | โกโกโกโกโก ุณุฑูุน ุฌุฏุงู | โกโกโกโก ุณุฑูุน |
| ุณุฑุนุฉ ุงููุชุงุจุฉ        | โกโกโกโกโก ุณุฑูุน ุฌุฏุงู | โกโกโก ุฌูุฏ    |
| ุจูุงุก ุงูุจูุงูุงุช       | โ ุชูุญุฐู             | โ ุฏุงุฆู       |
| ุญุฌู ุงูุจูุงูุงุช        | ูุญุฏูุฏ ุจุงูุฐุงูุฑุฉ       | ุบูุฑ ูุญุฏูุฏ     |
| ุงููุณุฎ ุงูุงุญุชูุงุทู     | โ ุบูุฑ ูููู          | โ ุชููุงุฆู     |
| ุงูุงุณุชุนูุงูุงุช ุงููุนูุฏุฉ | โ๏ธ ูุญุฏูุฏ             | โ ูุชูุฏู      |

---

## ๐ฏ ุงูุฎุทูุฉ ุงูุชุงููุฉ ุจุนุฏ ุงูุฅููุงู

ุจุนุฏ ุฅููุงู ุฅุนุฏุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุชุ ุณููุชูู ุฅูู:

### ุงูุฃููููุฉ 2: ูุธุงู ุงููุณุฎ ุงูุงุญุชูุงุทู ุงููุฌุฏูู (2 ุณุงุนุฉ)

- โ Script ููุฌูุฏ ุจุงููุนู (`backend/scripts/backup.js`)
- โณ ุฅุนุฏุงุฏ ุงูุฌุฏููุฉ ุงูุชููุงุฆูุฉ
- โณ ุงุฎุชุจุงุฑ ุงูุงุณุชุฑุฌุงุน (Restore)

### ุงูุฃููููุฉ 3: ุงูุฏูููู ูุงูู SSL (ุณุงุนุฉ ูุงุญุฏุฉ)

- ุฅุนุฏุงุฏ ุงูุฏูููู
- ุชุซุจูุช SSL certificate
- ุฑุจุท ุงููุธุงู

### ุงูุฃููููุฉ 4: ุงูุฃูุงู ุงููุชูุฏู (1-2 ููู)

- 2FA authentication
- ุชุดููุฑ ุงูุจูุงูุงุช ุงูุญุณุงุณุฉ
- ุชุนุฒูุฒ ุงูุฃุฐููุงุช

---

## ๐ ุงูุฏุนู - Support

ุฅุฐุง ูุงุฌูุช ุฃู ูุดููุฉ:

1. **ุฑุงุฌุน ุงูู logs:**

```bash
cd backend
npm start
# ุงูุฑุฃ ุงูุฑุณุงุฆู ุจุนูุงูุฉ
```

2. **ุชุญูู ูู ุงูุฅุนุฏุงุฏุงุช:**

```bash
cat backend/.env
# ูุฌุจ ุฃู ูููู USE_MOCK_DB=false
```

3. **ุงุฎุชุจุฑ ุงูุงุชุตุงู:**

```bash
# ุงูุชุญ MongoDB Compass ุฃู Mongo Shell
mongo "your-mongodb-uri"
```

---

## โ Checklist ููุชุฃูุฏ ูู ุงูุฅููุงู

ูุจู ุงูุงูุชูุงู ููุฎุทูุฉ ุงูุชุงููุฉุ ุชุฃูุฏ ูู:

- [ ] `USE_MOCK_DB=false` ูู `.env`
- [ ] `MONGODB_URI` ูุญุฏุซ ุจุฑุงุจุท ุตุญูุญ
- [ ] ุงูุณูุฑูุฑ ูุนูู ุจุฏูู ุฃุฎุทุงุก
- [ ] ุงูุจูุงูุงุช ุชูุญูุธ ุจุนุฏ ุฅุนุงุฏุฉ ุงูุชุดุบูู
- [ ] ุงููุณุฎ ุงูุงุญุชูุงุทู ูุนูู (`node scripts/backup.js`)
- [ ] ุฌููุน ุงูู 18 AI endpoints ุชุนูู

---

## ๐ ุงูุฎูุงุตุฉ

**ุงูููุช ุงููุชููุน:** 20 ุฏูููุฉ ุฅุฌูุงูุงู

- 2 ุฏูููุฉ: ุงุฎุชูุงุฑ ูุงุนุฏุฉ ุงูุจูุงูุงุช
- 5 ุฏูุงุฆู: ุฅุนุฏุงุฏ MongoDB
- 1 ุฏูููุฉ: ุชุญุฏูุซ `.env`
- 2 ุฏูููุฉ: ุชุซุจูุช Mongoose
- 5 ุฏูุงุฆู: ุชุดุบูู ูุงุฎุชุจุงุฑ
- 5 ุฏูุงุฆู: ุงุฎุชุจุงุฑ ุงููุณุฎ ุงูุงุญุชูุงุทู

**ุจุนุฏ ุงูุฅููุงู:**

- โ ุงูุจูุงูุงุช ูุญููุธุฉ ุจุดูู ุฏุงุฆู
- โ ูุณุฎ ุงุญุชูุงุทูุฉ ุชููุงุฆูุฉ
- โ ุฌุงูุฒ ููุฅูุชุงุฌ (ูู ูุงุญูุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช)

---

**๐ ุขุฎุฑ ุชุญุฏูุซ:** 13 ููุงูุฑ 2026
**๐จโ๐ป ุงูุญุงูุฉ:** ุฌุงูุฒ ููุชูููุฐ
