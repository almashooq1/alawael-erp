#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
إضافة المهارات البيئية والسلامة
"""

from app import app, db
from models import SkillCategory, Skill

def add_environmental_safety_skills():
    """إضافة المهارات البيئية والسلامة للنظام"""
    
    with app.app_context():
        # إنشاء فئة المهارات البيئية والسلامة
        env_category = SkillCategory.query.filter_by(category_name="المهارات البيئية والسلامة").first()
        if not env_category:
            env_category = SkillCategory(
                category_name="المهارات البيئية والسلامة",
                description="مهارات الوعي البيئي والسلامة الشخصية والتعامل مع البيئة المحيطة",
                icon="fas fa-shield-alt",
                color="#28a745",
                display_order=10
            )
            db.session.add(env_category)
            db.session.commit()
            print("تم إنشاء فئة المهارات البيئية والسلامة")
        
        # قائمة المهارات البيئية والسلامة
        env_skills = [
            # مهارات السلامة الشخصية
            {
                "skill_name": "يتجنب الأشياء الساخنة عند التحذير",
                "description": "قدرة الطفل على فهم مفهوم الخطر وتجنب الأشياء الساخنة",
                "evaluation_criteria": "يبتعد عن الأشياء الساخنة عندما يقال له 'ساخن' أو 'خطر'",
                "success_indicators": "الوعي بالخطر، اتباع التحذيرات، السلامة الشخصية"
            },
            {
                "skill_name": "يمسك بيد الكبار عند عبور الطريق",
                "description": "قدرة الطفل على فهم أهمية الأمان عند عبور الطرق",
                "evaluation_criteria": "يمد يده أو يقبل مسك يد الكبار عند الاقتراب من الطريق",
                "success_indicators": "الوعي بالسلامة، التعاون، فهم الخطر"
            },
            {
                "skill_name": "يبقى قريباً من الكبار في الأماكن المزدحمة",
                "description": "قدرة الطفل على البقاء آمناً في البيئات المزدحمة",
                "evaluation_criteria": "يبقى بالقرب من الكبار في المتاجر أو الأماكن العامة",
                "success_indicators": "الوعي بالأمان، اتباع التوجيهات، عدم الضياع"
            },
            {
                "skill_name": "يتعرف على الأشخاص المألوفين وغير المألوفين",
                "description": "قدرة الطفل على التمييز بين الأشخاص المعروفين والغرباء",
                "evaluation_criteria": "يظهر راحة مع الأشخاص المألوفين وحذر مع الغرباء",
                "success_indicators": "التمييز الاجتماعي، الوعي بالأمان، الحذر المناسب"
            },
            {
                "skill_name": "يطلب المساعدة عند الشعور بالخطر أو الخوف",
                "description": "قدرة الطفل على التواصل عند الحاجة للمساعدة",
                "evaluation_criteria": "يبكي أو ينادي أو يذهب للكبار عند الشعور بالخطر",
                "success_indicators": "طلب المساعدة، التواصل في الأزمات، الوعي بالحاجة للدعم"
            },
            
            # مهارات الوعي البيئي
            {
                "skill_name": "يلاحظ التغيرات في الطقس (مطر، شمس، برد)",
                "description": "قدرة الطفل على ملاحظة والتعبير عن حالة الطقس",
                "evaluation_criteria": "يشير أو يعلق على المطر أو الشمس أو البرد",
                "success_indicators": "الملاحظة، الوعي البيئي، التعبير عن المشاهدات"
            },
            {
                "skill_name": "يظهر اهتماماً بالحيوانات والنباتات",
                "description": "قدرة الطفل على إظهار الفضول والاهتمام بالطبيعة",
                "evaluation_criteria": "يشير أو يقترب من الحيوانات والنباتات بفضول",
                "success_indicators": "حب الطبيعة، الفضول، الاهتمام البيئي"
            },
            {
                "skill_name": "يتعامل مع النباتات بلطف",
                "description": "قدرة الطفل على التعامل الرقيق مع النباتات والزهور",
                "evaluation_criteria": "يلمس النباتات بلطف ولا يقطفها أو يكسرها عمداً",
                "success_indicators": "اللطف، احترام الطبيعة، التعامل الرقيق"
            },
            {
                "skill_name": "يساعد في سقي النباتات بإشراف",
                "description": "قدرة الطفل على المشاركة في رعاية النباتات",
                "evaluation_criteria": "يساعد في حمل إناء الماء أو سقي النباتات مع الكبار",
                "success_indicators": "المسؤولية، العناية، المشاركة في الأنشطة البيئية"
            },
            {
                "skill_name": "يلاحظ الحيوانات في البيئة المحيطة",
                "description": "قدرة الطفل على ملاحظة والتعرف على الحيوانات",
                "evaluation_criteria": "يشير أو يسمي الحيوانات التي يراها (قطط، كلاب، طيور)",
                "success_indicators": "الملاحظة، التعرف على الحيوانات، الوعي البيئي"
            },
            
            # مهارات النظافة البيئية
            {
                "skill_name": "يضع القمامة في المكان المخصص بالتذكير",
                "description": "قدرة الطفل على المساهمة في نظافة البيئة",
                "evaluation_criteria": "يضع القمامة في سلة المهملات عندما يذكره الكبار",
                "success_indicators": "النظافة، المسؤولية البيئية، اتباع التوجيهات"
            },
            {
                "skill_name": "يتجنب اللعب في الأماكن المتسخة",
                "description": "قدرة الطفل على تمييز الأماكن النظيفة من المتسخة",
                "evaluation_criteria": "يتجنب اللعب في الطين أو الأماكن المتسخة بالتوجيه",
                "success_indicators": "الوعي بالنظافة، التمييز، السلوك الصحي"
            },
            {
                "skill_name": "يساعد في تنظيف الألعاب بعد اللعب",
                "description": "قدرة الطفل على المشاركة في ترتيب وتنظيف البيئة",
                "evaluation_criteria": "يساعد في وضع الألعاب في مكانها أو تنظيفها",
                "success_indicators": "المسؤولية، التنظيم، المشاركة في التنظيف"
            },
            {
                "skill_name": "يغسل يديه بعد اللعب في الخارج",
                "description": "قدرة الطفل على ربط النظافة الشخصية بالأنشطة الخارجية",
                "evaluation_criteria": "يقبل أو يطلب غسل اليدين بعد اللعب في الخارج",
                "success_indicators": "النظافة الشخصية، الوعي الصحي، العادات الجيدة"
            },
            {
                "skill_name": "يفهم مفهوم 'نظيف' و'متسخ'",
                "description": "قدرة الطفل على التمييز بين النظيف والمتسخ",
                "evaluation_criteria": "يشير أو يعلق على الأشياء النظيفة والمتسخة",
                "success_indicators": "التمييز، الوعي بالنظافة، المفاهيم الأساسية"
            },
            
            # مهارات التعامل مع الطوارئ
            {
                "skill_name": "يعرف اسمه الكامل",
                "description": "قدرة الطفل على تذكر وقول اسمه الكامل في حالات الطوارئ",
                "evaluation_criteria": "يقول اسمه الأول واسم العائلة عند السؤال",
                "success_indicators": "الهوية الشخصية، الذاكرة، المعلومات الأساسية"
            },
            {
                "skill_name": "يتعرف على منزله من الخارج",
                "description": "قدرة الطفل على التعرف على منزله أو مكان إقامته",
                "evaluation_criteria": "يشير أو يتعرف على منزله عند رؤيته",
                "success_indicators": "التعرف على المكان، الذاكرة المكانية، الأمان"
            },
            {
                "skill_name": "يبقى في مكان واحد عندما يطلب منه ذلك",
                "description": "قدرة الطفل على البقاء في مكان محدد للسلامة",
                "evaluation_criteria": "يبقى في مكان محدد عندما يقال له 'ابق هنا'",
                "success_indicators": "اتباع التعليمات، الانضباط، الوعي بالأمان"
            },
            {
                "skill_name": "يصدر أصوات عالية عند الحاجة للمساعدة",
                "description": "قدرة الطفل على جذب الانتباه في حالات الطوارئ",
                "evaluation_criteria": "يصرخ أو يبكي بصوت عالي عند الشعور بالخطر أو الضياع",
                "success_indicators": "طلب المساعدة، التواصل في الأزمات، الاستغاثة"
            },
            {
                "skill_name": "يذهب إلى شخص بالغ عند الحاجة للمساعدة",
                "description": "قدرة الطفل على البحث عن المساعدة من الكبار",
                "evaluation_criteria": "يذهب إلى أقرب شخص بالغ عند الحاجة للمساعدة",
                "success_indicators": "طلب المساعدة، التمييز بين الكبار والأطفال، السلوك الآمن"
            },
            
            # مهارات احترام البيئة
            {
                "skill_name": "يتعامل مع الكتب والأشياء بعناية",
                "description": "قدرة الطفل على التعامل الرقيق مع الممتلكات والأشياء",
                "evaluation_criteria": "يقلب صفحات الكتب بلطف ولا يمزقها عمداً",
                "success_indicators": "العناية، الاحترام للممتلكات، التعامل الرقيق"
            },
            {
                "skill_name": "يشارك في أنشطة إعادة التدوير البسيطة",
                "description": "قدرة الطفل على المشاركة في الأنشطة البيئية المناسبة لعمره",
                "evaluation_criteria": "يساعد في فصل الأوراق أو وضع الزجاجات في مكان معين",
                "success_indicators": "الوعي البيئي، المشاركة، المسؤولية"
            },
            {
                "skill_name": "يحافظ على الألعاب والأدوات",
                "description": "قدرة الطفل على الحفاظ على الأشياء وعدم إتلافها",
                "evaluation_criteria": "يلعب بالألعاب دون كسرها أو إتلافها عمداً",
                "success_indicators": "المسؤولية، العناية، احترام الممتلكات"
            },
            {
                "skill_name": "يظهر اهتماماً بالحفاظ على نظافة البيئة",
                "description": "قدرة الطفل على إظهار الاهتمام بنظافة المكان المحيط",
                "evaluation_criteria": "يلاحظ أو يعلق على الأماكن النظيفة والمتسخة",
                "success_indicators": "الوعي البيئي، الاهتمام بالنظافة، المسؤولية"
            },
            {
                "skill_name": "يتعلم قواعد بسيطة لحماية البيئة",
                "description": "قدرة الطفل على فهم وتطبيق قواعد بيئية بسيطة",
                "evaluation_criteria": "يتذكر ويطبق قواعد مثل 'لا نقطف الزهور' أو 'نضع القمامة في السلة'",
                "success_indicators": "التعلم، اتباع القواعد، الوعي البيئي"
            }
        ]
        
        # إضافة المهارات إلى قاعدة البيانات
        skills_added = 0
        for skill_data in env_skills:
            # التحقق من عدم وجود المهارة مسبقاً
            existing_skill = Skill.query.filter_by(skill_name=skill_data["skill_name"]).first()
            if not existing_skill:
                new_skill = Skill(
                    skill_name=skill_data["skill_name"],
                    description=skill_data["description"],
                    category_id=env_category.id,
                    skill_level="متوسط",
                    evaluation_criteria=skill_data["evaluation_criteria"],
                    success_indicators=skill_data["success_indicators"],
                    is_active=True
                )
                db.session.add(new_skill)
                skills_added += 1
        
        # حفظ التغييرات
        db.session.commit()
        print(f"تم إضافة {skills_added} مهارة بيئية وسلامة جديدة")
        print("تم إكمال إضافة جميع المهارات البيئية والسلامة بنجاح!")

if __name__ == "__main__":
    add_environmental_safety_skills()
