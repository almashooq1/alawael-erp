{"version":3,"file":"rehabilitation-center-advanced-appointments-DvC6n2PD.js","sources":["../../src/rehabilitation-center-advanced-appointments.js"],"sourcesContent":["/**\n * üìÖ Advanced Appointments Management System\n * ŸÜÿ∏ÿßŸÖ ÿ•ÿØÿßÿ±ÿ© ÿßŸÑŸÖŸàÿßÿπŸäÿØ ÿßŸÑŸÖÿ™ŸÇÿØŸÖ ÿßŸÑÿ∞ŸÉŸä ÿßŸÑŸÖÿ™ŸÉÿßŸÖŸÑ\n */\n\nimport apiClient from './utils/api-client.js';\nimport { API_ENDPOINTS } from './config/api.js';\nimport connectionManager from './utils/connection-manager.js';\nimport realtimeSync from './utils/realtime-sync.js';\nimport systemEnhancer from './utils/system-enhancer.js';\nimport aiAssistant from './utils/ai-assistant.js';\nimport advancedCache from './utils/advanced-cache.js';\n\nclass AdvancedAppointmentsManagement {\n  constructor(container) {\n    this.container = container;\n    this.useAPI = true;\n    this.apiClient = apiClient;\n    this.API_ENDPOINTS = API_ENDPOINTS.advancedAppointments || {};\n    this.connectionManager = connectionManager;\n    this.realtimeSync = realtimeSync;\n    this.systemEnhancer = systemEnhancer;\n    this.aiAssistant = aiAssistant;\n    this.advancedCache = advancedCache;\n\n    this.appointments = [];\n    this.schedules = [];\n    this.availability = [];\n    this.reminders = [];\n    this.cancellations = [];\n    this.reschedules = [];\n    this.waitlist = [];\n    this.analytics = [];\n\n    this.currentView = 'appointments';\n    this.selectedDate = new Date();\n    this.filters = {\n      status: 'all',\n      type: 'all',\n      provider: 'all',\n      patient: 'all'\n    };\n\n    this.init();\n  }\n\n  async init() {\n    this.render();\n    this.setupEventListeners();\n    await this.loadData();\n    this.setupRealtimeSync();\n    this.setupConnectionMonitoring();\n  }\n\n  // Smart search using AI Assistant NLP and suggestions\n  smartSearchAppointments(query) {\n    if (!query) {\n      this.filteredAppointments = null;\n      this.render();\n      return;\n    }\n    // Use AI Assistant NLP to detect intent/entities\n    const nlp = this.aiAssistant.processQuery ? this.aiAssistant.processQuery(query) : { intent: '', entities: [] };\n    let filtered = this.appointments;\n    if (nlp.intent === 'search' && nlp.entities && nlp.entities.length > 0) {\n      filtered = filtered.filter(app => nlp.entities.some(e =>\n        (app.status && app.status.includes(e)) ||\n        (app.patientName && app.patientName.includes(e)) ||\n        (app.providerName && app.providerName.includes(e)) ||\n        (app.type && app.type.includes(e)) ||\n        (app.date && String(app.date).includes(e))\n      ));\n    } else {\n      // fallback: filter by patient or provider name\n      filtered = filtered.filter(app =>\n        (app.patientName && app.patientName.includes(query)) ||\n        (app.providerName && app.providerName.includes(query))\n      );\n    }\n    this.filteredAppointments = filtered;\n    this.render();\n  }\n\n  // Handle AI suggestion click\n  handleAISuggestion(title, type) {\n    // Example: handle known actions\n    if (type === 'action' && title.includes('ŸÖŸàÿπÿØ')) {\n      this.createAppointment();\n    }\n    // Add more actions as needed\n  }\n\n  render() {\n    if (!this.container) return;\n\n    this.container.innerHTML = `\n      <div class=\"advanced-appointments-management\">\n        <div class=\"appointments-header\">\n          <h2>üìÖ ŸÜÿ∏ÿßŸÖ ÿ•ÿØÿßÿ±ÿ© ÿßŸÑŸÖŸàÿßÿπŸäÿØ ÿßŸÑŸÖÿ™ŸÇÿØŸÖ ÿßŸÑÿ∞ŸÉŸä ÿßŸÑŸÖÿ™ŸÉÿßŸÖŸÑ</h2>\n          <div class=\"header-actions\">\n            <button class=\"btn btn-primary\" onclick=\"this.createAppointment()\">\n              <i class=\"fas fa-plus\"></i> ŸÖŸàÿπÿØ ÿ¨ÿØŸäÿØ\n            </button>\n            <button class=\"btn btn-secondary\" onclick=\"this.viewCalendar()\">\n              <i class=\"fas fa-calendar\"></i> ÿπÿ±ÿ∂ ÿßŸÑÿ™ŸÇŸàŸäŸÖ\n            </button>\n          </div>\n        </div>\n\n        <div class=\"appointments-tabs\">\n          <button class=\"tab-btn ${this.currentView === 'appointments' ? 'active' : ''}\"\n                  onclick=\"this.switchView('appointments')\">\n            <i class=\"fas fa-calendar-check\"></i> ÿßŸÑŸÖŸàÿßÿπŸäÿØ\n          </button>\n          <button class=\"tab-btn ${this.currentView === 'schedules' ? 'active' : ''}\"\n                  onclick=\"this.switchView('schedules')\">\n            <i class=\"fas fa-calendar-alt\"></i> ÿßŸÑÿ¨ÿØÿßŸàŸÑ\n          </button>\n          <button class=\"tab-btn ${this.currentView === 'availability' ? 'active' : ''}\"\n                  onclick=\"this.switchView('availability')\">\n            <i class=\"fas fa-clock\"></i> ÿßŸÑÿ™ŸàŸÅÿ±\n          </button>\n          <button class=\"tab-btn ${this.currentView === 'reminders' ? 'active' : ''}\"\n                  onclick=\"this.switchView('reminders')\">\n            <i class=\"fas fa-bell\"></i> ÿßŸÑÿ™ÿ∞ŸÉŸäÿ±ÿßÿ™\n          </button>\n          <button class=\"tab-btn ${this.currentView === 'cancellations' ? 'active' : ''}\"\n                  onclick=\"this.switchView('cancellations')\">\n            <i class=\"fas fa-times-circle\"></i> ÿßŸÑÿ•ŸÑÿ∫ÿßÿ°ÿßÿ™\n          </button>\n          <button class=\"tab-btn ${this.currentView === 'reschedules' ? 'active' : ''}\"\n                  onclick=\"this.switchView('reschedules')\">\n            <i class=\"fas fa-exchange-alt\"></i> ÿ•ÿπÿßÿØÿ© ÿßŸÑÿ¨ÿØŸàŸÑÿ©\n          </button>\n          <button class=\"tab-btn ${this.currentView === 'waitlist' ? 'active' : ''}\"\n                  onclick=\"this.switchView('waitlist')\">\n            <i class=\"fas fa-list\"></i> ŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿßŸÜÿ™ÿ∏ÿßÿ±\n          </button>\n          <button class=\"tab-btn ${this.currentView === 'analytics' ? 'active' : ''}\"\n                  onclick=\"this.switchView('analytics')\">\n            <i class=\"fas fa-chart-bar\"></i> ÿßŸÑÿ™ÿ≠ŸÑŸäŸÑÿßÿ™\n          </button>\n        </div>\n\n        <div class=\"appointments-filters\">\n          <select class=\"filter-select\" onchange=\"this.handleFilterChange('status', event)\">\n            <option value=\"all\">ÿ¨ŸÖŸäÿπ ÿßŸÑÿ≠ÿßŸÑÿßÿ™</option>\n            <option value=\"scheduled\">ŸÖÿ¨ÿØŸàŸÑ</option>\n            <option value=\"confirmed\">ŸÖÿ§ŸÉÿØ</option>\n            <option value=\"in-progress\">ŸÇŸäÿØ ÿßŸÑÿ™ŸÜŸÅŸäÿ∞</option>\n            <option value=\"completed\">ŸÖŸÉÿ™ŸÖŸÑ</option>\n            <option value=\"cancelled\">ŸÖŸÑÿ∫Ÿä</option>\n            <option value=\"no-show\">ŸÑŸÖ Ÿäÿ≠ÿ∂ÿ±</option>\n          </select>\n          <select class=\"filter-select\" onchange=\"this.handleFilterChange('type', event)\">\n            <option value=\"all\">ÿ¨ŸÖŸäÿπ ÿßŸÑÿ£ŸÜŸàÿßÿπ</option>\n            <option value=\"consultation\">ÿßÿ≥ÿ™ÿ¥ÿßÿ±ÿ©</option>\n            <option value=\"therapy\">ÿπŸÑÿßÿ¨</option>\n            <option value=\"assessment\">ÿ™ŸÇŸäŸäŸÖ</option>\n            <option value=\"follow-up\">ŸÖÿ™ÿßÿ®ÿπÿ©</option>\n            <option value=\"emergency\">ÿ∑Ÿàÿßÿ±ÿ¶</option>\n          </select>\n          <input type=\"date\" class=\"filter-date\" value=\"${this.formatDateInput(this.selectedDate)}\"\n                 onchange=\"this.handleDateChange(event)\">\n          <input type=\"text\" class=\"search-input\" placeholder=\"ÿ®ÿ≠ÿ´...\"\n                 oninput=\"this.handleSearch(event)\">\n        </div>\n\n        <div class=\"appointments-content\" id=\"appointmentsContent\">\n          ${this.renderCurrentView()}\n        </div>\n      </div>\n    `;\n  }\n\n  renderCurrentView() {\n    switch (this.currentView) {\n      case 'appointments':\n        return this.renderAppointments();\n      case 'schedules':\n        return this.renderSchedules();\n      case 'availability':\n        return this.renderAvailability();\n      case 'reminders':\n        return this.renderReminders();\n      case 'cancellations':\n        return this.renderCancellations();\n      case 'reschedules':\n        return this.renderReschedules();\n      case 'waitlist':\n        return this.renderWaitlist();\n      case 'analytics':\n        return this.renderAnalytics();\n      default:\n        return this.renderAppointments();\n    }\n  }\n\n  renderAppointments() {\n    let filtered = this.getFilteredData(this.appointments);\n    if (this.filteredAppointments) {\n      filtered = this.filteredAppointments;\n    }\n    // Get smart suggestions from AI Assistant\n    const suggestions = this.aiAssistant.getSuggestions({ currentModule: 'appointments' }) || [];\n    const suggestionsHtml = suggestions.length > 0 ? `\n      <div class=\"ai-suggestions-panel\">\n        <h5><i class=\"fas fa-magic\"></i> ÿßŸÇÿ™ÿ±ÿßÿ≠ÿßÿ™ ÿ∞ŸÉŸäÿ©</h5>\n        <ul>\n          ${suggestions.map(s => `<li><button class=\"btn btn-link\" onclick=\"window.appointmentsSystem && window.appointmentsSystem.handleAISuggestion && window.appointmentsSystem.handleAISuggestion('${s.title.replace(/'/g, '\\'')}', '${s.type}')\">${s.title}</button> <span class=\"desc\">${s.description || ''}</span></li>`).join('')}\n        </ul>\n      </div>\n    ` : '';\n    // Smart search input\n    const smartSearchInput = `<input type=\\\"text\\\" id=\\\"appointmentSmartSearch\\\" placeholder=\\\"ÿ®ÿ≠ÿ´ ÿ∞ŸÉŸä...\\\" onkeyup=\\\"window.appointmentsSystem && window.appointmentsSystem.smartSearchAppointments && window.appointmentsSystem.smartSearchAppointments(this.value)\\\">`;\n    if (filtered.length === 0) {\n      return `\n        <div class=\"empty-state\">\n          <i class=\"fas fa-calendar-check\"></i>\n          <p>ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸÖŸàÿßÿπŸäÿØ</p>\n          <button class=\"btn btn-primary\" onclick=\"this.createAppointment()\">\n            ÿ•ÿ∂ÿßŸÅÿ© ŸÖŸàÿπÿØ ÿ¨ÿØŸäÿØ\n          </button>\n        </div>\n        ${suggestionsHtml}\n        <div class=\"appointments-filters\">${smartSearchInput}</div>\n      `;\n    }\n    return `\n      ${suggestionsHtml}\n      <div class=\"appointments-filters\">${smartSearchInput}</div>\n      <div class=\"appointments-list\">\n        ${filtered.map(appointment => `\n          <div class=\"appointment-card status-${appointment.status} type-${appointment.type}\">\n            <div class=\"appointment-header\">\n              <div class=\"appointment-time\">\n                <div class=\"time-display\">${this.formatTime(appointment.startTime)}</div>\n                <div class=\"date-display\">${this.formatDate(appointment.date)}</div>\n              </div>\n              <div class=\"appointment-info\">\n                <h3>${appointment.patientName || 'ÿ∫Ÿäÿ± ŸÖÿ≠ÿØÿØ'}</h3>\n                <p class=\"appointment-provider\">${appointment.providerName || 'ÿ∫Ÿäÿ± ŸÖÿ≠ÿØÿØ'}</p>\n                <span class=\"appointment-type\">${this.getTypeText(appointment.type)}</span>\n              </div>\n              <div class=\"appointment-badges\">\n                <span class=\"status-badge status-${appointment.status}\">${this.getStatusText(appointment.status)}</span>\n                ${appointment.urgent ? '<span class=\"urgent-badge\">ÿπÿßÿ¨ŸÑ</span>' : ''}\n              </div>\n            </div>\n            <div class=\"appointment-body\">\n              <div class=\"appointment-details\">\n                <div class=\"detail-item\">\n                  <span class=\"detail-label\">ÿßŸÑŸÖÿØÿ©:</span>\n                  <span class=\"detail-value\">${appointment.duration || 'ÿ∫Ÿäÿ± ŸÖÿ≠ÿØÿØ'}</span>\n                </div>\n                <div class=\"detail-item\">\n                  <span class=\"detail-label\">ÿßŸÑŸÖŸàŸÇÿπ:</span>\n                  <span class=\"detail-value\">${appointment.location || 'ÿ∫Ÿäÿ± ŸÖÿ≠ÿØÿØ'}</span>\n                </div>\n                ${appointment.notes ? `\n                  <div class=\"appointment-notes\">\n                    <span class=\"notes-label\">ŸÖŸÑÿßÿ≠ÿ∏ÿßÿ™:</span>\n                    <span class=\"notes-text\">${appointment.notes.substring(0, 100)}${appointment.notes.length > 100 ? '...' : ''}</span>\n                  </div>\n                ` : ''}\n              </div>\n            </div>\n            <div class=\"appointment-actions\">\n              <button class=\"btn btn-sm btn-primary\" onclick=\"this.viewAppointment(${appointment.id})\">\n                <i class=\"fas fa-eye\"></i> ÿπÿ±ÿ∂\n              </button>\n              ${appointment.status === 'scheduled' || appointment.status === 'confirmed' ? `\n                <button class=\"btn btn-sm btn-success\" onclick=\"this.confirmAppointment(${appointment.id})\">\n                  <i class=\"fas fa-check\"></i> ÿ™ÿ£ŸÉŸäÿØ\n                </button>\n                <button class=\"btn btn-sm btn-warning\" onclick=\"this.rescheduleAppointment(${appointment.id})\">\n                  <i class=\"fas fa-exchange-alt\"></i> ÿ•ÿπÿßÿØÿ© ÿ¨ÿØŸàŸÑÿ©\n                </button>\n                <button class=\"btn btn-sm btn-danger\" onclick=\"this.cancelAppointment(${appointment.id})\">\n                  <i class=\"fas fa-times\"></i> ÿ•ŸÑÿ∫ÿßÿ°\n                </button>\n              ` : ''}\n              ${appointment.status === 'scheduled' ? `\n                <button class=\"btn btn-sm btn-info\" onclick=\"this.startAppointment(${appointment.id})\">\n                  <i class=\"fas fa-play\"></i> ÿ®ÿØÿ°\n                </button>\n              ` : ''}\n            </div>\n          </div>\n        `).join('')}\n      </div>\n    `;\n  }\n\n  renderSchedules() {\n    if (this.schedules.length === 0) {\n      return `\n        <div class=\"empty-state\">\n          <i class=\"fas fa-calendar-alt\"></i>\n          <p>ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ¨ÿØÿßŸàŸÑ</p>\n        </div>\n      `;\n    }\n\n    return `\n      <div class=\"schedules-calendar\">\n        ${this.schedules.map(schedule => `\n          <div class=\"schedule-item\">\n            <div class=\"schedule-time\">${this.formatDateTime(schedule.startTime)}</div>\n            <div class=\"schedule-details\">\n              <h4>${schedule.providerName || 'ÿ∫Ÿäÿ± ŸÖÿ≠ÿØÿØ'}</h4>\n              <p>${schedule.patientName || 'ÿ∫Ÿäÿ± ŸÖÿ≠ÿØÿØ'}</p>\n              <span class=\"schedule-type\">${this.getTypeText(schedule.type)}</span>\n            </div>\n            <div class=\"schedule-status\">\n              <span class=\"status-badge status-${schedule.status}\">${this.getStatusText(schedule.status)}</span>\n            </div>\n          </div>\n        `).join('')}\n      </div>\n    `;\n  }\n\n  renderAvailability() {\n    if (this.availability.length === 0) {\n      return `\n        <div class=\"empty-state\">\n          <i class=\"fas fa-clock\"></i>\n          <p>ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ®ŸäÿßŸÜÿßÿ™ ÿ™ŸàŸÅÿ±</p>\n        </div>\n      `;\n    }\n\n    return `\n      <div class=\"availability-grid\">\n        ${this.availability.map(avail => `\n          <div class=\"availability-card\">\n            <div class=\"availability-header\">\n              <h3>${avail.providerName || 'ÿ∫Ÿäÿ± ŸÖÿ≠ÿØÿØ'}</h3>\n              <span class=\"availability-date\">${this.formatDate(avail.date)}</span>\n            </div>\n            <div class=\"availability-body\">\n              <div class=\"availability-slots\">\n                ${avail.slots?.map(slot => `\n                  <div class=\"slot-item ${slot.available ? 'available' : 'unavailable'}\">\n                    <span class=\"slot-time\">${this.formatTime(slot.time)}</span>\n                    <span class=\"slot-status\">${slot.available ? 'ŸÖÿ™ÿßÿ≠' : 'ÿ∫Ÿäÿ± ŸÖÿ™ÿßÿ≠'}</span>\n                  </div>\n                `).join('') || ''}\n              </div>\n            </div>\n          </div>\n        `).join('')}\n      </div>\n    `;\n  }\n\n  renderReminders() {\n    if (this.reminders.length === 0) {\n      return `\n        <div class=\"empty-state\">\n          <i class=\"fas fa-bell\"></i>\n          <p>ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ™ÿ∞ŸÉŸäÿ±ÿßÿ™</p>\n        </div>\n      `;\n    }\n\n    return `\n      <div class=\"reminders-list\">\n        ${this.reminders.map(reminder => `\n          <div class=\"reminder-card ${reminder.sent ? 'sent' : 'pending'}\">\n            <div class=\"reminder-header\">\n              <h3>${reminder.appointmentName || 'ÿ™ÿ∞ŸÉŸäÿ±'}</h3>\n              <span class=\"reminder-time\">${this.formatDateTime(reminder.sendTime)}</span>\n            </div>\n            <div class=\"reminder-body\">\n              <div class=\"reminder-details\">\n                <div class=\"detail-item\">\n                  <span class=\"detail-label\">ÿßŸÑŸÖŸàÿπÿØ:</span>\n                  <span class=\"detail-value\">${this.formatDateTime(reminder.appointmentTime)}</span>\n                </div>\n                <div class=\"detail-item\">\n                  <span class=\"detail-label\">ÿßŸÑŸÖÿ±Ÿäÿ∂:</span>\n                  <span class=\"detail-value\">${reminder.patientName || 'ÿ∫Ÿäÿ± ŸÖÿ≠ÿØÿØ'}</span>\n                </div>\n                <div class=\"detail-item\">\n                  <span class=\"detail-label\">ÿßŸÑŸÜŸàÿπ:</span>\n                  <span class=\"detail-value\">${reminder.type || 'ÿ∫Ÿäÿ± ŸÖÿ≠ÿØÿØ'}</span>\n                </div>\n                <div class=\"detail-item\">\n                  <span class=\"detail-label\">ÿßŸÑÿ≠ÿßŸÑÿ©:</span>\n                  <span class=\"detail-value\">${reminder.sent ? 'ÿ™ŸÖ ÿßŸÑÿ•ÿ±ÿ≥ÿßŸÑ' : 'ŸÇŸäÿØ ÿßŸÑÿßŸÜÿ™ÿ∏ÿßÿ±'}</span>\n                </div>\n              </div>\n            </div>\n          </div>\n        `).join('')}\n      </div>\n    `;\n  }\n\n  renderCancellations() {\n    if (this.cancellations.length === 0) {\n      return `\n        <div class=\"empty-state\">\n          <i class=\"fas fa-times-circle\"></i>\n          <p>ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ•ŸÑÿ∫ÿßÿ°ÿßÿ™</p>\n        </div>\n      `;\n    }\n\n    return `\n      <div class=\"cancellations-list\">\n        ${this.cancellations.map(cancellation => `\n          <div class=\"cancellation-card\">\n            <div class=\"cancellation-header\">\n              <h3>${cancellation.appointmentName || 'ÿ•ŸÑÿ∫ÿßÿ°'}</h3>\n              <span class=\"cancellation-date\">${this.formatDate(cancellation.date)}</span>\n            </div>\n            <div class=\"cancellation-body\">\n              <div class=\"cancellation-details\">\n                <div class=\"detail-item\">\n                  <span class=\"detail-label\">ÿßŸÑŸÖÿ±Ÿäÿ∂:</span>\n                  <span class=\"detail-value\">${cancellation.patientName || 'ÿ∫Ÿäÿ± ŸÖÿ≠ÿØÿØ'}</span>\n                </div>\n                <div class=\"detail-item\">\n                  <span class=\"detail-label\">ÿßŸÑÿ≥ÿ®ÿ®:</span>\n                  <span class=\"detail-value\">${cancellation.reason || 'ÿ∫Ÿäÿ± ŸÖÿ≠ÿØÿØ'}</span>\n                </div>\n                <div class=\"detail-item\">\n                  <span class=\"detail-label\">ÿßŸÑŸÖÿ®ÿ∑ŸÑ:</span>\n                  <span class=\"detail-value\">${cancellation.cancelledBy || 'ÿ∫Ÿäÿ± ŸÖÿ≠ÿØÿØ'}</span>\n                </div>\n              </div>\n            </div>\n          </div>\n        `).join('')}\n      </div>\n    `;\n  }\n\n  renderReschedules() {\n    if (this.reschedules.length === 0) {\n      return `\n        <div class=\"empty-state\">\n          <i class=\"fas fa-exchange-alt\"></i>\n          <p>ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ•ÿπÿßÿØÿ© ÿ¨ÿØŸàŸÑÿ©</p>\n        </div>\n      `;\n    }\n\n    return `\n      <div class=\"reschedules-list\">\n        ${this.reschedules.map(reschedule => `\n          <div class=\"reschedule-card\">\n            <div class=\"reschedule-header\">\n              <h3>${reschedule.appointmentName || 'ÿ•ÿπÿßÿØÿ© ÿ¨ÿØŸàŸÑÿ©'}</h3>\n              <span class=\"reschedule-date\">${this.formatDate(reschedule.date)}</span>\n            </div>\n            <div class=\"reschedule-body\">\n              <div class=\"reschedule-details\">\n                <div class=\"detail-item\">\n                  <span class=\"detail-label\">ÿßŸÑŸÖŸàÿπÿØ ÿßŸÑÿ£ÿµŸÑŸä:</span>\n                  <span class=\"detail-value\">${this.formatDateTime(reschedule.oldDateTime)}</span>\n                </div>\n                <div class=\"detail-item\">\n                  <span class=\"detail-label\">ÿßŸÑŸÖŸàÿπÿØ ÿßŸÑÿ¨ÿØŸäÿØ:</span>\n                  <span class=\"detail-value\">${this.formatDateTime(reschedule.newDateTime)}</span>\n                </div>\n                <div class=\"detail-item\">\n                  <span class=\"detail-label\">ÿßŸÑÿ≥ÿ®ÿ®:</span>\n                  <span class=\"detail-value\">${reschedule.reason || 'ÿ∫Ÿäÿ± ŸÖÿ≠ÿØÿØ'}</span>\n                </div>\n              </div>\n            </div>\n          </div>\n        `).join('')}\n      </div>\n    `;\n  }\n\n  renderWaitlist() {\n    if (this.waitlist.length === 0) {\n      return `\n        <div class=\"empty-state\">\n          <i class=\"fas fa-list\"></i>\n          <p>ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸÇÿßÿ¶ŸÖÿ© ÿßŸÜÿ™ÿ∏ÿßÿ±</p>\n        </div>\n      `;\n    }\n\n    return `\n      <div class=\"waitlist-list\">\n        ${this.waitlist.map(item => `\n          <div class=\"waitlist-card priority-${item.priority || 'medium'}\">\n            <div class=\"waitlist-header\">\n              <h3>${item.patientName || 'ÿ∫Ÿäÿ± ŸÖÿ≠ÿØÿØ'}</h3>\n              <div class=\"waitlist-badges\">\n                <span class=\"priority-badge priority-${item.priority || 'medium'}\">\n                  ${this.getPriorityText(item.priority || 'medium')}\n                </span>\n                <span class=\"position-badge\">ÿßŸÑŸÖÿ±ŸÉÿ≤ ${item.position || 0}</span>\n              </div>\n            </div>\n            <div class=\"waitlist-body\">\n              <div class=\"waitlist-details\">\n                <div class=\"detail-item\">\n                  <span class=\"detail-label\">ÿßŸÑŸÜŸàÿπ ÿßŸÑŸÖÿ∑ŸÑŸàÿ®:</span>\n                  <span class=\"detail-value\">${this.getTypeText(item.requestedType)}</span>\n                </div>\n                <div class=\"detail-item\">\n                  <span class=\"detail-label\">ÿ™ÿßÿ±ŸäÿÆ ÿßŸÑÿ∑ŸÑÿ®:</span>\n                  <span class=\"detail-value\">${this.formatDate(item.requestDate)}</span>\n                </div>\n                <div class=\"detail-item\">\n                  <span class=\"detail-label\">ÿßŸÑŸÖŸÑÿßÿ≠ÿ∏ÿßÿ™:</span>\n                  <span class=\"detail-value\">${item.notes || 'ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸÖŸÑÿßÿ≠ÿ∏ÿßÿ™'}</span>\n                </div>\n              </div>\n            </div>\n            <div class=\"waitlist-actions\">\n              <button class=\"btn btn-sm btn-primary\" onclick=\"this.scheduleFromWaitlist(${item.id})\">\n                <i class=\"fas fa-calendar-plus\"></i> ÿ¨ÿØŸàŸÑÿ©\n              </button>\n              <button class=\"btn btn-sm btn-secondary\" onclick=\"this.removeFromWaitlist(${item.id})\">\n                <i class=\"fas fa-times\"></i> ÿ•ÿ≤ÿßŸÑÿ©\n              </button>\n            </div>\n          </div>\n        `).join('')}\n      </div>\n    `;\n  }\n\n  renderAnalytics() {\n    if (this.analytics.length === 0) {\n      return `\n        <div class=\"empty-state\">\n          <i class=\"fas fa-chart-bar\"></i>\n          <p>ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ®ŸäÿßŸÜÿßÿ™ ÿ™ÿ≠ŸÑŸäŸÑŸäÿ©</p>\n        </div>\n      `;\n    }\n\n    return `\n      <div class=\"analytics-dashboard\">\n        ${this.analytics.map(analytic => `\n          <div class=\"analytic-card\">\n            <div class=\"analytic-header\">\n              <h3>${analytic.metric}</h3>\n              <span class=\"analytic-value\">${analytic.value}</span>\n            </div>\n            <div class=\"analytic-body\">\n              <p>${analytic.description || ''}</p>\n              ${analytic.trend ? `\n                <div class=\"analytic-trend ${analytic.trend > 0 ? 'up' : 'down'}\">\n                  <i class=\"fas fa-arrow-${analytic.trend > 0 ? 'up' : 'down'}\"></i>\n                  ${Math.abs(analytic.trend)}%\n                </div>\n              ` : ''}\n            </div>\n          </div>\n        `).join('')}\n      </div>\n    `;\n  }\n\n  getFilteredData(data) {\n    let filtered = [...data];\n    if (this.filters.status !== 'all') {\n      filtered = filtered.filter(item => item.status === this.filters.status);\n    }\n    if (this.filters.type !== 'all') {\n      filtered = filtered.filter(item => item.type === this.filters.type);\n    }\n    if (this.filters.provider !== 'all') {\n      filtered = filtered.filter(item => item.providerId === parseInt(this.filters.provider));\n    }\n    if (this.filters.patient !== 'all') {\n      filtered = filtered.filter(item => item.patientId === parseInt(this.filters.patient));\n    }\n    const selectedDateStr = this.formatDateInput(this.selectedDate);\n    filtered = filtered.filter(item => {\n      const itemDateStr = this.formatDateInput(new Date(item.date));\n      return itemDateStr === selectedDateStr;\n    });\n    return filtered;\n  }\n\n  async loadData() {\n    if (!this.useAPI) {\n      this.loadFromLocalStorage();\n      return;\n    }\n\n    try {\n      if (!this.connectionManager.isFullyConnected()) {\n        this.loadFromLocalStorage();\n        return;\n      }\n\n      const [appointments, schedules, availability, reminders, cancellations, reschedules, waitlist, analytics] = await Promise.all([\n        this.apiClient.get(this.API_ENDPOINTS.appointments || '/api/advanced-appointments/appointments'),\n        this.apiClient.get(this.API_ENDPOINTS.schedules || '/api/advanced-appointments/schedules'),\n        this.apiClient.get(this.API_ENDPOINTS.availability || '/api/advanced-appointments/availability'),\n        this.apiClient.get(this.API_ENDPOINTS.reminders || '/api/advanced-appointments/reminders'),\n        this.apiClient.get(this.API_ENDPOINTS.cancellations || '/api/advanced-appointments/cancellations'),\n        this.apiClient.get(this.API_ENDPOINTS.reschedules || '/api/advanced-appointments/reschedules'),\n        this.apiClient.get(this.API_ENDPOINTS.waitlist || '/api/advanced-appointments/waitlist'),\n        this.apiClient.get(this.API_ENDPOINTS.analytics || '/api/advanced-appointments/analytics')\n      ]);\n\n      this.appointments = appointments.data || [];\n      this.schedules = schedules.data || [];\n      this.availability = availability.data || [];\n      this.reminders = reminders.data || [];\n      this.cancellations = cancellations.data || [];\n      this.reschedules = reschedules.data || [];\n      this.waitlist = waitlist.data || [];\n      this.analytics = analytics.data || [];\n\n      this.saveToLocalStorage();\n      this.updateContent();\n    } catch (error) {\n      console.error('Error loading appointments data:', error);\n      this.loadFromLocalStorage();\n    }\n  }\n\n  setupRealtimeSync() {\n    if (!this.realtimeSync) return;\n    this.realtimeSync.subscribe('advanced-appointments', '*', (update) => {\n      if (update.action === 'create' || update.action === 'update' || update.action === 'delete') {\n        this.loadData();\n      }\n    });\n  }\n\n  setupConnectionMonitoring() {\n    if (!this.connectionManager) return;\n    this.connectionManager.on('online', () => {\n      this.loadData();\n    });\n  }\n\n  switchView(view) {\n    this.currentView = view;\n    this.updateContent();\n  }\n\n  handleFilterChange(type, event) {\n    this.filters[type] = event.target.value;\n    this.updateContent();\n  }\n\n  handleDateChange(event) {\n    this.selectedDate = new Date(event.target.value);\n    this.updateContent();\n  }\n\n  handleSearch(event) {\n    this.updateContent();\n  }\n\n  updateContent() {\n    const content = document.getElementById('appointmentsContent');\n    if (content) {\n      content.innerHTML = this.renderCurrentView();\n    }\n  }\n\n  getStatusText(status) {\n    const statusMap = {\n      scheduled: 'ŸÖÿ¨ÿØŸàŸÑ',\n      confirmed: 'ŸÖÿ§ŸÉÿØ',\n      'in-progress': 'ŸÇŸäÿØ ÿßŸÑÿ™ŸÜŸÅŸäÿ∞',\n      completed: 'ŸÖŸÉÿ™ŸÖŸÑ',\n      cancelled: 'ŸÖŸÑÿ∫Ÿä',\n      'no-show': 'ŸÑŸÖ Ÿäÿ≠ÿ∂ÿ±'\n    };\n    return statusMap[status] || status;\n  }\n\n  getTypeText(type) {\n    const typeMap = {\n      consultation: 'ÿßÿ≥ÿ™ÿ¥ÿßÿ±ÿ©',\n      therapy: 'ÿπŸÑÿßÿ¨',\n      assessment: 'ÿ™ŸÇŸäŸäŸÖ',\n      'follow-up': 'ŸÖÿ™ÿßÿ®ÿπÿ©',\n      emergency: 'ÿ∑Ÿàÿßÿ±ÿ¶'\n    };\n    return typeMap[type] || type;\n  }\n\n  getPriorityText(priority) {\n    const priorityMap = {\n      low: 'ŸÖŸÜÿÆŸÅÿ∂',\n      medium: 'ŸÖÿ™Ÿàÿ≥ÿ∑',\n      high: 'ÿπÿßŸÑŸä',\n      urgent: 'ÿπÿßÿ¨ŸÑ'\n    };\n    return priorityMap[priority] || priority;\n  }\n\n  formatDate(date) {\n    if (!date) return 'ÿ∫Ÿäÿ± ŸÖÿ≠ÿØÿØ';\n    return new Date(date).toLocaleDateString('ar-SA');\n  }\n\n  formatTime(time) {\n    if (!time) return 'ÿ∫Ÿäÿ± ŸÖÿ≠ÿØÿØ';\n    return new Date(time).toLocaleTimeString('ar-SA', { hour: '2-digit', minute: '2-digit' });\n  }\n\n  formatDateTime(dateTime) {\n    if (!dateTime) return 'ÿ∫Ÿäÿ± ŸÖÿ≠ÿØÿØ';\n    return new Date(dateTime).toLocaleString('ar-SA');\n  }\n\n  formatDateInput(date) {\n    if (!date) return '';\n    const d = new Date(date);\n    const year = d.getFullYear();\n    const month = String(d.getMonth() + 1).padStart(2, '0');\n    const day = String(d.getDate()).padStart(2, '0');\n    return `${year}-${month}-${day}`;\n  }\n\n  saveToLocalStorage() {\n    try {\n      localStorage.setItem('advancedAppointments', JSON.stringify(this.appointments));\n      localStorage.setItem('advancedSchedules', JSON.stringify(this.schedules));\n      localStorage.setItem('advancedAvailability', JSON.stringify(this.availability));\n      localStorage.setItem('advancedReminders', JSON.stringify(this.reminders));\n      localStorage.setItem('advancedCancellations', JSON.stringify(this.cancellations));\n      localStorage.setItem('advancedReschedules', JSON.stringify(this.reschedules));\n      localStorage.setItem('advancedWaitlist', JSON.stringify(this.waitlist));\n      localStorage.setItem('advancedAnalytics', JSON.stringify(this.analytics));\n    } catch (error) {\n      console.error('Error saving to localStorage:', error);\n    }\n  }\n\n  loadFromLocalStorage() {\n    try {\n      this.appointments = JSON.parse(localStorage.getItem('advancedAppointments') || '[]');\n      this.schedules = JSON.parse(localStorage.getItem('advancedSchedules') || '[]');\n      this.availability = JSON.parse(localStorage.getItem('advancedAvailability') || '[]');\n      this.reminders = JSON.parse(localStorage.getItem('advancedReminders') || '[]');\n      this.cancellations = JSON.parse(localStorage.getItem('advancedCancellations') || '[]');\n      this.reschedules = JSON.parse(localStorage.getItem('advancedReschedules') || '[]');\n      this.waitlist = JSON.parse(localStorage.getItem('advancedWaitlist') || '[]');\n      this.analytics = JSON.parse(localStorage.getItem('advancedAnalytics') || '[]');\n    } catch (error) {\n      console.error('Error loading from localStorage:', error);\n    }\n  }\n\n  setupEventListeners() {\n    this.createAppointment = this.createAppointment.bind(this);\n    this.viewCalendar = this.viewCalendar.bind(this);\n    this.switchView = this.switchView.bind(this);\n    this.handleFilterChange = this.handleFilterChange.bind(this);\n    this.handleDateChange = this.handleDateChange.bind(this);\n    this.handleSearch = this.handleSearch.bind(this);\n    this.viewAppointment = this.viewAppointment.bind(this);\n    this.confirmAppointment = this.confirmAppointment.bind(this);\n    this.rescheduleAppointment = this.rescheduleAppointment.bind(this);\n    this.cancelAppointment = this.cancelAppointment.bind(this);\n    this.startAppointment = this.startAppointment.bind(this);\n    this.scheduleFromWaitlist = this.scheduleFromWaitlist.bind(this);\n    this.removeFromWaitlist = this.removeFromWaitlist.bind(this);\n  }\n\n  async createAppointment() {\n    console.log('Create appointment');\n  }\n\n  async viewCalendar() {\n    console.log('View calendar');\n  }\n\n  async viewAppointment(id) {\n    console.log('View appointment', id);\n  }\n\n  async confirmAppointment(id) {\n    console.log('Confirm appointment', id);\n  }\n\n  async rescheduleAppointment(id) {\n    console.log('Reschedule appointment', id);\n  }\n\n  async cancelAppointment(id) {\n    console.log('Cancel appointment', id);\n  }\n\n  async startAppointment(id) {\n    console.log('Start appointment', id);\n  }\n\n  async scheduleFromWaitlist(id) {\n    console.log('Schedule from waitlist', id);\n  }\n\n  async removeFromWaitlist(id) {\n    console.log('Remove from waitlist', id);\n  }\n}\n\nexport default AdvancedAppointmentsManagement;\n\n"],"names":["AdvancedAppointmentsManagement","container","apiClient","API_ENDPOINTS","connectionManager","realtimeSync","systemEnhancer","aiAssistant","advancedCache","query","nlp","filtered","app","e","title","type","suggestions","suggestionsHtml","smartSearchInput","appointment","schedule","avail","_a","slot","reminder","cancellation","reschedule","item","analytic","data","selectedDateStr","appointments","schedules","availability","reminders","cancellations","reschedules","waitlist","analytics","error","update","view","event","content","status","priority","date","time","dateTime","d","year","month","day","id"],"mappings":"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"}