{"version":3,"mappings":"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","names":["apiClient","API_ENDPOINTS","realtimeSync","connectionManager","aiAssistant","advancedCache","loadAPIModules","__vitePreload","n","RehabilitationCenterAdvancedBudget","data","isOnline","cacheKey","cached","response","_b","_a","_c","error","stored","totalBudget","sum","b","totalExpenses","e","totalRevenues","balance","categoryId","query","container","stats","utilizationRate","expense","revenue","budget","category","categoryExpenses","categoryTotal","amount","status","view","budgetId","expenseId","revenueId","advancedBudget","module"],"ignoreList":[],"sources":["../../src/rehabilitation-center-advanced-budget.js"],"sourcesContent":["/**\n * ğŸ’° Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ© Ø§Ù„Ù…ØªÙ‚Ø¯Ù…\n * Advanced Budget Management System\n * Ù†Ø¸Ø§Ù… Ø´Ø§Ù…Ù„ ÙˆÙ…ØªÙ‚Ø¯Ù… Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ© ÙˆØ§Ù„ØªÙ…ÙˆÙŠÙ„\n */\n\n// Import API Client and endpoints (lazy loading)\nlet apiClient = null;\nlet API_ENDPOINTS = null;\nlet realtimeSync = null;\nlet connectionManager = null;\nlet aiAssistant = null;\nlet advancedCache = null;\n\nasync function loadAPIModules() {\n  if (apiClient !== null) return;\n\n  try {\n    const apiModule = await import('./utils/api-client.js');\n    apiClient = apiModule.default;\n    const configModule = await import('./config/api.js');\n    API_ENDPOINTS = configModule.API_ENDPOINTS;\n\n    try {\n      const connModule = await import('./utils/connection-manager.js');\n      connectionManager = connModule.default;\n    } catch (error) {\n      console.warn('Connection manager not available');\n    }\n\n    try {\n      const syncModule = await import('./utils/realtime-sync.js');\n      realtimeSync = syncModule.default;\n    } catch (error) {\n      console.warn('Real-time sync not available');\n    }\n\n    try {\n      const aiModule = await import('./utils/ai-assistant.js');\n      aiAssistant = aiModule.default;\n    } catch (error) {\n      console.warn('AI Assistant not available');\n    }\n\n    try {\n      const cacheModule = await import('./utils/advanced-cache.js');\n      advancedCache = cacheModule.default;\n    } catch (error) {\n      console.warn('Advanced cache not available');\n    }\n  } catch (error) {\n    console.warn('API modules not available');\n    apiClient = null;\n    API_ENDPOINTS = null;\n  }\n}\n\nclass RehabilitationCenterAdvancedBudget {\n  constructor() {\n    this.budgets = [];\n    this.expenses = [];\n    this.revenues = [];\n    this.categories = [];\n    this.selectedBudget = null;\n    this.currentView = 'overview';\n    this.filterCategory = 'all';\n    this.searchQuery = '';\n    this.loading = false;\n    this.useAPI = false;\n    this.init();\n  }\n\n  async init() {\n    await loadAPIModules();\n    this.useAPI = apiClient !== null;\n\n    if (this.useAPI) {\n      await this.loadBudgets();\n      await this.loadExpenses();\n      await this.loadRevenues();\n      await this.loadCategories();\n    } else {\n      this.initializeDefaultData();\n    }\n\n    if (realtimeSync) {\n      this.setupRealtimeSync();\n    }\n\n    if (connectionManager) {\n      this.setupConnectionMonitoring();\n    }\n\n    this.renderAdvancedBudget();\n  }\n\n  setupRealtimeSync() {\n    realtimeSync.subscribe('budget:updated', data => {\n      this.loadBudgets();\n    });\n\n    realtimeSync.subscribe('budget:expense:updated', data => {\n      this.loadExpenses();\n    });\n  }\n\n  setupConnectionMonitoring() {\n    connectionManager.onStatusChange(isOnline => {\n      if (isOnline && this.useAPI) {\n        this.syncPendingChanges();\n      }\n    });\n  }\n\n  async loadBudgets() {\n    this.loading = true;\n    try {\n      if (this.useAPI && apiClient) {\n        const cacheKey = 'advanced_budget_budgets';\n        const cached = advancedCache ? advancedCache.get(cacheKey) : null;\n\n        if (cached) {\n          this.budgets = cached;\n        } else {\n          const response = await apiClient.get(\n            API_ENDPOINTS?.advancedBudget?.budgets?.list || '/api/advanced-budget/budgets'\n          );\n          if (response.data?.success) {\n            this.budgets = response.data.data || [];\n            if (advancedCache) {\n              advancedCache.set(cacheKey, this.budgets, { ttl: 5 * 60 * 1000, tags: ['budget'] });\n            }\n          }\n        }\n      }\n    } catch (error) {\n      console.error('Error loading budgets:', error);\n      this.loadBudgetsFromStorage();\n    } finally {\n      this.loading = false;\n      this.renderAdvancedBudget();\n    }\n  }\n\n  async loadExpenses() {\n    try {\n      if (this.useAPI && apiClient) {\n        const response = await apiClient.get(\n          API_ENDPOINTS?.advancedBudget?.expenses?.list || '/api/advanced-budget/expenses'\n        );\n        if (response.data?.success) {\n          this.expenses = response.data.data || [];\n        }\n      }\n    } catch (error) {\n      console.error('Error loading expenses:', error);\n      this.loadExpensesFromStorage();\n    }\n  }\n\n  async loadRevenues() {\n    try {\n      if (this.useAPI && apiClient) {\n        const response = await apiClient.get(\n          API_ENDPOINTS?.advancedBudget?.revenues?.list || '/api/advanced-budget/revenues'\n        );\n        if (response.data?.success) {\n          this.revenues = response.data.data || [];\n        }\n      }\n    } catch (error) {\n      console.error('Error loading revenues:', error);\n      this.loadRevenuesFromStorage();\n    }\n  }\n\n  async loadCategories() {\n    try {\n      if (this.useAPI && apiClient) {\n        const response = await apiClient.get(\n          API_ENDPOINTS?.advancedBudget?.categories?.list || '/api/advanced-budget/categories'\n        );\n        if (response.data?.success) {\n          this.categories = response.data.data || [];\n        }\n      }\n    } catch (error) {\n      console.error('Error loading categories:', error);\n      this.loadCategoriesFromStorage();\n    }\n  }\n\n  loadBudgetsFromStorage() {\n    const stored = localStorage.getItem('advanced_budget_budgets');\n    if (stored) {\n      try {\n        this.budgets = JSON.parse(stored);\n      } catch (error) {\n        console.error('Error loading budgets from storage:', error);\n      }\n    }\n  }\n\n  loadExpensesFromStorage() {\n    const stored = localStorage.getItem('advanced_budget_expenses');\n    if (stored) {\n      try {\n        this.expenses = JSON.parse(stored);\n      } catch (error) {\n        console.error('Error loading expenses from storage:', error);\n      }\n    }\n  }\n\n  loadRevenuesFromStorage() {\n    const stored = localStorage.getItem('advanced_budget_revenues');\n    if (stored) {\n      try {\n        this.revenues = JSON.parse(stored);\n      } catch (error) {\n        console.error('Error loading revenues from storage:', error);\n      }\n    }\n  }\n\n  loadCategoriesFromStorage() {\n    const stored = localStorage.getItem('advanced_budget_categories');\n    if (stored) {\n      try {\n        this.categories = JSON.parse(stored);\n      } catch (error) {\n        console.error('Error loading categories from storage:', error);\n      }\n    }\n  }\n\n  saveBudgetsToStorage() {\n    localStorage.setItem('advanced_budget_budgets', JSON.stringify(this.budgets));\n  }\n\n  initializeDefaultData() {\n    if (this.budgets.length === 0) {\n      this.budgets = [\n        {\n          id: 1,\n          name: 'Ù…ÙŠØ²Ø§Ù†ÙŠØ© 2025',\n          year: 2025,\n          totalAmount: 1000000,\n          allocatedAmount: 0,\n          remainingAmount: 1000000,\n          status: 'active',\n          createdAt: new Date().toISOString(),\n        },\n      ];\n      this.saveBudgetsToStorage();\n    }\n  }\n\n  async syncPendingChanges() {\n    if (this.useAPI && apiClient) {\n      // TODO: Sync pending changes\n    }\n  }\n\n  getBudgetStats() {\n    const totalBudget = this.budgets.reduce((sum, b) => sum + (b.totalAmount || 0), 0);\n    const totalExpenses = this.expenses.reduce((sum, e) => sum + (e.amount || 0), 0);\n    const totalRevenues = this.revenues.reduce((sum, r) => sum + (r.amount || 0), 0);\n    const balance = totalRevenues - totalExpenses;\n\n    return {\n      totalBudget,\n      totalExpenses,\n      totalRevenues,\n      balance,\n      utilizationRate: totalBudget > 0 ? (totalExpenses / totalBudget) * 100 : 0,\n    };\n  }\n\n  filterByCategory(categoryId) {\n    this.filterCategory = categoryId === this.filterCategory ? 'all' : categoryId;\n    this.renderAdvancedBudget();\n  }\n\n  searchItems(query) {\n    this.searchQuery = query;\n    this.renderAdvancedBudget();\n  }\n\n  renderAdvancedBudget() {\n    const container = document.getElementById('advanced-budget-container') || document.body;\n    const stats = this.getBudgetStats();\n\n    container.innerHTML = `\n      <div class=\"advanced-budget\">\n        <div class=\"header-section\">\n          <h2><i class=\"fas fa-money-bill-wave\"></i> Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ© Ø§Ù„Ù…ØªÙ‚Ø¯Ù…</h2>\n          <div class=\"header-actions\">\n            <button class=\"btn btn-primary\" onclick=\"advancedBudget.showCreateModal()\">\n              <i class=\"fas fa-plus\"></i> Ù…ÙŠØ²Ø§Ù†ÙŠØ© Ø¬Ø¯ÙŠØ¯Ø©\n            </button>\n            <button class=\"btn btn-info\" onclick=\"advancedBudget.refresh()\" ${this.loading ? 'disabled' : ''}>\n              <i class=\"fas fa-sync-alt ${this.loading ? 'fa-spin' : ''}\"></i> ØªØ­Ø¯ÙŠØ«\n            </button>\n          </div>\n        </div>\n\n        <div class=\"stats-section\">\n          <div class=\"stat-card stat-budget\">\n            <div class=\"stat-icon\">\n              <i class=\"fas fa-wallet\"></i>\n            </div>\n            <div class=\"stat-content\">\n              <h3>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ©</h3>\n              <p class=\"stat-value\">${this.formatCurrency(stats.totalBudget)}</p>\n            </div>\n          </div>\n          <div class=\"stat-card stat-expenses\">\n            <div class=\"stat-icon\">\n              <i class=\"fas fa-arrow-down\"></i>\n            </div>\n            <div class=\"stat-content\">\n              <h3>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª</h3>\n              <p class=\"stat-value\">${this.formatCurrency(stats.totalExpenses)}</p>\n            </div>\n          </div>\n          <div class=\"stat-card stat-revenues\">\n            <div class=\"stat-icon\">\n              <i class=\"fas fa-arrow-up\"></i>\n            </div>\n            <div class=\"stat-content\">\n              <h3>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª</h3>\n              <p class=\"stat-value\">${this.formatCurrency(stats.totalRevenues)}</p>\n            </div>\n          </div>\n          <div class=\"stat-card stat-balance ${stats.balance >= 0 ? 'positive' : 'negative'}\">\n            <div class=\"stat-icon\">\n              <i class=\"fas fa-balance-scale\"></i>\n            </div>\n            <div class=\"stat-content\">\n              <h3>Ø§Ù„Ø±ØµÙŠØ¯</h3>\n              <p class=\"stat-value\">${this.formatCurrency(stats.balance)}</p>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"tabs-section\">\n          <button class=\"tab-btn ${this.currentView === 'overview' ? 'active' : ''}\" onclick=\"advancedBudget.switchView('overview')\">\n            <i class=\"fas fa-chart-pie\"></i> Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©\n          </button>\n          <button class=\"tab-btn ${this.currentView === 'budgets' ? 'active' : ''}\" onclick=\"advancedBudget.switchView('budgets')\">\n            <i class=\"fas fa-file-invoice-dollar\"></i> Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ§Øª\n          </button>\n          <button class=\"tab-btn ${this.currentView === 'expenses' ? 'active' : ''}\" onclick=\"advancedBudget.switchView('expenses')\">\n            <i class=\"fas fa-money-check-alt\"></i> Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª\n          </button>\n          <button class=\"tab-btn ${this.currentView === 'revenues' ? 'active' : ''}\" onclick=\"advancedBudget.switchView('revenues')\">\n            <i class=\"fas fa-hand-holding-usd\"></i> Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª\n          </button>\n          <button class=\"tab-btn ${this.currentView === 'categories' ? 'active' : ''}\" onclick=\"advancedBudget.switchView('categories')\">\n            <i class=\"fas fa-tags\"></i> Ø§Ù„ÙØ¦Ø§Øª\n          </button>\n        </div>\n\n        <div class=\"content-section\">\n          ${this.renderCurrentView()}\n        </div>\n      </div>\n    `;\n  }\n\n  renderCurrentView() {\n    switch (this.currentView) {\n      case 'overview':\n        return this.renderOverview();\n      case 'budgets':\n        return this.renderBudgets();\n      case 'expenses':\n        return this.renderExpenses();\n      case 'revenues':\n        return this.renderRevenues();\n      case 'categories':\n        return this.renderCategories();\n      default:\n        return this.renderOverview();\n    }\n  }\n\n  renderOverview() {\n    const stats = this.getBudgetStats();\n    const utilizationRate = stats.utilizationRate;\n\n    return `\n      <div class=\"overview-view\">\n        <div class=\"overview-cards\">\n          <div class=\"overview-card\">\n            <h3>Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…</h3>\n            <div class=\"progress-ring\">\n              <svg class=\"progress-ring-svg\" width=\"120\" height=\"120\">\n                <circle class=\"progress-ring-circle-bg\" cx=\"60\" cy=\"60\" r=\"50\"></circle>\n                <circle class=\"progress-ring-circle\" cx=\"60\" cy=\"60\" r=\"50\" \n                        style=\"stroke-dashoffset: ${314 - (utilizationRate / 100) * 314}\"></circle>\n              </svg>\n              <div class=\"progress-ring-text\">${utilizationRate.toFixed(1)}%</div>\n            </div>\n          </div>\n          <div class=\"overview-card\">\n            <h3>Ø£Ø­Ø¯Ø« Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª</h3>\n            <div class=\"recent-list\">\n              ${\n                this.expenses\n                  .slice(0, 5)\n                  .map(\n                    expense => `\n                <div class=\"recent-item\">\n                  <div class=\"recent-info\">\n                    <span class=\"recent-title\">${expense.description || 'Ù…ØµØ±ÙˆÙ'}</span>\n                    <span class=\"recent-date\">${new Date(expense.date).toLocaleDateString('ar-SA')}</span>\n                  </div>\n                  <span class=\"recent-amount\">${this.formatCurrency(expense.amount || 0)}</span>\n                </div>\n              `\n                  )\n                  .join('') || '<p class=\"empty-state\">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…ØµØ±ÙˆÙØ§Øª</p>'\n              }\n            </div>\n          </div>\n          <div class=\"overview-card\">\n            <h3>Ø£Ø­Ø¯Ø« Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª</h3>\n            <div class=\"recent-list\">\n              ${\n                this.revenues\n                  .slice(0, 5)\n                  .map(\n                    revenue => `\n                <div class=\"recent-item\">\n                  <div class=\"recent-info\">\n                    <span class=\"recent-title\">${revenue.description || 'Ø¥ÙŠØ±Ø§Ø¯'}</span>\n                    <span class=\"recent-date\">${new Date(revenue.date).toLocaleDateString('ar-SA')}</span>\n                  </div>\n                  <span class=\"recent-amount\">${this.formatCurrency(revenue.amount || 0)}</span>\n                </div>\n              `\n                  )\n                  .join('') || '<p class=\"empty-state\">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¥ÙŠØ±Ø§Ø¯Ø§Øª</p>'\n              }\n            </div>\n          </div>\n        </div>\n      </div>\n    `;\n  }\n\n  renderBudgets() {\n    return `\n      <div class=\"budgets-view\">\n        <div class=\"budgets-list\">\n          ${\n            this.budgets\n              .map(budget => {\n                const utilizationRate =\n                  budget.totalAmount > 0 ? (budget.allocatedAmount / budget.totalAmount) * 100 : 0;\n                return `\n              <div class=\"budget-card\">\n                <div class=\"budget-header\">\n                  <h4>${budget.name}</h4>\n                  <span class=\"budget-status status-${budget.status}\">\n                    ${this.getStatusName(budget.status)}\n                  </span>\n                </div>\n                <div class=\"budget-body\">\n                  <div class=\"budget-amounts\">\n                    <div class=\"amount-item\">\n                      <span class=\"amount-label\">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ©:</span>\n                      <span class=\"amount-value\">${this.formatCurrency(budget.totalAmount || 0)}</span>\n                    </div>\n                    <div class=\"amount-item\">\n                      <span class=\"amount-label\">Ø§Ù„Ù…Ø®ØµØµ:</span>\n                      <span class=\"amount-value\">${this.formatCurrency(budget.allocatedAmount || 0)}</span>\n                    </div>\n                    <div class=\"amount-item\">\n                      <span class=\"amount-label\">Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ:</span>\n                      <span class=\"amount-value\">${this.formatCurrency(budget.remainingAmount || 0)}</span>\n                    </div>\n                  </div>\n                  <div class=\"budget-progress\">\n                    <div class=\"progress-bar\">\n                      <div class=\"progress-fill\" style=\"width: ${utilizationRate}%\"></div>\n                    </div>\n                    <span class=\"progress-text\">${utilizationRate.toFixed(1)}% Ù…Ø³ØªØ®Ø¯Ù…</span>\n                  </div>\n                </div>\n                <div class=\"budget-footer\">\n                  <div class=\"budget-actions\">\n                    <button class=\"btn btn-sm btn-primary\" onclick=\"advancedBudget.viewBudget(${budget.id})\">\n                      <i class=\"fas fa-eye\"></i> Ø¹Ø±Ø¶\n                    </button>\n                    <button class=\"btn btn-sm btn-success\" onclick=\"advancedBudget.editBudget(${budget.id})\">\n                      <i class=\"fas fa-edit\"></i> ØªØ¹Ø¯ÙŠÙ„\n                    </button>\n                    <button class=\"btn btn-sm btn-danger\" onclick=\"advancedBudget.deleteBudget(${budget.id})\">\n                      <i class=\"fas fa-trash\"></i> Ø­Ø°Ù\n                    </button>\n                  </div>\n                </div>\n              </div>\n            `;\n              })\n              .join('') || '<p class=\"empty-state\">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…ÙŠØ²Ø§Ù†ÙŠØ§Øª</p>'\n          }\n        </div>\n      </div>\n    `;\n  }\n\n  renderExpenses() {\n    return `\n      <div class=\"expenses-view\">\n        <div class=\"expenses-list\">\n          ${\n            this.expenses\n              .map(\n                expense => `\n            <div class=\"expense-card\">\n              <div class=\"expense-header\">\n                <h4>${expense.description || 'Ù…ØµØ±ÙˆÙ'}</h4>\n                <span class=\"expense-amount\">${this.formatCurrency(expense.amount || 0)}</span>\n              </div>\n              <div class=\"expense-body\">\n                <div class=\"expense-details\">\n                  <div class=\"detail-item\">\n                    <i class=\"fas fa-calendar\"></i>\n                    <span>${new Date(expense.date).toLocaleDateString('ar-SA')}</span>\n                  </div>\n                  <div class=\"detail-item\">\n                    <i class=\"fas fa-tag\"></i>\n                    <span>${expense.category || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</span>\n                  </div>\n                  <div class=\"detail-item\">\n                    <i class=\"fas fa-file-invoice\"></i>\n                    <span>${expense.budgetName || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</span>\n                  </div>\n                </div>\n              </div>\n              <div class=\"expense-footer\">\n                <div class=\"expense-actions\">\n                  <button class=\"btn btn-sm btn-primary\" onclick=\"advancedBudget.viewExpense(${expense.id})\">\n                    <i class=\"fas fa-eye\"></i> Ø¹Ø±Ø¶\n                  </button>\n                  <button class=\"btn btn-sm btn-success\" onclick=\"advancedBudget.editExpense(${expense.id})\">\n                    <i class=\"fas fa-edit\"></i> ØªØ¹Ø¯ÙŠÙ„\n                  </button>\n                  <button class=\"btn btn-sm btn-danger\" onclick=\"advancedBudget.deleteExpense(${expense.id})\">\n                    <i class=\"fas fa-trash\"></i> Ø­Ø°Ù\n                  </button>\n                </div>\n              </div>\n            </div>\n          `\n              )\n              .join('') || '<p class=\"empty-state\">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…ØµØ±ÙˆÙØ§Øª</p>'\n          }\n        </div>\n      </div>\n    `;\n  }\n\n  renderRevenues() {\n    return `\n      <div class=\"revenues-view\">\n        <div class=\"revenues-list\">\n          ${\n            this.revenues\n              .map(\n                revenue => `\n            <div class=\"revenue-card\">\n              <div class=\"revenue-header\">\n                <h4>${revenue.description || 'Ø¥ÙŠØ±Ø§Ø¯'}</h4>\n                <span class=\"revenue-amount\">${this.formatCurrency(revenue.amount || 0)}</span>\n              </div>\n              <div class=\"revenue-body\">\n                <div class=\"revenue-details\">\n                  <div class=\"detail-item\">\n                    <i class=\"fas fa-calendar\"></i>\n                    <span>${new Date(revenue.date).toLocaleDateString('ar-SA')}</span>\n                  </div>\n                  <div class=\"detail-item\">\n                    <i class=\"fas fa-tag\"></i>\n                    <span>${revenue.category || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</span>\n                  </div>\n                  <div class=\"detail-item\">\n                    <i class=\"fas fa-file-invoice\"></i>\n                    <span>${revenue.budgetName || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</span>\n                  </div>\n                </div>\n              </div>\n              <div class=\"revenue-footer\">\n                <div class=\"revenue-actions\">\n                  <button class=\"btn btn-sm btn-primary\" onclick=\"advancedBudget.viewRevenue(${revenue.id})\">\n                    <i class=\"fas fa-eye\"></i> Ø¹Ø±Ø¶\n                  </button>\n                  <button class=\"btn btn-sm btn-success\" onclick=\"advancedBudget.editRevenue(${revenue.id})\">\n                    <i class=\"fas fa-edit\"></i> ØªØ¹Ø¯ÙŠÙ„\n                  </button>\n                  <button class=\"btn btn-sm btn-danger\" onclick=\"advancedBudget.deleteRevenue(${revenue.id})\">\n                    <i class=\"fas fa-trash\"></i> Ø­Ø°Ù\n                  </button>\n                </div>\n              </div>\n            </div>\n          `\n              )\n              .join('') || '<p class=\"empty-state\">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¥ÙŠØ±Ø§Ø¯Ø§Øª</p>'\n          }\n        </div>\n      </div>\n    `;\n  }\n\n  renderCategories() {\n    return `\n      <div class=\"categories-view\">\n        <div class=\"categories-grid\">\n          ${\n            this.categories\n              .map(category => {\n                const categoryExpenses = this.expenses.filter(e => e.categoryId === category.id);\n                const categoryTotal = categoryExpenses.reduce((sum, e) => sum + (e.amount || 0), 0);\n                return `\n              <div class=\"category-card\">\n                <div class=\"category-header\">\n                  <h4>${category.name}</h4>\n                  <span class=\"category-icon\" style=\"background: ${category.color || '#667eea'}\">\n                    <i class=\"${category.icon || 'fas fa-tag'}\"></i>\n                  </span>\n                </div>\n                <div class=\"category-body\">\n                  <div class=\"category-stats\">\n                    <div class=\"stat-item\">\n                      <span>Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª:</span>\n                      <span>${categoryExpenses.length}</span>\n                    </div>\n                    <div class=\"stat-item\">\n                      <span>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª:</span>\n                      <span>${this.formatCurrency(categoryTotal)}</span>\n                    </div>\n                  </div>\n                </div>\n                <div class=\"category-actions\">\n                  <button class=\"btn btn-sm btn-primary\" onclick=\"advancedBudget.viewCategory(${category.id})\">\n                    <i class=\"fas fa-eye\"></i> Ø¹Ø±Ø¶\n                  </button>\n                  <button class=\"btn btn-sm btn-success\" onclick=\"advancedBudget.editCategory(${category.id})\">\n                    <i class=\"fas fa-edit\"></i> ØªØ¹Ø¯ÙŠÙ„\n                  </button>\n                </div>\n              </div>\n            `;\n              })\n              .join('') || '<p class=\"empty-state\">Ù„Ø§ ØªÙˆØ¬Ø¯ ÙØ¦Ø§Øª</p>'\n          }\n        </div>\n      </div>\n    `;\n  }\n\n  formatCurrency(amount) {\n    return new Intl.NumberFormat('ar-SA', {\n      style: 'currency',\n      currency: 'SAR',\n    }).format(amount);\n  }\n\n  getStatusName(status) {\n    const names = {\n      active: 'Ù†Ø´Ø·',\n      inactive: 'ØºÙŠØ± Ù†Ø´Ø·',\n      closed: 'Ù…ØºÙ„Ù‚',\n      draft: 'Ù…Ø³ÙˆØ¯Ø©',\n    };\n    return names[status] || status;\n  }\n\n  switchView(view) {\n    this.currentView = view;\n    this.renderAdvancedBudget();\n  }\n\n  viewBudget(budgetId) {\n    alert(`Ø¹Ø±Ø¶ Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ© #${budgetId} - Ø³ÙŠØªÙ… Ø§Ù„ØªØ·ÙˆÙŠØ± Ù‚Ø±ÙŠØ¨Ø§Ù‹`);\n  }\n\n  editBudget(budgetId) {\n    alert(`ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ© #${budgetId} - Ø³ÙŠØªÙ… Ø§Ù„ØªØ·ÙˆÙŠØ± Ù‚Ø±ÙŠØ¨Ø§Ù‹`);\n  }\n\n  async deleteBudget(budgetId) {\n    if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ©ØŸ')) {\n      return;\n    }\n\n    try {\n      if (this.useAPI && apiClient) {\n        const response = await apiClient.delete(\n          API_ENDPOINTS?.advancedBudget?.budgets?.delete ||\n            `/api/advanced-budget/budgets/${budgetId}`\n        );\n        if (response.data?.success) {\n          if (advancedCache) {\n            advancedCache.clear(['budget']);\n          }\n          await this.loadBudgets();\n          if (typeof showToast === 'function') {\n            showToast('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ©', 'success');\n          }\n        }\n      } else {\n        this.budgets = this.budgets.filter(b => b.id !== budgetId);\n        this.saveBudgetsToStorage();\n        this.renderAdvancedBudget();\n      }\n    } catch (error) {\n      console.error('Error deleting budget:', error);\n      if (typeof showToast === 'function') {\n        showToast('ÙØ´Ù„ Ø­Ø°Ù Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ©', 'error');\n      }\n    }\n  }\n\n  viewExpense(expenseId) {\n    alert(`Ø¹Ø±Ø¶ Ø§Ù„Ù…ØµØ±ÙˆÙ #${expenseId} - Ø³ÙŠØªÙ… Ø§Ù„ØªØ·ÙˆÙŠØ± Ù‚Ø±ÙŠØ¨Ø§Ù‹`);\n  }\n\n  editExpense(expenseId) {\n    alert(`ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…ØµØ±ÙˆÙ #${expenseId} - Ø³ÙŠØªÙ… Ø§Ù„ØªØ·ÙˆÙŠØ± Ù‚Ø±ÙŠØ¨Ø§Ù‹`);\n  }\n\n  deleteExpense(expenseId) {\n    alert(`Ø­Ø°Ù Ø§Ù„Ù…ØµØ±ÙˆÙ #${expenseId} - Ø³ÙŠØªÙ… Ø§Ù„ØªØ·ÙˆÙŠØ± Ù‚Ø±ÙŠØ¨Ø§Ù‹`);\n  }\n\n  viewRevenue(revenueId) {\n    alert(`Ø¹Ø±Ø¶ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯ #${revenueId} - Ø³ÙŠØªÙ… Ø§Ù„ØªØ·ÙˆÙŠØ± Ù‚Ø±ÙŠØ¨Ø§Ù‹`);\n  }\n\n  editRevenue(revenueId) {\n    alert(`ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯ #${revenueId} - Ø³ÙŠØªÙ… Ø§Ù„ØªØ·ÙˆÙŠØ± Ù‚Ø±ÙŠØ¨Ø§Ù‹`);\n  }\n\n  deleteRevenue(revenueId) {\n    alert(`Ø­Ø°Ù Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯ #${revenueId} - Ø³ÙŠØªÙ… Ø§Ù„ØªØ·ÙˆÙŠØ± Ù‚Ø±ÙŠØ¨Ø§Ù‹`);\n  }\n\n  viewCategory(categoryId) {\n    alert(`Ø¹Ø±Ø¶ Ø§Ù„ÙØ¦Ø© #${categoryId} - Ø³ÙŠØªÙ… Ø§Ù„ØªØ·ÙˆÙŠØ± Ù‚Ø±ÙŠØ¨Ø§Ù‹`);\n  }\n\n  editCategory(categoryId) {\n    alert(`ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„ÙØ¦Ø© #${categoryId} - Ø³ÙŠØªÙ… Ø§Ù„ØªØ·ÙˆÙŠØ± Ù‚Ø±ÙŠØ¨Ø§Ù‹`);\n  }\n\n  showCreateModal() {\n    alert('Ù†Ù…ÙˆØ°Ø¬ Ø¥Ù†Ø´Ø§Ø¡ Ù…ÙŠØ²Ø§Ù†ÙŠØ© - Ø³ÙŠØªÙ… Ø§Ù„ØªØ·ÙˆÙŠØ± Ù‚Ø±ÙŠØ¨Ø§Ù‹');\n  }\n\n  async refresh() {\n    if (advancedCache) {\n      advancedCache.clear(['budget']);\n    }\n    await this.loadBudgets();\n    await this.loadExpenses();\n    await this.loadRevenues();\n    await this.loadCategories();\n    if (typeof showToast === 'function') {\n      showToast('ØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ«', 'success');\n    }\n  }\n}\n\n// Initialize advanced budget system\nconst advancedBudget = new RehabilitationCenterAdvancedBudget();\n\n// Make it available globally\nif (typeof window !== 'undefined') {\n  window.advancedBudget = advancedBudget;\n\n  // Enhance with universal module enhancer if available\n  if (window.universalModuleEnhancer) {\n    window.universalModuleEnhancer.enhanceModule(advancedBudget, 'advancedBudget');\n  }\n}\n\n// Export for use in other modules\nif (typeof module !== 'undefined' && module.exports) {\n  module.exports = RehabilitationCenterAdvancedBudget;\n}\n"],"file":"assets/rehabilitation-center-advanced-budget-CtG1qQUL.js"}