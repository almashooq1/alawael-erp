{"version":3,"file":"rehabilitation-center-advanced-call-center-D9man_R0.js","sources":["../../src/rehabilitation-center-advanced-call-center.js"],"sourcesContent":["/**\n * ğŸ“ Advanced Unified Phone System & Intelligent Call Center\n * Ù†Ø¸Ø§Ù… Ø§ØªØµØ§Ù„Ø§Øª Ø§Ù„Ù‡Ø§ØªÙ Ø§Ù„Ù…ÙˆØ­Ø¯ ÙˆÙƒÙˆÙ„ Ø³Ù†ØªØ± Ù…ØªÙƒØ§Ù…Ù„ ÙˆØ°ÙƒÙŠ\n */\n\nimport apiClient from './utils/api-client.js';\nimport { API_ENDPOINTS } from './config/api.js';\nimport connectionManager from './utils/connection-manager.js';\nimport realtimeSync from './utils/realtime-sync.js';\nimport systemEnhancer from './utils/system-enhancer.js';\nimport aiAssistant from './utils/ai-assistant.js';\nimport advancedCache from './utils/advanced-cache.js';\n\nclass AdvancedCallCenterManagement {\n  constructor(container) {\n    this.container = container;\n    this.useAPI = true;\n    this.apiClient = apiClient;\n    this.API_ENDPOINTS = API_ENDPOINTS.advancedCallCenter || {};\n    this.connectionManager = connectionManager;\n    this.realtimeSync = realtimeSync;\n    this.systemEnhancer = systemEnhancer;\n    this.aiAssistant = aiAssistant;\n    this.advancedCache = advancedCache;\n\n    this.unifiedNumber = null;\n    this.branches = [];\n    this.agents = [];\n    this.calls = [];\n    this.queues = [];\n    this.routes = [];\n    this.recordings = [];\n    this.analytics = [];\n    this.ivrMenus = [];\n    this.ivrFlows = [];\n    this.stcIntegration = null;\n\n    this.currentView = 'dashboard';\n    this.filters = {\n      status: 'all',\n      branch: 'all',\n      search: '',\n    };\n\n    this.init();\n  }\n\n  async init() {\n    this.render();\n    this.setupEventListeners();\n    await this.loadData();\n    this.setupRealtimeSync();\n    this.setupConnectionMonitoring();\n    this.setupCallMonitoring();\n  }\n\n  render() {\n    if (!this.container) return;\n\n    this.container.innerHTML = `\n      <div class=\"advanced-call-center-management\">\n        <div class=\"call-center-header\">\n          <h2>ğŸ“ Ù†Ø¸Ø§Ù… Ø§ØªØµØ§Ù„Ø§Øª Ø§Ù„Ù‡Ø§ØªÙ Ø§Ù„Ù…ÙˆØ­Ø¯ ÙˆÙƒÙˆÙ„ Ø³Ù†ØªØ± Ù…ØªÙƒØ§Ù…Ù„ ÙˆØ°ÙƒÙŠ</h2>\n          <div class=\"header-actions\">\n            <button class=\"btn btn-primary\" onclick=\"this.addAgent()\">\n              <i class=\"fas fa-user-plus\"></i> Ø¥Ø¶Ø§ÙØ© ÙˆÙƒÙŠÙ„\n            </button>\n            <button class=\"btn btn-secondary\" onclick=\"this.createQueue()\">\n              <i class=\"fas fa-list\"></i> Ø·Ø§Ø¨ÙˆØ± Ø¬Ø¯ÙŠØ¯\n            </button>\n            <button class=\"btn btn-info\" onclick=\"this.configureRoutes()\">\n              <i class=\"fas fa-route\"></i> ØªÙˆØ¬ÙŠÙ‡ Ø§Ù„Ù…ÙƒØ§Ù„Ù…Ø§Øª\n            </button>\n            <button class=\"btn btn-success\" onclick=\"this.configureIVR()\">\n              <i class=\"fas fa-robot\"></i> Ø§Ù„Ø±Ø¯ Ø§Ù„Ø¢Ù„ÙŠ\n            </button>\n            <button class=\"btn btn-warning\" onclick=\"this.configureSTC()\">\n              <i class=\"fas fa-satellite-dish\"></i> Ø±Ø¨Ø· STC\n            </button>\n          </div>\n        </div>\n\n        <div class=\"call-center-tabs\">\n          <button class=\"tab-btn ${this.currentView === 'dashboard' ? 'active' : ''}\" \n                  onclick=\"this.switchView('dashboard')\">\n            <i class=\"fas fa-tachometer-alt\"></i> Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…\n          </button>\n          <button class=\"tab-btn ${this.currentView === 'unified-number' ? 'active' : ''}\" \n                  onclick=\"this.switchView('unified-number')\">\n            <i class=\"fas fa-phone\"></i> Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ù…ÙˆØ­Ø¯\n          </button>\n          <button class=\"tab-btn ${this.currentView === 'branches' ? 'active' : ''}\" \n                  onclick=\"this.switchView('branches')\">\n            <i class=\"fas fa-building\"></i> Ø§Ù„ÙØ±ÙˆØ¹\n          </button>\n          <button class=\"tab-btn ${this.currentView === 'agents' ? 'active' : ''}\" \n                  onclick=\"this.switchView('agents')\">\n            <i class=\"fas fa-headset\"></i> Ø§Ù„ÙˆÙƒÙ„Ø§Ø¡\n          </button>\n          <button class=\"tab-btn ${this.currentView === 'calls' ? 'active' : ''}\" \n                  onclick=\"this.switchView('calls')\">\n            <i class=\"fas fa-phone-alt\"></i> Ø§Ù„Ù…ÙƒØ§Ù„Ù…Ø§Øª\n          </button>\n          <button class=\"tab-btn ${this.currentView === 'queues' ? 'active' : ''}\" \n                  onclick=\"this.switchView('queues')\">\n            <i class=\"fas fa-list\"></i> Ø§Ù„Ø·ÙˆØ§Ø¨ÙŠØ±\n          </button>\n          <button class=\"tab-btn ${this.currentView === 'routes' ? 'active' : ''}\" \n                  onclick=\"this.switchView('routes')\">\n            <i class=\"fas fa-route\"></i> Ø§Ù„ØªÙˆØ¬ÙŠÙ‡\n          </button>\n          <button class=\"tab-btn ${this.currentView === 'recordings' ? 'active' : ''}\" \n                  onclick=\"this.switchView('recordings')\">\n            <i class=\"fas fa-microphone\"></i> Ø§Ù„ØªØ³Ø¬ÙŠÙ„Ø§Øª\n          </button>\n          <button class=\"tab-btn ${this.currentView === 'analytics' ? 'active' : ''}\" \n                  onclick=\"this.switchView('analytics')\">\n            <i class=\"fas fa-chart-bar\"></i> Ø§Ù„ØªØ­Ù„ÙŠÙ„Ø§Øª\n          </button>\n          <button class=\"tab-btn ${this.currentView === 'ivr' ? 'active' : ''}\" \n                  onclick=\"this.switchView('ivr')\">\n            <i class=\"fas fa-robot\"></i> Ø§Ù„Ø±Ø¯ Ø§Ù„Ø¢Ù„ÙŠ\n          </button>\n          <button class=\"tab-btn ${this.currentView === 'stc-integration' ? 'active' : ''}\" \n                  onclick=\"this.switchView('stc-integration')\">\n            <i class=\"fas fa-satellite-dish\"></i> Ø±Ø¨Ø· STC\n          </button>\n        </div>\n\n        <div class=\"call-center-filters\">\n          <select class=\"filter-select\" onchange=\"this.handleFilterChange('status', event)\">\n            <option value=\"all\">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ø§Ù„Ø§Øª</option>\n            <option value=\"active\">Ù†Ø´Ø·</option>\n            <option value=\"inactive\">ØºÙŠØ± Ù†Ø´Ø·</option>\n            <option value=\"busy\">Ù…Ø´ØºÙˆÙ„</option>\n            <option value=\"available\">Ù…ØªØ§Ø­</option>\n          </select>\n          <select class=\"filter-select\" onchange=\"this.handleFilterChange('branch', event)\">\n            <option value=\"all\">Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙØ±ÙˆØ¹</option>\n            ${this.branches.map(b => `<option value=\"${b.id}\">${b.name}</option>`).join('')}\n          </select>\n          <input type=\"text\" class=\"search-input\" placeholder=\"Ø¨Ø­Ø«...\" \n                 oninput=\"this.handleSearch(event)\">\n        </div>\n\n        <div class=\"call-center-content\" id=\"callCenterContent\">\n          ${this.renderCurrentView()}\n        </div>\n      </div>\n    `;\n  }\n\n  renderCurrentView() {\n    switch (this.currentView) {\n      case 'dashboard':\n        return this.renderDashboard();\n      case 'unified-number':\n        return this.renderUnifiedNumber();\n      case 'branches':\n        return this.renderBranches();\n      case 'agents':\n        return this.renderAgents();\n      case 'calls':\n        return this.renderCalls();\n      case 'queues':\n        return this.renderQueues();\n      case 'routes':\n        return this.renderRoutes();\n      case 'recordings':\n        return this.renderRecordings();\n      case 'analytics':\n        return this.renderAnalytics();\n      case 'ivr':\n        return this.renderIVR();\n      case 'stc-integration':\n        return this.renderSTCIntegration();\n      default:\n        return this.renderDashboard();\n    }\n  }\n\n  renderDashboard() {\n    const activeCalls = this.calls.filter(c => c.status === 'active').length;\n    const waitingCalls = this.calls.filter(c => c.status === 'waiting').length;\n    const availableAgents = this.agents.filter(a => a.status === 'available').length;\n    const busyAgents = this.agents.filter(a => a.status === 'busy').length;\n\n    return `\n      <div class=\"dashboard-grid\">\n        <div class=\"dashboard-card\">\n          <div class=\"card-header\">\n            <h3>Ø§Ù„Ù…ÙƒØ§Ù„Ù…Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø©</h3>\n            <i class=\"fas fa-phone-alt\"></i>\n          </div>\n          <div class=\"card-value\">${activeCalls}</div>\n        </div>\n        <div class=\"dashboard-card\">\n          <div class=\"card-header\">\n            <h3>Ø§Ù„Ù…ÙƒØ§Ù„Ù…Ø§Øª ÙÙŠ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±</h3>\n            <i class=\"fas fa-clock\"></i>\n          </div>\n          <div class=\"card-value\">${waitingCalls}</div>\n        </div>\n        <div class=\"dashboard-card\">\n          <div class=\"card-header\">\n            <h3>Ø§Ù„ÙˆÙƒÙ„Ø§Ø¡ Ø§Ù„Ù…ØªØ§Ø­ÙˆÙ†</h3>\n            <i class=\"fas fa-user-check\"></i>\n          </div>\n          <div class=\"card-value\">${availableAgents}</div>\n        </div>\n        <div class=\"dashboard-card\">\n          <div class=\"card-header\">\n            <h3>Ø§Ù„ÙˆÙƒÙ„Ø§Ø¡ Ø§Ù„Ù…Ø´ØºÙˆÙ„ÙˆÙ†</h3>\n            <i class=\"fas fa-user-clock\"></i>\n          </div>\n          <div class=\"card-value\">${busyAgents}</div>\n        </div>\n        <div class=\"dashboard-card large\">\n          <div class=\"card-header\">\n            <h3>Ø§Ù„Ù…ÙƒØ§Ù„Ù…Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©</h3>\n          </div>\n          <div class=\"active-calls-list\">\n            ${\n              this.calls\n                .filter(c => c.status === 'active')\n                .slice(0, 5)\n                .map(\n                  call => `\n              <div class=\"active-call-item\">\n                <div class=\"call-info\">\n                  <span class=\"call-number\">${call.fromNumber || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ'}</span>\n                  <span class=\"call-duration\">${this.formatDuration(call.duration)}</span>\n                </div>\n                <div class=\"call-agent\">${call.agentName || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</div>\n              </div>\n            `\n                )\n                .join('') || '<p class=\"no-calls\">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…ÙƒØ§Ù„Ù…Ø§Øª Ù†Ø´Ø·Ø©</p>'\n            }\n          </div>\n        </div>\n        <div class=\"dashboard-card large\">\n          <div class=\"card-header\">\n            <h3>Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø³Ø±ÙŠØ¹Ø©</h3>\n          </div>\n          <div class=\"quick-stats\">\n            <div class=\"stat-item\">\n              <span class=\"stat-label\">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ÙƒØ§Ù„Ù…Ø§Øª Ø§Ù„ÙŠÙˆÙ…:</span>\n              <span class=\"stat-value\">${this.calls.filter(c => this.isToday(c.date)).length}</span>\n            </div>\n            <div class=\"stat-item\">\n              <span class=\"stat-label\">Ù…ØªÙˆØ³Ø· ÙˆÙ‚Øª Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±:</span>\n              <span class=\"stat-value\">${this.calculateAverageWaitTime()} Ø¯Ù‚ÙŠÙ‚Ø©</span>\n            </div>\n            <div class=\"stat-item\">\n              <span class=\"stat-label\">Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©:</span>\n              <span class=\"stat-value\">${this.calculateAnswerRate()}%</span>\n            </div>\n            <div class=\"stat-item\">\n              <span class=\"stat-label\">Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø±Ø¶Ø§:</span>\n              <span class=\"stat-value\">${this.calculateSatisfactionRate()}%</span>\n            </div>\n          </div>\n        </div>\n      </div>\n    `;\n  }\n\n  renderUnifiedNumber() {\n    if (!this.unifiedNumber) {\n      return `\n        <div class=\"empty-state\">\n          <i class=\"fas fa-phone\"></i>\n          <p>Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø±Ù‚Ù… Ù…ÙˆØ­Ø¯ Ù…Ø­Ø¯Ø¯</p>\n          <button class=\"btn btn-primary\" onclick=\"this.setupUnifiedNumber()\">\n            Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ù…ÙˆØ­Ø¯\n          </button>\n        </div>\n      `;\n    }\n\n    return `\n      <div class=\"unified-number-dashboard\">\n        <div class=\"unified-number-card\">\n          <div class=\"unified-number-header\">\n            <div class=\"number-icon\">\n              <i class=\"fas fa-phone\"></i>\n            </div>\n            <div class=\"number-info\">\n              <h2>${this.unifiedNumber.number || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</h2>\n              <p class=\"number-status ${this.unifiedNumber.status}\">${this.getStatusText(this.unifiedNumber.status)}</p>\n            </div>\n            <span class=\"status-badge status-${this.unifiedNumber.status}\">${this.getStatusText(this.unifiedNumber.status)}</span>\n          </div>\n          <div class=\"unified-number-body\">\n            <div class=\"number-details\">\n              <div class=\"detail-item\">\n                <span class=\"detail-label\">Ø§Ù„Ù†ÙˆØ¹:</span>\n                <span class=\"detail-value\">${this.unifiedNumber.type || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</span>\n              </div>\n              <div class=\"detail-item\">\n                <span class=\"detail-label\">Ø§Ù„Ù…Ø²ÙˆØ¯:</span>\n                <span class=\"detail-value\">${this.unifiedNumber.provider || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</span>\n              </div>\n              <div class=\"detail-item\">\n                <span class=\"detail-label\">Ø¹Ø¯Ø¯ Ø§Ù„ÙØ±ÙˆØ¹ Ø§Ù„Ù…ØªØµÙ„Ø©:</span>\n                <span class=\"detail-value\">${this.branches.filter(b => b.connected).length}</span>\n              </div>\n              <div class=\"detail-item\">\n                <span class=\"detail-label\">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ÙƒØ§Ù„Ù…Ø§Øª:</span>\n                <span class=\"detail-value\">${this.unifiedNumber.totalCalls || 0}</span>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class=\"branches-connection\">\n          <h3>Ø§Ù„ÙØ±ÙˆØ¹ Ø§Ù„Ù…ØªØµÙ„Ø©</h3>\n          <div class=\"branches-list\">\n            ${this.branches\n              .map(\n                branch => `\n              <div class=\"branch-connection-item ${branch.connected ? 'connected' : 'disconnected'}\">\n                <div class=\"branch-info\">\n                  <h4>${branch.name}</h4>\n                  <p>${branch.phone || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</p>\n                </div>\n                <div class=\"connection-status\">\n                  <span class=\"status-indicator ${branch.connected ? 'active' : 'inactive'}\"></span>\n                  <span>${branch.connected ? 'Ù…ØªØµÙ„' : 'ØºÙŠØ± Ù…ØªØµÙ„'}</span>\n                </div>\n              </div>\n            `\n              )\n              .join('')}\n          </div>\n        </div>\n      </div>\n    `;\n  }\n\n  renderBranches() {\n    if (this.branches.length === 0) {\n      return `\n        <div class=\"empty-state\">\n          <i class=\"fas fa-building\"></i>\n          <p>Ù„Ø§ ØªÙˆØ¬Ø¯ ÙØ±ÙˆØ¹</p>\n        </div>\n      `;\n    }\n\n    return `\n      <div class=\"branches-grid\">\n        ${this.branches\n          .map(\n            branch => `\n          <div class=\"branch-card status-${branch.status}\">\n            <div class=\"branch-header\">\n              <h3>${branch.name || 'ÙØ±Ø¹'}</h3>\n              <span class=\"status-badge status-${branch.status}\">${this.getStatusText(branch.status)}</span>\n            </div>\n            <div class=\"branch-body\">\n              <div class=\"branch-details\">\n                <div class=\"detail-item\">\n                  <span class=\"detail-label\">Ø§Ù„Ù‡Ø§ØªÙ:</span>\n                  <span class=\"detail-value\">${branch.phone || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</span>\n                </div>\n                <div class=\"detail-item\">\n                  <span class=\"detail-label\">Ø­Ø§Ù„Ø© Ø§Ù„Ø§ØªØµØ§Ù„:</span>\n                  <span class=\"detail-value ${branch.connected ? 'connected' : 'disconnected'}\">\n                    ${branch.connected ? 'Ù…ØªØµÙ„' : 'ØºÙŠØ± Ù…ØªØµÙ„'}\n                  </span>\n                </div>\n                <div class=\"detail-item\">\n                  <span class=\"detail-label\">Ø¹Ø¯Ø¯ Ø§Ù„ÙˆÙƒÙ„Ø§Ø¡:</span>\n                  <span class=\"detail-value\">${branch.agentsCount || 0}</span>\n                </div>\n                <div class=\"detail-item\">\n                  <span class=\"detail-label\">Ø§Ù„Ù…ÙƒØ§Ù„Ù…Ø§Øª Ø§Ù„ÙŠÙˆÙ…:</span>\n                  <span class=\"detail-value\">${branch.todayCalls || 0}</span>\n                </div>\n              </div>\n            </div>\n          </div>\n        `\n          )\n          .join('')}\n      </div>\n    `;\n  }\n\n  renderAgents() {\n    if (this.agents.length === 0) {\n      return `\n        <div class=\"empty-state\">\n          <i class=\"fas fa-headset\"></i>\n          <p>Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙˆÙƒÙ„Ø§Ø¡</p>\n          <button class=\"btn btn-primary\" onclick=\"this.addAgent()\">\n            Ø¥Ø¶Ø§ÙØ© ÙˆÙƒÙŠÙ„ Ø¬Ø¯ÙŠØ¯\n          </button>\n        </div>\n      `;\n    }\n\n    return `\n      <div class=\"agents-grid\">\n        ${this.agents\n          .map(\n            agent => `\n          <div class=\"agent-card status-${agent.status}\">\n            <div class=\"agent-header\">\n              <div class=\"agent-avatar\">\n                <i class=\"fas fa-user\"></i>\n              </div>\n              <div class=\"agent-info\">\n                <h3>${agent.name || 'ÙˆÙƒÙŠÙ„'}</h3>\n                <p class=\"agent-extension\">${agent.extension || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</p>\n              </div>\n              <span class=\"status-badge status-${agent.status}\">${this.getStatusText(agent.status)}</span>\n            </div>\n            <div class=\"agent-body\">\n              <div class=\"agent-details\">\n                <div class=\"detail-item\">\n                  <span class=\"detail-label\">Ø§Ù„ÙØ±Ø¹:</span>\n                  <span class=\"detail-value\">${agent.branchName || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</span>\n                </div>\n                <div class=\"detail-item\">\n                  <span class=\"detail-label\">Ø§Ù„Ù…ÙƒØ§Ù„Ù…Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø©:</span>\n                  <span class=\"detail-value\">${agent.activeCalls || 0}</span>\n                </div>\n                <div class=\"detail-item\">\n                  <span class=\"detail-label\">Ø§Ù„Ù…ÙƒØ§Ù„Ù…Ø§Øª Ø§Ù„ÙŠÙˆÙ…:</span>\n                  <span class=\"detail-value\">${agent.todayCalls || 0}</span>\n                </div>\n                <div class=\"detail-item\">\n                  <span class=\"detail-label\">Ù…ØªÙˆØ³Ø· ÙˆÙ‚Øª Ø§Ù„Ù…ÙƒØ§Ù„Ù…Ø©:</span>\n                  <span class=\"detail-value\">${this.formatDuration(agent.avgCallDuration || 0)}</span>\n                </div>\n              </div>\n            </div>\n          </div>\n        `\n          )\n          .join('')}\n      </div>\n    `;\n  }\n\n  renderCalls() {\n    const filtered = this.getFilteredCalls();\n\n    if (filtered.length === 0) {\n      return `\n        <div class=\"empty-state\">\n          <i class=\"fas fa-phone-alt\"></i>\n          <p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…ÙƒØ§Ù„Ù…Ø§Øª</p>\n        </div>\n      `;\n    }\n\n    return `\n      <div class=\"calls-list\">\n        ${filtered\n          .map(\n            call => `\n          <div class=\"call-card status-${call.status}\">\n            <div class=\"call-header\">\n              <div class=\"call-number-info\">\n                <span class=\"call-from\">${call.fromNumber || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ'}</span>\n                <span class=\"call-to\">â†’ ${call.toNumber || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ'}</span>\n              </div>\n              <span class=\"status-badge status-${call.status}\">${this.getStatusText(call.status)}</span>\n            </div>\n            <div class=\"call-body\">\n              <div class=\"call-details\">\n                <div class=\"detail-item\">\n                  <span class=\"detail-label\">Ø§Ù„ÙˆÙƒÙŠÙ„:</span>\n                  <span class=\"detail-value\">${call.agentName || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</span>\n                </div>\n                <div class=\"detail-item\">\n                  <span class=\"detail-label\">Ø§Ù„ÙØ±Ø¹:</span>\n                  <span class=\"detail-value\">${call.branchName || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</span>\n                </div>\n                <div class=\"detail-item\">\n                  <span class=\"detail-label\">Ø§Ù„ØªØ§Ø±ÙŠØ®:</span>\n                  <span class=\"detail-value\">${this.formatDate(call.date)}</span>\n                </div>\n                <div class=\"detail-item\">\n                  <span class=\"detail-label\">Ø§Ù„Ù…Ø¯Ø©:</span>\n                  <span class=\"detail-value\">${this.formatDuration(call.duration)}</span>\n                </div>\n              </div>\n            </div>\n          </div>\n        `\n          )\n          .join('')}\n      </div>\n    `;\n  }\n\n  renderQueues() {\n    if (this.queues.length === 0) {\n      return `\n        <div class=\"empty-state\">\n          <i class=\"fas fa-list\"></i>\n          <p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·ÙˆØ§Ø¨ÙŠØ±</p>\n          <button class=\"btn btn-primary\" onclick=\"this.createQueue()\">\n            Ø¥Ù†Ø´Ø§Ø¡ Ø·Ø§Ø¨ÙˆØ± Ø¬Ø¯ÙŠØ¯\n          </button>\n        </div>\n      `;\n    }\n\n    return `\n      <div class=\"queues-list\">\n        ${this.queues\n          .map(\n            queue => `\n          <div class=\"queue-card status-${queue.status}\">\n            <div class=\"queue-header\">\n              <h3>${queue.name || 'Ø·Ø§Ø¨ÙˆØ±'}</h3>\n              <span class=\"status-badge status-${queue.status}\">${this.getStatusText(queue.status)}</span>\n            </div>\n            <div class=\"queue-body\">\n              <div class=\"queue-details\">\n                <div class=\"detail-item\">\n                  <span class=\"detail-label\">Ø§Ù„Ù…ÙƒØ§Ù„Ù…Ø§Øª ÙÙŠ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±:</span>\n                  <span class=\"detail-value\">${queue.waitingCalls || 0}</span>\n                </div>\n                <div class=\"detail-item\">\n                  <span class=\"detail-label\">Ù…ØªÙˆØ³Ø· ÙˆÙ‚Øª Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±:</span>\n                  <span class=\"detail-value\">${this.formatDuration(queue.avgWaitTime || 0)}</span>\n                </div>\n                <div class=\"detail-item\">\n                  <span class=\"detail-label\">Ø¹Ø¯Ø¯ Ø§Ù„ÙˆÙƒÙ„Ø§Ø¡:</span>\n                  <span class=\"detail-value\">${queue.agentsCount || 0}</span>\n                </div>\n                <div class=\"detail-item\">\n                  <span class=\"detail-label\">Ø£Ø·ÙˆÙ„ ÙˆÙ‚Øª Ø§Ù†ØªØ¸Ø§Ø±:</span>\n                  <span class=\"detail-value\">${this.formatDuration(queue.maxWaitTime || 0)}</span>\n                </div>\n              </div>\n            </div>\n          </div>\n        `\n          )\n          .join('')}\n      </div>\n    `;\n  }\n\n  renderRoutes() {\n    if (this.routes.length === 0) {\n      return `\n        <div class=\"empty-state\">\n          <i class=\"fas fa-route\"></i>\n          <p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù‚ÙˆØ§Ø¹Ø¯ ØªÙˆØ¬ÙŠÙ‡</p>\n          <button class=\"btn btn-primary\" onclick=\"this.configureRoutes()\">\n            Ø¥Ø¹Ø¯Ø§Ø¯ Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„ØªÙˆØ¬ÙŠÙ‡\n          </button>\n        </div>\n      `;\n    }\n\n    return `\n      <div class=\"routes-list\">\n        ${this.routes\n          .map(\n            route => `\n          <div class=\"route-card status-${route.status}\">\n            <div class=\"route-header\">\n              <h3>${route.name || 'Ù‚Ø§Ø¹Ø¯Ø© ØªÙˆØ¬ÙŠÙ‡'}</h3>\n              <span class=\"status-badge status-${route.status}\">${this.getStatusText(route.status)}</span>\n            </div>\n            <div class=\"route-body\">\n              <div class=\"route-details\">\n                <div class=\"detail-item\">\n                  <span class=\"detail-label\">Ø§Ù„Ø´Ø±Ø·:</span>\n                  <span class=\"detail-value\">${route.condition || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</span>\n                </div>\n                <div class=\"detail-item\">\n                  <span class=\"detail-label\">Ø§Ù„ØªÙˆØ¬ÙŠÙ‡ Ø¥Ù„Ù‰:</span>\n                  <span class=\"detail-value\">${route.target || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</span>\n                </div>\n                <div class=\"detail-item\">\n                  <span class=\"detail-label\">Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©:</span>\n                  <span class=\"detail-value\">${route.priority || 0}</span>\n                </div>\n                <div class=\"detail-item\">\n                  <span class=\"detail-label\">Ø§Ù„Ù…ÙƒØ§Ù„Ù…Ø§Øª Ø§Ù„Ù…Ø·Ø¨Ù‚Ø©:</span>\n                  <span class=\"detail-value\">${route.appliedCalls || 0}</span>\n                </div>\n              </div>\n            </div>\n          </div>\n        `\n          )\n          .join('')}\n      </div>\n    `;\n  }\n\n  renderRecordings() {\n    if (this.recordings.length === 0) {\n      return `\n        <div class=\"empty-state\">\n          <i class=\"fas fa-microphone\"></i>\n          <p>Ù„Ø§ ØªÙˆØ¬Ø¯ ØªØ³Ø¬ÙŠÙ„Ø§Øª</p>\n        </div>\n      `;\n    }\n\n    return `\n      <div class=\"recordings-list\">\n        ${this.recordings\n          .map(\n            recording => `\n          <div class=\"recording-card\">\n            <div class=\"recording-header\">\n              <h3>${recording.callNumber || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ'}</h3>\n              <span class=\"recording-duration\">${this.formatDuration(recording.duration)}</span>\n            </div>\n            <div class=\"recording-body\">\n              <div class=\"recording-details\">\n                <div class=\"detail-item\">\n                  <span class=\"detail-label\">Ø§Ù„ØªØ§Ø±ÙŠØ®:</span>\n                  <span class=\"detail-value\">${this.formatDate(recording.date)}</span>\n                </div>\n                <div class=\"detail-item\">\n                  <span class=\"detail-label\">Ø§Ù„ÙˆÙƒÙŠÙ„:</span>\n                  <span class=\"detail-value\">${recording.agentName || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</span>\n                </div>\n                <div class=\"detail-item\">\n                  <span class=\"detail-label\">Ø§Ù„Ø­Ø¬Ù…:</span>\n                  <span class=\"detail-value\">${this.formatFileSize(recording.size)}</span>\n                </div>\n              </div>\n              <div class=\"recording-actions\">\n                <button class=\"btn btn-sm btn-primary\" onclick=\"this.playRecording(${recording.id})\">\n                  <i class=\"fas fa-play\"></i> ØªØ´ØºÙŠÙ„\n                </button>\n                <button class=\"btn btn-sm btn-secondary\" onclick=\"this.downloadRecording(${recording.id})\">\n                  <i class=\"fas fa-download\"></i> ØªØ­Ù…ÙŠÙ„\n                </button>\n              </div>\n            </div>\n          </div>\n        `\n          )\n          .join('')}\n      </div>\n    `;\n  }\n\n  renderAnalytics() {\n    if (this.analytics.length === 0) {\n      return `\n        <div class=\"empty-state\">\n          <i class=\"fas fa-chart-bar\"></i>\n          <p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª ØªØ­Ù„ÙŠÙ„ÙŠØ©</p>\n        </div>\n      `;\n    }\n\n    return `\n      <div class=\"analytics-dashboard\">\n        ${this.analytics\n          .map(\n            analytic => `\n          <div class=\"analytic-card\">\n            <div class=\"analytic-header\">\n              <h3>${analytic.metric}</h3>\n              <span class=\"analytic-value\">${analytic.value}</span>\n            </div>\n            <div class=\"analytic-body\">\n              <p>${analytic.description || ''}</p>\n            </div>\n          </div>\n        `\n          )\n          .join('')}\n      </div>\n    `;\n  }\n\n  renderIVR() {\n    return `\n      <div class=\"ivr-dashboard\">\n        <div class=\"ivr-header-section\">\n          <div class=\"ivr-status-card\">\n            <h3>Ø­Ø§Ù„Ø© Ù†Ø¸Ø§Ù… Ø§Ù„Ø±Ø¯ Ø§Ù„Ø¢Ù„ÙŠ</h3>\n            <div class=\"ivr-status ${this.ivrMenus.length > 0 ? 'active' : 'inactive'}\">\n              <span class=\"status-indicator ${this.ivrMenus.length > 0 ? 'active' : 'inactive'}\"></span>\n              <span>${this.ivrMenus.length > 0 ? 'Ù†Ø´Ø·' : 'ØºÙŠØ± Ù†Ø´Ø·'}</span>\n            </div>\n            <button class=\"btn btn-primary\" onclick=\"this.createIVRMenu()\">\n              <i class=\"fas fa-plus\"></i> Ø¥Ù†Ø´Ø§Ø¡ Ù‚Ø§Ø¦Ù…Ø© Ø±Ø¯ Ø¢Ù„ÙŠ Ø¬Ø¯ÙŠØ¯Ø©\n            </button>\n          </div>\n        </div>\n\n        <div class=\"ivr-menus-section\">\n          <h3>Ù‚ÙˆØ§Ø¦Ù… Ø§Ù„Ø±Ø¯ Ø§Ù„Ø¢Ù„ÙŠ</h3>\n          ${\n            this.ivrMenus.length === 0\n              ? `\n            <div class=\"empty-state\">\n              <i class=\"fas fa-robot\"></i>\n              <p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù‚ÙˆØ§Ø¦Ù… Ø±Ø¯ Ø¢Ù„ÙŠ</p>\n              <button class=\"btn btn-primary\" onclick=\"this.createIVRMenu()\">\n                Ø¥Ù†Ø´Ø§Ø¡ Ù‚Ø§Ø¦Ù…Ø© Ø¬Ø¯ÙŠØ¯Ø©\n              </button>\n            </div>\n          `\n              : `\n            <div class=\"ivr-menus-grid\">\n              ${this.ivrMenus\n                .map(\n                  menu => `\n                <div class=\"ivr-menu-card status-${menu.status}\">\n                  <div class=\"ivr-menu-header\">\n                    <h4>${menu.name || 'Ù‚Ø§Ø¦Ù…Ø© Ø±Ø¯ Ø¢Ù„ÙŠ'}</h4>\n                    <span class=\"status-badge status-${menu.status}\">${this.getStatusText(menu.status)}</span>\n                  </div>\n                  <div class=\"ivr-menu-body\">\n                    <div class=\"ivr-menu-details\">\n                      <div class=\"detail-item\">\n                        <span class=\"detail-label\">Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªØ±Ø­ÙŠØ¨ÙŠØ©:</span>\n                        <span class=\"detail-value\">${menu.welcomeMessage ? 'Ù…Ø­Ø¯Ø¯Ø©' : 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯Ø©'}</span>\n                      </div>\n                      <div class=\"detail-item\">\n                        <span class=\"detail-label\">Ø¹Ø¯Ø¯ Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª:</span>\n                        <span class=\"detail-value\">${menu.options?.length || 0}</span>\n                      </div>\n                      <div class=\"detail-item\">\n                        <span class=\"detail-label\">Ø§Ù„Ù…ÙƒØ§Ù„Ù…Ø§Øª Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©:</span>\n                        <span class=\"detail-value\">${menu.processedCalls || 0}</span>\n                      </div>\n                    </div>\n                    <div class=\"ivr-menu-options\">\n                      <h5>Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª:</h5>\n                      ${\n                        menu.options\n                          ?.map(\n                            (option, index) => `\n                        <div class=\"ivr-option-item\">\n                          <span class=\"option-key\">${option.key}</span>\n                          <span class=\"option-action\">${this.getIVRActionText(option.action)}</span>\n                        </div>\n                      `\n                          )\n                          .join('') || '<p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø®ÙŠØ§Ø±Ø§Øª</p>'\n                      }\n                    </div>\n                  </div>\n                  <div class=\"ivr-menu-actions\">\n                    <button class=\"btn btn-sm btn-primary\" onclick=\"this.editIVRMenu(${menu.id})\">\n                      <i class=\"fas fa-edit\"></i> ØªØ¹Ø¯ÙŠÙ„\n                    </button>\n                    <button class=\"btn btn-sm btn-secondary\" onclick=\"this.testIVRMenu(${menu.id})\">\n                      <i class=\"fas fa-play\"></i> Ø§Ø®ØªØ¨Ø§Ø±\n                    </button>\n                  </div>\n                </div>\n              `\n                )\n                .join('')}\n            </div>\n          `\n          }\n        </div>\n\n        <div class=\"ivr-flows-section\">\n          <h3>ØªØ¯ÙÙ‚Ø§Øª Ø§Ù„Ø±Ø¯ Ø§Ù„Ø¢Ù„ÙŠ</h3>\n          ${\n            this.ivrFlows.length === 0\n              ? `\n            <div class=\"empty-state\">\n              <i class=\"fas fa-project-diagram\"></i>\n              <p>Ù„Ø§ ØªÙˆØ¬Ø¯ ØªØ¯ÙÙ‚Ø§Øª</p>\n            </div>\n          `\n              : `\n            <div class=\"ivr-flows-list\">\n              ${this.ivrFlows\n                .map(\n                  flow => `\n                <div class=\"ivr-flow-card\">\n                  <div class=\"ivr-flow-header\">\n                    <h4>${flow.name || 'ØªØ¯ÙÙ‚'}</h4>\n                    <span class=\"status-badge status-${flow.status}\">${this.getStatusText(flow.status)}</span>\n                  </div>\n                  <div class=\"ivr-flow-body\">\n                    <div class=\"flow-steps\">\n                      ${\n                        flow.steps\n                          ?.map(\n                            (step, index) => `\n                        <div class=\"flow-step\">\n                          <span class=\"step-number\">${index + 1}</span>\n                          <span class=\"step-description\">${step.description || 'Ø®Ø·ÙˆØ©'}</span>\n                        </div>\n                      `\n                          )\n                          .join('') || ''\n                      }\n                    </div>\n                  </div>\n                </div>\n              `\n                )\n                .join('')}\n            </div>\n          `\n          }\n        </div>\n      </div>\n    `;\n  }\n\n  renderSTCIntegration() {\n    if (!this.stcIntegration) {\n      return `\n        <div class=\"stc-integration-setup\">\n          <div class=\"setup-card\">\n            <h3>Ø±Ø¨Ø· Ù…Ø¹ Ø§Ù„Ø§ØªØµØ§Ù„Ø§Øª Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ© (STC)</h3>\n            <p>Ù‚Ù… Ø¨Ø¥Ø¹Ø¯Ø§Ø¯ Ø±Ø¨Ø· Ù†Ø¸Ø§Ù… Ø§Ù„ÙƒÙˆÙ„ Ø³Ù†ØªØ± Ù…Ø¹ Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø§ØªØµØ§Ù„Ø§Øª Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©</p>\n            <button class=\"btn btn-primary\" onclick=\"this.setupSTCIntegration()\">\n              <i class=\"fas fa-plug\"></i> Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø±Ø¨Ø·\n            </button>\n          </div>\n        </div>\n      `;\n    }\n\n    return `\n      <div class=\"stc-integration-dashboard\">\n        <div class=\"stc-status-card\">\n          <div class=\"stc-header\">\n            <div class=\"stc-icon\">\n              <i class=\"fas fa-satellite-dish\"></i>\n            </div>\n            <div class=\"stc-info\">\n              <h2>Ø§Ù„Ø§ØªØµØ§Ù„Ø§Øª Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ© (STC)</h2>\n              <p class=\"stc-status ${this.stcIntegration.status}\">${this.getStatusText(this.stcIntegration.status)}</p>\n            </div>\n            <span class=\"status-badge status-${this.stcIntegration.status}\">${this.getStatusText(this.stcIntegration.status)}</span>\n          </div>\n          <div class=\"stc-details\">\n            <div class=\"detail-item\">\n              <span class=\"detail-label\">Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ù…ÙˆØ­Ø¯:</span>\n              <span class=\"detail-value\">${this.stcIntegration.unifiedNumber || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</span>\n            </div>\n            <div class=\"detail-item\">\n              <span class=\"detail-label\">Ù†ÙˆØ¹ Ø§Ù„Ø®Ø¯Ù…Ø©:</span>\n              <span class=\"detail-value\">${this.stcIntegration.serviceType || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</span>\n            </div>\n            <div class=\"detail-item\">\n              <span class=\"detail-label\">Ø­Ø§Ù„Ø© Ø§Ù„Ø§ØªØµØ§Ù„:</span>\n              <span class=\"detail-value ${this.stcIntegration.connected ? 'connected' : 'disconnected'}\">\n                ${this.stcIntegration.connected ? 'Ù…ØªØµÙ„' : 'ØºÙŠØ± Ù…ØªØµÙ„'}\n              </span>\n            </div>\n            <div class=\"detail-item\">\n              <span class=\"detail-label\">Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«:</span>\n              <span class=\"detail-value\">${this.formatDate(this.stcIntegration.lastSync)}</span>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"stc-branches-section\">\n          <h3>Ø§Ù„ÙØ±ÙˆØ¹ Ø§Ù„Ù…ØªØµÙ„Ø©</h3>\n          <div class=\"stc-branches-list\">\n            ${this.branches\n              .map(\n                branch => `\n              <div class=\"stc-branch-item ${branch.stcConnected ? 'connected' : 'disconnected'}\">\n                <div class=\"branch-info\">\n                  <h4>${branch.name}</h4>\n                  <p>${branch.phone || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</p>\n                </div>\n                <div class=\"stc-connection-status\">\n                  <span class=\"status-indicator ${branch.stcConnected ? 'active' : 'inactive'}\"></span>\n                  <span>${branch.stcConnected ? 'Ù…ØªØµÙ„ Ø¨Ù€ STC' : 'ØºÙŠØ± Ù…ØªØµÙ„'}</span>\n                </div>\n              </div>\n            `\n              )\n              .join('')}\n          </div>\n        </div>\n\n        <div class=\"stc-features-section\">\n          <h3>Ø§Ù„Ù…ÙŠØ²Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø©</h3>\n          <div class=\"stc-features-grid\">\n            <div class=\"stc-feature-card\">\n              <i class=\"fas fa-phone-volume\"></i>\n              <h4>Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ù…ÙˆØ­Ø¯</h4>\n              <p>Ø±Ø¨Ø· Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙØ±ÙˆØ¹ Ø¨Ø±Ù‚Ù… Ù…ÙˆØ­Ø¯</p>\n            </div>\n            <div class=\"stc-feature-card\">\n              <i class=\"fas fa-route\"></i>\n              <h4>Ø§Ù„ØªÙˆØ¬ÙŠÙ‡ Ø§Ù„Ø°ÙƒÙŠ</h4>\n              <p>ØªÙˆØ¬ÙŠÙ‡ Ø§Ù„Ù…ÙƒØ§Ù„Ù…Ø§Øª ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹</p>\n            </div>\n            <div class=\"stc-feature-card\">\n              <i class=\"fas fa-robot\"></i>\n              <h4>Ø§Ù„Ø±Ø¯ Ø§Ù„Ø¢Ù„ÙŠ</h4>\n              <p>Ù†Ø¸Ø§Ù… Ø±Ø¯ Ø¢Ù„ÙŠ Ø°ÙƒÙŠ</p>\n            </div>\n            <div class=\"stc-feature-card\">\n              <i class=\"fas fa-chart-line\"></i>\n              <h4>Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</h4>\n              <p>ØªÙ‚Ø§Ø±ÙŠØ± Ø´Ø§Ù…Ù„Ø© ÙˆÙ…ÙØµÙ„Ø©</p>\n            </div>\n          </div>\n        </div>\n      </div>\n    `;\n  }\n\n  getIVRActionText(action) {\n    const actionMap = {\n      transfer: 'ØªØ­ÙˆÙŠÙ„',\n      queue: 'Ø·Ø§Ø¨ÙˆØ±',\n      voicemail: 'Ø¨Ø±ÙŠØ¯ ØµÙˆØªÙŠ',\n      hangup: 'Ø¥Ù†Ù‡Ø§Ø¡',\n      menu: 'Ù‚Ø§Ø¦Ù…Ø©',\n      agent: 'ÙˆÙƒÙŠÙ„',\n    };\n    return actionMap[action] || action;\n  }\n\n  getFilteredCalls() {\n    let filtered = [...this.calls];\n    if (this.filters.status !== 'all') {\n      filtered = filtered.filter(c => c.status === this.filters.status);\n    }\n    if (this.filters.branch !== 'all') {\n      filtered = filtered.filter(c => c.branchId === parseInt(this.filters.branch));\n    }\n    if (this.filters.search) {\n      const search = this.filters.search.toLowerCase();\n      filtered = filtered.filter(\n        c =>\n          (c.fromNumber && c.fromNumber.includes(search)) ||\n          (c.toNumber && c.toNumber.includes(search)) ||\n          (c.agentName && c.agentName.toLowerCase().includes(search))\n      );\n    }\n    return filtered;\n  }\n\n  async loadData() {\n    if (!this.useAPI) {\n      this.loadFromLocalStorage();\n      return;\n    }\n\n    try {\n      if (!this.connectionManager.isFullyConnected()) {\n        this.loadFromLocalStorage();\n        return;\n      }\n\n      const [\n        unifiedNumber,\n        branches,\n        agents,\n        calls,\n        queues,\n        routes,\n        recordings,\n        analytics,\n        ivrMenus,\n        ivrFlows,\n        stcIntegration,\n      ] = await Promise.all([\n        this.apiClient.get(\n          this.API_ENDPOINTS.unifiedNumber || '/api/advanced-call-center/unified-number'\n        ),\n        this.apiClient.get(this.API_ENDPOINTS.branches || '/api/advanced-call-center/branches'),\n        this.apiClient.get(this.API_ENDPOINTS.agents || '/api/advanced-call-center/agents'),\n        this.apiClient.get(this.API_ENDPOINTS.calls || '/api/advanced-call-center/calls'),\n        this.apiClient.get(this.API_ENDPOINTS.queues || '/api/advanced-call-center/queues'),\n        this.apiClient.get(this.API_ENDPOINTS.routes || '/api/advanced-call-center/routes'),\n        this.apiClient.get(this.API_ENDPOINTS.recordings || '/api/advanced-call-center/recordings'),\n        this.apiClient.get(this.API_ENDPOINTS.analytics || '/api/advanced-call-center/analytics'),\n        this.apiClient.get(this.API_ENDPOINTS.ivrMenus || '/api/advanced-call-center/ivr-menus'),\n        this.apiClient.get(this.API_ENDPOINTS.ivrFlows || '/api/advanced-call-center/ivr-flows'),\n        this.apiClient.get(\n          this.API_ENDPOINTS.stcIntegration || '/api/advanced-call-center/stc-integration'\n        ),\n      ]);\n\n      this.unifiedNumber = unifiedNumber.data || null;\n      this.branches = branches.data || [];\n      this.agents = agents.data || [];\n      this.calls = calls.data || [];\n      this.queues = queues.data || [];\n      this.routes = routes.data || [];\n      this.recordings = recordings.data || [];\n      this.analytics = analytics.data || [];\n      this.ivrMenus = ivrMenus.data || [];\n      this.ivrFlows = ivrFlows.data || [];\n      this.stcIntegration = stcIntegration.data || null;\n\n      this.saveToLocalStorage();\n      this.updateContent();\n    } catch (error) {\n      console.error('Error loading call center data:', error);\n      this.loadFromLocalStorage();\n    }\n  }\n\n  setupRealtimeSync() {\n    if (!this.realtimeSync) return;\n    this.realtimeSync.subscribe('advanced-call-center', '*', update => {\n      if (update.action === 'create' || update.action === 'update' || update.action === 'delete') {\n        this.loadData();\n      }\n    });\n  }\n\n  setupConnectionMonitoring() {\n    if (!this.connectionManager) return;\n    this.connectionManager.on('online', () => {\n      this.loadData();\n    });\n  }\n\n  setupCallMonitoring() {\n    // Monitor calls in real-time\n    setInterval(() => {\n      if (this.currentView === 'dashboard' || this.currentView === 'calls') {\n        this.loadData();\n      }\n    }, 5000); // Update every 5 seconds\n  }\n\n  switchView(view) {\n    this.currentView = view;\n    this.updateContent();\n  }\n\n  handleFilterChange(type, event) {\n    this.filters[type] = event.target.value;\n    this.updateContent();\n  }\n\n  handleSearch(event) {\n    this.filters.search = event.target.value;\n    this.updateContent();\n  }\n\n  updateContent() {\n    const content = document.getElementById('callCenterContent');\n    if (content) {\n      content.innerHTML = this.renderCurrentView();\n    }\n  }\n\n  getStatusText(status) {\n    const statusMap = {\n      active: 'Ù†Ø´Ø·',\n      inactive: 'ØºÙŠØ± Ù†Ø´Ø·',\n      busy: 'Ù…Ø´ØºÙˆÙ„',\n      available: 'Ù…ØªØ§Ø­',\n      waiting: 'ÙÙŠ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±',\n      completed: 'Ù…ÙƒØªÙ…Ù„',\n      missed: 'ÙØ§Ø¦Øª',\n      connected: 'Ù…ØªØµÙ„',\n      disconnected: 'ØºÙŠØ± Ù…ØªØµÙ„',\n    };\n    return statusMap[status] || status;\n  }\n\n  formatDate(date) {\n    if (!date) return 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯';\n    return new Date(date).toLocaleDateString('ar-SA');\n  }\n\n  formatDuration(seconds) {\n    if (!seconds) return '00:00';\n    const mins = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\n  }\n\n  formatFileSize(bytes) {\n    if (!bytes) return '0 B';\n    const sizes = ['B', 'KB', 'MB', 'GB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(1024));\n    return `${(bytes / Math.pow(1024, i)).toFixed(2)} ${sizes[i]}`;\n  }\n\n  isToday(date) {\n    if (!date) return false;\n    const today = new Date();\n    const callDate = new Date(date);\n    return today.toDateString() === callDate.toDateString();\n  }\n\n  calculateAverageWaitTime() {\n    const waitingCalls = this.calls.filter(c => c.waitTime > 0);\n    if (waitingCalls.length === 0) return 0;\n    const total = waitingCalls.reduce((sum, c) => sum + (c.waitTime || 0), 0);\n    return Math.round(total / waitingCalls.length / 60); // Convert to minutes\n  }\n\n  calculateAnswerRate() {\n    const total = this.calls.length;\n    if (total === 0) return 0;\n    const answered = this.calls.filter(c => c.status === 'completed').length;\n    return Math.round((answered / total) * 100);\n  }\n\n  calculateSatisfactionRate() {\n    const ratedCalls = this.calls.filter(c => c.rating > 0);\n    if (ratedCalls.length === 0) return 0;\n    const total = ratedCalls.reduce((sum, c) => sum + (c.rating || 0), 0);\n    return Math.round((total / ratedCalls.length / 5) * 100);\n  }\n\n  saveToLocalStorage() {\n    try {\n      localStorage.setItem('advancedUnifiedNumber', JSON.stringify(this.unifiedNumber));\n      localStorage.setItem('advancedBranches', JSON.stringify(this.branches));\n      localStorage.setItem('advancedAgents', JSON.stringify(this.agents));\n      localStorage.setItem('advancedCalls', JSON.stringify(this.calls));\n      localStorage.setItem('advancedQueues', JSON.stringify(this.queues));\n      localStorage.setItem('advancedRoutes', JSON.stringify(this.routes));\n      localStorage.setItem('advancedRecordings', JSON.stringify(this.recordings));\n      localStorage.setItem('advancedAnalytics', JSON.stringify(this.analytics));\n      localStorage.setItem('advancedIVRMenus', JSON.stringify(this.ivrMenus));\n      localStorage.setItem('advancedIVRFlows', JSON.stringify(this.ivrFlows));\n      localStorage.setItem('advancedSTCIntegration', JSON.stringify(this.stcIntegration));\n    } catch (error) {\n      console.error('Error saving to localStorage:', error);\n    }\n  }\n\n  loadFromLocalStorage() {\n    try {\n      this.unifiedNumber = JSON.parse(localStorage.getItem('advancedUnifiedNumber') || 'null');\n      this.branches = JSON.parse(localStorage.getItem('advancedBranches') || '[]');\n      this.agents = JSON.parse(localStorage.getItem('advancedAgents') || '[]');\n      this.calls = JSON.parse(localStorage.getItem('advancedCalls') || '[]');\n      this.queues = JSON.parse(localStorage.getItem('advancedQueues') || '[]');\n      this.routes = JSON.parse(localStorage.getItem('advancedRoutes') || '[]');\n      this.recordings = JSON.parse(localStorage.getItem('advancedRecordings') || '[]');\n      this.analytics = JSON.parse(localStorage.getItem('advancedAnalytics') || '[]');\n      this.ivrMenus = JSON.parse(localStorage.getItem('advancedIVRMenus') || '[]');\n      this.ivrFlows = JSON.parse(localStorage.getItem('advancedIVRFlows') || '[]');\n      this.stcIntegration = JSON.parse(localStorage.getItem('advancedSTCIntegration') || 'null');\n    } catch (error) {\n      console.error('Error loading from localStorage:', error);\n    }\n  }\n\n  setupEventListeners() {\n    this.addAgent = this.addAgent.bind(this);\n    this.createQueue = this.createQueue.bind(this);\n    this.configureRoutes = this.configureRoutes.bind(this);\n    this.switchView = this.switchView.bind(this);\n    this.handleFilterChange = this.handleFilterChange.bind(this);\n    this.handleSearch = this.handleSearch.bind(this);\n    this.setupUnifiedNumber = this.setupUnifiedNumber.bind(this);\n    this.playRecording = this.playRecording.bind(this);\n    this.downloadRecording = this.downloadRecording.bind(this);\n    this.configureIVR = this.configureIVR.bind(this);\n    this.configureSTC = this.configureSTC.bind(this);\n    this.createIVRMenu = this.createIVRMenu.bind(this);\n    this.editIVRMenu = this.editIVRMenu.bind(this);\n    this.testIVRMenu = this.testIVRMenu.bind(this);\n    this.setupSTCIntegration = this.setupSTCIntegration.bind(this);\n  }\n\n  async addAgent() {\n    console.log('Add agent');\n  }\n\n  async createQueue() {\n    console.log('Create queue');\n  }\n\n  async configureRoutes() {\n    console.log('Configure routes');\n  }\n\n  async setupUnifiedNumber() {\n    console.log('Setup unified number');\n  }\n\n  async playRecording(id) {\n    console.log('Play recording', id);\n  }\n\n  async downloadRecording(id) {\n    console.log('Download recording', id);\n  }\n\n  async configureIVR() {\n    this.switchView('ivr');\n  }\n\n  async configureSTC() {\n    this.switchView('stc-integration');\n  }\n\n  async createIVRMenu() {\n    console.log('Create IVR menu');\n  }\n\n  async editIVRMenu(id) {\n    console.log('Edit IVR menu', id);\n  }\n\n  async testIVRMenu(id) {\n    console.log('Test IVR menu', id);\n  }\n\n  async setupSTCIntegration() {\n    console.log('Setup STC integration');\n  }\n}\n\nexport default AdvancedCallCenterManagement;\n"],"names":["AdvancedCallCenterManagement","container","apiClient","API_ENDPOINTS","connectionManager","realtimeSync","systemEnhancer","aiAssistant","advancedCache","b","activeCalls","c","waitingCalls","availableAgents","a","busyAgents","call","branch","agent","filtered","queue","route","recording","analytic","menu","_a","_b","option","index","flow","step","action","search","unifiedNumber","branches","agents","calls","queues","routes","recordings","analytics","ivrMenus","ivrFlows","stcIntegration","error","update","view","type","event","content","status","date","seconds","mins","secs","bytes","sizes","i","today","callDate","total","sum","answered","ratedCalls","id"],"mappings":"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"}