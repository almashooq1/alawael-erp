{"version":3,"file":"rehabilitation-center-advanced-complaints-DgT3HMXk.js","sources":["../../src/rehabilitation-center-advanced-complaints.js"],"sourcesContent":["/**\n * üìù Advanced Complaints & Suggestions Management System\n * ŸÜÿ∏ÿßŸÖ ÿ•ÿØÿßÿ±ÿ© ÿßŸÑÿ¥ŸÉÿßŸàŸâ ŸàÿßŸÑŸÖŸÇÿ™ÿ±ÿ≠ÿßÿ™ ÿßŸÑŸÖÿ™ŸÇÿØŸÖ ÿßŸÑÿ∞ŸÉŸä ÿßŸÑŸÖÿ™ŸÉÿßŸÖŸÑ\n */\n\nimport apiClient from './utils/api-client.js';\nimport { API_ENDPOINTS } from './config/api.js';\nimport connectionManager from './utils/connection-manager.js';\nimport realtimeSync from './utils/realtime-sync.js';\nimport systemEnhancer from './utils/system-enhancer.js';\nimport aiAssistant from './utils/ai-assistant.js';\nimport advancedCache from './utils/advanced-cache.js';\n\nclass AdvancedComplaintsManagement {\n  constructor(container) {\n    this.container = container;\n    this.useAPI = true;\n    this.apiClient = apiClient;\n    this.API_ENDPOINTS = API_ENDPOINTS.advancedComplaints || {};\n    this.connectionManager = connectionManager;\n    this.realtimeSync = realtimeSync;\n    this.systemEnhancer = systemEnhancer;\n    this.aiAssistant = aiAssistant;\n    this.advancedCache = advancedCache;\n\n    this.complaints = [];\n    this.suggestions = [];\n    this.categories = [];\n    this.resolutions = [];\n    this.feedback = [];\n    this.analytics = [];\n\n    this.currentView = 'complaints';\n    this.filters = {\n      status: 'all',\n      category: 'all',\n      priority: 'all',\n      search: '',\n    };\n\n    this.init();\n  }\n\n  async init() {\n    this.render();\n    this.setupEventListeners();\n    await this.loadData();\n    this.setupRealtimeSync();\n    this.setupConnectionMonitoring();\n  }\n\n  render() {\n    if (!this.container) return;\n\n    this.container.innerHTML = `\n      <div class=\"advanced-complaints-management\">\n        <div class=\"complaints-header\">\n          <h2>üìù ŸÜÿ∏ÿßŸÖ ÿ•ÿØÿßÿ±ÿ© ÿßŸÑÿ¥ŸÉÿßŸàŸâ ŸàÿßŸÑŸÖŸÇÿ™ÿ±ÿ≠ÿßÿ™ ÿßŸÑŸÖÿ™ŸÇÿØŸÖ ÿßŸÑÿ∞ŸÉŸä ÿßŸÑŸÖÿ™ŸÉÿßŸÖŸÑ</h2>\n          <div class=\"header-actions\">\n            <button class=\"btn btn-primary\" onclick=\"this.createComplaint()\">\n              <i class=\"fas fa-plus\"></i> ÿ¥ŸÉŸàŸâ ÿ¨ÿØŸäÿØÿ©\n            </button>\n            <button class=\"btn btn-secondary\" onclick=\"this.createSuggestion()\">\n              <i class=\"fas fa-lightbulb\"></i> ÿßŸÇÿ™ÿ±ÿßÿ≠ ÿ¨ÿØŸäÿØ\n            </button>\n          </div>\n        </div>\n\n        <div class=\"complaints-tabs\">\n          <button class=\"tab-btn ${this.currentView === 'complaints' ? 'active' : ''}\" \n                  onclick=\"this.switchView('complaints')\">\n            <i class=\"fas fa-exclamation-triangle\"></i> ÿßŸÑÿ¥ŸÉÿßŸàŸâ\n          </button>\n          <button class=\"tab-btn ${this.currentView === 'suggestions' ? 'active' : ''}\" \n                  onclick=\"this.switchView('suggestions')\">\n            <i class=\"fas fa-lightbulb\"></i> ÿßŸÑŸÖŸÇÿ™ÿ±ÿ≠ÿßÿ™\n          </button>\n          <button class=\"tab-btn ${this.currentView === 'categories' ? 'active' : ''}\" \n                  onclick=\"this.switchView('categories')\">\n            <i class=\"fas fa-tags\"></i> ÿßŸÑŸÅÿ¶ÿßÿ™\n          </button>\n          <button class=\"tab-btn ${this.currentView === 'resolutions' ? 'active' : ''}\" \n                  onclick=\"this.switchView('resolutions')\">\n            <i class=\"fas fa-check-circle\"></i> ÿßŸÑÿ≠ŸÑŸàŸÑ\n          </button>\n          <button class=\"tab-btn ${this.currentView === 'feedback' ? 'active' : ''}\" \n                  onclick=\"this.switchView('feedback')\">\n            <i class=\"fas fa-comment-dots\"></i> ÿßŸÑÿ™ŸÇŸäŸäŸÖÿßÿ™\n          </button>\n          <button class=\"tab-btn ${this.currentView === 'analytics' ? 'active' : ''}\" \n                  onclick=\"this.switchView('analytics')\">\n            <i class=\"fas fa-chart-bar\"></i> ÿßŸÑÿ™ÿ≠ŸÑŸäŸÑÿßÿ™\n          </button>\n        </div>\n\n        <div class=\"complaints-filters\">\n          <select class=\"filter-select\" onchange=\"this.handleFilterChange('status', event)\">\n            <option value=\"all\">ÿ¨ŸÖŸäÿπ ÿßŸÑÿ≠ÿßŸÑÿßÿ™</option>\n            <option value=\"new\">ÿ¨ÿØŸäÿØ</option>\n            <option value=\"in-progress\">ŸÇŸäÿØ ÿßŸÑŸÖÿπÿßŸÑÿ¨ÿ©</option>\n            <option value=\"resolved\">ŸÖÿ≠ŸÑŸàŸÑ</option>\n            <option value=\"closed\">ŸÖÿ∫ŸÑŸÇ</option>\n          </select>\n          <select class=\"filter-select\" onchange=\"this.handleFilterChange('priority', event)\">\n            <option value=\"all\">ÿ¨ŸÖŸäÿπ ÿßŸÑÿ£ŸàŸÑŸàŸäÿßÿ™</option>\n            <option value=\"low\">ŸÖŸÜÿÆŸÅÿ∂</option>\n            <option value=\"medium\">ŸÖÿ™Ÿàÿ≥ÿ∑</option>\n            <option value=\"high\">ÿπÿßŸÑŸä</option>\n            <option value=\"urgent\">ÿπÿßÿ¨ŸÑ</option>\n          </select>\n          <input type=\"text\" class=\"search-input\" placeholder=\"ÿ®ÿ≠ÿ´...\" \n                 oninput=\"this.handleSearch(event)\">\n        </div>\n\n        <div class=\"complaints-content\" id=\"complaintsContent\">\n          ${this.renderCurrentView()}\n        </div>\n      </div>\n    `;\n  }\n\n  renderCurrentView() {\n    switch (this.currentView) {\n      case 'complaints':\n        return this.renderComplaints();\n      case 'suggestions':\n        return this.renderSuggestions();\n      case 'categories':\n        return this.renderCategories();\n      case 'resolutions':\n        return this.renderResolutions();\n      case 'feedback':\n        return this.renderFeedback();\n      case 'analytics':\n        return this.renderAnalytics();\n      default:\n        return this.renderComplaints();\n    }\n  }\n\n  renderComplaints() {\n    const filtered = this.getFilteredData(this.complaints);\n\n    if (filtered.length === 0) {\n      return `\n        <div class=\"empty-state\">\n          <i class=\"fas fa-exclamation-triangle\"></i>\n          <p>ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ¥ŸÉÿßŸàŸâ</p>\n          <button class=\"btn btn-primary\" onclick=\"this.createComplaint()\">\n            ÿ•ÿ∂ÿßŸÅÿ© ÿ¥ŸÉŸàŸâ ÿ¨ÿØŸäÿØÿ©\n          </button>\n        </div>\n      `;\n    }\n\n    return `\n      <div class=\"complaints-list\">\n        ${filtered\n          .map(\n            complaint => `\n          <div class=\"complaint-card status-${complaint.status} priority-${complaint.priority || 'medium'}\">\n            <div class=\"complaint-header\">\n              <div class=\"complaint-info\">\n                <h3>${complaint.title || 'ÿ¥ŸÉŸàŸâ'}</h3>\n                <p class=\"complaint-submitter\">ŸÖŸÜ: ${complaint.submittedBy || 'ÿ∫Ÿäÿ± ŸÖÿ≠ÿØÿØ'}</p>\n              </div>\n              <div class=\"complaint-badges\">\n                <span class=\"status-badge status-${complaint.status}\">${this.getStatusText(complaint.status)}</span>\n                <span class=\"priority-badge priority-${complaint.priority || 'medium'}\">\n                  ${this.getPriorityText(complaint.priority || 'medium')}\n                </span>\n              </div>\n            </div>\n            <div class=\"complaint-body\">\n              <div class=\"complaint-details\">\n                <div class=\"detail-item\">\n                  <span class=\"detail-label\">ÿßŸÑŸÅÿ¶ÿ©:</span>\n                  <span class=\"detail-value\">${complaint.categoryName || 'ÿ∫Ÿäÿ± ŸÖÿ≠ÿØÿØ'}</span>\n                </div>\n                <div class=\"detail-item\">\n                  <span class=\"detail-label\">ÿßŸÑÿ™ÿßÿ±ŸäÿÆ:</span>\n                  <span class=\"detail-value\">${this.formatDate(complaint.submittedDate)}</span>\n                </div>\n                <div class=\"detail-item\">\n                  <span class=\"detail-label\">ÿßŸÑŸÖÿ≥ÿ§ŸàŸÑ:</span>\n                  <span class=\"detail-value\">${complaint.assignedToName || 'ÿ∫Ÿäÿ± ŸÖÿ≠ÿØÿØ'}</span>\n                </div>\n              </div>\n              ${\n                complaint.description\n                  ? `\n                <div class=\"complaint-description\">\n                  <p>${complaint.description.substring(0, 150)}${complaint.description.length > 150 ? '...' : ''}</p>\n                </div>\n              `\n                  : ''\n              }\n            </div>\n            <div class=\"complaint-actions\">\n              <button class=\"btn btn-sm btn-primary\" onclick=\"this.viewComplaint(${complaint.id})\">\n                <i class=\"fas fa-eye\"></i> ÿπÿ±ÿ∂\n              </button>\n              ${\n                complaint.status === 'new'\n                  ? `\n                <button class=\"btn btn-sm btn-success\" onclick=\"this.assignComplaint(${complaint.id})\">\n                  <i class=\"fas fa-user-check\"></i> ÿ™ÿπŸäŸäŸÜ\n                </button>\n              `\n                  : ''\n              }\n              ${\n                complaint.status === 'in-progress'\n                  ? `\n                <button class=\"btn btn-sm btn-warning\" onclick=\"this.resolveComplaint(${complaint.id})\">\n                  <i class=\"fas fa-check\"></i> ÿ≠ŸÑ\n                </button>\n              `\n                  : ''\n              }\n              <button class=\"btn btn-sm btn-secondary\" onclick=\"this.editComplaint(${complaint.id})\">\n                <i class=\"fas fa-edit\"></i> ÿ™ÿπÿØŸäŸÑ\n              </button>\n            </div>\n          </div>\n        `\n          )\n          .join('')}\n      </div>\n    `;\n  }\n\n  renderSuggestions() {\n    if (this.suggestions.length === 0) {\n      return `\n        <div class=\"empty-state\">\n          <i class=\"fas fa-lightbulb\"></i>\n          <p>ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸÖŸÇÿ™ÿ±ÿ≠ÿßÿ™</p>\n          <button class=\"btn btn-primary\" onclick=\"this.createSuggestion()\">\n            ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÇÿ™ÿ±ÿßÿ≠ ÿ¨ÿØŸäÿØ\n          </button>\n        </div>\n      `;\n    }\n\n    return `\n      <div class=\"suggestions-list\">\n        ${this.suggestions\n          .map(\n            suggestion => `\n          <div class=\"suggestion-card status-${suggestion.status}\">\n            <div class=\"suggestion-header\">\n              <h3>${suggestion.title || 'ÿßŸÇÿ™ÿ±ÿßÿ≠'}</h3>\n              <span class=\"status-badge status-${suggestion.status}\">${this.getStatusText(suggestion.status)}</span>\n            </div>\n            <div class=\"suggestion-body\">\n              <div class=\"suggestion-details\">\n                <div class=\"detail-item\">\n                  <span class=\"detail-label\">ŸÖŸÜ:</span>\n                  <span class=\"detail-value\">${suggestion.submittedBy || 'ÿ∫Ÿäÿ± ŸÖÿ≠ÿØÿØ'}</span>\n                </div>\n                <div class=\"detail-item\">\n                  <span class=\"detail-label\">ÿßŸÑÿ™ÿßÿ±ŸäÿÆ:</span>\n                  <span class=\"detail-value\">${this.formatDate(suggestion.submittedDate)}</span>\n                </div>\n                <div class=\"detail-item\">\n                  <span class=\"detail-label\">ÿßŸÑÿ™ŸÇŸäŸäŸÖ:</span>\n                  <span class=\"detail-value\">${this.renderStars(suggestion.rating || 0)}</span>\n                </div>\n              </div>\n              ${\n                suggestion.description\n                  ? `\n                <div class=\"suggestion-description\">\n                  <p>${suggestion.description.substring(0, 150)}${suggestion.description.length > 150 ? '...' : ''}</p>\n                </div>\n              `\n                  : ''\n              }\n            </div>\n          </div>\n        `\n          )\n          .join('')}\n      </div>\n    `;\n  }\n\n  renderCategories() {\n    if (this.categories.length === 0) {\n      return `\n        <div class=\"empty-state\">\n          <i class=\"fas fa-tags\"></i>\n          <p>ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸÅÿ¶ÿßÿ™</p>\n        </div>\n      `;\n    }\n\n    return `\n      <div class=\"categories-grid\">\n        ${this.categories\n          .map(\n            category => `\n          <div class=\"category-card\">\n            <div class=\"category-header\">\n              <h3>${category.name || 'ŸÅÿ¶ÿ©'}</h3>\n              <span class=\"category-count\">${category.itemsCount || 0} ÿπŸÜÿµÿ±</span>\n            </div>\n            <div class=\"category-body\">\n              <div class=\"category-details\">\n                <div class=\"detail-item\">\n                  <span class=\"detail-label\">ÿßŸÑŸàÿµŸÅ:</span>\n                  <span class=\"detail-value\">${category.description || 'ÿ∫Ÿäÿ± ŸÖÿ≠ÿØÿØ'}</span>\n                </div>\n              </div>\n            </div>\n          </div>\n        `\n          )\n          .join('')}\n      </div>\n    `;\n  }\n\n  renderResolutions() {\n    if (this.resolutions.length === 0) {\n      return `\n        <div class=\"empty-state\">\n          <i class=\"fas fa-check-circle\"></i>\n          <p>ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ≠ŸÑŸàŸÑ</p>\n        </div>\n      `;\n    }\n\n    return `\n      <div class=\"resolutions-list\">\n        ${this.resolutions\n          .map(\n            resolution => `\n          <div class=\"resolution-card\">\n            <div class=\"resolution-header\">\n              <h3>${resolution.complaintTitle || 'ÿ≠ŸÑ'}</h3>\n              <span class=\"resolution-date\">${this.formatDate(resolution.resolvedDate)}</span>\n            </div>\n            <div class=\"resolution-body\">\n              <div class=\"resolution-details\">\n                <div class=\"detail-item\">\n                  <span class=\"detail-label\">ÿßŸÑŸÖÿ≥ÿ§ŸàŸÑ:</span>\n                  <span class=\"detail-value\">${resolution.resolvedBy || 'ÿ∫Ÿäÿ± ŸÖÿ≠ÿØÿØ'}</span>\n                </div>\n                <div class=\"detail-item\">\n                  <span class=\"detail-label\">ÿßŸÑÿ≠ŸÑ:</span>\n                  <span class=\"detail-value\">${resolution.solution || 'ÿ∫Ÿäÿ± ŸÖÿ≠ÿØÿØ'}</span>\n                </div>\n              </div>\n            </div>\n          </div>\n        `\n          )\n          .join('')}\n      </div>\n    `;\n  }\n\n  renderFeedback() {\n    if (this.feedback.length === 0) {\n      return `\n        <div class=\"empty-state\">\n          <i class=\"fas fa-comment-dots\"></i>\n          <p>ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ™ŸÇŸäŸäŸÖÿßÿ™</p>\n        </div>\n      `;\n    }\n\n    return `\n      <div class=\"feedback-list\">\n        ${this.feedback\n          .map(\n            fb => `\n          <div class=\"feedback-card\">\n            <div class=\"feedback-header\">\n              <h3>${fb.complaintTitle || 'ÿ™ŸÇŸäŸäŸÖ'}</h3>\n              <div class=\"feedback-rating\">\n                ${this.renderStars(fb.rating || 0)}\n              </div>\n            </div>\n            <div class=\"feedback-body\">\n              <div class=\"feedback-details\">\n                <div class=\"detail-item\">\n                  <span class=\"detail-label\">ŸÖŸÜ:</span>\n                  <span class=\"detail-value\">${fb.submittedBy || 'ÿ∫Ÿäÿ± ŸÖÿ≠ÿØÿØ'}</span>\n                </div>\n                <div class=\"detail-item\">\n                  <span class=\"detail-label\">ÿßŸÑÿ™ÿßÿ±ŸäÿÆ:</span>\n                  <span class=\"detail-value\">${this.formatDate(fb.date)}</span>\n                </div>\n              </div>\n              ${\n                fb.comment\n                  ? `\n                <div class=\"feedback-comment\">\n                  <p>${fb.comment}</p>\n                </div>\n              `\n                  : ''\n              }\n            </div>\n          </div>\n        `\n          )\n          .join('')}\n      </div>\n    `;\n  }\n\n  renderAnalytics() {\n    if (this.analytics.length === 0) {\n      return `\n        <div class=\"empty-state\">\n          <i class=\"fas fa-chart-bar\"></i>\n          <p>ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ®ŸäÿßŸÜÿßÿ™ ÿ™ÿ≠ŸÑŸäŸÑŸäÿ©</p>\n        </div>\n      `;\n    }\n\n    return `\n      <div class=\"analytics-dashboard\">\n        ${this.analytics\n          .map(\n            analytic => `\n          <div class=\"analytic-card\">\n            <div class=\"analytic-header\">\n              <h3>${analytic.metric}</h3>\n              <span class=\"analytic-value\">${analytic.value}</span>\n            </div>\n            <div class=\"analytic-body\">\n              <p>${analytic.description || ''}</p>\n              ${\n                analytic.trend\n                  ? `\n                <div class=\"analytic-trend ${analytic.trend > 0 ? 'up' : 'down'}\">\n                  <i class=\"fas fa-arrow-${analytic.trend > 0 ? 'up' : 'down'}\"></i>\n                  ${Math.abs(analytic.trend)}%\n                </div>\n              `\n                  : ''\n              }\n            </div>\n          </div>\n        `\n          )\n          .join('')}\n      </div>\n    `;\n  }\n\n  renderStars(rating) {\n    const stars = [];\n    for (let i = 1; i <= 5; i++) {\n      if (i <= rating) {\n        stars.push('<i class=\"fas fa-star\"></i>');\n      } else {\n        stars.push('<i class=\"far fa-star\"></i>');\n      }\n    }\n    return stars.join('');\n  }\n\n  getFilteredData(data) {\n    let filtered = [...data];\n    if (this.filters.status !== 'all') {\n      filtered = filtered.filter(item => item.status === this.filters.status);\n    }\n    if (this.filters.category !== 'all') {\n      filtered = filtered.filter(item => item.categoryId === parseInt(this.filters.category));\n    }\n    if (this.filters.priority !== 'all') {\n      filtered = filtered.filter(item => item.priority === this.filters.priority);\n    }\n    if (this.filters.search) {\n      const search = this.filters.search.toLowerCase();\n      filtered = filtered.filter(\n        item =>\n          (item.title && item.title.toLowerCase().includes(search)) ||\n          (item.description && item.description.toLowerCase().includes(search))\n      );\n    }\n    return filtered;\n  }\n\n  async loadData() {\n    if (!this.useAPI) {\n      this.loadFromLocalStorage();\n      return;\n    }\n\n    try {\n      if (!this.connectionManager.isFullyConnected()) {\n        this.loadFromLocalStorage();\n        return;\n      }\n\n      const [complaints, suggestions, categories, resolutions, feedback, analytics] =\n        await Promise.all([\n          this.apiClient.get(\n            this.API_ENDPOINTS.complaints || '/api/advanced-complaints/complaints'\n          ),\n          this.apiClient.get(\n            this.API_ENDPOINTS.suggestions || '/api/advanced-complaints/suggestions'\n          ),\n          this.apiClient.get(\n            this.API_ENDPOINTS.categories || '/api/advanced-complaints/categories'\n          ),\n          this.apiClient.get(\n            this.API_ENDPOINTS.resolutions || '/api/advanced-complaints/resolutions'\n          ),\n          this.apiClient.get(this.API_ENDPOINTS.feedback || '/api/advanced-complaints/feedback'),\n          this.apiClient.get(this.API_ENDPOINTS.analytics || '/api/advanced-complaints/analytics'),\n        ]);\n\n      this.complaints = complaints.data || [];\n      this.suggestions = suggestions.data || [];\n      this.categories = categories.data || [];\n      this.resolutions = resolutions.data || [];\n      this.feedback = feedback.data || [];\n      this.analytics = analytics.data || [];\n\n      this.saveToLocalStorage();\n      this.updateContent();\n    } catch (error) {\n      console.error('Error loading complaints data:', error);\n      this.loadFromLocalStorage();\n    }\n  }\n\n  setupRealtimeSync() {\n    if (!this.realtimeSync) return;\n    this.realtimeSync.subscribe('advanced-complaints', '*', update => {\n      if (update.action === 'create' || update.action === 'update' || update.action === 'delete') {\n        this.loadData();\n      }\n    });\n  }\n\n  setupConnectionMonitoring() {\n    if (!this.connectionManager) return;\n    this.connectionManager.on('online', () => {\n      this.loadData();\n    });\n  }\n\n  switchView(view) {\n    this.currentView = view;\n    this.updateContent();\n  }\n\n  handleFilterChange(type, event) {\n    this.filters[type] = event.target.value;\n    this.updateContent();\n  }\n\n  handleSearch(event) {\n    this.filters.search = event.target.value;\n    this.updateContent();\n  }\n\n  updateContent() {\n    const content = document.getElementById('complaintsContent');\n    if (content) {\n      content.innerHTML = this.renderCurrentView();\n    }\n  }\n\n  getStatusText(status) {\n    const statusMap = {\n      new: 'ÿ¨ÿØŸäÿØ',\n      'in-progress': 'ŸÇŸäÿØ ÿßŸÑŸÖÿπÿßŸÑÿ¨ÿ©',\n      resolved: 'ŸÖÿ≠ŸÑŸàŸÑ',\n      closed: 'ŸÖÿ∫ŸÑŸÇ',\n      underreview: 'ŸÇŸäÿØ ÿßŸÑŸÖÿ±ÿßÿ¨ÿπÿ©',\n      implemented: 'ŸÖÿ∑ÿ®ŸÇ',\n    };\n    return statusMap[status] || status;\n  }\n\n  getPriorityText(priority) {\n    const priorityMap = {\n      low: 'ŸÖŸÜÿÆŸÅÿ∂',\n      medium: 'ŸÖÿ™Ÿàÿ≥ÿ∑',\n      high: 'ÿπÿßŸÑŸä',\n      urgent: 'ÿπÿßÿ¨ŸÑ',\n    };\n    return priorityMap[priority] || priority;\n  }\n\n  formatDate(date) {\n    if (!date) return 'ÿ∫Ÿäÿ± ŸÖÿ≠ÿØÿØ';\n    return new Date(date).toLocaleDateString('ar-SA');\n  }\n\n  saveToLocalStorage() {\n    try {\n      localStorage.setItem('advancedComplaints', JSON.stringify(this.complaints));\n      localStorage.setItem('advancedSuggestions', JSON.stringify(this.suggestions));\n      localStorage.setItem('advancedCategories', JSON.stringify(this.categories));\n      localStorage.setItem('advancedResolutions', JSON.stringify(this.resolutions));\n      localStorage.setItem('advancedFeedback', JSON.stringify(this.feedback));\n      localStorage.setItem('advancedAnalytics', JSON.stringify(this.analytics));\n    } catch (error) {\n      console.error('Error saving to localStorage:', error);\n    }\n  }\n\n  loadFromLocalStorage() {\n    try {\n      this.complaints = JSON.parse(localStorage.getItem('advancedComplaints') || '[]');\n      this.suggestions = JSON.parse(localStorage.getItem('advancedSuggestions') || '[]');\n      this.categories = JSON.parse(localStorage.getItem('advancedCategories') || '[]');\n      this.resolutions = JSON.parse(localStorage.getItem('advancedResolutions') || '[]');\n      this.feedback = JSON.parse(localStorage.getItem('advancedFeedback') || '[]');\n      this.analytics = JSON.parse(localStorage.getItem('advancedAnalytics') || '[]');\n    } catch (error) {\n      console.error('Error loading from localStorage:', error);\n    }\n  }\n\n  setupEventListeners() {\n    this.createComplaint = this.createComplaint.bind(this);\n    this.createSuggestion = this.createSuggestion.bind(this);\n    this.switchView = this.switchView.bind(this);\n    this.handleFilterChange = this.handleFilterChange.bind(this);\n    this.handleSearch = this.handleSearch.bind(this);\n    this.viewComplaint = this.viewComplaint.bind(this);\n    this.assignComplaint = this.assignComplaint.bind(this);\n    this.resolveComplaint = this.resolveComplaint.bind(this);\n    this.editComplaint = this.editComplaint.bind(this);\n  }\n\n  async createComplaint() {\n    console.log('Create complaint');\n  }\n\n  async createSuggestion() {\n    console.log('Create suggestion');\n  }\n\n  async viewComplaint(id) {\n    console.log('View complaint', id);\n  }\n\n  async assignComplaint(id) {\n    console.log('Assign complaint', id);\n  }\n\n  async resolveComplaint(id) {\n    console.log('Resolve complaint', id);\n  }\n\n  async editComplaint(id) {\n    console.log('Edit complaint', id);\n  }\n}\n\nexport default AdvancedComplaintsManagement;\n"],"names":["AdvancedComplaintsManagement","container","apiClient","API_ENDPOINTS","connectionManager","realtimeSync","systemEnhancer","aiAssistant","advancedCache","filtered","complaint","suggestion","category","resolution","fb","analytic","rating","stars","data","item","search","complaints","suggestions","categories","resolutions","feedback","analytics","error","update","view","type","event","content","status","priority","date","id"],"mappings":"4EAaA,MAAMA,CAA6B,CACjC,YAAYC,EAAW,CACrB,KAAK,UAAYA,EACjB,KAAK,OAAS,GACd,KAAK,UAAYC,EACjB,KAAK,cAAgBC,EAAc,oBAAsB,CAAA,EACzD,KAAK,kBAAoBC,EACzB,KAAK,aAAeC,EACpB,KAAK,eAAiBC,EACtB,KAAK,YAAcC,EACnB,KAAK,cAAgBC,EAErB,KAAK,WAAa,CAAA,EAClB,KAAK,YAAc,CAAA,EACnB,KAAK,WAAa,CAAA,EAClB,KAAK,YAAc,CAAA,EACnB,KAAK,SAAW,CAAA,EAChB,KAAK,UAAY,CAAA,EAEjB,KAAK,YAAc,aACnB,KAAK,QAAU,CACb,OAAQ,MACR,SAAU,MACV,SAAU,MACV,OAAQ,EACd,EAEI,KAAK,KAAI,CACX,CAEA,MAAM,MAAO,CACX,KAAK,OAAM,EACX,KAAK,oBAAmB,EACxB,MAAM,KAAK,SAAQ,EACnB,KAAK,kBAAiB,EACtB,KAAK,0BAAyB,CAChC,CAEA,QAAS,CACF,KAAK,YAEV,KAAK,UAAU,UAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mCAeI,KAAK,cAAgB,aAAe,SAAW,EAAE;AAAA;AAAA;AAAA;AAAA,mCAIjD,KAAK,cAAgB,cAAgB,SAAW,EAAE;AAAA;AAAA;AAAA;AAAA,mCAIlD,KAAK,cAAgB,aAAe,SAAW,EAAE;AAAA;AAAA;AAAA;AAAA,mCAIjD,KAAK,cAAgB,cAAgB,SAAW,EAAE;AAAA;AAAA;AAAA;AAAA,mCAIlD,KAAK,cAAgB,WAAa,SAAW,EAAE;AAAA;AAAA;AAAA;AAAA,mCAI/C,KAAK,cAAgB,YAAc,SAAW,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YA0BvE,KAAK,kBAAiB,CAAE;AAAA;AAAA;AAAA,MAIlC,CAEA,mBAAoB,CAClB,OAAQ,KAAK,YAAW,CACtB,IAAK,aACH,OAAO,KAAK,iBAAgB,EAC9B,IAAK,cACH,OAAO,KAAK,kBAAiB,EAC/B,IAAK,aACH,OAAO,KAAK,iBAAgB,EAC9B,IAAK,cACH,OAAO,KAAK,kBAAiB,EAC/B,IAAK,WACH,OAAO,KAAK,eAAc,EAC5B,IAAK,YACH,OAAO,KAAK,gBAAe,EAC7B,QACE,OAAO,KAAK,iBAAgB,CACpC,CACE,CAEA,kBAAmB,CACjB,MAAMC,EAAW,KAAK,gBAAgB,KAAK,UAAU,EAErD,OAAIA,EAAS,SAAW,EACf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAWF;AAAA;AAAA,UAEDA,EACC,IACCC,GAAa;AAAA,8CACqBA,EAAU,MAAM,aAAaA,EAAU,UAAY,QAAQ;AAAA;AAAA;AAAA,sBAGnFA,EAAU,OAAS,MAAM;AAAA,qDACMA,EAAU,aAAe,UAAU;AAAA;AAAA;AAAA,mDAGrCA,EAAU,MAAM,KAAK,KAAK,cAAcA,EAAU,MAAM,CAAC;AAAA,uDACrDA,EAAU,UAAY,QAAQ;AAAA,oBACjE,KAAK,gBAAgBA,EAAU,UAAY,QAAQ,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+CAQzBA,EAAU,cAAgB,UAAU;AAAA;AAAA;AAAA;AAAA,+CAIpC,KAAK,WAAWA,EAAU,aAAa,CAAC;AAAA;AAAA;AAAA;AAAA,+CAIxCA,EAAU,gBAAkB,UAAU;AAAA;AAAA;AAAA,gBAIrEA,EAAU,YACN;AAAA;AAAA,uBAEGA,EAAU,YAAY,UAAU,EAAG,GAAG,CAAC,GAAGA,EAAU,YAAY,OAAS,IAAM,MAAQ,EAAE;AAAA;AAAA,gBAG5F,EACpB;AAAA;AAAA;AAAA,mFAGmFA,EAAU,EAAE;AAAA;AAAA;AAAA,gBAI/EA,EAAU,SAAW,MACjB;AAAA,uFACmEA,EAAU,EAAE;AAAA;AAAA;AAAA,gBAI/E,EACpB;AAAA,gBAEgBA,EAAU,SAAW,cACjB;AAAA,wFACoEA,EAAU,EAAE;AAAA;AAAA;AAAA,gBAIhF,EACpB;AAAA,qFACqFA,EAAU,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA,SAMjG,EACW,KAAK,EAAE,CAAC;AAAA;AAAA,KAGjB,CAEA,mBAAoB,CAClB,OAAI,KAAK,YAAY,SAAW,EACvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAWF;AAAA;AAAA,UAED,KAAK,YACJ,IACCC,GAAc;AAAA,+CACqBA,EAAW,MAAM;AAAA;AAAA,oBAE5CA,EAAW,OAAS,QAAQ;AAAA,iDACCA,EAAW,MAAM,KAAK,KAAK,cAAcA,EAAW,MAAM,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+CAM7DA,EAAW,aAAe,UAAU;AAAA;AAAA;AAAA;AAAA,+CAIpC,KAAK,WAAWA,EAAW,aAAa,CAAC;AAAA;AAAA;AAAA;AAAA,+CAIzC,KAAK,YAAYA,EAAW,QAAU,CAAC,CAAC;AAAA;AAAA;AAAA,gBAIvEA,EAAW,YACP;AAAA;AAAA,uBAEGA,EAAW,YAAY,UAAU,EAAG,GAAG,CAAC,GAAGA,EAAW,YAAY,OAAS,IAAM,MAAQ,EAAE;AAAA;AAAA,gBAG9F,EACpB;AAAA;AAAA;AAAA,SAIA,EACW,KAAK,EAAE,CAAC;AAAA;AAAA,KAGjB,CAEA,kBAAmB,CACjB,OAAI,KAAK,WAAW,SAAW,EACtB;AAAA;AAAA;AAAA;AAAA;AAAA,QAQF;AAAA;AAAA,UAED,KAAK,WACJ,IACCC,GAAY;AAAA;AAAA;AAAA,oBAGJA,EAAS,MAAQ,KAAK;AAAA,6CACGA,EAAS,YAAc,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+CAMtBA,EAAS,aAAe,UAAU;AAAA;AAAA;AAAA;AAAA;AAAA,SAMjF,EACW,KAAK,EAAE,CAAC;AAAA;AAAA,KAGjB,CAEA,mBAAoB,CAClB,OAAI,KAAK,YAAY,SAAW,EACvB;AAAA;AAAA;AAAA;AAAA;AAAA,QAQF;AAAA;AAAA,UAED,KAAK,YACJ,IACCC,GAAc;AAAA;AAAA;AAAA,oBAGNA,EAAW,gBAAkB,IAAI;AAAA,8CACP,KAAK,WAAWA,EAAW,YAAY,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+CAMvCA,EAAW,YAAc,UAAU;AAAA;AAAA;AAAA;AAAA,+CAInCA,EAAW,UAAY,UAAU;AAAA;AAAA;AAAA;AAAA;AAAA,SAMhF,EACW,KAAK,EAAE,CAAC;AAAA;AAAA,KAGjB,CAEA,gBAAiB,CACf,OAAI,KAAK,SAAS,SAAW,EACpB;AAAA;AAAA;AAAA;AAAA;AAAA,QAQF;AAAA;AAAA,UAED,KAAK,SACJ,IACCC,GAAM;AAAA;AAAA;AAAA,oBAGEA,EAAG,gBAAkB,OAAO;AAAA;AAAA,kBAE9B,KAAK,YAAYA,EAAG,QAAU,CAAC,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+CAOHA,EAAG,aAAe,UAAU;AAAA;AAAA;AAAA;AAAA,+CAI5B,KAAK,WAAWA,EAAG,IAAI,CAAC;AAAA;AAAA;AAAA,gBAIvDA,EAAG,QACC;AAAA;AAAA,uBAEGA,EAAG,OAAO;AAAA;AAAA,gBAGb,EACpB;AAAA;AAAA;AAAA,SAIA,EACW,KAAK,EAAE,CAAC;AAAA;AAAA,KAGjB,CAEA,iBAAkB,CAChB,OAAI,KAAK,UAAU,SAAW,EACrB;AAAA;AAAA;AAAA;AAAA;AAAA,QAQF;AAAA;AAAA,UAED,KAAK,UACJ,IACCC,GAAY;AAAA;AAAA;AAAA,oBAGJA,EAAS,MAAM;AAAA,6CACUA,EAAS,KAAK;AAAA;AAAA;AAAA,mBAGxCA,EAAS,aAAe,EAAE;AAAA,gBAE7BA,EAAS,MACL;AAAA,6CACyBA,EAAS,MAAQ,EAAI,KAAO,MAAM;AAAA,2CACpCA,EAAS,MAAQ,EAAI,KAAO,MAAM;AAAA,oBACzD,KAAK,IAAIA,EAAS,KAAK,CAAC;AAAA;AAAA,gBAGxB,EACpB;AAAA;AAAA;AAAA,SAIA,EACW,KAAK,EAAE,CAAC;AAAA;AAAA,KAGjB,CAEA,YAAYC,EAAQ,CAClB,MAAMC,EAAQ,CAAA,EACd,QAAS,EAAI,EAAG,GAAK,EAAG,IAClB,GAAKD,EACPC,EAAM,KAAK,6BAA6B,EAExCA,EAAM,KAAK,6BAA6B,EAG5C,OAAOA,EAAM,KAAK,EAAE,CACtB,CAEA,gBAAgBC,EAAM,CACpB,IAAIT,EAAW,CAAC,GAAGS,CAAI,EAUvB,GATI,KAAK,QAAQ,SAAW,QAC1BT,EAAWA,EAAS,OAAOU,GAAQA,EAAK,SAAW,KAAK,QAAQ,MAAM,GAEpE,KAAK,QAAQ,WAAa,QAC5BV,EAAWA,EAAS,OAAOU,GAAQA,EAAK,aAAe,SAAS,KAAK,QAAQ,QAAQ,CAAC,GAEpF,KAAK,QAAQ,WAAa,QAC5BV,EAAWA,EAAS,OAAOU,GAAQA,EAAK,WAAa,KAAK,QAAQ,QAAQ,GAExE,KAAK,QAAQ,OAAQ,CACvB,MAAMC,EAAS,KAAK,QAAQ,OAAO,YAAW,EAC9CX,EAAWA,EAAS,OAClBU,GACGA,EAAK,OAASA,EAAK,MAAM,YAAW,EAAG,SAASC,CAAM,GACtDD,EAAK,aAAeA,EAAK,YAAY,YAAW,EAAG,SAASC,CAAM,CAC7E,CACI,CACA,OAAOX,CACT,CAEA,MAAM,UAAW,CACf,GAAI,CAAC,KAAK,OAAQ,CAChB,KAAK,qBAAoB,EACzB,MACF,CAEA,GAAI,CACF,GAAI,CAAC,KAAK,kBAAkB,mBAAoB,CAC9C,KAAK,qBAAoB,EACzB,MACF,CAEA,KAAM,CAACY,EAAYC,EAAaC,EAAYC,EAAaC,EAAUC,CAAS,EAC1E,MAAM,QAAQ,IAAI,CAChB,KAAK,UAAU,IACb,KAAK,cAAc,YAAc,qCAC7C,EACU,KAAK,UAAU,IACb,KAAK,cAAc,aAAe,sCAC9C,EACU,KAAK,UAAU,IACb,KAAK,cAAc,YAAc,qCAC7C,EACU,KAAK,UAAU,IACb,KAAK,cAAc,aAAe,sCAC9C,EACU,KAAK,UAAU,IAAI,KAAK,cAAc,UAAY,mCAAmC,EACrF,KAAK,UAAU,IAAI,KAAK,cAAc,WAAa,oCAAoC,CACjG,CAAS,EAEH,KAAK,WAAaL,EAAW,MAAQ,CAAA,EACrC,KAAK,YAAcC,EAAY,MAAQ,CAAA,EACvC,KAAK,WAAaC,EAAW,MAAQ,CAAA,EACrC,KAAK,YAAcC,EAAY,MAAQ,CAAA,EACvC,KAAK,SAAWC,EAAS,MAAQ,CAAA,EACjC,KAAK,UAAYC,EAAU,MAAQ,CAAA,EAEnC,KAAK,mBAAkB,EACvB,KAAK,cAAa,CACpB,OAASC,EAAO,CACd,QAAQ,MAAM,iCAAkCA,CAAK,EACrD,KAAK,qBAAoB,CAC3B,CACF,CAEA,mBAAoB,CACb,KAAK,cACV,KAAK,aAAa,UAAU,sBAAuB,IAAKC,GAAU,EAC5DA,EAAO,SAAW,UAAYA,EAAO,SAAW,UAAYA,EAAO,SAAW,WAChF,KAAK,SAAQ,CAEjB,CAAC,CACH,CAEA,2BAA4B,CACrB,KAAK,mBACV,KAAK,kBAAkB,GAAG,SAAU,IAAM,CACxC,KAAK,SAAQ,CACf,CAAC,CACH,CAEA,WAAWC,EAAM,CACf,KAAK,YAAcA,EACnB,KAAK,cAAa,CACpB,CAEA,mBAAmBC,EAAMC,EAAO,CAC9B,KAAK,QAAQD,CAAI,EAAIC,EAAM,OAAO,MAClC,KAAK,cAAa,CACpB,CAEA,aAAaA,EAAO,CAClB,KAAK,QAAQ,OAASA,EAAM,OAAO,MACnC,KAAK,cAAa,CACpB,CAEA,eAAgB,CACd,MAAMC,EAAU,SAAS,eAAe,mBAAmB,EACvDA,IACFA,EAAQ,UAAY,KAAK,kBAAiB,EAE9C,CAEA,cAAcC,EAAQ,CASpB,MARkB,CAChB,IAAK,OACL,cAAe,eACf,SAAU,QACV,OAAQ,OACR,YAAa,eACb,YAAa,MACnB,EACqBA,CAAM,GAAKA,CAC9B,CAEA,gBAAgBC,EAAU,CAOxB,MANoB,CAClB,IAAK,QACL,OAAQ,QACR,KAAM,OACN,OAAQ,MACd,EACuBA,CAAQ,GAAKA,CAClC,CAEA,WAAWC,EAAM,CACf,OAAKA,EACE,IAAI,KAAKA,CAAI,EAAE,mBAAmB,OAAO,EAD9B,UAEpB,CAEA,oBAAqB,CACnB,GAAI,CACF,aAAa,QAAQ,qBAAsB,KAAK,UAAU,KAAK,UAAU,CAAC,EAC1E,aAAa,QAAQ,sBAAuB,KAAK,UAAU,KAAK,WAAW,CAAC,EAC5E,aAAa,QAAQ,qBAAsB,KAAK,UAAU,KAAK,UAAU,CAAC,EAC1E,aAAa,QAAQ,sBAAuB,KAAK,UAAU,KAAK,WAAW,CAAC,EAC5E,aAAa,QAAQ,mBAAoB,KAAK,UAAU,KAAK,QAAQ,CAAC,EACtE,aAAa,QAAQ,oBAAqB,KAAK,UAAU,KAAK,SAAS,CAAC,CAC1E,OAASR,EAAO,CACd,QAAQ,MAAM,gCAAiCA,CAAK,CACtD,CACF,CAEA,sBAAuB,CACrB,GAAI,CACF,KAAK,WAAa,KAAK,MAAM,aAAa,QAAQ,oBAAoB,GAAK,IAAI,EAC/E,KAAK,YAAc,KAAK,MAAM,aAAa,QAAQ,qBAAqB,GAAK,IAAI,EACjF,KAAK,WAAa,KAAK,MAAM,aAAa,QAAQ,oBAAoB,GAAK,IAAI,EAC/E,KAAK,YAAc,KAAK,MAAM,aAAa,QAAQ,qBAAqB,GAAK,IAAI,EACjF,KAAK,SAAW,KAAK,MAAM,aAAa,QAAQ,kBAAkB,GAAK,IAAI,EAC3E,KAAK,UAAY,KAAK,MAAM,aAAa,QAAQ,mBAAmB,GAAK,IAAI,CAC/E,OAASA,EAAO,CACd,QAAQ,MAAM,mCAAoCA,CAAK,CACzD,CACF,CAEA,qBAAsB,CACpB,KAAK,gBAAkB,KAAK,gBAAgB,KAAK,IAAI,EACrD,KAAK,iBAAmB,KAAK,iBAAiB,KAAK,IAAI,EACvD,KAAK,WAAa,KAAK,WAAW,KAAK,IAAI,EAC3C,KAAK,mBAAqB,KAAK,mBAAmB,KAAK,IAAI,EAC3D,KAAK,aAAe,KAAK,aAAa,KAAK,IAAI,EAC/C,KAAK,cAAgB,KAAK,cAAc,KAAK,IAAI,EACjD,KAAK,gBAAkB,KAAK,gBAAgB,KAAK,IAAI,EACrD,KAAK,iBAAmB,KAAK,iBAAiB,KAAK,IAAI,EACvD,KAAK,cAAgB,KAAK,cAAc,KAAK,IAAI,CACnD,CAEA,MAAM,iBAAkB,CACtB,QAAQ,IAAI,kBAAkB,CAChC,CAEA,MAAM,kBAAmB,CACvB,QAAQ,IAAI,mBAAmB,CACjC,CAEA,MAAM,cAAcS,EAAI,CACtB,QAAQ,IAAI,iBAAkBA,CAAE,CAClC,CAEA,MAAM,gBAAgBA,EAAI,CACxB,QAAQ,IAAI,mBAAoBA,CAAE,CACpC,CAEA,MAAM,iBAAiBA,EAAI,CACzB,QAAQ,IAAI,oBAAqBA,CAAE,CACrC,CAEA,MAAM,cAAcA,EAAI,CACtB,QAAQ,IAAI,iBAAkBA,CAAE,CAClC,CACF"}