{"version":3,"mappings":"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","names":["apiClient","API_ENDPOINTS","realtimeSync","connectionManager","aiAssistant","advancedCache","loadAPIModules","__vitePreload","n","RehabilitationCenterAdvancedReports","data","isOnline","cacheKey","cached","response","_b","_a","_c","error","stored","category","query","filtered","r","container","stats","report","template","schedule","status","frequency","view","reportId","templateId","scheduleId","advancedReports","module"],"ignoreList":[],"sources":["../../src/rehabilitation-center-advanced-reports.js"],"sourcesContent":["/**\n * ğŸ“Š Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ù…ØªÙ‚Ø¯Ù…\n * Advanced Reports Management System\n * Ù†Ø¸Ø§Ù… Ø´Ø§Ù…Ù„ ÙˆÙ…ØªÙ‚Ø¯Ù… Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± ÙˆØ§Ù„ØªØ­Ù„ÙŠÙ„Ø§Øª\n */\n\n// Import API Client and endpoints (lazy loading)\nlet apiClient = null;\nlet API_ENDPOINTS = null;\nlet realtimeSync = null;\nlet connectionManager = null;\nlet aiAssistant = null;\nlet advancedCache = null;\n\nasync function loadAPIModules() {\n  if (apiClient !== null) return;\n\n  try {\n    const apiModule = await import('./utils/api-client.js');\n    apiClient = apiModule.default;\n    const configModule = await import('./config/api.js');\n    API_ENDPOINTS = configModule.API_ENDPOINTS;\n\n    try {\n      const connModule = await import('./utils/connection-manager.js');\n      connectionManager = connModule.default;\n    } catch (error) {\n      console.warn('Connection manager not available');\n    }\n\n    try {\n      const syncModule = await import('./utils/realtime-sync.js');\n      realtimeSync = syncModule.default;\n    } catch (error) {\n      console.warn('Real-time sync not available');\n    }\n\n    try {\n      const aiModule = await import('./utils/ai-assistant.js');\n      aiAssistant = aiModule.default;\n    } catch (error) {\n      console.warn('AI Assistant not available');\n    }\n\n    try {\n      const cacheModule = await import('./utils/advanced-cache.js');\n      advancedCache = cacheModule.default;\n    } catch (error) {\n      console.warn('Advanced cache not available');\n    }\n  } catch (error) {\n    console.warn('API modules not available');\n    apiClient = null;\n    API_ENDPOINTS = null;\n  }\n}\n\nclass RehabilitationCenterAdvancedReports {\n  constructor() {\n    this.reports = [];\n    this.templates = [];\n    this.schedules = [];\n    this.selectedReport = null;\n    this.currentView = 'reports';\n    this.filterCategory = 'all';\n    this.searchQuery = '';\n    this.loading = false;\n    this.useAPI = false;\n    this.init();\n  }\n\n  async init() {\n    await loadAPIModules();\n    this.useAPI = apiClient !== null;\n\n    if (this.useAPI) {\n      await this.loadReports();\n      await this.loadTemplates();\n      await this.loadSchedules();\n    } else {\n      this.initializeDefaultData();\n    }\n\n    if (realtimeSync) {\n      this.setupRealtimeSync();\n    }\n\n    if (connectionManager) {\n      this.setupConnectionMonitoring();\n    }\n\n    this.renderAdvancedReports();\n  }\n\n  setupRealtimeSync() {\n    realtimeSync.subscribe('reports:updated', data => {\n      this.loadReports();\n    });\n  }\n\n  setupConnectionMonitoring() {\n    connectionManager.onStatusChange(isOnline => {\n      if (isOnline && this.useAPI) {\n        this.syncPendingChanges();\n      }\n    });\n  }\n\n  async loadReports() {\n    this.loading = true;\n    try {\n      if (this.useAPI && apiClient) {\n        const cacheKey = 'advanced_reports';\n        const cached = advancedCache ? advancedCache.get(cacheKey) : null;\n\n        if (cached) {\n          this.reports = cached;\n        } else {\n          const response = await apiClient.get(\n            API_ENDPOINTS?.advancedReports?.reports?.list || '/api/advanced-reports/reports'\n          );\n          if (response.data?.success) {\n            this.reports = response.data.data || [];\n            if (advancedCache) {\n              advancedCache.set(cacheKey, this.reports, { ttl: 5 * 60 * 1000, tags: ['reports'] });\n            }\n          }\n        }\n      }\n    } catch (error) {\n      console.error('Error loading reports:', error);\n      this.loadReportsFromStorage();\n    } finally {\n      this.loading = false;\n      this.renderAdvancedReports();\n    }\n  }\n\n  async loadTemplates() {\n    try {\n      if (this.useAPI && apiClient) {\n        const response = await apiClient.get(\n          API_ENDPOINTS?.advancedReports?.templates?.list || '/api/advanced-reports/templates'\n        );\n        if (response.data?.success) {\n          this.templates = response.data.data || [];\n        }\n      }\n    } catch (error) {\n      console.error('Error loading templates:', error);\n      this.loadTemplatesFromStorage();\n    }\n  }\n\n  async loadSchedules() {\n    try {\n      if (this.useAPI && apiClient) {\n        const response = await apiClient.get(\n          API_ENDPOINTS?.advancedReports?.schedules?.list || '/api/advanced-reports/schedules'\n        );\n        if (response.data?.success) {\n          this.schedules = response.data.data || [];\n        }\n      }\n    } catch (error) {\n      console.error('Error loading schedules:', error);\n      this.loadSchedulesFromStorage();\n    }\n  }\n\n  loadReportsFromStorage() {\n    const stored = localStorage.getItem('advanced_reports');\n    if (stored) {\n      try {\n        this.reports = JSON.parse(stored);\n      } catch (error) {\n        console.error('Error loading reports from storage:', error);\n      }\n    }\n  }\n\n  loadTemplatesFromStorage() {\n    const stored = localStorage.getItem('advanced_reports_templates');\n    if (stored) {\n      try {\n        this.templates = JSON.parse(stored);\n      } catch (error) {\n        console.error('Error loading templates from storage:', error);\n      }\n    }\n  }\n\n  loadSchedulesFromStorage() {\n    const stored = localStorage.getItem('advanced_reports_schedules');\n    if (stored) {\n      try {\n        this.schedules = JSON.parse(stored);\n      } catch (error) {\n        console.error('Error loading schedules from storage:', error);\n      }\n    }\n  }\n\n  saveReportsToStorage() {\n    localStorage.setItem('advanced_reports', JSON.stringify(this.reports));\n  }\n\n  initializeDefaultData() {\n    if (this.reports.length === 0) {\n      this.reports = [\n        {\n          id: 1,\n          title: 'ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„Ø´Ù‡Ø±ÙŠ',\n          category: 'performance',\n          status: 'completed',\n          generatedAt: new Date().toISOString(),\n          format: 'pdf',\n        },\n      ];\n      this.saveReportsToStorage();\n    }\n  }\n\n  async syncPendingChanges() {\n    if (this.useAPI && apiClient) {\n      // TODO: Sync pending changes\n    }\n  }\n\n  filterByCategory(category) {\n    this.filterCategory = category === this.filterCategory ? 'all' : category;\n    this.renderAdvancedReports();\n  }\n\n  searchReports(query) {\n    this.searchQuery = query;\n    this.renderAdvancedReports();\n  }\n\n  getFilteredReports() {\n    let filtered = this.reports;\n\n    if (this.filterCategory !== 'all') {\n      filtered = filtered.filter(r => r.category === this.filterCategory);\n    }\n\n    if (this.searchQuery) {\n      const query = this.searchQuery.toLowerCase();\n      filtered = filtered.filter(\n        r =>\n          r.title.toLowerCase().includes(query) ||\n          (r.description && r.description.toLowerCase().includes(query))\n      );\n    }\n\n    return filtered;\n  }\n\n  renderAdvancedReports() {\n    const container = document.getElementById('advanced-reports-container') || document.body;\n\n    container.innerHTML = `\n      <div class=\"advanced-reports\">\n        <div class=\"header-section\">\n          <h2><i class=\"fas fa-chart-bar\"></i> Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ù…ØªÙ‚Ø¯Ù…</h2>\n          <div class=\"header-actions\">\n            <button class=\"btn btn-primary\" onclick=\"advancedReports.showCreateModal()\">\n              <i class=\"fas fa-plus\"></i> ØªÙ‚Ø±ÙŠØ± Ø¬Ø¯ÙŠØ¯\n            </button>\n            <button class=\"btn btn-info\" onclick=\"advancedReports.refresh()\" ${this.loading ? 'disabled' : ''}>\n              <i class=\"fas fa-sync-alt ${this.loading ? 'fa-spin' : ''}\"></i> ØªØ­Ø¯ÙŠØ«\n            </button>\n          </div>\n        </div>\n\n        <div class=\"filters-section\">\n          <div class=\"search-box\">\n            <i class=\"fas fa-search\"></i>\n            <input type=\"text\" class=\"search-input\" placeholder=\"Ø¨Ø­Ø« ÙÙŠ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±...\" \n                   value=\"${this.searchQuery}\"\n                   oninput=\"advancedReports.searchReports(this.value)\">\n          </div>\n          <div class=\"category-filters\">\n            <button class=\"filter-btn ${this.filterCategory === 'all' ? 'active' : ''}\" \n                    onclick=\"advancedReports.filterByCategory('all')\">\n              Ø§Ù„ÙƒÙ„\n            </button>\n            <button class=\"filter-btn ${this.filterCategory === 'performance' ? 'active' : ''}\" \n                    onclick=\"advancedReports.filterByCategory('performance')\">\n              <i class=\"fas fa-tachometer-alt\"></i> Ø§Ù„Ø£Ø¯Ø§Ø¡\n            </button>\n            <button class=\"filter-btn ${this.filterCategory === 'financial' ? 'active' : ''}\" \n                    onclick=\"advancedReports.filterByCategory('financial')\">\n              <i class=\"fas fa-dollar-sign\"></i> Ù…Ø§Ù„ÙŠ\n            </button>\n            <button class=\"filter-btn ${this.filterCategory === 'operational' ? 'active' : ''}\" \n                    onclick=\"advancedReports.filterByCategory('operational')\">\n              <i class=\"fas fa-cogs\"></i> ØªØ´ØºÙŠÙ„ÙŠ\n            </button>\n          </div>\n        </div>\n\n        <div class=\"tabs-section\">\n          <button class=\"tab-btn ${this.currentView === 'reports' ? 'active' : ''}\" onclick=\"advancedReports.switchView('reports')\">\n            <i class=\"fas fa-file-alt\"></i> Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±\n          </button>\n          <button class=\"tab-btn ${this.currentView === 'templates' ? 'active' : ''}\" onclick=\"advancedReports.switchView('templates')\">\n            <i class=\"fas fa-layer-group\"></i> Ø§Ù„Ù‚ÙˆØ§Ù„Ø¨\n          </button>\n          <button class=\"tab-btn ${this.currentView === 'schedules' ? 'active' : ''}\" onclick=\"advancedReports.switchView('schedules')\">\n            <i class=\"fas fa-calendar-alt\"></i> Ø§Ù„Ø¬Ø¯ÙˆÙ„Ø©\n          </button>\n        </div>\n\n        <div class=\"content-section\">\n          ${this.renderCurrentView()}\n        </div>\n      </div>\n    `;\n  }\n\n  renderCurrentView() {\n    switch (this.currentView) {\n      case 'reports':\n        return this.renderReports();\n      case 'templates':\n        return this.renderTemplates();\n      case 'schedules':\n        return this.renderSchedules();\n      default:\n        return this.renderReports();\n    }\n  }\n\n  renderReports() {\n    const filtered = this.getFilteredReports();\n    const stats = {\n      total: this.reports.length,\n      completed: this.reports.filter(r => r.status === 'completed').length,\n      pending: this.reports.filter(r => r.status === 'pending').length,\n      failed: this.reports.filter(r => r.status === 'failed').length,\n    };\n\n    return `\n      <div class=\"reports-view\">\n        <div class=\"reports-stats\">\n          <div class=\"stat-card\">\n            <div class=\"stat-icon\" style=\"background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\">\n              <i class=\"fas fa-file-alt\"></i>\n            </div>\n            <div class=\"stat-content\">\n              <h3>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</h3>\n              <p class=\"count\">${stats.total}</p>\n            </div>\n          </div>\n          <div class=\"stat-card\">\n            <div class=\"stat-icon\" style=\"background: linear-gradient(135deg, #28a745 0%, #20c997 100%);\">\n              <i class=\"fas fa-check-circle\"></i>\n            </div>\n            <div class=\"stat-content\">\n              <h3>Ù…ÙƒØªÙ…Ù„</h3>\n              <p class=\"count\">${stats.completed}</p>\n            </div>\n          </div>\n          <div class=\"stat-card\">\n            <div class=\"stat-icon\" style=\"background: linear-gradient(135deg, #ffc107 0%, #ff9800 100%);\">\n              <i class=\"fas fa-clock\"></i>\n            </div>\n            <div class=\"stat-content\">\n              <h3>Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©</h3>\n              <p class=\"count\">${stats.pending}</p>\n            </div>\n          </div>\n          <div class=\"stat-card\">\n            <div class=\"stat-icon\" style=\"background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);\">\n              <i class=\"fas fa-times-circle\"></i>\n            </div>\n            <div class=\"stat-content\">\n              <h3>ÙØ´Ù„</h3>\n              <p class=\"count\">${stats.failed}</p>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"reports-list\">\n          ${\n            filtered\n              .map(\n                report => `\n            <div class=\"report-card\">\n              <div class=\"report-header\">\n                <h4>${report.title}</h4>\n                <span class=\"report-status status-${report.status}\">\n                  ${this.getStatusName(report.status)}\n                </span>\n              </div>\n              <div class=\"report-body\">\n                <div class=\"report-info\">\n                  <div class=\"info-item\">\n                    <i class=\"fas fa-tag\"></i>\n                    <span>${this.getCategoryName(report.category)}</span>\n                  </div>\n                  <div class=\"info-item\">\n                    <i class=\"fas fa-file\"></i>\n                    <span>${report.format?.toUpperCase() || 'PDF'}</span>\n                  </div>\n                  <div class=\"info-item\">\n                    <i class=\"fas fa-calendar\"></i>\n                    <span>${new Date(report.generatedAt).toLocaleDateString('ar-SA')}</span>\n                  </div>\n                </div>\n              </div>\n              <div class=\"report-footer\">\n                <div class=\"report-actions\">\n                  <button class=\"btn btn-sm btn-primary\" onclick=\"advancedReports.viewReport(${report.id})\">\n                    <i class=\"fas fa-eye\"></i> Ø¹Ø±Ø¶\n                  </button>\n                  <button class=\"btn btn-sm btn-success\" onclick=\"advancedReports.downloadReport(${report.id})\">\n                    <i class=\"fas fa-download\"></i> ØªØ­Ù…ÙŠÙ„\n                  </button>\n                  <button class=\"btn btn-sm btn-danger\" onclick=\"advancedReports.deleteReport(${report.id})\">\n                    <i class=\"fas fa-trash\"></i> Ø­Ø°Ù\n                  </button>\n                </div>\n              </div>\n            </div>\n          `\n              )\n              .join('') || '<p class=\"empty-state\">Ù„Ø§ ØªÙˆØ¬Ø¯ ØªÙ‚Ø§Ø±ÙŠØ±</p>'\n          }\n        </div>\n      </div>\n    `;\n  }\n\n  renderTemplates() {\n    return `\n      <div class=\"templates-view\">\n        <div class=\"templates-grid\">\n          ${\n            this.templates\n              .map(\n                template => `\n            <div class=\"template-card\">\n              <div class=\"template-header\">\n                <h4>${template.name}</h4>\n                <span class=\"template-category\">${this.getCategoryName(template.category)}</span>\n              </div>\n              <div class=\"template-body\">\n                <p>${template.description || ''}</p>\n              </div>\n              <div class=\"template-actions\">\n                <button class=\"btn btn-sm btn-primary\" onclick=\"advancedReports.useTemplate(${template.id})\">\n                  <i class=\"fas fa-plus\"></i> Ø§Ø³ØªØ®Ø¯Ø§Ù…\n                </button>\n              </div>\n            </div>\n          `\n              )\n              .join('') || '<p class=\"empty-state\">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù‚ÙˆØ§Ù„Ø¨</p>'\n          }\n        </div>\n      </div>\n    `;\n  }\n\n  renderSchedules() {\n    return `\n      <div class=\"schedules-view\">\n        <div class=\"schedules-list\">\n          ${\n            this.schedules\n              .map(\n                schedule => `\n            <div class=\"schedule-card\">\n              <div class=\"schedule-header\">\n                <h4>${schedule.reportName || 'ØªÙ‚Ø±ÙŠØ± Ù…Ø¬Ø¯ÙˆÙ„'}</h4>\n                <span class=\"schedule-frequency\">${this.getFrequencyName(schedule.frequency)}</span>\n              </div>\n              <div class=\"schedule-body\">\n                <div class=\"schedule-info\">\n                  <div class=\"info-item\">\n                    <i class=\"fas fa-calendar\"></i>\n                    <span>Ø¢Ø®Ø± ØªØ´ØºÙŠÙ„: ${schedule.lastRun ? new Date(schedule.lastRun).toLocaleDateString('ar-SA') : 'Ù„Ù… ÙŠØªÙ… Ø§Ù„ØªØ´ØºÙŠÙ„'}</span>\n                  </div>\n                  <div class=\"info-item\">\n                    <i class=\"fas fa-calendar-check\"></i>\n                    <span>Ø§Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„Ù‚Ø§Ø¯Ù…: ${schedule.nextRun ? new Date(schedule.nextRun).toLocaleDateString('ar-SA') : 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</span>\n                  </div>\n                  <div class=\"info-item\">\n                    <i class=\"fas fa-toggle-${schedule.enabled ? 'on' : 'off'}\"></i>\n                    <span>${schedule.enabled ? 'Ù…ÙØ¹Ù„' : 'Ù…Ø¹Ø·Ù„'}</span>\n                  </div>\n                </div>\n              </div>\n              <div class=\"schedule-actions\">\n                <button class=\"btn btn-sm btn-primary\" onclick=\"advancedReports.viewSchedule(${schedule.id})\">\n                  <i class=\"fas fa-eye\"></i> Ø¹Ø±Ø¶\n                </button>\n                <button class=\"btn btn-sm btn-success\" onclick=\"advancedReports.editSchedule(${schedule.id})\">\n                  <i class=\"fas fa-edit\"></i> ØªØ¹Ø¯ÙŠÙ„\n                </button>\n              </div>\n            </div>\n          `\n              )\n              .join('') || '<p class=\"empty-state\">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¬Ø¯Ø§ÙˆÙ„</p>'\n          }\n        </div>\n      </div>\n    `;\n  }\n\n  getStatusName(status) {\n    const names = {\n      completed: 'Ù…ÙƒØªÙ…Ù„',\n      pending: 'Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©',\n      failed: 'ÙØ´Ù„',\n      cancelled: 'Ù…Ù„ØºÙŠ',\n    };\n    return names[status] || status;\n  }\n\n  getCategoryName(category) {\n    const names = {\n      performance: 'Ø§Ù„Ø£Ø¯Ø§Ø¡',\n      financial: 'Ù…Ø§Ù„ÙŠ',\n      operational: 'ØªØ´ØºÙŠÙ„ÙŠ',\n      quality: 'Ø§Ù„Ø¬ÙˆØ¯Ø©',\n      compliance: 'Ø§Ù„Ø§Ù…ØªØ«Ø§Ù„',\n    };\n    return names[category] || category;\n  }\n\n  getFrequencyName(frequency) {\n    const names = {\n      daily: 'ÙŠÙˆÙ…ÙŠ',\n      weekly: 'Ø£Ø³Ø¨ÙˆØ¹ÙŠ',\n      monthly: 'Ø´Ù‡Ø±ÙŠ',\n      quarterly: 'Ø±Ø¨Ø¹ Ø³Ù†ÙˆÙŠ',\n      yearly: 'Ø³Ù†ÙˆÙŠ',\n    };\n    return names[frequency] || frequency;\n  }\n\n  switchView(view) {\n    this.currentView = view;\n    this.renderAdvancedReports();\n  }\n\n  viewReport(reportId) {\n    alert(`Ø¹Ø±Ø¶ Ø§Ù„ØªÙ‚Ø±ÙŠØ± #${reportId} - Ø³ÙŠØªÙ… Ø§Ù„ØªØ·ÙˆÙŠØ± Ù‚Ø±ÙŠØ¨Ø§Ù‹`);\n  }\n\n  downloadReport(reportId) {\n    alert(`ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªÙ‚Ø±ÙŠØ± #${reportId} - Ø³ÙŠØªÙ… Ø§Ù„ØªØ·ÙˆÙŠØ± Ù‚Ø±ÙŠØ¨Ø§Ù‹`);\n  }\n\n  async deleteReport(reportId) {\n    if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„ØªÙ‚Ø±ÙŠØ±ØŸ')) {\n      return;\n    }\n\n    try {\n      if (this.useAPI && apiClient) {\n        const response = await apiClient.delete(\n          API_ENDPOINTS?.advancedReports?.reports?.delete ||\n            `/api/advanced-reports/reports/${reportId}`\n        );\n        if (response.data?.success) {\n          if (advancedCache) {\n            advancedCache.clear(['reports']);\n          }\n          await this.loadReports();\n          if (typeof showToast === 'function') {\n            showToast('ØªÙ… Ø­Ø°Ù Ø§Ù„ØªÙ‚Ø±ÙŠØ±', 'success');\n          }\n        }\n      } else {\n        this.reports = this.reports.filter(r => r.id !== reportId);\n        this.saveReportsToStorage();\n        this.renderAdvancedReports();\n      }\n    } catch (error) {\n      console.error('Error deleting report:', error);\n      if (typeof showToast === 'function') {\n        showToast('ÙØ´Ù„ Ø­Ø°Ù Ø§Ù„ØªÙ‚Ø±ÙŠØ±', 'error');\n      }\n    }\n  }\n\n  useTemplate(templateId) {\n    alert(`Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù‚Ø§Ù„Ø¨ #${templateId} - Ø³ÙŠØªÙ… Ø§Ù„ØªØ·ÙˆÙŠØ± Ù‚Ø±ÙŠØ¨Ø§Ù‹`);\n  }\n\n  viewSchedule(scheduleId) {\n    alert(`Ø¹Ø±Ø¶ Ø§Ù„Ø¬Ø¯ÙˆÙ„ #${scheduleId} - Ø³ÙŠØªÙ… Ø§Ù„ØªØ·ÙˆÙŠØ± Ù‚Ø±ÙŠØ¨Ø§Ù‹`);\n  }\n\n  editSchedule(scheduleId) {\n    alert(`ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¬Ø¯ÙˆÙ„ #${scheduleId} - Ø³ÙŠØªÙ… Ø§Ù„ØªØ·ÙˆÙŠØ± Ù‚Ø±ÙŠØ¨Ø§Ù‹`);\n  }\n\n  showCreateModal() {\n    alert('Ù†Ù…ÙˆØ°Ø¬ Ø¥Ù†Ø´Ø§Ø¡ ØªÙ‚Ø±ÙŠØ± - Ø³ÙŠØªÙ… Ø§Ù„ØªØ·ÙˆÙŠØ± Ù‚Ø±ÙŠØ¨Ø§Ù‹');\n  }\n\n  async refresh() {\n    if (advancedCache) {\n      advancedCache.clear(['reports']);\n    }\n    await this.loadReports();\n    await this.loadTemplates();\n    await this.loadSchedules();\n    if (typeof showToast === 'function') {\n      showToast('ØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ«', 'success');\n    }\n  }\n}\n\n// Initialize advanced reports system\nconst advancedReports = new RehabilitationCenterAdvancedReports();\n\n// Make it available globally\nif (typeof window !== 'undefined') {\n  window.advancedReports = advancedReports;\n\n  // Enhance with universal module enhancer if available\n  if (window.universalModuleEnhancer) {\n    window.universalModuleEnhancer.enhanceModule(advancedReports, 'advancedReports');\n  }\n}\n\n// Export for use in other modules\nif (typeof module !== 'undefined' && module.exports) {\n  module.exports = RehabilitationCenterAdvancedReports;\n}\n"],"file":"assets/rehabilitation-center-advanced-reports--odqURPh.js"}