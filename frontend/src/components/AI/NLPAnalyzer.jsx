import React, { useState, useEffect } from 'react';\nimport './NLPAnalyzer.css';\n\n/**\n * NLPAnalyzer Component\n * \n * Natural Language Processing tools for text analysis\n * Features: sentiment analysis, keyword extraction, intent detection, entity recognition\n * Supports 4 languages: English, Arabic, Spanish, French\n */\nfunction NLPAnalyzer() {\n  const [text, setText] = useState('');\n  const [language, setLanguage] = useState('en');\n  const [analysisType, setAnalysisType] = useState('sentiment');\n  const [results, setResults] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [allAnalysis, setAllAnalysis] = useState(null);\n  const [wordCount, setWordCount] = useState(0);\n\n  // Update word count\n  useEffect(() => {\n    const words = text.trim().split(/\\s+/).filter(w => w.length > 0);\n    setWordCount(words.length);\n  }, [text]);\n\n  const performAnalysis = (type = null) => {\n    const analysisToRun = type || analysisType;\n    \n    if (!text.trim()) {\n      setError('Please enter text to analyze');\n      return;\n    }\n\n    setLoading(true);\n    setError(null);\n    try {\n      let result;\n      \n      switch (analysisToRun) {\n        case 'sentiment':\n          result = window.nlpService?.analyzeSentiment?.(text, language);\n          break;\n        case 'keywords':\n          result = window.nlpService?.extractKeywords?.(text, language);\n          break;\n        case 'intent':\n          result = window.nlpService?.detectIntent?.(text, language);\n          break;\n        case 'entities':\n          result = window.nlpService?.recognizeEntities?.(text, language);\n          break;\n        case 'summary':\n          result = window.nlpService?.summarizeText?.(text, language, 3);\n          break;\n        case 'similarity':\n          // For similarity, we need comparison text\n          result = window.nlpService?.calculateSimilarity?.(text, text.substring(0, Math.floor(text.length / 2)), language);\n          break;\n        default:\n          throw new Error('Unknown analysis type');\n      }\n\n      setResults(result || {});\n    } catch (err) {\n      setError(`Analysis error: ${err.message}`);\n      console.error('Analysis error:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const analyzeAll = () => {\n    if (!text.trim()) {\n      setError('Please enter text to analyze');\n      return;\n    }\n\n    setLoading(true);\n    setError(null);\n    try {\n      const fullAnalysis = {};\n      \n      // Run all analyses\n      fullAnalysis.sentiment = window.nlpService?.analyzeSentiment?.(text, language);\n      fullAnalysis.keywords = window.nlpService?.extractKeywords?.(text, language);\n      fullAnalysis.intent = window.nlpService?.detectIntent?.(text, language);\n      fullAnalysis.entities = window.nlpService?.recognizeEntities?.(text, language);\n      fullAnalysis.summary = window.nlpService?.summarizeText?.(text, language, 3);\n\n      setAllAnalysis(fullAnalysis);\n      setResults(null);\n    } catch (err) {\n      setError(`Analysis error: ${err.message}`);\n      console.error('Analysis error:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const loadExampleText = () => {\n    const examples = {\n      en: 'The product quality is excellent and the customer service was outstanding. I am very satisfied with my purchase and highly recommend it to others.',\n      ar: 'Ø¬ÙˆØ¯Ø© Ø§Ù„Ù…Ù†ØªØ¬ Ù…Ù…ØªØ§Ø²Ø© ÙˆØ®Ø¯Ù…Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ ÙƒØ§Ù†Øª Ø±Ø§Ø¦Ø¹Ø©. Ø£Ù†Ø§ Ø±Ø§Ø¶Ù Ø¬Ø¯Ø§Ù‹ Ø¹Ù† Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø´Ø±Ø§Ø¡ ÙˆØ£Ù†ØµØ­ Ø¨Ù‡ Ø§Ù„Ø¢Ø®Ø±ÙŠÙ†.',\n      es: 'La calidad del producto es excelente y el servicio al cliente fue sobresaliente. Estoy muy satisfecho con mi compra y lo recomiendo ampliamente.',\n      fr: 'La qualitÃ© du produit est excellente et le service client Ã©tait remarquable. Je suis trÃ¨s satisfait de mon achat et je le recommande vivement.'\n    };\n    setText(examples[language] || examples.en);\n  };\n\n  const languages = [\n    { code: 'en', name: 'ğŸ‡¬ğŸ‡§ English' },\n    { code: 'ar', name: 'ğŸ‡¸ğŸ‡¦ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©' },\n    { code: 'es', name: 'ğŸ‡ªğŸ‡¸ EspaÃ±ol' },\n    { code: 'fr', name: 'ğŸ‡«ğŸ‡· FranÃ§ais' }\n  ];\n\n  const analysisTypes = [\n    { id: 'sentiment', label: 'ğŸ˜Š Sentiment', description: 'Determine positive/negative sentiment' },\n    { id: 'keywords', label: 'ğŸ”‘ Keywords', description: 'Extract important keywords' },\n    { id: 'intent', label: 'ğŸ’¡ Intent', description: 'Detect user intent' },\n    { id: 'entities', label: 'ğŸ·ï¸ Entities', description: 'Recognize named entities' },\n    { id: 'summary', label: 'ğŸ“ Summary', description: 'Generate text summary' },\n    { id: 'similarity', label: 'ğŸ”— Similarity', description: 'Compare text similarity' }\n  ];\n\n  return (\n    <div className=\"nlp-analyzer\">\n      <div className=\"analyzer-header\">\n        <h2>ğŸ—£ï¸ NLP Text Analyzer</h2>\n        <p className=\"analyzer-subtitle\">Advanced text analysis with multi-language support</p>\n      </div>\n\n      {/* Language Selector */}\n      <div className=\"language-selector\">\n        <label htmlFor=\"language-select\">Language:</label>\n        <div className=\"language-buttons\">\n          {languages.map(lang => (\n            <button\n              key={lang.code}\n              onClick={() => setLanguage(lang.code)}\n              className={`language-btn ${language === lang.code ? 'active' : ''}`}\n              title={lang.name}\n            >\n              {lang.name}\n            </button>\n          ))}\n        </div>\n      </div>\n\n      {/* Text Input */}\n      <div className=\"text-input-section\">\n        <div className=\"input-header\">\n          <label htmlFor=\"text-input\">Text to Analyze:</label>\n          <span className=\"word-count\">Words: {wordCount}</span>\n        </div>\n        <div className=\"input-wrapper\">\n          <textarea\n            id=\"text-input\"\n            value={text}\n            onChange={e => setText(e.target.value)}\n            placeholder=\"Enter text to analyze... (minimum 10 characters)\"\n            rows=\"6\"\n            className=\"nlp-textarea\"\n            spellCheck=\"false\"\n          />\n          <button\n            onClick={loadExampleText}\n            className=\"btn-example\"\n            title=\"Load sample text for current language\"\n          >\n            ğŸ“‹ Load Example\n          </button>\n        </div>\n      </div>\n\n      {/* Error Message */}\n      {error && (\n        <div className=\"error-box\" role=\"alert\">\n          âŒ {error}\n        </div>\n      )}\n\n      {/* Analysis Type Selection */}\n      <div className=\"analysis-selector\">\n        <h3>Select Analysis Type(s):</h3>\n        <div className=\"analysis-grid\">\n          {analysisTypes.map(analysis => (\n            <button\n              key={analysis.id}\n              onClick={() => {\n                setAnalysisType(analysis.id);\n                performAnalysis(analysis.id);\n              }}\n              className={`analysis-option ${analysisType === analysis.id ? 'active' : ''}`}\n              title={analysis.description}\n            >\n              <span className=\"analysis-label\">{analysis.label}</span>\n              <span className=\"analysis-desc\">{analysis.description}</span>\n            </button>\n          ))}\n        </div>\n      </div>\n\n      {/* Action Buttons */}\n      <div className=\"action-buttons\">\n        <button\n          onClick={() => performAnalysis()}\n          disabled={loading || wordCount < 2}\n          className=\"btn-analyze\"\n          title={`Analyze with ${analysisType}`}\n        >\n          {loading ? 'â³ Analyzing...' : `â–¶ï¸ Analyze (${analysisType})`}\n        </button>\n        <button\n          onClick={analyzeAll}\n          disabled={loading || wordCount < 2}\n          className=\"btn-analyze-all\"\n          title=\"Run all analyses at once\"\n        >\n          {loading ? 'â³ Processing...' : 'âš¡ Analyze All'}\n        </button>\n      </div>\n\n      {/* Individual Results */}\n      {results && Object.keys(results).length > 0 && (\n        <div className=\"results-section\">\n          <h3>ğŸ“Š {analysisType.toUpperCase()} Results</h3>\n          <div className=\"results-content\">\n            {analysisType === 'sentiment' && (\n              <div className=\"sentiment-result\">\n                <div className=\"sentiment-score\">\n                  <span className=\"score-label\">Sentiment Score:</span>\n                  <span className={`score-value score-${results.label || 'neutral'}`}>\n                    {results.label || 'Neutral'} ({(results.score || 0).toFixed(2)})\n                  </span>\n                </div>\n                <div className=\"sentiment-confidence\">\n                  <span>Confidence: {((results.confidence || 0) * 100).toFixed(1)}%</span>\n                  <div className=\"confidence-bar\">\n                    <div \n                      className=\"confidence-fill\" \n                      style={{width: `${(results.confidence || 0) * 100}%`}}\n                    />\n                  </div>\n                </div>\n              </div>\n            )}\n            {analysisType === 'keywords' && (\n              <div className=\"keywords-result\">\n                <div className=\"keywords-list\">\n                  {(results.keywords || []).map((kw, idx) => (\n                    <span key={idx} className=\"keyword-tag\">\n                      {kw} <span className=\"keyword-freq\">({results.frequency?.[idx] || 1})</span>\n                    </span>\n                  ))}\n                </div>\n              </div>\n            )}\n            {analysisType === 'intent' && (\n              <div className=\"intent-result\">\n                <p><strong>Primary Intent:</strong> {results.intent || 'Unknown'}</p>\n                <p><strong>Confidence:</strong> {((results.confidence || 0) * 100).toFixed(1)}%</p>\n                <p><strong>Category:</strong> {results.category || 'N/A'}</p>\n              </div>\n            )}\n            {analysisType === 'entities' && (\n              <div className=\"entities-result\">\n                <div className=\"entities-list\">\n                  {Object.entries(results).map(([type, entities]) => (\n                    <div key={type} className=\"entity-type\">\n                      <h4>{type}:</h4>\n                      <div className=\"entity-items\">\n                        {(Array.isArray(entities) ? entities : []).map((entity, idx) => (\n                          <span key={idx} className=\"entity-badge\">{entity}</span>\n                        ))}\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            )}\n            {analysisType === 'summary' && (\n              <div className=\"summary-result\">\n                <p className=\"summary-text\">{results.summary || results}</p>\n              </div>\n            )}\n            {analysisType === 'similarity' && (\n              <div className=\"similarity-result\">\n                <p><strong>Similarity Score:</strong> {(results.similarity || 0).toFixed(3)}</p>\n                <div className=\"similarity-bar\">\n                  <div \n                    className=\"similarity-fill\" \n                    style={{width: `${(results.similarity || 0) * 100}%`}}\n                  />\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n      )}\n\n      {/* All Results */}\n      {allAnalysis && (\n        <div className=\"all-results-section\">\n          <h3>ğŸ“Š Complete Analysis Results</h3>\n          <div className=\"analysis-cards-grid\">\n            {Object.entries(allAnalysis).map(([type, result]) => (\n              <div key={type} className=\"analysis-card\">\n                <h4>{type.toUpperCase()}</h4>\n                <div className=\"card-content\">\n                  {JSON.stringify(result, null, 2)}\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* Empty State */}\n      {!loading && !results && !allAnalysis && wordCount > 0 && (\n        <div className=\"empty-results\">\n          ğŸ’¡ Select an analysis type above to get started\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default NLPAnalyzer;\n