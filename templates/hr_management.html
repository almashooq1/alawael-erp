<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>إدارة الموارد البشرية - مراكز الأوائل</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.rtl.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="{{ url_for('static', filename='css/style.css') }}" rel="stylesheet">
    <style>
        .hr-card {
            border: none;
            border-radius: 15px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: transform 0.2s;
        }
        .hr-card:hover {
            transform: translateY(-2px);
        }
        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 15px;
        }
        .nav-pills .nav-link.active {
            background-color: #0d6efd;
        }
        .table-responsive {
            border-radius: 10px;
            overflow: hidden;
        }
        .btn-action {
            padding: 0.25rem 0.5rem;
            font-size: 0.875rem;
        }
        .modal-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        .form-control:focus, .form-select:focus {
            border-color: #667eea;
            box-shadow: 0 0 0 0.2rem rgba(102, 126, 234, 0.25);
        }
    </style>
</head>
<body class="bg-light">
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container-fluid">
            <a class="navbar-brand" href="{{ url_for('dashboard') }}">
                <i class="fas fa-arrow-right me-2"></i>
                العودة للوحة التحكم
            </a>
            <h4 class="text-white mb-0">إدارة الموارد البشرية</h4>
        </div>
    </nav>

    {% block content %}
    <div class="container-fluid py-4 assessment-page">
        <!-- Assessment Header with Logo -->
        <div class="assessment-form-header text-center mb-4">
            <img src="{{ url_for('static', filename='images/awail-logo.svg') }}" alt="شعار مراكز الأوائل" class="assessment-logo">
            <h2 class="mb-0">إدارة الموارد البشرية</h2>
            <p class="text-muted">نظام شامل لإدارة الموظفين والمتطوعين</p>
        </div>
        <!-- Dashboard Stats -->
        <div class="row mb-4">
            <div class="col-md-3">
                <div class="card stat-card">
                    <div class="card-body text-center">
                        <i class="fas fa-users fa-2x mb-2"></i>
                        <h3 id="totalEmployees">0</h3>
                        <p class="mb-0">إجمالي الموظفين</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card stat-card">
                    <div class="card-body text-center">
                        <i class="fas fa-user-check fa-2x mb-2"></i>
                        <h3 id="presentToday">0</h3>
                        <p class="mb-0">الحاضرون اليوم</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card stat-card">
                    <div class="card-body text-center">
                        <i class="fas fa-calendar-times fa-2x mb-2"></i>
                        <h3 id="pendingLeaves">0</h3>
                        <p class="mb-0">طلبات الإجازة المعلقة</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card stat-card">
                    <div class="card-body text-center">
                        <i class="fas fa-chart-line fa-2x mb-2"></i>
                        <h3 id="avgPerformance">0%</h3>
                        <p class="mb-0">متوسط الأداء</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="row">
            <div class="col-md-3">
                <!-- Navigation Pills -->
                <div class="card hr-card">
                    <div class="card-body">
                        <h5 class="card-title">الأقسام</h5>
                        <div class="nav flex-column nav-pills" id="hr-tabs">
                            <button class="nav-link active" data-bs-toggle="pill" data-bs-target="#employees-tab">
                                <i class="fas fa-users me-2"></i>الموظفين
                            </button>
                            <button class="nav-link" data-bs-toggle="pill" data-bs-target="#attendance-tab">
                                <i class="fas fa-clock me-2"></i>الحضور والانصراف
                            </button>
                            <button class="nav-link" data-bs-toggle="pill" data-bs-target="#leaves-tab">
                                <i class="fas fa-calendar-alt me-2"></i>الإجازات
                            </button>
                            <button class="nav-link" data-bs-toggle="pill" data-bs-target="#salary-tab">
                                <i class="fas fa-money-bill-wave me-2"></i>الرواتب
                            </button>
                            <button class="nav-link" data-bs-toggle="pill" data-bs-target="#performance-tab">
                                <i class="fas fa-chart-bar me-2"></i>تقييم الأداء
                            </button>
                            <button class="nav-link" data-bs-toggle="pill" data-bs-target="#training-tab">
                                <i class="fas fa-graduation-cap me-2"></i>التدريب
                            </button>
                            <button class="nav-link" data-bs-toggle="pill" data-bs-target="#recruitment-tab">
                                <i class="fas fa-user-plus me-2"></i>التوظيف
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-md-9">
                <div class="tab-content" id="hr-content">
                    <!-- Employees Tab -->
                    <div class="tab-pane fade show active" id="employees-tab">
                        <div class="card hr-card">
                            <div class="card-header d-flex justify-content-between align-items-center">
                                <h5 class="mb-0">إدارة الموظفين</h5>
                                <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addEmployeeModal">
                                    <i class="fas fa-plus me-2"></i>إضافة موظف
                                </button>
                            </div>
                            <div class="card-body">
                                <div class="row mb-3">
                                    <div class="col-md-4">
                                        <input type="text" class="form-control" id="employeeSearch" placeholder="البحث عن موظف...">
                                    </div>
                                    <div class="col-md-3">
                                        <select class="form-select" id="departmentFilter">
                                            <option value="">جميع الأقسام</option>
                                        </select>
                                    </div>
                                    <div class="col-md-3">
                                        <select class="form-select" id="statusFilter">
                                            <option value="">جميع الحالات</option>
                                            <option value="active">نشط</option>
                                            <option value="inactive">غير نشط</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="table-responsive">
                                    <table class="table table-hover">
                                        <thead class="table-dark">
                                            <tr>
                                                <th>رقم الموظف</th>
                                                <th>الاسم</th>
                                                <th>القسم</th>
                                                <th>المنصب</th>
                                                <th>الراتب</th>
                                                <th>الحالة</th>
                                                <th>الإجراءات</th>
                                            </tr>
                                        </thead>
                                        <tbody id="employeesTable">
                                            <!-- سيتم تحميل البيانات ديناميكياً -->
                                        </tbody>
                                    </table>
                                </div>
                                <nav>
                                    <ul class="pagination justify-content-center" id="employeesPagination">
                                        <!-- سيتم إنشاء الصفحات ديناميكياً -->
                                    </ul>
                                </nav>
                            </div>
                        </div>
                    </div>

                    <!-- Attendance Tab -->
                    <div class="tab-pane fade" id="attendance-tab">
                        <div class="card hr-card">
                            <div class="card-header">
                                <h5 class="mb-0">إدارة الحضور والانصراف</h5>
                            </div>
                            <div class="card-body">
                                <div class="row mb-3">
                                    <div class="col-md-3">
                                        <input type="date" class="form-control" id="attendanceDate">
                                    </div>
                                    <div class="col-md-3">
                                        <select class="form-select" id="attendanceEmployee">
                                            <option value="">جميع الموظفين</option>
                                        </select>
                                    </div>
                                    <div class="col-md-3">
                                        <button class="btn btn-primary" onclick="loadAttendanceRecords()">
                                            <i class="fas fa-search me-2"></i>بحث
                                        </button>
                                    </div>
                                </div>
                                <div class="table-responsive">
                                    <table class="table table-hover">
                                        <thead class="table-dark">
                                            <tr>
                                                <th>الموظف</th>
                                                <th>التاريخ</th>
                                                <th>وقت الحضور</th>
                                                <th>وقت الانصراف</th>
                                                <th>ساعات العمل</th>
                                                <th>الحالة</th>
                                            </tr>
                                        </thead>
                                        <tbody id="attendanceTable">
                                            <!-- سيتم تحميل البيانات ديناميكياً -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Leaves Tab -->
                    <div class="tab-pane fade" id="leaves-tab">
                        <div class="card hr-card">
                            <div class="card-header d-flex justify-content-between align-items-center">
                                <h5 class="mb-0">إدارة الإجازات</h5>
                                <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addLeaveModal">
                                    <i class="fas fa-plus me-2"></i>طلب إجازة
                                </button>
                            </div>
                            <div class="card-body">
                                <div class="row mb-3">
                                    <div class="col-md-3">
                                        <select class="form-select" id="leaveStatusFilter">
                                            <option value="">جميع الحالات</option>
                                            <option value="pending">معلق</option>
                                            <option value="approved">موافق عليه</option>
                                            <option value="rejected">مرفوض</option>
                                        </select>
                                    </div>
                                    <div class="col-md-3">
                                        <select class="form-select" id="leaveTypeFilter">
                                            <option value="">جميع الأنواع</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="table-responsive">
                                    <table class="table table-hover">
                                        <thead class="table-dark">
                                            <tr>
                                                <th>الموظف</th>
                                                <th>نوع الإجازة</th>
                                                <th>من تاريخ</th>
                                                <th>إلى تاريخ</th>
                                                <th>الأيام</th>
                                                <th>الحالة</th>
                                                <th>الإجراءات</th>
                                            </tr>
                                        </thead>
                                        <tbody id="leavesTable">
                                            <!-- سيتم تحميل البيانات ديناميكياً -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Salary Tab -->
                    <div class="tab-pane fade" id="salary-tab">
                        <div class="card hr-card">
                            <div class="card-header d-flex justify-content-between align-items-center">
                                <h5 class="mb-0">إدارة الرواتب</h5>
                                <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addSalaryModal">
                                    <i class="fas fa-plus me-2"></i>إضافة راتب
                                </button>
                            </div>
                            <div class="card-body">
                                <div class="row mb-3">
                                    <div class="col-md-3">
                                        <select class="form-select" id="salaryMonth">
                                            <option value="">الشهر</option>
                                            <option value="1">يناير</option>
                                            <option value="2">فبراير</option>
                                            <option value="3">مارس</option>
                                            <option value="4">أبريل</option>
                                            <option value="5">مايو</option>
                                            <option value="6">يونيو</option>
                                            <option value="7">يوليو</option>
                                            <option value="8">أغسطس</option>
                                            <option value="9">سبتمبر</option>
                                            <option value="10">أكتوبر</option>
                                            <option value="11">نوفمبر</option>
                                            <option value="12">ديسمبر</option>
                                        </select>
                                    </div>
                                    <div class="col-md-3">
                                        <select class="form-select" id="salaryYear">
                                            <option value="">السنة</option>
                                        </select>
                                    </div>
                                    <div class="col-md-3">
                                        <button class="btn btn-primary" onclick="loadSalaryRecords()">
                                            <i class="fas fa-search me-2"></i>بحث
                                        </button>
                                    </div>
                                </div>
                                <div class="table-responsive">
                                    <table class="table table-hover">
                                        <thead class="table-dark">
                                            <tr>
                                                <th>الموظف</th>
                                                <th>الشهر/السنة</th>
                                                <th>الراتب الأساسي</th>
                                                <th>البدلات</th>
                                                <th>المكافآت</th>
                                                <th>الخصومات</th>
                                                <th>الصافي</th>
                                                <th>الحالة</th>
                                            </tr>
                                        </thead>
                                        <tbody id="salaryTable">
                                            <!-- سيتم تحميل البيانات ديناميكياً -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Performance Tab -->
                    <div class="tab-pane fade" id="performance-tab">
                        <div class="card hr-card">
                            <div class="card-header d-flex justify-content-between align-items-center">
                                <h5 class="mb-0">تقييم الأداء</h5>
                                <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addReviewModal">
                                    <i class="fas fa-plus me-2"></i>إضافة تقييم
                                </button>
                            </div>
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table table-hover">
                                        <thead class="table-dark">
                                            <tr>
                                                <th>الموظف</th>
                                                <th>المقيم</th>
                                                <th>فترة التقييم</th>
                                                <th>التقييم العام</th>
                                                <th>تحقيق الأهداف</th>
                                                <th>الحالة</th>
                                                <th>الإجراءات</th>
                                            </tr>
                                        </thead>
                                        <tbody id="performanceTable">
                                            <!-- سيتم تحميل البيانات ديناميكياً -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Training Tab -->
                    <div class="tab-pane fade" id="training-tab">
                        <div class="card hr-card">
                            <div class="card-header d-flex justify-content-between align-items-center">
                                <h5 class="mb-0">برامج التدريب</h5>
                                <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addTrainingModal">
                                    <i class="fas fa-plus me-2"></i>إضافة برنامج
                                </button>
                            </div>
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table table-hover">
                                        <thead class="table-dark">
                                            <tr>
                                                <th>عنوان البرنامج</th>
                                                <th>الفئة</th>
                                                <th>المدة (ساعة)</th>
                                                <th>المدرب</th>
                                                <th>التكلفة</th>
                                                <th>الحالة</th>
                                                <th>الإجراءات</th>
                                            </tr>
                                        </thead>
                                        <tbody id="trainingTable">
                                            <!-- سيتم تحميل البيانات ديناميكياً -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Recruitment Tab -->
                    <div class="tab-pane fade" id="recruitment-tab">
                        <div class="card hr-card">
                            <div class="card-header">
                                <h5 class="mb-0">إدارة التوظيف</h5>
                            </div>
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table table-hover">
                                        <thead class="table-dark">
                                            <tr>
                                                <th>اسم المتقدم</th>
                                                <th>المنصب</th>
                                                <th>سنوات الخبرة</th>
                                                <th>الراتب المتوقع</th>
                                                <th>نقاط الذكاء الاصطناعي</th>
                                                <th>الحالة</th>
                                                <th>الإجراءات</th>
                                            </tr>
                                        </thead>
                                        <tbody id="recruitmentTable">
                                            <!-- سيتم تحميل البيانات ديناميكياً -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modals will be added in the JavaScript file -->
    <div id="modalsContainer"></div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{{ url_for('static', filename='js/hr_management.js') }}"></script>
</body>
</html>
