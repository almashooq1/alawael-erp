
> alaweal-center-management-system@2.1.0 test
> jest -c backend/jest.config.js

  console.log
    ظ£à ╪ش┘à┘è╪╣ ╪د┘╪د╪«╪ز╪ذ╪د╪▒╪د╪ز ╪ش╪د┘ç╪▓╪ر ┘┘╪ز╪┤╪║┘è┘

      at Object.log (tests/smartNotifications.test.js:428:9)

node.exe : PASS backend/__tests__/models.simple.test.js
At line:1 char:1
+ & "C:\Program Files\nodejs/node.exe" "C:\Program 
Files\nodejs/node_mo ...
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
~~~~~~~~~~~~~~~
    + CategoryInfo          : NotSpecified: (PASS backe 
   nd/__....simple.test.js:String) [], RemoteException
    + FullyQualifiedErrorId : NativeCommandError
 
  Memory Models - Simplified Tests
    Employee Model
      ظêأ should create new employee (13 ms)
      ظêأ should find all employees (3 ms)
      ظêأ should find employee by ID (3 ms)
      ظêأ should update employee (4 ms)
      ظêأ should delete employee (4 ms)
    Attendance Model
      ظêأ should create attendance record (1 ms)
      ظêأ should find attendance records (2 ms)
    Leave Model
      ظêأ should create leave request (1 ms)
      ظêأ should find pending leaves (1 ms)
      ظêأ should update leave status (2 ms)

PASS backend/__tests__/database.test.js
  In-Memory Database Configuration
    Database Read/Write
      ظêأ should write data to database (12 ms)
      ظêأ should read data from database (1 ms)
      ظêأ should preserve all collections (2 ms)
    Collections Management
      ظêأ should handle users collection (3 ms)
      ظêأ should handle employees collection (1 ms)
      ظêأ should handle attendances collection (1 ms)
      ظêأ should handle leaves collection (1 ms)
    Data Persistence
      ظêأ should maintain data between operations (1 ms)
      ظêأ should overwrite data on write (1 ms)
    Edge Cases
      ظêأ should handle empty database (1 ms)
      ظêأ should handle null values in collections (1 
ms)
      ظêأ should handle undefined values in collections 
(1 ms)
      ظêأ should handle large datasets (2 ms)
      ظêأ should handle complex nested objects (1 ms)
    Data Integrity
      ظêأ should not modify returned data references (1 
ms)
      ظêأ should handle concurrent reads (3 ms)
      ظêأ should handle mixed operations (2 ms)
    Data Structure Consistency
      ظêأ should maintain required collections (2 ms)
      ظêأ should handle objects with additional 
properties (2 ms)
    Database API
      ظêأ should export read function (1 ms)
      ظêأ should export write function
      ظêأ should return object from read

FAIL backend/__tests__/advancedArchiving.test.js
  ≡اùéي╕ ┘╪╕╪د┘à ╪د┘╪ث╪▒╪┤┘╪ر 
╪د┘╪ح┘┘â╪ز╪▒┘ê┘┘è╪ر ╪د┘╪░┘â┘è
    ≡اôè ╪د┘╪ز╪╡┘┘è┘ ╪د┘╪░┘â┘è
      ├ù ┘è╪ش╪ذ ╪ز╪╡┘┘è┘ ╪د┘┘╪د╪ز┘ê╪▒╪ر ╪ذ╪┤┘â┘ 
╪╡╪ص┘è╪ص (38 ms)
      ├ù ┘è╪ش╪ذ ╪ز╪╡┘┘è┘ ┘ê╪س┘è┘é╪ر ╪د┘╪╣╪د┘à┘┘è┘ 
╪ذ╪┤┘â┘ ╪╡╪ص┘è╪ص (1 ms)
      ├ù ┘è╪ش╪ذ ╪ز╪╡┘┘è┘ ╪د┘╪╣┘é╪» ╪ذ╪┤┘â┘ ╪╡╪ص┘è╪ص 
(3 ms)
      ظêأ ╪ش┘à┘è╪╣ ╪د┘┘╪خ╪د╪ز ╪د┘┘ 10 ┘è╪ش╪ذ ╪ث┘ 
╪ز┘â┘ê┘ ┘à╪ز╪د╪ص╪ر (3 ms)
    ≡اôخ ╪ث╪▒╪┤┘╪ر ╪د┘┘à╪│╪ز┘╪»╪د╪ز
      ├ù ┘è╪ش╪ذ ╪ث╪▒╪┤┘╪ر ╪د┘┘à╪│╪ز┘╪» ╪ذ┘╪ش╪د╪ص (7 
ms)
      ├ù ┘è╪ش╪ذ ╪ص┘╪╕ ╪د┘┘à╪│╪ز┘╪» ┘┘è 
╪د┘╪ث╪▒╪┤┘è┘ (1 ms)
      ├ù ┘è╪ش╪ذ ╪ز╪│╪ش┘è┘ ╪د┘┘╪┤╪د╪╖ ╪╣┘╪» 
╪د┘╪ث╪▒╪┤┘╪ر (2 ms)
      ├ù ┘è╪ش╪ذ ╪ص╪│╪د╪ذ ╪ز╪د╪▒┘è╪« ╪د┘╪ز┘ç╪د╪ة 
╪د┘╪╡┘╪د╪ص┘è╪ر ╪ذ┘╪د╪ة┘ï ╪╣┘┘ë ╪د┘┘╪خ╪ر (4 ms)
    ≡اù£ي╕ ╪د┘╪╢╪║╪╖ ╪د┘╪░┘â┘è
      ├ù ┘è╪ش╪ذ ╪╢╪║╪╖ ┘à┘┘ ┘╪╡┘è (8 ms)
      ├ù ┘è╪ش╪ذ ╪╣╪»┘à ╪╢╪║╪╖ ┘à┘┘ ╪╡┘ê╪▒╪ر
      ├ù ┘è╪ش╪ذ ╪╣╪»┘à ╪╢╪║╪╖ ┘à┘┘ ┘┘è╪»┘è┘ê (1 ms)
      ├ù ┘è╪ش╪ذ ╪ز╪ص╪»┘è╪» ┘à╪│╪ز┘ê┘ë ╪د┘╪╢╪║╪╖ 
╪ذ┘╪د╪ة┘ï ╪╣┘┘ë ╪ص╪ش┘à ╪د┘┘à┘┘ (1 ms)
    ≡ا¤ ╪د┘╪ذ╪ص╪س ╪د┘┘à╪ز┘é╪»┘à
      ├ù ┘è╪ش╪ذ ╪د┘╪╣╪س┘ê╪▒ ╪╣┘┘ë ╪د┘┘à╪│╪ز┘╪»╪د╪ز 
╪د┘┘à╪╖╪د╪ذ┘é╪ر ┘┘╪د╪│╪ز╪╣┘╪د┘à (1 ms)
      ظêأ ┘è╪ش╪ذ ╪ز╪▒╪ز┘è╪ذ ╪د┘┘╪ز╪د╪خ╪ش ╪ص╪│╪ذ 
╪د┘╪ث┘ç┘à┘è╪ر (1 ms)
      ├ù ┘è╪ش╪ذ ┘┘╪ز╪▒╪ر ╪د┘┘╪ز╪د╪خ╪ش ╪ص╪│╪ذ 
╪د┘┘╪خ╪ر (1 ms)
      ظêأ ┘è╪ش╪ذ ╪ز╪ص╪»┘è╪» ╪د┘╪ص╪» ╪د┘╪ث┘é╪╡┘ë 
┘┘┘╪ز╪د╪خ╪ش (1 ms)
    ≡اôح ╪د┘╪د╪│╪ز╪▒╪ش╪د╪╣ ┘ê╪د┘╪ز╪ص┘é┘é
      ├ù ┘è╪ش╪ذ ╪د╪│╪ز╪▒╪ش╪د╪╣ ╪د┘╪ث╪▒╪┤┘è┘ 
╪ذ┘╪ش╪د╪ص (1 ms)
      ├ù ┘è╪ش╪ذ ╪د┘╪ز╪ص┘é┘é ┘à┘ ╪│┘╪د┘à╪ر 
╪د┘╪ث╪▒╪┤┘è┘ (1 ms)
      ├ù ┘è╪ش╪ذ ╪ز╪│╪ش┘è┘ ╪د┘┘ê╪╡┘ê┘ ╪╣┘╪» 
╪د┘╪د╪│╪ز╪▒╪ش╪د╪╣ (1 ms)
      ├ù ┘è╪ش╪ذ ╪▒┘╪╣ ╪╣╪»╪» ╪د┘┘ê╪╡┘ê┘╪د╪ز (1 ms)
    ≡اùôي╕ ╪ح╪»╪د╪▒╪ر ╪د┘╪د╪ص╪ز┘╪د╪╕
      ├ù ┘è╪ش╪ذ ╪ص╪│╪د╪ذ ╪ز╪د╪▒┘è╪« ╪د┘╪ز┘ç╪د╪ة 
╪د┘╪╡┘╪د╪ص┘è╪ر ╪د┘╪╡╪ص┘è╪ص (2 ms)
      ظêأ ┘è╪ش╪ذ ╪ز╪ص╪»┘è╪» ╪د┘╪│┘è╪د╪│╪د╪ز 
╪د┘┘à╪«╪ز┘┘╪ر (2 ms)
      ├ù ┘è╪ش╪ذ ╪ز┘╪╕┘è┘ ╪د┘╪ث╪▒╪┤┘è┘╪د╪ز 
╪د┘┘à┘╪ز┘ç┘è╪ر ╪د┘╪╡┘╪د╪ص┘è╪ر (1 ms)
    ≡اْ╛ ╪د┘┘╪│╪« ╪د┘╪د╪ص╪ز┘è╪د╪╖┘è╪ر
      ظêأ ┘è╪ش╪ذ ╪ح┘╪┤╪د╪ة ┘╪│╪«╪ر ╪د╪ص╪ز┘è╪د╪╖┘è╪ر 
(1 ms)
      ظêأ ┘è╪ش╪ذ ╪ز╪╢┘à┘è┘ ╪د┘╪ذ┘è╪د┘╪د╪ز 
╪د┘┘ê╪╡┘┘è╪ر ┘┘è ╪د┘┘╪│╪«╪ر ╪د┘╪د╪ص╪ز┘è╪د╪╖┘è╪ر 
(6 ms)
    ≡اôè ╪د┘╪ح╪ص╪╡╪د╪خ┘è╪د╪ز
      ├ù ┘è╪ش╪ذ ╪ص╪│╪د╪ذ ╪د┘╪ح╪ص╪╡╪د╪خ┘è╪د╪ز ╪ذ╪┤┘â┘ 
╪╡╪ص┘è╪ص (2 ms)
      ├ù ┘è╪ش╪ذ ╪ز╪ش┘à┘è╪╣ ╪د┘╪ح╪ص╪╡╪د╪خ┘è╪د╪ز ╪ص╪│╪ذ 
╪د┘┘╪خ╪ر (15 ms)
      ظêأ ┘è╪ش╪ذ ╪ز╪ش┘à┘è╪╣ ╪د┘╪ح╪ص╪╡╪د╪خ┘è╪د╪ز ╪ص╪│╪ذ 
╪د┘╪ث┘ê┘┘ê┘è╪ر (12 ms)
    ≡اôإ ╪│╪ش┘ ╪د┘┘╪┤╪د╪╖╪د╪ز
      ظêأ ┘è╪ش╪ذ ╪ز╪│╪ش┘è┘ ╪ش┘à┘è╪╣ ╪د┘┘╪┤╪د╪╖╪د╪ز
      ظêأ ┘è╪ش╪ذ ╪╣╪»┘à ╪ز╪ش╪د┘ê╪▓ ╪ص╪» ╪ث┘é╪╡┘ë 
┘┘╪│╪ش┘ (140 ms)
      ├ù ┘è╪ش╪ذ ╪ز╪│╪ش┘è┘ ╪ث┘┘ê╪د╪╣ ┘à╪«╪ز┘┘╪ر ┘à┘ 
╪د┘┘╪┤╪د╪╖╪د╪ز (4 ms)
    ≡ا¤ ╪د┘┘┘ç╪▒╪│╪ر ┘ê╪د┘╪ذ╪ص╪س
      ├ù ┘è╪ش╪ذ ┘┘ç╪▒╪│╪ر ╪د┘┘à╪│╪ز┘╪»╪د╪ز ╪ذ╪┤┘â┘ 
╪╡╪ص┘è╪ص (1 ms)
      ├ù ┘è╪ش╪ذ ╪د┘╪ص╪╡┘ê┘ ╪╣┘┘ë ┘à╪╣┘┘ê┘à╪د╪ز 
╪د┘╪ث╪▒╪┤┘è┘

  ظù ≡اùéي╕ ┘╪╕╪د┘à ╪د┘╪ث╪▒╪┤┘╪ر 
╪د┘╪ح┘┘â╪ز╪▒┘ê┘┘è╪ر ╪د┘╪░┘â┘è ظ║ ≡اôè 
╪د┘╪ز╪╡┘┘è┘ ╪د┘╪░┘â┘è ظ║ ┘è╪ش╪ذ ╪ز╪╡┘┘è┘ 
╪د┘┘╪د╪ز┘ê╪▒╪ر ╪ذ╪┤┘â┘ ╪╡╪ص┘è╪ص

    expect(received).toBe(expected) // Object.is 
equality

    Expected: "FINANCIAL"
    Received: "UNCATEGORIZED"

    [0m [90m 26 |[39m       [36mconst[39m 
classification [33m=[39m 
archivingSystem[33m.[39msmartClassify(doc)[33m;[39m
     [90m 27 |[39m
    [31m[1m>[22m[39m[90m 28 |[39m       expect(cla
ssification[33m.[39mcategory)[33m.[39mtoBe([32m'FIN
ANCIAL'[39m)[33m;[39m
     [90m    |[39m                                    
   [31m[1m^[22m[39m
     [90m 29 |[39m       expect(classification[33m.[
39mconfidence)[33m.[39mtoBeGreaterThan([35m0[39m)[3
3m;[39m
     [90m 30 |[39m       expect(classification[33m.[
39micon)[33m.[39mtoBe([32m'≡اْ░'[39m)[33m;[39m
     [90m 31 |[39m     })[33m;[39m[0m

      at Object.toBe 
(__tests__/advancedArchiving.test.js:28:39)

  ظù ≡اùéي╕ ┘╪╕╪د┘à ╪د┘╪ث╪▒╪┤┘╪ر 
╪د┘╪ح┘┘â╪ز╪▒┘ê┘┘è╪ر ╪د┘╪░┘â┘è ظ║ ≡اôè 
╪د┘╪ز╪╡┘┘è┘ ╪د┘╪░┘â┘è ظ║ ┘è╪ش╪ذ ╪ز╪╡┘┘è┘ 
┘ê╪س┘è┘é╪ر ╪د┘╪╣╪د┘à┘┘è┘ ╪ذ╪┤┘â┘ ╪╡╪ص┘è╪ص

    expect(received).toBe(expected) // Object.is 
equality

    Expected: "HR"
    Received: "UNCATEGORIZED"

    [0m [90m 40 |[39m       [36mconst[39m 
classification [33m=[39m 
archivingSystem[33m.[39msmartClassify(doc)[33m;[39m
     [90m 41 |[39m
    [31m[1m>[22m[39m[90m 42 |[39m       expect(cla
ssification[33m.[39mcategory)[33m.[39mtoBe([32m'HR'
[39m)[33m;[39m
     [90m    |[39m                                    
   [31m[1m^[22m[39m
     [90m 43 |[39m       expect(classification[33m.[
39micon)[33m.[39mtoBe([32m'≡اّح'[39m)[33m;[39m
     [90m 44 |[39m     })[33m;[39m
     [90m 45 |[39m[0m

      at Object.toBe 
(__tests__/advancedArchiving.test.js:42:39)

  ظù ≡اùéي╕ ┘╪╕╪د┘à ╪د┘╪ث╪▒╪┤┘╪ر 
╪د┘╪ح┘┘â╪ز╪▒┘ê┘┘è╪ر ╪د┘╪░┘â┘è ظ║ ≡اôè 
╪د┘╪ز╪╡┘┘è┘ ╪د┘╪░┘â┘è ظ║ ┘è╪ش╪ذ ╪ز╪╡┘┘è┘ 
╪د┘╪╣┘é╪» ╪ذ╪┤┘â┘ ╪╡╪ص┘è╪ص

    expect(received).toBe(expected) // Object.is 
equality

    Expected: "CONTRACTS"
    Received: "UNCATEGORIZED"

    [0m [90m 53 |[39m       [36mconst[39m 
classification [33m=[39m 
archivingSystem[33m.[39msmartClassify(doc)[33m;[39m
     [90m 54 |[39m
    [31m[1m>[22m[39m[90m 55 |[39m       expect(cla
ssification[33m.[39mcategory)[33m.[39mtoBe([32m'CON
TRACTS'[39m)[33m;[39m
     [90m    |[39m                                    
   [31m[1m^[22m[39m
     [90m 56 |[39m       expect(classification[33m.[
39micon)[33m.[39mtoBe([32m'≡اôï'[39m)[33m;[39m
     [90m 57 |[39m     })[33m;[39m
     [90m 58 |[39m[0m

      at Object.toBe 
(__tests__/advancedArchiving.test.js:55:39)

  ظù ≡اùéي╕ ┘╪╕╪د┘à ╪د┘╪ث╪▒╪┤┘╪ر 
╪د┘╪ح┘┘â╪ز╪▒┘ê┘┘è╪ر ╪د┘╪░┘â┘è ظ║ ≡اôخ ╪ث╪▒╪┤┘╪ر 
╪د┘┘à╪│╪ز┘╪»╪د╪ز ظ║ ┘è╪ش╪ذ ╪ث╪▒╪┤┘╪ر ╪د┘┘à╪│╪ز┘╪» 
╪ذ┘╪ش╪د╪ص

    expect(received).toBe(expected) // Object.is 
equality

    Expected: true
    Received: false

    [0m [90m 87 |[39m       [36mconst[39m result 
[33m=[39m [36mawait[39m archivingSystem[33m.[39mar
chiveDocument(doc)[33m;[39m
     [90m 88 |[39m
    [31m[1m>[22m[39m[90m 89 |[39m       expect(res
ult[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[3
3m;[39m
     [90m    |[39m                              
[31m[1m^[22m[39m
     [90m 90 |[39m       expect(result[33m.[39marchi
veId)[33m.[39mtoBeDefined()[33m;[39m
     [90m 91 |[39m       expect(result[33m.[39mcompr
ession)[33m.[39mtoBeDefined()[33m;[39m
     [90m 92 |[39m       expect(result[33m.[39mproce
ssingTime)[33m.[39mtoBeGreaterThanOrEqual([35m0[39m)
[33m;[39m[0m

      at Object.toBe 
(__tests__/advancedArchiving.test.js:89:30)

  ظù ≡اùéي╕ ┘╪╕╪د┘à ╪د┘╪ث╪▒╪┤┘╪ر 
╪د┘╪ح┘┘â╪ز╪▒┘ê┘┘è╪ر ╪د┘╪░┘â┘è ظ║ ≡اôخ ╪ث╪▒╪┤┘╪ر 
╪د┘┘à╪│╪ز┘╪»╪د╪ز ظ║ ┘è╪ش╪ذ ╪ص┘╪╕ ╪د┘┘à╪│╪ز┘╪» 
┘┘è ╪د┘╪ث╪▒╪┤┘è┘

    expect(received).toBeDefined()

    Received: undefined

    [0m [90m 103 |[39m       [36mconst[39m archive 
[33m=[39m archivingSystem[33m.[39marchives[33m.[39
m[36mget[39m(result[33m.[39marchiveId)[33m;[39m
     [90m 104 |[39m
    [31m[1m>[22m[39m[90m 105 |[39m       
expect(archive)[33m.[39mtoBeDefined()[33m;[39m
     [90m     |[39m                       
[31m[1m^[22m[39m
     [90m 106 |[39m       expect(archive[33m.[39mnam
e)[33m.[39mtoBe([32m'╪د╪«╪ز╪ذ╪د╪▒.txt'[39m)[33m;[3
9m
     [90m 107 |[39m       expect(archive[33m.[39mmet
adata[33m.[39mcreatedAt)[33m.[39mtoBeDefined()[33m;
[39m
     [90m 108 |[39m     })[33m;[39m[0m

      at Object.toBeDefined 
(__tests__/advancedArchiving.test.js:105:23)

  ظù ≡اùéي╕ ┘╪╕╪د┘à ╪د┘╪ث╪▒╪┤┘╪ر 
╪د┘╪ح┘┘â╪ز╪▒┘ê┘┘è╪ر ╪د┘╪░┘â┘è ظ║ ≡اôخ ╪ث╪▒╪┤┘╪ر 
╪د┘┘à╪│╪ز┘╪»╪د╪ز ظ║ ┘è╪ش╪ذ ╪ز╪│╪ش┘è┘ ╪د┘┘╪┤╪د╪╖ 
╪╣┘╪» ╪د┘╪ث╪▒╪┤┘╪ر

    expect(received).toBe(expected) // Object.is 
equality

    Expected: "ARCHIVE_CREATED"
    Received: "ARCHIVE_ERROR"

    [0m [90m 121 |[39m       expect(archivingSystem[
33m.[39mactivityLog[33m.[39mlength)[33m.[39mtoBeGre
aterThan(initialLogLength)[33m;[39m
     [90m 122 |[39m       [36mconst[39m 
lastActivity [33m=[39m archivingSystem[33m.[39mactiv
ityLog[archivingSystem[33m.[39mactivityLog[33m.[39ml
ength [33m-[39m [35m1[39m][33m;[39m
    [31m[1m>[22m[39m[90m 123 |[39m       expect(la
stActivity[33m.[39mtype)[33m.[39mtoBe([32m'ARCHIVE_
CREATED'[39m)[33m;[39m
     [90m     |[39m                                 
[31m[1m^[22m[39m
     [90m 124 |[39m     })[33m;[39m
     [90m 125 |[39m
     [90m 126 |[39m     test([32m'┘è╪ش╪ذ ╪ص╪│╪د╪ذ 
╪ز╪د╪▒┘è╪« ╪د┘╪ز┘ç╪د╪ة ╪د┘╪╡┘╪د╪ص┘è╪ر ╪ذ┘╪د╪ة┘ï 
╪╣┘┘ë ╪د┘┘╪خ╪ر'[39m[33m,[39m [36masync[39m () 
[33m=>[39m {[0m

      at Object.toBe 
(__tests__/advancedArchiving.test.js:123:33)

  ظù ≡اùéي╕ ┘╪╕╪د┘à ╪د┘╪ث╪▒╪┤┘╪ر 
╪د┘╪ح┘┘â╪ز╪▒┘ê┘┘è╪ر ╪د┘╪░┘â┘è ظ║ ≡اôخ ╪ث╪▒╪┤┘╪ر 
╪د┘┘à╪│╪ز┘╪»╪د╪ز ظ║ ┘è╪ش╪ذ ╪ص╪│╪د╪ذ ╪ز╪د╪▒┘è╪« 
╪د┘╪ز┘ç╪د╪ة ╪د┘╪╡┘╪د╪ص┘è╪ر ╪ذ┘╪د╪ة┘ï ╪╣┘┘ë 
╪د┘┘╪خ╪ر

    TypeError: Cannot read properties of undefined 
(reading 'expirationDate')

    [0m [90m 134 |[39m       [36mconst[39m archive 
[33m=[39m archivingSystem[33m.[39marchives[33m.[39
m[36mget[39m(result[33m.[39marchiveId)[33m;[39m
     [90m 135 |[39m
    [31m[1m>[22m[39m[90m 136 |[39m       expect(ar
chive[33m.[39mexpirationDate)[33m.[39mtoBeDefined()
[33m;[39m
     [90m     |[39m                      
[31m[1m^[22m[39m
     [90m 137 |[39m       [36mconst[39m 
retentionDays [33m=[39m [33mMath[39m[33m.[39mround
((archive[33m.[39mexpirationDate [33m-[39m 
archive[33m.[39mmetadata[33m.[39mcreatedAt) 
[33m/[39m ([35m1000[39m [33m*[39m [35m60[39m 
[33m*[39m [35m60[39m [33m*[39m 
[35m24[39m))[33m;[39m
     [90m 138 |[39m       expect(retentionDays)[33m.
[39mtoBeGreaterThan([35m365[39m [33m*[39m 
[35m6[39m)[33m;[39m [90m// ╪ث┘â╪س╪▒ ┘à┘ 6 
╪│┘┘ê╪د╪ز[39m
     [90m 139 |[39m     })[33m;[39m[0m

      at Object.expirationDate 
(__tests__/advancedArchiving.test.js:136:22)

  ظù ≡اùéي╕ ┘╪╕╪د┘à ╪د┘╪ث╪▒╪┤┘╪ر 
╪د┘╪ح┘┘â╪ز╪▒┘ê┘┘è╪ر ╪د┘╪░┘â┘è ظ║ ≡اù£ي╕ 
╪د┘╪╢╪║╪╖ ╪د┘╪░┘â┘è ظ║ ┘è╪ش╪ذ ╪╢╪║╪╖ ┘à┘┘ ┘╪╡┘è

    TypeError: The first argument must be of type 
string or an instance of Buffer, ArrayBuffer, or Array 
or an Array-like Object. Received undefined

    [0m [90m 381 |[39m
     [90m 382 |[39m     [36mreturn[39m 
[36mnew[39m [33mPromise[39m((resolve[33m,[39m 
reject) [33m=>[39m {
    [31m[1m>[22m[39m[90m 383 |[39m       
[36mconst[39m compressed [33m=[39m zlib[33m.[39mgz
ipSync([33mBuffer[39m[33m.[39m[36mfrom[39m(data))
[33m;[39m
     [90m     |[39m                                   
            [31m[1m^[22m[39m
     [90m 384 |[39m
     [90m 385 |[39m       resolve({
     [90m 386 |[39m         data[33m:[39m 
compressed[33m,[39m[0m

      at from 
(services/advancedArchivingSystem.js:383:47)
      at AdvancedArchivingSystem.intelligentCompress 
(services/advancedArchivingSystem.js:382:12)
      at Object.intelligentCompress 
(__tests__/advancedArchiving.test.js:153:48)

  ظù ≡اùéي╕ ┘╪╕╪د┘à ╪د┘╪ث╪▒╪┤┘╪ر 
╪د┘╪ح┘┘â╪ز╪▒┘ê┘┘è╪ر ╪د┘╪░┘â┘è ظ║ ≡اù£ي╕ 
╪د┘╪╢╪║╪╖ ╪د┘╪░┘â┘è ظ║ ┘è╪ش╪ذ ╪╣╪»┘à ╪╢╪║╪╖ ┘à┘┘ 
╪╡┘ê╪▒╪ر

    TypeError: The first argument must be of type 
string or an instance of Buffer, ArrayBuffer, or Array 
or an Array-like Object. Received undefined

    [0m [90m 381 |[39m
     [90m 382 |[39m     [36mreturn[39m 
[36mnew[39m [33mPromise[39m((resolve[33m,[39m 
reject) [33m=>[39m {
    [31m[1m>[22m[39m[90m 383 |[39m       
[36mconst[39m compressed [33m=[39m zlib[33m.[39mgz
ipSync([33mBuffer[39m[33m.[39m[36mfrom[39m(data))
[33m;[39m
     [90m     |[39m                                   
            [31m[1m^[22m[39m
     [90m 384 |[39m
     [90m 385 |[39m       resolve({
     [90m 386 |[39m         data[33m:[39m 
compressed[33m,[39m[0m

      at from 
(services/advancedArchivingSystem.js:383:47)
      at AdvancedArchivingSystem.intelligentCompress 
(services/advancedArchivingSystem.js:382:12)
      at Object.intelligentCompress 
(__tests__/advancedArchiving.test.js:168:48)

  ظù ≡اùéي╕ ┘╪╕╪د┘à ╪د┘╪ث╪▒╪┤┘╪ر 
╪د┘╪ح┘┘â╪ز╪▒┘ê┘┘è╪ر ╪د┘╪░┘â┘è ظ║ ≡اù£ي╕ 
╪د┘╪╢╪║╪╖ ╪د┘╪░┘â┘è ظ║ ┘è╪ش╪ذ ╪╣╪»┘à ╪╢╪║╪╖ ┘à┘┘ 
┘┘è╪»┘è┘ê

    TypeError: The first argument must be of type 
string or an instance of Buffer, ArrayBuffer, or Array 
or an Array-like Object. Received undefined

    [0m [90m 381 |[39m
     [90m 382 |[39m     [36mreturn[39m 
[36mnew[39m [33mPromise[39m((resolve[33m,[39m 
reject) [33m=>[39m {
    [31m[1m>[22m[39m[90m 383 |[39m       
[36mconst[39m compressed [33m=[39m zlib[33m.[39mgz
ipSync([33mBuffer[39m[33m.[39m[36mfrom[39m(data))
[33m;[39m
     [90m     |[39m                                   
            [31m[1m^[22m[39m
     [90m 384 |[39m
     [90m 385 |[39m       resolve({
     [90m 386 |[39m         data[33m:[39m 
compressed[33m,[39m[0m

      at from 
(services/advancedArchivingSystem.js:383:47)
      at AdvancedArchivingSystem.intelligentCompress 
(services/advancedArchivingSystem.js:382:12)
      at Object.intelligentCompress 
(__tests__/advancedArchiving.test.js:180:48)

  ظù ≡اùéي╕ ┘╪╕╪د┘à ╪د┘╪ث╪▒╪┤┘╪ر 
╪د┘╪ح┘┘â╪ز╪▒┘ê┘┘è╪ر ╪د┘╪░┘â┘è ظ║ ≡اù£ي╕ 
╪د┘╪╢╪║╪╖ ╪د┘╪░┘â┘è ظ║ ┘è╪ش╪ذ ╪ز╪ص╪»┘è╪» ┘à╪│╪ز┘ê┘ë 
╪د┘╪╢╪║╪╖ ╪ذ┘╪د╪ة┘ï ╪╣┘┘ë ╪ص╪ش┘à ╪د┘┘à┘┘

    TypeError: The first argument must be of type 
string or an instance of Buffer, ArrayBuffer, or Array 
or an Array-like Object. Received undefined

    [0m [90m 381 |[39m
     [90m 382 |[39m     [36mreturn[39m 
[36mnew[39m [33mPromise[39m((resolve[33m,[39m 
reject) [33m=>[39m {
    [31m[1m>[22m[39m[90m 383 |[39m       
[36mconst[39m compressed [33m=[39m zlib[33m.[39mgz
ipSync([33mBuffer[39m[33m.[39m[36mfrom[39m(data))
[33m;[39m
     [90m     |[39m                                   
            [31m[1m^[22m[39m
     [90m 384 |[39m
     [90m 385 |[39m       resolve({
     [90m 386 |[39m         data[33m:[39m 
compressed[33m,[39m[0m

      at from 
(services/advancedArchivingSystem.js:383:47)
      at AdvancedArchivingSystem.intelligentCompress 
(services/advancedArchivingSystem.js:382:12)
      at Object.intelligentCompress 
(__tests__/advancedArchiving.test.js:192:48)

  ظù ≡اùéي╕ ┘╪╕╪د┘à ╪د┘╪ث╪▒╪┤┘╪ر 
╪د┘╪ح┘┘â╪ز╪▒┘ê┘┘è╪ر ╪د┘╪░┘â┘è ظ║ ≡ا¤ ╪د┘╪ذ╪ص╪س 
╪د┘┘à╪ز┘é╪»┘à ظ║ ┘è╪ش╪ذ ╪د┘╪╣╪س┘ê╪▒ ╪╣┘┘ë 
╪د┘┘à╪│╪ز┘╪»╪د╪ز ╪د┘┘à╪╖╪د╪ذ┘é╪ر ┘┘╪د╪│╪ز╪╣┘╪د┘à

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

    [0m [90m 231 |[39m       [36mconst[39m results 
[33m=[39m archivingSystem[33m.[39msmartSearch([32m'
┘╪د╪ز┘ê╪▒╪ر'[39m)[33m;[39m
     [90m 232 |[39m
    [31m[1m>[22m[39m[90m 233 |[39m       expect(re
sults[33m.[39mlength)[33m.[39mtoBeGreaterThan([35m0
[39m)[33m;[39m
     [90m     |[39m                              
[31m[1m^[22m[39m
     [90m 234 |[39m       expect(results[[35m0[39m]
[33m.[39marchive[33m.[39mname)[33m.[39mtoContain([
32m'┘╪د╪ز┘ê╪▒╪ر'[39m)[33m;[39m
     [90m 235 |[39m     })[33m;[39m
     [90m 236 |[39m[0m

      at Object.toBeGreaterThan 
(__tests__/advancedArchiving.test.js:233:30)

  ظù ≡اùéي╕ ┘╪╕╪د┘à ╪د┘╪ث╪▒╪┤┘╪ر 
╪د┘╪ح┘┘â╪ز╪▒┘ê┘┘è╪ر ╪د┘╪░┘â┘è ظ║ ≡ا¤ ╪د┘╪ذ╪ص╪س 
╪د┘┘à╪ز┘é╪»┘à ظ║ ┘è╪ش╪ذ ┘┘╪ز╪▒╪ر ╪د┘┘╪ز╪د╪خ╪ش 
╪ص╪│╪ذ ╪د┘┘╪خ╪ر

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

    [0m [90m 246 |[39m       [36mconst[39m results 
[33m=[39m archivingSystem[33m.[39msmartSearch([32m'
┘╪د╪ز┘ê╪▒╪ر'[39m[33m,[39m { category[33m:[39m 
[32m'FINANCIAL'[39m })[33m;[39m
     [90m 247 |[39m
    [31m[1m>[22m[39m[90m 248 |[39m       expect(re
sults[33m.[39mlength)[33m.[39mtoBeGreaterThan([35m0
[39m)[33m;[39m
     [90m     |[39m                              
[31m[1m^[22m[39m
     [90m 249 |[39m       [36mfor[39m 
([36mconst[39m result [36mof[39m results) {
     [90m 250 |[39m         expect(result[33m.[39mar
chive[33m.[39mclassification[33m.[39mcategory)[33m.
[39mtoBe([32m'FINANCIAL'[39m)[33m;[39m
     [90m 251 |[39m       }[0m

      at Object.toBeGreaterThan 
(__tests__/advancedArchiving.test.js:248:30)

  ظù ≡اùéي╕ ┘╪╕╪د┘à ╪د┘╪ث╪▒╪┤┘╪ر 
╪د┘╪ح┘┘â╪ز╪▒┘ê┘┘è╪ر ╪د┘╪░┘â┘è ظ║ ≡اôح 
╪د┘╪د╪│╪ز╪▒╪ش╪د╪╣ ┘ê╪د┘╪ز╪ص┘é┘é ظ║ ┘è╪ش╪ذ 
╪د╪│╪ز╪▒╪ش╪د╪╣ ╪د┘╪ث╪▒╪┤┘è┘ ╪ذ┘╪ش╪د╪ص

    expect(received).toBe(expected) // Object.is 
equality

    Expected: true
    Received: false

    [0m [90m 279 |[39m       [36mconst[39m result 
[33m=[39m [36mawait[39m archivingSystem[33m.[39mre
trieveArchive(archiveId)[33m;[39m
     [90m 280 |[39m
    [31m[1m>[22m[39m[90m 281 |[39m       expect(re
sult[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[
33m;[39m
     [90m     |[39m                              
[31m[1m^[22m[39m
     [90m 282 |[39m       expect(result[33m.[39mdata
)[33m.[39mtoBeDefined()[33m;[39m
     [90m 283 |[39m       expect(result[33m.[39mmeta
data)[33m.[39mtoBeDefined()[33m;[39m
     [90m 284 |[39m     })[33m;[39m[0m

      at Object.toBe 
(__tests__/advancedArchiving.test.js:281:30)

  ظù ≡اùéي╕ ┘╪╕╪د┘à ╪د┘╪ث╪▒╪┤┘╪ر 
╪د┘╪ح┘┘â╪ز╪▒┘ê┘┘è╪ر ╪د┘╪░┘â┘è ظ║ ≡اôح 
╪د┘╪د╪│╪ز╪▒╪ش╪د╪╣ ┘ê╪د┘╪ز╪ص┘é┘é ظ║ ┘è╪ش╪ذ 
╪د┘╪ز╪ص┘é┘é ┘à┘ ╪│┘╪د┘à╪ر ╪د┘╪ث╪▒╪┤┘è┘

    expect(received).toBe(expected) // Object.is 
equality

    Expected: true
    Received: false

    [0m [90m 287 |[39m       [36mconst[39m result 
[33m=[39m [36mawait[39m archivingSystem[33m.[39mre
trieveArchive(archiveId)[33m;[39m
     [90m 288 |[39m
    [31m[1m>[22m[39m[90m 289 |[39m       expect(re
sult[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[
33m;[39m
     [90m     |[39m                              
[31m[1m^[22m[39m
     [90m 290 |[39m       expect(result[33m.[39minte
grityVerified)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 291 |[39m     })[33m;[39m
     [90m 292 |[39m[0m

      at Object.toBe 
(__tests__/advancedArchiving.test.js:289:30)

  ظù ≡اùéي╕ ┘╪╕╪د┘à ╪د┘╪ث╪▒╪┤┘╪ر 
╪د┘╪ح┘┘â╪ز╪▒┘ê┘┘è╪ر ╪د┘╪░┘â┘è ظ║ ≡اôح 
╪د┘╪د╪│╪ز╪▒╪ش╪د╪╣ ┘ê╪د┘╪ز╪ص┘é┘é ظ║ ┘è╪ش╪ذ ╪ز╪│╪ش┘è┘ 
╪د┘┘ê╪╡┘ê┘ ╪╣┘╪» ╪د┘╪د╪│╪ز╪▒╪ش╪د╪╣

    expect(received).toBeGreaterThan(expected)

    Expected: > 1
    Received:   1

    [0m [90m 296 |[39m       [36mawait[39m archivin
gSystem[33m.[39mretrieveArchive(archiveId[33m,[39m 
{ userId[33m:[39m [32m'test_user'[39m })[33m;[39m
     [90m 297 |[39m
    [31m[1m>[22m[39m[90m 298 |[39m       expect(ar
chivingSystem[33m.[39mactivityLog[33m.[39mlength)[3
3m.[39mtoBeGreaterThan(initialLogLength)[33m;[39m
     [90m     |[39m                                   
               [31m[1m^[22m[39m
     [90m 299 |[39m     })[33m;[39m
     [90m 300 |[39m
     [90m 301 |[39m     test([32m'┘è╪ش╪ذ ╪▒┘╪╣ 
╪╣╪»╪» ╪د┘┘ê╪╡┘ê┘╪د╪ز'[39m[33m,[39m 
[36masync[39m () [33m=>[39m {[0m

      at Object.toBeGreaterThan 
(__tests__/advancedArchiving.test.js:298:50)

  ظù ≡اùéي╕ ┘╪╕╪د┘à ╪د┘╪ث╪▒╪┤┘╪ر 
╪د┘╪ح┘┘â╪ز╪▒┘ê┘┘è╪ر ╪د┘╪░┘â┘è ظ║ ≡اôح 
╪د┘╪د╪│╪ز╪▒╪ش╪د╪╣ ┘ê╪د┘╪ز╪ص┘é┘é ظ║ ┘è╪ش╪ذ ╪▒┘╪╣ 
╪╣╪»╪» ╪د┘┘ê╪╡┘ê┘╪د╪ز

    TypeError: Cannot read properties of undefined 
(reading 'accessLog')

    [0m [90m 301 |[39m     test([32m'┘è╪ش╪ذ ╪▒┘╪╣ 
╪╣╪»╪» ╪د┘┘ê╪╡┘ê┘╪د╪ز'[39m[33m,[39m 
[36masync[39m () [33m=>[39m {
     [90m 302 |[39m       [36mconst[39m archive 
[33m=[39m archivingSystem[33m.[39marchives[33m.[39
m[36mget[39m(archiveId)[33m;[39m
    [31m[1m>[22m[39m[90m 303 |[39m       
[36mconst[39m initialAccesses [33m=[39m 
archive[33m.[39maccessLog[33m.[39mlength[33m;[39m
     [90m     |[39m                                   
    [31m[1m^[22m[39m
     [90m 304 |[39m
     [90m 305 |[39m       [36mawait[39m archivingSys
tem[33m.[39mretrieveArchive(archiveId)[33m;[39m
     [90m 306 |[39m[0m

      at Object.accessLog 
(__tests__/advancedArchiving.test.js:303:39)

  ظù ≡اùéي╕ ┘╪╕╪د┘à ╪د┘╪ث╪▒╪┤┘╪ر 
╪د┘╪ح┘┘â╪ز╪▒┘ê┘┘è╪ر ╪د┘╪░┘â┘è ظ║ ≡اùôي╕ 
╪ح╪»╪د╪▒╪ر ╪د┘╪د╪ص╪ز┘╪د╪╕ ظ║ ┘è╪ش╪ذ ╪ص╪│╪د╪ذ 
╪ز╪د╪▒┘è╪« ╪د┘╪ز┘ç╪د╪ة ╪د┘╪╡┘╪د╪ص┘è╪ر ╪د┘╪╡╪ص┘è╪ص

    expect(received).toBeGreaterThan(expected)

    Matcher error: received value must be a number or 
bigint

    Received has type:  date
    Received has value: Date { NaN }

    [0m [90m 324 |[39m       })[33m;[39m
     [90m 325 |[39m
    [31m[1m>[22m[39m[90m 326 |[39m       expect(ex
pirationDate)[33m.[39mtoBeGreaterThan([36mnew[39m 
[33mDate[39m())[33m;[39m
     [90m     |[39m                              
[31m[1m^[22m[39m
     [90m 327 |[39m     })[33m;[39m
     [90m 328 |[39m
     [90m 329 |[39m     test([32m'┘è╪ش╪ذ ╪ز╪ص╪»┘è╪» 
╪د┘╪│┘è╪د╪│╪د╪ز ╪د┘┘à╪«╪ز┘┘╪ر'[39m[33m,[39m () 
[33m=>[39m {[0m

      at Object.toBeGreaterThan 
(__tests__/advancedArchiving.test.js:326:30)

  ظù ≡اùéي╕ ┘╪╕╪د┘à ╪د┘╪ث╪▒╪┤┘╪ر 
╪د┘╪ح┘┘â╪ز╪▒┘ê┘┘è╪ر ╪د┘╪░┘â┘è ظ║ ≡اùôي╕ 
╪ح╪»╪د╪▒╪ر ╪د┘╪د╪ص╪ز┘╪د╪╕ ظ║ ┘è╪ش╪ذ ╪ز┘╪╕┘è┘ 
╪د┘╪ث╪▒╪┤┘è┘╪د╪ز ╪د┘┘à┘╪ز┘ç┘è╪ر ╪د┘╪╡┘╪د╪ص┘è╪ر

    TypeError: Cannot set properties of undefined 
(setting 'expirationDate')

    [0m [90m 347 |[39m
     [90m 348 |[39m       [90m// ╪ز╪╣╪»┘è┘ 
╪ز╪د╪▒┘è╪« ╪د┘╪د┘╪ز┘ç╪د╪ة ┘┘è┘â┘ê┘ ┘┘è 
╪د┘┘à╪د╪╢┘è[39m
    [31m[1m>[22m[39m[90m 349 |[39m       
archive[33m.[39mexpirationDate [33m=[39m 
[36mnew[39m 
[33mDate[39m([33mDate[39m[33m.[39mnow() 
[33m-[39m [35m1000[39m)[33m;[39m
     [90m     |[39m                             
[31m[1m^[22m[39m
     [90m 350 |[39m
     [90m 351 |[39m       [36mconst[39m 
cleanupResult [33m=[39m archivingSystem[33m.[39mclea
nupExpiredArchives()[33m;[39m
     [90m 352 |[39m[0m

      at Object.<anonymous> 
(__tests__/advancedArchiving.test.js:349:29)

  ظù ≡اùéي╕ ┘╪╕╪د┘à ╪د┘╪ث╪▒╪┤┘╪ر 
╪د┘╪ح┘┘â╪ز╪▒┘ê┘┘è╪ر ╪د┘╪░┘â┘è ظ║ ≡اôè 
╪د┘╪ح╪ص╪╡╪د╪خ┘è╪د╪ز ظ║ ┘è╪ش╪ذ ╪ص╪│╪د╪ذ 
╪د┘╪ح╪ص╪╡╪د╪خ┘è╪د╪ز ╪ذ╪┤┘â┘ ╪╡╪ص┘è╪ص

    TypeError: Cannot read properties of undefined 
(reading 'totalArchives')

    [0m [90m 412 |[39m       [36mconst[39m stats 
[33m=[39m archivingSystem[33m.[39mgetAdvancedStatist
ics()[33m;[39m
     [90m 413 |[39m
    [31m[1m>[22m[39m[90m 414 |[39m       expect(st
ats[33m.[39mgeneralStats[33m.[39mtotalArchives)[33m
.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
     [90m     |[39m                                 
[31m[1m^[22m[39m
     [90m 415 |[39m       expect(stats[33m.[39mgener
alStats[33m.[39mtotalSize)[33m.[39mtoBeGreaterThan(
[35m0[39m)[33m;[39m
     [90m 416 |[39m       expect(stats[33m.[39mgener
alStats[33m.[39maverageCompressionRatio)[33m.[39mtoB
eGreaterThan([35m0[39m)[33m;[39m
     [90m 417 |[39m     })[33m;[39m[0m

      at Object.totalArchives 
(__tests__/advancedArchiving.test.js:414:33)

  ظù ≡اùéي╕ ┘╪╕╪د┘à ╪د┘╪ث╪▒╪┤┘╪ر 
╪د┘╪ح┘┘â╪ز╪▒┘ê┘┘è╪ر ╪د┘╪░┘â┘è ظ║ ≡اôè 
╪د┘╪ح╪ص╪╡╪د╪خ┘è╪د╪ز ظ║ ┘è╪ش╪ذ ╪ز╪ش┘à┘è╪╣ 
╪د┘╪ح╪ص╪╡╪د╪خ┘è╪د╪ز ╪ص╪│╪ذ ╪د┘┘╪خ╪ر

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

    [0m [90m 421 |[39m
     [90m 422 |[39m       expect(stats[33m.[39mbyCat
egory)[33m.[39mtoBeDefined()[33m;[39m
    [31m[1m>[22m[39m[90m 423 |[39m       expect([
33mObject[39m[33m.[39mkeys(stats[33m.[39mbyCategory
)[33m.[39mlength)[33m.[39mtoBeGreaterThan([35m0[39
m)[33m;[39m
     [90m     |[39m                                   
                 [31m[1m^[22m[39m
     [90m 424 |[39m     })[33m;[39m
     [90m 425 |[39m
     [90m 426 |[39m     test([32m'┘è╪ش╪ذ ╪ز╪ش┘à┘è╪╣ 
╪د┘╪ح╪ص╪╡╪د╪خ┘è╪د╪ز ╪ص╪│╪ذ 
╪د┘╪ث┘ê┘┘ê┘è╪ر'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.toBeGreaterThan 
(__tests__/advancedArchiving.test.js:423:52)

  ظù ≡اùéي╕ ┘╪╕╪د┘à ╪د┘╪ث╪▒╪┤┘╪ر 
╪د┘╪ح┘┘â╪ز╪▒┘ê┘┘è╪ر ╪د┘╪░┘â┘è ظ║ ≡اôإ ╪│╪ش┘ 
╪د┘┘╪┤╪د╪╖╪د╪ز ظ║ ┘è╪ش╪ذ ╪ز╪│╪ش┘è┘ ╪ث┘┘ê╪د╪╣ 
┘à╪«╪ز┘┘╪ر ┘à┘ ╪د┘┘╪┤╪د╪╖╪د╪ز

    expect(received).toContain(expected) // indexOf

    Expected value: "ARCHIVE_CREATED"
    Received array: ["ARCHIVE_ERROR"]

    [0m [90m 475 |[39m       [36mconst[39m types 
[33m=[39m 
archivingSystem[33m.[39mactivityLog[33m.[39mmap(log 
[33m=>[39m log[33m.[39mtype)[33m;[39m
     [90m 476 |[39m
    [31m[1m>[22m[39m[90m 477 |[39m       expect(ty
pes)[33m.[39mtoContain([32m'ARCHIVE_CREATED'[39m)[3
3m;[39m
     [90m     |[39m                     
[31m[1m^[22m[39m
     [90m 478 |[39m       expect(types)[33m.[39mtoCo
ntain([32m'ARCHIVE_ACCESSED'[39m)[33m;[39m
     [90m 479 |[39m     })[33m;[39m
     [90m 480 |[39m   })[33m;[39m[0m

      at Object.toContain 
(__tests__/advancedArchiving.test.js:477:21)

  ظù ≡اùéي╕ ┘╪╕╪د┘à ╪د┘╪ث╪▒╪┤┘╪ر 
╪د┘╪ح┘┘â╪ز╪▒┘ê┘┘è╪ر ╪د┘╪░┘â┘è ظ║ ≡ا¤ 
╪د┘┘┘ç╪▒╪│╪ر ┘ê╪د┘╪ذ╪ص╪س ظ║ ┘è╪ش╪ذ ┘┘ç╪▒╪│╪ر 
╪د┘┘à╪│╪ز┘╪»╪د╪ز ╪ذ╪┤┘â┘ ╪╡╪ص┘è╪ص

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

    [0m [90m 493 |[39m       [36mconst[39m result 
[33m=[39m [36mawait[39m archivingSystem[33m.[39mar
chiveDocument(doc)[33m;[39m
     [90m 494 |[39m
    [31m[1m>[22m[39m[90m 495 |[39m       expect(ar
chivingSystem[33m.[39mindexer[33m.[39msize)[33m.[3
9mtoBeGreaterThan([35m0[39m)[33m;[39m
     [90m     |[39m                                   
         [31m[1m^[22m[39m
     [90m 496 |[39m     })[33m;[39m
     [90m 497 |[39m
     [90m 498 |[39m     test([32m'┘è╪ش╪ذ 
╪د┘╪ص╪╡┘ê┘ ╪╣┘┘ë ┘à╪╣┘┘ê┘à╪د╪ز 
╪د┘╪ث╪▒╪┤┘è┘'[39m[33m,[39m [36masync[39m () 
[33m=>[39m {[0m

      at Object.toBeGreaterThan 
(__tests__/advancedArchiving.test.js:495:44)

  ظù ≡اùéي╕ ┘╪╕╪د┘à ╪د┘╪ث╪▒╪┤┘╪ر 
╪د┘╪ح┘┘â╪ز╪▒┘ê┘┘è╪ر ╪د┘╪░┘â┘è ظ║ ≡ا¤ 
╪د┘┘┘ç╪▒╪│╪ر ┘ê╪د┘╪ذ╪ص╪س ظ║ ┘è╪ش╪ذ ╪د┘╪ص╪╡┘ê┘ 
╪╣┘┘ë ┘à╪╣┘┘ê┘à╪د╪ز ╪د┘╪ث╪▒╪┤┘è┘

    TypeError: Cannot read properties of null (reading 
'name')

    [0m [90m 507 |[39m
     [90m 508 |[39m       
expect(info)[33m.[39mtoBeDefined()[33m;[39m
    [31m[1m>[22m[39m[90m 509 |[39m       expect(in
fo[33m.[39mname)[33m.[39mtoBe([32m'┘ê╪س┘è┘é╪ر_┘à╪╣┘
┘ê┘à╪د╪ز.txt'[39m)[33m;[39m
     [90m     |[39m                   
[31m[1m^[22m[39m
     [90m 510 |[39m     })[33m;[39m
     [90m 511 |[39m   })[33m;[39m
     [90m 512 |[39m })[33m;[39m[0m

      at Object.name 
(__tests__/advancedArchiving.test.js:509:19)

(node:7544) [MONGOOSE] Warning: Duplicate schema index 
on {"registrationNumber":1} found. This is often due to 
declaring an index using both "index: true" and 
"schema.index()". Please remove the duplicate index 
definition.
(Use `node --trace-warnings ...` to show where the 
warning was created)
(node:7544) [MONGOOSE] Warning: Duplicate schema index 
on {"plateNumber":1} found. This is often due to 
declaring an index using both "index: true" and 
"schema.index()". Please remove the duplicate index 
definition.
(node:7544) [MONGOOSE] Warning: Duplicate schema index 
on {"assignedDriver":1} found. This is often due to 
declaring an index using both "index: true" and 
"schema.index()". Please remove the duplicate index 
definition.
(node:7544) [MONGOOSE] Warning: Duplicate schema index 
on {"personalInfo.nationalId":1} found. This is often 
due to declaring an index using both "index: true" and 
"schema.index()". Please remove the duplicate index 
definition.
(node:7544) [MONGOOSE] Warning: Duplicate schema index 
on {"license.licenseNumber":1} found. This is often due 
to declaring an index using both "index: true" and 
"schema.index()". Please remove the duplicate index 
definition.
  console.log
    ≡اْش ╪ح╪╢╪د┘╪ر ╪▒╪│╪د┘╪ر ╪»╪د╪«┘ ╪د┘╪ز╪╖╪ذ┘è┘é

      at AdvancedMessagingAlertSystem.log [as sendToChannel] (services/advancedMessagingAlertSystem.js:179:17)

  console.log
    ≡اôد ╪ح╪▒╪│╪د┘ ╪ذ╪▒┘è╪» ╪ح┘┘ë user_123: ╪│┘è╪▒ ╪╣┘à┘ ╪ش╪»┘è╪»: ╪╖┘╪ذ ╪ح╪ش╪د╪▓╪ر

      at AdvancedMessagingAlertSystem.log [as sendToChannel] (services/advancedMessagingAlertSystem.js:167:17)

  console.log
    ≡اôد ╪ح╪▒╪│╪د┘ ╪ذ╪▒┘è╪» ╪ح┘┘ë manager@example.com: ≡ا¤┤ ┘┘ê╪▒┘è: Performance Drop Alert

      at AdvancedMessagingAlertSystem.log [as sendToChannel] (services/advancedMessagingAlertSystem.js:167:17)

  console.log
    ≡ا¤¤ ╪ح╪▒╪│╪د┘ ╪ح╪┤╪╣╪د╪▒ ┘┘ê╪▒┘è ╪ح┘┘ë manager@example.com

      at AdvancedMessagingAlertSystem.log [as sendToChannel] (services/advancedMessagingAlertSystem.js:175:17)

  console.log
    ≡اْش ╪ح╪╢╪د┘╪ر ╪▒╪│╪د┘╪ر ╪»╪د╪«┘ ╪د┘╪ز╪╖╪ذ┘è┘é

      at AdvancedMessagingAlertSystem.log [as sendToChannel] (services/advancedMessagingAlertSystem.js:179:17)

PASS backend/__tests__/middleware.test.js
  Authentication Middleware
    authenticateToken
      ظêأ should pass valid token (127 ms)
      ظêأ should reject missing token (2 ms)
      ظêأ should reject invalid token (119 ms)
      ظêأ should reject expired token (254 ms)
      ظêأ should handle malformed authorization header
      ظêأ should set user object on request (116 ms)
    requireAdmin
      ظêأ should allow admin users (1 ms)
      ظêأ should deny non-admin users
      ظêأ should deny users without role (2 ms)
      ظêأ should handle null user (1 ms)
    Token extraction
      ظêأ should extract token from Bearer scheme (115 
ms)
      ظêأ should ignore whitespace in authorization 
header (1 ms)
      ظêأ should handle multiple spaces in Bearer 
scheme (111 ms)
    Error handling
      ظêأ should handle JWT verification errors 
gracefully (134 ms)
      ظêأ should set correct status for different error 
types (240 ms)

  console.log
    ≡اْش ╪ح╪╢╪د┘╪ر ╪▒╪│╪د┘╪ر ╪»╪د╪«┘ ╪د┘╪ز╪╖╪ذ┘è┘é

      at AdvancedMessagingAlertSystem.log [as sendToChannel] (services/advancedMessagingAlertSystem.js:179:17)

  console.log
    ≡اôد ╪ح╪▒╪│╪د┘ ╪ذ╪▒┘è╪» ╪ح┘┘ë user_123: ┘à┘ê╪د┘┘é╪ر ┘à╪╖┘┘ê╪ذ╪ر: ╪╖┘╪ذ ╪ح╪ش╪د╪▓╪ر

      at AdvancedMessagingAlertSystem.log [as sendToChannel] (services/advancedMessagingAlertSystem.js:167:17)

  console.log
    ≡اôإ Auth routes using In-Memory User model

      at Object.log (api/routes/auth.routes.js:9:11)

  console.log
    ≡اôإ Auth routes using In-Memory User model

      at Object.log (api/routes/auth.routes.js:9:11)

  console.log
    ≡اôإ Auth routes using In-Memory User model

      at Object.log (api/routes/auth.routes.js:9:11)

  console.log
    ≡اôإ Auth routes using In-Memory User model

      at Object.log (api/routes/auth.routes.js:9:11)

  console.log
    ≡اôإ Auth routes using In-Memory User model

      at Object.log (api/routes/auth.routes.js:9:11)

  console.log
    ≡ا» Using in-memory database (development mode)

      at log (config/database.js:14:13)

  console.log
    ≡اôإ Data will be lost when server restarts

      at log (config/database.js:15:13)

  console.log
    ظأآي╕  To use MongoDB Atlas, set USE_MOCK_DB=false in .env

      at log (config/database.js:16:13)

  console.log
    ظ╣ي╕  Using in-memory database - seeding skipped

      at log (server.js:346:15)

  console.log
    ≡ا» Using in-memory database (development mode)

      at log (config/database.js:14:13)

  console.log
    ≡اôإ Data will be lost when server restarts

      at log (config/database.js:15:13)

  console.log
    ظأآي╕  To use MongoDB Atlas, set USE_MOCK_DB=false in .env

      at log (config/database.js:16:13)

  console.log
    ظ╣ي╕  Using in-memory database - seeding skipped

      at log (server.js:346:15)

(node:2808) [MONGOOSE] Warning: Duplicate schema index 
on {"email":1} found. This is often due to declaring an 
index using both "index: true" and "schema.index()". 
Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the 
warning was created)
(node:2808) [MONGOOSE] Warning: Duplicate schema index 
on {"beneficiary_id":1} found. This is often due to 
declaring an index using both "index: true" and 
"schema.index()". Please remove the duplicate index 
definition.
(node:2808) [MONGOOSE] Warning: Duplicate schema index 
on {"beneficiary_id":1} found. This is often due to 
declaring an index using both "index: true" and 
"schema.index()". Please remove the duplicate index 
definition.
(node:2808) [MONGOOSE] Warning: Duplicate schema index 
on {"program_code":1} found. This is often due to 
declaring an index using both "index: true" and 
"schema.index()". Please remove the duplicate index 
definition.
(node:10856) [MONGOOSE] Warning: Duplicate schema index 
on {"email":1} found. This is often due to declaring an 
index using both "index: true" and "schema.index()". 
Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the 
warning was created)
(node:10856) [MONGOOSE] Warning: Duplicate schema index 
on {"beneficiary_id":1} found. This is often due to 
declaring an index using both "index: true" and 
"schema.index()". Please remove the duplicate index 
definition.
(node:10856) [MONGOOSE] Warning: Duplicate schema index 
on {"beneficiary_id":1} found. This is often due to 
declaring an index using both "index: true" and 
"schema.index()". Please remove the duplicate index 
definition.
(node:10856) [MONGOOSE] Warning: Duplicate schema index 
on {"program_code":1} found. This is often due to 
declaring an index using both "index: true" and 
"schema.index()". Please remove the duplicate index 
definition.
[0mGET /api/users [32m200[0m 12.815 ms - 26[0m
[0mGET /api/users [32m200[0m 2.115 ms - 384[0m
[0mGET /api/users [33m403[0m 0.795 ms - 51[0m
[0mGET /api/users [33m401[0m 0.373 ms - 54[0m
[0mGET /api/users/user-1 [32m200[0m 1.019 ms - 202[0m
[0mGET /api/users/non-existent [33m404[0m 1.614 ms - 44[0m
[0mGET /api/users/user-1 [32m200[0m 0.784 ms - 202[0m
[0mGET /api/users/user-1 [33m403[0m 0.962 ms - 51[0m
  console.log
    ≡ا» Using in-memory database (development mode)

      at log (config/database.js:14:13)

  console.log
    ≡اôإ Data will be lost when server restarts

      at log (config/database.js:15:13)

  console.log
    ظأآي╕  To use MongoDB Atlas, set USE_MOCK_DB=false in .env

      at log (config/database.js:16:13)

  console.log
    ≡ا¤ْ [SECURITY] 2026-01-14T09:08:55.190Z - USER_REGISTERED {
      userId: undefined,
      email: 'test@example.com',
      ip: '::ffff:127.0.0.1'
    }

      at log (utils/security.js:83:11)

  console.log
    ظ╣ي╕  Using in-memory database - seeding skipped

      at log (server.js:346:15)

(node:22492) [MONGOOSE] Warning: Duplicate schema index 
on {"email":1} found. This is often due to declaring an 
index using both "index: true" and "schema.index()". 
Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the 
warning was created)
(node:22492) [MONGOOSE] Warning: Duplicate schema index 
on {"beneficiary_id":1} found. This is often due to 
declaring an index using both "index: true" and 
"schema.index()". Please remove the duplicate index 
definition.
(node:22492) [MONGOOSE] Warning: Duplicate schema index 
on {"beneficiary_id":1} found. This is often due to 
declaring an index using both "index: true" and 
"schema.index()". Please remove the duplicate index 
definition.
(node:22492) [MONGOOSE] Warning: Duplicate schema index 
on {"program_code":1} found. This is often due to 
declaring an index using both "index: true" and 
"schema.index()". Please remove the duplicate index 
definition.
[0mPOST /api/auth/register [32m201[0m 145.528 ms - 351[0m
[0mGET /api/health [33m404[0m 9.925 ms - 127[0m
[0mGET /api/status [33m404[0m 1.230 ms - 127[0m
  console.log
    ≡اôإ Auth routes using In-Memory User model

      at Object.log (api/routes/auth.routes.js:9:11)

[0mGET / [32m200[0m 0.788 ms - 165[0m
[0mGET /api [33m404[0m 0.440 ms - 120[0m
  console.log
    ≡ا¤ْ [SECURITY] 2026-01-14T09:08:55.260Z - USER_CREATED_BY_ADMIN {
      adminId: 'admin-1',
      newUserId: '1',
      email: 'newuser@example.com',
      ip: '::ffff:127.0.0.1'
    }

      at log (utils/security.js:83:11)

[0mPOST /api/users [32m201[0m 100.900 ms - 178[0m
[0mGET /api/nonexistent-route [33m404[0m 0.597 ms - 138[0m
[0mPOST /api/auth/register [33m400[0m 0.625 ms - 47[0m
  console.log
    ≡ا¤ْ [SECURITY] 2026-01-14T09:08:55.295Z - USER_REGISTERED {
      userId: undefined,
      email: 'duplicate@example.com',
      ip: '::ffff:127.0.0.1'
    }

      at log (utils/security.js:83:11)

[0mPOST /api/auth/register [32m201[0m 71.969 ms - 361[0m
  console.log
    ≡ا¤ْ [SECURITY] 2026-01-14T09:08:55.300Z - REGISTRATION_ATTEMPT_EXISTING_EMAIL { email: 'duplicate@example.com', ip: '::ffff:127.0.0.1' }

      at log (utils/security.js:83:11)

[0mPOST /api/auth/register [33m400[0m 1.289 ms - 54[0m
  console.log
    ≡ا» Using in-memory database (development mode)

      at log (config/database.js:14:13)

[0mPOST /api/auth/register [33m429[0m 0.445 ms - 99[0m
  console.log
    ≡اôإ Data will be lost when server restarts

      at log (config/database.js:15:13)

  console.log
    ظأآي╕  To use MongoDB Atlas, set USE_MOCK_DB=false in .env

      at log (config/database.js:16:13)

[0mPOST /api/auth/register [33m429[0m 1.238 ms - 99[0m
  console.log
    ظ╣ي╕  Using in-memory database - seeding skipped

      at log (server.js:346:15)

  console.error
    ظإî Login failed: User not found for email: login@example.com

    [0m [90m 111 |[39m     [36mconst[39m user [33m=[39m [36mawait[39m [33mUser[39m[33m.[39mfindOne({ email })[33m;[39m
     [90m 112 |[39m     [36mif[39m ([33m![39muser) {
    [31m[1m>[22m[39m[90m 113 |[39m       console[33m.[39merror([32m'ظإî Login failed: User not found for email:'[39m[33m,[39m email)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 114 |[39m       [36mreturn[39m res[33m.[39mstatus([35m401[39m)[33m.[39mjson({
     [90m 115 |[39m         success[33m:[39m [36mfalse[39m[33m,[39m
     [90m 116 |[39m         message[33m:[39m [32m'Invalid email or password'[39m[33m,[39m[0m

      at error (api/routes/auth.routes.js:113:15)

[0mPOST /api/auth/login [33m401[0m 4.310 ms - 55[0m
(node:7544) [MONGOOSE] Warning: Duplicate schema index 
on {"email":1} found. This is often due to declaring an 
index using both "index: true" and "schema.index()". 
Please remove the duplicate index definition.
[0mPOST /api/auth/register [33m429[0m 0.353 ms - 99[0m
(node:7544) [MONGOOSE] Warning: Duplicate schema index 
on {"beneficiary_id":1} found. This is often due to 
declaring an index using both "index: true" and 
"schema.index()". Please remove the duplicate index 
definition.
(node:7544) [MONGOOSE] Warning: Duplicate schema index 
on {"beneficiary_id":1} found. This is often due to 
declaring an index using both "index: true" and 
"schema.index()". Please remove the duplicate index 
definition.
(node:7544) [MONGOOSE] Warning: Duplicate schema index 
on {"program_code":1} found. This is often due to 
declaring an index using both "index: true" and 
"schema.index()". Please remove the duplicate index 
definition.
  console.error
    ظإî Login failed: User not found for email: nonexistent@example.com

    [0m [90m 111 |[39m     [36mconst[39m user [33m=[39m [36mawait[39m [33mUser[39m[33m.[39mfindOne({ email })[33m;[39m
     [90m 112 |[39m     [36mif[39m ([33m![39muser) {
    [31m[1m>[22m[39m[90m 113 |[39m       console[33m.[39merror([32m'ظإî Login failed: User not found for email:'[39m[33m,[39m email)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 114 |[39m       [36mreturn[39m res[33m.[39mstatus([35m401[39m)[33m.[39mjson({
     [90m 115 |[39m         success[33m:[39m [36mfalse[39m[33m,[39m
     [90m 116 |[39m         message[33m:[39m [32m'Invalid email or password'[39m[33m,[39m[0m

      at error (api/routes/auth.routes.js:113:15)

[0mPOST /api/auth/login [33m401[0m 2.643 ms - 55[0m
[0mPOST /api/auth/register [33m429[0m 0.528 ms - 99[0m
  console.error
    ظإî Login failed: User not found for email: login@example.com

    [0m [90m 111 |[39m     [36mconst[39m user [33m=[39m [36mawait[39m [33mUser[39m[33m.[39mfindOne({ email })[33m;[39m
     [90m 112 |[39m     [36mif[39m ([33m![39muser) {
    [31m[1m>[22m[39m[90m 113 |[39m       console[33m.[39merror([32m'ظإî Login failed: User not found for email:'[39m[33m,[39m email)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 114 |[39m       [36mreturn[39m res[33m.[39mstatus([35m401[39m)[33m.[39mjson({
     [90m 115 |[39m         success[33m:[39m [36mfalse[39m[33m,[39m
     [90m 116 |[39m         message[33m:[39m [32m'Invalid email or password'[39m[33m,[39m[0m

      at error (api/routes/auth.routes.js:113:15)

[0mPOST /api/auth/login [33m401[0m 20.517 ms - 55[0m
  console.log
    [INFO] Retrieved 0 employees

      at Object.log [as info] (utils/logger.js:6:13)

[0mGET /api/hr/employees [32m200[0m 32.913 ms - 112[0m
[0mPOST /api/auth/logout [33m401[0m 0.841 ms - 54[0m
  console.log
    ≡ا¤ْ [SECURITY] 2026-01-14T09:08:55.387Z - USER_CREATED_BY_ADMIN {
      adminId: 'admin-1',
      newUserId: '1',
      email: 'user@example.com',
      ip: '::ffff:127.0.0.1'
    }

      at log (utils/security.js:83:11)

[0mPOST /api/users [32m201[0m 113.723 ms - 179[0m
[0mGET /api/hr/employees [33m401[0m 0.719 ms - 54[0m
[0mPOST /api/users [33m403[0m 1.081 ms - 51[0m
FAIL backend/__tests__/auth.test.js
  Authentication Routes
    POST /api/auth/register
      ├ù should register a new user successfully (222 
ms)
      ظêأ should reject duplicate email (82 ms)
      ├ù should require all fields (5 ms)
    POST /api/auth/login
      ├ù should login successfully with correct 
credentials (15 ms)
      ظêأ should reject invalid email (11 ms)
      ظêأ should reject wrong password (34 ms)
    POST /api/auth/logout
      ├ù should logout successfully (8 ms)

  ظù Authentication Routes ظ║ POST /api/auth/register 
ظ║ should register a new user successfully

    expect(received).toHaveProperty(path)

    Expected path: "_id"
    Received path: []

    Received value: {"accessToken": "eyJhbGciOiJIUzI1NiI
sInR5cCI6IkpXVCJ9.eyJlbWFpbCI6InRlc3RAZXhhbXBsZS5jb20iLC
Jyb2xlIjoidXNlciIsImlhdCI6MTc2ODM4MTczNSwiZXhwIjoxNzY4OT
g2NTM1fQ.0rfCvMhctDZObTi9vcYRHdBqXPPO4OUU7i09mvBkCps", 
"user": {"email": "test@example.com", "fullName": "Test 
User", "role": "user"}}

    [0m [90m 25 |[39m       expect(res[33m.[39mstat
us)[33m.[39mtoBe([35m201[39m)[33m;[39m
     [90m 26 |[39m       expect(res[33m.[39mbody[33
m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39
m
    [31m[1m>[22m[39m[90m 27 |[39m       expect(res
[33m.[39mbody[33m.[39mdata)[33m.[39mtoHaveProperty
([32m'_id'[39m)[33m;[39m
     [90m    |[39m                             
[31m[1m^[22m[39m
     [90m 28 |[39m       expect(res[33m.[39mbody[33
m.[39mdata[33m.[39memail)[33m.[39mtoBe([32m'test@e
xample.com'[39m)[33m;[39m
     [90m 29 |[39m     })[33m;[39m
     [90m 30 |[39m[0m

      at Object.toHaveProperty 
(__tests__/auth.test.js:27:29)

  ظù Authentication Routes ظ║ POST /api/auth/register 
ظ║ should require all fields

    expect(received).toBe(expected) // Object.is 
equality

    Expected: 400
    Received: 429

    [0m [90m 54 |[39m       })[33m;[39m
     [90m 55 |[39m
    [31m[1m>[22m[39m[90m 56 |[39m       expect(res
[33m.[39mstatus)[33m.[39mtoBe([35m400[39m)[33m;[
39m
     [90m    |[39m                          
[31m[1m^[22m[39m
     [90m 57 |[39m     })[33m;[39m
     [90m 58 |[39m   })[33m;[39m
     [90m 59 |[39m[0m

      at Object.toBe (__tests__/auth.test.js:56:26)

  ظù Authentication Routes ظ║ POST /api/auth/login 
ظ║ should login successfully with correct credentials

    expect(received).toBe(expected) // Object.is 
equality

    Expected: 200
    Received: 401

    [0m [90m 74 |[39m       })[33m;[39m
     [90m 75 |[39m
    [31m[1m>[22m[39m[90m 76 |[39m       expect(res
[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[
39m
     [90m    |[39m                          
[31m[1m^[22m[39m
     [90m 77 |[39m       expect(res[33m.[39mbody[33
m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39
m
     [90m 78 |[39m       expect(res[33m.[39mbody[33
m.[39mdata)[33m.[39mtoHaveProperty([32m'accessToken'
[39m)[33m;[39m
     [90m 79 |[39m       expect(res[33m.[39mbody[33
m.[39mdata)[33m.[39mtoHaveProperty([32m'refreshToken
'[39m)[33m;[39m[0m

      at Object.toBe (__tests__/auth.test.js:76:26)

  ظù Authentication Routes ظ║ POST /api/auth/logout 
ظ║ should logout successfully

    expect(received).toBe(expected) // Object.is 
equality

    Expected: 200
    Received: 401

    [0m [90m 106 |[39m       [36mconst[39m res 
[33m=[39m [36mawait[39m request(app)[33m.[39mpost(
[32m'/api/auth/logout'[39m)[33m;[39m
     [90m 107 |[39m
    [31m[1m>[22m[39m[90m 108 |[39m       expect(re
s[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;
[39m
     [90m     |[39m                          
[31m[1m^[22m[39m
     [90m 109 |[39m       expect(res[33m.[39mbody[3
3m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[3
9m
     [90m 110 |[39m     })[33m;[39m
     [90m 111 |[39m   })[33m;[39m[0m

      at Object.toBe (__tests__/auth.test.js:108:26)

  console.error
    Create user error: Error: Illegal arguments: undefined, string
        at _async (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\bcryptjs\umd\index.js:233:15)
        at C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\bcryptjs\umd\index.js:245:11
        at new Promise (<anonymous>)
        at Object.hash (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\bcryptjs\umd\index.js:244:16)
        at hash (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\api\routes\users.routes.js:118:41)

    [0m [90m 144 |[39m     })[33m;[39m
     [90m 145 |[39m   } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 146 |[39m     console[33m.[39merror([32m'Create user error:'[39m[33m,[39m error)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 147 |[39m     res[33m.[39mstatus([35m500[39m)[33m.[39mjson({
     [90m 148 |[39m       success[33m:[39m [36mfalse[39m[33m,[39m
     [90m 149 |[39m       message[33m:[39m [32m'Failed to create user'[39m[33m,[39m[0m

      at error (api/routes/users.routes.js:146:13)

[0mPOST /api/users [31m500[0m 5.062 ms - 51[0m
[0mPOST /api/hr/employees [33m400[0m 1.355 ms - 104[0m
[0mPUT /api/users/user-1 [33m404[0m 2.263 ms - 44[0m
  console.error
    Error: request entity too large

    [0m [90m 318 |[39m [90m// Error handling middleware (MUST be after all routes)[39m
     [90m 319 |[39m app[33m.[39muse((err[33m,[39m req[33m,[39m res[33m,[39m next) [33m=>[39m {
    [31m[1m>[22m[39m[90m 320 |[39m   console[33m.[39merror([32m'Error:'[39m[33m,[39m err[33m.[39mmessage)[33m;[39m
     [90m     |[39m           [31m[1m^[22m[39m
     [90m 321 |[39m   res[33m.[39mstatus(err[33m.[39mstatusCode [33m||[39m [35m500[39m)[33m.[39mjson({
     [90m 322 |[39m     success[33m:[39m [36mfalse[39m[33m,[39m
     [90m 323 |[39m     statusCode[33m:[39m err[33m.[39mstatusCode [33m||[39m [35m500[39m[33m,[39m[0m

      at error (server.js:320:11)
      at Layer.handle_error (node_modules/express/lib/router/layer.js:71:5)
      at trim_prefix (node_modules/express/lib/router/index.js:326:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at Layer.handle_error (node_modules/express/lib/router/layer.js:67:12)
      at trim_prefix (node_modules/express/lib/router/index.js:326:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at Layer.handle_error (node_modules/express/lib/router/layer.js:67:12)
      at trim_prefix (node_modules/express/lib/router/index.js:326:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at Layer.handle_error (node_modules/express/lib/router/layer.js:67:12)
      at trim_prefix (node_modules/express/lib/router/index.js:326:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at Layer.handle_error (node_modules/express/lib/router/layer.js:67:12)
      at trim_prefix (node_modules/express/lib/router/index.js:326:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at Layer.handle_error (node_modules/express/lib/router/layer.js:67:12)
      at trim_prefix (node_modules/express/lib/router/index.js:326:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at Layer.handle_error (node_modules/express/lib/router/layer.js:67:12)
      at trim_prefix (node_modules/express/lib/router/index.js:326:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at Layer.handle_error (node_modules/express/lib/router/layer.js:67:12)
      at trim_prefix (node_modules/express/lib/router/index.js:326:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at Layer.handle_error (node_modules/express/lib/router/layer.js:67:12)
      at trim_prefix (node_modules/express/lib/router/index.js:326:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at Layer.handle_error (node_modules/express/lib/router/layer.js:67:12)
      at trim_prefix (node_modules/express/lib/router/index.js:326:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at onfinished (node_modules/body-parser/lib/read.js:102:9)
      at listener (node_modules/on-finished/index.js:170:15)
      at onFinish (node_modules/on-finished/index.js:101:5)
      at callback (node_modules/ee-first/index.js:55:10)
      at IncomingMessage.onevent (node_modules/ee-first/index.js:93:5)

[0mPUT /api/users/non-existent [33m404[0m 2.259 ms - 44[0m
[0mPUT /api/users/user-1 [33m403[0m 0.431 ms - 51[0m
  console.error
    ╪«╪╖╪ث ┘┘è ┘é╪▒╪د╪ة╪ر ┘é╪د╪╣╪»╪ر ╪د┘╪ذ┘è╪د┘╪د╪ز: SyntaxError: Unexpected end of JSON input
        at JSON.parse (<anonymous>)
        at Object.parse [as read] (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\config\inMemoryDB.js:24:17)
        at Function.read [as findById] (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\models\Employee.memory.js:27:28)
        at findById (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\routes\hr.routes.js:46:37)
        at Layer.handle [as handle_request] (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\layer.js:95:5)
        at next (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\route.js:149:13)
        at Route.dispatch (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\route.js:119:3)
        at Layer.handle [as handle_request] (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\layer.js:95:5)
        at C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\index.js:284:15
        at param (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\index.js:365:14)
        at param (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\index.js:376:14)
        at Function.process_params (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\index.js:421:3)
        at next (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\index.js:280:10)
        at next (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\middleware\auth.js:38:7)
        at C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\jsonwebtoken\verify.js:261:12
        at getSecret (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\jsonwebtoken\verify.js:97:14)
        at Object.<anonymous>.module.exports [as verify] (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\jsonwebtoken\verify.js:101:10)
        at verify (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\middleware\auth.js:22:9)
        at Layer.handle [as handle_request] (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\layer.js:95:5)
        at trim_prefix (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\index.js:328:13)
        at C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\index.js:286:9
        at Function.process_params (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\index.js:346:12)
        at next (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\index.js:280:10)
        at Function.handle (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\index.js:175:3)
        at router (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\index.js:47:12)
        at Layer.handle [as handle_request] (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\layer.js:95:5)
        at trim_prefix (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\index.js:328:13)
        at C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\index.js:286:9
        at Function.process_params (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\index.js:346:12)
        at next (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\index.js:280:10)
        at C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\index.js:646:15
        at next (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\index.js:265:14)
        at next (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\middleware\auth.js:38:7)
        at C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\jsonwebtoken\verify.js:261:12
        at getSecret (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\jsonwebtoken\verify.js:97:14)
        at Object.<anonymous>.module.exports [as verify] (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\jsonwebtoken\verify.js:101:10)
        at verify (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\middleware\auth.js:22:9)
        at Layer.handle [as handle_request] (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\layer.js:95:5)
        at trim_prefix (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\index.js:328:13)
        at C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\index.js:286:9
        at Function.process_params (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\index.js:346:12)
        at next (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\index.js:280:10)
        at Function.handle (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\index.js:175:3)
        at router (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\index.js:47:12)
        at Layer.handle [as handle_request] (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\layer.js:95:5)
        at trim_prefix (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\index.js:328:13)
        at C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\index.js:286:9
        at Function.process_params (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\index.js:346:12)
        at next (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\index.js:280:10)
        at C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express-rate-limit\dist\index.cjs:942:7
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express-rate-limit\dist\index.cjs:825:5

    [0m [90m 24 |[39m     [36mreturn[39m [33mJSON[39m[33m.[39mparse(data)[33m;[39m
     [90m 25 |[39m   } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 26 |[39m     console[33m.[39merror([32m'╪«╪╖╪ث ┘┘è ┘é╪▒╪د╪ة╪ر ┘é╪د╪╣╪»╪ر ╪د┘╪ذ┘è╪د┘╪د╪ز:'[39m[33m,[39m error)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 27 |[39m     [36mreturn[39m {
     [90m 28 |[39m       users[33m:[39m [][33m,[39m
     [90m 29 |[39m       employees[33m:[39m [][33m,[39m[0m

      at Object.error [as read] (config/inMemoryDB.js:26:13)
      at Function.read [as findById] (models/Employee.memory.js:27:28)
      at findById (routes/hr.routes.js:46:37)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at next (node_modules/express/lib/router/route.js:149:13)
      at Route.dispatch (node_modules/express/lib/router/route.js:119:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at node_modules/express/lib/router/index.js:284:15
      at param (node_modules/express/lib/router/index.js:365:14)
      at param (node_modules/express/lib/router/index.js:376:14)
      at Function.process_params (node_modules/express/lib/router/index.js:421:3)
      at next (node_modules/express/lib/router/index.js:280:10)
      at next (middleware/auth.js:38:7)
      at node_modules/jsonwebtoken/verify.js:261:12
      at getSecret (node_modules/jsonwebtoken/verify.js:97:14)
      at Object.<anonymous>.module.exports [as verify] (node_modules/jsonwebtoken/verify.js:101:10)
      at verify (middleware/auth.js:22:9)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/express/lib/router/index.js:646:15
      at next (node_modules/express/lib/router/index.js:265:14)
      at next (middleware/auth.js:38:7)
      at node_modules/jsonwebtoken/verify.js:261:12
      at getSecret (node_modules/jsonwebtoken/verify.js:97:14)
      at Object.<anonymous>.module.exports [as verify] (node_modules/jsonwebtoken/verify.js:101:10)
      at verify (middleware/auth.js:22:9)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/express-rate-limit/dist/index.cjs:942:7
      at node_modules/express-rate-limit/dist/index.cjs:825:5

[0mGET /api/hr/employees/123 [33m404[0m 21.826 ms - 60[0m
  console.error
    ╪«╪╖╪ث ┘┘è ┘é╪▒╪د╪ة╪ر ┘é╪د╪╣╪»╪ر ╪د┘╪ذ┘è╪د┘╪د╪ز: SyntaxError: Unexpected end of JSON input
        at JSON.parse (<anonymous>)
        at Object.parse [as read] (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\config\inMemoryDB.js:24:17)
        at Function.read [as findById] (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\models\Employee.memory.js:27:28)
        at findById (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\routes\hr.routes.js:115:37)
        at Layer.handle [as handle_request] (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\layer.js:95:5)
        at next (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\route.js:149:13)
        at next (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\middleware\auth.js:105:5)
        at Layer.handle [as handle_request] (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\layer.js:95:5)
        at next (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\route.js:149:13)
        at Route.dispatch (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\route.js:119:3)
        at Layer.handle [as handle_request] (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\layer.js:95:5)
        at C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\index.js:284:15
        at param (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\index.js:365:14)
        at param (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\index.js:376:14)
        at Function.process_params (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\index.js:421:3)
        at next (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\index.js:280:10)
        at next (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\middleware\auth.js:38:7)
        at C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\jsonwebtoken\verify.js:261:12
        at getSecret (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\jsonwebtoken\verify.js:97:14)
        at Object.<anonymous>.module.exports [as verify] (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\jsonwebtoken\verify.js:101:10)
        at verify (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\middleware\auth.js:22:9)
        at Layer.handle [as handle_request] (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\layer.js:95:5)
        at trim_prefix (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\index.js:328:13)
        at C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\index.js:286:9
        at Function.process_params (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\index.js:346:12)
        at next (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\index.js:280:10)
        at Function.handle (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\index.js:175:3)
        at router (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\index.js:47:12)
        at Layer.handle [as handle_request] (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\layer.js:95:5)
        at trim_prefix (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\index.js:328:13)
        at C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\index.js:286:9
        at Function.process_params (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\index.js:346:12)
        at next (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\index.js:280:10)
        at C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\index.js:646:15
        at next (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\index.js:265:14)
        at next (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\middleware\auth.js:38:7)
        at C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\jsonwebtoken\verify.js:261:12
        at getSecret (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\jsonwebtoken\verify.js:97:14)
        at Object.<anonymous>.module.exports [as verify] (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\jsonwebtoken\verify.js:101:10)
        at verify (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\middleware\auth.js:22:9)
        at Layer.handle [as handle_request] (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\layer.js:95:5)
        at trim_prefix (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\index.js:328:13)
        at C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\index.js:286:9
        at Function.process_params (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\index.js:346:12)
        at next (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\index.js:280:10)
        at Function.handle (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\index.js:175:3)
        at router (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\index.js:47:12)
        at Layer.handle [as handle_request] (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\layer.js:95:5)
        at trim_prefix (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\index.js:328:13)
        at C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\index.js:286:9
        at Function.process_params (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\index.js:346:12)
        at next (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\index.js:280:10)
        at C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express-rate-limit\dist\index.cjs:942:7
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express-rate-limit\dist\index.cjs:825:5

    [0m [90m 24 |[39m     [36mreturn[39m [33mJSON[39m[33m.[39mparse(data)[33m;[39m
     [90m 25 |[39m   } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 26 |[39m     console[33m.[39merror([32m'╪«╪╖╪ث ┘┘è ┘é╪▒╪د╪ة╪ر ┘é╪د╪╣╪»╪ر ╪د┘╪ذ┘è╪د┘╪د╪ز:'[39m[33m,[39m error)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 27 |[39m     [36mreturn[39m {
     [90m 28 |[39m       users[33m:[39m [][33m,[39m
     [90m 29 |[39m       employees[33m:[39m [][33m,[39m[0m

      at Object.error [as read] (config/inMemoryDB.js:26:13)
      at Function.read [as findById] (models/Employee.memory.js:27:28)
      at findById (routes/hr.routes.js:115:37)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at next (node_modules/express/lib/router/route.js:149:13)
      at next (middleware/auth.js:105:5)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at next (node_modules/express/lib/router/route.js:149:13)
      at Route.dispatch (node_modules/express/lib/router/route.js:119:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at node_modules/express/lib/router/index.js:284:15
      at param (node_modules/express/lib/router/index.js:365:14)
      at param (node_modules/express/lib/router/index.js:376:14)
      at Function.process_params (node_modules/express/lib/router/index.js:421:3)
      at next (node_modules/express/lib/router/index.js:280:10)
      at next (middleware/auth.js:38:7)
      at node_modules/jsonwebtoken/verify.js:261:12
      at getSecret (node_modules/jsonwebtoken/verify.js:97:14)
      at Object.<anonymous>.module.exports [as verify] (node_modules/jsonwebtoken/verify.js:101:10)
      at verify (middleware/auth.js:22:9)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/express/lib/router/index.js:646:15
      at next (node_modules/express/lib/router/index.js:265:14)
      at next (middleware/auth.js:38:7)
      at node_modules/jsonwebtoken/verify.js:261:12
      at getSecret (node_modules/jsonwebtoken/verify.js:97:14)
      at Object.<anonymous>.module.exports [as verify] (node_modules/jsonwebtoken/verify.js:101:10)
      at verify (middleware/auth.js:22:9)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/express-rate-limit/dist/index.cjs:942:7
      at node_modules/express-rate-limit/dist/index.cjs:825:5

[0mPUT /api/hr/employees/123 [33m404[0m 10.027 ms - 60[0m
  console.error
    ╪«╪╖╪ث ┘┘è ┘é╪▒╪د╪ة╪ر ┘é╪د╪╣╪»╪ر ╪د┘╪ذ┘è╪د┘╪د╪ز: SyntaxError: Unexpected end of JSON input
        at JSON.parse (<anonymous>)
        at Object.parse [as read] (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\config\inMemoryDB.js:24:17)
        at Object.read (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\models\User.memory.js:94:21)
        at find (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\api\routes\users.routes.js:22:30)
        at Layer.handle [as handle_request] (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\layer.js:95:5)
        at next (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\route.js:149:13)
        at next (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\middleware\auth.js:60:3)
        at Layer.handle [as handle_request] (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\layer.js:95:5)
        at next (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\route.js:149:13)
        at next (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\middleware\auth.js:38:7)
        at C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\jsonwebtoken\verify.js:261:12
        at getSecret (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\jsonwebtoken\verify.js:97:14)
        at Object.<anonymous>.module.exports [as verify] (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\jsonwebtoken\verify.js:101:10)
        at verify (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\middleware\auth.js:22:9)
        at Layer.handle [as handle_request] (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\layer.js:95:5)
        at next (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\route.js:149:13)
        at Route.dispatch (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\route.js:119:3)
        at Layer.handle [as handle_request] (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\layer.js:95:5)
        at C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\index.js:284:15
        at Function.process_params (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\index.js:346:12)
        at next (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\index.js:280:10)
        at Function.handle (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\index.js:175:3)
        at router (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\index.js:47:12)
        at Layer.handle [as handle_request] (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\layer.js:95:5)
        at trim_prefix (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\index.js:328:13)
        at C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\index.js:286:9
        at Function.process_params (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\index.js:346:12)
        at next (C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express\lib\router\index.js:280:10)
        at C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express-rate-limit\dist\index.cjs:942:7
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at C:\Users\x-be\OneDrive\╪د┘┘à╪│╪ز┘╪»╪د╪ز\04-10-2025\66666\backend\node_modules\express-rate-limit\dist\index.cjs:825:5

    [0m [90m 24 |[39m     [36mreturn[39m [33mJSON[39m[33m.[39mparse(data)[33m;[39m
     [90m 25 |[39m   } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 26 |[39m     console[33m.[39merror([32m'╪«╪╖╪ث ┘┘è ┘é╪▒╪د╪ة╪ر ┘é╪د╪╣╪»╪ر ╪د┘╪ذ┘è╪د┘╪د╪ز:'[39m[33m,[39m error)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 27 |[39m     [36mreturn[39m {
     [90m 28 |[39m       users[33m:[39m [][33m,[39m
     [90m 29 |[39m       employees[33m:[39m [][33m,[39m[0m

      at Object.error [as read] (config/inMemoryDB.js:26:13)
      at Object.read (models/User.memory.js:94:21)
      at find (api/routes/users.routes.js:22:30)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at next (node_modules/express/lib/router/route.js:149:13)
      at next (middleware/auth.js:60:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at next (node_modules/express/lib/router/route.js:149:13)
      at next (middleware/auth.js:38:7)
      at node_modules/jsonwebtoken/verify.js:261:12
      at getSecret (node_modules/jsonwebtoken/verify.js:97:14)
      at Object.<anonymous>.module.exports [as verify] (node_modules/jsonwebtoken/verify.js:101:10)
      at verify (middleware/auth.js:22:9)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at next (node_modules/express/lib/router/route.js:149:13)
      at Route.dispatch (node_modules/express/lib/router/route.js:119:3)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at node_modules/express/lib/router/index.js:284:15
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at Function.handle (node_modules/express/lib/router/index.js:175:3)
      at router (node_modules/express/lib/router/index.js:47:12)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at trim_prefix (node_modules/express/lib/router/index.js:328:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at node_modules/express-rate-limit/dist/index.cjs:942:7
      at node_modules/express-rate-limit/dist/index.cjs:825:5

[0mGET /api/users [32m200[0m 16.620 ms - 26[0m
[0mDELETE /api/users/user-1 [33m404[0m 1.187 ms - 44[0m
[0mDELETE /api/users/non-existent [33m404[0m 0.654 ms - 44[0m
[0mDELETE /api/hr/employees/123 [33m404[0m 4.060 ms - 60[0m
[0mDELETE /api/users/user-1 [33m403[0m 0.926 ms - 51[0m
[0mGET /api/hr/attendance [33m404[0m 1.829 ms - 134[0m
[0mGET /api/users/user-1/profile [33m404[0m 0.696 ms - 141[0m
[0mPOST /api/hr/attendance [33m400[0m 0.544 ms - 91[0m
[0mPUT /api/users/user-1/profile [33m404[0m 0.582 ms - 141[0m
[0mGET /api/hr/leaves [32m200[0m 1.240 ms - 76[0m
[0mGET /api/users [33m403[0m 0.764 ms - 50[0m
[0mPOST /api/hr/leaves [33m400[0m 3.004 ms - 65[0m
[0mGET /api/finance/budgets [33m404[0m 1.636 ms - 136[0m
[0mPOST /api/finance/expenses [32m201[0m 4.310 ms - 222[0m
[0mGET /api/finance/reports [33m404[0m 0.786 ms - 136[0m
[0mGET /api/notifications [32m200[0m 2.207 ms - 70[0m
[0mGET /api/notifications [33m401[0m 0.626 ms - 54[0m
[0mPOST /api/notifications [33m404[0m 0.839 ms - 135[0m
[0mGET /api/notifications/123 [33m404[0m 0.721 ms - 138[0m
[0mPUT /api/notifications/123/read [33m404[0m 0.684 ms - 143[0m
[0mGET /api/reports/hr [33m404[0m 2.440 ms - 131[0m
  console.log
    ≡ا¤ْ [SECURITY] 2026-01-14T09:08:55.640Z - USER_REGISTERED {
      userId: undefined,
      email: 'test@example.com',
      ip: '::ffff:127.0.0.1'
    }

      at log (utils/security.js:83:11)

[0mPOST /api/auth/register [32m201[0m 144.871 ms - 351[0m
[0mGET /api/reports/finance [33m404[0m 1.752 ms - 136[0m
[0mGET /api/reports/attendance [33m404[0m 0.643 ms - 139[0m
[0mGET /api/users [33m401[0m 1.046 ms - 69[0m
[0mGET /api/reports/generate?type=hr&startDate=2024-01-01&endDate=2024-12-31 [33m404[0m 0.978 ms - 185[0m
[0mGET /api/users [33m401[0m 0.294 ms - 54[0m
[0mGET /api/ai/predictions [33m404[0m 0.704 ms - 135[0m
[0mPOST /api/ai/chat [33m404[0m 11.798 ms - 129[0m
FAIL backend/__tests__/users.test.js
  User Management Routes
    GET /api/users
      ├ù should return all users for admin (81 ms)
      ظêأ should not return passwords in user list (29 
ms)
      ظêأ should deny access to non-admin users (11 ms)
      ظêأ should require authentication (11 ms)
    GET /api/users/:id
      ظêأ should return user by ID for admin (6 ms)
      ظêأ should return 404 for non-existent user (10 
ms)
      ظêأ should not include password in response (5 ms)
      ظêأ should deny access to non-admin users (5 ms)
    POST /api/users
      ظêأ should create new user for admin (129 ms)
      ├ù should reject duplicate email (124 ms)
      ظêأ should deny access to non-admin users (10 ms)
      ظêأ should require all fields (13 ms)
    PUT /api/users/:id
      ظêأ should update user for admin (16 ms)
      ظêأ should return 404 for non-existent user (16 
ms)
      ظêأ should deny access to non-admin users (9 ms)
    DELETE /api/users/:id
      ظêأ should delete user for admin (29 ms)
      ظêأ should return 404 for non-existent user (5 ms)
      ظêأ should deny access to non-admin users (17 ms)
    GET /api/users/:id/profile
      ظêأ should allow users to get their own profile 
(6 ms)
    PUT /api/users/:id/profile
      ظêأ should allow users to update their own 
profile (5 ms)
    Error Handling
      ظêأ should handle invalid token (8 ms)
      ظêأ should handle expired token (129 ms)
      ظêأ should handle malformed authorization header 
(6 ms)

  ظù User Management Routes ظ║ GET /api/users ظ║ 
should return all users for admin

    expect(received).toBe(expected) // Object.is 
equality

    Expected: 2
    Received: 0

    [0m [90m 61 |[39m         expect(res[33m.[39mbo
dy[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33
m;[39m
     [90m 62 |[39m         expect([33mArray[39m[33m
.[39misArray(res[33m.[39mbody[33m.[39mdata))[33m.
[39mtoBe([36mtrue[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 63 |[39m         expect(r
es[33m.[39mbody[33m.[39mdata[33m.[39mlength)[33m.
[39mtoBe([35m2[39m)[33m;[39m
     [90m    |[39m                                    
  [31m[1m^[22m[39m
     [90m 64 |[39m       }
     [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m[0m

      at Object.toBe (__tests__/users.test.js:63:38)

  ظù User Management Routes ظ║ POST /api/users ظ║ 
should reject duplicate email

    expect(received).toBe(expected) // Object.is 
equality

    Expected: true
    Received: false

    [0m [90m 158 |[39m       })[33m;[39m
     [90m 159 |[39m
    [31m[1m>[22m[39m[90m 160 |[39m       
expect([[35m400[39m[33m,[39m 
[35m409[39m[33m,[39m [35m500[39m][33m.[39minclud
es(res[33m.[39mstatus))[33m.[39mtoBe([36mtrue[39m)
[33m;[39m
     [90m     |[39m                                   
                 [31m[1m^[22m[39m
     [90m 161 |[39m       [36mif[39m 
(res[33m.[39mbody) {
     [90m 162 |[39m         expect(res[33m.[39mbody
[33m.[39msuccess)[33m.[39mtoBe([36mfalse[39m)[33m;
[39m
     [90m 163 |[39m       }[0m

      at Object.toBe (__tests__/users.test.js:160:52)

[0mPOST /api/ai/chat [33m404[0m 0.919 ms - 129[0m
[0mGET /api/ai/analytics [33m404[0m 0.452 ms - 133[0m
PASS backend/__tests__/routes.test.js
  HR Routes
    GET /api/hr/employees
      ظêأ should return all employees for admin (66 ms)
      ظêأ should require authentication (18 ms)
    POST /api/hr/employees
      ظêأ should create new employee (27 ms)
    GET /api/hr/employees/:id
      ظêأ should get employee by ID (30 ms)
    PUT /api/hr/employees/:id
      ظêأ should update employee (22 ms)
    DELETE /api/hr/employees/:id
      ظêأ should delete employee (23 ms)
    GET /api/hr/attendance
      ظêأ should get attendance records (9 ms)
    POST /api/hr/attendance
      ظêأ should record attendance (5 ms)
    GET /api/hr/leaves
      ظêأ should get leaves (7 ms)
    POST /api/hr/leaves
      ظêأ should request leave (24 ms)
  Finance Routes
    GET /api/finance/budgets
      ظêأ should get budgets (19 ms)
    POST /api/finance/expenses
      ظêأ should record expense (12 ms)
    GET /api/finance/reports
      ظêأ should get financial reports (4 ms)
  Notifications Routes
    GET /api/notifications
      ظêأ should get user notifications (15 ms)
      ظêأ should require authentication (8 ms)
    POST /api/notifications
      ظêأ should send notification (6 ms)
    GET /api/notifications/:id
      ظêأ should get specific notification (5 ms)
    PUT /api/notifications/:id/read
      ظêأ should mark notification as read (7 ms)
  Reports Routes
    GET /api/reports/hr
      ظêأ should get HR reports (9 ms)
    GET /api/reports/finance
      ظêأ should get finance reports (15 ms)
    GET /api/reports/attendance
      ظêأ should get attendance reports (5 ms)
    GET /api/reports/generate
      ظêأ should generate report (9 ms)
  AI Routes
    GET /api/ai/predictions
      ظêأ should get AI predictions (5 ms)
    POST /api/ai/chat
      ظêأ should send chat message (17 ms)
      ظêأ should require message field (9 ms)
    GET /api/ai/analytics
      ظêأ should get analytics (4 ms)

  console.log
    ≡ا¤ْ [SECURITY] 2026-01-14T09:08:55.759Z - USER_REGISTERED {
      userId: undefined,
      email: 'test@example.com',
      ip: '::ffff:127.0.0.1'
    }

      at log (utils/security.js:83:11)

[0mPOST /api/auth/register [32m201[0m 101.040 ms - 346[0m
  console.log
    ≡ا» Using in-memory database (development mode)

      at log (config/database.js:14:13)

  console.log
    ≡اôإ Data will be lost when server restarts

      at log (config/database.js:15:13)

  console.log
    ظأآي╕  To use MongoDB Atlas, set USE_MOCK_DB=false in .env

      at log (config/database.js:16:13)

[0mPOST /api/auth/register [33m429[0m 1.057 ms - 99[0m
  console.log
    ظ╣ي╕  Using in-memory database - seeding skipped

      at log (server.js:346:15)

[0mGET /api/users [32m200[0m 1.859 ms - 26[0m
(node:26304) [MONGOOSE] Warning: Duplicate schema index 
on {"email":1} found. This is often due to declaring an 
index using both "index: true" and "schema.index()". 
Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the 
warning was created)
(node:26304) [MONGOOSE] Warning: Duplicate schema index 
on {"beneficiary_id":1} found. This is often due to 
declaring an index using both "index: true" and 
"schema.index()". Please remove the duplicate index 
definition.
(node:26304) [MONGOOSE] Warning: Duplicate schema index 
on {"beneficiary_id":1} found. This is often due to 
declaring an index using both "index: true" and 
"schema.index()". Please remove the duplicate index 
definition.
(node:26304) [MONGOOSE] Warning: Duplicate schema index 
on {"program_code":1} found. This is often due to 
declaring an index using both "index: true" and 
"schema.index()". Please remove the duplicate index 
definition.
[0mGET /api/users [32m200[0m 5.737 ms - 205[0m
[0mGET /api/users [32m200[0m 0.832 ms - 205[0m
[0mGET /api/users [32m200[0m 0.780 ms - 205[0m
  console.log
    ظ£à Created 1000 notifications in 5ms

      at Object.log (tests/smartNotifications.test.js:371:13)

  console.log
    ظ£à Retrieved 100 notifications in 0ms

      at Object.log (tests/smartNotifications.test.js:388:13)

PASS backend/tests/smartNotifications.test.js
  SmartNotificationService Tests
    ظêأ should create a smart notification (27 ms)
    ظêأ should calculate correct priority (1 ms)
    ظêأ should send notification successfully (2 ms)
    ظêأ should mark notification as read (1 ms)
    ظêأ should get unread notifications only (1 ms)
    ظêأ should delete notification
    ظêأ should clear all notifications (1 ms)
    ظêأ should calculate statistics correctly (1 ms)
    ظêأ should schedule notification (1519 ms)
  AdvancedMessagingAlertSystem Tests
    ظêأ should initialize message templates (1 ms)
    ظêأ should send message using template (16 ms)
    ظêأ should create alert rule (15 ms)
    ظêأ should check and trigger alerts (8 ms)
    ظêأ should support multiple alert types
    ظêأ should get message statistics (1 ms)
    ظêأ should get alert statistics (1 ms)
  Integration Tests
    ظêأ complete notification workflow
    ظêأ send message and trigger alert (6 ms)
    ظêأ schedule multiple notifications (2515 ms)
  Performance Tests
    ظêأ should handle 1000 notifications (7 ms)
    ظêأ should retrieve notifications quickly (3 ms)
  Edge Cases
    ظêأ should handle user with no notifications (1 ms)
    ظêأ should handle deleting same notification twice
    ظêأ should handle empty workflow data (1 ms)

[0mPOST /api/auth/register [33m429[0m 0.326 ms - 99[0m
[0mPOST /api/auth/register [33m429[0m 0.243 ms - 99[0m
[0mPOST /api/auth/register [33m429[0m 0.229 ms - 99[0m
[0mPOST /api/auth/register [33m429[0m 0.356 ms - 99[0m
[0mPOST /api/auth/register [33m429[0m 0.819 ms - 99[0m
[0mGET /api/users [32m200[0m 1.533 ms - 205[0m
[0mGET /api/health [33m404[0m 0.621 ms - 127[0m
[0mPOST /api/auth/register [33m429[0m 0.309 ms - 99[0m
[0mGET /api/users [33m401[0m 0.669 ms - 54[0m
[0mGET /api/users [33m401[0m 0.290 ms - 54[0m
[0mGET /api/users [33m401[0m 0.273 ms - 54[0m
[0mGET /api/users [33m403[0m 0.360 ms - 50[0m
[0mGET /api/users [32m200[0m 0.692 ms - 205[0m
[0mGET /api/users [32m200[0m 0.686 ms - 205[0m
[0mGET /api/users [32m200[0m 0.797 ms - 26[0m
[0mGET /api/users [32m200[0m 0.893 ms - 205[0m
[0mPOST /api/auth/register [33m429[0m 0.770 ms - 99[0m
[0mPUT /api/users/123 [33m404[0m 1.143 ms - 44[0m
  console.log
    ≡ا¤ْ [SECURITY] 2026-01-14T09:08:55.981Z - USER_REGISTERED {
      userId: undefined,
      email: 'ahmed@example.com',
      ip: '::ffff:127.0.0.1'
    }

      at log (utils/security.js:83:11)

[0mPOST /api/auth/register [32m201[0m 174.276 ms - 356[0m
[0mDELETE /api/users/123 [33m404[0m 1.678 ms - 44[0m
[0mPATCH /api/auth/register [33m404[0m 0.810 ms - 136[0m
PASS backend/__tests__/integration.test.js
  System Routes and Integration Tests
    Health Check Endpoint
      ظêأ should return 200 for health check (41 ms)
      ظêأ should return server status (10 ms)
    Root Endpoint
      ظêأ should respond to GET / (10 ms)
      ظêأ should respond to GET /api (7 ms)
    Error Handling
      ظêأ should return 404 for non-existent routes (7 
ms)
      ظêأ should handle bad request gracefully (16 ms)
      ظêأ should reject oversized payloads (155 ms)
    CORS Configuration
      ظêأ should respond to OPTIONS requests (15 ms)
      ظêأ should include CORS headers (23 ms)
    Request/Response Handling
      ظêأ should handle JSON requests (166 ms)
      ظêأ should parse URL-encoded data (117 ms)
      ظêأ should handle empty request body (9 ms)
    Security Headers
      ظêأ should include security headers (9 ms)
      ظêأ should enforce HTTPS in production (1 ms)
    Concurrent Requests
      ظêأ should handle multiple simultaneous requests 
(16 ms)
      ظêأ should handle concurrent auth requests (15 ms)
    Content-Type Handling
      ظêأ should reject invalid Content-Type (3 ms)
      ظêأ should handle application/json (16 ms)
    Response Format
      ظêأ should return JSON responses (17 ms)
      ظêأ should include status code in response (21 ms)
      ظêأ should include success flag in error 
responses (6 ms)
    Authentication Edge Cases
      ظêأ should handle missing Authorization header (8 
ms)
      ظêأ should handle malformed Authorization header 
(14 ms)
      ظêأ should handle empty Authorization header (17 
ms)
      ظêأ should reject invalid token format (5 ms)
    Request Timeout
      ظêأ should handle slow responses (4 ms)
    Database Connection States
      ظêأ should work with in-memory database (3 ms)
      ظêأ should handle empty database gracefully (5 ms)
    Request Methods
      ظêأ should handle GET requests (5 ms)
      ظêأ should handle POST requests (20 ms)
      ظêأ should handle PUT requests (23 ms)
      ظêأ should handle DELETE requests (9 ms)
      ظêأ should handle unsupported methods (8 ms)

[0mPOST /api/auth/register [33m400[0m 0.918 ms - 51[0m
  console.log
    ≡اôإ Auth routes using In-Memory User model

      at Object.log (api/routes/auth.routes.js:9:11)

[0mPOST /api/auth/register [33m400[0m 0.469 ms - 47[0m
[0mPOST /api/auth/register [33m429[0m 0.890 ms - 99[0m
[0mPOST /api/auth/register [33m429[0m 0.617 ms - 99[0m
[0mPOST /api/auth/register [33m429[0m 0.408 ms - 99[0m
[0mPOST /api/auth/register [33m429[0m 0.862 ms - 99[0m
[0mPOST /api/auth/register [33m429[0m 3.299 ms - 99[0m
[0mPOST /api/auth/register [33m429[0m 0.947 ms - 99[0m
[0mPOST /api/auth/register [33m429[0m 0.703 ms - 99[0m
[0mPOST /api/auth/register [33m429[0m 0.332 ms - 99[0m
[0mPOST /api/auth/register [33m429[0m 0.333 ms - 99[0m
[0mPOST /api/auth/register [33m429[0m 0.325 ms - 99[0m
[0mPOST /api/auth/register [33m429[0m 0.743 ms - 99[0m
[0mPOST /api/auth/register [33m429[0m 0.561 ms - 99[0m
[0mPOST /api/auth/register [33m429[0m 0.665 ms - 99[0m
  console.log
    Notification sent: workflow_created for workflow WF-1768381736179-2evzi1lrt

      at log (api/routes/workflows.routes.js:516:11)

[0mPOST /api/auth/register [33m429[0m 0.692 ms - 99[0m
  console.error
    ظإî Login failed: User not found for email: logintest@example.com

    [0m [90m 111 |[39m     [36mconst[39m user [33m=[39m [36mawait[39m [33mUser[39m[33m.[39mfindOne({ email })[33m;[39m
     [90m 112 |[39m     [36mif[39m ([33m![39muser) {
    [31m[1m>[22m[39m[90m 113 |[39m       console[33m.[39merror([32m'ظإî Login failed: User not found for email:'[39m[33m,[39m email)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 114 |[39m       [36mreturn[39m res[33m.[39mstatus([35m401[39m)[33m.[39mjson({
     [90m 115 |[39m         success[33m:[39m [36mfalse[39m[33m,[39m
     [90m 116 |[39m         message[33m:[39m [32m'Invalid email or password'[39m[33m,[39m[0m

      at error (api/routes/auth.routes.js:113:15)

[0mPOST /api/auth/login [33m401[0m 9.684 ms - 55[0m
  console.log
    Notification sent: workflow_created for workflow WF-1768381736210-3lgqb9fic

      at log (api/routes/workflows.routes.js:516:11)

[0mPOST /api/auth/register [33m429[0m 0.429 ms - 99[0m
  console.log
    ≡اôإ Auth routes using In-Memory User model

      at Object.log (api/routes/auth.routes.js:9:11)

  console.log
    Notification sent: workflow_created for workflow WF-1768381736268-wux3ol04f

      at log (api/routes/workflows.routes.js:516:11)

  console.log
    Notification sent: workflow_created for workflow WF-1768381736324-kk6etdgz3

      at log (api/routes/workflows.routes.js:516:11)

  console.log
    Notification sent: stage_approve for workflow WF-1768381736324-kk6etdgz3

      at log (api/routes/workflows.routes.js:516:11)

  console.error
    ظإî Login failed: User not found for email: logintest@example.com

    [0m [90m 111 |[39m     [36mconst[39m user [33m=[39m [36mawait[39m [33mUser[39m[33m.[39mfindOne({ email })[33m;[39m
     [90m 112 |[39m     [36mif[39m ([33m![39muser) {
    [31m[1m>[22m[39m[90m 113 |[39m       console[33m.[39merror([32m'ظإî Login failed: User not found for email:'[39m[33m,[39m email)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 114 |[39m       [36mreturn[39m res[33m.[39mstatus([35m401[39m)[33m.[39mjson({
     [90m 115 |[39m         success[33m:[39m [36mfalse[39m[33m,[39m
     [90m 116 |[39m         message[33m:[39m [32m'Invalid email or password'[39m[33m,[39m[0m

      at error (api/routes/auth.routes.js:113:15)

[0mPOST /api/auth/login [33m401[0m 44.786 ms - 55[0m
[0mPOST /api/auth/register [33m429[0m 0.603 ms - 99[0m
  console.error
    ظإî Login failed: User not found for email: nonexistent@example.com

    [0m [90m 111 |[39m     [36mconst[39m user [33m=[39m [36mawait[39m [33mUser[39m[33m.[39mfindOne({ email })[33m;[39m
     [90m 112 |[39m     [36mif[39m ([33m![39muser) {
    [31m[1m>[22m[39m[90m 113 |[39m       console[33m.[39merror([32m'ظإî Login failed: User not found for email:'[39m[33m,[39m email)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 114 |[39m       [36mreturn[39m res[33m.[39mstatus([35m401[39m)[33m.[39mjson({
     [90m 115 |[39m         success[33m:[39m [36mfalse[39m[33m,[39m
     [90m 116 |[39m         message[33m:[39m [32m'Invalid email or password'[39m[33m,[39m[0m

      at error (api/routes/auth.routes.js:113:15)

[0mPOST /api/auth/login [33m401[0m 3.801 ms - 55[0m
[0mPOST /api/auth/register [33m429[0m 0.292 ms - 99[0m
[0mPOST /api/auth/login [33m400[0m 0.289 ms - 61[0m
  console.log
    Notification sent: workflow_created for workflow WF-1768381736385-q0gksxenu

      at log (api/routes/workflows.routes.js:516:11)

  console.log
    Notification sent: stage_reject for workflow WF-1768381736385-q0gksxenu

      at log (api/routes/workflows.routes.js:516:11)

[0mPOST /api/auth/register [33m429[0m 42.560 ms - 99[0m
[0mPOST /api/auth/login [33m400[0m 1.115 ms - 61[0m
[0mPOST /api/auth/register [33m429[0m 0.672 ms - 99[0m
[0mPOST /api/auth/login [33m429[0m 0.656 ms - 97[0m
[0mPOST /api/auth/register [33m429[0m 0.338 ms - 99[0m
  console.log
    Notification sent: workflow_created for workflow WF-1768381736455-aw84t47nb

      at log (api/routes/workflows.routes.js:516:11)

[0mPOST /api/auth/register [33m429[0m 0.360 ms - 99[0m
[0mPOST /api/auth/logout [33m401[0m 0.379 ms - 54[0m
  console.log
    Notification sent: stage_revise for workflow WF-1768381736455-aw84t47nb

      at log (api/routes/workflows.routes.js:516:11)

  console.log
    Notification sent: workflow_created for workflow WF-1768381736470-34ph4j787

      at log (api/routes/workflows.routes.js:516:11)

  console.log
    Notification sent: workflow_created for workflow WF-1768381736484-chu9jq5o7

      at log (api/routes/workflows.routes.js:516:11)

[0mPOST /api/auth/register [33m429[0m 0.648 ms - 99[0m
[0mPOST /api/auth/refresh [33m401[0m 0.981 ms - 55[0m
  console.log
    ≡اôإ Auth routes using In-Memory User model

      at Object.log (api/routes/auth.routes.js:9:11)

[0mPOST /api/auth/register [33m429[0m 0.664 ms - 99[0m
[0mPOST /api/auth/register [33m429[0m 0.323 ms - 99[0m
  console.log
    Notification sent: delegated for workflow WF-1768381736484-chu9jq5o7

      at log (api/routes/workflows.routes.js:516:11)

  console.log
    Notification sent: workflow_created for workflow WF-1768381736543-55fo5066m

      at log (api/routes/workflows.routes.js:516:11)

  console.log
    ≡ا» Using in-memory database (development mode)

      at log (config/database.js:14:13)

  console.log
    ≡اôإ Data will be lost when server restarts

      at log (config/database.js:15:13)

  console.log
    ظأآي╕  To use MongoDB Atlas, set USE_MOCK_DB=false in .env

      at log (config/database.js:16:13)

  console.log
    Notification sent: workflow_created for workflow WF-1768381736551-puyiyv1lz

      at log (api/routes/workflows.routes.js:516:11)

  console.log
    ظ╣ي╕  Using in-memory database - seeding skipped

      at log (server.js:346:15)

(node:10856) [MONGOOSE] Warning: Duplicate schema index 
on {"email":1} found. This is often due to declaring an 
index using both "index: true" and "schema.index()". 
Please remove the duplicate index definition.
(node:10856) [MONGOOSE] Warning: Duplicate schema index 
on {"beneficiary_id":1} found. This is often due to 
declaring an index using both "index: true" and 
"schema.index()". Please remove the duplicate index 
definition.
(node:10856) [MONGOOSE] Warning: Duplicate schema index 
on {"beneficiary_id":1} found. This is often due to 
declaring an index using both "index: true" and 
"schema.index()". Please remove the duplicate index 
definition.
(node:10856) [MONGOOSE] Warning: Duplicate schema index 
on {"program_code":1} found. This is often due to 
declaring an index using both "index: true" and 
"schema.index()". Please remove the duplicate index 
definition.
  console.log
    Notification sent: workflow_created for workflow WF-1768381736558-q7lvxi6pr

      at log (api/routes/workflows.routes.js:516:11)

  console.error
    ظإî Login failed: User not found for email: admin@alawael.com

    [0m [90m 111 |[39m     [36mconst[39m user [33m=[39m [36mawait[39m [33mUser[39m[33m.[39mfindOne({ email })[33m;[39m
     [90m 112 |[39m     [36mif[39m ([33m![39muser) {
    [31m[1m>[22m[39m[90m 113 |[39m       console[33m.[39merror([32m'ظإî Login failed: User not found for email:'[39m[33m,[39m email)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 114 |[39m       [36mreturn[39m res[33m.[39mstatus([35m401[39m)[33m.[39mjson({
     [90m 115 |[39m         success[33m:[39m [36mfalse[39m[33m,[39m
     [90m 116 |[39m         message[33m:[39m [32m'Invalid email or password'[39m[33m,[39m[0m

      at error (api/routes/auth.routes.js:113:15)

[0mPOST /api/auth/login [33m401[0m 3.220 ms - 55[0m
[0mPOST /api/auth/register [33m429[0m 0.568 ms - 99[0m
[0mPOST /api/auth/change-password [33m401[0m 0.738 ms - 54[0m
[0mPOST /api/auth/register [33m429[0m 0.589 ms - 99[0m
[0mPOST /api/auth/register [33m429[0m 0.562 ms - 99[0m
[0mPOST /api/auth/register [33m429[0m 0.290 ms - 99[0m
PASS backend/__tests__/auth.extended.test.js
  Authentication Routes - Extended Coverage
    POST /api/auth/register - Complete Coverage
      ظêأ should register successfully with valid data 
(224 ms)
      ظêأ should require fullName field (18 ms)
      ظêأ should require email field (10 ms)
      ظêأ should require password field (12 ms)
      ظêأ should reject invalid email format (6 ms)
      ظêأ should reject weak password (5 ms)
      ظêأ should prevent duplicate email registration 
(38 ms)
      ظêأ should hash password before storing (11 ms)
      ظêأ should return access token in response (9 ms)
      ظêأ should return user object without password 
(24 ms)
      ظêأ should handle empty string inputs (9 ms)
      ظêأ should handle null values (10 ms)
      ظêأ should trim whitespace from inputs (8 ms)
      ظêأ should handle very long inputs (7 ms)
      ظêأ should accept unicode names (11 ms)
    POST /api/auth/login
      ظêأ should login with correct credentials (74 ms)
      ظêأ should reject incorrect password (100 ms)
      ظêأ should reject non-existent user (17 ms)
      ظêأ should require email field (7 ms)
      ظêأ should require password field (61 ms)
      ظêأ should not expose user password in response 
(14 ms)
    POST /api/auth/logout
      ظêأ should logout authenticated user (5 ms)
      ظêأ should reject logout without token (47 ms)
    POST /api/auth/refresh
      ظêأ should refresh valid token (7 ms)
      ظêأ should reject invalid refresh token (9 ms)
    POST /api/auth/change-password
      ظêأ should change password with correct old 
password (8 ms)
      ظêأ should reject change with incorrect old 
password (4 ms)
      ظêأ should require authentication (64 ms)
    Error Handling and Security
      ظêأ should handle server errors gracefully (8 ms)
      ظêأ should not expose internal server errors (8 
ms)
      ظêأ should log security events (4 ms)

PASS backend/tests/auth.test.js
  POST /api/auth/login
    ظêأ should handle login attempt (gracefully fail in 
test mode) (64 ms)

  console.log
    Notification sent: workflow_created for workflow WF-1768381736619-gyafywvsx

      at log (api/routes/workflows.routes.js:516:11)

  console.log
    Notification sent: workflow_created for workflow WF-1768381736724-poh1f462a

      at log (api/routes/workflows.routes.js:516:11)

  console.log
    Notification sent: stage_approve for workflow WF-1768381736724-poh1f462a

      at log (api/routes/workflows.routes.js:516:11)

  console.log
    Notification sent: stage_approve for workflow WF-1768381736724-poh1f462a

      at log (api/routes/workflows.routes.js:516:11)

PASS backend/__tests__/workflows.test.js
  Advanced Workflow System Tests
    GET /api/templates
      ظêأ should return all workflow templates (21 ms)
      ظêأ should return 401 without auth token (6 ms)
    POST /api/workflows
      ظêأ should create a new workflow successfully (13 
ms)
      ظêأ should return 404 for non-existent template 
(3 ms)
    GET /api/workflows
      ظêأ should get all workflows (7 ms)
      ظêأ should filter workflows by status (7 ms)
      ظêأ should filter workflows by priority (6 ms)
    GET /api/workflows/:id
      ظêأ should get workflow details by ID (3 ms)
      ظêأ should return 404 for non-existent workflow 
(8 ms)
    POST /api/workflows/:id/approve
      ظêأ should approve workflow stage successfully 
(62 ms)
      ظêأ should reject workflow stage (68 ms)
      ظêأ should request revision (17 ms)
      ظêأ should return 400 for invalid decision (12 ms)
    POST /api/workflows/:id/delegate
      ظêأ should delegate workflow successfully (60 ms)
    GET /api/analytics
      ظêأ should return workflow analytics (54 ms)
    GET /api/audit-log
      ظêأ should return audit log (4 ms)
      ظêأ should filter audit log by workflowId (7 ms)
      ظêأ should filter audit log by action (24 ms)
    Workflow Lifecycle Integration Test
      ظêأ should complete full workflow lifecycle (123 
ms)

  console.log
    ≡ا» Using in-memory database (development mode)

      at log (config/database.js:14:13)

  console.log
    ≡اôإ Data will be lost when server restarts

      at log (config/database.js:15:13)

  console.log
    ظأآي╕  To use MongoDB Atlas, set USE_MOCK_DB=false in .env

      at log (config/database.js:16:13)

  console.log
    ظ╣ي╕  Using in-memory database - seeding skipped

      at log (server.js:346:15)

(node:2808) [MONGOOSE] Warning: Duplicate schema index 
on {"email":1} found. This is often due to declaring an 
index using both "index: true" and "schema.index()". 
Please remove the duplicate index definition.
(node:2808) [MONGOOSE] Warning: Duplicate schema index 
on {"beneficiary_id":1} found. This is often due to 
declaring an index using both "index: true" and 
"schema.index()". Please remove the duplicate index 
definition.
(node:2808) [MONGOOSE] Warning: Duplicate schema index 
on {"beneficiary_id":1} found. This is often due to 
declaring an index using both "index: true" and 
"schema.index()". Please remove the duplicate index 
definition.
(node:2808) [MONGOOSE] Warning: Duplicate schema index 
on {"program_code":1} found. This is often due to 
declaring an index using both "index: true" and 
"schema.index()". Please remove the duplicate index 
definition.
  console.error
    ظإî Login failed: User not found for email: admin@alawael.com

    [0m [90m 111 |[39m     [36mconst[39m user [33m=[39m [36mawait[39m [33mUser[39m[33m.[39mfindOne({ email })[33m;[39m
     [90m 112 |[39m     [36mif[39m ([33m![39muser) {
    [31m[1m>[22m[39m[90m 113 |[39m       console[33m.[39merror([32m'ظإî Login failed: User not found for email:'[39m[33m,[39m email)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 114 |[39m       [36mreturn[39m res[33m.[39mstatus([35m401[39m)[33m.[39mjson({
     [90m 115 |[39m         success[33m:[39m [36mfalse[39m[33m,[39m
     [90m 116 |[39m         message[33m:[39m [32m'Invalid email or password'[39m[33m,[39m[0m

      at error (api/routes/auth.routes.js:113:15)

[0mPOST /api/auth/login [33m401[0m 21.301 ms - 55[0m
PASS backend/tests/users.test.js
  GET /api/users
    ظêأ should handle users list request (gracefully 
fail without auth in test mode) (66 ms)

  console.log
    ≡ا» Using in-memory database (development mode)

      at log (config/database.js:14:13)

  console.log
    ≡اôإ Data will be lost when server restarts

      at log (config/database.js:15:13)

  console.log
    ظأآي╕  To use MongoDB Atlas, set USE_MOCK_DB=false in .env

      at log (config/database.js:16:13)

  console.log
    ظ╣ي╕  Using in-memory database - seeding skipped

      at log (server.js:346:15)

(node:17908) [MONGOOSE] Warning: Duplicate schema index 
on {"email":1} found. This is often due to declaring an 
index using both "index: true" and "schema.index()". 
Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the 
warning was created)
(node:17908) [MONGOOSE] Warning: Duplicate schema index 
on {"beneficiary_id":1} found. This is often due to 
declaring an index using both "index: true" and 
"schema.index()". Please remove the duplicate index 
definition.
(node:17908) [MONGOOSE] Warning: Duplicate schema index 
on {"beneficiary_id":1} found. This is often due to 
declaring an index using both "index: true" and 
"schema.index()". Please remove the duplicate index 
definition.
(node:17908) [MONGOOSE] Warning: Duplicate schema index 
on {"program_code":1} found. This is often due to 
declaring an index using both "index: true" and 
"schema.index()". Please remove the duplicate index 
definition.
  console.log
    ≡ا» Using in-memory database (development mode)

      at log (config/database.js:14:13)

  console.log
    ≡اôإ Data will be lost when server restarts

      at log (config/database.js:15:13)

  console.log
    ظأآي╕  To use MongoDB Atlas, set USE_MOCK_DB=false in .env

      at log (config/database.js:16:13)

  console.log
    ظ╣ي╕  Using in-memory database - seeding skipped

      at log (server.js:346:15)

(node:7544) [MONGOOSE] Warning: Duplicate schema index 
on {"email":1} found. This is often due to declaring an 
index using both "index: true" and "schema.index()". 
Please remove the duplicate index definition.
(node:7544) [MONGOOSE] Warning: Duplicate schema index 
on {"beneficiary_id":1} found. This is often due to 
declaring an index using both "index: true" and 
"schema.index()". Please remove the duplicate index 
definition.
(node:7544) [MONGOOSE] Warning: Duplicate schema index 
on {"beneficiary_id":1} found. This is often due to 
declaring an index using both "index: true" and 
"schema.index()". Please remove the duplicate index 
definition.
(node:7544) [MONGOOSE] Warning: Duplicate schema index 
on {"program_code":1} found. This is often due to 
declaring an index using both "index: true" and 
"schema.index()". Please remove the duplicate index 
definition.
[0mGET /health [32m200[0m 0.303 ms - 118[0m
PASS backend/tests/health.test.js
  GET /health
    ظêأ should return OK status (6 ms)

PASS backend/__tests__/hr.routes.expanded.test.js
  HR Routes
    GET /api/hr/
      ظêأ should return all employees with default 
pagination (216 ms)
      ظêأ should apply department filter (9 ms)
      ظêأ should apply status filter (5 ms)
      ظêأ should support search functionality (28 ms)
      ظêأ should apply pagination with limit and offset 
(9 ms)
      ظêأ should handle multiple filters together (7 ms)
      ظêأ should return empty list for no matches (7 ms)
      ظêأ should handle database errors (8 ms)
    GET /api/hr/:id
      ظêأ should return specific employee by ID (36 ms)
      ظêأ should return 404 for non-existent employee 
(5 ms)
      ظêأ should handle database errors (10 ms)
      ظêأ should return complete employee information 
(5 ms)
    GET /api/hr/analytics/summary
      ظêأ should return employee statistics (9 ms)
      ظêأ should calculate average salary (5 ms)
      ظêأ should group employees by department (21 ms)
      ظêأ should handle empty employee list (14 ms)
    POST /api/hr/
      ظêأ should create new employee (17 ms)
      ظêأ should validate required fields (3 ms)
      ظêأ should handle validation errors (28 ms)
      ظêأ should prevent duplicate emails (3 ms)
    PUT /api/hr/:id
      ظêأ should update employee information (2 ms)
      ظêأ should not update non-updatable fields (3 ms)
      ظêأ should handle 404 for non-existent employee 
(3 ms)
      ظêأ should validate updated fields (2 ms)
    DELETE /api/hr/:id
      ظêأ should delete employee (3 ms)
      ظêأ should handle 404 for non-existent employee 
(2 ms)
      ظêأ should soft-delete employee (mark as 
inactive) (2 ms)
    GET /api/hr/attendance/:employeeId
      ظêأ should return employee attendance records (3 
ms)
    GET /api/hr/leaves/:employeeId
      ظêأ should return employee leave history (2 ms)
    GET /api/hr/performance/:employeeId
      ظêأ should return employee performance data (3 ms)
    Authorization Checks
      ظêأ should require admin or hr role for employee 
list
      ظêأ should allow anyone to view their own profile
      ظêأ should restrict salary information by role (1 
ms)
    Bulk Operations
      ظêأ should support bulk employee creation (20 ms)
      ظêأ should support bulk update operations (6 ms)
    Export/Import
      ظêأ should export employees to CSV (6 ms)
      ظêأ should export employees to Excel (3 ms)
      ظêأ should import employees from file (4 ms)
    Advanced Search
      ظêأ should search by multiple fields (3 ms)
      ظêأ should filter by salary range (3 ms)
      ظêأ should sort results by field (29 ms)
    Error Handling
      ظêأ should handle server errors gracefully (7 ms)
      ظêأ should log errors appropriately (3 ms)

PASS backend/__tests__/models.test.js
  Memory Models - Employee, Attendance, Leave, Finance
    Employee Model
      ظêأ should create new employee (4 ms)
      ظêأ should find all employees (6 ms)
      ظêأ should find employee by ID (1 ms)
      ظêأ should update employee (2 ms)
      ظêأ should delete employee (3 ms)
      ظêأ should not find deleted employee (2 ms)
      ظêأ should handle non-existent employee update (1 
ms)
      ظêأ should handle non-existent employee delete (1 
ms)
    Attendance Model
      ظêأ should record attendance (2 ms)
      ظêأ should find attendance by employee (20 ms)
      ظêأ should find attendance by ID (1 ms)
      ظêأ should record checkout time (1 ms)
    Leave Model
      ظêأ should create leave request (2 ms)
      ظêأ should find leaves by employee (3 ms)
      ظêأ should find pending leaves (4 ms)
      ظêأ should approve leave request (33 ms)
      ظêأ should reject leave request (6 ms)
      ظêأ should support multiple leave types (1 ms)
    Model Operations - Edge Cases
      ظêأ should handle empty results (2 ms)
      ظêأ should handle bulk creates (12 ms)
      ظêأ should maintain data integrity (5 ms)
      ظêأ should handle concurrent operations (5 ms)
    Data Validation
      ظêأ should store all required fields (17 ms)
      ظêأ should handle date fields correctly (3 ms)
      ظêأ should assign unique IDs (18 ms)

PASS backend/__tests__/reports.routes.expanded.test.js
  Reports Routes
    GET /api/reports/employee-summary
      ظêأ should return employee summary with all 
statistics (67 ms)
      ظêأ should count total employees correctly (3 ms)
      ظêأ should group employees by department (14 ms)
      ظêأ should group employees by status (3 ms)
      ظêأ should categorize employees by salary range 
(3 ms)
      ظêأ should handle empty employee list (3 ms)
      ظêأ should handle missing salary data (5 ms)
      ظêأ should handle errors gracefully (6 ms)
    GET /api/reports/attendance-stats
      ظêأ should return attendance statistics (7 ms)
      ظêأ should filter attendance by date range (25 ms)
      ظêأ should filter attendance by department (3 ms)
      ظêأ should apply multiple filters together (4 ms)
      ظêأ should count attendance by status correctly 
(6 ms)
      ظêأ should calculate average attendance per day 
(4 ms)
      ظêأ should handle empty attendance data (2 ms)
      ظêأ should handle invalid date format (7 ms)
    GET /api/reports/leave-summary
      ظêأ should return leave summary statistics (20 ms)
      ظêأ should categorize leaves by status (8 ms)
      ظêأ should filter leaves by employee (5 ms)
      ظêأ should calculate total leave days (3 ms)
    GET /api/reports/performance
      ظêأ should return performance analytics (3 ms)
      ظêأ should handle performance calculation errors 
(2 ms)
    POST /api/reports/generate-excel
      ظêأ should generate Excel report (5 ms)
      ظêأ should handle Excel generation errors (5 ms)
    POST /api/reports/generate-pdf
      ظêأ should generate PDF report (3 ms)
    POST /api/reports/custom
      ظêأ should generate custom report with filters 
(32 ms)
      ظêأ should accept date range filter (6 ms)
      ظêأ should return validation error for missing 
type (6 ms)
    GET /api/reports/department/:deptId
      ظêأ should return report for specific department 
(5 ms)
      ظêأ should handle invalid department ID (4 ms)
    POST /api/reports/schedule
      ظêأ should schedule a new report (2 ms)
      ظêأ should validate required fields (3 ms)
    GET /api/reports/templates
      ظêأ should list available report templates (20 ms)
    GET /api/reports/templates/:templateId
      ظêأ should get specific report template (7 ms)
    GET /api/reports/export
      ظêأ should export report in specified format (3 
ms)
      ظêأ should support multiple export formats (11 ms)
      ظêأ should handle invalid format gracefully (2 ms)
    Error Handling
      ظêأ should return 401 for unauthenticated requests
      ظêأ should handle server errors gracefully (3 ms)
      ظêأ should validate query parameters (3 ms)

[0mPOST /api/ai-predictions/predict-performance [33m403[0m 6.230 ms - 50[0m
[0mGET /api/ai-predictions/predict-churn/user123 [33m403[0m 2.341 ms - 50[0m
[0mGET /api/ai-predictions/predict-behavior/user123 [33m403[0m 1.975 ms - 50[0m
[0mGET /api/ai-predictions/predict-trends/performance?timeframe=30 [33m403[0m 0.515 ms - 50[0m
PASS backend/api/tests/aiAnalytics.test.js
  AIAnalyticsService Tests
    Attendance Prediction
      ظêأ should predict attendance for next period (1 
ms)
      ظêأ should predict with historical trend
      ظêأ should forecast attendance for multiple 
periods (1 ms)
      ظêأ should handle seasonal patterns in attendance
      ظêأ should calculate prediction confidence
      ظêأ should handle missing data points
    Performance Prediction
      ظêأ should predict performance score (1 ms)
      ظêأ should identify performance factors
      ظêأ should forecast performance trend
      ظêأ should detect performance anomalies
      ظêأ should compare against baseline
      ظêأ should predict performance improvement
    Anomaly Detection
      ظêأ should detect unusual patterns (1 ms)
      ظêأ should classify anomaly severity
      ظêأ should explain anomalies
      ظêأ should detect gradual drift (1 ms)
      ظêأ should handle threshold customization
    Recommendations
      ظêأ should generate smart recommendations
      ظêأ should provide actionable recommendations
      ظêأ should rank recommendations by priority
      ظêأ should tailor recommendations to user
      ظêأ should estimate recommendation impact
      ظêأ should provide confidence in recommendations
    Trend Analysis
      ظêأ should analyze data trends
      ظêأ should identify trend inflection points
      ظêأ should calculate trend slope
      ظêأ should forecast based on trends
      ظêأ should detect seasonality (1 ms)
      ظêأ should compare trends over periods
    Model Management
      ظêأ should list available models
      ظêأ should get model information (1 ms)
      ظêأ should train custom model
      ظêأ should evaluate model performance
      ظêأ should provide model metrics
      ظêأ should handle model versioning
    Correlation Analysis
      ظêأ should find correlations between variables (1 
ms)
      ظêأ should identify strong correlations
      ظêأ should distinguish causation from correlation
    Data Quality
      ظêأ should validate data quality (1 ms)
      ظêأ should detect missing values
      ظêأ should identify outliers
    Error Handling
      ظêأ should handle empty data (1 ms)
      ظêأ should handle single data point
      ظêأ should handle all identical values
      ظêأ should handle extreme values
    Performance
      ظêأ should process large datasets efficiently (9 
ms)
      ظêأ should cache predictions
    Batch Operations
      ظêأ should process batch predictions (1 ms)
      ظêأ should handle mixed batch requests

PASS backend/api/tests/advancedSearch.test.js
  AdvancedSearchService Tests
    Basic Search Operations
      ظêأ should search by single field
      ظêأ should search by multiple fields
      ظêأ should return empty array when no matches
      ظêأ should handle case insensitive search
      ظêأ should search entire object when field is not 
specified (1 ms)
    Fuzzy Search Operations
      ظêأ should perform fuzzy search with typos
      ظêأ should handle partial matches in fuzzy search
      ظêأ should calculate similarity score (1 ms)
      ظêأ should handle empty query in fuzzy search
    Filter Operations
      ظêأ should filter by exact value
      ظêأ should filter with greater than operator
      ظêأ should filter with less than operator (1 ms)
      ظêأ should combine multiple filters (AND)
      ظêأ should filter with IN operator
      ظêأ should filter with CONTAINS operator
      ظêأ should handle date range filter (9 ms)
    Faceted Search
      ظêأ should generate facets for a field
      ظêأ should generate numeric facets with ranges
      ظêأ should handle empty facets (1 ms)
      ظêأ should apply facet filters
    Autocomplete
      ظêأ should provide autocomplete suggestions (1 ms)
      ظêأ should limit autocomplete results
      ظêأ should return unique suggestions
      ظêأ should handle special characters in 
autocomplete
    Sorting
      ظêأ should sort ascending
      ظêأ should sort descending
      ظêأ should sort strings alphabetically
      ظêأ should handle multi-field sort
    Pagination
      ظêأ should paginate results
      ظêأ should return correct page
      ظêأ should handle out of bounds page
    Compound Search
      ظêأ should perform compound search with multiple 
criteria
      ظêأ should combine search with sorting
    Search Statistics
      ظêأ should calculate search statistics (1 ms)
      ظêأ should calculate string statistics
    Export Functionality
      ظêأ should export to CSV (1 ms)
      ظêأ should export to JSON
      ظêأ should export selected fields only
    Error Handling
      ظêأ should handle null data
      ظêأ should handle undefined query
      ظêأ should handle invalid field name (1 ms)
      ظêأ should handle circular references
    Performance
      ظêأ should handle large dataset (29 ms)
      ظêأ should cache frequently used facets
    Edge Cases
      ظêأ should handle empty string search
      ظêأ should handle very long query
      ظêأ should handle special regex characters
      ظêأ should handle unicode characters (1 ms)

[0mGET /api/ai-predictions/predictions/user123 [33m403[0m 1.370 ms - 50[0m
[0mGET /api/ai-predictions/recommendations/user123 [33m403[0m 0.518 ms - 50[0m
PASS backend/tests/ai-predictions.test.js
  AI Predictions Service
    AIPredictionsService
      ظêأ ╪ز┘ê┘é╪╣ ╪د┘╪ث╪»╪د╪ة ╪ذ┘╪ش╪د╪ص (1 ms)
      ظêأ ╪ز┘ê┘é╪╣ ╪د┘╪د┘╪│╪ص╪د╪ذ ╪ذ┘╪ش╪د╪ص
      ظêأ ╪ز┘ê┘é╪╣ ╪د┘╪│┘┘ê┘â ╪ذ┘╪ش╪د╪ص (1 ms)
      ظêأ ╪ز┘ê┘é╪╣ ╪د┘╪د╪ز╪ش╪د┘ç╪د╪ز ╪ذ┘╪ش╪د╪ص (3 ms)
    AI Predictions API Endpoints
      ظêأ POST /api/ai-predictions/predict-performance 
┘à╪╣ ╪ذ┘è╪د┘╪د╪ز ╪╡╪ص┘è╪ص╪ر (253 ms)
      ظêأ GET /api/ai-predictions/predict-churn/:userId 
┘à╪╣ userId ╪╡╪ص┘è╪ص (8 ms)
      ظêأ GET 
/api/ai-predictions/predict-behavior/:userId ┘à╪╣ 
userId ╪╡╪ص┘è╪ص (10 ms)
      ظêأ GET 
/api/ai-predictions/predict-trends/:category ┘à╪╣ 
category ╪╡╪ص┘è╪ص (26 ms)
      ظêأ GET /api/ai-predictions/predictions/:userId 
┘è╪╣┘è╪» ┘é╪د╪خ┘à╪ر ╪د┘╪ز┘╪ذ╪ج╪د╪ز (9 ms)
      ظêأ GET 
/api/ai-predictions/recommendations/:userId ┘è╪╣┘è╪» 
╪د┘╪ز┘ê╪╡┘è╪د╪ز (7 ms)
    AI Service Helper Functions
      ظêأ ╪ص╪│╪د╪ذ ╪د┘┘à╪ز┘ê╪│╪╖ ╪د┘╪ص╪│╪د╪ذ┘è 
╪ذ╪┤┘â┘ ╪╡╪ص┘è╪ص (1 ms)
      ظêأ ╪ص╪│╪د╪ذ ╪د┘╪د┘╪ص╪▒╪د┘ ╪د┘┘à╪╣┘è╪د╪▒┘è (1 
ms)
      ظêأ ╪ص╪│╪د╪ذ ╪»╪▒╪ش╪ر ╪د┘╪ز┘╪د╪╣┘
      ظêأ ╪ص╪│╪د╪ذ ╪د╪ص╪ز┘à╪د┘┘è╪ر ╪د┘╪د┘╪│╪ص╪د╪ذ (1 
ms)
      ظêأ ╪د╪│╪ز╪«┘╪د╪╡ ╪د┘╪╣┘ê╪د┘à┘ ╪د┘┘à╪ج╪س╪▒╪ر 
╪ذ┘╪ش╪د╪ص (4 ms)
      ظêأ ╪ز┘ê┘┘è╪» ╪د┘╪ز┘ê╪╡┘è╪د╪ز ╪ذ┘╪د╪ة┘ï ╪╣┘┘ë 
╪»╪▒╪ش╪ر ╪د┘╪ز┘╪ذ╪ج (2 ms)
    Error Handling
      ظêأ ╪د┘╪ز╪╣╪د┘à┘ ┘à╪╣ ╪د┘╪ذ┘è╪د┘╪د╪ز 
╪د┘┘╪د╪▒╪║╪ر (1 ms)
      ظêأ ╪د┘╪ز╪╣╪د┘à┘ ┘à╪╣ userId ╪║┘è╪▒ ┘à┘ê╪ش┘ê╪»

  console.log
    ≡ا¤ْ [SECURITY] 2026-01-14T09:08:57.385Z - LOGIN_ATTEMPT { userId: 'user-1', ip: '192.168.1.1' }

      at log (utils/security.js:83:11)

  console.log
    ≡ا¤ْ [SECURITY] 2026-01-14T09:08:57.405Z - ACCESS_DENIED { userId: 'user-1' }

      at log (utils/security.js:83:11)

  console.log
    ≡ا¤ْ [SECURITY] 2026-01-14T09:08:57.408Z - SYSTEM_START {}

      at log (utils/security.js:83:11)

  console.log
    ≡ا¤ْ [SECURITY] 2026-01-14T09:08:57.409Z - SYSTEM_STOP {}

      at log (utils/security.js:83:11)

  console.log
    ≡ا¤ْ [SECURITY] 2026-01-14T09:08:57.414Z - LOGIN_ATTEMPT { test: true }

      at log (utils/security.js:83:11)
          at Array.forEach (<anonymous>)

PASS backend/__tests__/validators.test.js
  Validators
    Auth Validators
      Login Validation
        ظêأ should validate correct login credentials 
(36 ms)
        ظêأ should reject invalid email (1 ms)
        ظêأ should reject short password (1 ms)
        ظêأ should reject missing email (1 ms)
        ظêأ should reject missing password (18 ms)
        ظêأ should allow various valid email formats (3 
ms)
      Register Validation
        ظêأ should validate correct registration data
        ظêأ should require minimum password length of 8 
(1 ms)
        ظêأ should require fullName
        ظêأ should accept special characters in password
        ظêأ should accept unicode names (1 ms)
    Employee Validators
      Create Employee Validation
        ظêأ should validate correct employee data
        ظêأ should require all mandatory fields (1 ms)
        ظêأ should reject negative salary
        ظêأ should accept zero salary
    Validator Schema Structure
      ظêأ should have auth validators defined (1 ms)
      ظêأ should use Joi schemas
      ظêأ should have arabic error messages (1 ms)
    Edge Cases
      ظêأ should handle whitespace in email
      ظêأ should handle very long email addresses (1 ms)
      ظêأ should handle very long names
      ظêأ should handle empty strings
      ظêأ should handle null values (1 ms)
      ظêأ should handle undefined values
    Validator Reusability
      ظêأ should validate multiple times without 
interference (1 ms)
      ظêأ should not mutate original data (1 ms)

  console.log
    ≡ا¤ْ [SECURITY] 2026-01-14T09:08:57.414Z - LOGIN_SUCCESS { test: true }

      at log (utils/security.js:83:11)
          at Array.forEach (<anonymous>)

  console.log
    ≡ا¤ْ [SECURITY] 2026-01-14T09:08:57.415Z - LOGIN_FAILED { test: true }

      at log (utils/security.js:83:11)
          at Array.forEach (<anonymous>)

  console.log
    ≡ا¤ْ [SECURITY] 2026-01-14T09:08:57.419Z - ACCESS_DENIED { test: true }

      at log (utils/security.js:83:11)
          at Array.forEach (<anonymous>)

  console.log
    ≡ا¤ْ [SECURITY] 2026-01-14T09:08:57.421Z - REGISTRATION_ATTEMPT { test: true }

      at log (utils/security.js:83:11)
          at Array.forEach (<anonymous>)

PASS backend/api/tests/externalIntegration.test.js
  ExternalIntegrationService Tests
    Slack Integration
      ظêأ should configure Slack connection
      ظêأ should validate Slack webhook URL
      ظêأ should send Slack message
      ظêأ should handle Slack message formatting (1 ms)
      ظêأ should support Slack threads
      ظêأ should handle Slack rate limiting
      ظêأ should handle Slack connection errors
    Email Integration
      ظêأ should configure email service (1 ms)
      ظêأ should validate email address
      ظêأ should send single email (1 ms)
      ظêأ should send bulk emails
      ظêأ should handle email attachments (1 ms)
      ظêأ should support email templates
      ظêأ should retry failed emails
      ظêأ should handle email encoding
      ظêأ should track email delivery (1 ms)
    Webhook Management
      ظêأ should register webhook
      ظêأ should list registered webhooks
      ظêأ should trigger webhook (1 ms)
      ظêأ should retry failed webhook deliveries
      ظêأ should delete webhook
      ظêأ should validate webhook signature (1 ms)
      ظêأ should filter webhook events
      ظêأ should get webhook delivery history
    Connection Status & Monitoring
      ظêأ should check Slack connection (1 ms)
      ظêأ should check email connection
      ظêأ should get overall integration status
      ظêأ should monitor connection health
    Event Logging
      ظêأ should log integration events
      ظêأ should filter logs by type (1 ms)
      ظêأ should get logs with pagination
      ظêأ should clear old logs
      ظêأ should export logs
    Error Handling
      ظêأ should handle invalid configuration (1 ms)
      ظêأ should handle connection timeouts
      ظêأ should handle rate limits
      ظêأ should handle authentication errors
    Performance
      ظêأ should handle bulk email efficiently (1 ms)
      ظêأ should cache webhook configurations (2 ms)

  console.log
    ≡ا¤ْ [SECURITY] 2026-01-14T09:08:57.422Z - USER_REGISTERED { test: true }

      at log (utils/security.js:83:11)
          at Array.forEach (<anonymous>)

  console.log
    ≡ا¤ْ [SECURITY] 2026-01-14T09:08:57.445Z - PASSWORD_CHANGED { test: true }

      at log (utils/security.js:83:11)
          at Array.forEach (<anonymous>)

(node:22492) [MONGOOSE] Warning: Duplicate schema index 
on {"registrationNumber":1} found. This is often due to 
declaring an index using both "index: true" and 
"schema.index()". Please remove the duplicate index 
definition.
(node:22492) [MONGOOSE] Warning: Duplicate schema index 
on {"plateNumber":1} found. This is often due to 
declaring an index using both "index: true" and 
"schema.index()". Please remove the duplicate index 
definition.
(node:22492) [MONGOOSE] Warning: Duplicate schema index 
on {"assignedDriver":1} found. This is often due to 
declaring an index using both "index: true" and 
"schema.index()". Please remove the duplicate index 
definition.
(node:22492) [MONGOOSE] Warning: Duplicate schema index 
on {"personalInfo.nationalId":1} found. This is often 
due to declaring an index using both "index: true" and 
"schema.index()". Please remove the duplicate index 
definition.
(node:22492) [MONGOOSE] Warning: Duplicate schema index 
on {"license.licenseNumber":1} found. This is often due 
to declaring an index using both "index: true" and 
"schema.index()". Please remove the duplicate index 
definition.
PASS backend/__tests__/saudiComplianceService.test.js
  SaudiComplianceService
    Violation Codes Database
      ظêأ should have 20 violation codes (17 ms)
      ظêأ should have required fields for each 
violation code (36 ms)
      ظêأ violation codes should have valid fines (4 ms)
      ظêأ violation codes should have valid demerit 
points (3 ms)
    recordSaudiViolation
      ظêأ should record a valid violation (1 ms)
      ظêأ should reject invalid violation code
    calculateViolationSeverity
      ظêأ should return "╪ذ╪│┘è╪╖╪ر (╪║╪▒╪د┘à╪ر 
┘┘é╪╖)" for 0 points
      ظêأ should return "┘à╪ز┘ê╪│╪╖╪ر (1-3 ┘┘é╪د╪╖)" 
for 1-3 points
      ظêأ should return "╪«╪╖┘è╪▒╪ر (4-6 ┘┘é╪د╪╖)" for 
4-6 points (1 ms)
      ظêأ should return "╪┤╪»┘è╪»╪ر (7+ ┘┘é╪د╪╖)" for 
7+ points
    checkRegistrationValidity
      ظêأ should return valid for non-expired 
registration
      ظêأ should return invalid for expired 
registration (1 ms)
      ظêأ should return warning for registration 
expiring soon
    checkInsuranceValidity
      ظêأ should validate Saudi insurance providers
      ظêأ should check insurance policy types (1 ms)
    getInspectionSchedule
      ظêأ should return schedule for private vehicles
      ظêأ should return schedule for commercial vehicles
      ظêأ should return schedule for buses
    validateVehicleData
      ظêأ should validate correct vehicle data (4 ms)
      ظêأ should detect missing national ID (1 ms)
      ظêأ should validate national ID format (10 digits)
      ظêأ should calculate data completeness percentage 
(1 ms)
    calculateDaysRemaining
      ظêأ should calculate positive days for future date
      ظêأ should calculate negative days for past date
      ظêأ should return 0 for today
    Error Handling
      ظêأ should handle null vehicle gracefully
      ظêأ should handle missing dates
      ظêأ should handle invalid date formats
    Compliance Score Calculation
      ظêأ should calculate 100% score for compliant 
vehicle
      ظêأ should reduce score for violations

  console.log
    ≡ا¤ْ [SECURITY] 2026-01-14T09:08:57.446Z - UNAUTHORIZED_ACCESS { test: true }

      at log (utils/security.js:83:11)
          at Array.forEach (<anonymous>)

  console.log
    ≡ا¤ْ [SECURITY] 2026-01-14T09:08:57.451Z - SYSTEM_START { test: true }

      at log (utils/security.js:83:11)
          at Array.forEach (<anonymous>)

  console.log
    ≡ا¤ْ [SECURITY] 2026-01-14T09:08:57.452Z - SYSTEM_STOP { test: true }

      at log (utils/security.js:83:11)
          at Array.forEach (<anonymous>)

  console.log
    ≡ا¤ْ [SECURITY] 2026-01-14T09:08:57.460Z - PROFILE_UPDATED {
      userId: 'user-123',
      email: 'test@example.com',
      ip: '192.168.1.1',
      action: 'UPDATE_PROFILE',
      status: 'SUCCESS',
      timestamp: '2026-01-14T09:08:57.460Z'
    }

      at log (utils/security.js:83:11)

  console.log
    ≡ا¤ْ [SECURITY] 2026-01-14T09:08:57.461Z - USER_ACCESS_DENIED_HIGH_RISK { reason: 'Suspicious activity' }

      at log (utils/security.js:83:11)

  console.log
    ≡ا¤ْ [SECURITY] 2026-01-14T09:08:57.462Z - COMPLEX_EVENT {
      user: { id: 'user-1', email: 'test@example.com' },
      request: { method: 'POST', path: '/api/users' }
    }

      at log (utils/security.js:83:11)

  console.log
    ≡ا¤ْ [SECURITY] 2026-01-14T09:08:57.464Z - LOGIN { userId: 'user-1' }

      at log (utils/security.js:83:11)
          at Array.forEach (<anonymous>)

  console.log
    ≡ا¤ْ [SECURITY] 2026-01-14T09:08:57.465Z - LOGOUT { userId: 'user-1' }

      at log (utils/security.js:83:11)
          at Array.forEach (<anonymous>)

  console.log
    ≡ا¤ْ [SECURITY] 2026-01-14T09:08:57.467Z - ERROR { message: 'Test error' }

      at log (utils/security.js:83:11)
          at Array.forEach (<anonymous>)

PASS backend/__tests__/security-compliance.test.js
  Security & Compliance Tests
    Data Protection - Encryption
      ظêأ should encrypt sensitive data (AES-256) (2 ms)
      ظêأ should decrypt encrypted data correctly (2 ms)
      ظêأ should use different IV for each encryption
    Authentication & Authorization
      ظêأ should validate JWT tokens (115 ms)
      ظêأ should reject expired tokens (1 ms)
      ظêأ should enforce role-based access control (1 
ms)
      ظêأ should validate user permissions for 
sensitive operations
    Input Validation & Sanitization
      ظêأ should validate National ID format (10 
digits) (1 ms)
      ظêأ should validate violation codes format (2 ms)
      ظêأ should prevent SQL Injection (1 ms)
      ظêأ should prevent XSS attacks (1 ms)
      ظêأ should validate email format (1 ms)
      ظêأ should limit input length for text fields (1 
ms)
    OWASP Top 10 Prevention
      ظêأ A1: Injection - SQL parameterized queries
      ظêأ A2: Broken Authentication - Password hashing 
(1 ms)
      ظêأ A3: Sensitive Data Exposure - HTTPS/TLS
      ظêأ A4: XML External Entity (XXE) Prevention (1 
ms)
      ظêأ A5: Broken Access Control - Authorization 
checks
      ظêأ A6: Security Misconfiguration - Secure headers
      ظêأ A7: Cross-Site Scripting (XSS) Prevention (1 
ms)
      ظêأ A8: Insecure Deserialization
      ظêأ A9: Using Components with Known 
Vulnerabilities (1 ms)
      ظêأ A10: Insufficient Logging & Monitoring (51 ms)
    Audit Logging
      ظêأ should log all data access (8 ms)
      ظêأ should log data modifications
      ظêأ should log failed access attempts
      ظêأ should include IP address in audit logs (1 ms)
    GDPR Compliance
      ظêأ should track user consent
      ظêأ should support data access requests
      ظêأ should support data deletion (1 ms)
      ظêأ should maintain data retention policy
      ظêأ should log data export requests
    Rate Limiting & DoS Prevention
      ظêأ should enforce rate limits on API endpoints 
(1 ms)
      ظêأ should implement exponential backoff
      ظêأ should block repeated failed login attempts
    Secure Configuration
      ظêأ should use environment variables for secrets 
(1 ms)
      ظêأ should not expose sensitive data in logs
      ظêأ should implement CORS properly

  console.log
    ≡ا¤ْ [SECURITY] 2026-01-14T09:08:57.468Z - EVENT_0 { sequence: 0 }

      at log (utils/security.js:83:11)

  console.log
    ≡ا¤ْ [SECURITY] 2026-01-14T09:08:57.478Z - EVENT_1 { sequence: 1 }

      at log (utils/security.js:83:11)

  console.log
    ≡ا¤ْ [SECURITY] 2026-01-14T09:08:57.479Z - EVENT_2 { sequence: 2 }

      at log (utils/security.js:83:11)

  console.log
    ≡ا¤ْ [SECURITY] 2026-01-14T09:08:57.481Z - EVENT_3 { sequence: 3 }

      at log (utils/security.js:83:11)

  console.log
    ≡ا¤ْ [SECURITY] 2026-01-14T09:08:57.482Z - EVENT_4 { sequence: 4 }

      at log (utils/security.js:83:11)

PASS backend/__tests__/security.test.js
  Security Utils
    getClientIP
      ظêأ should return x-forwarded-for header if 
present (1 ms)
      ظêأ should return x-real-ip header if 
x-forwarded-for not present
      ظêأ should return req.ip if headers not present
      ظêأ should return connection remote address as 
fallback (1 ms)
      ظêأ should handle empty string headers
      ظêأ should handle multiple forwarded IPs and 
return first (1 ms)
      ظêأ should handle IPv6 addresses
      ظêأ should handle undefined connection object
    logSecurityEvent
      ظêأ should log security event with event name (21 
ms)
      ظêأ should include timestamp in ISO format (3 ms)
      ظêأ should handle empty details object (1 ms)
      ظêأ should handle undefined details (4 ms)
      ظêأ should support multiple event types (40 ms)
      ظêأ should include detailed information in logs 
(6 ms)
      ظêأ should handle special characters in event 
names (1 ms)
      ظêأ should handle nested details objects (1 ms)
    Security Event Logging - Integration
      ظêأ should log events with consistent structure 
(4 ms)
      ظêأ should handle rapid successive events (15 ms)
    IP Detection Edge Cases
      ظêأ should handle all null/undefined values 
gracefully (1 ms)
      ظêأ should handle localhost addresses (1 ms)
      ظêأ should preserve IP format (1 ms)

PASS backend/api/tests/advancedReporting.test.js
  AdvancedReportingService Tests
    Template Management
      ظêأ should create new report template (1 ms)
      ظêأ should retrieve template by ID (1 ms)
      ظêأ should update existing template
      ظêأ should delete template
      ظêأ should list all templates (33 ms)
      ظêأ should validate template structure (1 ms)
    Report Generation
      ظêأ should generate basic report (1 ms)
      ظêأ should generate report with filters (1 ms)
      ظêأ should generate report in different formats
      ظêأ should generate report with aggregations (1 
ms)
      ظêأ should include section headers in report
      ظêأ should handle empty data in report
    Report Scheduling
      ظêأ should schedule recurring report (1 ms)
      ظêأ should support different frequencies
      ظêأ should calculate next run time correctly
      ظêأ should get scheduled report details
      ظêأ should pause scheduled report
      ظêأ should resume paused schedule
      ظêأ should delete schedule (1 ms)
    Export Functionality
      ظêأ should export report to CSV (2 ms)
      ظêأ should export report to Excel (1 ms)
      ظêأ should export report to PDF
      ظêأ should export with custom filename
      ظêأ should include metadata in export (1 ms)
      ظêأ should support partial exports
    Filtering and Aggregation
      ظêأ should apply filters during report generation
      ظêأ should calculate sum aggregation
      ظêأ should calculate average aggregation
      ظêأ should calculate count aggregation (1 ms)
      ظêأ should group data for aggregation
    Charts and Visualization
      ظêأ should generate chart data for bar chart
      ظêأ should generate chart data for pie chart (1 
ms)
      ظêأ should generate chart data for line chart
      ظêأ should support chart customization
    Email Distribution
      ظêأ should send report via email
      ظêأ should send to multiple recipients (1 ms)
      ظêأ should include attachments in email
      ظêأ should support email templates
    Caching and Performance
      ظêأ should cache generated report
      ظêأ should clear report cache (1 ms)
      ظêأ should handle large dataset efficiently (79 
ms)
    Error Handling
      ظêأ should handle invalid template
      ظêأ should handle invalid data format
      ظêأ should handle missing required fields
      ظêأ should validate filter conditions
    Report History
      ظêأ should save report to history
      ظêأ should retrieve report from history (1 ms)
      ظêأ should list report history
      ظêأ should delete from history

PASS backend/api/tests/projectManagement.test.js
  ProjectManagementService Tests
    Project CRUD Operations
      ظêأ should create project (2 ms)
      ظêأ should retrieve project by ID (1 ms)
      ظêأ should update project
      ظêأ should list all projects
      ظêأ should delete project
      ظêأ should validate project data
    Phase Management
      ظêأ should add phase to project
      ظêأ should list project phases
      ظêأ should update phase
      ظêأ should delete phase
      ظêأ should calculate phase progress
    Task Management
      ظêأ should create task in project
      ظêأ should update task status
      ظêأ should list project tasks
      ظêأ should filter tasks by status
      ظêأ should assign tasks
      ظêأ should set task dependencies
      ظêأ should calculate task progress
      ظêأ should delete task
    Resource Allocation
      ظêأ should allocate resource to project
      ظêأ should get project resources (1 ms)
      ظêأ should update resource allocation
      ظêأ should check resource availability
      ظêأ should remove resource from project
    Risk Management
      ظêأ should identify project risks
      ظêأ should get risk severity
      ظêأ should update risk status
      ظêأ should list project risks
      ظêأ should delete risk
    Budget Management
      ظêأ should create project budget (1 ms)
      ظêأ should record budget expense
      ظêأ should calculate budget usage
      ظêأ should get budget report
      ظêأ should warn on budget overrun
    Project Progress & Analytics
      ظêأ should calculate project progress
      ظêأ should get project timeline (1 ms)
      ظêأ should generate project report
      ظêأ should get project health status
    Project Closure
      ظêأ should close completed project (3 ms)
      ظêأ should generate closure report (1 ms)
      ظêأ should archive closed project
    Error Handling
      ظêأ should handle invalid project data
      ظêأ should handle missing required fields
      ظêأ should prevent tasks without project
    Performance
      ظêأ should handle large number of tasks (1 ms)
      ظêأ should generate report efficiently

PASS backend/__tests__/ai.routes.expanded.test.js
  AI Routes
    GET /api/ai/predictions/attendance
      ظêأ should return attendance prediction for 
specific employee (42 ms)
      ظêأ should return predictions for all employees 
without employeeId (7 ms)
      ظêأ should handle invalid employee ID gracefully 
(25 ms)
      ظêأ should calculate risk levels correctly (6 ms)
      ظêأ should return prediction confidence score (6 
ms)
      ظêأ should handle database errors (6 ms)
    GET /api/ai/predictions/salary
      ظêأ should return salary budget prediction (6 ms)
      ظêأ should include confidence level (21 ms)
      ظêأ should return currency information (37 ms)
      ظêأ should handle missing employee data (4 ms)
    GET /api/ai/predictions/leaves
      ظêأ should return leave need predictions (3 ms)
      ظêأ should identify peak leave months (2 ms)
      ظêأ should include prediction confidence (3 ms)
      ظêأ should handle historical leave data (3 ms)
    GET /api/ai/analytics/trends
      ظêأ should return attendance trend analysis or 
404 if not implemented (3 ms)
      ظêأ should analyze performance trends or 404 (2 
ms)
      ظêأ should return leave patterns or 404 (20 ms)
      ظêأ should support time range filtering or 404 
(29 ms)
      ظêأ should filter by department or 404 (5 ms)
    GET /api/ai/performance/:employeeId
      ظêأ should return employee performance score or 
handle errors (6 ms)
      ظêأ should include performance grade or handle 
errors (4 ms)
      ظêأ should predict performance trend or handle 
errors (4 ms)
      ظêأ should handle invalid employee ID (37 ms)
    GET /api/ai/insights/employee/:employeeId
      ظêأ should return AI-generated employee insights 
or 404 (3 ms)
      ظêأ should include recommendations or 404 (37 ms)
      ظêأ should analyze behavior patterns or 404 (4 ms)
    GET /api/ai/insights/executive-summary
      ظêأ should return executive summary of all 
insights or 404 (3 ms)
      ظêأ should include critical alerts or 404 (3 ms)
    GET /api/ai/automation/suggestions
      ظêأ should suggest automation opportunities or 
404 if not implemented (2 ms)
      ظêأ should calculate time savings potential or 
404 (4 ms)
      ظêأ should filter by department or 404 (5 ms)
      ظêأ should prioritize suggestions by impact or 
404 (29 ms)
    POST /api/ai/automation/workflows
      ظêأ should create new automation workflow or 404 
(14 ms)
      ظêأ should validate workflow configuration (5 ms)
      ظêأ should handle duplicate workflow names (5 ms)
    POST /api/ai/chat
      ظêأ should respond to user query or 404 if not 
implemented (6 ms)
      ظêأ should maintain conversation context or 404 
(34 ms)
      ظêأ should handle empty messages or 404 (4 ms)
      ظêأ should validate message length or 404 (6 ms)
      ظêأ should support multiple languages or 404 (9 
ms)
    GET /api/ai/recommendations/:employeeId
      ظêأ should return personalized recommendations or 
404 if not implemented (7 ms)
      ظêأ should include recommendation reasons or 404 
(6 ms)
      ظêأ should filter recommendations by category or 
404 (6 ms)
    GET /api/ai/analytics/dashboard
      ظêأ should return comprehensive analytics 
dashboard or 404 if not implemented (21 ms)
      ظêأ should include key metrics or 404 (7 ms)
      ظêأ should support date range filtering or 404 (7 
ms)
    Error Handling
      ظêأ should handle authentication errors (1 ms)
      ظêأ should handle missing dependencies (37 ms)
      ظêأ should handle timeout scenarios (9 ms)
      ظêأ should validate query parameters (5 ms)
    Rate Limiting
      ظêأ should handle high request volume (53 ms)

PASS backend/__tests__/validation.test.js
  Validation Middleware
    Password Validation
      ظêأ should accept valid password (1 ms)
      ظêأ should reject password shorter than minimum
      ظêأ should reject password without uppercase 
letter
      ظêأ should reject password without lowercase 
letter
      ظêأ should reject password without number (1 ms)
      ظêأ should reject password without special 
character
      ظêأ should accept various special characters
      ظêأ should reject null password
      ظêأ should reject undefined password
      ظêأ should reject non-string password
      ظêأ should reject empty string password
      ظêأ should reject password exceeding maximum 
length
    Email Validation
      ظêأ should accept valid email
      ظêأ should reject invalid email format
      ظêأ should accept emails with subdomains
      ظêأ should accept emails with special characters 
(1 ms)
      ظêأ should reject email without domain
      ظêأ should reject email without local part
      ظêأ should reject null email
      ظêأ should reject undefined email
      ظêأ should handle email normalization
    Registration Validation
      ظêأ should pass validation middleware for valid 
data (1 ms)
      ظêأ should reject invalid email in registration
      ظêأ should reject weak password in registration
      ظêأ should require all registration fields
    Profile Update Validation
      ظêأ should accept valid profile update
      ظêأ should reject invalid email in profile update
    Password Change Validation
      ظêأ should validate old and new password (1 ms)
      ظêأ should require password confirmation
      ظêأ should reject mismatched passwords
    Validation Edge Cases
      ظêأ should handle null request body
      ظêأ should handle undefined request body
      ظêأ should handle extra fields in request body
    Password Policy
      ظêأ should enforce minimum length of 8 characters
      ظêأ should enforce maximum length
      ظêأ should require all policy components

PASS backend/__tests__/models.extended.test.js
  User Model Extended Tests
    ظêأ should create user with all fields (2 ms)
    ظêأ should find user by email
    ظêأ should authenticate user with correct password
    ظêأ should reject authentication with wrong 
password (16 ms)
    ظêأ should update user profile
    ظêأ should delete user (1 ms)
  Employee Model Extended Tests
    ظêأ should create employee with full information (3 
ms)
    ظêأ should find all employees with pagination
    ظêأ should find employees by department (1 ms)
    ظêأ should get total employee count
    ظêأ should update employee information (1 ms)
    ظêأ should delete employee
    ظêأ should handle bulk employee operations (1 ms)
  Attendance Model Extended Tests
    ظêأ should create attendance record
    ظêأ should find attendance by employee (1 ms)
    ظêأ should get monthly attendance statistics
    ظêأ should update attendance record
    ظêأ should delete attendance record
    ظêأ should handle bulk attendance records
  Leave Model Extended Tests
    ظêأ should create leave request (1 ms)
    ظêأ should find leave requests by employee
    ظêأ should approve leave request (1 ms)
    ظêأ should reject leave request
    ظêأ should calculate leave days (1 ms)
    ظêأ should handle overlapping leave requests
  Finance Model Extended Tests
    ظêأ should create expense record
    ظêأ should find expenses by employee (1 ms)
    ظêأ should create budget
    ظêأ should calculate budget utilization
    ظêأ should update budget
  AI Predictions Model Tests
    ظêأ should store attendance prediction
    ظêأ should store salary prediction (1 ms)
    ظêأ should store leave trend analysis (1 ms)
  Notification Model Tests
    ظêأ should create notification (14 ms)
    ظêأ should mark notification as read (3 ms)
    ظêأ should get unread notification count (6 ms)
  Data Integrity Tests
    ظêأ should maintain referential integrity for 
employee-attendance relationship (1 ms)
    ظêأ should handle null/undefined values gracefully
    ظêأ should validate data types (2 ms)
  Performance Tests
    ظêأ should handle large datasets efficiently (2 ms)
    ظêأ should cache frequently accessed data (1 ms)

PASS backend/__tests__/employee.test.js
  Employee Model
    create
      ظêأ should create a new employee (3 ms)
    findById
      ظêأ should find employee by id (4 ms)
      ظêأ should return null if not found
    findAll
      ظêأ should find all employees (4 ms)
      ظêأ should filter by department (4 ms)
    updateById
      ظêأ should update employee (2 ms)
    deleteById
      ظêأ should delete employee (3 ms)
    getTotalCount
      ظêأ should get total count by status (2 ms)

PASS backend/__tests__/logger.test.js
  Logger Utility
    Logger Methods
      ظêأ should have log method (2 ms)
      ظêأ should log messages
      ظêأ should log errors (1 ms)
      ظêأ should log warnings
      ظêأ should log info (1 ms)
    Logger with Timestamps
      ظêأ should include timestamps in logs
    Logger with Levels
      ظêأ should support different log levels (1 ms)
    Logger with Context
      ظêأ should handle objects in logs
      ظêأ should handle arrays in logs (1 ms)
    Logger Edge Cases
      ظêأ should handle empty messages
      ظêأ should handle null messages
      ظêأ should handle undefined messages
      ظêأ should handle long messages (1 ms)
      ظêأ should handle special characters
    Logger Performance
      ظêأ should handle rapid sequential logs
    Logger Formatting
      ظêأ should format log messages (1 ms)
      ظêأ should include log level in output (14 ms)
    Logger Initialization
      ظêأ should initialize without errors (1 ms)
      ظêأ should be configurable (1 ms)

PASS backend/__tests__/errorHandler.test.js
  Error Handler
    AppError Class
      ظêأ should create AppError with message and 
statusCode (4 ms)
      ظêأ should create AppError with code (1 ms)
      ظêأ should have timestamp in ISO format (1 ms)
      ظêأ should inherit from Error (1 ms)
      ظêأ should have proper error stack (22 ms)
    Global Error Handler Middleware
      ظêأ should handle AppError (2 ms)
      ظêأ should handle generic errors with default 
status 500
      ظêأ should handle validation errors
      ظêأ should handle duplicate key errors (1 ms)
      ظêأ should handle cast errors
      ظêأ should include timestamp in error response
      ظêأ should preserve success: false in all 
responses (3 ms)
    Error Response Structure
      ظêأ should have consistent error response 
structure (1 ms)
      ظêأ should include code in AppError responses (1 
ms)
      ظêأ should include errors array for validation 
errors (1 ms)
    Async Handler Wrapper
      ظêأ should execute async function successfully
      ظêأ should pass arguments to wrapped function (1 
ms)
      ظêأ should catch errors and pass to next
    Error Handling Edge Cases
      ظêأ should handle error without message (1 ms)
      ظêأ should handle error with null statusCode
      ظêأ should handle multiple validation errors
      ظêأ should handle JSON parsing errors

PASS backend/__tests__/rateLimiter.test.js
  Rate Limiting Middleware
    API Limiter Configuration
      ظêأ should have correct window size (15 ms)
      ظêأ should enforce maximum requests per window (1 
ms)
      ظêأ should return proper error message (4 ms)
    Auth Limiter Configuration
      ظêأ should have strict rate limit for auth (2 ms)
      ظêأ should skip successful requests when 
configured (1 ms)
      ظêأ should provide auth-specific message
    Password Limiter Configuration
      ظêأ should have very strict rate limit (1 ms)
      ظêأ should use 1 hour window for password 
operations
      ظêأ should limit password attempts severely (1 ms)
    Create Account Limiter Configuration
      ظêأ should limit account creation (1 ms)
      ظêأ should use 1 hour window
      ظêأ should allow 3 account creations per hour
    Rate Limiter Behavior
      ظêأ should call next when under limit (1 ms)
      ظêأ should include rate limit headers (1 ms)
      ظêأ should not use legacy headers when configured 
(1 ms)
    Rate Limit Configuration Structure
      ظêأ should have consistent structure for all 
limiters (1 ms)
      ظêأ should have proper message format
    Rate Limit Edge Cases
      ظêأ should handle IP spoofing detection (1 ms)
      ظêأ should handle multiple requests from same IP
      ظêأ should handle requests from different IPs (1 
ms)
    Rate Limit Window Sizes
      ظêأ should use 15 minutes for general API (2 ms)
      ظêأ should use 1 hour for sensitive operations (1 
ms)
      ظêأ should properly calculate milliseconds
    Rate Limit Max Requests
      ظêأ should allow 100 general API requests
      ظêأ should limit auth to 5 attempts
      ظêأ should limit password to 3 attempts (1 ms)
      ظêأ should limit account creation to 3 per hour
    Test Environment Configuration
      ظêأ should skip rate limiting in test mode
      ظêأ should apply rate limiting in production

Summary of all failing tests
FAIL __tests__/advancedArchiving.test.js
  ظù ي┐╜ي┐╜ي╕ ┘╪╕╪د┘à ╪د┘╪ث╪▒╪┤┘╪ر 
╪د┘╪ح┘┘â╪ز╪▒┘ê┘┘è╪ر ╪د┘╪░┘â┘è ظ║ ي┐╜ي┐╜ 
╪د┘╪ز╪╡┘┘è┘ ╪د┘╪░┘â┘è ظ║ ┘è╪ش╪ذ ╪ز╪╡┘┘è┘ 
╪د┘┘╪د╪ز┘ê╪▒╪ر ╪ذ╪┤┘â┘ ╪╡╪ص┘è╪ص

    expect(received).toBe(expected) // Object.is 
equality

    Expected: "FINANCIAL"
    Received: "UNCATEGORIZED"

    [0m [90m 26 |[39m       [36mconst[39m 
classification [33m=[39m 
archivingSystem[33m.[39msmartClassify(doc)[33m;[39m
     [90m 27 |[39m
    [31m[1m>[22m[39m[90m 28 |[39m       expect(cla
ssification[33m.[39mcategory)[33m.[39mtoBe([32m'FIN
ANCIAL'[39m)[33m;[39m
     [90m    |[39m                                    
   [31m[1m^[22m[39m
     [90m 29 |[39m       expect(classification[33m.[
39mconfidence)[33m.[39mtoBeGreaterThan([35m0[39m)[3
3m;[39m
     [90m 30 |[39m       expect(classification[33m.[
39micon)[33m.[39mtoBe([32m'ي┐╜ي┐╜'[39m)[33m;[39m
     [90m 31 |[39m     })[33m;[39m[0m

      at Object.toBe 
(__tests__/advancedArchiving.test.js:28:39)

  ظù ي┐╜ي┐╜ي╕ ┘╪╕╪د┘à ╪د┘╪ث╪▒╪┤┘╪ر 
╪د┘╪ح┘┘â╪ز╪▒┘ê┘┘è╪ر ╪د┘╪░┘â┘è ظ║ ي┐╜ي┐╜ 
╪د┘╪ز╪╡┘┘è┘ ╪د┘╪░┘â┘è ظ║ ┘è╪ش╪ذ ╪ز╪╡┘┘è┘ 
┘ê╪س┘è┘é╪ر ╪د┘╪╣╪د┘à┘┘è┘ ╪ذ╪┤┘â┘ ╪╡╪ص┘è╪ص

    expect(received).toBe(expected) // Object.is 
equality

    Expected: "HR"
    Received: "UNCATEGORIZED"

    [0m [90m 40 |[39m       [36mconst[39m 
classification [33m=[39m 
archivingSystem[33m.[39msmartClassify(doc)[33m;[39m
     [90m 41 |[39m
    [31m[1m>[22m[39m[90m 42 |[39m       expect(cla
ssification[33m.[39mcategory)[33m.[39mtoBe([32m'HR'
[39m)[33m;[39m
     [90m    |[39m                                    
   [31m[1m^[22m[39m
     [90m 43 |[39m       expect(classification[33m.[
39micon)[33m.[39mtoBe([32m'ي┐╜ي┐╜'[39m)[33m;[39m
     [90m 44 |[39m     })[33m;[39m
     [90m 45 |[39m[0m

      at Object.toBe 
(__tests__/advancedArchiving.test.js:42:39)

  ظù ي┐╜ي┐╜ي╕ ┘╪╕╪د┘à ╪د┘╪ث╪▒╪┤┘╪ر 
╪د┘╪ح┘┘â╪ز╪▒┘ê┘┘è╪ر ╪د┘╪░┘â┘è ظ║ ي┐╜ي┐╜ 
╪د┘╪ز╪╡┘┘è┘ ╪د┘╪░┘â┘è ظ║ ┘è╪ش╪ذ ╪ز╪╡┘┘è┘ 
╪د┘╪╣┘é╪» ╪ذ╪┤┘â┘ ╪╡╪ص┘è╪ص

    expect(received).toBe(expected) // Object.is 
equality

    Expected: "CONTRACTS"
    Received: "UNCATEGORIZED"

    [0m [90m 53 |[39m       [36mconst[39m 
classification [33m=[39m 
archivingSystem[33m.[39msmartClassify(doc)[33m;[39m
     [90m 54 |[39m
    [31m[1m>[22m[39m[90m 55 |[39m       expect(cla
ssification[33m.[39mcategory)[33m.[39mtoBe([32m'CON
TRACTS'[39m)[33m;[39m
     [90m    |[39m                                    
   [31m[1m^[22m[39m
     [90m 56 |[39m       expect(classification[33m.[
39micon)[33m.[39mtoBe([32m'ي┐╜ي┐╜'[39m)[33m;[39m
     [90m 57 |[39m     })[33m;[39m
     [90m 58 |[39m[0m

      at Object.toBe 
(__tests__/advancedArchiving.test.js:55:39)

  ظù ي┐╜ي┐╜ي╕ ┘╪╕╪د┘à ╪د┘╪ث╪▒╪┤┘╪ر 
╪د┘╪ح┘┘â╪ز╪▒┘ê┘┘è╪ر ╪د┘╪░┘â┘è ظ║ ي┐╜ي┐╜ ╪ث╪▒╪┤┘╪ر 
╪د┘┘à╪│╪ز┘╪»╪د╪ز ظ║ ┘è╪ش╪ذ ╪ث╪▒╪┤┘╪ر ╪د┘┘à╪│╪ز┘╪» 
╪ذ┘╪ش╪د╪ص

    expect(received).toBe(expected) // Object.is 
equality

    Expected: true
    Received: false

    [0m [90m 87 |[39m       [36mconst[39m result 
[33m=[39m [36mawait[39m archivingSystem[33m.[39mar
chiveDocument(doc)[33m;[39m
     [90m 88 |[39m
    [31m[1m>[22m[39m[90m 89 |[39m       expect(res
ult[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[3
3m;[39m
     [90m    |[39m                              
[31m[1m^[22m[39m
     [90m 90 |[39m       expect(result[33m.[39marchi
veId)[33m.[39mtoBeDefined()[33m;[39m
     [90m 91 |[39m       expect(result[33m.[39mcompr
ession)[33m.[39mtoBeDefined()[33m;[39m
     [90m 92 |[39m       expect(result[33m.[39mproce
ssingTime)[33m.[39mtoBeGreaterThanOrEqual([35m0[39m)
[33m;[39m[0m

      at Object.toBe 
(__tests__/advancedArchiving.test.js:89:30)

  ظù ي┐╜ي┐╜ي╕ ┘╪╕╪د┘à ╪د┘╪ث╪▒╪┤┘╪ر 
╪د┘╪ح┘┘â╪ز╪▒┘ê┘┘è╪ر ╪د┘╪░┘â┘è ظ║ ي┐╜ي┐╜ ╪ث╪▒╪┤┘╪ر 
╪د┘┘à╪│╪ز┘╪»╪د╪ز ظ║ ┘è╪ش╪ذ ╪ص┘╪╕ ╪د┘┘à╪│╪ز┘╪» 
┘┘è ╪د┘╪ث╪▒╪┤┘è┘

    expect(received).toBeDefined()

    Received: undefined

    [0m [90m 103 |[39m       [36mconst[39m archive 
[33m=[39m archivingSystem[33m.[39marchives[33m.[39
m[36mget[39m(result[33m.[39marchiveId)[33m;[39m
     [90m 104 |[39m
    [31m[1m>[22m[39m[90m 105 |[39m       
expect(archive)[33m.[39mtoBeDefined()[33m;[39m
     [90m     |[39m                       
[31m[1m^[22m[39m
     [90m 106 |[39m       expect(archive[33m.[39mnam
e)[33m.[39mtoBe([32m'╪د╪«╪ز╪ذ╪د╪▒.txt'[39m)[33m;[3
9m
     [90m 107 |[39m       expect(archive[33m.[39mmet
adata[33m.[39mcreatedAt)[33m.[39mtoBeDefined()[33m;
[39m
     [90m 108 |[39m     })[33m;[39m[0m

      at Object.toBeDefined 
(__tests__/advancedArchiving.test.js:105:23)

  ظù ي┐╜ي┐╜ي╕ ┘╪╕╪د┘à ╪د┘╪ث╪▒╪┤┘╪ر 
╪د┘╪ح┘┘â╪ز╪▒┘ê┘┘è╪ر ╪د┘╪░┘â┘è ظ║ ي┐╜ي┐╜ ╪ث╪▒╪┤┘╪ر 
╪د┘┘à╪│╪ز┘╪»╪د╪ز ظ║ ┘è╪ش╪ذ ╪ز╪│╪ش┘è┘ ╪د┘┘╪┤╪د╪╖ 
╪╣┘╪» ╪د┘╪ث╪▒╪┤┘╪ر

    expect(received).toBe(expected) // Object.is 
equality

    Expected: "ARCHIVE_CREATED"
    Received: "ARCHIVE_ERROR"

    [0m [90m 121 |[39m       expect(archivingSystem[
33m.[39mactivityLog[33m.[39mlength)[33m.[39mtoBeGre
aterThan(initialLogLength)[33m;[39m
     [90m 122 |[39m       [36mconst[39m 
lastActivity [33m=[39m archivingSystem[33m.[39mactiv
ityLog[archivingSystem[33m.[39mactivityLog[33m.[39ml
ength [33m-[39m [35m1[39m][33m;[39m
    [31m[1m>[22m[39m[90m 123 |[39m       expect(la
stActivity[33m.[39mtype)[33m.[39mtoBe([32m'ARCHIVE_
CREATED'[39m)[33m;[39m
     [90m     |[39m                                 
[31m[1m^[22m[39m
     [90m 124 |[39m     })[33m;[39m
     [90m 125 |[39m
     [90m 126 |[39m     test([32m'┘è╪ش╪ذ ╪ص╪│╪د╪ذ 
╪ز╪د╪▒┘è╪« ╪د┘╪ز┘ç╪د╪ة ╪د┘╪╡┘╪د╪ص┘è╪ر ╪ذ┘╪د╪ة┘ï 
╪╣┘┘ë ╪د┘┘╪خ╪ر'[39m[33m,[39m [36masync[39m () 
[33m=>[39m {[0m

      at Object.toBe 
(__tests__/advancedArchiving.test.js:123:33)

  ظù ي┐╜ي┐╜ي╕ ┘╪╕╪د┘à ╪د┘╪ث╪▒╪┤┘╪ر 
╪د┘╪ح┘┘â╪ز╪▒┘ê┘┘è╪ر ╪د┘╪░┘â┘è ظ║ ي┐╜ي┐╜ ╪ث╪▒╪┤┘╪ر 
╪د┘┘à╪│╪ز┘╪»╪د╪ز ظ║ ┘è╪ش╪ذ ╪ص╪│╪د╪ذ ╪ز╪د╪▒┘è╪« 
╪د┘╪ز┘ç╪د╪ة ╪د┘╪╡┘╪د╪ص┘è╪ر ╪ذ┘╪د╪ة┘ï ╪╣┘┘ë 
╪د┘┘╪خ╪ر

    TypeError: Cannot read properties of undefined 
(reading 'expirationDate')

    [0m [90m 134 |[39m       [36mconst[39m archive 
[33m=[39m archivingSystem[33m.[39marchives[33m.[39
m[36mget[39m(result[33m.[39marchiveId)[33m;[39m
     [90m 135 |[39m
    [31m[1m>[22m[39m[90m 136 |[39m       expect(ar
chive[33m.[39mexpirationDate)[33m.[39mtoBeDefined()
[33m;[39m
     [90m     |[39m                      
[31m[1m^[22m[39m
     [90m 137 |[39m       [36mconst[39m 
retentionDays [33m=[39m [33mMath[39m[33m.[39mround
((archive[33m.[39mexpirationDate [33m-[39m 
archive[33m.[39mmetadata[33m.[39mcreatedAt) 
[33m/[39m ([35m1000[39m [33m*[39m [35m60[39m 
[33m*[39m [35m60[39m [33m*[39m 
[35m24[39m))[33m;[39m
     [90m 138 |[39m       expect(retentionDays)[33m.
[39mtoBeGreaterThan([35m365[39m [33m*[39m 
[35m6[39m)[33m;[39m [90m// ╪ث┘â╪س╪▒ ┘à┘ 6 
╪│┘┘ê╪د╪ز[39m
     [90m 139 |[39m     })[33m;[39m[0m

      at Object.expirationDate 
(__tests__/advancedArchiving.test.js:136:22)

  ظù ي┐╜ي┐╜ي╕ ┘╪╕╪د┘à ╪د┘╪ث╪▒╪┤┘╪ر 
╪د┘╪ح┘┘â╪ز╪▒┘ê┘┘è╪ر ╪د┘╪░┘â┘è ظ║ ي┐╜ي┐╜ي╕ 
╪د┘╪╢╪║╪╖ ╪د┘╪░┘â┘è ظ║ ┘è╪ش╪ذ ╪╢╪║╪╖ ┘à┘┘ ┘╪╡┘è

    TypeError: The first argument must be of type 
string or an instance of Buffer, ArrayBuffer, or Array 
or an Array-like Object. Received undefined

    [0m [90m 381 |[39m
     [90m 382 |[39m     [36mreturn[39m 
[36mnew[39m [33mPromise[39m((resolve[33m,[39m 
reject) [33m=>[39m {
    [31m[1m>[22m[39m[90m 383 |[39m       
[36mconst[39m compressed [33m=[39m zlib[33m.[39mgz
ipSync([33mBuffer[39m[33m.[39m[36mfrom[39m(data))
[33m;[39m
     [90m     |[39m                                   
            [31m[1m^[22m[39m
     [90m 384 |[39m
     [90m 385 |[39m       resolve({
     [90m 386 |[39m         data[33m:[39m 
compressed[33m,[39m[0m

      at from 
(services/advancedArchivingSystem.js:383:47)
      at AdvancedArchivingSystem.intelligentCompress 
(services/advancedArchivingSystem.js:382:12)
      at Object.intelligentCompress 
(__tests__/advancedArchiving.test.js:153:48)

  ظù ي┐╜ي┐╜ي╕ ┘╪╕╪د┘à ╪د┘╪ث╪▒╪┤┘╪ر 
╪د┘╪ح┘┘â╪ز╪▒┘ê┘┘è╪ر ╪د┘╪░┘â┘è ظ║ ي┐╜ي┐╜ي╕ 
╪د┘╪╢╪║╪╖ ╪د┘╪░┘â┘è ظ║ ┘è╪ش╪ذ ╪╣╪»┘à ╪╢╪║╪╖ ┘à┘┘ 
╪╡┘ê╪▒╪ر

    TypeError: The first argument must be of type 
string or an instance of Buffer, ArrayBuffer, or Array 
or an Array-like Object. Received undefined

    [0m [90m 381 |[39m
     [90m 382 |[39m     [36mreturn[39m 
[36mnew[39m [33mPromise[39m((resolve[33m,[39m 
reject) [33m=>[39m {
    [31m[1m>[22m[39m[90m 383 |[39m       
[36mconst[39m compressed [33m=[39m zlib[33m.[39mgz
ipSync([33mBuffer[39m[33m.[39m[36mfrom[39m(data))
[33m;[39m
     [90m     |[39m                                   
            [31m[1m^[22m[39m
     [90m 384 |[39m
     [90m 385 |[39m       resolve({
     [90m 386 |[39m         data[33m:[39m 
compressed[33m,[39m[0m

      at from 
(services/advancedArchivingSystem.js:383:47)
      at AdvancedArchivingSystem.intelligentCompress 
(services/advancedArchivingSystem.js:382:12)
      at Object.intelligentCompress 
(__tests__/advancedArchiving.test.js:168:48)

  ظù ي┐╜ي┐╜ي╕ ┘╪╕╪د┘à ╪د┘╪ث╪▒╪┤┘╪ر 
╪د┘╪ح┘┘â╪ز╪▒┘ê┘┘è╪ر ╪د┘╪░┘â┘è ظ║ ي┐╜ي┐╜ي╕ 
╪د┘╪╢╪║╪╖ ╪د┘╪░┘â┘è ظ║ ┘è╪ش╪ذ ╪╣╪»┘à ╪╢╪║╪╖ ┘à┘┘ 
┘┘è╪»┘è┘ê

    TypeError: The first argument must be of type 
string or an instance of Buffer, ArrayBuffer, or Array 
or an Array-like Object. Received undefined

    [0m [90m 381 |[39m
     [90m 382 |[39m     [36mreturn[39m 
[36mnew[39m [33mPromise[39m((resolve[33m,[39m 
reject) [33m=>[39m {
    [31m[1m>[22m[39m[90m 383 |[39m       
[36mconst[39m compressed [33m=[39m zlib[33m.[39mgz
ipSync([33mBuffer[39m[33m.[39m[36mfrom[39m(data))
[33m;[39m
     [90m     |[39m                                   
            [31m[1m^[22m[39m
     [90m 384 |[39m
     [90m 385 |[39m       resolve({
     [90m 386 |[39m         data[33m:[39m 
compressed[33m,[39m[0m

      at from 
(services/advancedArchivingSystem.js:383:47)
      at AdvancedArchivingSystem.intelligentCompress 
(services/advancedArchivingSystem.js:382:12)
      at Object.intelligentCompress 
(__tests__/advancedArchiving.test.js:180:48)

  ظù ي┐╜ي┐╜ي╕ ┘╪╕╪د┘à ╪د┘╪ث╪▒╪┤┘╪ر 
╪د┘╪ح┘┘â╪ز╪▒┘ê┘┘è╪ر ╪د┘╪░┘â┘è ظ║ ي┐╜ي┐╜ي╕ 
╪د┘╪╢╪║╪╖ ╪د┘╪░┘â┘è ظ║ ┘è╪ش╪ذ ╪ز╪ص╪»┘è╪» ┘à╪│╪ز┘ê┘ë 
╪د┘╪╢╪║╪╖ ╪ذ┘╪د╪ة┘ï ╪╣┘┘ë ╪ص╪ش┘à ╪د┘┘à┘┘

    TypeError: The first argument must be of type 
string or an instance of Buffer, ArrayBuffer, or Array 
or an Array-like Object. Received undefined

    [0m [90m 381 |[39m
     [90m 382 |[39m     [36mreturn[39m 
[36mnew[39m [33mPromise[39m((resolve[33m,[39m 
reject) [33m=>[39m {
    [31m[1m>[22m[39m[90m 383 |[39m       
[36mconst[39m compressed [33m=[39m zlib[33m.[39mgz
ipSync([33mBuffer[39m[33m.[39m[36mfrom[39m(data))
[33m;[39m
     [90m     |[39m                                   
            [31m[1m^[22m[39m
     [90m 384 |[39m
     [90m 385 |[39m       resolve({
     [90m 386 |[39m         data[33m:[39m 
compressed[33m,[39m[0m

      at from 
(services/advancedArchivingSystem.js:383:47)
      at AdvancedArchivingSystem.intelligentCompress 
(services/advancedArchivingSystem.js:382:12)
      at Object.intelligentCompress 
(__tests__/advancedArchiving.test.js:192:48)

  ظù ي┐╜ي┐╜ي╕ ┘╪╕╪د┘à ╪د┘╪ث╪▒╪┤┘╪ر 
╪د┘╪ح┘┘â╪ز╪▒┘ê┘┘è╪ر ╪د┘╪░┘â┘è ظ║ ي┐╜ي┐╜ ╪د┘╪ذ╪ص╪س 
╪د┘┘à╪ز┘é╪»┘à ظ║ ┘è╪ش╪ذ ╪د┘╪╣╪س┘ê╪▒ ╪╣┘┘ë 
╪د┘┘à╪│╪ز┘╪»╪د╪ز ╪د┘┘à╪╖╪د╪ذ┘é╪ر ┘┘╪د╪│╪ز╪╣┘╪د┘à

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

    [0m [90m 231 |[39m       [36mconst[39m results 
[33m=[39m archivingSystem[33m.[39msmartSearch([32m'
┘╪د╪ز┘ê╪▒╪ر'[39m)[33m;[39m
     [90m 232 |[39m
    [31m[1m>[22m[39m[90m 233 |[39m       expect(re
sults[33m.[39mlength)[33m.[39mtoBeGreaterThan([35m0
[39m)[33m;[39m
     [90m     |[39m                              
[31m[1m^[22m[39m
     [90m 234 |[39m       expect(results[[35m0[39m]
[33m.[39marchive[33m.[39mname)[33m.[39mtoContain([
32m'┘╪د╪ز┘ê╪▒╪ر'[39m)[33m;[39m
     [90m 235 |[39m     })[33m;[39m
     [90m 236 |[39m[0m

      at Object.toBeGreaterThan 
(__tests__/advancedArchiving.test.js:233:30)

  ظù ي┐╜ي┐╜ي╕ ┘╪╕╪د┘à ╪د┘╪ث╪▒╪┤┘╪ر 
╪د┘╪ح┘┘â╪ز╪▒┘ê┘┘è╪ر ╪د┘╪░┘â┘è ظ║ ي┐╜ي┐╜ ╪د┘╪ذ╪ص╪س 
╪د┘┘à╪ز┘é╪»┘à ظ║ ┘è╪ش╪ذ ┘┘╪ز╪▒╪ر ╪د┘┘╪ز╪د╪خ╪ش 
╪ص╪│╪ذ ╪د┘┘╪خ╪ر

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

    [0m [90m 246 |[39m       [36mconst[39m results 
[33m=[39m archivingSystem[33m.[39msmartSearch([32m'
┘╪د╪ز┘ê╪▒╪ر'[39m[33m,[39m { category[33m:[39m 
[32m'FINANCIAL'[39m })[33m;[39m
     [90m 247 |[39m
    [31m[1m>[22m[39m[90m 248 |[39m       expect(re
sults[33m.[39mlength)[33m.[39mtoBeGreaterThan([35m0
[39m)[33m;[39m
     [90m     |[39m                              
[31m[1m^[22m[39m
     [90m 249 |[39m       [36mfor[39m 
([36mconst[39m result [36mof[39m results) {
     [90m 250 |[39m         expect(result[33m.[39mar
chive[33m.[39mclassification[33m.[39mcategory)[33m.
[39mtoBe([32m'FINANCIAL'[39m)[33m;[39m
     [90m 251 |[39m       }[0m

      at Object.toBeGreaterThan 
(__tests__/advancedArchiving.test.js:248:30)

  ظù ي┐╜ي┐╜ي╕ ┘╪╕╪د┘à ╪د┘╪ث╪▒╪┤┘╪ر 
╪د┘╪ح┘┘â╪ز╪▒┘ê┘┘è╪ر ╪د┘╪░┘â┘è ظ║ ي┐╜ي┐╜ 
╪د┘╪د╪│╪ز╪▒╪ش╪د╪╣ ┘ê╪د┘╪ز╪ص┘é┘é ظ║ ┘è╪ش╪ذ 
╪د╪│╪ز╪▒╪ش╪د╪╣ ╪د┘╪ث╪▒╪┤┘è┘ ╪ذ┘╪ش╪د╪ص

    expect(received).toBe(expected) // Object.is 
equality

    Expected: true
    Received: false

    [0m [90m 279 |[39m       [36mconst[39m result 
[33m=[39m [36mawait[39m archivingSystem[33m.[39mre
trieveArchive(archiveId)[33m;[39m
     [90m 280 |[39m
    [31m[1m>[22m[39m[90m 281 |[39m       expect(re
sult[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[
33m;[39m
     [90m     |[39m                              
[31m[1m^[22m[39m
     [90m 282 |[39m       expect(result[33m.[39mdata
)[33m.[39mtoBeDefined()[33m;[39m
     [90m 283 |[39m       expect(result[33m.[39mmeta
data)[33m.[39mtoBeDefined()[33m;[39m
     [90m 284 |[39m     })[33m;[39m[0m

      at Object.toBe 
(__tests__/advancedArchiving.test.js:281:30)

  ظù ي┐╜ي┐╜ي╕ ┘╪╕╪د┘à ╪د┘╪ث╪▒╪┤┘╪ر 
╪د┘╪ح┘┘â╪ز╪▒┘ê┘┘è╪ر ╪د┘╪░┘â┘è ظ║ ي┐╜ي┐╜ 
╪د┘╪د╪│╪ز╪▒╪ش╪د╪╣ ┘ê╪د┘╪ز╪ص┘é┘é ظ║ ┘è╪ش╪ذ 
╪د┘╪ز╪ص┘é┘é ┘à┘ ╪│┘╪د┘à╪ر ╪د┘╪ث╪▒╪┤┘è┘

    expect(received).toBe(expected) // Object.is 
equality

    Expected: true
    Received: false

    [0m [90m 287 |[39m       [36mconst[39m result 
[33m=[39m [36mawait[39m archivingSystem[33m.[39mre
trieveArchive(archiveId)[33m;[39m
     [90m 288 |[39m
    [31m[1m>[22m[39m[90m 289 |[39m       expect(re
sult[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[
33m;[39m
     [90m     |[39m                              
[31m[1m^[22m[39m
     [90m 290 |[39m       expect(result[33m.[39minte
grityVerified)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 291 |[39m     })[33m;[39m
     [90m 292 |[39m[0m

      at Object.toBe 
(__tests__/advancedArchiving.test.js:289:30)

  ظù ي┐╜ي┐╜ي╕ ┘╪╕╪د┘à ╪د┘╪ث╪▒╪┤┘╪ر 
╪د┘╪ح┘┘â╪ز╪▒┘ê┘┘è╪ر ╪د┘╪░┘â┘è ظ║ ي┐╜ي┐╜ 
╪د┘╪د╪│╪ز╪▒╪ش╪د╪╣ ┘ê╪د┘╪ز╪ص┘é┘é ظ║ ┘è╪ش╪ذ ╪ز╪│╪ش┘è┘ 
╪د┘┘ê╪╡┘ê┘ ╪╣┘╪» ╪د┘╪د╪│╪ز╪▒╪ش╪د╪╣

    expect(received).toBeGreaterThan(expected)

    Expected: > 1
    Received:   1

    [0m [90m 296 |[39m       [36mawait[39m archivin
gSystem[33m.[39mretrieveArchive(archiveId[33m,[39m 
{ userId[33m:[39m [32m'test_user'[39m })[33m;[39m
     [90m 297 |[39m
    [31m[1m>[22m[39m[90m 298 |[39m       expect(ar
chivingSystem[33m.[39mactivityLog[33m.[39mlength)[3
3m.[39mtoBeGreaterThan(initialLogLength)[33m;[39m
     [90m     |[39m                                   
               [31m[1m^[22m[39m
     [90m 299 |[39m     })[33m;[39m
     [90m 300 |[39m
     [90m 301 |[39m     test([32m'┘è╪ش╪ذ ╪▒┘╪╣ 
╪╣╪»╪» ╪د┘┘ê╪╡┘ê┘╪د╪ز'[39m[33m,[39m 
[36masync[39m () [33m=>[39m {[0m

      at Object.toBeGreaterThan 
(__tests__/advancedArchiving.test.js:298:50)

  ظù ي┐╜ي┐╜ي╕ ┘╪╕╪د┘à ╪د┘╪ث╪▒╪┤┘╪ر 
╪د┘╪ح┘┘â╪ز╪▒┘ê┘┘è╪ر ╪د┘╪░┘â┘è ظ║ ي┐╜ي┐╜ 
╪د┘╪د╪│╪ز╪▒╪ش╪د╪╣ ┘ê╪د┘╪ز╪ص┘é┘é ظ║ ┘è╪ش╪ذ ╪▒┘╪╣ 
╪╣╪»╪» ╪د┘┘ê╪╡┘ê┘╪د╪ز

    TypeError: Cannot read properties of undefined 
(reading 'accessLog')

    [0m [90m 301 |[39m     test([32m'┘è╪ش╪ذ ╪▒┘╪╣ 
╪╣╪»╪» ╪د┘┘ê╪╡┘ê┘╪د╪ز'[39m[33m,[39m 
[36masync[39m () [33m=>[39m {
     [90m 302 |[39m       [36mconst[39m archive 
[33m=[39m archivingSystem[33m.[39marchives[33m.[39
m[36mget[39m(archiveId)[33m;[39m
    [31m[1m>[22m[39m[90m 303 |[39m       
[36mconst[39m initialAccesses [33m=[39m 
archive[33m.[39maccessLog[33m.[39mlength[33m;[39m
     [90m     |[39m                                   
    [31m[1m^[22m[39m
     [90m 304 |[39m
     [90m 305 |[39m       [36mawait[39m archivingSys
tem[33m.[39mretrieveArchive(archiveId)[33m;[39m
     [90m 306 |[39m[0m

      at Object.accessLog 
(__tests__/advancedArchiving.test.js:303:39)

  ظù ي┐╜ي┐╜ي╕ ┘╪╕╪د┘à ╪د┘╪ث╪▒╪┤┘╪ر 
╪د┘╪ح┘┘â╪ز╪▒┘ê┘┘è╪ر ╪د┘╪░┘â┘è ظ║ ي┐╜ي┐╜ي╕ 
╪ح╪»╪د╪▒╪ر ╪د┘╪د╪ص╪ز┘╪د╪╕ ظ║ ┘è╪ش╪ذ ╪ص╪│╪د╪ذ 
╪ز╪د╪▒┘è╪« ╪د┘╪ز┘ç╪د╪ة ╪د┘╪╡┘╪د╪ص┘è╪ر ╪د┘╪╡╪ص┘è╪ص

    expect(received).toBeGreaterThan(expected)

    Matcher error: received value must be a number or 
bigint

    Received has type:  date
    Received has value: Date { NaN }

    [0m [90m 324 |[39m       })[33m;[39m
     [90m 325 |[39m
    [31m[1m>[22m[39m[90m 326 |[39m       expect(ex
pirationDate)[33m.[39mtoBeGreaterThan([36mnew[39m 
[33mDate[39m())[33m;[39m
     [90m     |[39m                              
[31m[1m^[22m[39m
     [90m 327 |[39m     })[33m;[39m
     [90m 328 |[39m
     [90m 329 |[39m     test([32m'┘è╪ش╪ذ ╪ز╪ص╪»┘è╪» 
╪د┘╪│┘è╪د╪│╪د╪ز ╪د┘┘à╪«╪ز┘┘╪ر'[39m[33m,[39m () 
[33m=>[39m {[0m

      at Object.toBeGreaterThan 
(__tests__/advancedArchiving.test.js:326:30)

  ظù ي┐╜ي┐╜ي╕ ┘╪╕╪د┘à ╪د┘╪ث╪▒╪┤┘╪ر 
╪د┘╪ح┘┘â╪ز╪▒┘ê┘┘è╪ر ╪د┘╪░┘â┘è ظ║ ي┐╜ي┐╜ي╕ 
╪ح╪»╪د╪▒╪ر ╪د┘╪د╪ص╪ز┘╪د╪╕ ظ║ ┘è╪ش╪ذ ╪ز┘╪╕┘è┘ 
╪د┘╪ث╪▒╪┤┘è┘╪د╪ز ╪د┘┘à┘╪ز┘ç┘è╪ر ╪د┘╪╡┘╪د╪ص┘è╪ر

    TypeError: Cannot set properties of undefined 
(setting 'expirationDate')

    [0m [90m 347 |[39m
     [90m 348 |[39m       [90m// ╪ز╪╣╪»┘è┘ 
╪ز╪د╪▒┘è╪« ╪د┘╪د┘╪ز┘ç╪د╪ة ┘┘è┘â┘ê┘ ┘┘è 
╪د┘┘à╪د╪╢┘è[39m
    [31m[1m>[22m[39m[90m 349 |[39m       
archive[33m.[39mexpirationDate [33m=[39m 
[36mnew[39m 
[33mDate[39m([33mDate[39m[33m.[39mnow() 
[33m-[39m [35m1000[39m)[33m;[39m
     [90m     |[39m                             
[31m[1m^[22m[39m
     [90m 350 |[39m
     [90m 351 |[39m       [36mconst[39m 
cleanupResult [33m=[39m archivingSystem[33m.[39mclea
nupExpiredArchives()[33m;[39m
     [90m 352 |[39m[0m

      at Object.<anonymous> 
(__tests__/advancedArchiving.test.js:349:29)

  ظù ي┐╜ي┐╜ي╕ ┘╪╕╪د┘à ╪د┘╪ث╪▒╪┤┘╪ر 
╪د┘╪ح┘┘â╪ز╪▒┘ê┘┘è╪ر ╪د┘╪░┘â┘è ظ║ ي┐╜ي┐╜ 
╪د┘╪ح╪ص╪╡╪د╪خ┘è╪د╪ز ظ║ ┘è╪ش╪ذ ╪ص╪│╪د╪ذ 
╪د┘╪ح╪ص╪╡╪د╪خ┘è╪د╪ز ╪ذ╪┤┘â┘ ╪╡╪ص┘è╪ص

    TypeError: Cannot read properties of undefined 
(reading 'totalArchives')

    [0m [90m 412 |[39m       [36mconst[39m stats 
[33m=[39m archivingSystem[33m.[39mgetAdvancedStatist
ics()[33m;[39m
     [90m 413 |[39m
    [31m[1m>[22m[39m[90m 414 |[39m       expect(st
ats[33m.[39mgeneralStats[33m.[39mtotalArchives)[33m
.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
     [90m     |[39m                                 
[31m[1m^[22m[39m
     [90m 415 |[39m       expect(stats[33m.[39mgener
alStats[33m.[39mtotalSize)[33m.[39mtoBeGreaterThan(
[35m0[39m)[33m;[39m
     [90m 416 |[39m       expect(stats[33m.[39mgener
alStats[33m.[39maverageCompressionRatio)[33m.[39mtoB
eGreaterThan([35m0[39m)[33m;[39m
     [90m 417 |[39m     })[33m;[39m[0m

      at Object.totalArchives 
(__tests__/advancedArchiving.test.js:414:33)

  ظù ي┐╜ي┐╜ي╕ ┘╪╕╪د┘à ╪د┘╪ث╪▒╪┤┘╪ر 
╪د┘╪ح┘┘â╪ز╪▒┘ê┘┘è╪ر ╪د┘╪░┘â┘è ظ║ ي┐╜ي┐╜ 
╪د┘╪ح╪ص╪╡╪د╪خ┘è╪د╪ز ظ║ ┘è╪ش╪ذ ╪ز╪ش┘à┘è╪╣ 
╪د┘╪ح╪ص╪╡╪د╪خ┘è╪د╪ز ╪ص╪│╪ذ ╪د┘┘╪خ╪ر

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

    [0m [90m 421 |[39m
     [90m 422 |[39m       expect(stats[33m.[39mbyCat
egory)[33m.[39mtoBeDefined()[33m;[39m
    [31m[1m>[22m[39m[90m 423 |[39m       expect([
33mObject[39m[33m.[39mkeys(stats[33m.[39mbyCategory
)[33m.[39mlength)[33m.[39mtoBeGreaterThan([35m0[39
m)[33m;[39m
     [90m     |[39m                                   
                 [31m[1m^[22m[39m
     [90m 424 |[39m     })[33m;[39m
     [90m 425 |[39m
     [90m 426 |[39m     test([32m'┘è╪ش╪ذ ╪ز╪ش┘à┘è╪╣ 
╪د┘╪ح╪ص╪╡╪د╪خ┘è╪د╪ز ╪ص╪│╪ذ 
╪د┘╪ث┘ê┘┘ê┘è╪ر'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.toBeGreaterThan 
(__tests__/advancedArchiving.test.js:423:52)

  ظù ي┐╜ي┐╜ي╕ ┘╪╕╪د┘à ╪د┘╪ث╪▒╪┤┘╪ر 
╪د┘╪ح┘┘â╪ز╪▒┘ê┘┘è╪ر ╪د┘╪░┘â┘è ظ║ ي┐╜ي┐╜ ╪│╪ش┘ 
╪د┘┘╪┤╪د╪╖╪د╪ز ظ║ ┘è╪ش╪ذ ╪ز╪│╪ش┘è┘ ╪ث┘┘ê╪د╪╣ 
┘à╪«╪ز┘┘╪ر ┘à┘ ╪د┘┘╪┤╪د╪╖╪د╪ز

    expect(received).toContain(expected) // indexOf

    Expected value: "ARCHIVE_CREATED"
    Received array: ["ARCHIVE_ERROR"]

    [0m [90m 475 |[39m       [36mconst[39m types 
[33m=[39m 
archivingSystem[33m.[39mactivityLog[33m.[39mmap(log 
[33m=>[39m log[33m.[39mtype)[33m;[39m
     [90m 476 |[39m
    [31m[1m>[22m[39m[90m 477 |[39m       expect(ty
pes)[33m.[39mtoContain([32m'ARCHIVE_CREATED'[39m)[3
3m;[39m
     [90m     |[39m                     
[31m[1m^[22m[39m
     [90m 478 |[39m       expect(types)[33m.[39mtoCo
ntain([32m'ARCHIVE_ACCESSED'[39m)[33m;[39m
     [90m 479 |[39m     })[33m;[39m
     [90m 480 |[39m   })[33m;[39m[0m

      at Object.toContain 
(__tests__/advancedArchiving.test.js:477:21)

  ظù ي┐╜ي┐╜ي╕ ┘╪╕╪د┘à ╪د┘╪ث╪▒╪┤┘╪ر 
╪د┘╪ح┘┘â╪ز╪▒┘ê┘┘è╪ر ╪د┘╪░┘â┘è ظ║ ي┐╜ي┐╜ 
╪د┘┘┘ç╪▒╪│╪ر ┘ê╪د┘╪ذ╪ص╪س ظ║ ┘è╪ش╪ذ ┘┘ç╪▒╪│╪ر 
╪د┘┘à╪│╪ز┘╪»╪د╪ز ╪ذ╪┤┘â┘ ╪╡╪ص┘è╪ص

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

    [0m [90m 493 |[39m       [36mconst[39m result 
[33m=[39m [36mawait[39m archivingSystem[33m.[39mar
chiveDocument(doc)[33m;[39m
     [90m 494 |[39m
    [31m[1m>[22m[39m[90m 495 |[39m       expect(ar
chivingSystem[33m.[39mindexer[33m.[39msize)[33m.[3
9mtoBeGreaterThan([35m0[39m)[33m;[39m
     [90m     |[39m                                   
         [31m[1m^[22m[39m
     [90m 496 |[39m     })[33m;[39m
     [90m 497 |[39m
     [90m 498 |[39m     test([32m'┘è╪ش╪ذ 
╪د┘╪ص╪╡┘ê┘ ╪╣┘┘ë ┘à╪╣┘┘ê┘à╪د╪ز 
╪د┘╪ث╪▒╪┤┘è┘'[39m[33m,[39m [36masync[39m () 
[33m=>[39m {[0m

      at Object.toBeGreaterThan 
(__tests__/advancedArchiving.test.js:495:44)

  ظù ي┐╜ي┐╜ي╕ ┘╪╕╪د┘à ╪د┘╪ث╪▒╪┤┘╪ر 
╪د┘╪ح┘┘â╪ز╪▒┘ê┘┘è╪ر ╪د┘╪░┘â┘è ظ║ ي┐╜ي┐╜ 
╪د┘┘┘ç╪▒╪│╪ر ┘ê╪د┘╪ذ╪ص╪س ظ║ ┘è╪ش╪ذ ╪د┘╪ص╪╡┘ê┘ 
╪╣┘┘ë ┘à╪╣┘┘ê┘à╪د╪ز ╪د┘╪ث╪▒╪┤┘è┘

    TypeError: Cannot read properties of null (reading 
'name')

    [0m [90m 507 |[39m
     [90m 508 |[39m       
expect(info)[33m.[39mtoBeDefined()[33m;[39m
    [31m[1m>[22m[39m[90m 509 |[39m       expect(in
fo[33m.[39mname)[33m.[39mtoBe([32m'┘ê╪س┘è┘é╪ر_┘à╪╣┘
┘ê┘à╪د╪ز.txt'[39m)[33m;[39m
     [90m     |[39m                   
[31m[1m^[22m[39m
     [90m 510 |[39m     })[33m;[39m
     [90m 511 |[39m   })[33m;[39m
     [90m 512 |[39m })[33m;[39m[0m

      at Object.name 
(__tests__/advancedArchiving.test.js:509:19)

FAIL __tests__/auth.test.js
  ظù Authentication Routes ظ║ POST /api/auth/register 
ظ║ should register a new user successfully

    expect(received).toHaveProperty(path)

    Expected path: "_id"
    Received path: []

    Received value: {"accessToken": "eyJhbGciOiJIUzI1NiI
sInR5cCI6IkpXVCJ9.eyJlbWFpbCI6InRlc3RAZXhhbXBsZS5jb20iLC
Jyb2xlIjoidXNlciIsImlhdCI6MTc2ODM4MTczNSwiZXhwIjoxNzY4OT
g2NTM1fQ.0rfCvMhctDZObTi9vcYRHdBqXPPO4OUU7i09mvBkCps", 
"user": {"email": "test@example.com", "fullName": "Test 
User", "role": "user"}}

    [0m [90m 25 |[39m       expect(res[33m.[39mstat
us)[33m.[39mtoBe([35m201[39m)[33m;[39m
     [90m 26 |[39m       expect(res[33m.[39mbody[33
m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39
m
    [31m[1m>[22m[39m[90m 27 |[39m       expect(res
[33m.[39mbody[33m.[39mdata)[33m.[39mtoHaveProperty
([32m'_id'[39m)[33m;[39m
     [90m    |[39m                             
[31m[1m^[22m[39m
     [90m 28 |[39m       expect(res[33m.[39mbody[33
m.[39mdata[33m.[39memail)[33m.[39mtoBe([32m'test@e
xample.com'[39m)[33m;[39m
     [90m 29 |[39m     })[33m;[39m
     [90m 30 |[39m[0m

      at Object.toHaveProperty 
(__tests__/auth.test.js:27:29)

  ظù Authentication Routes ظ║ POST /api/auth/register 
ظ║ should require all fields

    expect(received).toBe(expected) // Object.is 
equality

    Expected: 400
    Received: 429

    [0m [90m 54 |[39m       })[33m;[39m
     [90m 55 |[39m
    [31m[1m>[22m[39m[90m 56 |[39m       expect(res
[33m.[39mstatus)[33m.[39mtoBe([35m400[39m)[33m;[
39m
     [90m    |[39m                          
[31m[1m^[22m[39m
     [90m 57 |[39m     })[33m;[39m
     [90m 58 |[39m   })[33m;[39m
     [90m 59 |[39m[0m

      at Object.toBe (__tests__/auth.test.js:56:26)

  ظù Authentication Routes ظ║ POST /api/auth/login 
ظ║ should login successfully with correct credentials

    expect(received).toBe(expected) // Object.is 
equality

    Expected: 200
    Received: 401

    [0m [90m 74 |[39m       })[33m;[39m
     [90m 75 |[39m
    [31m[1m>[22m[39m[90m 76 |[39m       expect(res
[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[
39m
     [90m    |[39m                          
[31m[1m^[22m[39m
     [90m 77 |[39m       expect(res[33m.[39mbody[33
m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39
m
     [90m 78 |[39m       expect(res[33m.[39mbody[33
m.[39mdata)[33m.[39mtoHaveProperty([32m'accessToken'
[39m)[33m;[39m
     [90m 79 |[39m       expect(res[33m.[39mbody[33
m.[39mdata)[33m.[39mtoHaveProperty([32m'refreshToken
'[39m)[33m;[39m[0m

      at Object.toBe (__tests__/auth.test.js:76:26)

  ظù Authentication Routes ظ║ POST /api/auth/logout 
ظ║ should logout successfully

    expect(received).toBe(expected) // Object.is 
equality

    Expected: 200
    Received: 401

    [0m [90m 106 |[39m       [36mconst[39m res 
[33m=[39m [36mawait[39m request(app)[33m.[39mpost(
[32m'/api/auth/logout'[39m)[33m;[39m
     [90m 107 |[39m
    [31m[1m>[22m[39m[90m 108 |[39m       expect(re
s[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;
[39m
     [90m     |[39m                          
[31m[1m^[22m[39m
     [90m 109 |[39m       expect(res[33m.[39mbody[3
3m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[3
9m
     [90m 110 |[39m     })[33m;[39m
     [90m 111 |[39m   })[33m;[39m[0m

      at Object.toBe (__tests__/auth.test.js:108:26)

FAIL __tests__/users.test.js
  ظù User Management Routes ظ║ GET /api/users ظ║ 
should return all users for admin

    expect(received).toBe(expected) // Object.is 
equality

    Expected: 2
    Received: 0

    [0m [90m 61 |[39m         expect(res[33m.[39mbo
dy[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33
m;[39m
     [90m 62 |[39m         expect([33mArray[39m[33m
.[39misArray(res[33m.[39mbody[33m.[39mdata))[33m.
[39mtoBe([36mtrue[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 63 |[39m         expect(r
es[33m.[39mbody[33m.[39mdata[33m.[39mlength)[33m.
[39mtoBe([35m2[39m)[33m;[39m
     [90m    |[39m                                    
  [31m[1m^[22m[39m
     [90m 64 |[39m       }
     [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m[0m

      at Object.toBe (__tests__/users.test.js:63:38)

  ظù User Management Routes ظ║ POST /api/users ظ║ 
should reject duplicate email

    expect(received).toBe(expected) // Object.is 
equality

    Expected: true
    Received: false

    [0m [90m 158 |[39m       })[33m;[39m
     [90m 159 |[39m
    [31m[1m>[22m[39m[90m 160 |[39m       
expect([[35m400[39m[33m,[39m 
[35m409[39m[33m,[39m [35m500[39m][33m.[39minclud
es(res[33m.[39mstatus))[33m.[39mtoBe([36mtrue[39m)
[33m;[39m
     [90m     |[39m                                   
                 [31m[1m^[22m[39m
     [90m 161 |[39m       [36mif[39m 
(res[33m.[39mbody) {
     [90m 162 |[39m         expect(res[33m.[39mbody
[33m.[39msuccess)[33m.[39mtoBe([36mfalse[39m)[33m;
[39m
     [90m 163 |[39m       }[0m

      at Object.toBe (__tests__/users.test.js:160:52)


Test Suites: 3 failed, 1 skipped, 31 passed, 34 of 35 
total
Tests:       30 failed, 37 skipped, 894 passed, 961 
total
Snapshots:   0 total
Time:        7.326 s
Ran all test suites.
