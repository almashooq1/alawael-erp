# âš¡ Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø±ÙƒØ¨Ø§Øª ÙˆØ§Ù„Ù†Ù‚Ù„ Ø§Ù„Ù…ØªØ·ÙˆØ±

## Vehicle & Transport Management System - Quick Start Guide

---

## ğŸ“‹ Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©

Ù†Ø¸Ø§Ù… Ù…ØªÙ‚Ø¯Ù… ÙˆØ´Ø§Ù…Ù„ Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø±ÙƒØ¨Ø§Øª ÙˆØ§Ù„Ù†Ù‚Ù„ Ù…Ø¹:

- âœ… **ØªØªØ¨Ø¹ GPS ÙÙˆØ±ÙŠ** - Real-time GPS Tracking
- âœ… **ØªØ­Ø³ÙŠÙ† Ø§Ù„Ù…Ø³Ø§Ø±Ø§Øª Ø§Ù„Ø°ÙƒÙŠ** - Intelligent Route Optimization
- âœ… **Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø³Ù„Ø§Ù…Ø©** - Safety Monitoring
- âœ… **ØªØ­Ù„ÙŠÙ„ Ø³Ù„ÙˆÙƒ Ø§Ù„Ø³Ø§Ø¦Ù‚** - Driver Behavior Analysis
- âœ… **Ø¥Ø¯Ø§Ø±Ø© Ø§Ø³ØªÙ‡Ù„Ø§Ùƒ Ø§Ù„ÙˆÙ‚ÙˆØ¯** - Fuel Consumption Management

---

## ğŸš€ Ø§Ù„Ù…ÙŠØ²Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©

### 1ï¸âƒ£ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø±ÙƒØ¨Ø§Øª (Vehicle Management)

- ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù…Ø±ÙƒØ¨Ø§Øª Ø§Ù„ÙƒØ§Ù…Ù„ (Ø±Ù‚Ù… Ø§Ù„Ù…Ø±ÙƒØ¨Ø©ØŒ Ø§Ù„Ù„ÙˆØ­Ø©ØŒ Ø§Ù„Ù†ÙˆØ¹ØŒ Ø§Ù„Ø³Ø¹Ø©)
- ØªØªØ¨Ø¹ GPS ÙÙŠ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„ÙØ¹Ù„ÙŠ
- Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ø³ØªÙ‡Ù„Ø§Ùƒ Ø§Ù„ÙˆÙ‚ÙˆØ¯
- Ø¬Ø¯ÙˆÙ„Ø© Ø§Ù„ØµÙŠØ§Ù†Ø© Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠØ©
- Ø¥Ù†Ø°Ø§Ø±Ø§Øª Ø§Ù„Ø·ÙˆØ§Ø±Ø¦ (Ø­ÙˆØ§Ø¯Ø«ØŒ Ø£Ø¹Ø·Ø§Ù„ØŒ Ø³Ø±Ø¹Ø© Ø²Ø§Ø¦Ø¯Ø©)
- Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø´Ø§Ù…Ù„Ø© (Ù…Ø³Ø§ÙØ©ØŒ Ø§Ø³ØªÙ‡Ù„Ø§Ùƒ ÙˆÙ‚ÙˆØ¯ØŒ ØªÙƒØ§Ù„ÙŠÙ)

### 2ï¸âƒ£ ØªØ®Ø·ÙŠØ· Ø§Ù„Ù†Ù‚Ù„ Ø§Ù„Ø°ÙƒÙŠ (Intelligent Transport Planning)

- Ø¥Ù†Ø´Ø§Ø¡ ÙˆØ¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³Ø§Ø±Ø§Øª
- ØªØ­Ø³ÙŠÙ† Ø§Ù„Ù…Ø³Ø§Ø±Ø§Øª Ø¨Ø®ÙˆØ§Ø±Ø²Ù…ÙŠØ§Øª Ù…ØªÙ‚Ø¯Ù…Ø©:
  - Dijkstra's Algorithm (Ø£Ù‚ØµØ± Ù…Ø³Ø§Ø±)
  - Nearest Neighbor (ØªØ±ØªÙŠØ¨ Ø§Ù„Ù…Ø­Ø·Ø§Øª)
  - ØªØ­Ù„ÙŠÙ„ Ø­Ø±ÙƒØ© Ø§Ù„Ù…Ø±ÙˆØ±
  - ØªØ­Ù„ÙŠÙ„ Ø·Ù„Ø¨ Ø§Ù„Ø±ÙƒØ§Ø¨
- Ø§Ù‚ØªØ±Ø§Ø­ Ù…Ø³Ø§Ø±Ø§Øª Ø¨Ø¯ÙŠÙ„Ø©
- Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø­Ø·Ø§Øª ÙˆØ§Ù„Ø¬Ø¯Ø§ÙˆÙ„ Ø§Ù„Ø²Ù…Ù†ÙŠØ©
- ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù…Ø±ÙƒØ¨Ø§Øª ÙˆØ§Ù„Ø³Ø§Ø¦Ù‚ÙŠÙ†

### 3ï¸âƒ£ ØªØªØ¨Ø¹ Ø§Ù„Ø±Ø­Ù„Ø§Øª (Trip Tracking)

- Ø¨Ø¯Ø¡ ÙˆØ¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø±Ø­Ù„Ø§Øª ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
- ØªØ³Ø¬ÙŠÙ„ GPS Ù„Ù„Ù…Ø³Ø§Ø± Ø§Ù„ÙƒØ§Ù…Ù„
- ØªØªØ¨Ø¹ Ø§Ù„Ø±ÙƒØ§Ø¨ (ØµØ¹ÙˆØ¯/Ù†Ø²ÙˆÙ„)
- ØªØ³Ø¬ÙŠÙ„ Ø§Ù„ÙˆØµÙˆÙ„/Ø§Ù„Ù…ØºØ§Ø¯Ø±Ø© Ù„ÙƒÙ„ Ù…Ø­Ø·Ø©
- Ø­Ø³Ø§Ø¨ Ø§Ù„ØªØ£Ø®ÙŠØ± ÙˆØ§Ù„Ø§Ù†Ø­Ø±Ø§Ù
- Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø­ÙˆØ§Ø¯Ø«

### 4ï¸âƒ£ ØªØ­Ù„ÙŠÙ„ Ø³Ù„ÙˆÙƒ Ø§Ù„Ø³Ø§Ø¦Ù‚ (Driver Behavior Analysis)

- ÙƒØ´Ù Ø§Ù„Ø³Ø±Ø¹Ø© Ø§Ù„Ø²Ø§Ø¦Ø¯Ø©
- Ø±ØµØ¯ Ø§Ù„ÙØ±Ù…Ù„Ø© Ø§Ù„Ù…ÙØ§Ø¬Ø¦Ø©
- ØªØ­Ù„ÙŠÙ„ Ø§Ù„ØªØ³Ø§Ø±Ø¹
- Ø­Ø³Ø§Ø¨ ÙˆÙ‚Øª Ø§Ù„ØªÙˆÙ‚Ù (Idling)
- Ù†Ø¸Ø§Ù… ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø³Ø§Ø¦Ù‚ (0-100)
- ØªÙ‚Ø§Ø±ÙŠØ± Ø£Ø¯Ø§Ø¡ Ø§Ù„Ø³Ø§Ø¦Ù‚

### 5ï¸âƒ£ Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø³Ù„Ø§Ù…Ø© (Safety Monitoring)

- Ø¥Ù†Ø°Ø§Ø±Ø§Øª Ø·ÙˆØ§Ø±Ø¦ ÙÙˆØ±ÙŠØ©
- ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…Ù†Ø§Ø·Ù‚ Ø§Ù„Ø®Ø·Ø±Ø©
- ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø§Ù„Ø§Ù†Ø­Ø±Ø§Ù Ø¹Ù† Ø§Ù„Ù…Ø³Ø§Ø±
- Ù…Ø±Ø§Ù‚Ø¨Ø© Ø­Ø§Ù„Ø© Ø§Ù„ÙˆÙ‚ÙˆØ¯
- ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø§Ù„ØµÙŠØ§Ù†Ø©
- Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØªØ£Ù…ÙŠÙ† ÙˆØ§Ù„ÙØ­ÙˆØµØ§Øª

---

## ğŸ› ï¸ Ø§Ù„Ø¨Ù†ÙŠØ© Ø§Ù„ØªÙ‚Ù†ÙŠØ©

### Models (Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª)

```
backend/models/
â”œâ”€â”€ Vehicle.js           # Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ù…Ø±ÙƒØ¨Ø§Øª (GPSØŒ ÙˆÙ‚ÙˆØ¯ØŒ ØµÙŠØ§Ù†Ø©)
â”œâ”€â”€ TransportRoute.js    # Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ù…Ø³Ø§Ø±Ø§Øª (Ù…Ø­Ø·Ø§ØªØŒ ØªØ­Ø³ÙŠÙ†ØŒ Ø±ÙƒØ§Ø¨)
â””â”€â”€ Trip.js             # Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø±Ø­Ù„Ø§Øª (GPS trackingØŒ Ø³Ù„ÙˆÙƒ Ø§Ù„Ø³Ø§Ø¦Ù‚)
```

### Services (Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø°ÙƒÙŠØ©)

```
backend/services/
â”œâ”€â”€ routeOptimization.service.js    # Ø®ÙˆØ§Ø±Ø²Ù…ÙŠØ§Øª ØªØ­Ø³ÙŠÙ† Ø§Ù„Ù…Ø³Ø§Ø±Ø§Øª
â””â”€â”€ gpsTracking.service.js          # Ø®Ø¯Ù…Ø© GPS ÙˆØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø³Ù„ÙˆÙƒ
```

### Controllers (Ø§Ù„Ù…ØªØ­ÙƒÙ…Ø§Øª)

```
backend/controllers/
â”œâ”€â”€ vehicle.controller.js           # Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø±ÙƒØ¨Ø§Øª
â”œâ”€â”€ transportRoute.controller.js    # Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³Ø§Ø±Ø§Øª
â””â”€â”€ trip.controller.js              # Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø±Ø­Ù„Ø§Øª
```

### Routes (Ø§Ù„Ù…Ø³Ø§Ø±Ø§Øª)

```
backend/routes/
â”œâ”€â”€ vehicles.js         # API endpoints Ù„Ù„Ù…Ø±ÙƒØ¨Ø§Øª
â”œâ”€â”€ transportRoutes.js  # API endpoints Ù„Ù„Ù…Ø³Ø§Ø±Ø§Øª
â””â”€â”€ trips.js           # API endpoints Ù„Ù„Ø±Ø­Ù„Ø§Øª
```

---

## ğŸ“¡ API Endpoints

### ğŸš— Vehicle APIs

#### Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø±ÙƒØ¨Ø© Ø¬Ø¯ÙŠØ¯Ø©

```http
POST /api/vehicles
Authorization: Bearer {token}

{
  "vehicleNumber": "BUS-001",
  "plateNumber": "ABC-1234",
  "type": "bus",
  "brand": "Mercedes",
  "model": "Sprinter",
  "year": 2023,
  "capacity": {
    "passengers": 45
  },
  "fuelConsumption": {
    "fuelType": "diesel",
    "tankCapacity": 100,
    "averageConsumption": 15
  }
}
```

#### Ø¬Ù„Ø¨ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø±ÙƒØ¨Ø§Øª

```http
GET /api/vehicles?status=active&type=bus&page=1&limit=20
Authorization: Bearer {token}
```

#### ØªØ­Ø¯ÙŠØ« Ù…ÙˆÙ‚Ø¹ GPS

```http
POST /api/vehicles/:id/gps
Authorization: Bearer {token}

{
  "longitude": 46.6753,
  "latitude": 24.7136,
  "speed": 60,
  "heading": 180
}
```

#### Ø¥Ø¶Ø§ÙØ© Ø¥Ù†Ø°Ø§Ø± Ø·ÙˆØ§Ø±Ø¦

```http
POST /api/vehicles/:id/emergency
Authorization: Bearer {token}

{
  "type": "accident",
  "severity": "critical",
  "description": "Ø­Ø§Ø¯Ø« Ù…Ø±ÙˆØ±ÙŠ",
  "location": {
    "coordinates": [46.6753, 24.7136]
  }
}
```

#### ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆÙ‚ÙˆØ¯

```http
POST /api/vehicles/:id/fuel
Authorization: Bearer {token}

{
  "distance": 150,
  "refill": {
    "liters": 80,
    "cost": 240,
    "location": "Ù…Ø­Ø·Ø© ÙˆÙ‚ÙˆØ¯ - Ø§Ù„Ø±ÙŠØ§Ø¶"
  }
}
```

#### Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù…Ø±ÙƒØ¨Ø©

```http
GET /api/vehicles/:id/statistics
Authorization: Bearer {token}
```

---

### ğŸ›£ï¸ Transport Route APIs

#### Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø³Ø§Ø± Ø¬Ø¯ÙŠØ¯

```http
POST /api/transport-routes
Authorization: Bearer {token}

{
  "routeName": "Ù…Ø³Ø§Ø± Ø§Ù„Ø±ÙŠØ§Ø¶ - Ø§Ù„Ø¯Ù…Ø§Ù…",
  "routeCode": "RD-001",
  "type": "morning",
  "stops": [
    {
      "stopNumber": 1,
      "name": "Ù…Ø­Ø·Ø© Ø§Ù„Ù…Ù„Ùƒ ÙÙ‡Ø¯",
      "location": {
        "type": "Point",
        "coordinates": [46.6753, 24.7136]
      },
      "scheduledTime": "07:00",
      "estimatedDuration": 10
    }
  ],
  "schedule": {
    "operatingDays": ["sunday", "monday", "tuesday", "wednesday", "thursday"],
    "startTime": "07:00",
    "frequency": "daily"
  }
}
```

#### ØªØ­Ø³ÙŠÙ† Ø§Ù„Ù…Ø³Ø§Ø±

```http
POST /api/transport-routes/:id/optimize
Authorization: Bearer {token}

{
  "options": {
    "considerTraffic": true,
    "considerPassengerDemand": true,
    "considerFuelEfficiency": true,
    "considerTimeEfficiency": true
  }
}
```

#### Ø¥Ø¶Ø§ÙØ© Ø±Ø§ÙƒØ¨

```http
POST /api/transport-routes/:id/passengers
Authorization: Bearer {token}

{
  "userId": "user_id",
  "pickupStop": 1,
  "dropoffStop": 5,
  "preferences": {
    "wheelchair": false,
    "preferredSeat": "window"
  }
}
```

#### Ø§Ù‚ØªØ±Ø§Ø­ Ù…Ø³Ø§Ø±Ø§Øª Ø¨Ø¯ÙŠÙ„Ø©

```http
POST /api/transport-routes/:id/alternatives
Authorization: Bearer {token}

{
  "passengerNeeds": {
    "priority": "speed"
  }
}
```

---

### ğŸšŒ Trip APIs

#### Ø¥Ù†Ø´Ø§Ø¡ Ø±Ø­Ù„Ø©

```http
POST /api/trips
Authorization: Bearer {token}

{
  "tripNumber": "TRIP-20250119-001",
  "route": "route_id",
  "vehicle": "vehicle_id",
  "driver": "driver_id",
  "scheduledStartTime": "2025-01-19T07:00:00Z",
  "scheduledEndTime": "2025-01-19T09:00:00Z"
}
```

#### Ø¨Ø¯Ø¡ Ø§Ù„Ø±Ø­Ù„Ø©

```http
POST /api/trips/:id/start
Authorization: Bearer {token}

{
  "longitude": 46.6753,
  "latitude": 24.7136
}
```

#### ØªØ­Ø¯ÙŠØ« GPS

```http
POST /api/trips/:id/gps
Authorization: Bearer {token}

{
  "longitude": 46.6853,
  "latitude": 24.7236,
  "speed": 65,
  "heading": 90
}
```

#### ØªØ³Ø¬ÙŠÙ„ Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù…Ø­Ø·Ø©

```http
POST /api/trips/:id/arrive-stop
Authorization: Bearer {token}

{
  "stopNumber": 2
}
```

#### Ø§Ù„Ù…ØºØ§Ø¯Ø±Ø© Ù…Ù† Ù…Ø­Ø·Ø©

```http
POST /api/trips/:id/depart-stop
Authorization: Bearer {token}

{
  "stopNumber": 2,
  "passengersBoarded": 5,
  "passengersAlighted": 3
}
```

#### Ø¥Ø¶Ø§ÙØ© Ø­Ø§Ø¯Ø«

```http
POST /api/trips/:id/incident
Authorization: Bearer {token}

{
  "type": "delay",
  "severity": "medium",
  "description": "Ø§Ø²Ø¯Ø­Ø§Ù… Ù…Ø±ÙˆØ±ÙŠ",
  "location": {
    "coordinates": [46.6753, 24.7136]
  }
}
```

#### Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø±Ø­Ù„Ø©

```http
POST /api/trips/:id/complete
Authorization: Bearer {token}

{
  "longitude": 46.7753,
  "latitude": 24.8136
}
```

#### ØªÙ‚Ø±ÙŠØ± Ø³Ù„ÙˆÙƒ Ø§Ù„Ø³Ø§Ø¦Ù‚

```http
POST /api/trips/driver-report
Authorization: Bearer {token}

{
  "driverId": "driver_id",
  "startDate": "2025-01-01",
  "endDate": "2025-01-31"
}
```

---

## ğŸ” Ø£Ø¯ÙˆØ§Ø± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† (User Roles)

| Role        | Ø§Ù„Ù…Ø±ÙƒØ¨Ø§Øª        | Ø§Ù„Ù…Ø³Ø§Ø±Ø§Øª             | Ø§Ù„Ø±Ø­Ù„Ø§Øª            | Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± |
| ----------- | --------------- | -------------------- | ------------------ | -------- |
| **Admin**   | âœ… ÙƒÙ„ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª | âœ… ÙƒÙ„ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª      | âœ… ÙƒÙ„ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª    | âœ…       |
| **Manager** | âœ… Ø¥Ù†Ø´Ø§Ø¡/ØªØ¹Ø¯ÙŠÙ„  | âœ… Ø¥Ù†Ø´Ø§Ø¡/ØªØ¹Ø¯ÙŠÙ„/ØªØ­Ø³ÙŠÙ† | âœ… Ø¥Ù†Ø´Ø§Ø¡/Ù…Ø±Ø§Ù‚Ø¨Ø©    | âœ…       |
| **Driver**  | ğŸ”’ Ù‚Ø±Ø§Ø¡Ø© ÙÙ‚Ø·    | ğŸ”’ Ù‚Ø±Ø§Ø¡Ø© ÙÙ‚Ø·         | âœ… ØªØ­Ø¯ÙŠØ« GPS/Ù…Ø­Ø·Ø§Øª | ğŸ”’       |
| **User**    | ğŸ”’ Ù‚Ø±Ø§Ø¡Ø© ÙÙ‚Ø·    | ğŸ”’ Ù‚Ø±Ø§Ø¡Ø© ÙÙ‚Ø·         | ğŸ”’ ØªÙ‚ÙŠÙŠÙ… ÙÙ‚Ø·       | ğŸ”’       |

---

## ğŸ§ª Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù†Ø¸Ø§Ù…

### 1. ØªØ´ØºÙŠÙ„ Backend

```powershell
cd erp_new_system/backend
npm install
npm start
```

### 2. ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„

```bash
curl -X POST http://localhost:3001/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{
    "email": "admin@alawael.com",
    "password": "Admin@123456"
  }'
```

### 3. Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø±ÙƒØ¨Ø©

```bash
curl -X POST http://localhost:3001/api/vehicles \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "vehicleNumber": "BUS-001",
    "plateNumber": "ABC-1234",
    "type": "bus",
    "capacity": { "passengers": 45 }
  }'
```

### 4. ØªØªØ¨Ø¹ GPS

```bash
curl -X POST http://localhost:3001/api/vehicles/VEHICLE_ID/gps \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "longitude": 46.6753,
    "latitude": 24.7136,
    "speed": 60,
    "heading": 180
  }'
```

---

## ğŸ“Š Ù†Ù…Ø§Ø°Ø¬ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª

### Vehicle Schema

```javascript
{
  vehicleNumber: "BUS-001",
  plateNumber: "ABC-1234",
  type: "bus",
  status: "active",
  gpsDevice: {
    currentLocation: {
      type: "Point",
      coordinates: [46.6753, 24.7136]
    },
    speed: 60,
    heading: 180
  },
  fuelConsumption: {
    currentFuelLevel: 75,
    tankCapacity: 100,
    averageConsumption: 15
  },
  safety: {
    emergencyAlerts: [
      {
        type: "speeding",
        severity: "medium",
        resolved: false
      }
    ]
  },
  statistics: {
    totalDistanceCovered: 15000,
    totalFuelConsumed: 2250,
    averageSpeed: 55
  }
}
```

### TransportRoute Schema

```javascript
{
  routeName: "Ù…Ø³Ø§Ø± Ø§Ù„Ø±ÙŠØ§Ø¶ - Ø§Ù„Ø¯Ù…Ø§Ù…",
  routeCode: "RD-001",
  type: "morning",
  stops: [
    {
      stopNumber: 1,
      name: "Ù…Ø­Ø·Ø© Ø§Ù„Ù…Ù„Ùƒ ÙÙ‡Ø¯",
      location: {
        type: "Point",
        coordinates: [46.6753, 24.7136]
      },
      scheduledTime: "07:00"
    }
  ],
  optimization: {
    optimizationScore: 85,
    lastOptimized: "2025-01-19",
    suggestedChanges: [
      {
        type: "traffic_alternative",
        description: "Ø§Ù‚ØªØ±Ø§Ø­ Ù…Ø³Ø§Ø± Ø¨Ø¯ÙŠÙ„",
        estimatedImprovement: 15
      }
    ]
  },
  statistics: {
    totalTrips: 120,
    completedTrips: 115,
    onTimePercentage: 92
  }
}
```

### Trip Schema

```javascript
{
  tripNumber: "TRIP-20250119-001",
  status: "in_progress",
  gpsTracking: [
    {
      timestamp: "2025-01-19T07:15:00Z",
      location: {
        type: "Point",
        coordinates: [46.6853, 24.7236]
      },
      speed: 65,
      heading: 90
    }
  ],
  driverBehavior: {
    score: 88,
    speedingIncidents: 1,
    harshBrakingCount: 2,
    maxSpeed: 95
  },
  fuelData: {
    consumed: 12.5,
    efficiency: 8.2
  },
  incidents: [
    {
      type: "delay",
      severity: "medium",
      description: "Ø§Ø²Ø¯Ø­Ø§Ù… Ù…Ø±ÙˆØ±ÙŠ"
    }
  ]
}
```

---

## ğŸ¯ Ø®ÙˆØ§Ø±Ø²Ù…ÙŠØ§Øª Ø§Ù„ØªØ­Ø³ÙŠÙ†

### 1. Dijkstra's Algorithm

- Ø­Ø³Ø§Ø¨ Ø£Ù‚ØµØ± Ù…Ø³Ø§Ø± Ø¨ÙŠÙ† Ø§Ù„Ù…Ø­Ø·Ø§Øª
- ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…Ø³Ø§ÙØ© Ø§Ù„ÙƒÙ„ÙŠØ©
- ØªØ­Ø³ÙŠÙ† Ø§Ù„ÙˆÙ‚Øª ÙˆØ§Ù„ÙˆÙ‚ÙˆØ¯

### 2. Nearest Neighbor

- ØªØ±ØªÙŠØ¨ Ø§Ù„Ù…Ø­Ø·Ø§Øª Ø¨ÙƒÙØ§Ø¡Ø©
- ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ù…Ø³Ø§ÙØ© Ø§Ù„ÙƒÙ„ÙŠØ©
- ØªØ­Ø³ÙŠÙ† ØªØ³Ù„Ø³Ù„ Ø§Ù„ØªÙˆÙ‚ÙØ§Øª

### 3. Traffic Analysis

- Ø±ØµØ¯ Ø­Ø±ÙƒØ© Ø§Ù„Ù…Ø±ÙˆØ±
- ØªØ¬Ù†Ø¨ Ø§Ù„Ø§Ø²Ø¯Ø­Ø§Ù…
- ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…ÙˆØ§Ø¹ÙŠØ¯

### 4. Passenger Demand

- ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø¥Ø´ØºØ§Ù„
- Ø¯Ù…Ø¬/ÙØµÙ„ Ø§Ù„Ù…Ø³Ø§Ø±Ø§Øª
- ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø³Ø¹Ø©

### 5. Fuel Efficiency

- ØªÙ‚Ù„ÙŠÙ„ Ø¹Ø¯Ø¯ Ø§Ù„ØªÙˆÙ‚ÙØ§Øª
- ØªØ­Ø³ÙŠÙ† Ø§Ù„Ù…Ø³Ø§ÙØ©
- ØªÙˆÙÙŠØ± Ø§Ù„ÙˆÙ‚ÙˆØ¯

---

## ğŸ“ˆ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± ÙˆØ§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª

### ØªÙ‚Ø±ÙŠØ± Ø³Ù„ÙˆÙƒ Ø§Ù„Ø³Ø§Ø¦Ù‚

```javascript
{
  driver: { name: "Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯" },
  period: { startDate: "2025-01-01", endDate: "2025-01-31" },
  totalTrips: 60,
  completedTrips: 58,
  totalDistance: 4500,
  averageScore: 88,
  incidents: {
    speeding: 5,
    harshBraking: 12,
    accidents: 0
  },
  fuelEfficiency: 8.5,
  safetyRating: 92
}
```

### Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù…Ø±ÙƒØ¨Ø©

```javascript
{
  performance: {
    totalDistance: 15000,
    averageSpeed: 55,
    totalTrips: 120
  },
  fuel: {
    currentLevel: 75,
    totalConsumed: 2250,
    averageConsumption: 15
  },
  maintenance: {
    status: "good",
    nextDate: "2025-02-15"
  },
  safety: {
    activeAlerts: 0,
    totalIncidents: 3
  }
}
```

---

## ğŸ”” Ø¥Ù†Ø°Ø§Ø±Ø§Øª Ø§Ù„Ø³Ù„Ø§Ù…Ø©

### Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø¥Ù†Ø°Ø§Ø±Ø§Øª

1. **Critical Speed** - Ø³Ø±Ø¹Ø© Ø®Ø·ÙŠØ±Ø© (>120 km/h)
2. **Low Fuel** - ÙˆÙ‚ÙˆØ¯ Ù…Ù†Ø®ÙØ¶ (<10%)
3. **Maintenance Overdue** - ØµÙŠØ§Ù†Ø© Ù…ØªØ£Ø®Ø±Ø©
4. **Route Deviation** - Ø§Ù†Ø­Ø±Ø§Ù Ø¹Ù† Ø§Ù„Ù…Ø³Ø§Ø± (>500m)
5. **Dangerous Zone** - Ù…Ù†Ø·Ù‚Ø© Ø®Ø·Ø±Ø©
6. **Accident** - Ø­Ø§Ø¯Ø«
7. **Breakdown** - Ø¹Ø·Ù„

### Ù…Ø³ØªÙˆÙŠØ§Øª Ø§Ù„Ø®Ø·ÙˆØ±Ø©

- ğŸ”´ **Critical** - ØªØ¯Ø®Ù„ ÙÙˆØ±ÙŠ
- ğŸŸ  **High** - Ù…Ø±Ø§Ù‚Ø¨Ø© Ø¯Ù‚ÙŠÙ‚Ø©
- ğŸŸ¡ **Medium** - Ø§Ù†ØªØ¨Ø§Ù‡ Ù…Ø·Ù„ÙˆØ¨
- ğŸŸ¢ **Low** - Ù…Ø¹Ù„ÙˆÙ…Ø§Øª ÙÙ‚Ø·

---

## ğŸš¦ Ø­Ø§Ù„Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…

### Ø­Ø§Ù„Ø§Øª Ø§Ù„Ù…Ø±ÙƒØ¨Ø©

- âœ… **Active** - Ù†Ø´Ø·Ø©
- ğŸ”§ **Maintenance** - ØµÙŠØ§Ù†Ø©
- â¸ï¸ **Inactive** - Ù…Ø¹Ø·Ù„Ø©
- ğŸš¨ **Emergency** - Ø·ÙˆØ§Ø±Ø¦

### Ø­Ø§Ù„Ø§Øª Ø§Ù„Ù…Ø³Ø§Ø±

- âœ… **Active** - Ù†Ø´Ø·
- â¸ï¸ **Inactive** - ØºÙŠØ± Ù†Ø´Ø·
- â³ **Suspended** - Ù…Ø¹Ù„Ù‚
- ğŸ”§ **Maintenance** - ØµÙŠØ§Ù†Ø©

### Ø­Ø§Ù„Ø§Øª Ø§Ù„Ø±Ø­Ù„Ø©

- ğŸ“… **Scheduled** - Ù…Ø¬Ø¯ÙˆÙ„Ø©
- ğŸšŒ **In Progress** - Ø¬Ø§Ø±ÙŠØ©
- âœ… **Completed** - Ù…ÙƒØªÙ…Ù„Ø©
- âŒ **Cancelled** - Ù…Ù„ØºØ§Ø©
- â° **Delayed** - Ù…ØªØ£Ø®Ø±Ø©

---

## ğŸ’¾ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª

### Geospatial Indexes

```javascript
// Vehicle GPS Index
{
  "gpsDevice.currentLocation": "2dsphere"
}

// Route Stops Index
{
  "stops.location": "2dsphere"
}

// Trip GPS Tracking Index
{
  "gpsTracking.location": "2dsphere"
}
```

### Performance Indexes

```javascript
// Vehicle Lookup
{ vehicleNumber: 1 }
{ plateNumber: 1 }
{ status: 1 }

// Route Lookup
{ routeCode: 1 }
{ type: 1, status: 1 }

// Trip Lookup
{ tripNumber: 1 }
{ status: 1 }
{ scheduledStartTime: 1 }
```

---

## ğŸ“ Ø£Ù…Ø«Ù„Ø© Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…

### Ù…Ø«Ø§Ù„ 1: Ø¥Ù†Ø´Ø§Ø¡ Ø±Ø­Ù„Ø© ÙƒØ§Ù…Ù„Ø©

```javascript
// 1. Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø±ÙƒØ¨Ø©
POST /api/vehicles
{ vehicleNumber: "BUS-001", ... }

// 2. Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø³Ø§Ø±
POST /api/transport-routes
{ routeName: "Ù…Ø³Ø§Ø± Ø§Ù„ØµØ¨Ø§Ø­", stops: [...] }

// 3. ØªØ­Ø³ÙŠÙ† Ø§Ù„Ù…Ø³Ø§Ø±
POST /api/transport-routes/:id/optimize
{ options: { considerTraffic: true } }

// 4. ØªØ¹ÙŠÙŠÙ† Ù…Ø±ÙƒØ¨Ø© ÙˆØ³Ø§Ø¦Ù‚
POST /api/transport-routes/:id/assign-vehicle
{ vehicleId: "..." }

// 5. Ø¥Ù†Ø´Ø§Ø¡ Ø±Ø­Ù„Ø©
POST /api/trips
{ route: "...", vehicle: "...", driver: "..." }

// 6. Ø¨Ø¯Ø¡ Ø§Ù„Ø±Ø­Ù„Ø©
POST /api/trips/:id/start
{ longitude: 46.6753, latitude: 24.7136 }

// 7. ØªØ­Ø¯ÙŠØ« GPS Ø·ÙˆØ§Ù„ Ø§Ù„Ø±Ø­Ù„Ø©
POST /api/trips/:id/gps
{ longitude: ..., latitude: ..., speed: ... }

// 8. ØªØ³Ø¬ÙŠÙ„ Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ù…Ø­Ø·Ø§Øª
POST /api/trips/:id/arrive-stop
{ stopNumber: 1 }

// 9. Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø±Ø­Ù„Ø©
POST /api/trips/:id/complete
{ longitude: 46.7753, latitude: 24.8136 }

// 10. Ø¹Ø±Ø¶ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
GET /api/trips/:id/statistics
```

### Ù…Ø«Ø§Ù„ 2: Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø³Ù„Ø§Ù…Ø©

```javascript
// Ø±ØµØ¯ Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø§Ù„ÙÙˆØ±ÙŠØ©
GET /api/vehicles/:id/statistics

// Ø¥Ø¶Ø§ÙØ© Ø¥Ù†Ø°Ø§Ø± Ø·ÙˆØ§Ø±Ø¦
POST /api/vehicles/:id/emergency
{
  type: "accident",
  severity: "critical",
  description: "Ø­Ø§Ø¯Ø« Ù…Ø±ÙˆØ±ÙŠ Ø®Ø·ÙŠØ±"
}

// ØªØ­Ù„ÙŠÙ„ Ø³Ù„ÙˆÙƒ Ø§Ù„Ø³Ø§Ø¦Ù‚
GET /api/trips/:id/behavior-analysis

// ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø³Ø§Ø¦Ù‚ Ø§Ù„Ø´Ù‡Ø±ÙŠ
POST /api/trips/driver-report
{
  driverId: "...",
  startDate: "2025-01-01",
  endDate: "2025-01-31"
}
```

---

## ğŸ‰ Ø§Ù„Ù†Ø¸Ø§Ù… Ø¬Ø§Ù‡Ø² Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…!

âœ… **Models** - 3 Ù†Ù…Ø§Ø°Ø¬ Ø´Ø§Ù…Ù„Ø©  
âœ… **Services** - 2 Ø®Ø¯Ù…Ø§Øª Ø°ÙƒÙŠØ©  
âœ… **Controllers** - 3 Ù…ØªØ­ÙƒÙ…Ø§Øª Ù…ØªØ·ÙˆØ±Ø©  
âœ… **Routes** - 3 Ù…Ù„ÙØ§Øª Ù…Ø³Ø§Ø±Ø§Øª Ù…Ø¹ 40+ endpoint  
âœ… **Integration** - Ø¯Ù…Ø¬ ÙƒØ§Ù…Ù„ Ù…Ø¹ app.js

---

## ğŸ“ Ø§Ù„Ø¯Ø¹Ù… ÙˆØ§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©

- ğŸ“§ Email: support@alawael.com
- ğŸ“± Phone: +966-XX-XXX-XXXX
- ğŸŒ Website: www.alawael.com

**Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© Â© 2025 - Ù†Ø¸Ø§Ù… Ø§Ù„Ø£ÙˆØ§Ø¦Ù„**
