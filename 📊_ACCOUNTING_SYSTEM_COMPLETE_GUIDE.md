# ๐ฐ ุงููุธุงู ุงููุญุงุณุจู ุงููุชูุฏู - ุฏููู ูุงูู

## ๐ ูุธุฑุฉ ุนุงูุฉ

ุชู ุชุทููุฑ **ูุธุงู ูุญุงุณุจู ุงุญุชุฑุงูู ูููู** ูุชุถูู ุฌููุน ุงูููุฒุงุช ุงูุฃุณุงุณูุฉ ูุงููุชูุฏูุฉ
ูุฅุฏุงุฑุฉ ุงูุญุณุงุจุงุช ุงููุงููุฉ ูู ุงููุคุณุณุงุช.

---

## โจ ุงูููุฒุงุช ุงูุฑุฆูุณูุฉ

### 1. ๐ ุฏููู ุงูุญุณุงุจุงุช (Chart of Accounts)

- ูุธุงู ุดุฌุฑู ูุฑูู ููุญุณุงุจุงุช
- 5 ุฃููุงุน ุฑุฆูุณูุฉ: ุฃุตููุ ุฎุตููุ ุญููู ููููุฉุ ุฅูุฑุงุฏุงุชุ ูุตุฑููุงุช
- ุฏุนู ุงูุญุณุงุจุงุช ุงููุฑุนูุฉ
- ุฅุฏุงุฑุฉ ุงูุนููุงุช ุงููุชุนุฏุฏุฉ
- ุชูุนูู/ุชุนุทูู ุงูุญุณุงุจุงุช

### 2. ๐ ูููุฏ ุงูููููุฉ (Journal Entries)

- ุฅูุดุงุก ูููุฏ ูุฏููุฉ ูุชููุงุฆูุฉ
- ุงูุชุญูู ุงูุชููุงุฆู ูู ุชูุงุฒู ุงููุฏูู ูุงูุฏุงุฆู
- ุชุฑุญูู ุงููููุฏ
- ุนูุณ ุงููููุฏ
- ุณุฌู ูุงูู ููุชุฏููู

### 3. ๐งพ ุงูููุงุชูุฑ (Invoices)

- ููุงุชูุฑ ุงููุจูุนุงุช
- ููุงุชูุฑ ุงููุดุชุฑูุงุช
- ููุงุชูุฑ ุงููุฑุชุฌุนุงุช
- ุญุณุงุจ ุถุฑูุจุฉ ุงููููุฉ ุงููุถุงูุฉ ุชููุงุฆูุงู
- ุชุชุจุน ุญุงูุฉ ุงููุงุชูุฑุฉ
- ุชูููุฏ PDF ููููุงุชูุฑ

### 4. ๐ณ ุงููุฏููุนุงุช (Payments)

- ุชุณุฌูู ุงููุฏููุนุงุช
- ุทุฑู ุฏูุน ูุชุนุฏุฏุฉ
- ุฑุจุท ุชููุงุฆู ุจุงูููุงุชูุฑ
- ุฅูุดุงุก ูููุฏ ูุญุงุณุจูุฉ ุชููุงุฆูุงู

### 5. ๐ ุงูุชูุงุฑูุฑ ุงููุงููุฉ (Financial Reports)

#### ุชูุงุฑูุฑ ูุชูุฏูุฉ:

- **ููุฒุงู ุงููุฑุงุฌุนุฉ** (Trial Balance)
- **ุงูููุฒุงููุฉ ุงูุนููููุฉ** (Balance Sheet)
- **ูุงุฆูุฉ ุงูุฏุฎู** (Income Statement)
- **ูุงุฆูุฉ ุงูุชุฏููุงุช ุงูููุฏูุฉ** (Cash Flow Statement)
- **ุฏูุชุฑ ุงูุฃุณุชุงุฐ ุงูุนุงู** (General Ledger)
- **ุฃุนูุงุฑ ุงูุฏููู** (Aged Receivables/Payables)

### 6. ๐งฎ ุถุฑูุจุฉ ุงููููุฉ ุงููุถุงูุฉ (VAT)

- ุญุณุงุจ ุชููุงุฆู ููุถุฑูุจุฉ
- ุชูุงุฑูุฑ ุถุฑูุจูุฉ ุดุงููุฉ
- ุฅูุฑุงุฑุงุช ุถุฑูุจูุฉ
- ุฏุนู ูุณุจุฉ 15% (ุงูุณุนูุฏูุฉ)

### 7. ๐ ุงูููุฒุงููุฉ (Budgeting)

- ุฅูุดุงุก ููุฒุงููุงุช ุณูููุฉ/ุฑุจุน ุณูููุฉ/ุดูุฑูุฉ
- ุชุญููู ุงูุงูุญุฑุงูุงุช
- ุชุชุจุน ุงูุฅููุงู ุงููุนูู
- ูุณุจ ุงูุงุณุชุฎุฏุงู

### 8. ๐ธ ุงููุตุฑููุงุช (Expenses)

- ุชุณุฌูู ุงููุตุฑููุงุช
- ุชุตููู ุงููุตุฑููุงุช
- ุณูุฑ ุนูู ุงูููุงููุงุช
- ุฑูุน ุงูุฅูุตุงูุงุช

### 9. ๐ ุงูุชุญูููุงุช ุงููุงููุฉ (Financial Analytics)

- ููุญุฉ ูุนูููุงุช ุดุงููุฉ
- ุชุญููู ุงูุฑุจุญูุฉ
- ุงููุณุจ ุงููุงููุฉ
- ูุคุดุฑุงุช ุงูุฃุฏุงุก ุงูุฑุฆูุณูุฉ

---

## ๐๏ธ ุงูุจููุฉ ุงูุชูููุฉ

### ุงูููุงุฐุฌ (Models)

```
backend/models/
โโโ Account.js                  // ุฏููู ุงูุญุณุงุจุงุช
โโโ JournalEntry.js            // ูููุฏ ุงูููููุฉ
โโโ Invoice.js                 // ุงูููุงุชูุฑ
โโโ Payment.js                 // ุงููุฏููุนุงุช
โโโ Expense.js                 // ุงููุตุฑููุงุช
โโโ Budget.js                  // ุงูููุฒุงููุงุช
โโโ VATReturn.js               // ุฅูุฑุงุฑุงุช ุงูุถุฑูุจุฉ
โโโ AccountingSettings.js      // ุฅุนุฏุงุฏุงุช ุงููุธุงู
โโโ AuditLog.js                // ุณุฌู ุงูุชุฏููู
```

### ุงูุฎุฏูุงุช (Services)

```javascript
backend / services / accounting.service.js;
```

**ุงููุธุงุฆู ุงูุฑุฆูุณูุฉ:**

- ุฅุฏุงุฑุฉ ุฏููู ุงูุญุณุงุจุงุช (4 ูุธุงุฆู)
- ุฅุฏุงุฑุฉ ูููุฏ ุงูููููุฉ (5 ูุธุงุฆู)
- ุฅุฏุงุฑุฉ ุงูููุงุชูุฑ ูุงููุฏููุนุงุช (6 ูุธุงุฆู)
- ุชูููุฏ ุงูุชูุงุฑูุฑ ุงููุงููุฉ (7 ูุธุงุฆู)
- ุฅุฏุงุฑุฉ ุงูุถุฑุงุฆุจ (2 ูุธููุฉ)
- **ุฅุฌูุงูู: 30+ ูุธููุฉ**

### ุงููุณุงุฑุงุช (Routes)

```javascript
backend / routes / accounting.routes.js;
```

**ููุงุท ุงูููุงูุฉ:**

- 40+ API endpoint
- ูุตุงุฏูุฉ JWT ูุงููุฉ
- ุชูููุถ ูุงุฆู ุนูู ุงูุฃุฏูุงุฑ
- ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช

---

## ๐ ุงูุฃูุงู

### ุงููุตุงุฏูุฉ ูุงูุชูููุถ

```javascript
// ุฌููุน ุงููุณุงุฑุงุช ูุญููุฉ
router.use(authenticate);
router.use(authorize(['accountant', 'admin']));
```

### ุงูุฃุฏูุงุฑ ุงููุฏุนููุฉ:

- **ูุญุงุณุจ** (accountant): ุตูุงุญูุงุช ูุงููุฉ ูู ุงููุญุงุณุจุฉ
- **ูุฏูุฑ** (admin): ุตูุงุญูุงุช ุฅุฏุงุฑูุฉ ุดุงููุฉ

### ุณุฌู ุงูุชุฏููู

- ุชุณุฌูู ุฌููุน ุงูุนูููุงุช ุงููุญุงุณุจูุฉ
- ุชุชุจุน ุงููุณุชุฎุฏู ูุงูููุช ูุงูุชูุงุตูู
- ุญูุธ ุฏุงุฆู ููุณุฌูุงุช

---

## ๐ API ุงูุฑุฆูุณูุฉ

### 1. ุฏููู ุงูุญุณุงุจุงุช

#### ุงูุญุตูู ุนูู ุงูุญุณุงุจุงุช

```
GET /api/accounting/accounts
Query: type, parentId, isActive, searchTerm
```

#### ุฅูุดุงุก ุญุณุงุจ

```
POST /api/accounting/accounts
Body: {
  code: "1010",
  name: "ุงูุตูุฏูู",
  type: "asset",
  category: "current_asset"
}
```

#### ุชุญุฏูุซ ุญุณุงุจ

```
PUT /api/accounting/accounts/:id
```

#### ุฑุตูุฏ ุงูุญุณุงุจ

```
GET /api/accounting/accounts/:id/balance
Query: startDate, endDate
```

---

### 2. ูููุฏ ุงูููููุฉ

#### ุงูุญุตูู ุนูู ุงููููุฏ

```
GET /api/accounting/journal-entries
Query: startDate, endDate, status, type, page, limit
```

#### ุฅูุดุงุก ููุฏ

```
POST /api/accounting/journal-entries
Body: {
  date: "2026-01-19",
  description: "ููุฏ ุงูุชุชุงุญู",
  lines: [
    { accountId: "...", debit: 10000, credit: 0 },
    { accountId: "...", debit: 0, credit: 10000 }
  ]
}
```

#### ุชุฑุญูู ููุฏ

```
POST /api/accounting/journal-entries/:id/post
```

#### ุนูุณ ููุฏ

```
POST /api/accounting/journal-entries/:id/reverse
Body: { reason: "..." }
```

---

### 3. ุงูููุงุชูุฑ

#### ุงูุญุตูู ุนูู ุงูููุงุชูุฑ

```
GET /api/accounting/invoices
Query: status, type, customerId, startDate, endDate
```

#### ุฅูุดุงุก ูุงุชูุฑุฉ

```
POST /api/accounting/invoices
Body: {
  type: "sales",
  date: "2026-01-19",
  customerName: "ุดุฑูุฉ ABC",
  items: [
    {
      description: "ุฎุฏูุฉ ุงุณุชุดุงุฑูุฉ",
      quantity: 1,
      unitPrice: 5000,
      taxRate: 0.15
    }
  ]
}
```

#### ุชุณุฌูู ุฏูุนุฉ

```
POST /api/accounting/invoices/:id/pay
Body: {
  amount: 5750,
  paymentMethod: "bank_transfer",
  paymentDate: "2026-01-19",
  accountId: "..."
}
```

#### ุชูููุฏ PDF

```
GET /api/accounting/invoices/:id/pdf
```

---

### 4. ุงูุชูุงุฑูุฑ ุงููุงููุฉ

#### ููุฒุงู ุงููุฑุงุฌุนุฉ

```
GET /api/accounting/reports/trial-balance
Query: startDate, endDate, detailed
```

#### ุงูููุฒุงููุฉ ุงูุนููููุฉ

```
GET /api/accounting/reports/balance-sheet
Query: asOfDate
```

#### ูุงุฆูุฉ ุงูุฏุฎู

```
GET /api/accounting/reports/income-statement
Query: startDate, endDate
```

#### ูุงุฆูุฉ ุงูุชุฏููุงุช ุงูููุฏูุฉ

```
GET /api/accounting/reports/cash-flow
Query: startDate, endDate
```

#### ุฏูุชุฑ ุงูุฃุณุชุงุฐ ุงูุนุงู

```
GET /api/accounting/reports/general-ledger
Query: accountId, startDate, endDate
```

#### ุฃุนูุงุฑ ุงูุฏููู - ุงููุฏูููู

```
GET /api/accounting/reports/aged-receivables
Query: asOfDate
```

#### ุฃุนูุงุฑ ุงูุฏููู - ุงูุฏุงุฆููู

```
GET /api/accounting/reports/aged-payables
Query: asOfDate
```

---

### 5. ุถุฑูุจุฉ ุงููููุฉ ุงููุถุงูุฉ

#### ุชูุฑูุฑ ุงูุถุฑูุจุฉ

```
GET /api/accounting/taxes/vat-report
Query: startDate, endDate
```

#### ุฅูุดุงุก ุฅูุฑุงุฑ ุถุฑูุจู

```
POST /api/accounting/taxes/vat-return
Body: {
  period: {
    startDate: "2026-01-01",
    endDate: "2026-03-31"
  },
  ...
}
```

---

### 6. ุงูููุฒุงููุฉ

#### ุงูุญุตูู ุนูู ุงูููุฒุงููุงุช

```
GET /api/accounting/budgets
Query: fiscalYear, status
```

#### ุฅูุดุงุก ููุฒุงููุฉ

```
POST /api/accounting/budgets
Body: {
  name: "ููุฒุงููุฉ 2026",
  fiscalYear: 2026,
  period: "annual",
  startDate: "2026-01-01",
  endDate: "2026-12-31",
  lines: [...]
}
```

#### ุชุญููู ุงูุงูุญุฑุงูุงุช

```
GET /api/accounting/budgets/:id/variance
```

---

### 7. ุงููุตุฑููุงุช

#### ุงูุญุตูู ุนูู ุงููุตุฑููุงุช

```
GET /api/accounting/expenses
Query: category, status, startDate, endDate
```

#### ุฅูุดุงุก ูุตุฑูู

```
POST /api/accounting/expenses
Body: {
  date: "2026-01-19",
  category: "utilities",
  description: "ูุงุชูุฑุฉ ููุฑุจุงุก",
  amount: 2500,
  accountId: "..."
}
```

#### ุงูููุงููุฉ ุนูู ูุตุฑูู

```
POST /api/accounting/expenses/:id/approve
Body: { approved: true }
```

---

### 8. ุงูุชุญูููุงุช

#### ููุญุฉ ุงููุนูููุงุช

```
GET /api/accounting/analytics/dashboard
Query: startDate, endDate
```

#### ุชุญููู ุงูุฑุจุญูุฉ

```
GET /api/accounting/analytics/profitability
Query: startDate, endDate, groupBy
```

#### ุงููุณุจ ุงููุงููุฉ

```
GET /api/accounting/analytics/financial-ratios
Query: asOfDate
```

---

### 9. ุนูููุงุช ุฅุถุงููุฉ

#### ุณุฌู ุงูุชุฏููู

```
GET /api/accounting/audit-trail
Query: startDate, endDate, userId, action
```

#### ุชุตุฏูุฑ ุงูุจูุงูุงุช

```
POST /api/accounting/export
Body: { format: "excel", dataType: "accounts" }
```

#### ุงุณุชูุฑุงุฏ ุงูุจูุงูุงุช

```
POST /api/accounting/import
Body: FormData with file
```

#### ุงูุฅุนุฏุงุฏุงุช

```
GET /api/accounting/settings
PUT /api/accounting/settings
```

#### ุฅููุงู ุงููุชุฑุฉ

```
POST /api/accounting/close-period
Body: { endDate: "2026-12-31" }
```

#### ุงูุชุณููุฉ ุงูุจูููุฉ

```
POST /api/accounting/reconcile
Body: { accountId: "...", statementDate: "..." }
```

---

## ๐ฏ ุญุงูุงุช ุงูุงุณุชุฎุฏุงู

### ุงูุณููุงุฑูู 1: ุฅูุดุงุก ูุงุชูุฑุฉ ูุจูุนุงุช ูุงููุฉ

```javascript
// 1. ุฅูุดุงุก ุงููุงุชูุฑุฉ
const invoice = await fetch('/api/accounting/invoices', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
    Authorization: 'Bearer ' + token,
  },
  body: JSON.stringify({
    type: 'sales',
    date: '2026-01-19',
    customerName: 'ูุฑูุฒ ุงูุชุฃููู ุงูุทุจู',
    customerEmail: 'info@rehab.com',
    items: [
      {
        description: 'ุฎุฏูุฉ ุนูุงุฌ ุทุจูุนู - 10 ุฌูุณุงุช',
        quantity: 10,
        unitPrice: 500,
        taxRate: 0.15,
      },
    ],
  }),
});

// 2. ุชุณุฌูู ุงูุฏูุนุฉ
const payment = await fetch(`/api/accounting/invoices/${invoice._id}/pay`, {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
    Authorization: 'Bearer ' + token,
  },
  body: JSON.stringify({
    amount: 5750, // 5000 + 15% ุถุฑูุจุฉ
    paymentMethod: 'bank_transfer',
    paymentDate: '2026-01-19',
    accountId: bankAccountId,
  }),
});

// 3. ุชูููุฏ PDF
const pdf = await fetch(`/api/accounting/invoices/${invoice._id}/pdf`);
```

---

### ุงูุณููุงุฑูู 2: ุชูููุฏ ุชูุงุฑูุฑ ุดูุฑูุฉ

```javascript
const month = {
  startDate: '2026-01-01',
  endDate: '2026-01-31',
};

// 1. ูุงุฆูุฉ ุงูุฏุฎู
const incomeStatement = await fetch(
  `/api/accounting/reports/income-statement?startDate=${month.startDate}&endDate=${month.endDate}`
);

// 2. ููุฒุงู ุงููุฑุงุฌุนุฉ
const trialBalance = await fetch(
  `/api/accounting/reports/trial-balance?startDate=${month.startDate}&endDate=${month.endDate}`
);

// 3. ุงูุชุฏููุงุช ุงูููุฏูุฉ
const cashFlow = await fetch(
  `/api/accounting/reports/cash-flow?startDate=${month.startDate}&endDate=${month.endDate}`
);
```

---

### ุงูุณููุงุฑูู 3: ุฅุฏุงุฑุฉ ุงูููุฒุงููุฉ ุงูุณูููุฉ

```javascript
// 1. ุฅูุดุงุก ููุฒุงููุฉ
const budget = await fetch('/api/accounting/budgets', {
  method: 'POST',
  body: JSON.stringify({
    name: 'ููุฒุงููุฉ 2026',
    fiscalYear: 2026,
    period: 'annual',
    startDate: '2026-01-01',
    endDate: '2026-12-31',
    lines: [
      { accountId: salariesAccountId, amount: 500000 },
      { accountId: rentAccountId, amount: 120000 },
      { accountId: utilitiesAccountId, amount: 60000 },
    ],
  }),
});

// 2. ุชุญููู ุงูุงูุญุฑุงูุงุช ุดูุฑูุงู
const variance = await fetch(`/api/accounting/budgets/${budget._id}/variance`);
```

---

## ๐ ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ูููุฐุฌ Account (ุงูุญุณุงุจ)

```javascript
{
  code: "1010",              // ููุฏ ุงูุญุณุงุจ
  name: "ุงูุตูุฏูู",           // ุงุณู ุงูุญุณุงุจ
  type: "asset",             // ุงูููุน
  category: "current_asset", // ุงููุฆุฉ
  parentId: null,            // ุงูุญุณุงุจ ุงูุฃุจ
  isActive: true,            // ูุดุทุ
  isPostable: true,          // ูุงุจู ููุชุฑุญููุ
  currency: "SAR"            // ุงูุนููุฉ
}
```

### ูููุฐุฌ JournalEntry (ููุฏ ุงูููููุฉ)

```javascript
{
  reference: "JE-2026-000001",
  date: "2026-01-19",
  description: "ููุฏ ุงูุชุชุงุญู",
  type: "manual",
  status: "posted",
  lines: [
    {
      accountId: "...",
      debit: 100000,
      credit: 0,
      description: "ุฑุตูุฏ ุงูุชุชุงุญู"
    },
    {
      accountId: "...",
      debit: 0,
      credit: 100000,
      description: "ุฑุฃุณ ุงููุงู"
    }
  ]
}
```

### ูููุฐุฌ Invoice (ุงููุงุชูุฑุฉ)

```javascript
{
  invoiceNumber: "INV-2026-000001",
  type: "sales",
  date: "2026-01-19",
  dueDate: "2026-02-18",
  customerName: "ูุฑูุฒ ุงูุชุฃููู",
  items: [...],
  subtotal: 5000,
  taxAmount: 750,
  total: 5750,
  status: "paid",
  paidAmount: 5750,
  remainingAmount: 0
}
```

---

## ๐ ุงูุชุซุจูุช ูุงูุฅุนุฏุงุฏ

### 1. ุชุซุจูุช ุงูุญุฒู ุงููุทููุจุฉ

```bash
npm install mongoose express jsonwebtoken
```

### 2. ุชุณุฌูู ุงููุณุงุฑุงุช

```javascript
// backend/server.js
const accountingRoutes = require('./routes/accounting.routes');
app.use('/api/accounting', accountingRoutes);
```

### 3. ุฅุนุฏุงุฏ ุฏููู ุงูุญุณุงุจุงุช ุงูุฃุณุงุณู

ูู ุจุชุดุบูู ุงูุณูุฑูุจุช ุงูุชุงูู ูุฅูุดุงุก ุงูุญุณุงุจุงุช ุงูุฃุณุงุณูุฉ:

```javascript
// backend/scripts/setup-accounts.js
const Account = require('../models/Account');

const defaultAccounts = [
  // ุงูุฃุตูู
  { code: '1000', name: 'ุงูุฃุตูู', type: 'asset', isPostable: false },
  { code: '1010', name: 'ุงูุตูุฏูู', type: 'asset', parentId: '1000' },
  { code: '1020', name: 'ุงูุจูู', type: 'asset', parentId: '1000' },
  { code: '1030', name: 'ุงููุฏูููู', type: 'asset', parentId: '1000' },

  // ุงูุฎุตูู
  { code: '2000', name: 'ุงูุฎุตูู', type: 'liability', isPostable: false },
  { code: '2010', name: 'ุงูุฏุงุฆููู', type: 'liability', parentId: '2000' },
  {
    code: '2020',
    name: 'ุถุฑูุจุฉ ุงููููุฉ ุงููุถุงูุฉ',
    type: 'liability',
    parentId: '2000',
  },

  // ุญููู ุงูููููุฉ
  { code: '3000', name: 'ุญููู ุงูููููุฉ', type: 'equity', isPostable: false },
  { code: '3010', name: 'ุฑุฃุณ ุงููุงู', type: 'equity', parentId: '3000' },
  { code: '3020', name: 'ุงูุฃุฑุจุงุญ ุงููุญุชุฌุฒุฉ', type: 'equity', parentId: '3000' },

  // ุงูุฅูุฑุงุฏุงุช
  { code: '4000', name: 'ุงูุฅูุฑุงุฏุงุช', type: 'revenue', isPostable: false },
  { code: '4010', name: 'ุฅูุฑุงุฏุงุช ุงูุฎุฏูุงุช', type: 'revenue', parentId: '4000' },

  // ุงููุตุฑููุงุช
  { code: '5000', name: 'ุงููุตุฑููุงุช', type: 'expense', isPostable: false },
  { code: '5010', name: 'ุฑูุงุชุจ ุงูููุธููู', type: 'expense', parentId: '5000' },
  { code: '5020', name: 'ุงูุฅูุฌุงุฑ', type: 'expense', parentId: '5000' },
  { code: '5030', name: 'ุงูููุฑุจุงุก ูุงููุงุก', type: 'expense', parentId: '5000' },
];

async function setupAccounts() {
  for (const account of defaultAccounts) {
    await Account.create(account);
  }
  console.log('โ ุชู ุฅูุดุงุก ุฏููู ุงูุญุณุงุจุงุช ุจูุฌุงุญ');
}
```

---

## ๐ ุงุฎุชุจุงุฑ ุงููุธุงู

### ุงุฎุชุจุงุฑ 1: ุฅูุดุงุก ุญุณุงุจ

```bash
curl -X POST http://localhost:3001/api/accounting/accounts \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "code": "1040",
    "name": "ุญุณุงุจ ุจูู ุงูุฑุงุฌุญู",
    "type": "asset",
    "category": "current_asset"
  }'
```

### ุงุฎุชุจุงุฑ 2: ุฅูุดุงุก ููุฏ ููููุฉ

```bash
curl -X POST http://localhost:3001/api/accounting/journal-entries \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "date": "2026-01-19",
    "description": "ุฅูุฏุงุน ูู ุงูุจูู",
    "lines": [
      { "accountId": "BANK_ACCOUNT_ID", "debit": 50000, "credit": 0 },
      { "accountId": "CASH_ACCOUNT_ID", "debit": 0, "credit": 50000 }
    ]
  }'
```

---

## ๐ ุงูุฃุฏุงุก ูุงูุชุญุณูู

### ุงุณุชุนูุงูุงุช ููุญุณููุฉ

- ุงุณุชุฎุฏุงู ุงูููุงุฑุณ ุนูู ุงูุญููู ุงูุฃุณุงุณูุฉ
- Pagination ููุจูุงูุงุช ุงููุจูุฑุฉ
- Aggregation ููุชูุงุฑูุฑ ุงููุนูุฏุฉ
- Caching ููุชูุงุฑูุฑ ุงููุณุชุฎุฏูุฉ ุจูุซุฑุฉ

### ูุนุงูุฌุฉ ุงูุจูุงูุงุช ุงููุจูุฑุฉ

```javascript
// ูุนุงูุฌุฉ ุฏูุนุงุช ูุจูุฑุฉ ูู ุงููููุฏ
const batchSize = 1000;
for (let i = 0; i < entries.length; i += batchSize) {
  const batch = entries.slice(i, i + batchSize);
  await JournalEntry.insertMany(batch);
}
```

---

## ๐ก๏ธ ุงูุฃูุงู ูุฃูุถู ุงูููุงุฑุณุงุช

### 1. ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช

```javascript
// ุงุณุชุฎุฏุงู ููุชุจุฉ express-validator
const { body } = require('express-validator');

router.post(
  '/accounts',
  body('code').notEmpty().trim(),
  body('name').notEmpty().trim(),
  body('type').isIn(['asset', 'liability', 'equity', 'revenue', 'expense'])
  // ...
);
```

### 2. ููุน SQL Injection

- ุงุณุชุฎุฏุงู Mongoose Schemas
- ุนุฏู ุชูุฑูุฑ query parameters ูุจุงุดุฑุฉ

### 3. Rate Limiting

```javascript
const rateLimit = require('express-rate-limit');

const accountingLimiter = rateLimit({
  windowMs: 15 * 60 * 1000, // 15 ุฏูููุฉ
  max: 100, // 100 ุทูุจ ูุญุฏ ุฃูุตู
});

app.use('/api/accounting', accountingLimiter);
```

---

## ๐ ุฃูุซูุฉ ูุชูุฏูุฉ

### ุฅููุงู ุงูุณูุฉ ุงููุงููุฉ

```javascript
async function closeF fiscalYear(year) {
  // 1. ุงูุชุญูู ูู ุชูุงุฒู ุงูุญุณุงุจุงุช
  const trialBalance = await accountingService.generateTrialBalance({
    startDate: `${year}-01-01`,
    endDate: `${year}-12-31`
  });

  if (!trialBalance.totals.balanced) {
    throw new Error('ููุฒุงู ุงููุฑุงุฌุนุฉ ุบูุฑ ูุชูุงุฒู');
  }

  // 2. ุญุณุงุจ ุตุงูู ุงูุฑุจุญ/ุงูุฎุณุงุฑุฉ
  const incomeStatement = await accountingService.generateIncomeStatement({
    startDate: `${year}-01-01`,
    endDate: `${year}-12-31`
  });

  const netIncome = incomeStatement.netIncome.amount;

  // 3. ุฅูุดุงุก ููุฏ ุงูุฅููุงู
  const settings = await AccountingSettings.findOne();

  await accountingService.createJournalEntry({
    date: new Date(`${year}-12-31`),
    description: `ููุฏ ุฅููุงู ุงูุณูุฉ ุงููุงููุฉ ${year}`,
    type: 'closing',
    lines: [
      {
        accountId: settings.defaultAccounts.retainedEarningsAccount,
        debit: netIncome > 0 ? 0 : Math.abs(netIncome),
        credit: netIncome > 0 ? netIncome : 0,
        description: 'ููุฏ ุฅููุงู ุตุงูู ุงูุฑุจุญ/ุงูุฎุณุงุฑุฉ'
      }
      // ุฅููุงู ุญุณุงุจุงุช ุงูุฅูุฑุงุฏุงุช ูุงููุตุฑููุงุช...
    ]
  });

  // 4. ูุถุน ุนูุงูุฉ ุนูู ุงููุชุฑุฉ ูููููุฉ
  await accountingService.closePeriod({ endDate: `${year}-12-31` });

  console.log(`โ ุชู ุฅููุงู ุงูุณูุฉ ุงููุงููุฉ ${year}`);
}
```

---

## ๐ ุงููุฑุงุฌุน ูุงูููุงุฑุฏ

### ุงูุชูุซูู ุงูุฑุณูู

- [Mongoose Documentation](https://mongoosejs.com/)
- [Express.js](https://expressjs.com/)
- [JWT Authentication](https://jwt.io/)

### ูุนุงููุฑ ุงููุญุงุณุจุฉ

- ุงููุนุงููุฑ ุงูุฏูููุฉ ูุฅุนุฏุงุฏ ุงูุชูุงุฑูุฑ ุงููุงููุฉ (IFRS)
- ุงููุนุงููุฑ ุงูุณุนูุฏูุฉ ูููุญุงุณุจุฉ
- ูุธุงู ุถุฑูุจุฉ ุงููููุฉ ุงููุถุงูุฉ ุงูุณุนูุฏู

---

## โ ูุงุฆูุฉ ุงูุชุญูู

### ูุจู ุงูุฅุทูุงู:

- [ ] ุฅุนุฏุงุฏ ุฏููู ุงูุญุณุงุจุงุช ุงูุฃุณุงุณู
- [ ] ุชูููู ุงูุฅุนุฏุงุฏุงุช ุงููุญุงุณุจูุฉ
- [ ] ุฅูุดุงุก ุงููุณุชุฎุฏููู ูุงูุฃุฏูุงุฑ
- [ ] ุงุฎุชุจุงุฑ ุฅูุดุงุก ุงููููุฏ
- [ ] ุงุฎุชุจุงุฑ ุฅูุดุงุก ุงูููุงุชูุฑ
- [ ] ูุฑุงุฌุนุฉ ุงูุชูุงุฑูุฑ ุงููุงููุฉ
- [ ] ุงูุชุญูู ูู ุญุณุงุจุงุช ุงูุถุฑูุจุฉ
- [ ] ุฅุนุฏุงุฏ ุงููุณุฎ ุงูุงุญุชูุงุทูุฉ

### ุจุนุฏ ุงูุฅุทูุงู:

- [ ] ูุฑุงูุจุฉ ุงูุฃุฏุงุก
- [ ] ูุฑุงุฌุนุฉ ุณุฌูุงุช ุงูุชุฏููู
- [ ] ุชุญุฏูุซุงุช ุฏูุฑูุฉ ูููุธุงู
- [ ] ุชุฏุฑูุจ ุงููุณุชุฎุฏููู
- [ ] ุฏุนู ููู ูุณุชูุฑ

---

## ๐ ุงูุฎูุงุตุฉ

ุชู ุชุทููุฑ **ูุธุงู ูุญุงุณุจู ุงุญุชุฑุงูู ููุชูุงูู** ูุดูู:

โ **9 ููุงุฐุฌ** ูุงููุฉ (Models) โ **30+ ูุธููุฉ** (Service Methods) โ **40+ ููุทุฉ
ููุงูุฉ** (API Endpoints) โ **7 ุชูุงุฑูุฑ** ูุงููุฉ ุดุงููุฉ โ **ุญูุงูุฉ ูุงููุฉ** (JWT +
Roles) โ **ุณุฌู ุชุฏููู** ุดุงูู โ **ุฏุนู ุถุฑูุจุฉ** ุงููููุฉ ุงููุถุงูุฉ โ **ุฅุฏุงุฑุฉ
ููุฒุงููุงุช** โ **ุชุญูููุงุช ูุชูุฏูุฉ**

---

## ๐ ุงูุฏุนู ุงูููู

ููุงุณุชูุณุงุฑุงุช ูุงูุฏุนู:

- ๐ง ุงูุจุฑูุฏ ุงูุฅููุชุฑููู: support@system.com
- ๐ฑ ุงููุงุชู: +966-XX-XXX-XXXX
- ๐ฌ ุงูุฏุนู ุงูููู: ูุชุงุญ 24/7

---

**ุชู ุจุญูุฏ ุงููู โจ**

ุงูุชุงุฑูุฎ: 19 ููุงูุฑ 2026 ุงููุณุฎุฉ: 1.0.0
